(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["api-browse","form-builder~forms-trash~groups-trash~integration-browse~leave-trash~portals-trash~repositories-over~fc714461","form-builder~forms-trash~groups-trash~integration-browse~leave-trash~portals-trash~repositories-over~b968ab97","form-builder~portal-builder~upload-and-index~workflow-builder","custom-form~external-request~portal-accesss-custom","integration-browse~repositories-reports-overview"],{"00c2":function(e,t,s){e.exports=s.p+"img/name-light.137e40b6.png"},"00f0":function(e,t,s){},"0170":function(e,t,s){"use strict";var i=s("a026"),a=s("87e8"),o=s("e277");t["a"]=i["default"].extend({name:"QItemLabel",mixins:[a["a"]],props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},computed:{classes(){return{"q-item__label--overline text-overline":this.overline,"q-item__label--caption text-caption":this.caption,"q-item__label--header":this.header,ellipsis:1===parseInt(this.lines,10)}},style(){if(void 0!==this.lines&&parseInt(this.lines,10)>1)return{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":this.lines}}},render(e){return e("div",{staticClass:"q-item__label",style:this.style,class:this.classes,on:{...this.qListeners}},Object(o["c"])(this,"default"))}})},"02fb":function(e,t,s){"use strict";s("8920")},"0412":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"item-grid"}},[t("BaseScrollbar",{attrs:{height:e.breadcrumbs?"calc(100vh - 295px)":"calc(100vh - 260px)"}},e._l(e.items,(function({key:s,value:i,data:a}){return t("div",{key:i},[s?t("div",{staticClass:"group-by"},[t("span",{staticClass:"key"},[e._v(e._s(s)+": ")]),t("span",[e._v(e._s(i)+" ")]),t("span",[e._v("("+e._s(a.length)+")")])]):e._e(),e._t("items",(function(){return[t("div",{staticClass:"row q-col-gutter-md"},e._l(a,(function(s){return t("div",{key:s.id,staticClass:"col-xs-6 col-sm-4 col-md-3 col-lg-3",on:{click:function(t){return e.$emit("select",s.id)}}},[t("div",{staticClass:"card"},[e._t("header",(function(){return[t("div",{staticClass:"row items-center q-pa-md"},[e._t("avatar",(function(){return[t("BaseIcon",{attrs:{name:s.icon,color:"secondary"}})]}),{item:s}),t("div",{staticClass:"col q-mx-md"},[e._t("title",(function(){return[t("div",{staticClass:"title ellipsis"},[e._v(" "+e._s(s[e.title.name])+" ")])]}),{item:s,title:s[e.title.name]}),e._t("subtitle",(function(){return[t("div",{staticClass:"subtitle ellipsis"},[e._v(" "+e._s(s[e.subtitle.name]||"-")+" ")])]}),{subtitle:e.subtitle&&s[e.subtitle.name]})],2),s.infoIcon?e._t("infoIcon",(function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.infoIconTooltip,expression:"item.infoIconTooltip",modifiers:{top:!0}}],attrs:{icon:s.infoIcon?s.infoIcon:"",color:s.infoIconColor?s.infoIconColor:"primary","is-flat":"","no-border":""},on:{click:function(t){return e.$emit("info",s.id)}}})]}),{item:s}):e._e()],2)]}),{item:s}),e._t("content",(function(){return[e._columns.length?[t("BaseSeparator",{attrs:{"has-inset":""}}),t("div",{staticClass:"q-py-sm"},e._l(e._columns,(function(i){return t("div",{key:i.id},[e._t(i.name,(function(){return[t("div",{staticClass:"row q-px-md q-py-sm"},[t("div",{staticClass:"label ellipsis medium"},[e._v(" "+e._s(i.label)+" ")]),t("q-space"),"FILE_UPLOAD"===i.dataType?[t("div",{staticClass:"ellipsis medium text-right"},e._l(s[i.name],(function(i,a){return t("div",{key:a,staticClass:"row"},[t("FileIcon",{staticClass:"mini-avatar col-auto q-mr-sm",attrs:{"mime-type":e.fileType(i.fileName)}}),t("span",{staticClass:"text-secondary file-underline col",on:{click:function(t){return e.viewFile(i,s)}}},[e._v(e._s(i.fileName))])],1)})),0)]:[t("div",{staticClass:"ellipsis medium text-right"},[e._v(" "+e._s(s[i.name]||"-")+" ")])]],2)]}),{column:i.label,value:s[i.name],item:s})],2)})),0)]:e._e()]}),{item:s}),e.noActions?e._e():t("BaseSeparator",{attrs:{"has-inset":""}}),e.noActions?e._e():e._t("footer",(function(){return["BROWSE"===e.mode?[s.actionAccess?[t("Action",{staticClass:"col",attrs:{icon:"eva-eye-outline",label:"View"},on:{click:function(t){return t.stopPropagation(),e.$emit("select",s.id)}}})]:[t("div",{staticClass:"row items-center"},[e.security||e.visibility(s)?[s.actionButton?[t("Action",{staticClass:"col",attrs:{icon:"eva-edit-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit",s.id)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),t("Action",{staticClass:"col",attrs:{icon:"eva-shield-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("secure",s.id)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),t("Action",{staticClass:"col",attrs:{icon:"eva-trash-2-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete",s.id)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),t("BaseActionButton",{staticClass:"q-mx-md",attrs:{"is-flat":"",icon:"eva-more-vertical","no-border":""},on:{click:function(t){return t.stopPropagation(),e.$emit("more",s.id)}}})]:[t("Action",{staticClass:"col",attrs:{icon:"eva-edit-outline",label:"Edit"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit",s.id)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),t("Action",{staticClass:"col",attrs:{icon:"eva-trash-2-outline",label:"Delete"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete",s.id)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),e.showExport?[t("BaseActionButton",{staticClass:"q-mx-sm",attrs:{"is-flat":"",icon:"eva-download-outline","no-border":""},on:{click:function(t){return t.stopPropagation(),e.$emit("export",s.id)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}})]:e._e(),t("BaseActionButton",{staticClass:"q-mx-md",attrs:{"is-flat":"",icon:"eva-more-vertical","no-border":""},on:{click:function(t){return t.stopPropagation(),e.$emit("more",s.id)}}})]]:e._e()],2)]]:e._e(),e.visibility(s)||e.security?e._e():[[t("Action",{attrs:{icon:"mdi-eye-outline",label:"View"},on:{click:function(t){return t.stopPropagation(),e.$emit("select",s.id)}}})]],"TRASH"===e.mode?[e.security||e.visibility(s)?[t("Action",{attrs:{icon:"mdi-history",label:"Restore"},on:{click:function(t){return t.stopPropagation(),e.$emit("restore",s.id)}}})]:e._e()]:e._e()]}),{item:s})],2)])})),0)]}),{items:a})],2)})),0)],1)},a=[],o=(s("caad"),s("94f5")),r=s("fa1f"),n={name:"ItemGrid",components:{Action:o["a"],FileIcon:r["a"]},props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},mode:{type:String,required:!0},security:{type:Boolean,default:!0},noActions:{type:Boolean,default:!1},breadcrumbs:{type:Boolean,default:!1},showExport:{type:Boolean,default:!1}},data(){return{userId:this.$store.state.session.id,email:this.$store.state.session.email}},computed:{title(){return this.columns.find(e=>"TITLE"===e.type)},subtitle(){return this.columns.find(e=>"SUBTITLE"===e.type)},_columns(){return this.columns.filter(e=>"NORMAL"===e.type&&e.isVisible)}},methods:{visibility(e){const t=Number(this.userId),s=this.email;let i=!1;const a=e.owner?e.owner.map(e=>e.id):[0],o=e.coordinator?e.coordinator.map(e=>e.id):[0];return(e.createdBy===s||a.includes(t)||o.includes(t)||1===t)&&(i=!0),i},viewFile(e,t){e.createdBy=t.createdBy,e.createdAt=t.createdAt,this.$emit("viewFile",e)},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)}}},l=n,c=(s("0f1c"),s("2877")),d=s("2c91"),u=s("93dc"),m=s.n(u),h=Object(c["a"])(l,i,a,!1,null,null,null);t["a"]=h.exports;m()(h,"components",{QSpace:d["a"]})},"064c":function(e,t,s){"use strict";s("caad");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row items-center",attrs:{id:"item-actions"}},[(e.customProcessForm,e._e()),e.sendInvite?[t("div",{attrs:{classs:"cursor-pointer"},on:{click:function(t){return e.$emit("invite")}}},[t("q-chip",{staticClass:"cursor-pointer primary-hover q-mr-sm",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-account-plus",color:"primary","text-color":"white"}}),e._v(" Send Invite ")],1)],1)]:e._e(),e.processForward?[t("div",{attrs:{classs:"cursor-pointer"},on:{click:function(t){return e.$emit("forward")}}},[t("q-chip",{staticClass:"cursor-pointer orange-hover",attrs:{outline:"",color:"orange"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-arrow-right",color:"orange","text-color":"white"}}),e._v(" Assign ")],1)],1)]:e._e(),e.workflowInitiate?[e.initiateAccess?[t("div",{attrs:{classs:"cursor-pointer "},on:{click:function(t){return e.$emit("initiate")}}},[t("q-chip",{staticClass:"cursor-pointer secondary-hover q-mr-sm",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-plus-thick",color:"secondary","text-color":"white"}}),e._v(" Initiate ")],1)],1)]:[t("q-chip",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Choose document to initiate",expression:"'Choose document to initiate'",modifiers:{top:!0}}],staticClass:"cursor-pointer secondary-hover",attrs:{outline:"",disable:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-plus-thick",color:"secondary","text-color":"white"}}),e._v(" Initiate ")],1)]]:e._e(),e.gotoInbox?t("div",{staticClass:"cursor-pointer q-mr-xs",on:{click:function(t){return e.$emit("inbox")}}},[t("q-chip",{staticClass:"cursor-pointer primary-hover",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-email",color:"primary","text-color":"white"}}),e._v(" My Inbox ")],1)],1):e._e(),e.workflowImport?t("ImportPopup",{attrs:{"chip-button":!0,"data-imported":e.dataImported,"form-id":e.formId},on:{upload:e.upload,close:e.closeImport}}):e._e(),e.downloadAll?t("div",{staticClass:"row q-pr-xs",class:{download:e.checkIconCount}},[e.visibleDownload?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"download",expression:"'download'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-ml-xs q-mr-xs",attrs:{icon:"mdi-download-outline","is-flat":"","no-border":""},on:{click:function(t){return e.$emit("downloadAll",e.item.id)}}}):e._e(),e.visiblePrint?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"print",expression:"'print'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-ml-xs q-mr-xs",attrs:{"is-flat":"","no-border":"",icon:"eva-printer-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("printAll",e.item.id)}}}):e._e(),e.visibleEmail?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Email Sharing",expression:"'Email Sharing'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-ml-xs q-mr-xs",attrs:{"is-flat":"","no-border":"",icon:"mdi-email-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("emailAll",e.item)}}}):e._e(),e.visibleDelete?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Delete",expression:"'Delete'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-pa-sm",attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline"},on:{click:function(t){return e.$emit("deleteFileAction",e.item.id)}}}):e._e()],1):e._e(),e._t("filterSearchIcon"),e.simpleSearchFilter?t("div",[e.hideActions.includes("search")?e._e():t("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:e.searchTable}})],1):t("div",{staticClass:"q-mr-xs"},[t("SimpleSearchWithFilter",{attrs:{columns:e.columns,"filter-by":e.filterBy},on:{keyup:e.searchTable,update:e.updateSimpletSearchFilterBy}})],1),e.id?t("SelectField",{staticClass:"fieldList q-mr-sm",attrs:{"is-mandatory":"",placeholder:"Select day","is-searchable":!0,options:e.dateFilter},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}):e._e(),e.refresh||e.id?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"eva-refresh"},on:{click:function(t){return e.$emit("refresh")}}}):e._e(),e.jiraConnect?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"JIRA - Create Issue",expression:"'JIRA - Create Issue'",modifiers:{top:!0}}],attrs:{icon:"mdi-jira","no-border":"","is-flat":""},on:{click:function(t){return e.$emit("jira")}}}):e._e(),"TRASH"===e.mode?t("div",{staticClass:"row justify-end"},[e.deleteBtn?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Restore Selected Items",expression:"'Restore Selected Items'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-history"},on:{click:function(t){return t.stopPropagation(),e.$emit("restore")}}}):e._e()],1):e._e(),e.deleteBtn?t("div",[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Delete Selected Items",expression:"'Delete Selected Items'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete")}}})],1):e._e(),e.hideActions.includes("toggle")?e._e():t("ToggleColumns",{attrs:{columns:e.repositoryFields?"LIST"===e.activeView?e.columns:[]:e.columns,"repository-fields":e.repositoryFields,"toggle-id":e.toggleId},on:{"update:columns":e.updateColumns,viewColumns:e.viewColumns}}),e.hideActions.includes("sort")?e._e():t("SortItems",{attrs:{columns:e.columns,order:e.order,criteria:e.criteria},on:{"update:order":e.updateOrder,"update:criteria":e.updateCriteria}}),e.hideActions.includes("group")?e._e():t("GroupItems",{attrs:{columns:e.columns,"group-by":e.groupBy},on:{"update:groupBy":e.updateGroupBy}}),e.hideActions.includes("filter")?e._e():t("FilterItems",{attrs:{item:e.item,columns:e._columns,"filter-by":e.filterBy,"selected-filter":e.selectedFilter,"search-content":e.searchContent,"content-search":e.contentSearch,module:e.module,"module-id":e.moduleId},on:{update:e.updateFilterBy,updateContentSearch:e.updateContentSearch}}),e.importData?t("ImportPopup",{attrs:{"data-imported":e.dataImported,"form-id":e.formId},on:{upload:e.upload,close:e.closeImport,downloadTemplate:e.downloadTemplate}}):e._e(),e.importJson?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"import",expression:"'import'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-import"},on:{click:function(t){return e.$emit("import")}}}):e._e(),!e.hideActions.includes("export")&&e.exportData?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Export",expression:"'Export'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-table-arrow-right"},on:{click:function(t){return e.$emit("export")}}}):e._e(),e.hideActions.includes("activeView")?e._e():t("BaseSeparator",{staticClass:"q-mx-sm",attrs:{"is-vertical":"","has-inset":""}}),e.hideActions.includes("activeView")?e._e():t("ViewToggle",{attrs:{"active-view":e.activeView,"thumbnail-view":e.thumbnailView,"grid-view":e.gridView,module:e.module},on:{"update:activeView":e.updateActiveView}}),t("KanbanView",{attrs:{"kanban-view":e.kanbanView,"active-view":e.activeKanbanView,"kanban-list":e.kanbanList},on:{"update:activeKanbanView":e.updateActiveKanbanView,clickKanban:function(t){return e.$emit("clickKanban")}}}),e.dashboardView?t("BaseSeparator",{staticClass:"q-mx-sm",attrs:{"is-vertical":"","has-inset":""}}):e._e(),e.dashboardView?t("DashboardView",{attrs:{"dashboard-view":e.dashboardView,"chart-view":e.chartView,"table-view":e.tableView,page:e.page},on:{"update:activeDashboardView":e.updateActiveDashboardView}}):e._e(),e._t("extraIcon")],2)},a=[],o=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"columns",expression:"'columns'",modifiers:{bottom:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-table-column-plus-after"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("div",{staticClass:"row border"},[t("div",{staticClass:"title-3 q-pa-xs col-auto"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchColumns,expression:"searchColumns"}],ref:"searchQuery",staticClass:"q-pa-md",attrs:{type:"text",placeholder:"Show/Hide Columns",autofocus:""},domProps:{value:e.searchColumns},on:{keyup:function(t){return e.searchColumnList(e.searchColumns)},input:function(t){t.target.composing||(e.searchColumns=t.target.value)}}})]),e.repositoryFields&&e.columns.length?t("div",{staticClass:"col-auto q-pa-xs"},[t("BaseButton",{attrs:{label:"Apply",color:"primary"},on:{click:e.apply}})],1):e._e()]),t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight}},e._l(e._columns,(function(s){return t("ListItem",{key:s.id,class:s.display,attrs:{icon:s.isVisible?"mdi-checkbox-marked":"mdi-checkbox-blank-outline","is-selected":s.isVisible,label:s.label},on:{click:function(t){return e.updateColumns(s)}}})})),1)],1)],1)},r=[],n=(s("14d9"),s("cade")),l=s("1b0d"),c={name:"ToggleColumns",components:{ListItem:n["a"]},props:{columns:{type:Array,required:!0},repositoryFields:{type:Boolean,default:!1},toggleId:{type:Number,default:0}},data(){return{filterColumns:[],columnList:"",searchColumns:""}},computed:{_columns(){return this.columns.filter(e=>"NORMAL"===e.type)},scrollbarHeight(){const e=36*this._columns.length;return e>216?"276px":e+58+"px"}},methods:{updateColumns1(e){const t=this.columns,s=t.findIndex(t=>t.id===e);t[s].isVisible=!t[s].isVisible,this.$emit("update:columns",t)},apply(){this.filterColumns=[],console.log(this.columns),this.columns.forEach(e=>{!1===e.isVisible&&this.filterColumns.push({Fieldid:e.fieldId,value:e.isVisible})}),console.log(this.filterColumns),this.$emit("viewColumns",this.filterColumns),this.filterColumns=[]},searchColumnList(e){this.columns.forEach(t=>{t.display="",e&&(t.label.toLowerCase().includes(e.toLowerCase())||(t.display="hide"))})},async updateColumns(e){if(this.toggleId){const t=this.columns.findIndex(t=>t.id===e.id);this.columns[t].isVisible=!this.columns[t].isVisible;let s={id:e.hideId||0,columnName:e.id};const{error:i,payload:a}=await l["k"].updateHideColumns(this.toggleId,s);if(i)return void this.$alert.error(i);let o=[];e.hideId?o=this.columns.filter(t=>t.id!=e.hideId):(o=this.columns,o.push({id:a,columnName:e.id})),this.columns[t].hideId=e.hideId?0:a,this.$emit("update:columns",o)}else{const t=this.columns,s=t.findIndex(t=>t.id===e.id);t[s].isVisible=!t[s].isVisible,this.$emit("update:columns",t)}}}},d=c,u=(s("ee26"),s("2877")),m=s("4e73"),h=s("93dc"),p=s.n(h),f=Object(u["a"])(d,o,r,!1,null,"251c6f56",null),v=f.exports;p()(f,"components",{QMenu:m["a"]});var y=s("c559"),b=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"group",expression:"'group'",modifiers:{bottom:!0}}],attrs:{"is-flat":"",icon:"eva-copy-outline","no-border":""}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight,width:"240px"}},[t("div",{staticClass:"title-3 q-pa-md"},[e._v("Group By")]),e._l(e._columns,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.name===e.groupBy?"eva-radio-button-on":"eva-radio-button-off","is-selected":s.name===e.groupBy,label:s.label},on:{click:function(t){return e.updateGroupBy(s.name)}}})}))],2)],1)],1)},g=[],w={name:"GroupItems",components:{ListItem:n["a"]},props:{columns:{type:Array,required:!0},groupBy:{type:String,required:!0}},computed:{_columns(){return[{id:this.$nano.id(),label:"None",name:""},...this.columns.filter(e=>e.isGroupable)]},scrollbarHeight(){const e=36*this._columns.length;return e>216?"276px":e+58+"px"}},methods:{updateGroupBy(e){this.$emit("update:groupBy",e)}}},C=w,k=Object(u["a"])(C,b,g,!1,null,"72f07afc",null),S=k.exports;p()(k,"components",{QMenu:m["a"]});var _=s("27bd"),I=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"view-toggle"}},[e._l(e._views,(function(s){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.label,expression:"view.label",modifiers:{top:!0}}],key:s.id,attrs:{"is-flat":"","no-border":"",icon:e.activeView===s.value?s.activeIcon:s.icon,color:e.activeView===s.value?"secondary":"gray"},on:{click:function(t){return e.updateActiveView(s.value)}}})]})),t("DefaultView",{attrs:{value:e.showDefaultView,view:e.defaultView},on:{handleYes:e.handleYes,handleNo:e.handleNo,hideSheet:function(t){e.showDefaultView=!1}}})],2)},x=[],T=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"eva-info-outline","icon-color":"orange"},on:{input:e.hideSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Default view?")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" Do you want to make this "),t("b",[e._v('"('+e._s(e.view)+')"')]),e._v(" view is default? . ")]),t("p",[e._v("You can always change this view.")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"orange"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"orange"},on:{click:e.handleYes}})]},proxy:!0}])})},$=[],A=s("1c54"),F={name:"DefaultView",components:{Confirm:A["a"]},props:{value:{type:Boolean,required:!0},view:{type:String,required:!0}},methods:{handleNo(){this.$emit("handleNo",!1)},hideSheet(){this.$emit("hideSheet",!1)},handleYes(){this.$emit("handleYes",!1)}}},L=F,B=Object(u["a"])(L,T,$,!1,null,"38f8db3d",null),P=B.exports,D=s("4360"),M={name:"ViewToggle",components:{DefaultView:P},props:{activeView:{type:String,default:"GRID",validator(e){return["GRID","LIST","THUMBNAIL"].includes(e)}},thumbnailView:{type:Boolean,default:!1},gridView:{type:Boolean,default:!0},module:{type:String,default:""}},data(){return{views:[{id:this.$nano.id(),label:"Grid View",value:"GRID",icon:"mdi-view-grid-outline",activeIcon:"mdi-view-grid"},{id:this.$nano.id(),label:"List View",value:"LIST",icon:"mdi-format-list-checkbox",activeIcon:"mdi-view-list"},{id:this.$nano.id(),label:"Thumbnail View",value:"THUMBNAIL",icon:"eva-image-outline",activeIcon:"eva-image"}],showDefaultView:!1,defaultView:"",userId:this.$store.state.session.id,viewAlreadyAdded:!0,options:{}}},computed:{_views(){return this.thumbnailView?this.views:this.gridView?this.views.slice(0,2):this.views.slice(1,2)}},created(){this.getDefaultView()},methods:{updateActiveView(e){this.defaultView=e,this.showDefaultView=!0},handleYes(){this.showDefaultView=!1,this.viewAlreadyAdded?this.updateDefaultView():this.addDefaultView()},handleNo(){this.$emit("update:activeView",this.defaultView),this.showDefaultView=!1},async addDefaultView(){this.$store.commit("showLoadingBar");let e=this.$route.meta.menu,t={},s=this.$route.query.repositoryId,i="";s&&(i="files"),t=i?{preference:{[this.$route.meta.subMenu]:[{menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView}]}}:{preference:{[e]:[{menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView}]}};const{error:a,payload:o}=await l["n"].addProfilePreference(t);this.$store.commit("hideLoadingBar"),a?this.$alert.error("Error fetching changing view"):(D["a"].commit("setDefaultView",t.preference),D["a"].commit("setPreferenceId",o),this.viewAlreadyAdded=!0,this.options=t,this.$emit("update:activeView",this.defaultView))},async updateDefaultView(){this.$store.commit("showLoadingBar");let e=this.$route.meta.menu,t=this.$route.meta.breadcrumb,s=this.$route.query.repositoryId,i="";s&&(i="files");let a={};if(i)if(this.options[i])if(this.options[i].length){let e=this.options[i].findIndex(e=>e.subMenu===t);console.log(e),e>=0?this.options[i][e].view=this.defaultView:this.options[i].push({menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView})}else this.options[i]=[],this.options[i].push({menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});else this.options[i]=[],this.options[i].push({menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});else if(this.options[e])if(this.options[e].length){let s=this.options[e].findIndex(e=>e.subMenu===t);s>=0?this.options[e][s].view=this.defaultView:this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView})}else this.options[e]=[],this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});else this.options[e]=[],this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});let o=JSON.stringify(this.options);a={preference:JSON.parse(o)};const{error:r}=await l["n"].updateProfilePreference(this.$store.state.preferenceId,a);this.$store.commit("hideLoadingBar"),r?this.$alert.error("Error fetching changing view"):(D["a"].commit("setDefaultView",a.preference),this.$emit("update:activeView",this.defaultView))},async getDefaultView(){const{error:e,payload:t}=await l["n"].getProfilePreference(this.userId);e?this.$alert.error("Error fetching get default view"):t?(this.options=JSON.parse(t.options),D["a"].commit("setDefaultView",this.options),D["a"].commit("setPreferenceId",t.id)):this.viewAlreadyAdded=!1}}},q=M,N=(s("cd8d"),Object(u["a"])(q,I,x,!1,null,"75627166",null)),O=N.exports,E=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"kanban-view"}},[e.kanbanView?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Kanban View",expression:"'Kanban View'",modifiers:{bottom:!0}}],attrs:{"is-flat":"",icon:(e.activeKanban,"mdi-grid"),color:e.activeKanban?"secondary":"gray","no-border":""},on:{click:function(t){return e.$emit("clickKanban")}}},[e.kanbanList.length?t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight,width:"240px"}},e._l(e.kanbanList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.name===e.activeView?"eva-radio-button-on":"eva-radio-button-off","is-selected":s.name===e.activeView,label:s.label},on:{click:function(t){return e.selectKanban(s.name)}}})})),1)],1):e._e()],1):e._e(),t("DefaultView",{attrs:{value:e.showDefaultView,view:e.defaultView},on:{handleYes:e.handleYes,handleNo:e.handleNo,hideSheet:function(t){e.showDefaultView=!1}}})],1)},V=[],R={name:"KanbanView",components:{ListItem:n["a"],DefaultView:P},props:{activeView:{type:String,default:""},kanbanView:{type:Boolean,default:!1},kanbanList:{type:Array,default:()=>[]}},data(){return{showDefaultView:!1,defaultView:"",userId:this.$store.state.session.id,viewAlreadyAdded:!0,options:{},defaultViewId:""}},computed:{scrollbarHeight(){const e=36*this.kanbanList.length;return e>216?"276px":e+58+"px"},activeKanban(){return"LIST"!==this.activeView&&"GRID"!==this.activeView&&"CHART"!==this.activeView&&"TABLE"!==this.activeView}},created(){this.getDefaultView()},methods:{selectKanban(e){let t=this.kanbanList.find(t=>t.name===e);console.log(t),t&&(this.defaultView=t.label),this.defaultViewId=e,this.showDefaultView=!0},handleYes(){this.showDefaultView=!1,this.viewAlreadyAdded?this.updateDefaultView():this.addDefaultView()},handleNo(){this.$emit("update:activeKanbanView",this.defaultViewId),this.showDefaultView=!1},async addDefaultView(){this.$store.commit("showLoadingBar");let e=this.$route.meta.menu,t={preference:{[e]:[{menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId}]}};const{error:s,payload:i}=await l["n"].addProfilePreference(t);this.$store.commit("hideLoadingBar"),s?this.$alert.error("Error fetching changing view"):(D["a"].commit("setDefaultView",t.preference),D["a"].commit("setPreferenceId",i),this.viewAlreadyAdded=!0,this.options=t,this.$emit("update:activeKanbanView",this.defaultViewId))},async updateDefaultView(){this.$store.commit("showLoadingBar");let e=this.$route.meta.menu,t=this.$route.meta.breadcrumb,s={};if(this.options[e])if(this.options[e].length){let s=this.options[e].findIndex(e=>e.subMenu===t);s>=0?this.options[e][s].view=this.defaultViewId:this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId})}else this.options[e]=[],this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId});else this.options[e]=[],this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId});s={preference:this.options};const{error:i}=await l["n"].updateProfilePreference(this.$store.state.preferenceId,s);this.$store.commit("hideLoadingBar"),i?this.$alert.error("Error fetching changing view"):(D["a"].commit("setDefaultView",s.preference),this.$emit("update:activeKanbanView",this.defaultViewId))},async getDefaultView(){const{error:e,payload:t}=await l["n"].getProfilePreference(this.userId);e?this.$alert.error("Error fetching get default view"):t?(this.options=JSON.parse(t.options),D["a"].commit("setDefaultView",this.options),D["a"].commit("setPreferenceId",t.id)):this.viewAlreadyAdded=!1}}},z=R,j=(s("6c88"),Object(u["a"])(z,E,V,!1,null,"6f4b2704",null)),H=j.exports;p()(j,"components",{QMenu:m["a"]});var U=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"dashboard-view"}},e._l(e._views,(function(s){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.label,expression:"view.label",modifiers:{top:!0}}],key:s.id,attrs:{"is-flat":"","no-border":"",icon:e.dashboardView===s.value?s.activeIcon:s.icon,color:e.dashboardView===s.value?"secondary":"gray"},on:{click:function(t){return e.updateDashboardView(s.value)}}})})),1)},W=[],J={name:"DashboardView",props:{dashboardView:{type:String,default:"CHART",validator(e){return["CHART","TABLE","SANKEY","KANBAN"].includes(e)}},chartView:{type:Boolean,default:!1},tableView:{type:Boolean,default:!0},page:{type:String,default:""}},data(){return{views:[{id:this.$nano.id(),label:"Table View",value:"TABLE",icon:"mdi-table",activeIcon:"mdi-table"},{id:this.$nano.id(),label:"Chart View",value:"CHART",icon:"eva-image",activeIcon:"eva-image"},{id:this.$nano.id(),label:"Sankey View",value:"SANKEY",icon:"mdi-chart-sankey-variant",activeIcon:"mdi-chart-sankey-variant"}]}},computed:{_views(){if("REPORT"===this.page)return this.views.slice(0,2);let e=location.origin;return"https://edmsuat.sobhaapps.com"===e||"https://edms.sobhaapps.com"===e?this.views.slice(1,2):this.views.slice(1,3)}},methods:{updateDashboardView(e){this.$emit("update:activeDashboardView",e)}}},G=J,Q=(s("8180"),Object(u["a"])(G,U,W,!1,null,"1da74fbd",null)),Y=Q.exports,K=s("be3f"),X=s("0cdc"),Z=s("12b8"),ee=function(){var e=this,t=e._self._c;return t("div",{staticClass:"col",attrs:{id:"search-items"}},[t("div",{attrs:{id:"Simple-search"}},[t("div",{staticClass:"label",staticStyle:{"margin-left":"0px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Search By",expression:"'Search By'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-filter-plus-outline",color:e.activeFilter?"secondary":"gray","no-border":""}},[e.filter?t("div"):e._e(),t("q-menu",{attrs:{"auto-close":"","transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top left"}},[t("div",{staticClass:"title-3 q-pa-xs border"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchColumns,expression:"searchColumns"}],ref:"searchQuery",staticClass:"q-pa-md",attrs:{type:"text",placeholder:"Type here to search"},domProps:{value:e.searchColumns},on:{click:function(e){e.stopPropagation()},keyup:function(t){return e.searchColumnList(e.searchColumns)},input:function(t){t.target.composing||(e.searchColumns=t.target.value)}}})]),t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight,width:"240px"}},[e._l(e.columnList,(function(s){return[s.display&&!1!==s.isFilter?t("ListItem",{key:s.id,attrs:{icon:s.selected?"eva-radio-button-on":"eva-radio-button-off","is-selected":s.selected,label:s.label},on:{click:function(t){return e.updateFilterBy(s.id)}}}):e._e()]}))],2)],1)],1),e.activeFilter?t("div",{staticClass:"selectedLabel"},[t("span",{staticClass:"text-bold"},[e._v(e._s(e.selectedLabel)+" :")])]):e._e(),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],ref:"searchQuery",staticClass:"q-px-xs",class:{"text-input-small":e.activeFilter,"text-input-big":!e.activeFilter},attrs:{type:"text",placeholder:e.isdataTypeIsDate?"YYYY-MM-DD":"Search"},domProps:{value:e.searchInput},on:{keyup:e.emitKeyUp,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateSimpleSearch.apply(null,arguments)},input:function(t){t.target.composing||(e.searchInput=t.target.value)}}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Search",expression:"'Search'",modifiers:{top:!0}}],attrs:{icon:"eva-search","no-border":"","is-flat":""},on:{click:e.updateSimpleSearch}}),e.activeFilter?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"clear",expression:"'clear'",modifiers:{top:!0}}],attrs:{icon:"mdi-close-circle","no-border":"","is-flat":""},on:{click:e.clearSimpleSearch}}):e._e()],1)])])},te=[],se={name:"SimpleSearchWithFilter",components:{ListItem:n["a"]},props:{columns:{type:Array,default:()=>[]},filterBy:{type:Array,required:!0}},data(){return{filter:!1,activeFilter:!1,searchColumns:"",columnList:[],filterArray:[],searchInput:"",selectedLabel:"",FilterValue:"",isdataTypeIsDate:!1,isSingleSelect:!1}},computed:{scrollbarHeight(){const e=36*this.columns.length;return e>216?"276px":e+58+"px"}},watch:{$route:{deep:!0,handler(){this.$route.query.repositoryId||(this.activeFilter=!1,this.filterArray=[],this.searchInput="",this.FilterValue="")}},filterBy:{deep:!0,immediate:!0,handler(){0===this.filterBy.length&&(this.activeFilter=!1)}},columns:{deep:!0,immediate:!0,handler(){this.columnList=[],this.columns.forEach(e=>{this.columnList.push({...e,selected:!1,display:"show"})})}}},methods:{emitKeyUp(){this.FilterValue=this.searchInput,this.$emit("keyup",this.searchInput)},updateSimpleSearch(){if(this.activeFilter)if(0===this.filterArray.length){let e=[];this.$emit("update",e)}else if(this.isSingleSelect){let e=[];e[0]=this.FilterValue,this.filterArray[0].filters[0].value=JSON.stringify(e),this.filterArray[0].filters[0].arrayValue=e,this.$emit("click",this.filterArray),this.$emit("update",this.filterArray)}else this.filterArray[0].filters[0].value=this.FilterValue,this.$emit("click",this.filterArray),this.$emit("update",this.filterArray)},searchColumnList(e){this.columnList.forEach(t=>{t.display="show",t.label.toLowerCase().includes(e.toLowerCase())||(t.display="")})},updateFilterBy(e){this.filter=!this.filter,this.columnList.forEach(e=>{e.selected=!1});let t=this.columnList.find(t=>t.id===e);if(t){t.selected=!0,this.activeFilter=!0,this.selectedLabel=t.label;let e=[];if("None"==t.value)this.activeFilter=!1;else{let s="CONTAINS";"DATE"===t.dataType&&(s="IS_EQUALS_TO",this.isdataTypeIsDate=!0,this.isSingleSelect=!1),"SINGLE_SELECT"===t.dataType?(this.isSingleSelect=!0,e=[{filters:[{criteria:t.name,criteriaArray:[t.name],condition:s,value:"",arrayValue:"",dataType:"SINGLE_SELECT"}],groupCondition:""}],this.filterArray=e):(this.isSingleSelect=!1,e=[{filters:[{criteria:t.name,condition:s,value:"",dataType:t.dataType}],groupCondition:""}]),this.filterArray=e}}},clearSimpleSearch(){this.columnList.forEach(e=>{e.selected=!1}),this.isdataTypeIsDate=!1,this.filterArray=[],this.searchInput="",this.FilterValue="",this.activeFilter=!1,this.filter=!this.filter,this.$emit("update",this.filterArray)}}},ie=se,ae=(s("ba5a"),Object(u["a"])(ie,ee,te,!1,null,"a32bb6e0",null)),oe=ae.exports;p()(ae,"components",{QMenu:m["a"]});var re={name:"ItemActions",components:{ToggleColumns:v,ViewToggle:O,SortItems:y["a"],GroupItems:S,FilterItems:_["a"],ExpandableSearch:K["a"],KanbanView:H,DashboardView:Y,ImportPopup:X["a"],SelectField:Z["a"],SimpleSearchWithFilter:oe},props:{item:{type:String,default:"item"},columns:{type:Array,required:!0},criteria:{type:String,required:!0},order:{type:String,required:!0},groupBy:{type:String,required:!0},filterBy:{type:Array,required:!0},activeView:{type:String,required:!0},thumbnailView:{type:Boolean,default:!1},filterColumns:{type:Array,default:()=>[]},selectedFilter:{type:Array,default:()=>[]},gridView:{type:Boolean,default:!0},kanbanView:{type:Boolean,default:!1},activeKanbanView:{type:String,default:""},kanbanList:{type:Array,default:()=>[]},jiraConnect:{type:Boolean,default:!1},importData:{type:Boolean,default:!1},dataImported:{type:Boolean,default:!1},hideActions:{type:Array,default:()=>[]},workflowInitiate:{type:Boolean,default:!1},initiateAccess:{type:Boolean,default:!1},gotoInbox:{type:Boolean,default:!1},workflowImport:{type:Boolean,default:!1},formId:{type:String,default:"0"},dashboardView:{type:String,default:""},chartView:{type:Boolean,default:!1},tableView:{type:Boolean,default:!1},searchContent:{type:Boolean,default:!1},contentSearch:{type:Object,default:()=>({contentSearchValue:"",fuzzy:0,searchType:1})},repositoryFields:{type:Boolean,default:!1},id:{type:Number,default:0},module:{type:String,default:""},moduleId:{type:[String,Number],default:0},deleteBtn:{type:Boolean,default:!1},mode:{type:String,default:""},page:{type:String,default:""},toggleId:{type:Number,default:0},simpleSearchFilter:{type:Boolean,default:!1},simpleSearchApplyed:{type:Boolean,default:!1},customProcessForm:{type:Boolean,default:!1},refresh:{type:Boolean,default:!0},exportData:{type:Boolean,default:!0},sendInvite:{type:Boolean,default:!1},downloadAll:{type:Boolean,default:!1},visibleDownload:{type:Boolean,default:!1},visiblePrint:{type:Boolean,default:!1},visibleEmail:{type:Boolean,default:!1},visibleDelete:{type:Boolean,default:!1},processForward:{type:Boolean,default:!1},importJson:{type:Boolean,default:!1}},data(){return{dateFilter:[{id:this.$nano.id(),label:"Today",value:"today"},{id:this.$nano.id(),label:"Yesterday",value:"yesterday"},{id:this.$nano.id(),label:"This Week",value:"7days"},{id:this.$nano.id(),label:"Last week",value:"week"},{id:this.$nano.id(),label:"This Month ",value:"Currentmonth"},{id:this.$nano.id(),label:"Last Month",value:"month"},{id:this.$nano.id(),label:"Last Quarter",value:"quarter"},{id:this.$nano.id(),label:"This Year",value:"currentyear"},{id:this.$nano.id(),label:"Last Year",value:"year"}],dateValue:""}},computed:{_columns(){return this.filterColumns.length?this.filterColumns:this.columns},checkIconCount(){let e,t=0;return this.visibleDownload&&(t+=1),this.visibleEmail&&(t+=1),this.visiblePrint&&(t+=1),this.visibleDelete&&(t+=1),2===t&&(e=!0),3===t&&(e=!0),4===t&&(e=!0),e}},watch:{dateValue:{deep:!0,immediate:!0,handler(){if(this.dateValue)if("today"===this.dateValue){let e=this.dateValue;const t=new Date;t.setDate(t.getDate());const s=t.toISOString().split("T")[0];this.$emit("filter",s,s,e)}else if("yesterday"===this.dateValue){let e=this.dateValue;const t=new Date;t.setDate(t.getDate()-1);const s=t.toISOString().split("T")[0];this.$emit("filter",s,s,e)}else if("week"===this.dateValue){let e=this.dateValue,t=new Date,s=t.getDay(),i=new Date(t);i.setDate(t.getDate()-s);let a=new Date(i);a.setDate(i.getDate()-7);let o=new Date(a);o.setDate(a.getDate()+6);let r=a.toISOString().split("T")[0],n=o.toISOString().split("T")[0];this.$emit("filter",r,n,e)}else if("7days"===this.dateValue){let e=this.dateValue,t=new Date,s=t.getDay(),i=new Date(t);i.setDate(t.getDate()-s);let a=new Date(i);a.setDate(i.getDate()+6);let o=i.toISOString().split("T")[0],r=a.toISOString().split("T")[0];this.$emit("filter",o,r,e)}else if("month"===this.dateValue){let e=this.dateValue,t=new Date,s=new Date(t.getFullYear(),t.getMonth()-1,2),i=new Date(t.getFullYear(),t.getMonth()),a=s.toISOString().split("T")[0],o=i.toISOString().split("T")[0];this.$emit("filter",a,o,e)}else if("quarter"===this.dateValue){let e=this.dateValue,t=new Date,s=t.getMonth(),i=(s-3+12)%12,a=new Date(t.getFullYear(),i,2),o=s-1,r=new Date(t.getFullYear(),o+1,1),n=a.toISOString().slice(0,10),l=r.toISOString().slice(0,10);this.$emit("filter",n,l,e)}else if("year"===this.dateValue){let e=this.dateValue,t=new Date,s=new Date(t.getFullYear()-1,0,2),i=new Date(t.getFullYear()-1,11,32),a=s.toISOString().split("T")[0],o=i.toISOString().split("T")[0];this.$emit("filter",a,o,e)}else if("Currentmonth"===this.dateValue){let e=this.dateValue,t=new Date,s=new Date(t.getFullYear(),t.getMonth(),1),i=`${s.getFullYear()}-${(s.getMonth()+1).toString().padStart(2,"0")}-${s.getDate().toString().padStart(2,"0")}`,a=`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`;this.$emit("filter",i,a,e)}else if("currentyear"===this.dateValue){let e=this.dateValue,t=new Date,s=new Date(t.getFullYear(),0,2),i=s.toISOString().split("T")[0],a=t.toISOString().split("T")[0];this.$emit("filter",i,a,e)}}}},methods:{updateColumns(e){this.$emit("update:columns",e)},updateCriteria(e){this.$emit("update:criteria",e)},updateOrder(e){this.$emit("update:order",e)},updateGroupBy(e){this.$emit("update:groupBy",e)},updateFilterBy(e,t){this.$emit("update:simpleSearchApplyed",!1),this.$emit("update:filterBy",e),this.$emit("update",e,t)},updateContentSearch(e){this.$emit("update:contentSearch",e)},updateActiveView(e){this.$emit("update:activeView",e)},searchTable(e){this.$emit("search",e)},updateActiveKanbanView(e){this.$emit("update:activeKanbanView",e)},updateActiveDashboardView(e){this.$emit("update:dashboardView",e)},upload(){this.$emit("upload")},closeImport(){this.$emit("close")},viewColumns(e){this.$emit("viewColumns",e)},updateSimpletSearchFilterBy(e){this.$emit("update:simpleSearchApplyed",!0),this.$emit("update:filterBy",e),this.$emit("update",e)},downloadTemplate(){this.$emit("downloadTemplate")}}},ne=re,le=(s("c925"),s("7225"),s("b047")),ce=s("cb32"),de=Object(u["a"])(ne,i,a,!1,null,"53ff3a83",null);t["a"]=de.exports;p()(de,"components",{QChip:le["a"],QAvatar:ce["a"]})},"0698":function(e,t,s){},"09e3":function(e,t,s){"use strict";var i=s("a026"),a=s("87e8"),o=s("e277");t["a"]=i["default"].extend({name:"QPageContainer",mixins:[a["a"]],inject:{layout:{default(){console.error("QPageContainer needs to be child of QLayout")}}},provide:{pageContainer:!0},computed:{style(){const e={};return!0===this.layout.header.space&&(e.paddingTop=this.layout.header.size+"px"),!0===this.layout.right.space&&(e["padding"+(!0===this.$q.lang.rtl?"Left":"Right")]=this.layout.right.size+"px"),!0===this.layout.footer.space&&(e.paddingBottom=this.layout.footer.size+"px"),!0===this.layout.left.space&&(e["padding"+(!0===this.$q.lang.rtl?"Right":"Left")]=this.layout.left.size+"px"),e}},render(e){return e("div",{staticClass:"q-page-container",style:this.style,on:{...this.qListeners}},Object(o["c"])(this,"default"))}})},"0ad7":function(e,t,s){},"0b2c":function(e,t,s){},"0b71":function(e,t,s){},"0c04":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"addTask"}},[t("Sheet",{attrs:{value:e.value,width:e.taskWidth,"no-padding":""},on:{input:e.closeSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("title",(function(){return[e._v(e._s(e.title))]}))]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:e.isMaximized?"eva-collapse":"eva-expand"},on:{click:e.toggleWidth}})]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t("div",{staticClass:"col",attrs:{id:"task-form-view"}},[t("BaseScrollbar",{staticClass:"q-pa-md",attrs:{height:"calc(100vh - 60px)"}},[t("RenderForm",{attrs:{"no-padding":"",panels:e.panels,"secondary-panels":e.secondaryPanels,"form-settings":e.formSettings,"form-model":e.taskModel,"is-readonly":"VIEW"===e.mode},on:{save:e.saveTask}})],1)],1),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(s){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()])})),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"workflows",expression:"'workflows'",modifiers:{left:!0}}],staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:"o_account_tree",color:"primary"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.taskWorkflowList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:"mdi-sitemap",label:s.label},on:{click:function(t){return e.getForm(s)}}})})),1)],1)],1)],2)])]},proxy:!0}],null,!0)}),t("Sheet",{attrs:{width:e.taskWidth,"has-footer":""},on:{input:e.closeAddTaskSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("title",(function(){return[e._v(e._s(e.headerTitle))]}))]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:e.isMaximized?"eva-collapse":"eva-expand"},on:{click:e.toggleWidth}})]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t("div",{staticClass:"col",attrs:{id:"form-view"}},[t("BaseScrollbar",{staticClass:"q-pa-md",attrs:{height:"calc(100vh - 145px)"}},[t("RenderForm",{attrs:{"no-padding":"","workflow-id":e.workflowFormId,panels:e.addWorkflowForm.panels,"secondary-panels":e.addWorkflowForm.secondaryPanels,"form-settings":e.addWorkflowForm.settings,"workflow-form-model":e.workflowFormModel,"save-action":e.saveAction},on:{"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t},"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t}}})],1)],1),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},e._l(e.tabs,(function(s){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()])})),1)])]},proxy:!0},{key:"footer",fn:function(){return[e.actions?t("div",{staticClass:"footer row"},[e._l(e.actions,(function(s){return[t("BaseButton","Approve"===s||"Complete"===s||"Rightsize"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"positive"},on:{click:function(t){return e.validateRequest(s)}}}:"Reject"===s||"Terminate"===s||"Force Close"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"red"},on:{click:function(t){return e.validateRequest(s)}}}:"Forward"===s||"Reply"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"orange"},on:{click:function(t){return e.validateRequest(s)}}}:{key:s,staticClass:"q-ml-md",attrs:{label:s},on:{click:function(t){return e.validateRequest(s)}}})]}))],2):e._e()]},proxy:!0}],null,!0),model:{value:e.addTaskSheet,callback:function(t){e.addTaskSheet=t},expression:"addTaskSheet"}}),t("Sheet",{attrs:{width:"30vw","sub-actions":!!e.attachmentList.length,upload:!0},on:{input:e.closeAttachmentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:e.getAttachments}})]},proxy:!0},{key:"upload",fn:function(){return[t("div",{staticClass:"hint",on:{click:function(t){return e.$refs.attachments.click()}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),t("div",{staticClass:"title text-blue"},[e._v("UPLOAD FILES")]),t("div",{staticClass:"description"},[e._v("Click here to choose files and upload")])],1)]},proxy:!0},{key:"subActions",fn:function(){return[[t("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:e.fileSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}}),e._v(" Select All ")],t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!e.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentShare}}),(e.selectedFileCount,e._e())]},proxy:!0}]),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:e.uploadAttachments}}),e._l(e.attachmentList,(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})],1),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1)]),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])]}))],2)]),t("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"30"},on:{input:e.closeCommentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 155px)"}},[e._l(e.commentsList,(function(s,i){return[t("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===e.$store.state.session.id?"me":s.createdByEmail,text:[s.comments],"text-html":"",sent:s.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(s),"bg-color":s.createdBy===e.$store.state.session.id?"primary-1":"secondary-1"}})]}))],2)],1),t("div",{staticClass:"col q-pa-sm borderTop"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])])]),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])])]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])]),t("Sheet",{attrs:{width:"30vw"},on:{input:e.closeTaskSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Workflows ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Add Workflows",expression:"'Add Workflows'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-plus",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getworkflowForm(e.workflowFormId)}}})]},proxy:!0}]),model:{value:e.taskSheet,callback:function(t){e.taskSheet=t},expression:"taskSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[e._l(e.processInfo,(function(s){return[t("div",{key:s.id,staticClass:"taskEntries"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto q-mr-md",staticStyle:{"margin-top":"3px"},on:{click:function(t){return e.getWorkflowAudit(s.requestNo)}}},[e._v(" Request No: "+e._s(s.requestNo)+" ")]),s.actionUser?[t("q-chip",{attrs:{size:"10px",color:"yellow","text-color":"white"}},[e._v(" "+e._s(s.actionUser)+" ")])]:e._e(),t("q-chip",{attrs:{size:"10px",color:e.getColor(s.flowStatus),"text-color":"white"}},[e._v(" "+e._s("0"===s.flowStatus?"Open":"Completed")+" ")])],2)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col-12"},[e._v(" Raised By: "+e._s(s.raisedBy)+" "),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" Raised At: "+e._s(e.$day.format(s.raisedAt))+" ")],1)])])]}))],2)]),t("Sheet",{attrs:{width:"100vw","has-footer":"","no-padding":""},on:{input:function(t){e.processSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.headerTitle)+" ")]},proxy:!0}]),model:{value:e.processSheet,callback:function(t){e.processSheet=t},expression:"processSheet"}},[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t("div",{staticClass:"col",attrs:{id:"form-view"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 145px)"}},[t("RenderForm",{attrs:{"form-id":e.formIdName,panels:e.addWorkflowForm.panels,"secondary-panels":e.addWorkflowForm.secondaryPanels,"form-settings":e.addWorkflowForm.settings,"form-model":e.formModel,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t}}})],1)],1),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(s){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()])]}))],2)])]),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}}),t("EmailSharing",{attrs:{"repository-id":e.repositoryId,"file-list":e.selectedFileList},on:{"update:fileList":function(t){e.selectedFileList=t},"update:file-list":function(t){e.selectedFileList=t}},model:{value:e.emailSharingSheet,callback:function(t){e.emailSharingSheet=t},expression:"emailSharingSheet"}})],1)},a=[],o=(s("14d9"),s("caad"),s("381e")),r=s("4bc4"),n=s("869e"),l=s("6df3"),c=s("1b0d"),d=s("9bc4"),u=s("fa1f"),m=s("a7d2"),h=s("dd90"),p=s("bc3a"),f=s.n(p),v=s("cade"),y=s("695e"),b=s("6a70"),g=s("2f62"),w=s("5e23"),C={name:"AddTask",components:{Sheet:o["a"],RenderForm:r["a"],FileIcon:u["a"],CheckboxField:n["a"],TextAreaField:l["a"],ListItem:v["a"],TextBuilderField:y["a"],Modal:b["a"],EmailSharing:w["a"]},props:{value:{type:Boolean,default:!1},formSettings:{type:Object,required:!0},panels:{type:Array,required:!0},secondaryPanels:{type:Array,default:()=>[]},formId:{type:Number,default:0},taskModel:{type:Object,default:()=>{}},mode:{type:String,default:""},taskName:{type:String,default:""},repositoryId:{type:Number,default:0},workflowTask:{type:Boolean,default:!1},taskWorkflowList:{type:Array,default:()=>[]},selectedTask:{type:Object,default:()=>{}},documentTask:{type:Boolean,default:!1},repositoryFile:{type:Object,default:()=>{}}},data(){return{taskWidth:"720px",tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0}],attachmentSheet:!1,addTaskSheet:!1,taskSheet:!1,commentsSheet:!1,commentText:"",commentsList:[],selectAll:!1,attachmentLoad:null,attachmentList:[],fileSheet:!1,selectedFile:{},actions:[],workflowsSheet:!0,workflowList:[],saveAction:"",workflowId:0,addWorkflowForm:[],workflowPanels:[],form:[],workflowName:"",workflowDescription:"",workflowFormId:0,workflowFormModel:{},processId:0,transactionId:0,workflowDetails:[],countWorkflow:0,processInfo:[],workflowFormTaskList:{},formList:{},formStage:{},processSheet:!1,formDetails:{},formIdName:"",formModel:{},headerTitle:"",advancedCommentsSheet:!1,advancedCommentText:"",emailSharingSheet:!1,selectedFileList:[]}},computed:{...Object(g["c"])(["LoadingBarPage"]),isMaximized(){return"100vw"===this.taskWidth},title(){return"VIEW"===this.mode?"View Task":"EDIT"===this.mode?"Edit Task":"FORWARD"===this.mode?"Forward Task":"COPY"===this.mode?"Copy Task":"Add Task"},formName(){return this.formSettings.general.name},formDescription(){return this.formSettings.general.description},selectedFileCount(){let e=this.attachmentList.filter(e=>e.checked).length;return e},scrollbarHeight(){const e=36*this.columns.length;return e>216?"276px":e+58+"px"}},watch:{taskModel:{immediate:!0,handler(){this.taskModel.id&&(this.attachmentList=[],this.getComments(),this.getAttachments())}},workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&this.initiateRequest()}},attachmentSheet:{immediate:!0,handler(){this.attachmentSheet&&this.taskModel.id||clearInterval(this.attachmentLoad)}}},methods:{toggleWidth(){this.taskWidth="100vw"===this.taskWidth?"720px":"100vw"},closeSheet(){this.$emit("close",!1)},closeAttachmentsSheet(){this.attachmentSheet=!1},closeAddTaskSheet(){this.addTaskSheet=!1},closeTaskSheet(){this.taskSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},getColor(e){return"0"===e?"orange":"1"===e||"Medium"===e?"green":"primary"},showLinks(e){"ATTACHMENTS"===e?this.attachmentSheet=!0:"COMMENTS"===e?this.commentsSheet=!0:"HISTORY"===e?this.$emit("history",this.formList[0].value[0].processId,this.formList[0].workflowId,this.formList[0].value[0].requestNo):"PRINT"===e&&window.print()},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},fileSelectAll(){this.attachmentList=this.attachmentList.map(e=>({...e,checked:this.selectAll}))},showHistory(){},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},fileSize(e){return Object(m["a"])(e)},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let s="";if(Object(h["d"])(t))s="https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":"https://app.ezofis.com"===e?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html";else{if("http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/1`;s="http://52.172.32.88/DocsViewer/index.html"}return`${s}?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`}{let s="";if(Object(h["d"])(t))s="https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":"https://app.ezofis.com"===e?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html";else{if(Object(h["b"])(t)||"http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;s="http://52.172.32.88/DocsViewer/index.html"}return`${s}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}`}}},openFile(e){this.selectedFile=e,this.fileSheet=!0},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(e=>{e.checked&&this.selectedFileList.push({id:e.id,name:e.name})}),this.emailSharingSheet=!0},async saveTask(e){const t=["itemid","createdBy","createdAt","modifiedBy","modifiedAt","icon","buttonAction","formId","status","color","link","selected","isDeleted","createdByEmail","modifiedByEmail","emailStatus","expandSubworkflow"],s=Object(d["a"])(e,t);try{this.$store.commit("showLoadingBarPage");const{id:e,...t}=s;let i=0;i="COPY"===this.mode?0:e||0;let a={};if(i)a={fields:t};else{let e=[];this.attachmentList.length&&this.attachmentList.forEach(t=>{e.push(t.id)}),a={fields:t,task:{comments:this.commentsList,fileIds:e}}}const{data:o,error:r}=await c["g"].saveFormEntry(this.formId,i,a);if(this.workflowDetails.length&&this.linkTaskWorkflowProcess(o.output),r)return void this.$alert.error(r);e?this.$alert.success(this.taskName+" edited successfully"):(this.documentTask&&this.linkTaskDocument(o.output),this.$alert.success("New task added successfully")),this.getUsers(a.fields),this.closeSheet(),this.workflowTask||this.documentTask?this.$emit("addEntry",this.formId,o.output):this.$emit("refresh",this.workflowId)}catch(i){console.log(i)}finally{this.$store.commit("hideLoadingBarPage")}},async linkTaskDocument(e){let t={wFormId:this.formId,formEntryId:e,fileInfo:{repositoryId:this.repositoryFile.repositoryId,itemId:this.repositoryFile.id}};const{error:s}=await c["g"].linkTaskDocument(t);s&&this.$alert.error(s)},async getComments(){this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=0)}),this.commentsList=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await c["g"].getFormComments(this.formId,this.taskModel.id);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t.length&&(this.commentsList=t,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}))},async saveComment(){if(this.commentText)if(this.taskModel.id){this.$store.commit("showLoadingBar");const{error:e}=await c["g"].insertFormComment(this.formId,this.taskModel.id,{comments:this.commentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.commentText="",this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.commentText=""},async saveAdvancedComment(){if(this.advancedCommentText)if(this.taskModel.id){this.$store.commit("showLoadingBar");const{error:e}=await c["g"].insertFormComment(this.formId,this.taskModel.id,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.advancedCommentText="",this.advancedCommentsSheet=!1},async uploadAttachments(e){if(this.taskModel.id){const s=e.target.files[0];this.$store.commit("showLoadingBar");const i=new FormData;i.append("formId",this.formId),i.append("repositoryId",this.repositoryId),i.append("entryId",this.taskModel.id),i.append("file",s);let a=e.target.files[0].name;const o=a.split(".").pop();if(!Object(h["a"])(o))return void this.$alert.info("This file format is not supported");try{const t=await f()({url:"https://appuat.ezofis.com/ezofisapi/api/form/taskAttachmentWithEntryId",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:s,data:a}=t;if(this.$store.commit("hideLoadingBar"),e.target.value="",200!==s||!a)throw t;this.$alert.success("Document attached")}catch(t){this.$store.commit("hideLoadingBar"),this.$alert.error("Error uploading file"),console.error(t)}this.attachmentLoad=setInterval(()=>this.getAttachments(),5e3)}else{this.$store.commit("showLoadingBar");const s=e.target.files[0],i=new FormData;i.append("file",s),i.append("formId",this.formId),i.append("repositoryId",this.repositoryId);let a=e.target.files[0].name;const o=a.split(".").pop();if(!Object(h["a"])(o))return void this.$alert.info("This file format is not supported");try{const t=await f()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:a,data:o}=t;if(this.$store.commit("hideLoadingBar"),e.target.value="",200!==a)throw"Invalid response";let r=JSON.parse(o);this.attachmentList.push({id:Number(r.fileId),name:s.name,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:s.size,initiate:!0,checked:!1})}catch(t){this.$store.commit("hideLoadingBar"),console.error(t),this.$alert.error("error attaching file")}}},async getAttachments(){this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=0)});let e=this.attachmentList.length;this.$store.commit("showLoadingBar");const{error:t,payload:s}=await c["g"].getFormAttachments(this.formId,this.taskModel.id);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):s.length?(e!==s.length&&(this.attachmentList=s.map(e=>({...e,checked:!1})),clearInterval(this.attachmentLoad)),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)})):this.attachmentList=[]},async attachmentDelete(e){if(this.$store.commit("showLoadingBar"),e.initiate){const{error:t}=await c["r"].deleteUploadedFiles([e.id]);if(t)return void this.$alert.error(t);this.$store.commit("hideLoadingBar"),this.attachmentList=this.attachmentList.filter(t=>t.id!==e.id)}else{const{error:t}=await c["p"].fileDelete(e.repositoryId,e.id);if(t)return void this.$alert.error(t);this.$store.commit("hideLoadingBar"),this.getAttachments()}},validateRequest(e){this.saveAction=e},async initiateRequest(){let e={};e={workflowId:this.workflowId,transactionId:0,review:this.saveAction,formData:{formId:this.workflowFormId,formEntryId:this.form.entryCount,fields:this.workflowFormModel}},this.$store.commit("showLoadingBarSave");const{error:t,payload:s}=await c["t"].processTransaction(e);this.$store.commit("hideLoadingBarSave"),this.saveAction="",t?this.$alert.error(t):(this.$alert.success(s.requestNo+" Request Initiated"),this.workflowDetails.push({workflowId:this.workflowId,processId:s.processId,transactionId:s.transactionId}),this.selectedTask.id&&this.linkTaskWorkflowProcess(this.selectedTask.id),this.closeAddTaskSheet(),this.$emit("refresh",this.workflowId))},async getForm(e){if(this.workflowId=e.id,this.headerTitle=e.stage,this.actions=e.actions,this.selectedTask.formId&&this.selectedTask.id&&await this.getWorkflowList(this.workflowId),e.formId)if(this.workflowFormId=e.formId,this.processInfo.length)this.countWorkflow=this.processInfo.length,this.taskSheet=!0;else{const{error:e,payload:t}=await c["g"].getForm(this.workflowFormId);if(e)return void this.$alert.error(e);t&&(this.form=t,this.workflowName=this.form.name,this.workflowDescription=this.form.description,this.addWorkflowForm=JSON.parse(t.formJson),this.workflowPanels=this.addWorkflowForm.panels,this.addTaskSheet=!0)}},async getworkflowForm(e){this.closeTaskSheet();const{error:t,payload:s}=await c["g"].getForm(e);this.workflowFormId=e,t?this.$alert.error(t):s&&(this.form=s,this.workflowName=this.form.name,this.workflowDescription=this.form.description,this.addWorkflowForm=JSON.parse(s.formJson),this.workflowPanels=this.addWorkflowForm.panels,this.addTaskSheet=!0)},async getworkflowDetailsForm(e){const{error:t,payload:s}=await c["g"].getForm(e);t?this.$alert.error(t):s&&(this.form=s,this.workflowName=this.form.name,this.workflowDescription=this.form.description,this.addWorkflowForm=JSON.parse(s.formJson),this.workflowPanels=this.addWorkflowForm.panels,this.processSheet=!0,this.$store.commit("hideLoadingBarPage"))},async linkTaskWorkflowProcess(e){let t={};t={wFormId:this.formId,formEntryId:e,workflow:this.workflowDetails};const{error:s}=await c["g"].linkTaskWorkflowProcess(t);s&&this.$alert.error(s)},async getWorkflowList(e){let t={};t={wId:e,fId:this.selectedTask.formId,entryId:this.selectedTask.id};const{error:s,payload:i}=await c["g"].getWorkflowTaskList(e,this.selectedTask.formId,this.selectedTask.id,t);this.workflowFormTaskList=i,i.processInfo&&(this.processInfo=i.processInfo),s&&this.$alert.error(s)},async getWorkflowAudit(e){this.$store.commit("showLoadingBarPage");const{error:t,payload:s}=await c["o"].getWorkflowData(this.workflowId,{filterBy:[{groupCondition:"",filters:[{criteria:"requestNo",condition:"IS_EQUALS_TO",value:e}]}],currentPage:1,itemsPerPage:10,mode:""}),{data:i,meta:a}=s;if(this.formList=i||{},this.formStage=a,this.formList[0].value[0].formData){let e=Object.keys(this.formList[0].value[0].formData.fields),t={};e.forEach(e=>{t[e]=this.validateTypeValue(this.formList[0].value[0].formData.fields[e])}),this.formModel=t}this.headerTitle=""+this.formList[0].value[0].name,this.formIdName=String(this.formList[0].value[0].formData.formId),this.getworkflowDetailsForm(this.formIdName),t&&this.$alert.error(t)},validateTypeValue(e){if(e)try{var t=JSON.parse(e);if("object"===typeof t)return t}catch(s){return e}return e},async getUsers(e){const{error:t,payload:s}=await c["s"].getUserList();if(t)return void this.$alert.error("Error fetching users");let i={id:0,title:e["e_NFnW0JxrLpZxqPeJS7K"],status:e["11m7YRT-7kdLx-g6iGojc"],remarks:e["2XOJMCR_DVb-5TwVPVdEX"],category:"TASK",createdBy:e["pM6Vly-JRlfroRrziE1jr"],lastActionBy:this.$store.state.session.email};const a=i.createdBy,o=s.filter(e=>a.includes(e.value)),r=o.map(e=>e.id);r.forEach(e=>{const t={...i,createdBy:e};this.insertNotification(t)}),console.log("email",o,r)},async insertNotification(e){const{error:t}=await c["b"].insertNotification(e);t&&this.$alert.error(t)}}},k=C,S=(s("a4c9"),s("2877")),_=s("4e73"),I=s("8169"),x=s("cb32"),T=s("b047"),$=s("93dc"),A=s.n($),F=Object(S["a"])(k,i,a,!1,null,"0b56d901",null);t["a"]=F.exports;A()(F,"components",{QMenu:_["a"],QChatMessage:I["a"],QAvatar:x["a"],QChip:T["a"]})},"0ce8":function(e,t,s){},"0f1c":function(e,t,s){"use strict";s("431c")},1026:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("FileList",{staticClass:"q-mb-md",attrs:{"has-files":!!e.files.length},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Uploading")]},proxy:!0},e.files.length?{key:"actions-minimized",fn:function(){return[t("Pulse",{staticClass:"q-mr-md",attrs:{color:"light-green"}})]},proxy:!0}:null,{key:"default",fn:function(){return e._l(e.files,(function(s,i){return t("FileListItem",{key:s.id,staticClass:"file",attrs:{file:s}},[e.showProgress?t("q-circular-progress",{staticClass:"font-semibold",attrs:{"show-value":"","font-size":"13px",size:"48px",color:"light-green","track-color":e.trackColor,thickness:.22,value:s.uploadedPercentage,indeterminate:!s.uploadedPercentage}},[e._v(" "+e._s(s.uploadedPercentage)+"% ")]):e._e(),e.showDeleteBtn?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.top",value:"Delete",expression:"'Delete'",arg:"red",modifiers:{top:!0}}],staticClass:"q-mr-md",attrs:{"is-flat":"",color:"red",icon:"eva-trash-2-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete",i)}}}):e._e()],1)}))},proxy:!0}],null,!0)})},a=[],o=s("9ef6"),r=s("d406"),n=s("4e64"),l=s("2f62"),c={name:"UploadingFileList",components:{FileList:o["a"],FileListItem:r["a"],Pulse:n["a"]},props:{files:{type:Array,required:!0},showProgress:{type:Boolean,default:!0},showDeleteBtn:{type:Boolean,default:!1}},computed:{...Object(l["c"])(["darkTheme"]),trackColor(){return this.darkTheme?"gray-8":"gray-3"}}},d=c,u=(s("73e0"),s("2877")),m=s("58ea"),h=s("93dc"),p=s.n(h),f=Object(u["a"])(d,i,a,!1,null,"7aa1b7fe",null);t["a"]=f.exports;p()(f,"components",{QCircularProgress:m["a"]})},"108c":function(e,t,s){"use strict";s("bdf3")},1137:function(e,t,s){},"11f5":function(e,t,s){"use strict";s("4759")},1549:function(e,t,s){"use strict";var i=s("2250"),a=s("a809"),o=s("5132"),r=s("e621");function n(e,t){return t.length<2?e:Object(o["a"])(e,Object(r["a"])(t,0,-1))}var l=n,c=s("4dc8");function d(e,t){return t=Object(i["a"])(t,e),e=l(e,t),null==e||delete e[Object(c["a"])(Object(a["a"])(t))]}t["a"]=d},1870:function(e,t,s){},"1a1b":function(e,t,s){},"1a82":function(e,t,s){},"1bfa":function(e,t,s){},"1d1a":function(e,t,s){"use strict";s("c794")},"1d87":function(e,t,s){e.exports=s.p+"img/kayaku-logo.34027bdf.png"},"204d":function(e,t,s){},"21e0":function(e,t,s){"use strict";s("7334")},"21fc":function(e,t,s){},"239f":function(e,t,s){"use strict";s("e248")},"27bd":function(e,t,s){"use strict";s("caad");var i=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"filter",expression:"'filter'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"eva-funnel-outline",color:e.activeFilter?"secondary":"gray"},on:{click:function(t){e.model=!0}}},[t("Sheet",{attrs:{width:"50vw","has-footer":""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Filter "+e._s(e.item)+"s ")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-pa-md",attrs:{id:"filters"}},[e.searchContent?[t("div",{staticClass:"description"},[e._v(" To search by content, type any text to search the entire folder ")]),t("TextField",{staticClass:"q-mb-md",attrs:{placeholder:"Search the document by content"},model:{value:e.contentSearch.contentSearchValue,callback:function(t){e.$set(e.contentSearch,"contentSearchValue",t)},expression:"contentSearch.contentSearchValue"}}),t("div",{staticClass:"q-mb-md",staticStyle:{"border-bottom":"1px solid var(--divider-color)"}},[e.showAdvanceOptions?t("div",{staticClass:"q-my-md"},[t("SingleChoiceField",{staticClass:"col q-mb-md",attrs:{options:e.searchOptions,"options-per-line":2,label:"Advanced Search Options"},model:{value:e.contentSearch.searchType,callback:function(t){e.$set(e.contentSearch,"searchType",t)},expression:"contentSearch.searchType"}}),t("FormFieldLabel",{attrs:{label:"Search similarity"}}),t("q-slider",{attrs:{color:"secondary",markers:"","marker-labels":"",min:0,max:10,label:""},model:{value:e.contentSearch.fuzzy,callback:function(t){e.$set(e.contentSearch,"fuzzy",t)},expression:"contentSearch.fuzzy"}})],1):e._e(),t("div",{staticClass:"row items-center q-mb-md"},[t("div",{staticClass:"col"},[e.showAdvanceOptions?t("div",{staticClass:"row items-center cursor-pointer",on:{click:function(t){e.showAdvanceOptions=!1}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-minus",color:"secondary"}}),t("div",{staticClass:"options"},[e._v("Hide Advanced Options")])],1):t("div",{staticClass:"row items-center cursor-pointer",on:{click:function(t){e.showAdvanceOptions=!0}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-plus",color:"secondary"}}),t("div",{staticClass:"options"},[e._v("Advanced Options")])],1)]),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"actions"},[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:e.clearContentSearch}}),t("BaseButton",{attrs:{label:"search"},on:{click:e.apply}})],1)])])])]:e._e(),e.filterGroups.length?[e._l(e.filterGroups,(function(s,i){return[t("div",{key:s.id,staticClass:"filter-group"},[t("div",{staticClass:"header"},[t("div",{staticClass:"label q-mr-md"},[e._v("Criteria")]),t("div",{staticClass:"label q-mr-md"},[e._v("Condition")]),t("div",{staticClass:"label q-mr-sm"},[e._v("Value")]),t("BaseActionButton",{attrs:{"is-flat":"",color:"secondary",icon:"eva-plus","no-border":""},on:{click:function(t){return e.addFilter(i)}}})],1),t("BaseSeparator",{staticClass:"q-mb-md",attrs:{"has-inset":""}}),e._l(s.filters,(function(s,a){return t("ValidationObserver",{key:s.id,ref:"form",refInFor:!0,staticClass:"filter row"},[t("ValidationProvider",{key:s.id,staticClass:"col q-mr-md",attrs:{name:"criteria",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:o}){return[t("MultiSelectField",{attrs:{"is-mandatory":"","is-searchable":!0,options:e._columns,error:o[0]},on:{input:function(t){return e.applyDataType(i,a,s.criteriaArray)}},model:{value:s.criteriaArray,callback:function(t){e.$set(s,"criteriaArray",t)},expression:"filter.criteriaArray"}})]}}],null,!0)}),t("ValidationProvider",{staticClass:"col-3 q-mr-md",attrs:{name:"condition",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{attrs:{"is-mandatory":"","is-searchable":!0,options:e.conditions(s.criteriaArray),error:i[0]},model:{value:s.condition,callback:function(t){e.$set(s,"condition",t)},expression:"filter.condition"}})]}}],null,!0)}),"SHORT_TEXT"===s.dataType||"BARCODE"===s.dataType?t("ValidationProvider",{staticClass:"col-3 q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition),error:i[0]},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"NUMBER"===s.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("NumberField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition),error:i[0]},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"DATE"===s.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("DateField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition),error:i[0]},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"TIME"===s.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TimeField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition),error:i[0]},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"SINGLE_SELECT"===s.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[e.checkOptions(s.criteriaArray)?[t("AsyncMultiSelectField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition),error:i[0],"api-path":e.apiPath,"column-name":s.criteriaArray},model:{value:s.arrayValue,callback:function(t){e.$set(s,"arrayValue",t)},expression:"filter.arrayValue"}}),e._e()]:[e._e(),t("MultiSelectField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition),"is-searchable":!0,options:e.getOptions(s.criteriaArray),error:i[0]},model:{value:s.arrayValue,callback:function(t){e.$set(s,"arrayValue",t)},expression:"filter.arrayValue"}})]]}}],null,!0)}):t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition),error:i[0]},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"filter.value"}})]}}],null,!0)}),t("div",{staticClass:"remove-filter"},[t("BaseActionButton",{attrs:{"is-flat":"",color:"red","no-border":"",icon:"eva-close-outline"},on:{click:function(t){return e.removeFilter(i,a)}}})],1)],1)})),t("BaseSeparator",{attrs:{"has-inset":""}}),t("div",{staticClass:"row"},[t("Action",{staticClass:"col",attrs:{icon:"eva-plus-outline",label:"Add Filter Group"},on:{click:function(t){return e.addFilterGroup(i+1)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),t("Action",{staticClass:"col",attrs:{icon:"eva-trash-2-outline",label:"Delete Group"},on:{click:function(t){return e.removeFilterGroup(i)}}})],1)],2),i!==e.filterGroups.length-1?t("div",{key:i,staticClass:"row justify-center"},[t("Toggle",{staticClass:"q-my-md",attrs:{options:e.groupConditions},on:{input:e.groupCondition},model:{value:s.groupCondition,callback:function(t){e.$set(s,"groupCondition",t)},expression:"group.groupCondition"}})],1):e._e()]}))]:[t("div",{staticClass:"add-filter",on:{click:e.addFilterGroup}},[t("BaseIcon",{attrs:{name:"eva-plus","inherit-color":""}}),t("div",{staticClass:"q-ml-sm"},[e._v("Add Filter")])],1)]],2)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:e.clearFilter}}),t("BaseButton",{attrs:{label:"apply"},on:{click:e.apply}})]},proxy:!0}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)},a=[],o=(s("13d5"),s("14d9"),s("874f")),r=s("9996"),n=s("7bb1"),l=s("381e"),c=s("b3d1"),d=s("12b8"),u=s("94f5"),m=s("670a"),h=s("970a"),p=s("ad54"),f=s("53c1"),v=s("cedb"),y=s("70a9"),b=s("0c21"),g=s("c3d2"),w=s("1b0d"),C=s("0d5e"),k=s("3445"),S=s("9234"),_={name:"FilterItems",components:{ValidationObserver:n["a"],ValidationProvider:n["b"],Sheet:l["a"],TextField:c["a"],SelectField:d["a"],Action:u["a"],Toggle:m["a"],NumberField:p["a"],DateField:f["a"],TimeField:v["a"],AsyncMultiSelectField:y["a"],MultiSelectField:g["a"],AsyncSelectField:b["a"],FormFieldLabel:k["a"],SingleChoiceField:S["a"]},props:{item:{type:String,default:"item"},columns:{type:Array,required:!0},filterBy:{type:Array,required:!0},isBordered:{type:Boolean,default:!1},selectedFilter:{type:Array,default:()=>[]},searchContent:{type:Boolean,default:!1},contentSearch:{type:Object,default:()=>({contentSearchValue:"",fuzzy:0,searchType:1})},module:{type:String,default:""},moduleId:{type:[String,Number],default:0}},data(){return{model:!1,groupConditions:["AND","OR"],filterGroups:[],activeFilter:!1,userList:[],options:[],showAdvanceOptions:!1,searchOptions:[{id:this.$nano.id(),label:"Any of the Words",value:1},{id:this.$nano.id(),label:"All of the Words",value:2}]}},computed:{_columns(){var e=this.columns.reduce((e,t)=>("isFilter"in t?t.isFilter&&e.push({id:t.id,label:t.label,value:t.name,dataType:t.dataType}):e.push({id:t.id,label:t.label,value:t.name,dataType:t.dataType}),e),[]);return e},apiPath(){if("repository"===this.module){if(this.$route.query.repositoryId)return`/repository/${this.moduleId}/uniqueColumnValues`}else if("form"===this.module)return`/form/${this.moduleId}/uniqueColumnValues`;return""}},watch:{model:{deep:!0,handler(){this.model}},$route:{deep:!0,handler(){this.$route.query.repositoryId||(this.filterGroups=[],this.activeFilter=!1)}},filterBy:{deep:!0,immediate:!0,handler(){0===this.filterBy.length&&""===this.contentSearch.contentSearchValue&&(this.activeFilter=!1)}},contentSearch:{deep:!0,immediate:!0,handler(){0===this.filterBy.length&&""===this.contentSearch.contentSearchValue&&(this.activeFilter=!1)}}},created(){this.getUsers()},methods:{conditions(e){if(!e)return[];if(1!==e.length)return Object(h["a"])("SHORT_TEXT").map(e=>({id:this.$nano.id(),label:`${Object(o["a"])(Object(r["a"])(e.split(" ")[0]))} ${e.split(" ")[1]?e.split(" ")[1]:""}`,value:e.split(" ")[0]}));{const t=this.columns.find(t=>t.name===e[0]);if(t)return Object(h["a"])(t.dataType).map(e=>({id:this.$nano.id(),label:`${Object(o["a"])(Object(r["a"])(e.split(" ")[0]))} ${e.split(" ")[1]?e.split(" ")[1]:""}`,value:e.split(" ")[0]}))}},addFilterGroup(e=0){this.filterGroups.splice(e,0,{id:this.$nano.id(),filters:[{id:this.$nano.id(),criteria:"",criteriaArray:[],condition:"",value:"",arrayValue:[]}],groupCondition:(this.filterGroups.length,"")}),this.filterGroups.length&&this.selectedFilter.length&&this.selectedFilter[1]&&1===this.selectedFilter[1].level&&(this.filterGroups[0].filters=[],this.selectedFilter.forEach((e,t)=>{0!=t&&this.filterGroups[0].filters.push({id:this.$nano.id(),criteria:e.fieldName,condition:"IS_EQUALS_TO",value:e.label,arrayValue:e.arrayValue||[]})}))},removeFilterGroup(e){this.filterGroups.splice(e,1)},addFilter(e){this.filterGroups[e].filters.push({id:this.$nano.id(),criteria:"",criteriaArray:[],condition:"CONTAINS",value:"",arrayValue:[]})},removeFilter(e,t){this.filterGroups[e].filters.splice(t,1)},async apply(){let e=0,t={};if(!this.$refs.form)return void(this.searchContent&&(this.$emit("update",this.filterGroups,t),this.model=!1,this.activeFilter=!0));for(const i of this.$refs.form){const t=await i.validate();t||e++}if(e)return;let s=!1;if(this.filterGroups.length&&(this.filterGroups[0].groupCondition="",this.filterGroups[0].filters.length||(this.filterGroups=[]),this.filterGroups.forEach(e=>{e.filters.length&&e.filters.forEach(e=>{e.criteriaArray.length>1?s=!0:e.criteria=e.criteriaArray[0],"SINGLE_SELECT"===e.dataType&&(e.value=JSON.stringify(e.arrayValue))})})),s){let e=[];this.filterGroups.forEach(t=>{t.filters.length&&t.filters.forEach(t=>{t.criteriaArray.forEach((s,i)=>{e.push({filters:[{criteria:s,condition:t.condition,value:t.value,dataType:t.dataType}],groupCondition:i?"OR":""})})})}),this.$emit("update",e,t)}else this.$emit("update",this.filterGroups,t);this.model=!1,this.activeFilter=!0},applyDataType(e,t,s){if(this.filterGroups[e].filters[t].condition="",1===s.length){this.filterGroups[e].filters[t].dataType="";let i=this._columns.find(e=>e.label===s[0]||e.value===s[0]);i&&(this.filterGroups[e].filters[t].dataType=i.dataType,"SHORT_TEXT"===i.dataType?this.filterGroups[e].filters[t].condition="CONTAINS":"SINGLE_SELECT"===i.dataType&&(this.filterGroups[e].filters[t].condition="IS_EQUALS_TO"));let a=this.filterGroups[e].filters[t];"SINGLE_SELECT"===a.dataType?this.filterGroups[e].filters[t].value=[]:this.filterGroups[e].filters[t].value=""}else this.filterGroups[e].filters[t].condition="CONTAINS",this.filterGroups[e].filters[t].dataType="SHORT_TEXT",this.filterGroups[e].filters[t].value=""},clearFilter(){this.filterGroups=[],this.activeFilter=!1,this.clearContentSearch(),this.$emit("update",this.filterGroups,"")},clearContentSearch(){this.showAdvanceOptions=!1,this.contentSearch.contentSearchValue="",this.contentSearch.searchType=1,this.contentSearch.fuzzy=0,this.$emit("updateContentSearch",this.contentSearch)},groupCondition(e){this.filterGroups[this.filterGroups.length-1].groupCondition=e},checkOptions(e){if(1===e.length){let t=this.columns.find(t=>t.name===e[0]);if(t&&t.apiLoad)return!0}return!1},getOptions(e){var t;return 1===e.length?"createdBy"===e[0]||"modifiedBy"===e[0]||"owner"===e[0]||"coordinator"===e[0]?this.userList:null===(t=this.columns.find(t=>t.name===e[0]))||void 0===t?void 0:t.options:[]},async getUsers(){this.userList=[];const{error:e,payload:t}=await w["s"].getUserList();e?this.$alert.error("Error fetching users"):t&&t.map(e=>{this.userList.push({id:this.$nano.id(),label:e.value,value:String(e.id)})})},async getUniqueOptions(e){try{const t=await C["b"].post(this.apiPath,JSON.stringify({column:e,keyword:"",rowFrom:0,rowCount:10})),{status:s,data:i}=t;if(200!==s)throw t;const a=JSON.parse(i);return this.options=[],a.forEach(e=>{let t=this.userList.find(t=>t.value===e);t&&this.options.push({id:this.$nano.id(),label:t.label,value:t.value})}),this.options}catch(t){console.error(t),this.$alert.error("Error fetching options")}}}},I=_,x=(s("ae23"),s("2877")),T=s("a026"),$=s("75c3"),A=s("b7fa"),F=s("f89c"),L=s("7937"),B=s("d882"),P=s("5ff7");const D="q-slider__marker-labels",M=e=>({value:e}),q=[34,37,40,33,39,38],N={mixins:[A["a"],F["b"]],directives:{TouchPan:$["a"]},props:{min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},data(){return{active:!1,preventFocus:!1,focus:!1,dragging:!1}},computed:{axis(){return!0===this.vertical?"--v":"--h"},labelSide(){return"-"+(!0===this.switchLabelSide?"switched":"standard")},isReversed(){return!0===this.vertical?!0===this.reverse:this.reverse!==(!0===this.$q.lang.rtl)},computedInnerMin(){return this.__getInnerMin(this.innerMin)},computedInnerMax(){return this.__getInnerMax(this.innerMax)},editable(){return!0!==this.disable&&!0!==this.readonly&&this.computedInnerMin<this.computedInnerMax},computedDecimals(){return(String(this.step).trim("0").split(".")[1]||"").length},computedStep(){return 0===this.step?1:this.step},computedTabindex(){return!0===this.editable?this.tabindex||0:-1},trackLen(){return this.max-this.min},innerBarLen(){return this.computedInnerMax-this.computedInnerMin},innerMinRatio(){return this.__convertModelToRatio(this.computedInnerMin)},innerMaxRatio(){return this.__convertModelToRatio(this.computedInnerMax)},positionProp(){return!0===this.vertical?!0===this.isReversed?"bottom":"top":!0===this.isReversed?"right":"left"},sizeProp(){return!0===this.vertical?"height":"width"},thicknessProp(){return!0===this.vertical?"width":"height"},orientation(){return!0===this.vertical?"vertical":"horizontal"},attributes(){const e={role:"slider","aria-valuemin":this.computedInnerMin,"aria-valuemax":this.computedInnerMax,"aria-orientation":this.orientation,"data-step":this.step};return!0===this.disable?e["aria-disabled"]="true":!0===this.readonly&&(e["aria-readonly"]="true"),e},classes(){return`q-slider q-slider${this.axis} q-slider--${!0===this.active?"":"in"}active inline no-wrap `+(!0===this.vertical?"row":"column")+(!0===this.disable?" disabled":" q-slider--enabled"+(!0===this.editable?" q-slider--editable":""))+("both"===this.focus?" q-slider--focus":"")+(this.label||!0===this.labelAlways?" q-slider--label":"")+(!0===this.labelAlways?" q-slider--label-always":"")+(!0===this.isDark?" q-slider--dark":"")+(!0===this.dense?" q-slider--dense q-slider--dense"+this.axis:"")},selectionBarClass(){const e=this.selectionColor||this.color;return"q-slider__selection absolute"+(void 0!==e?" text-"+e:"")},markerClass(){return this.__getAxisClass("markers")+" absolute overflow-hidden"},trackContainerClass(){return this.__getAxisClass("track-container")},pinClass(){return this.__getPositionClass("pin")},labelClass(){return this.__getPositionClass("label")},textContainerClass(){return this.__getPositionClass("text-container")},markerLabelsContainerClass(){return this.__getPositionClass("marker-labels-container")+(void 0!==this.markerLabelsClass?" "+this.markerLabelsClass:"")},trackClass(){return"q-slider__track relative-position no-outline"+(void 0!==this.trackColor?" bg-"+this.trackColor:"")},trackStyle(){const e={[this.thicknessProp]:this.trackSize};return void 0!==this.trackImg&&(e.backgroundImage=`url(${this.trackImg}) !important`),e},innerBarClass(){return"q-slider__inner absolute"+(void 0!==this.innerTrackColor?" bg-"+this.innerTrackColor:"")},innerBarStyle(){const e={[this.positionProp]:100*this.innerMinRatio+"%",[this.sizeProp]:100*(this.innerMaxRatio-this.innerMinRatio)+"%"};return void 0!==this.innerTrackImg&&(e.backgroundImage=`url(${this.innerTrackImg}) !important`),e},markerStep(){return!0===Object(P["c"])(this.markers)?this.markers:this.computedStep},markerTicks(){const e=[],t=this.markerStep;let s=this.min;do{e.push(s),s+=t}while(s<this.max);return e.push(this.max),e},markerLabelClass(){const e=` ${D}${this.axis}-`;return D+`${e}${!0===this.switchMarkerLabelsSide?"switched":"standard"}`+`${e}${!0===this.isReversed?"rtl":"ltr"}`},markerLabelsList(){return!1===this.markerLabels?null:this.__getMarkerList(this.markerLabels).map((e,t)=>({index:t,value:e.value,label:e.label||e.value,classes:this.markerLabelClass+(void 0!==e.classes?" "+e.classes:""),style:{...this.__getMarkerLabelStyle(e.value),...e.style||{}}}))},markerScope(){return{markerList:this.markerLabelsList,markerMap:this.markerLabelsMap,classes:this.markerLabelClass,getStyle:this.__getMarkerLabelStyle}},markerStyle(){if(0!==this.innerBarLen){const e=100*this.markerStep/this.innerBarLen;return{...this.innerBarStyle,backgroundSize:!0===this.vertical?`2px ${e}%`:e+"% 2px"}}return null},markerLabelsMap(){if(!1===this.markerLabels)return null;const e={};return this.markerLabelsList.forEach(t=>{e[t.value]=t}),e},panDirectives(){return!0===this.editable?[{name:"touch-pan",value:this.__onPan,modifiers:{[this.orientation]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}}]:null}},methods:{__getInnerMin(e){return!0===isNaN(e)||this.innerMin<this.min?this.min:this.innerMin},__getInnerMax(e){return!0===isNaN(e)||e>this.max?this.max:this.innerMax},__getPositionClass(e){const t="q-slider__"+e;return`${t} ${t}${this.axis} ${t}${this.axis}${this.labelSide}`},__getAxisClass(e){const t="q-slider__"+e;return`${t} ${t}${this.axis}`},__convertRatioToModel(e){let t=this.min+e*(this.max-this.min);if(this.step>0){const e=(t-this.min)%this.step;t+=(Math.abs(e)>=this.step/2?(e<0?-1:1)*this.step:0)-e}return this.computedDecimals>0&&(t=parseFloat(t.toFixed(this.computedDecimals))),Object(L["a"])(t,this.computedInnerMin,this.computedInnerMax)},__convertModelToRatio(e){return 0===this.trackLen?0:(e-this.min)/this.trackLen},__getDraggingRatio(e,t){const s=Object(B["h"])(e),i=!0===this.vertical?Object(L["a"])((s.top-t.top)/t.height,0,1):Object(L["a"])((s.left-t.left)/t.width,0,1);return Object(L["a"])(!0===this.isReversed?1-i:i,this.innerMinRatio,this.innerMaxRatio)},__getMarkerList(e){if(!1===e)return null;if(!0===e)return this.markerTicks.map(M);if("function"===typeof e)return this.markerTicks.map(t=>{const s=e(t);return!0===Object(P["d"])(s)?{...s,value:t}:{value:t,label:s}});const t=({value:e})=>e>=this.min&&e<=this.max;return!0===Array.isArray(e)?e.map(e=>!0===Object(P["d"])(e)?e:{value:e}).filter(t):Object.keys(e).map(t=>{const s=e[t],i=Number(t);return!0===Object(P["d"])(s)?{...s,value:i}:{value:i,label:s}}).filter(t)},__getMarkerLabelStyle(e){return{[this.positionProp]:100*(e-this.min)/this.trackLen+"%"}},__getMarkerLabelsContent(e){if(void 0!==this.$scopedSlots["marker-label-group"])return this.$scopedSlots["marker-label-group"](this.markerScope);const t=this.$scopedSlots["marker-label"];return void 0!==t?this.markerLabelsList.map(e=>t({marker:e,...this.markerScope})):this.markerLabelsList.map(t=>e("div",{key:t.value,style:t.style,class:t.classes},t.label))},__onPan(e){!0===e.isFinal?(void 0!==this.dragging&&(this.__updatePosition(e.evt),!0===e.touch&&this.__updateValue(!0),this.dragging=void 0,this.$emit("pan","end")),this.active=!1,this.focus=!1):!0===e.isFirst?(this.dragging=this.__getDragging(e.evt),this.__updatePosition(e.evt),this.__updateValue(),this.active=!0,this.$emit("pan","start")):(this.__updatePosition(e.evt),this.__updateValue())},__onBlur(){this.focus=!1},__onActivate(e){this.__updatePosition(e,this.__getDragging(e)),this.__updateValue(),this.preventFocus=!0,this.active=!0,document.addEventListener("mouseup",this.__onDeactivate,!0)},__onDeactivate(){this.preventFocus=!1,this.active=!1,this.__updateValue(!0),this.__onBlur(),document.removeEventListener("mouseup",this.__onDeactivate,!0)},__onMobileClick(e){this.__updatePosition(e,this.__getDragging(e)),this.__updateValue(!0)},__onKeyup(e){q.includes(e.keyCode)&&this.__updateValue(!0)},__getTextContainerStyle(e){if(!0===this.vertical)return null;const t=this.$q.lang.rtl!==this.reverse?1-e:e;return{transform:`translateX(calc(${2*t-1} * ${this.thumbSize} / 2 + ${50-100*t}%))`}},__getThumb(e,t){const s=[e("svg",{class:"q-slider__thumb-shape absolute-full",attrs:{viewBox:"0 0 20 20","aria-hidden":"true"}},[e("path",{attrs:{d:this.thumbPath}})]),e("div",{class:"q-slider__focus-ring fit"})];return!0!==this.label&&!0!==this.labelAlways||(s.push(e("div",{class:this.pinClass+" absolute fit no-pointer-events"+t.pinColor},[e("div",{class:this.labelClass,style:{minWidth:this.thumbSize}},[e("div",{class:this.textContainerClass,style:t.textContainerStyle},[e("span",{class:t.textClass},t.label)])])])),void 0!==this.name&&!0!==this.disable&&this.__injectFormInput(s,"push")),e("div",{class:t.classes,style:t.style,...t.nodeData},s)},__getContent(e,t){const s=[];"transparent"!==this.innerTrackColor&&s.push(e("div",{key:"inner",class:this.innerBarClass,style:this.innerBarStyle})),"transparent"!==this.selectionColor&&s.push(e("div",{key:"selection",class:this.selectionBarClass,style:this.selectionBarStyle})),!1!==this.markers&&s.push(e("div",{key:"marker",class:this.markerClass,style:this.markerStyle})),t(s);const i=[e("div",{key:"trackC",class:this.trackContainerClass,attrs:this.trackContainerAttrs,on:this.trackContainerEvents,directives:this.panDirectives},[e("div",{class:this.trackClass,style:this.trackStyle},s)])];if(!1!==this.markerLabels){const t=!0===this.switchMarkerLabelsSide?"unshift":"push";i[t](e("div",{key:"markerL",class:this.markerLabelsContainerClass},this.__getMarkerLabelsContent(e)))}return i}},beforeDestroy(){document.removeEventListener("mouseup",this.__onDeactivate,!0)}};var O=T["default"].extend({name:"QSlider",mixins:[N],props:{value:{required:!0,default:null,validator:e=>"number"===typeof e||null===e},labelValue:[String,Number]},data(){const e=this.__getInnerMin(this.innerMin),t=this.__getInnerMax(this.innerMax);return{model:null===this.value?e:Object(L["a"])(this.value,e,t),curRatio:0}},computed:{modelRatio(){return this.__convertModelToRatio(this.model)},ratio(){return!0===this.active?this.curRatio:this.modelRatio},selectionBarStyle(){const e={[this.positionProp]:100*this.innerMinRatio+"%",[this.sizeProp]:100*(this.ratio-this.innerMinRatio)+"%"};return void 0!==this.selectionImg&&(e.backgroundImage=`url(${this.selectionImg}) !important`),e},thumbLabel(){return void 0!==this.labelValue?this.labelValue:this.model},thumbClasses(){const e=this.thumbColor||this.color;return`q-slider__thumb q-slider__thumb${this.axis} q-slider__thumb${this.axis}-${!0===this.isReversed?"rtl":"ltr"} absolute non-selectable`+(!1===this.preventFocus&&!0===this.focus?" q-slider--focus":"")+(void 0!==e?" text-"+e:"")},thumbStyle(){return{width:this.thumbSize,height:this.thumbSize,[this.positionProp]:100*this.ratio+"%"}},thumbPinColor(){return void 0!==this.labelColor?" text-"+this.labelColor:""},thumbTextContainerStyle(){return this.__getTextContainerStyle(this.ratio)},thumbTextClass(){return"q-slider__text"+(void 0!==this.labelTextColor?" text-"+this.labelTextColor:"")},trackContainerEvents(){return!0!==this.editable?{}:!0===this.$q.platform.is.mobile?{click:this.__onMobileClick}:{mousedown:this.__onActivate,focus:this.__onFocus,blur:this.__onBlur,keydown:this.__onKeydown,keyup:this.__onKeyup}},trackContainerAttrs(){return{tabindex:!0!==this.$q.platform.is.mobile?this.computedTabindex:null}},modelUpdate(){return`${this.value}|${this.computedInnerMin}|${this.computedInnerMax}`}},watch:{modelUpdate(){this.model=null===this.value?this.computedInnerMin:Object(L["a"])(this.value,this.computedInnerMin,this.computedInnerMax)}},methods:{__updateValue(e){this.model!==this.value&&this.$emit("input",this.model),!0===e&&this.$emit("change",this.model)},__getDragging(){return this.$el.getBoundingClientRect()},__updatePosition(e,t=this.dragging){const s=this.__getDraggingRatio(e,t);this.model=this.__convertRatioToModel(s),this.curRatio=!0!==this.snap||0===this.computedStep?s:this.__convertModelToRatio(this.model)},__onFocus(){this.focus=!0},__onKeydown(e){if(!q.includes(e.keyCode))return;Object(B["l"])(e);const t=([34,33].includes(e.keyCode)?10:1)*this.computedStep,s=([34,37,40].includes(e.keyCode)?-1:1)*(!0===this.isReversed?-1:1)*(!0===this.vertical?-1:1)*t;this.model=Object(L["a"])(parseFloat((this.model+s).toFixed(this.computedDecimals)),this.computedInnerMin,this.computedInnerMax),this.__updateValue()}},render(e){const t=this.__getContent(e,t=>{t.push(this.__getThumb(e,{pinColor:this.thumbPinColor,textContainerStyle:this.thumbTextContainerStyle,textClass:this.thumbTextClass,label:this.thumbLabel,classes:this.thumbClasses,style:this.thumbStyle,nodeData:{}}))});return e("div",{class:this.classes+(null===this.value?" q-slider--no-value":""),attrs:{...this.attributes,"aria-valuenow":this.value}},t)}}),E=s("93dc"),V=s.n(E),R=Object(x["a"])(I,i,a,!1,null,"2eff0750",null);t["a"]=R.exports;V()(R,"components",{QSlider:O})},2852:function(e,t,s){"use strict";s("e5e9")},"28f7":function(e,t,s){},"297e":function(e,t,s){"use strict";s("f98d")},"298f":function(e,t,s){"use strict";s("0b71")},"2ac6":function(e,t,s){"use strict";s("0ce8")},"2b88":function(e,t,s){"use strict";
/*! 
  * portal-vue  Thorsten Lnborg, 2019 
  * 
  * Version: 2.1.7
  * 
  * LICENCE: MIT 
  * 
  * https://github.com/linusborg/portal-vue
  * 
 */function i(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}Object.defineProperty(t,"__esModule",{value:!0});var a=i(s("a026"));function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e){return n(e)||l(e)||c()}function n(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var d="undefined"!==typeof window;function u(e){return Array.isArray(e)||"object"===o(e)?Object.freeze(e):e}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.reduce((function(e,s){var i=s.passengers[0],a="function"===typeof i?i(t):s.passengers;return e.concat(a)}),[])}function h(e,t){return e.map((function(e,t){return[t,e]})).sort((function(e,s){return t(e[1],s[1])||e[0]-s[0]})).map((function(e){return e[1]}))}function p(e,t){return t.reduce((function(t,s){return e.hasOwnProperty(s)&&(t[s]=e[s]),t}),{})}var f={},v={},y={},b=a.extend({data:function(){return{transports:f,targets:v,sources:y,trackInstances:d}},methods:{open:function(e){if(d){var t=e.to,s=e.from,i=e.passengers,o=e.order,r=void 0===o?1/0:o;if(t&&s&&i){var n={to:t,from:s,passengers:u(i),order:r},l=Object.keys(this.transports);-1===l.indexOf(t)&&a.set(this.transports,t,[]);var c=this.$_getTransportIndex(n),m=this.transports[t].slice(0);-1===c?m.push(n):m[c]=n,this.transports[t]=h(m,(function(e,t){return e.order-t.order}))}}},close:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=e.to,i=e.from;if(s&&(i||!1!==t)&&this.transports[s])if(t)this.transports[s]=[];else{var a=this.$_getTransportIndex(e);if(a>=0){var o=this.transports[s].slice(0);o.splice(a,1),this.transports[s]=o}}},registerTarget:function(e,t,s){d&&(this.trackInstances&&!s&&this.targets[e]&&console.warn("[portal-vue]: Target ".concat(e," already exists")),this.$set(this.targets,e,Object.freeze([t])))},unregisterTarget:function(e){this.$delete(this.targets,e)},registerSource:function(e,t,s){d&&(this.trackInstances&&!s&&this.sources[e]&&console.warn("[portal-vue]: source ".concat(e," already exists")),this.$set(this.sources,e,Object.freeze([t])))},unregisterSource:function(e){this.$delete(this.sources,e)},hasTarget:function(e){return!(!this.targets[e]||!this.targets[e][0])},hasSource:function(e){return!(!this.sources[e]||!this.sources[e][0])},hasContentFor:function(e){return!!this.transports[e]&&!!this.transports[e].length},$_getTransportIndex:function(e){var t=e.to,s=e.from;for(var i in this.transports[t])if(this.transports[t][i].from===s)return+i;return-1}}}),g=new b(f),w=1,C=a.extend({name:"portal",props:{disabled:{type:Boolean},name:{type:String,default:function(){return String(w++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}}},created:function(){var e=this;this.$nextTick((function(){g.registerSource(e.name,e)}))},mounted:function(){this.disabled||this.sendUpdate()},updated:function(){this.disabled?this.clear():this.sendUpdate()},beforeDestroy:function(){g.unregisterSource(this.name),this.clear()},watch:{to:function(e,t){t&&t!==e&&this.clear(t),this.sendUpdate()}},methods:{clear:function(e){var t={from:this.name,to:e||this.to};g.close(t)},normalizeSlots:function(){return this.$scopedSlots.default?[this.$scopedSlots.default]:this.$slots.default},normalizeOwnChildren:function(e){return"function"===typeof e?e(this.slotProps):e},sendUpdate:function(){var e=this.normalizeSlots();if(e){var t={from:this.name,to:this.to,passengers:r(e),order:this.order};g.open(t)}else this.clear()}},render:function(e){var t=this.$slots.default||this.$scopedSlots.default||[],s=this.tag;return t&&this.disabled?t.length<=1&&this.slim?this.normalizeOwnChildren(t)[0]:e(s,[this.normalizeOwnChildren(t)]):this.slim?e():e(s,{class:{"v-portal":!0},style:{display:"none"},key:"v-portal-placeholder"})}}),k=a.extend({name:"portalTarget",props:{multiple:{type:Boolean,default:!1},name:{type:String,required:!0},slim:{type:Boolean,default:!1},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},data:function(){return{transports:g.transports,firstRender:!0}},created:function(){var e=this;this.$nextTick((function(){g.registerTarget(e.name,e)}))},watch:{ownTransports:function(){this.$emit("change",this.children().length>0)},name:function(e,t){g.unregisterTarget(t),g.registerTarget(e,this)}},mounted:function(){var e=this;this.transition&&this.$nextTick((function(){e.firstRender=!1}))},beforeDestroy:function(){g.unregisterTarget(this.name)},computed:{ownTransports:function(){var e=this.transports[this.name]||[];return this.multiple?e:0===e.length?[]:[e[e.length-1]]},passengers:function(){return m(this.ownTransports,this.slotProps)}},methods:{children:function(){return 0!==this.passengers.length?this.passengers:this.$scopedSlots.default?this.$scopedSlots.default(this.slotProps):this.$slots.default||[]},noWrapper:function(){var e=this.slim&&!this.transition;return e&&this.children().length>1&&console.warn("[portal-vue]: PortalTarget with `slim` option received more than one child element."),e}},render:function(e){var t=this.noWrapper(),s=this.children(),i=this.transition||this.tag;return t?s[0]:this.slim&&!i?e():e(i,{props:{tag:this.transition&&this.tag?this.tag:void 0},class:{"vue-portal-target":!0}},s)}}),S=0,_=["disabled","name","order","slim","slotProps","tag","to"],I=["multiple","transition"],x=a.extend({name:"MountingPortal",inheritAttrs:!1,props:{append:{type:[Boolean,String]},bail:{type:Boolean},mountTo:{type:String,required:!0},disabled:{type:Boolean},name:{type:String,default:function(){return"mounted_"+String(S++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}},multiple:{type:Boolean,default:!1},targetSlim:{type:Boolean},targetSlotProps:{type:Object,default:function(){return{}}},targetTag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},created:function(){if("undefined"!==typeof document){var e=document.querySelector(this.mountTo);if(e){var t=this.$props;if(g.targets[t.name])t.bail?console.warn("[portal-vue]: Target ".concat(t.name," is already mounted.\n        Aborting because 'bail: true' is set")):this.portalTarget=g.targets[t.name];else{var s=t.append;if(s){var i="string"===typeof s?s:"DIV",a=document.createElement(i);e.appendChild(a),e=a}var o=p(this.$props,I);o.slim=this.targetSlim,o.tag=this.targetTag,o.slotProps=this.targetSlotProps,o.name=this.to,this.portalTarget=new k({el:e,parent:this.$parent||this,propsData:o})}}else console.error("[portal-vue]: Mount Point '".concat(this.mountTo,"' not found in document"))}},beforeDestroy:function(){var e=this.portalTarget;if(this.append){var t=e.$el;t.parentNode.removeChild(t)}e.$destroy()},render:function(e){if(!this.portalTarget)return console.warn("[portal-vue] Target wasn't mounted"),e();if(!this.$scopedSlots.manual){var t=p(this.$props,_);return e(C,{props:t,attrs:this.$attrs,on:this.$listeners,scopedSlots:this.$scopedSlots},this.$slots.default)}var s=this.$scopedSlots.manual({to:this.to});return Array.isArray(s)&&(s=s[0]),s||e()}});function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component(t.portalName||"Portal",C),e.component(t.portalTargetName||"PortalTarget",k),e.component(t.MountingPortalName||"MountingPortal",x)}var $={install:T};t.default=$,t.Portal=C,t.PortalTarget=k,t.MountingPortal=x,t.Wormhole=g},"2d9d":function(e,t,s){"use strict";s("6f95")},"2dcd":function(e,t,s){},"2ddf":function(e,t,s){},"2e65":function(e,t,s){"use strict";s("3d68")},"2f12":function(e,t,s){"use strict";s("2ddf")},3002:function(e,t,s){},"307a":function(e,t,s){},3595:function(e,t,s){"use strict";s("ee74")},3607:function(e,t,s){"use strict";s("ff59")},"36b4":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("Sheet",{attrs:{value:e.value},on:{input:function(t){return e.$emit("input",!1)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Quick Help ")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"quick-help"}},[t("div",{staticClass:"section-title"},[e._v("Overview")]),t("VideoCard",{attrs:{caption:"Learn all about the module by watching the 5 minute video",thumbnail:"workspace","page-help":e.pageHelp},on:{videoclick:function(t){return e.$emit("videoclick")}}}),t("div",{staticClass:"section-title"},[e._v("Related videos")]),"WORKFLOW"===e.pageHelp?e._l(e.workFlow,(function(s){return t("ListItem",{key:s.id,staticClass:"list-item",attrs:{icon:"eva-film-outline",label:s.label},on:{click:function(t){return e.workFlowClick(s)}}})})):e._e(),"FORM"===e.pageHelp?e._l(e.form,(function(s){return t("ListItem",{key:s.id,staticClass:"list-item",attrs:{icon:"eva-film-outline",label:s.label},on:{click:function(t){return e.workFlowClick(s)}}})})):e._e(),"REPOSITORY"===e.pageHelp?e._l(e.repository,(function(s){return t("ListItem",{key:s.id,staticClass:"list-item",attrs:{icon:"eva-film-outline",label:s.label},on:{click:function(t){return e.workFlowClick(s)}}})})):[t("ListItem",{staticClass:"list-item",attrs:{icon:"eva-film-outline",label:"How to add workspace?"}}),t("ListItem",{staticClass:"list-item",attrs:{icon:"eva-film-outline",label:"How to create a Form?"}}),t("ListItem",{staticClass:"list-item",attrs:{icon:"eva-film-outline",label:"How to download the report pdf?"}})],t("div",{staticClass:"section-title"},[e._v("Related links")]),"WORKFLOW"===e.pageHelp?e._l(e.relatedLinks,(function(e){return t("ListItem",{key:e.id,staticClass:"list-item",attrs:{icon:"eva-film-outline",label:e.label}})})):"FORM"===e.pageHelp?e._l(e.relatedLinkForms,(function(e){return t("ListItem",{key:e.id,staticClass:"list-item",attrs:{icon:"eva-film-outline",label:e.label}})})):"REPOSITORY"===e.pageHelp?e._l(e.relatedLinkRepository,(function(e){return t("ListItem",{key:e.id,staticClass:"list-item",attrs:{icon:"eva-film-outline",label:e.label}})})):[t("ListItem",{staticClass:"list-item",attrs:{icon:"eva-external-link",label:"Add a dashboard chart"}}),t("ListItem",{staticClass:"list-item",attrs:{icon:"eva-external-link",label:"Create a Form"}}),t("ListItem",{staticClass:"list-item",attrs:{icon:"eva-external-link",label:"Delete a workspace"}})]],2)]},proxy:!0}])}),t("QuickHelpModal",{attrs:{"is-header":!1,width:"70vw",height:"96vh","has-footer":""},scopedSlots:e._u([{key:"default",fn:function(){return[t("div",{staticClass:"expand",staticStyle:{position:"relative","padding-bottom":"calc(50.70717423133236% + 42px)",height:"0"}},[t("iframe",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{src:e.selectedItem.link,title:"Workflow - Process Design",allow:"clipboard-write",frameborder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:""}})])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Close",icon:"mdi-close",color:"primary"},on:{click:function(t){e.workflowModal=!1}}})]},proxy:!0}]),model:{value:e.workflowModal,callback:function(t){e.workflowModal=t},expression:"workflowModal"}})],1)},a=[],o=s("381e"),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"video-card"},on:{click:function(t){return t.stopPropagation(),e.$emit("click")}}},[t("div",{staticClass:"description"},[e._v(" "+e._s(e.caption)+" ")]),"WORKFLOW"===e.pageHelp?t("div",{staticClass:"expand",staticStyle:{position:"relative","padding-bottom":"calc(50.70717423133236% + 42px)",height:"0"}},[t("iframe",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{src:"https://walk.ezofis.com/embed/clxbirpmz0rgat2oea5devc2m",title:"Workflow - Process Design",allow:"clipboard-write",frameborder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:""}}),t("div",{staticClass:"play-btn shadow-2",on:{click:function(t){return e.$emit("videoclick")}}})]):"FORM"===e.pageHelp?t("div",{staticClass:"expand",staticStyle:{position:"relative","padding-bottom":"calc(50.70717423133236% + 42px)",height:"0"}},[t("iframe",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{src:"https://app.supademo.com/embed/clxd8vlxd1by1t2oe6icxf5nr",title:"Workflow - Process Design",allow:"clipboard-write",frameborder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:""}}),t("div",{staticClass:"play-btn shadow-2",on:{click:function(t){return e.$emit("videoclick")}}})]):"REPOSITORY"===e.pageHelp?t("div",{staticClass:"expand",staticStyle:{position:"relative","padding-bottom":"calc(50.70717423133236% + 42px)",height:"0"}},[t("iframe",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{src:"https://app.supademo.com/embed/clxqan0n800m3tj3fz0zayzcf",title:"Workflow - Process Design",allow:"clipboard-write",frameborder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:""}}),t("div",{staticClass:"play-btn shadow-2",on:{click:function(t){return e.$emit("videoclick")}}})]):t("div",{staticClass:"video"},[t("img",{attrs:{src:e._thumbnail,alt:"video"}}),t("div",{staticClass:"play-btn shadow-2"},[t("BaseIcon",{attrs:{name:"mdi-play",size:"24px",color:"white"}})],1)])])},n=[],l=s("2f62"),c={name:"VideoCard",props:{caption:{type:String,required:!0},thumbnail:{type:String,required:!0},pageHelp:{type:String,default:""}},computed:{...Object(l["c"])(["darkTheme"]),_thumbnail(){return s("739a")(`./${this.thumbnail}-${this.darkTheme?"dark":"light"}.png`)}}},d=c,u=(s("ff71"),s("2877")),m=Object(u["a"])(d,r,n,!1,null,"0369504f",null),h=m.exports,p=s("cade"),f=s("b641"),v={name:"QuickHelp",components:{Sheet:o["a"],VideoCard:h,ListItem:p["a"],QuickHelpModal:f["a"]},props:{value:{type:Boolean,default:!1},pageHelp:{type:String,default:""}},data(){return{workFlow:[{id:this.$nano.id(),label:"How to create new Workflow? ",link:"https://app.supademo.com/embed/clxd8hz5u1bqat2oeke7kkoew"},{id:this.$nano.id(),label:"How to connect Folders in Workflow?",link:"https://app.supademo.com/embed/clxd7tkoo1b80t2oewkmcvht1"},{id:this.$nano.id(),label:"How to Enable Notification on the node level?",link:"https://app.supademo.com/embed/clxbirpmz0rgat2oea5devc2m"},{id:this.$nano.id(),label:"How to add Document checklist on each of the nodes?",link:"https://app.supademo.com/embed/clxesrdp81s6kt2oesojunb10"},{id:this.$nano.id(),label:"How to add secure controls to visible / Editable on each nodes?",link:"https://app.supademo.com/embed/clxeo8mmp1q8ot2oef1qnxh2n"}],relatedLinks:[{id:this.$nano.id(),label:"Create a Form "},{id:this.$nano.id(),label:"Create a Folders"},{id:this.$nano.id(),label:"Configure Weekly Schedular"},{id:this.$nano.id(),label:"Delete Workflow"},{id:this.$nano.id(),label:"Configre Delegates"}],form:[{id:this.$nano.id(),label:"How to create new Form? ",link:"https://app.supademo.com/embed/clxd8vlxd1by1t2oe6icxf5nr"},{id:this.$nano.id(),label:"How to Configure Master Form?",link:"https://app.supademo.com/embed/clxeypgjq1taat2oeste1kqly"},{id:this.$nano.id(),label:"How to add Panels and Controls on the Forms?",link:"https://app.supademo.com/embed/clxe5sifa1jubt2oeeqe6g5yx"},{id:this.$nano.id(),label:"How to configure the Controls Properties?",link:"https://app.supademo.com/embed/clxeb6bpn1lo3t2oescrrnarp"},{id:this.$nano.id(),label:"How to assign Default values? (login name / login email / Date Fields)",link:"https://app.supademo.com/embed/clxf1en5q1tnst2oe2lw8lull"},{id:this.$nano.id(),label:"How to apply settings on Calendar Picker?",link:"https://app.supademo.com/embed/clxenredh1pvyt2oensroin4m"},{id:this.$nano.id(),label:"How to connect with Master Inputs?",link:"https://app.supademo.com/embed/clxg1psol1xwjt2oeo843dd2f"},{id:this.$nano.id(),label:"How to enable controls based on the selected value?",link:"https://app.supademo.com/embed/clxfr9qln1wy8t2oeki9cigqx"},{id:this.$nano.id(),label:"How to apply readonly controls based on the selected Value?",link:"https://app.supademo.com/embed/clxfwe5z41xb9t2oez0l7ufiz"}],relatedLinkForms:[{id:this.$nano.id(),label:"Create a Workflow "},{id:this.$nano.id(),label:"Create a Folders"},{id:this.$nano.id(),label:"Configure QR Code Generator"},{id:this.$nano.id(),label:"Delete Forms"}],repository:[{id:this.$nano.id(),label:"How to upload files on Static Folder?",link:"https://app.supademo.com/embed/clxqan0n800m3tj3fz0zayzcf"},{id:this.$nano.id(),label:"How to do manual indexing (with freehand)?",link:"https://app.supademo.com/embed/clxrbyddv4bs7t2oewhreca4a"},{id:this.$nano.id(),label:"How to do Content Search?",link:"https://app.supademo.com/embed/clxrdmmu74cbpt2oecuqf41am"},{id:this.$nano.id(),label:"How to do Global Search?",link:"https://app.supademo.com/edit/clxrdeqvl4c7st2oetzsbpz3p"},{id:this.$nano.id(),label:"How to upload files on dynamic Folder?",link:"https://app.supademo.com/embed/clxkjn41t2y6jt2oeea75ejui"},{id:this.$nano.id(),label:"How to upload the files into folders?",link:"https://app.supademo.com/embed/clxqa1xmy4888t2oev1skml3x"},{id:this.$nano.id(),label:"How to send the files to auto process?",link:"https://app.supademo.com/embed/clxrjr2wk4d0pt2oe26rima2o"},{id:this.$nano.id(),label:"How to Assign Document Notifications?",link:"https://app.supademo.com/embed/clxrcnvuo4byot2oec34ew455"},{id:this.$nano.id(),label:"How to download / print?",link:"https://app.supademo.com/embed/clxrd48pq4c5dt2oeb1dv0bjt"}],relatedLinkRepository:[{id:this.$nano.id(),label:"Create a Workflow "},{id:this.$nano.id(),label:"Create a Folders"},{id:this.$nano.id(),label:"Configure QR Code Generator"},{id:this.$nano.id(),label:"Delete Forms"}],workflowModal:!1,selectedItem:{}}},methods:{workFlowClick(e){this.workflowModal=!0,this.selectedItem=e}}},y=v,b=(s("956a"),Object(u["a"])(y,i,a,!1,null,"14ad6b7a",null));t["a"]=b.exports},"36ce":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"breadcrumbs"}},[e._l(e.breadcrumbs,(function(s,i){return[t("Breadcrumb",{key:s.id,attrs:{label:s.label,route:s.route},on:{click:function(t){return e.goto(s)}}}),i!==e.breadcrumbs.length-1?t("Separator",{key:i}):e._e()]}))],2)},a=[],o=(s("14d9"),function(){var e=this,t=e._self._c;return t("div",e._g({class:{"has-link":e.route},attrs:{id:"breadcrumb"}},e.$listeners),[e._v(" "+e._s(e.label)+" ")])}),r=[],n={name:"Breadcrumb",props:{label:{type:String,required:!0},route:{type:String,default:""}}},l=n,c=(s("a5be"),s("2877")),d=Object(c["a"])(l,o,r,!1,null,"296e1bac",null),u=d.exports,m=s("5ca1"),h={name:"Breadcrumbs",components:{Breadcrumb:u,Separator:m["a"]},props:{breadcrumbs:{type:Array,required:!0}},methods:{goto(e){if(this.$store.state.profileMenus.length)if(e.query){let t=e.query.split(":");this.$router.push({name:e.route,query:{[t[0]]:t[1]}})}else this.$router.push({name:e.route})}}},p=h,f=(s("7fe6"),Object(c["a"])(p,i,a,!1,null,"ce99f49c",null));t["a"]=f.exports},"37b7":function(e,t,s){},"381b":function(e,t,s){"use strict";const i={SHORT_TEXT:"SHORT_TEXT",NUMBER:"NUMBER",BOOLEAN:"BOOLEAN",DATE:"DATE",TIME:"TIME",DATE_TIME:"DATE_TIME",SINGLE_SELECT:"SINGLE_SELECT",TABLE:"TABLE",BARCODE:"BARCODE",OMR:"OMR",AUTO_GENERATED:"AUTO_GENERATED"};Object.freeze(i),t["a"]=i},3846:function(e,t,s){e.exports=s.p+"img/sobha-mark-logo.7fc8820b.png"},3980:function(e,t,s){"use strict";var i=s("a026"),a=s("d882"),o=s("0967"),r={data(){return{canRender:!o["f"]}},mounted(){!1===this.canRender&&(this.canRender=!0)}},n=s("d54d");t["a"]=i["default"].extend({name:"QResizeObserver",mixins:[r],props:{debounce:{type:[String,Number],default:100}},data(){return!0===this.hasObserver?{}:{url:!0===this.$q.platform.is.ie?null:"about:blank"}},methods:{trigger(e){!0===e||0===this.debounce||"0"===this.debounce?this.__emit():null===this.timer&&(this.timer=setTimeout(this.__emit,this.debounce))},__emit(){if(null!==this.timer&&(clearTimeout(this.timer),this.timer=null),!this.$el||!this.$el.parentNode)return;const e=this.$el.parentNode,t={width:e.offsetWidth,height:e.offsetHeight};t.width===this.size.width&&t.height===this.size.height||(this.size=t,this.$emit("resize",this.size))},__cleanup(){void 0!==this.curDocView&&(void 0!==this.curDocView.removeEventListener&&this.curDocView.removeEventListener("resize",this.trigger,a["f"].passive),this.curDocView=void 0)},__onObjLoad(){this.__cleanup(),this.$el.contentDocument&&(this.curDocView=this.$el.contentDocument.defaultView,this.curDocView.addEventListener("resize",this.trigger,a["f"].passive)),this.__emit()}},render(e){if(!1!==this.canRender&&!0!==this.hasObserver)return e("object",{style:this.style,attrs:{tabindex:-1,type:"text/html",data:this.url,"aria-hidden":"true"},on:Object(n["b"])(this,"load",{load:this.__onObjLoad})})},beforeCreate(){this.size={width:-1,height:-1},!0!==o["e"]&&(this.hasObserver="undefined"!==typeof ResizeObserver,!0!==this.hasObserver&&(this.style=(this.$q.platform.is.ie?"visibility:hidden;":"")+"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;"))},mounted(){if(this.timer=null,!0===this.hasObserver)return this.observer=new ResizeObserver(this.trigger),this.observer.observe(this.$el.parentNode),void this.__emit();!0===this.$q.platform.is.ie?(this.url="about:blank",this.__emit()):this.__onObjLoad()},beforeDestroy(){clearTimeout(this.timer),!0!==this.hasObserver?this.__cleanup():void 0!==this.observer&&this.$el.parentNode&&this.observer.unobserve(this.$el.parentNode)}})},"39cc":function(e,t,s){"use strict";s("fad0")},"3b73":function(e,t,s){"use strict";s("3c65"),s("14d9");var i=s("a026"),a=s("66e5"),o=s("4074"),r=s("0170"),n=s("0016"),l=s("e9c1"),c=s("eb85"),d=s("8716"),u=s("463c"),m=s("7ee0"),h=s("b7fa"),p=s("d882"),f=s("e277"),v=s("d54d"),y=s("1732");const b="q:expansion-item:close",g=Object.keys(d["b"]);t["a"]=i["default"].extend({name:"QExpansionItem",mixins:[h["a"],u["a"],m["a"]],props:{...d["b"],icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},data(){return{showing:void 0!==this.value?this.value:this.defaultOpened}},watch:{showing(e){!0===e&&void 0!==this.group&&this.$root.$emit(b,this)},group(e,t){void 0!==e&&void 0===t?this.$root.$on(b,this.__eventHandler):void 0===e&&void 0!==t&&this.$root.$off(b,this.__eventHandler)}},computed:{classes(){return"q-expansion-item--"+(!0===this.showing?"expanded":"collapsed")+" q-expansion-item--"+(!0===this.popup?"popup":"standard")},contentStyle(){if(void 0!==this.contentInsetLevel){const e=!0===this.$q.lang.rtl?"Right":"Left";return{["padding"+e]:56*this.contentInsetLevel+"px"}}},hasLink(){return!0!==this.disable&&(void 0!==this.href||void 0!==this.to&&null!==this.to&&""!==this.to)},linkProps(){const e={};return g.forEach(t=>{e[t]=this[t]}),e},isClickable(){return!0===this.hasLink||!0!==this.expandIconToggle},expansionIcon(){return void 0!==this.expandedIcon&&!0===this.showing?this.expandedIcon:this.expandIcon||this.$q.iconSet.expansionItem[!0===this.denseToggle?"denseIcon":"icon"]},activeToggleIcon(){return!0!==this.disable&&(!0===this.hasLink||!0===this.expandIconToggle)},headerSlotScope(){return{expanded:!0===this.showing,detailsId:this.targetUid,toggle:this.toggle,show:this.show,hide:this.hide}},toggleAriaAttrs(){const e=void 0!==this.toggleAriaLabel?this.toggleAriaLabel:this.$q.lang.label[!0===this.showing?"collapse":"expand"](this.label);return{role:"button","aria-expanded":!0===this.showing?"true":"false","aria-controls":this.targetUid,"aria-label":e}}},methods:{__onHeaderClick(e){!0!==this.hasLink&&this.toggle(e),this.$emit("click",e)},__toggleIconKeyboard(e){13===e.keyCode&&this.__toggleIcon(e,!0)},__toggleIcon(e,t){!0!==t&&void 0!==this.$refs.blurTarget&&this.$refs.blurTarget.focus(),this.toggle(e),Object(p["l"])(e)},__eventHandler(e){this!==e&&this.group===e.group&&this.hide()},__getToggleIcon(e){const t={staticClass:"q-focusable relative-position cursor-pointer"+(!0===this.denseToggle&&!0===this.switchToggleSide?" items-end":""),class:this.expandIconClass,props:{side:!0!==this.switchToggleSide,avatar:this.switchToggleSide}},s=[e(n["a"],{staticClass:"q-expansion-item__toggle-icon",class:void 0===this.expandedIcon&&!0===this.showing?"q-expansion-item__toggle-icon--rotated":void 0,props:{name:this.expansionIcon}})];return!0===this.activeToggleIcon&&(Object.assign(t,{attrs:{tabindex:0,...this.toggleAriaAttrs},on:Object(v["b"])(this,"inpExt",{click:this.__toggleIcon,keyup:this.__toggleIconKeyboard})}),s.unshift(e("div",{ref:"blurTarget",staticClass:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",attrs:{tabindex:-1}}))),e(o["a"],t,s)},__getHeader(e){let t;void 0!==this.$scopedSlots.header?t=[].concat(this.$scopedSlots.header(this.headerSlotScope)):(t=[e(o["a"],[e(r["a"],{props:{lines:this.labelLines}},[this.label||""]),this.caption?e(r["a"],{props:{lines:this.captionLines,caption:!0}},[this.caption]):null])],this.icon&&t[!0===this.switchToggleSide?"push":"unshift"](e(o["a"],{props:{side:!0===this.switchToggleSide,avatar:!0!==this.switchToggleSide}},[e(n["a"],{props:{name:this.icon}})]))),!0!==this.disable&&!0!==this.hideExpandIcon&&t[!0===this.switchToggleSide?"unshift":"push"](this.__getToggleIcon(e));const s={ref:"item",style:this.headerStyle,class:this.headerClass,props:{dark:this.isDark,disable:this.disable,dense:this.dense,insetLevel:this.headerInsetLevel}};return!0===this.isClickable&&(s.props.clickable=!0,!0===this.hasLink?Object.assign(s.props,this.linkProps):s.attrs=this.toggleAriaAttrs,s.on={...this.qListeners,click:this.__onHeaderClick}),e(a["a"],s,t)},__getContent(e){const t=[this.__getHeader(e),e(l["a"],{props:{duration:this.duration},on:Object(v["b"])(this,"slide",{show:()=>{this.$emit("after-show")},hide:()=>{this.$emit("after-hide")}})},[e("div",{staticClass:"q-expansion-item__content relative-position",style:this.contentStyle,attrs:{id:this.targetUid},directives:[{name:"show",value:this.showing}]},Object(f["c"])(this,"default"))])];return this.expandSeparator&&t.push(e(c["a"],{staticClass:"q-expansion-item__border q-expansion-item__border--top absolute-top",props:{dark:this.isDark}}),e(c["a"],{staticClass:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",props:{dark:this.isDark}})),t}},render(e){return e("div",{staticClass:"q-expansion-item q-item-type",class:this.classes},[e("div",{staticClass:"q-expansion-item__container relative-position"},this.__getContent(e))])},created(){void 0!==this.group&&this.$root.$on(b,this.__eventHandler),this.targetUid="e_"+Object(y["a"])()},beforeDestroy(){void 0!==this.group&&this.$root.$off(b,this.__eventHandler)}})},"3d68":function(e,t,s){},"3fc6":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"q-my-md",attrs:{id:"process-sheet"}},[t("Sheet",{attrs:{width:"30vw","sub-actions":!(!e.selectedProcess.processId||!e.attachmentList.length),upload:"inbox"===e.selectedNode,"no-padding":""},on:{input:e.closeAttachmentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 30 seconds ")]):e._e(),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getAttachments()}}})]},proxy:!0},"inbox"===e.selectedNode?{key:"upload",fn:function(){return[t("div",{staticClass:"hint",on:{click:function(t){return e.$refs.attachments.click()}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),t("div",{staticClass:"title text-blue"},[e._v("UPLOAD FILES")]),t("div",{staticClass:"description"},[e._v("Click here to choose files and upload")])],1)]},proxy:!0}:null,e.selectedProcess.processId&&e.attachmentList.length?{key:"subActions",fn:function(){return[t("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:e.fileSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}}),e._v(" Select All "),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!e.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentShare}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"merge documents (only PDF)",expression:"'merge documents (only PDF)'",modifiers:{top:!0}}],attrs:{"is-disabled":!(e.selectedFileCount>1&&e.isSelectedPDF),icon:"mdi-file-document-multiple-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentMerge}})]},proxy:!0}:null],null,!0),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"inbox"===e.selectedNode?"calc(100vh - 200px)":""}},[t("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:e.uploadWflowAttachments}}),e._l(e.checkList,(function(s){return[s.name?[s.attach?t("div",{key:s.uid},[e._l(e.attachmentFilterCheckList(s.name),(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})],1):e._e(),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),"inbox"===e.selectedNode&&s.createdBy===e.$store.state.session.id?[t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s.id)}}})],1),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Re-Upload",expression:"'Re-Upload'",modifiers:{top:!0}}],attrs:{icon:"mdi-file-upload",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){t.stopPropagation(),e.reuploadId=s.id,e.reupload(s.name)}}})],1)]:e._e()],2),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])]}))],2):t("div",{key:s.uid,staticClass:"checkList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),t("div",{staticClass:"col q-ml-sm"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[e._v(" "+e._s(s.name)+" ")]),s.required?t("div",{staticClass:"col-12 q-mt-sm"},[t("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[e._v(" Required ")])],1):e._e()])]),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"col-12",on:{click:function(t){return e.attachTemplate(s.uid)}}},[t("q-chip",{staticClass:"chips primary-hover medium",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-upload-outline",color:"primary","text-color":"white"}}),e._v(" Upload ")],1)],1),s.template?t("div",{staticClass:"col-12",on:{click:function(t){return e.download(s.id)}}},[t("q-chip",{staticClass:"chips secondary-hover medium",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-download-outline",color:"secondary","text-color":"white"}}),e._v(" Download ")],1)],1):e._e()])])])]:e._e()]})),e._l(e.attachmentList,(function(s){return[e.isCheckList(s.name)?[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})],1),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),"inbox"===e.selectedNode&&s.createdBy===e.$store.state.session.id?t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s.id)}}})],1):e._e()]),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])]:e._e()]}))],2)],1)]),t("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"inbox"===e.selectedNode?"30":"0","no-padding":""},on:{input:e.closeCommentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"inbox"===e.selectedNode?e.checkCommentsOption()?"calc(100vh - 190px)":"calc(100vh - 150px)":""}},[e._l(e.commentsList,(function(s,i){return[t("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===e.$store.state.session.id?"me":s.createdByEmail||s.externalCommentsby,text:[s.comments],"text-html":"",sent:s.createdBy===e.$store.state.session.id,stamp:e.lastActionDuration(s.createdAt),"bg-color":s.createdBy===e.$store.state.session.id?"primary-1":"secondary-1"}})]}))],2)],1),"inbox"===e.selectedNode?t("div",{staticClass:"col q-pa-sm"},[t("div",{staticClass:"row"},[e.checkTenant()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.commentActions,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}})]:e._e(),e.isTenantGOTOComments()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.jiraCommentActions,"options-per-line":2},model:{value:e.jiraCommentAction,callback:function(t){e.jiraCommentAction=t},expression:"jiraCommentAction"}})]:e._e()],2),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])]):e._e()]),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[e.checkTenant()?[e.checkTenant()?t("SingleChoiceField",{staticClass:"actions q-mr-sm noborder",attrs:{options:e.commentActions,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e()]:e._e(),e.isTenantGOTOComments()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.jiraCommentActions,"options-per-line":2},model:{value:e.jiraCommentAction,callback:function(t){e.jiraCommentAction=t},expression:"jiraCommentAction"}})]:e._e(),t("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}}),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[e.selectedFile.formJsonId?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:e.getLabel(e.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:e._e(),t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])],2)]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.documentActionList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.documentAction(s)}}})})),1)],1)],1)]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])]),t("EmailSharing",{attrs:{"repository-id":e.workflow.repositoryId,"file-list":e.selectedFileList},on:{"update:fileList":function(t){e.selectedFileList=t},"update:file-list":function(t){e.selectedFileList=t}},model:{value:e.emailSharingSheet,callback:function(t){e.emailSharingSheet=t},expression:"emailSharingSheet"}}),t("FileDetails",{attrs:{"file-data":e.fileData},model:{value:e.fileDetailsSheet,callback:function(t){e.fileDetailsSheet=t},expression:"fileDetailsSheet"}}),t("Sheet",{attrs:{width:"100vw","has-footer":!e.isCustomizedWorkflow||"inbox"!==e.selectedNode,"no-padding":""},on:{input:function(t){e.processSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.headerTitle)+" ")]},proxy:!0},{key:"actions",fn:function(){return[e.itemModel.itemId?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.documentActionList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.processDocumentAction(s)}}})})),1)],1)],1):e._e()]},proxy:!0},{key:"footer",fn:function(){return[e.isCustomizedWorkflow&&"inbox"===e.selectedNode?e._e():[e.actions.length?t("div",{staticClass:"footer row"},["inbox"===e.selectedNode?t("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Save",color:"secondary"},on:{click:function(t){return e.validateRequest("Save")}}}):e._e(),e._l(e.actions,(function(s){return["Approve"===s||"Complete"===s||"Rightsize"===s?t("BaseButton",{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"positive"},on:{click:function(t){return e.validateRequest(s)}}}):"Reject"===s||"Terminate"===s||"Force Close"===s?t("BaseButton",{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"red"},on:{click:function(t){return e.validateRequest(s)}}}):"Forward"===s||s.indexOf("Reply")>-1||"Rollback"===s||"Assign"===s?t("BaseButton",{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"orange"},on:{click:function(t){return e.validateRequest(s)}}}):t("BaseButton","To Requester"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"pink"},on:{click:function(t){return e.validateRequest(s)}}}:{key:s,staticClass:"q-ml-md",attrs:{label:s},on:{click:function(t){return e.validateRequest(s)}}})]}))],2):e._e()],"psyCrYXtKfcs-EJmrYIhv"===e.selectedProcess.activityId?["inbox"===e.selectedNode?t("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Verify",disabled:e.customVerify,color:"primary"},on:{click:function(t){return e.validateRequest("CustomVerify",!1,!1)}}}):e._e()]:e._e()]},proxy:!0}]),model:{value:e.processSheet,callback:function(t){e.processSheet=t},expression:"processSheet"}},[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[e.isCustomizedWorkflow&&"inbox"===e.selectedNode?[t("CustomForm",{attrs:{panels:e.panels,"secondary-panels":e.secondaryPanels,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel,actions:e.actions,"request-prefix":e.requestPrefix,"ml-prediction":e.mlPrediction},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t},"update:requestPrefix":function(t){e.requestPrefix=t},"update:request-prefix":function(t){e.requestPrefix=t},"update:mlPrediction":function(t){e.mlPrediction=t},"update:ml-prediction":function(t){e.mlPrediction=t}}})]:[e.formId?t("div",{staticClass:"col",attrs:{id:"form-view"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 145px)"}},[e.formId?t("RenderForm",{attrs:{"form-id":e.formId,panels:e.panels,"secondary-panels":e.secondaryPanels,"form-settings":e.formSettings,"form-model":e.formModel,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel,"workflow-model":e.workflowModel,"is-readonly":e.formEditAccess,"form-edit-controls":e.formEditControls,"form-visibility-access":e.formVisibilityAccess,"form-secure-controls":e.formSecureControls,"enable-controls":e.enableControls,"check-list":e.checkList,"form-fields":e.formFields,"data-validation-values":e.dataValidationValues,"form-check-list":e.formCheckList},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t},"update:workflowModel":function(t){e.workflowModel=t},"update:workflow-model":function(t){e.workflowModel=t},"update:checkList":function(t){e.checkList=t},"update:check-list":function(t){e.checkList=t},"update:formCheckList":function(t){e.formCheckList=t},"update:form-check-list":function(t){e.formCheckList=t}}}):e._e(),e.signList.length?t("div",{staticClass:"q-pa-md",attrs:{id:"approvalSignature"}},[t("div",{staticClass:"title q-mb-sm"},[e._v("Approval Signature")]),t("BaseSeparator",{staticClass:"q-my-sm"}),t("div",{staticClass:"row"},[e._l(e.signList,(function(s){return[t("div",{key:s.id,staticClass:"col-3 q-mb-sm"},[t("img",{staticClass:"imgCenter col",attrs:{src:e.signLink(s.id)}}),t("div",{staticClass:"text row"},[t("span",{staticClass:"col-12 text-bold"},[e._v(e._s(s.stage))]),t("span",{staticClass:"col-12"},[e._v(e._s(s.createdByEmail))]),t("span",{staticClass:"col-12"},[e._v(e._s(e.$day.format(s.createdAt)))])])])]}))],2)],1):e._e(),e.userSignature?t("SignatureField",{staticClass:"q-pa-md",attrs:{label:"Signature"},model:{value:e.signImg,callback:function(t){e.signImg=t},expression:"signImg"}}):e._e()],1)],1):e._e(),e.itemModel.itemId?t("div",{staticClass:"col"},[t("div",{staticClass:"fileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myProcessFiles",attrs:{id:"file-frame",src:e.itemLink(),frameborder:"0"}})])])]):e._e(),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(s){return["TASK"===s.value?[e.addTaskEnabled?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()]):e._e()]:["VALIDATION"!==s.value&&"PAYMENT_TABLE"!==s.value||("VALIDATION"===s.value||"PAYMENT_TABLE"===s.value)&&e.isCustomizedWorkflow?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()]):e._e()]]}))],2)]],2)]),e.taskFormId?t("AddTask",{attrs:{value:e.addTaskSheet,"form-settings":e.addTaskForm.settings,panels:e.addTaskForm.panels,"secondary-panels":e.addTaskForm.secondaryPanels,"form-id":e.taskFormId,"repository-id":e.taskRepositoryId,"task-model":e.selectedTask,"workflow-task":!0,mode:e.taskMode},on:{close:function(t){e.addTaskSheet=!1},addEntry:e.addTaskEntry}}):e._e(),t("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(t){e.mailTransactionSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Mail Transactions ")]},proxy:!0},{key:"actions",fn:function(){return[t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 30 seconds ")]),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getMailTransactions()}}})]},proxy:!0}]),model:{value:e.mailTransactionSheet,callback:function(t){e.mailTransactionSheet=t},expression:"mailTransactionSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("div",{staticClass:"q-pl-sm"},[t("Tabs",{attrs:{tabs:e.mailTabs},model:{value:e.mailTab,callback:function(t){e.mailTab=t},expression:"mailTab"}})],1),"OUTGOING"===e.mailTab?[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[e._l(e.outgoingMails,(function(s){return[t("div",{key:"outgoing"+s.id,staticClass:"mailTransactionList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(s.subject)+" ")])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),t("div",{staticClass:"col-auto"},[e._v(e._s(s.email))])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(e.$day.format(s.createdAt,!0))+" ")])])]),t("div",{staticClass:"col-auto q-mr-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.showMailAttachments(s)}}},[s.attachmentCount?t("span",{staticClass:"badge"},[e._v(e._s(s.attachmentCount)+" ")]):e._e()]),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"resend",expression:"'resend'",modifiers:{top:!0}}],attrs:{icon:"mdi-send",color:"secondary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.resendMail(s.ezMailId)}}})],1)])])]}))],2)]:e._e(),"INCOMING"===e.mailTab?[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[e._l(e.incomingMails,(function(s){return[t("div",{key:"incoming"+s.id,staticClass:"mailTransactionList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(s.subject)+" ")])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),t("div",{staticClass:"col-auto"},[e._v(e._s(s.email))])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(e.$day.format(s.createdAt,!0))+" ")])])]),t("div",{staticClass:"col-auto q-mr-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.showMailAttachments(s)}}},[s.attachmentCount?t("span",{staticClass:"badge"},[e._v(e._s(s.attachmentCount)+" ")]):e._e()])],1)])])]}))],2)]:e._e()],2)]),t("MetaDataEdit",{attrs:{value:e.showMetaDataEditModal,mode:"Indexing",file:e.workflow,"repository-field":e.repositoryField,"file-data":e.fileData,title:"Index",columns:e.columns,"modal-value":e.selectedProcess,"upload-filename":e.uploadFilename},on:{close:function(t){e.showMetaDataEditModal=!1},save:e.saveMetaData}}),e.historyProcessId?t("ProcessHistory",{attrs:{"process-id":e.historyProcessId,"selected-process":e.selectedProcess},on:{close:function(t){e.historyProcessId=0}}}):e._e()],1)},a=[],o=(s("14d9"),s("caad"),s("381e")),r=s("bc3a"),n=s.n(r),l=s("1b0d"),c=s("a7d2"),d=s("fa1f"),u=s("abe1"),m=s("6a70"),h=s("9234"),p=s("6df3"),f=s("695e"),v=s("dd90"),y=s("cade"),b=s("869e"),g=s("5e23"),w=s("4bc4"),C=s("a589"),k=s("0c04"),S=s("b94d"),_=s("ee54"),I=s("8505"),x={name:"RequestProcessSheet",components:{Sheet:o["a"],FileIcon:d["a"],FileDetails:u["a"],Modal:m["a"],SingleChoiceField:h["a"],TextAreaField:p["a"],TextBuilderField:f["a"],ListItem:y["a"],CheckboxField:b["a"],EmailSharing:g["a"],RenderForm:w["a"],CustomForm:C["default"],AddTask:k["a"],Tabs:S["a"],MetaDataEdit:_["a"],ProcessHistory:I["a"]},props:{workflowId:{type:[String,Number],required:!0},processId:{type:[String,Number],required:!0},workflowRequestList:{type:Array,required:!0},workflow:{type:Object,default:()=>{}},form:{type:Object,default:()=>{}},enableControls:{type:Object,default:()=>{}},formId:{type:[String,Number],required:!0}},data(){return{attachmentSheet:!1,selectedProcess:{},attachmentList:[],emailSharingSheet:!1,checkList:[],selectedNode:"",selectedTicket:{},attachmentLoad:null,fileData:[],fileDetailsSheet:!1,checkListRowIndex:null,reuploadId:0,repositoryDetails:{},repositoryField:[],commentsSheet:!1,commentsList:[],commentActions:[{id:this.$nano.id(),label:"Internal",value:2},{id:this.$nano.id(),label:"Public",value:1}],commentAction:2,jiraCommentActions:[{id:this.$nano.id(),label:"This resource",value:1},{id:this.$nano.id(),label:"All resource",value:2}],jiraCommentAction:1,commentText:"",advancedCommentsSheet:!1,advancedCommentText:"",selectAll:!1,fileSheet:!1,selectedFile:{},documentActionList:[{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline"},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline"}],selectedFileList:[],processSheet:!1,itemModel:{},formModel:{},headerTitle:"",tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"mail transaction",value:"MAIL",icon:"mdi-email-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0},{id:this.$nano.id(),label:"task",value:"TASK",icon:"eva-cube-outline",count:0},{id:this.$nano.id(),label:"Data Validation",value:"VALIDATION",icon:"mdi-file-compare",count:0},{id:this.$nano.id(),label:"Payment Table",value:"PAYMENT_TABLE",icon:"mdi-table",count:0}],actions:[],groupActionFields:[],saveAction:"",workflowFormModel:{},workflowModel:{},formEditAccess:!1,formEditControls:[],formVisibilityAccess:!0,formSecureControls:[],formFields:[],dataValidationValues:[],formCheckList:!1,signList:[],userSignature:!1,processActions:[],processActionsAddOn:[],taskFormId:0,taskRepositoryId:0,addTaskForm:{},addTaskSheet:!1,taskEntryId:[],taskEntries:[],taskEntryList:[],taskMode:"",selectedTask:{},mailTabs:[{id:this.$nano.id(),label:"outgoing",value:"OUTGOING",count:0},{id:this.$nano.id(),label:"incoming",value:"INCOMING",count:0}],mailTab:"OUTGOING",mailTransactionSheet:!1,mailTransactionList:[],mailAttachmentSheet:!1,mailAttachmentList:[],showMetaDataEditModal:!1,selectedUploadFile:[],columns:[],search:"",addTaskEnabled:!1,uploadFilename:"",historyProcessId:0}},computed:{selectedFileCount(){let e=this.attachmentList.filter(e=>e.checked).length;return e},isSelectedPDF(){let e=!0;return this.attachmentList.forEach(t=>{let s=t.name.split(".").pop();t.checked&&"pdf"!==s.toLowerCase()&&(e=!1)}),e},isCustomizedWorkflow(){let e=location.origin;if("https://demo.ezofis.com"===e||"http://52.172.32.88"===e){if(1014===this.workflow.id)return!0}else if(("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://localhost:8080"===e)&&1===this.workflow.id)return!0;return!1},formName(){return this.formId?this.form.settings.general.name:""},formDescription(){return this.formId?this.form.settings.general.description:""},panels(){if(!this.formId)return[];if(this.groupActionFields.length){let e=[];return this.form.panels.map(t=>{let s=[];t.fields.forEach(e=>{this.groupActionFields.indexOf(e.id)>-1&&s.push(e)}),e.push({id:t.id,fields:s,settings:t.settings})}),e}return this.form.panels},secondaryPanels(){return this.formId?this.groupActionFields.length?[]:this.form.secondaryPanels:[]},formSettings(){return this.formId?this.form.settings:{}},outgoingMails(){return this.mailTransactionList.filter(e=>"Outgoing"===e.emailType)},incomingMails(){return this.mailTransactionList.filter(e=>"Incoming"===e.emailType)}},watch:{processId:{deep:!0,handler(){this.showProcessSheet()}},attachmentSheet:{immediate:!0,handler(){this.attachmentSheet||clearInterval(this.attachmentLoad)}},workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&this.processRequest()}}},methods:{getColor(e){return e.color?{border:`1px solid var(--${e.color})`}:{border:"1px solid var(--secondary)"}},leftScroll(){const e=document.querySelector(".workflowKanbanRow");e.scrollBy(-200,0)},rightScroll(){const e=document.querySelector(".workflowKanbanRow");e.scrollBy(200,0)},showAttachments(e){this.selectedProcess=this.workflowRequestList.find(t=>t.processId===Number(e.processId)),this.getAttachments(e.processId),this.selectedTicket=e,e.currentActionUser===this.$store.state.session.email?this.selectedNode="inbox":this.selectedNode="sent",this.getFormColumns(),this.attachmentSheet=!0},showHistoryModal(e){this.selectedProcess=this.workflowRequestList.find(t=>t.processId===Number(e.processId)),this.historyProcessId=this.selectedProcess.processId},showProcessSheet(){this.selectedProcess=this.workflowRequestList.find(e=>e.processId===Number(this.processId)),this.selectedProcess.activityUserEmail===this.$store.state.session.email?this.selectedNode="inbox":this.selectedNode="sent",this.getTaskForm(),this.openProcess(),this.getAttachments(this.processId),this.getComments(this.processId),this.getModel(Number(this.processId)),this.getFormColumns(),this.processSheet=!0},closeAttachmentsSheet(){this.attachmentSheet=!1},getLabel(e){let t="";return this.form&&this.form.panels.forEach(s=>{if(!s.fields.length)return;let i=s.fields.find(t=>t.id===e);i&&(t=i.label?i.label:i.type)}),t},async uploadWflowAttachments(e){"STATIC"===this.repositoryDetails.fieldsType?(this.selectedUploadFile=e,this.uploadFilename=e.target.files[0].name,this.showMetaDataEditModal=!0):this.uploadAttachments(e)},async uploadAttachments(e,t){const s=e.target.files[0],i=new FormData;i.append("workflowId",this.workflowId),i.append("repositoryId",this.workflow.repositoryId),i.append("processId",this.selectedProcess.processId),i.append("transactionId",this.selectedProcess.transactionId),t?i.append("fields",t):i.append("fields",""),i.append("file",s);let a=e.target.files[0].name;const o=a.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);i.append("filename",e[0].name+"."+o),a=e[0].name+"."+o}if(console.log(o),Object(v["a"])(o)){this.$store.commit("showLoadingBar");try{const e=await n()({url:"https://appuat.ezofis.com/ezofisapi/api/workflow/attachmentWithProcessId",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:t,data:s}=e;if(200!==t||!s)throw e;this.$alert.success("Document attached")}catch(r){this.$alert.error("Error uploading file"),console.error(r)}this.$store.commit("hideLoadingBar"),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value="",this.reuploadId&&(await this.attachmentDelete(this.reuploadId),this.reuploadId=0),this.attachmentLoad=setInterval(()=>this.getAttachments(),5e3)}else this.$alert.error("this file format not supporting")},async getAttachments(e){this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=0)});let t=this.attachmentList.length;this.$store.commit("showLoadingBar");const{error:s,payload:i}=await l["t"].getAttachments(this.workflowId,e||this.selectedProcess.processId);if(this.$store.commit("hideLoadingBar"),s)this.$alert.error(s);else{if(this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=0)}),i.length){let e=i.length-1;this.getFileData(i[e],"attach"),t!==i.length&&(this.attachmentList=i.map(e=>({...e,checked:!1})),clearInterval(this.attachmentLoad)),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)})}else this.attachmentList=[];this.checkList.length&&this.checkList.forEach(e=>{let t=this.attachmentList.filter(t=>{let s=t.name.substr(0,t.name.lastIndexOf("."));if(e.name===s||e.name===s.split("_")[0])return t});t.length?e.attach=!0:e.attach=!1})}},async getFileData(e,t){this.$store.commit("showLoadingBar");const{error:s,payload:i}=await l["p"].getFileData({repositoryId:e.repositoryId,itemId:e.id});this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):i&&(this.fileData=i,t||(this.fileDetailsSheet=!0))},attachTemplate(e){this.checkListRowIndex=e,this.$refs.attachments.click()},reupload(e){var t;e=e.substr(0,e.lastIndexOf(".")).split("_")[0],this.checkListRowIndex=null===(t=this.checkList.find(t=>t.name===e))||void 0===t?void 0:t.uid,this.$refs.attachments.click()},async getRepository(){const{error:e,payload:t}=await l["p"].getRepository(this.workflow.repositoryId);e?this.$alert.error(e):(this.repositoryDetails=t,this.repositoryField=t.fields)},isCheckList(e){let t=this.checkList.filter(t=>t.name===e.substring(0,e.lastIndexOf("."))||t.name===e.substring(0,e.lastIndexOf(".")).split("_")[0]);return!t.length},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},fileSize(e){return Object(c["a"])(e)},openFile(e){this.selectedFile=e;let t=location.origin;"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?window.open(this.fileLink()):this.fileSheet=!0},async attachmentDelete(e){this.$store.commit("showLoadingBar");const{error:t}=await l["p"].fileDelete(this.workflow.repositoryId,e);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):this.getAttachments()},closeCommentsSheet(){this.closeCommnetsSheet=!1},checkCommentsOption(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e&&("https://app.ezofis.com"!==e&&"https://appuat.ezofis.com"!==e&&"http://localhost:8080"!==e||2!==this.$store.state.session.tenantId||!(!Object.keys(this.selectedProcess).length||!this.selectedProcess.jiraIssueInfo.id))},async getComments(e){this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=0)}),this.commentsList=[],this.$store.commit("showLoadingBar");const{error:t,payload:s}=await l["t"].getProcessComments(this.workflowId,e||this.selectedProcess.processId);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):(this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=0)}),this.commentsList=[],s.length&&(this.commentsList=s,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)})))},async saveComment(){let e=location.origin;if(this.commentText&&this.selectedProcess.processId){if("https://app.ezofis.com"!==e&&"https://appuat.ezofis.com"!==e&&"http://localhost:8080"!==e||2!==this.$store.state.session.tenantId||!this.selectedProcess.jiraIssueInfo.id||2!==this.jiraCommentAction){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await l["t"].insertProcessComment(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:this.commentAction});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,[t])}else{this.$store.commit("showLoadingBar");const{error:e,payload:t}=await l["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.commentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,t)}this.commentText="",this.commentAction=1,this.getComments()}},async saveAdvancedComment(){if(this.advancedCommentText&&this.selectedProcess.processId){if("https://app.ezofis.com"!==origin&&"https://appuat.ezofis.com"!==origin&&"http://localhost:8080"!==origin||2!==this.$store.state.session.tenantId||!this.selectedProcess.jiraIssueInfo.id||2!==this.jiraCommentAction){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await l["t"].insertProcessComment(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:this.commentAction});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t)}else{this.$store.commit("showLoadingBar");const{error:e,payload:t}=await l["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t)}this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}},showComments(e){this.selectedProcess=this.workflowRequestList.find(t=>t.processId===Number(e.processId)),this.getComments(e.processId),this.selectedTicket=e,e.currentActionUser===this.$store.state.session.email?this.selectedNode="inbox":this.selectedNode="sent",this.commentsSheet=!0},checkTenant(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e&&("https://app.ezofis.com"!==e&&"https://appuat.ezofis.com"!==e||2!==this.$store.state.session.tenantId)&&"http://localhost:8080"!==e||(this.commentAction=2,!1)},isTenantGOTOComments(){if(Object.keys(this.selectedProcess).length){let e=location.origin;if(("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e||"http://localhost:8080"===e)&&2===this.$store.state.session.tenantId&&this.selectedProcess.jiraIssueInfo.id)return!0}return!1},lastActionDuration(e){const t=e instanceof Date?e:new Date(e),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},fileSelectAll(){this.attachmentList=this.attachmentList.map(e=>({...e,checked:this.selectAll}))},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(e=>{e.checked&&this.selectedFileList.push({id:e.id,name:e.name})}),this.emailSharingSheet=!0},async documentMerge(){let e=[];this.attachmentList.forEach(t=>{let s=t.name.split(".").pop();t.checked&&"pdf"===s.toLowerCase()&&e.push(t.id)});let t={ids:e};const{error:s}=await l["t"].documentMerge(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,this.workflow.repositoryId,t);s?this.$alert.error(s):this.$alert.success("Document merge process initiated")},documentAction(e){if("Email_Sharing"===e.id);else if("Print"===e.id){if(this.selectedFile.name){let e=this.selectedFile.name.split(".").pop();Object(v["d"])(e)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===e.id){let e="";e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`,window.open(e,"_blank")}},async filePrintSession(){const{error:e}=await l["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});e&&this.$alert.error(e)},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop(),s="";"inbox"===this.selectedNode&&(s="&action=all");let i="";if(Object(v["d"])(t))"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?(s="",i="https://ag-appsvc04.azurewebsites.net/web/viewer.html"):i="https://trial.ezofis.com"!==e||Object(v["c"])(t)?"https://app.ezofis.com"===e?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html":"https://trial.ezofis.com/docsviewer/index.html";else{if(Object(v["b"])(t)||"http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${s}`}},getModel(e){this.formModel={},this.itemModel={},this.workflowRequestList.forEach(t=>{if(t.processId==e&&t.id==this.workflow.id)if(this.headerTitle=`${t.requestNo} - ${t.stage}`,t.formData){let e=Object.keys(t.formData.fields),s={};e.forEach(e=>{s[e]=this.validateTypeValue(t.formData.fields[e])}),this.formModel=s}else t.itemData&&(this.itemModel=t.itemData)})},validateTypeValue(e){if(e)try{var t=JSON.parse(e);if("object"===typeof t)return t}catch(s){return e}return e},async showLinks(e){"ATTACHMENTS"===e?this.attachmentSheet=!0:"COMMENTS"===e?this.commentsSheet=!0:"HISTORY"===e&&this.selectedProcess.processId?this.historyProcessId=this.selectedProcess.processId:"PRINT"===e?window.print():"TASK"===e?this.taskEntries.length?this.taskSheet=!0:this.addTask():"VALIDATION"===e||"PAYMENT_TABLE"===e||"MAIL"===e&&(this.getMailTransactions(),this.mailTransactionSheet=!0)},openProcess(e=!1){if(this.actions=[],this.formEditAccess=!1,e){this.tabs.find(e=>{e.count=0}),this.commentsList=[],this.attachmentList=[],this.formModel={},this.signList=[],this.formEditAccess=!1,this.formEditControls=[],this.formVisibilityAccess=!0,this.formSecureControls=[];let e=JSON.parse(this.workflow.flowJson),t=e.blocks.find(e=>"START"===e.type);if(t){if("MANUAL"===t.settings.initiateMode){this.headerTitle=""+t.settings.label;let s=e.rules.find(e=>e.fromBlockId===t.id);s&&this.actions.push(s.proceedAction)}if(t.settings.formEditAccess&&(""===t.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===t.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===t.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=t.settings.formEditControls)),t.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=t.settings.formSecureControls),t.settings.fileSettings&&t.settings.fileSettings.fileCheckList.length){let e=t.settings.fileSettings.fileCheckList;e.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1}),this.docWarning=!1,e.length&&e.forEach(e=>{e.required&&!e.attach&&(this.docWarning=!0)})}}}else{if("inbox"===this.selectedNode){let e=JSON.parse(this.workflow.flowJson),t=e.blocks.find(e=>e.id===this.selectedProcess.activityId);if(t&&(""===t.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===t.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===t.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=t.settings.formEditControls),t.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=t.settings.formSecureControls),t.settings.fileSettings&&t.settings.fileSettings.fileCheckList.length)){let e=t.settings.fileSettings.fileCheckList;e.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1}),this.docWarning=!1,e.length&&e.forEach(e=>{e.required&&!e.attach&&(this.docWarning=!0)})}}else this.formEditAccess=!0;this.actions=this.processActions;location.origin}if("inbox"===this.selectedNode){this.processActions=[],this.processActionsAddOn=[];let e=location.origin;var t=JSON.parse(this.workflow.flowJson);"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e&&"http://localhost:8080"!==e||"psyCrYXtKfcs-EJmrYIhv"!==this.selectedProcess.activityId?t.rules.forEach(e=>{e.fromBlockId===this.selectedProcess.activityId&&this.processActions.indexOf(e.proceedAction)<0&&(this.processActions.push(e.proceedAction),this.processActionsAddOn.push({action:e.proceedAction,remarks:e.remarks||!1,passwordAccess:e.passwordAccess||!1,confirm:e.confirm||!1}))}):t.rules.forEach(e=>{e.fromBlockId===this.selectedProcess.activityId&&"Force Close"===e.proceedAction&&(this.processActions.push(e.proceedAction),this.processActionsAddOn.push({action:e.proceedAction,remarks:e.remarks||!1,passwordAccess:e.passwordAccess||!1,confirm:e.confirm||!1}))}),t.blocks.forEach(e=>{if(e.id===this.selectedProcess.activityId){if("Forward"===this.selectedProcess.lastAction&&"REPLY"===e.settings.forwardedUserAction)this.processActions=[],this.processActionsAddOn=[],this.processActions.push("Reply to "+this.selectedProcess.transaction_createdByEmail),this.processActionsAddOn.push({action:"Reply to "+this.selectedProcess.transaction_createdByEmail,remarks:!0,passwordAccess:!1,confirm:!1}),this.customReply=!0;else if(e.settings.userReply&&-1===this.processActions.indexOf("Reply")&&(this.processActions.push("Reply to "+this.selectedProcess.lastActionStageName),this.userReply=!0),e.settings.toInitiator&&-1===this.processActions.indexOf("To Requester")&&(this.processActions.push("To Requester"),this.toRequester=!0),e.settings.internalForward){let t=location.origin;"https://app.ezofis.com"!==t&&"https://appuat.ezofis.com"!==t||2!==this.$store.state.session.tenantId?this.processActions.push("Forward"):this.processActions.push("Assign"),this.internalForward.proceed=!0,this.internalForward.users=[],this.internalForward.groups=[],e.settings.internalForwardUser&&e.settings.internalForwardUser.length&&e.settings.internalForwardUser.forEach(e=>{let t=this.userList.filter(t=>t.value==e);t.length&&this.internalForward.users.push({id:this.$nano.id(),label:t[0].label,value:e})}),e.settings.internalForwardGroup&&e.settings.internalForwardGroup.length&&e.settings.internalForwardGroup.forEach(e=>{let t=this.groupList.filter(t=>t.value==e);t.length&&this.internalForward.groups.push({id:this.$nano.id(),label:t[0].label,value:e})})}this.userSignature=e.settings.userSignature,e.settings.fileSettings&&e.settings.fileSettings.fileCheckList.length&&(this.checkList=e.settings.fileSettings.fileCheckList,this.checkList.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1}))}}),this.selectedProcess.userType&&"SUPERUSER"===this.selectedProcess.userType&&this.processActions.push("Force Close")}else if("sent"===this.selectedNode){let e=location.origin;"https://app.ezofis.com"!==e&&"https://appuat.ezofis.com"!==e||2!==this.$store.state.session.tenantId?"http://demo.ezofis.com"!==e&&"http://52.172.32.88"!==e||6===this.selectedWorkflow.id&&this.selectedProcess.transaction_createdBy===this.$store.state.session.id&&(this.processActions=[],this.processActions.push("Rollback")):this.selectedProcess.transaction_createdBy===this.$store.state.session.id&&(this.processActions=[],this.processActions.push("Rollback"))}this.actions=this.processActions},removeTags(e){return e?e.replace(/(<([^>]+)>)/gi,""):""},addTask(){this.selectedTask={},this.taskMode="NEW",this.addTaskSheet=!0},viewTask(e){let t=this.taskList.filter(t=>t.formEntryId===e);t.length&&(this.selectedTask=t[0].entryInfo[0],this.selectedTask={id:t[0].formEntryId,...t[0].entryInfo[0]}),this.taskMode="EDIT",this.addTaskSheet=!0},async getTaskForm(){this.taskFormList=[],this.addTaskEnabled=!1;const{error:e,payload:t}=await l["g"].getForms({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"type",condition:"IS_EQUALS_TO",value:"Task",dataType:""}],groupCondition:""}],itemsPerPage:50,currentPage:1});if(e)return void this.$alert.error(e);const{data:s}=t;s.length&&s[0].value.length&&(this.addTaskEnabled=!0,s[0].value.forEach(e=>{this.taskFormList.push({id:e.id,label:e.name,value:e.id,repositoryId:e.repositoryId,formJson:e.formJson})}),this.taskFormList.length&&1===this.taskFormList.length&&(this.taskFormId=this.taskFormList[0].id,this.taskRepositoryId=this.taskFormList[0].repositoryId,this.addTaskForm=JSON.parse(this.taskFormList[0].formJson)))},async getTaskFormEntry(e,t){this.$store.commit("showLoadingBar");const{error:s,payload:i}=await l["g"].getFormEntry(e,t);if(this.$store.commit("hideLoadingBar"),s)this.$alert.error(s);else if(i.length){const e=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let t=[];for(const i of e)t.push(...i.fields);let s="",a="",o="",r="",n="",l="";t.forEach(e=>{switch(e.label){case"Task Name":s=i[0][e.id];break;case"Task Assign":a=i[0][e.id];break;case"Start Date":o=i[0][e.id];break;case"End Date":r=i[0][e.id];break;case"Priority":n=i[0][e.id];break;case"Task Status":l=i[0][e.id];break}}),this.taskEntries.push({id:i[0].itemid,name:s,assigned:a,startDate:o,endDate:r,priority:n,status:l})}},addTaskEntry(e,t){this.selectedProcess.processId?this.insertTaskEntry(e,t):(this.taskEntryId.push({formId:e,formEntryId:t}),this.getTaskFormEntry(e,t))},async getTaskList(){this.taskEntries=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await l["t"].getTaskEntries(this.selectedWorkflow.id,this.selectedProcess.processId,{filterBy:[{filters:[{criteria:"createdBy",condition:"IS_EQUALS_TO",value:this.$store.state.session.id}]}]});if(this.$store.commit("hideLoadingBar"),e)this.$alert.error(e);else if(t.length){const e=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let s=[];for(const t of e)s.push(...t.fields);this.taskList=t,t.forEach(e=>{let t="",i="",a="",o="",r="",n="";s.forEach(s=>{switch(s.label){case"Task Name":t=e.entryInfo[0][s.id];break;case"Task Assign":i=e.entryInfo[0][s.id];break;case"Start Date":a=e.entryInfo[0][s.id];break;case"End Date":o=e.entryInfo[0][s.id];break;case"Priority":r=e.entryInfo[0][s.id];break;case"Task Status":n=e.entryInfo[0][s.id];break}}),this.taskEntries.push({id:e.entryInfo[0].itemid,name:t,assigned:i,startDate:a,endDate:o,priority:r,status:n})})}},async insertTaskEntry(e,t){this.$store.commit("showLoadingBar");const{error:s}=await l["t"].insertTaskEntry({workflowId:this.selectedWorkflow.id,processId:this.selectedProcess.processId,transactionId:this.selectedProcess.transactionId,wFormId:e,formEntryId:t});this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):this.getTaskList()},async getMailTransactions(){this.mailTransactionList=[],this.tabs.find(e=>{"MAIL"===e.value&&(e.count=0)});let e={filterBy:[]};const{error:t,payload:s}=await l["t"].getMailTransactions(this.workflow.id,this.selectedProcess.processId,e);t?this.$alert.error(t):s.length&&(this.mailTransactionList=s,this.tabs.find(e=>{"MAIL"===e.value&&(e.count=this.mailTransactionList.length)}))},validateRequest(e){this.saveAction=e,this.itemModel.itemId&&this.processRequest()},async processRequest(e=!0,t=!0){if(e){let e=location.origin;if(("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e)&&2===this.$store.state.session.tenantId&&"Assign"===this.saveAction&&this.internalForward.proceed)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0);if("Forward"===this.saveAction&&this.internalForward.proceed)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0)}if(t){let e=this.processActionsAddOn.find(e=>e.action===this.saveAction);if(e&&Object.keys(e).length){if(this.actionRemarks=e.remarks,this.actionPassword=e.passwordAccess,this.actionConfirm=e.confirm,this.actionPassword)return void(this.actionPasswordConfirm=!0);if(this.actionRemarks)return this.actionComments=!0,void(this.advancedCommentsSheet=!0);if(this.actionConfirm)return void(this.actionConfirmAlert=!0)}}let s={},i=location.origin;this.userReply&&this.saveAction.indexOf("Reply")>-1?this.saveAction="UserReply":this.toRequester&&"To Requester"===this.saveAction&&(this.saveAction="ToInitiator"),this.customReply&&this.saveAction.indexOf("Reply")>-1&&(this.saveAction="Reply",this.forwardUsers.push(this.selectedProcess.transaction_createdBy)),this.formId?("https://app.ezofis.com"!==i&&"https://appuat.ezofis.com"!==i||2!==this.$store.state.session.tenantId||"Rollback"!==this.saveAction?"http://demo.ezofis.com"!==i&&"http://52.172.32.88"!==i||6===this.workflow.id&&this.forwardUsers.push(this.selectedProcess.transaction_createdBy):1===this.workflow.id&&this.forwardUsers.push(this.selectedProcess.transaction_createdBy),s={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction||"CustomVerify"===this.saveAction?"":this.saveAction,formData:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,fields:this.workflowFormModel},userIds:this.forwardUsers,groupIds:this.forwardGroups}):this.itemModel&&(s={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction?"":this.saveAction,formData:{},userIds:this.forwardUsers,groupIds:this.forwardGroups});let a=!1;"CustomVerify"!==this.saveAction||"https://ag-appsvc01.azurewebsites.net"!==i&&"https://ag-appsvc05.azurewebsites.net"!==i&&"http://localhost:8080"!==i||(a=!0),this.saveAction="",this.workflowFormModel={},this.$store.commit("showLoadingBarSave");const{error:o}=await l["t"].processTransaction(s);this.$store.commit("hideLoadingBarSave"),o?this.$alert.error(o):(this.signImg&&await this.saveProcessSignature(this.selectedProcess),a||(""===s.review?this.$alert.info(this.selectedProcess.requestNo+" data saved, awaiting your action to submit"):s.review.toLowerCase().indexOf("reject")>-1?this.$alert.danger(this.selectedProcess.requestNo+" Request Rejected Successfully"):this.$alert.success(this.selectedProcess.requestNo+" Request Processed"),this.forwardUsers=[],this.forwardGroups=[],this.closeProcessSheet()))},async saveProcessSignature(e){let t={signBinary:this.signImg.split(",")[1],fileType:"png"};const{error:s}=await l["t"].saveProcessSignature(this.workflow.id,e.processId,e.transactionId,t);s?this.$alert.error(s):this.signImg=""},closeProcessSheet(){this.processSheet=!1},saveMetaData(e){let t=[];this.repositoryField.forEach(s=>{t.push({name:s.name,value:e[s.name],type:s.dataType})}),this.uploadAttachments(this.selectedUploadFile,JSON.stringify(t))},getFormColumns(){let e=[];if(this.form){const t=[...this.form.panels,...this.form.secondaryPanels];if(!t.length)return;let s=[];for(const e of t)s.push(...e.fields);s.forEach(t=>{"DIVIDER"===t.type||"LABEL"===t.type||"PARAGRAPH"===t.type||!t.label&&"TABLE"!==t.type||"DISABLE"===t.settings.general.visibility||e.push({id:t.id,label:t.label,isVisible:!0,display:""})})}this.columns=e},searchKanban(e,t,s){if(console.log(t,e),e){let t=["attachmentList","commentsList","completedStatus","currentActionDate","currentActionUser","currentTransactionId","nodeName","processId","requestNo","slaTime"];this.kanbanList[s].tickets.forEach(s=>{for(let i in s){let a=t.indexOf(i);if(a>=0&&s[i]&&String(s[i]).toLowerCase().includes(e.toLowerCase()))return}})}else this.kanbanList[s].tickets=this.kanbanDataList[s].tickets}}},T=x,$=(s("298f"),s("d11f"),s("2877")),A=s("b047"),F=s("cb32"),L=s("8169"),B=s("4e73"),P=s("93dc"),D=s.n(P),M=Object($["a"])(T,i,a,!1,null,"cd1d4496",null);t["a"]=M.exports;D()(M,"components",{QChip:A["a"],QAvatar:F["a"],QChatMessage:L["a"],QMenu:B["a"]})},4045:function(e,t,s){"use strict";s("1a1b")},"40f9":function(e,t,s){"use strict";s("c589")},"42dc":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"workspace-list"}},[t("div",{staticClass:"title"},[e._v("Workspace")]),t("div",{staticClass:"wrapper"},[t("ValidationProvider",{attrs:{name:"workspace",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{value:e.value,"is-mandatory":"","is-clearable":!1,options:e.workspaces,"is-readonly":"",error:s[0]},on:{input:e.handleInput}})]}}])})],1)])},a=[],o=s("1b0d"),r=s("7bb1"),n=s("12b8"),l={name:"WorkspaceList",components:{ValidationProvider:r["b"],SelectField:n["a"]},props:{value:{type:Number,required:!0}},data(){return{workspaces:[]}},created(){this.getWorkspaces()},methods:{handleInput(e){this.$emit("input",e)},async getWorkspaces(){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await o["u"].getWorkspaceList();this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t&&(this.workspaces=t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id})))}}},c=l,d=(s("2852"),s("2877")),u=Object(d["a"])(c,i,a,!1,null,"d504442c",null);t["a"]=u.exports},"42fc":function(e,t,s){"use strict";s.d(t,"a",(function(){return P}));s("d9e2");function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e,t){if(!e)throw new Error(t)}function o(e){return Object.keys(e)}function r(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function n(e,t,s){var i="."+t,a=new RegExp("(\\".concat(t,")?$"));return s(e).replace(a,i)}function l(e){return"555xmlHello .  world!".trim().replace(/^([0-9,;]|(xml))+/,""),e.replace(/[^_a-zA-Z 0-9:\-\.]/g,"").replace(/^([ 0-9-:\-\.]|(xml))+/i,"").replace(/ +/g,"-")}function c(e){return Array(e+1).join(" ")}function d(e){return e.replace(/([<>&])/g,(function(e,t){switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return""}}))}function u(e,t,s){switch(t){case"txt":var i="text/plain;charset=utf-8";return s?URL.createObjectURL(new Blob([e],{type:i})):"data:,".concat(i)+encodeURIComponent(e);case"css":i="text/css;charset=utf-8";return s?URL.createObjectURL(new Blob([e],{type:i})):"data:,".concat(i)+encodeURIComponent(e);case"html":i="text/html;charset=utf-8";return s?URL.createObjectURL(new Blob([e],{type:i})):"data:,".concat(i)+encodeURIComponent(e);case"json":i="text/json;charset=utf-8";return s?URL.createObjectURL(new Blob([e],{type:i})):"data:,".concat(i)+encodeURIComponent(e);case"csv":i="text/csv;charset=utf-8";return s?URL.createObjectURL(new Blob([e],{type:i})):"data:,".concat(i)+encodeURIComponent(e);case"xls":i="text/application/vnd.ms-excel;charset=utf-8";return s?URL.createObjectURL(new Blob([e],{type:i})):"data:,".concat(i)+encodeURIComponent(e);case"xml":i="text/application/xml;charset=utf-8";return s?URL.createObjectURL(new Blob([e],{type:i})):"data:,".concat(i)+encodeURIComponent(e);default:return""}}function m(e,t,s,i){void 0===s&&(s="download"),void 0===i&&(i=!0);var a=u(e,t,i),o=document.createElement("a");o.href=a,o.download=s,o.setAttribute("style","visibility:hidden"),document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!1,view:window})),document.body.removeChild(o)}var h=function(){return h=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++)for(var a in t=arguments[s],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},h.apply(this,arguments)},p=function(e,t){var s="function"===typeof Symbol&&e[Symbol.iterator];if(!s)return e;var i,a,o=s.call(e),r=[];try{while((void 0===t||t-- >0)&&!(i=o.next()).done)r.push(i.value)}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=o["return"])&&s.call(o)}finally{if(a)throw a.error}}return r};function f(e){if(!e||i(e)&&!e.length||!i(e)&&!o(e).length)return function(e){return e};var t=i(e)?e.reduce((function(e,t){var s;return h(h({},e),(s={},s[t]=t,s))}),Object.create(null)):e;return function(e){return i(e)?e.map((function(e){return r(e).reduce((function(e,s){var i=p(s,2),a=i[0],o=i[1];return a in t&&(e[t[a]]=o),e}),Object.create(null))})).filter((function(e){return o(e).length})):r(e).reduce((function(e,s){var i=p(s,2),a=i[0],o=i[1];return a in t&&(e[t[a]]=o),e}),Object.create(null))}}function v(e){var t="Invalid export data. Please provide a valid JSON";try{return"string"===typeof e?JSON.parse(e):e}catch(s){throw new Error(t)}}function y(e,t,s){void 0===t&&(t=null);var i="Invalid export data. Please provide valid JSON object";try{return JSON.stringify(e,t,s)}catch(a){throw new Error(i)}}function b(e){return e.map(r).reduce((function(t,s,i){return s.reduce((function(t,s){var a=p(s,2),o=a[0],r=a[1],n=t[o]||Array.from({length:e.length}).map((function(e){return""}));return n[i]=("string"!==typeof r?JSON.stringify(r):r)||"",t[o]=n,t}),t)}),Object.create(null))}function g(e,t){return void 0===t&&(t=function(e){return e}),t(r(e).map((function(e){var t=p(e,2),s=t[0],i=t[1];return{fieldName:s,fieldValues:i}})))}function w(e){var t=/,|"|\n/.test(e)?'"':"",s=e.replace(/"/g,'""');return"".concat(t).concat(s).concat(t)}var C={beforeTableEncode:function(e){return e},delimiter:","};function k(e,t){void 0===t&&(t={});var s=h(h({},C),t),i=s.beforeTableEncode,a=s.delimiter;if(!e.length)return"";var o=b(e),r=g(o,i),n=r.map((function(e){var t=e.fieldName;return t})).join(a)+"\r\n",l=r.map((function(e){var t=e.fieldValues;return t})).map((function(e){return e.map(w)})),c=l.reduce((function(e,t){return e.map((function(e,s){return"".concat(e).concat(a).concat(t[s])}))}));return n+c.join("\r\n")}function S(e,t){a(e.length>0);var s=b(e),i=g(s,t),o=i.map((function(e){var t=e.fieldName;return t})).join("</b></th><th><b>"),r=i.map((function(e){var t=e.fieldValues;return t})).map((function(e){return e.map((function(e){return"<td>".concat(e,"</td>")}))})),n=r.reduce((function(e,t){return e.map((function(e,s){return"".concat(e).concat(t[s])}))}));return"\n    <table>\n      <thead>\n        <tr><th><b>".concat(o,"</b></th></tr>\n      </thead>\n      <tbody>\n        <tr>").concat(n.join("</tr>\n        <tr>"),"</tr>\n      </tbody>\n    </table>\n  ")}var _={beforeTableEncode:function(e){return e}};function I(e,t){var s=h(h({},_),t).beforeTableEncode;if(!e.length)return"";var i='<html>\n  <head>\n    <meta charset="UTF-8" />\n  </head >\n  <body>\n    '.concat(S(e,s),"\n  </body>\n</html >\n");return i}function x(e){var t='<?xml version="1.0" encoding="utf-8"?><!DOCTYPE base>\n'.concat(T(e,"base"),"\n");return t}function T(e,t,s,a){void 0===s&&(s="element"),void 0===a&&(a=0);var o=l(t),n=c(a);if(null===e||void 0===e)return"".concat(n,"<").concat(o," />");var u=i(e)?e.map((function(e){return T(e,s,s,a+2)})).join("\n"):"object"===typeof e?r(e).map((function(e){var t=p(e,2),i=t[0],o=t[1];return T(o,i,s,a+2)})).join("\n"):n+"  "+d(String(e)),m="".concat(n,"<").concat(o,">\n").concat(u,"\n").concat(n,"</").concat(o,">");return m}var $={txt:"txt",css:"css",html:"html",json:"json",csv:"csv",xls:"xls",xml:"xml"};function A(e){var t=e.data,s=e.fileName,o=void 0===s?"download":s,r=e.extension,l=e.fileNameFormatter,c=void 0===l?function(e){return e.replace(/\s+/,"_")}:l,d=e.fields,u=e.exportType,h=void 0===u?"txt":u,p=e.replacer,b=void 0===p?null:p,g=e.space,w=void 0===g?4:g,C=e.processor,S=void 0===C?m:C,_=e.withBOM,T=void 0!==_&&_,$=e.beforeTableEncode,A=void 0===$?function(e){return e}:$,F=e.delimiter,L=void 0===F?",":F,B="Invalid export data. Please provide an array of objects",P="Can't export unknown data type ".concat(h,"."),D="Can't export string data to ".concat(h,".");if("string"===typeof t)switch(h){case"txt":case"css":case"html":return S(t,h,n(o,null!==r&&void 0!==r?r:h,c));default:throw new Error(D)}var M=f(d),q=M(v(t)),N=y(q,b,w);switch(h){case"txt":case"css":case"html":return S(N,h,n(o,null!==r&&void 0!==r?r:h,c));case"json":return S(N,h,n(o,null!==r&&void 0!==r?r:"json",c));case"csv":a(i(q),B);var O="\ufeff",E=k(q,{beforeTableEncode:A,delimiter:L}),V=T?O+E:E;return S(V,h,n(o,null!==r&&void 0!==r?r:"csv",c));case"xls":a(i(q),B);V=I(q,{beforeTableEncode:A});return S(V,h,n(o,null!==r&&void 0!==r?r:"xls",c));case"xml":V=x(q);return S(V,h,n(o,null!==r&&void 0!==r?r:"xml",c));default:throw new Error(P)}}A.types=$,A.processors={downloadFile:m};var F=A,L=F;const B=()=>{function e(e,t,s){if(e)try{const i=t||"exported-data",a=L.types[s||"xls"];L({data:e,fileName:i,exportType:a})}catch(i){throw new Error("Parsing failed!")}}return{exportDataFromJSON:e}};function P(e,t){if(!e)return this.$alert.info("Data not found");let s=new Date;return t||(t=`${s.getFullYear()}${s.getMonth()+1}${s.getDate()}${s.getHours()}${s.getMinutes()}${s.getSeconds()}`),B().exportDataFromJSON(e,t,null)}},"431c":function(e,t,s){},"467fa":function(e,t,s){},4697:function(e,t,s){"use strict";s("d30f")},"470f":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"process-sheet"}},[t("Sheet",{attrs:{width:e.formWidth,"has-footer":!e.isCustomizedWorkflow||!e.initiateProcess,"no-padding":""},on:{input:e.closeProcessSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.headerTitle)+" ")]},proxy:!0},{key:"actions",fn:function(){return[e.isCustomizedWorkflow||"DOCUMENT"===e.workflow.initiatedBy?e._e():[e.mandatory.filledValue||e.mandatory.nonFilledValue?[t("q-circular-progress",{staticClass:"q-mr-sm",attrs:{"show-value":"","font-size":"12px",value:e.mandatoryFilling,size:"lg",thickness:.22,color:"primary","track-color":"grey-3"}},[e._v(" "+e._s(e.mandatoryFilling)+"% ")])]:e._e(),e.mandatory.filledValue?t("div",{staticClass:"chip-success q-mr-sm"},[t("div",{},[e._v(e._s(e.mandatory.filledValue)+" ready")])]):e._e(),e.mandatory.nonFilledValue?t("div",{staticClass:"chip-warning",on:{click:e.checkFormValidation}},[t("div",{},[e._v(e._s(e.mandatory.nonFilledValue)+" need to work")])]):e._e()],e.mandatoryDocument.length?[t("div",{staticClass:"chip-warning cursor-pointer",on:{click:function(t){e.attachmentSheet=!0}}},[t("div",{},[e._v(e._s(e.mandatoryDocument.length)+" document required")])])]:e._e(),e.itemModel.itemId?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.documentActionList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.processDocumentAction(s.id)}}})})),1)],1)],1):e._e(),e.formView||e.initiateProcess||0!==e.actions.length?e.initiateProcess||0!==e.actions.length?e._e():t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Details View",expression:"'Details View'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-table-column"},on:{click:function(t){e.formView=!1}}}):t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Form View",expression:"'Form View'",modifiers:{top:!0}}],staticClass:"q q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select"},on:{click:function(t){e.formView=!0}}}),e.isCustomizedWorkflow?e._e():t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:e.isMaximized?"eva-collapse":"eva-expand"},on:{click:e.toggleWidth}})]},proxy:!0},{key:"footer",fn:function(){return[e.actions.length?t("div",{staticClass:"footer row"},["inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess?t("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Save",color:"secondary"},on:{click:function(t){return e.validateRequest("Save")}}}):e._e(),e._l(e.actions,(function(s){return["Approve"===s||"Complete"===s||"Rightsize"===s?t("BaseButton",{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"positive"},on:{click:function(t){return e.validateRequest(s)}}}):"Reject"===s||"Terminate"===s||"Force Close"===s||"Decline"===s?t("BaseButton",{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"red"},on:{click:function(t){return e.validateRequest(s)}}}):"Forward"===s||s.indexOf("Reply")>-1||"Rollback"===s||"Assign"===s?t("BaseButton",{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"orange"},on:{click:function(t){return e.validateRequest(s)}}}):t("BaseButton","To Requester"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"pink"},on:{click:function(t){return e.validateRequest(s)}}}:{key:s,staticClass:"q-ml-md",attrs:{label:s},on:{click:function(t){return e.validateRequest(s)}}})]}))],2):e._e()]},proxy:!0}]),model:{value:e.processSheet,callback:function(t){e.processSheet=t},expression:"processSheet"}},[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[e.formId?t("div",{staticClass:"col"},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 115px)"}},[e.formView?t("div",{attrs:{id:"form-view"}},[e.formId&&Object.keys(e.form).length?t("RenderForm",{attrs:{"form-id":e.formId,panels:e.panels,"secondary-panels":e.secondaryPanels,"form-settings":e.formSettings,"form-model":e.formModel,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel,"workflow-model":e.workflowModel,"is-readonly":e.formEditAccess,"form-edit-controls":e.formEditControls,"readonly-controls":e.readonlyControls,"form-visibility-access":e.formVisibilityAccess,"form-secure-controls":e.formSecureControls,"enable-controls":e._enableControls,"check-list":e.checkList,"form-fields":e.formFields,"data-validation-values":e.dataValidationValues,"form-check-list":e.formCheckList,"form-upload-files":e.formUploadFiles,"has-check-form-validate":e.hasCheckFormValidate},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t},"update:workflowModel":function(t){e.workflowModel=t},"update:workflow-model":function(t){e.workflowModel=t},"update:checkList":function(t){e.checkList=t},"update:check-list":function(t){e.checkList=t},"update:formCheckList":function(t){e.formCheckList=t},"update:form-check-list":function(t){e.formCheckList=t},"update:hasCheckFormValidate":function(t){e.hasCheckFormValidate=t},"update:has-check-form-validate":function(t){e.hasCheckFormValidate=t},uploadFiles:e.getOCRResult,mandatoryControlsList:e.mandatoryControlsList,deletedFiles:e.deletedFiles}}):e._e(),e.signList.length?t("div",{staticClass:"q-pa-md",attrs:{id:"approvalSignature"}},[t("div",{staticClass:"title q-mb-sm"},[e._v("Approval Signature")]),t("BaseSeparator",{staticClass:"q-my-sm"}),t("div",{staticClass:"row"},[e._l(e.signList,(function(s){return[t("div",{key:s.id,staticClass:"col-3 q-mb-sm"},[t("img",{staticClass:"imgCenter col",attrs:{src:e.signLink(s.id)}}),t("div",{staticClass:"text row"},[t("span",{staticClass:"col-12 text-bold"},[e._v(e._s(s.stage))]),t("span",{staticClass:"col-12"},[e._v(e._s(s.createdByEmail))]),t("span",{staticClass:"col-12"},[e._v(e._s(e.$day.format(s.createdAt)))])])])]}))],2)],1):e._e(),e.userSignature?t("SignatureField",{staticClass:"q-pa-md",attrs:{label:"Signature"},model:{value:e.signImg,callback:function(t){e.signImg=t},expression:"signImg"}}):e._e()],1):t("div",{staticClass:"q-pa-md"},[e.requestFormData.length?t("div",{staticClass:"col-12",attrs:{id:"requestDetails"}},[t("div",{staticClass:"row justify-center"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row items-center"},[t("table",{staticClass:"submittedData q-mb-sm"},[t("tbody",[e.requestFormData[0].value[0].createdByName?t("tr",[t("td",{attrs:{colspan:"4"}},[e._v(" Requested By: "+e._s(e.requestFormData[0].value[0].createdByName)+" ")])]):e._e(),t("tr",[e.requestFormData[0].value[0].raisedBy?t("th",[e._v(" Requested User Email ")]):e._e(),t("th",[e._v("Requested Date")]),t("th",[e._v("Last Acted By")]),t("th",[e._v("Last Acted On")])]),t("tr",[e.requestFormData[0].value[0].raisedBy?t("td",[e._v(" "+e._s(e.requestFormData[0].value[0].raisedBy)+" ")]):e._e(),t("td",[e._v(" "+e._s(e.$day.format(e.requestFormData[0].value[0].raisedAt))+" ")]),t("td",[e._v(" "+e._s(e.requestFormData[0].value[0].transaction_createdByEmail)+" ")]),t("td",[e._v(" "+e._s(e.$day.format(e.requestFormData[0].value[0].transaction_createdAt))+" ")])])])]),t("BaseScrollbar",{attrs:{height:"calc(100vh - 275px)"}},[[t("table",{staticClass:"mainData col-12"},[e._l(e.requestFormData[0].value[0].formData.fields,(function(s,i){return[s&&"[]"!=s?["TABLE"!==e.validateType(i)?[t("tr",{key:`${i}-${s}`},[t("td",{staticClass:"tblHeader ellipsis small"},[e._v(" "+e._s(e.getLabel(i))+" ")]),t("td",{staticClass:"ellipsis"},["FILE_UPLOAD"===e.validateType(i)?[JSON.parse(s).length?t("div",e._l(JSON.parse(s),(function(i){return t("div",{key:i.fileName,staticClass:"q-mb-xs"},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"col row items-center",on:{click:function(t){return e.viewFile(i,s)}}},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(i.fileName)}}),t("span",{staticClass:"cursor-pointer text-underline text-secondary"},[e._v(e._s(i.fileName))])],1)])])})),0):e._e()]:"DATE"===e.validateType(i)?[e._v(" "+e._s(e.$day.format(s,!1))+" ")]:e.validateValue(s)?[e._v(" "+e._s(e.removeTags(s)||"-")+" ")]:[t("a",{attrs:{href:s,target:"_blank"}},[e._v(" "+e._s(s||"-")+" ")])]],2)])]:JSON.parse(s).length?[e.getLabel(i)?t("tr",{key:"trlabel-"+i},[t("td",{staticClass:"tblHeader ellipsis small",attrs:{colspan:"2"}},[t("FormFieldLabel",{key:"label-"+i,staticClass:"q-mt-sm",attrs:{label:e.getLabel(i)}})],1)]):e._e(),t("tr",{key:"trtable1-"+i},[t("td",{attrs:{colspan:"2"}},[t("BaseScrollbar",{key:"scroll-"+i,staticStyle:{"max-height":"200px"}},[t("table",{key:"table-"+i,staticClass:"sub-table q-mt-sm q-mb-sm"},[t("thead",[t("tr",e._l(e.tableValue(s)[0],(function(s,i){return t("th",{key:i},[e._v(" "+e._s(e.getLabel(i,"table"))+" ")])})),0)]),t("tbody",e._l(e.tableValue(s),(function(s,i){return t("tr",{key:i},e._l(s,(function(s,i){return t("td",{key:i},[e._v(" "+e._s(s)+" ")])})),0)})),0)])])],1)])]:e._e()]:e._e()]}))],2)]],2)],1)])])]):e._e()])])],1):e._e(),e.itemModel.itemId?t("div",{staticClass:"col"},[t("div",{staticClass:"fileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myProcessFiles",attrs:{id:"file-frame",src:e.itemLink(),frameborder:"0"}})])])]):e._e(),e.formId||e.itemModel.itemId?t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(s){return[e.checkTabAccess?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()]):e._e()]}))],2):e._e()])]),t("Sheet",{attrs:{width:"30vw","sub-actions":!(!e.selectedProcess.processId||!e.attachmentList.length),upload:"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess,"no-padding":""},on:{input:e.closeAttachmentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 15 seconds ")]):e._e(),e.selectedProcess.processId?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getAttachments()}}}):e._e()]},proxy:!0},"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess?{key:"upload",fn:function(){return[t("div",{staticClass:"hint",on:{click:function(t){e.rowIndex=null,e.$refs.attachments.click()}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),t("div",{staticClass:"title text-blue"},[e._v("UPLOAD FILES")]),t("div",{staticClass:"description"},[e._v("Click here to choose files and upload")])],1)]},proxy:!0}:null,e.selectedProcess.processId&&e.attachmentList.length?{key:"subActions",fn:function(){return[t("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:e.fileSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}}),e._v(" Select All "),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!e.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentShare}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"merge documents (only PDF)",expression:"'merge documents (only PDF)'",modifiers:{top:!0}}],attrs:{"is-disabled":!(e.selectedFileCount>1&&e.isSelectedPDF),icon:"mdi-file-document-multiple-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentMerge}})]},proxy:!0}:null],null,!0),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode?"calc(100vh - 200px)":""}},[t("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:e.uploadWflowAttachments}}),e._l(e.checkList,(function(s){return[s.name?[s.attach?t("div",{key:s.uid},[e._l(e.attachmentFilterCheckList(s.name),(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})]],2):t("div",[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e()],2),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),s.formJsonId?t("div",{staticClass:"col-auto"},[t("q-chip",{staticClass:"cursor-pointer green-hover",attrs:{outline:"",color:"green"}},[e._v(" "+e._s(e.getLabel(s.formJsonId))+" ")])],1):e._e(),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),[("inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode)&&s.createdBy===e.$store.state.session.id||e.initiateProcess?[t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Re-Upload",expression:"'Re-Upload'",modifiers:{top:!0}}],attrs:{icon:"mdi-file-upload",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){t.stopPropagation(),e.reuploadFile=s,e.reupload(s.name)}}})],1)]:e._e()]],2)])]}))],2):t("div",{key:s.uid,staticClass:"checkList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),t("div",{staticClass:"col q-ml-sm"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[e._v(" "+e._s(s.name)+" ")]),s.required?t("div",{staticClass:"col-12 q-mt-sm"},[t("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[e._v(" Required ")])],1):e._e()])]),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"col-12",on:{click:function(t){return e.attachTemplate(s.uid)}}},[t("q-chip",{staticClass:"chips primary-hover medium",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-upload-outline",color:"primary","text-color":"white"}}),e._v(" Upload ")],1)],1),s.template?t("div",{staticClass:"col-12",on:{click:function(t){return e.download(s.id)}}},[t("q-chip",{staticClass:"chips secondary-hover medium",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-download-outline",color:"secondary","text-color":"white"}}),e._v(" Download ")],1)],1):e._e()])])])]:e._e()]})),e._l(e.attachmentList,(function(s){return[e.isCheckList(s.name)?[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e(),e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)],2),s.formJsonId?t("div",{staticClass:"row q-mb-xs"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto ellipsis attachment-label"},[e._v(" "+e._s(e.getLabel(s.formJsonId))+" ")])])]),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),("inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode)&&s.createdBy===e.$store.state.session.id||e.initiateProcess?t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1):e._e()]):e._e(),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2),s.formJsonId?e._e():[t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),("inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode)&&s.createdBy===e.$store.state.session.id||e.initiateProcess?t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1):e._e()]],2)])]:e._e()]}))],2)],1)]),t("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode?"30":"0","no-padding":""},on:{input:e.closeCommentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 30 seconds ")]):e._e(),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getComments(0)}}})]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:e.commentsSheetHeight}},[e._l(e.commentsList,(function(s,i){return[t("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===e.$store.state.session.id?"me":s.createdByEmail||s.externalCommentsby,text:[s.comments],"text-html":"",sent:s.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(s),"bg-color":s.createdBy===e.$store.state.session.id?"primary-1":"secondary-1"},scopedSlots:e._u([{key:"avatar",fn:function(){return[s.embedFileList&&s.embedFileList.length?t("div",{staticClass:"file-icons"},[t("FileIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.embedFileList[0].fileName,expression:"row.embedFileList[0].fileName",modifiers:{top:!0}}],key:"Icon-"+i,staticClass:"file-icon q-mr-sm",attrs:{"mime-type":e.fileType(s.embedFileList[0].fileName)}})],1):e._e()]},proxy:!0}],null,!0)})]}))],2)],1),"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode?t("div",{staticClass:"col borderTop"},[t("div",{staticClass:"row"},[e.checkTenant()&&!e.portal?[t("div",{staticClass:"col actions"},[e.attachmentList.length&&e.fileNames.length?t("div",{staticClass:"row select-action q-pa-sm action-container"},[t("CheckboxField",{staticClass:"col-auto q-pr-sm",attrs:{label:"Add Comment to PDF"},model:{value:e.attachComment,callback:function(t){e.attachComment=t},expression:"attachComment"}}),e.attachComment?t("SelectField",{staticClass:"col field comment-attach attach-cmd",attrs:{"is-searchable":!0,options:e.fileNames},model:{value:e.selectedFileForAttach,callback:function(t){e.selectedFileForAttach=t},expression:"selectedFileForAttach"}}):e._e()],1):e._e(),e.displayInternalPublic?t("SingleChoiceField",{staticClass:"action-container",class:{"internal-public":e.attachmentList.length>0,"col q-pa-sm":!0,"internal-public-margin":e.attachComment},attrs:{options:e.commentActions,"show-options-wrapper":!1,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e()],1)]:e._e(),e.isTenantGOTOComments()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.jiraCommentActions,"options-per-line":2},model:{value:e.jiraCommentAction,callback:function(t){e.jiraCommentAction=t},expression:"jiraCommentAction"}})]:e._e()],2),t("div",{staticClass:"row text-area-action q-ml-sm q-mr-sm"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto","margin-right":"8px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm comment-actions",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm comment-actions",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])]):e._e()]),t("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(t){e.mailTransactionSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Mail Transactions ")]},proxy:!0},{key:"actions",fn:function(){return[t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 30 seconds ")]),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getMailTransactions()}}})]},proxy:!0}]),model:{value:e.mailTransactionSheet,callback:function(t){e.mailTransactionSheet=t},expression:"mailTransactionSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("div",{staticClass:"q-pl-sm"},[t("Tabs",{attrs:{tabs:e.mailTabs},model:{value:e.mailTab,callback:function(t){e.mailTab=t},expression:"mailTab"}})],1),"OUTGOING"===e.mailTab?[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[e._l(e.outgoingMails,(function(s){return[t("div",{key:"outgoing"+s.id,staticClass:"mailTransactionList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(s.subject)+" ")])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),t("div",{staticClass:"col-auto"},[e._v(e._s(s.email))])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(e.$day.format(s.createdAt,!0))+" ")])])]),t("div",{staticClass:"col-auto q-mr-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.showMailAttachments(s)}}},[s.attachmentCount?t("span",{staticClass:"badge"},[e._v(e._s(s.attachmentCount)+" ")]):e._e()]),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"resend",expression:"'resend'",modifiers:{top:!0}}],attrs:{icon:"mdi-send",color:"secondary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.resendMail(s.ezMailId)}}})],1)])])]}))],2)]:e._e(),"INCOMING"===e.mailTab?[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[e._l(e.incomingMails,(function(s){return[t("div",{key:"incoming"+s.id,staticClass:"mailTransactionList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(s.subject)+" ")])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),t("div",{staticClass:"col-auto"},[e._v(e._s(s.email))])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(e.$day.format(s.createdAt,!0))+" ")])])]),t("div",{staticClass:"col-auto q-mr-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.showMailAttachments(s)}}},[s.attachmentCount?t("span",{staticClass:"badge"},[e._v(e._s(s.attachmentCount)+" ")]):e._e()])],1)])])]}))],2)]:e._e()],2)]),t("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(t){e.mailAttachmentSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Mail Attachments ")]},proxy:!0}]),model:{value:e.mailAttachmentSheet,callback:function(t){e.mailAttachmentSheet=t},expression:"mailAttachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 200px)"}},[e._l(e.mailAttachmentList,(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openAttachmentFile(s)}}},[e._v(" "+e._s(s.name)+" ")])]),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])]}))],2)],1)]),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[e.selectedFile.formJsonId?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:e.getLabel(e.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:e._e(),t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])],2)]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.documentActionList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.documentAction(s.id)}}})})),1)],1)],1)]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myAttachmentFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])]),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.saveAction="",e.workflowFormModel={},e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[e.checkTenant()&&!e.portal?[t("div",{staticClass:"row actions advance-cmd"},[e.attachmentList.length&&e.fileNames.length?[t("CheckboxField",{staticClass:"col-auto q-pr-sm",staticStyle:{margin:"auto"},attrs:{label:"Add Comment to PDF"},model:{value:e.attachComment,callback:function(t){e.attachComment=t},expression:"attachComment"}}),e.attachComment?t("SelectField",{staticClass:"field comment-attach",attrs:{"is-searchable":!0,options:e.fileNames},on:{input:e.handleAttachComment},model:{value:e.selectedFileForAttach,callback:function(t){e.selectedFileForAttach=t},expression:"selectedFileForAttach"}}):e._e()]:e._e()],2),e.checkTenant()&&e.displayInternalPublic?t("SingleChoiceField",{staticClass:"actions q-mr-sm noborder",attrs:{options:e.commentActions,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e()]:e._e(),e.isTenantGOTOComments()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.jiraCommentActions,"options-per-line":2},model:{value:e.jiraCommentAction,callback:function(t){e.jiraCommentAction=t},expression:"jiraCommentAction"}})]:e._e(),t("BaseButton",{attrs:{label:"Post Comments",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}}),t("Modal",{attrs:{width:"40vw",height:"60vh","has-footer":""},on:{input:function(t){e.saveAction="",e.workflowFormModel={},e.processForwardModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e.processForwardGroupAction?e._e():t("span",[e._v('"'+e._s(e.selectedProcess.requestNo)+'"')]),e._v(" Process Forward")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"processForward"}},[t("MultiSelectField",{staticClass:"field",attrs:{label:"users",options:e.userList},model:{value:e.forwardUsers,callback:function(t){e.forwardUsers=t},expression:"forwardUsers"}}),t("MultiSelectField",{staticClass:"field",attrs:{label:"group",options:e.groupList},model:{value:e.forwardGroups,callback:function(t){e.forwardGroups=t},expression:"forwardGroups"}}),e.processForwardGroupAction?t("TextAreaField",{staticClass:"field q-mt-md",attrs:{placeholder:"Type a comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}}):e._e()],1)]},proxy:!0},{key:"footer",fn:function(){return[e.isTenantGOTO()?[t("BaseButton",{attrs:{label:"Assign",color:"orange"},on:{click:function(t){e.processForwardModal=!1,e.processForwardGroupAction?e.groupProcessRequest():e.processRequest(!1,!1)}}})]:[t("BaseButton",{attrs:{label:"Forward",color:"orange"},on:{click:function(t){e.processForwardModal=!1,e.processForwardGroupAction?e.groupProcessRequest():e.processRequest(!1,!1)}}})]]},proxy:!0}]),model:{value:e.processForwardModal,callback:function(t){e.processForwardModal=t},expression:"processForwardModal"}}),t("Sheet",{attrs:{width:"40vw","has-footer":""},on:{input:e.closeJiraIssueSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" JIRA - Create Issue ")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"jiraIssue",attrs:{id:"content-wrapper"}},[t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"field-wrapper"},[t("ValidationProvider",{attrs:{name:"Issue Name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{staticClass:"field",attrs:{label:"Issue Name","is-mandatory":"",error:s[0]},model:{value:e.issueName,callback:function(t){e.issueName=t},expression:"issueName"}})]}}])}),e._e(),e._e(),t("ValidationProvider",{attrs:{name:"Description",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextAreaField",{staticClass:"field",attrs:{label:"Description","is-mandatory":"",error:s[0]},model:{value:e.issueDescription,callback:function(t){e.issueDescription=t},expression:"issueDescription"}})]}}])}),e._e(),e._e(),e._e()],1)])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Create Issue",color:"primary"},on:{click:e.createJiraIssue}})]},proxy:!0}]),model:{value:e.jiraIssueSheet,callback:function(t){e.jiraIssueSheet=t},expression:"jiraIssueSheet"}}),t("MetaDataEdit",{attrs:{value:e.showMetaDataEditModal,file:e.workflow,"repository-field":e.repositoryField,"file-data":e.fileData,title:e.metaDataTitle||"Index",columns:e.columns,"modal-value":e.workflowModel,"read-only":!0,"upload-filename":e.uploadFilename,"meta-data-fields":e.metaDataModal},on:{close:e.closeMetaDataEditModal,save:e.saveMetaData}}),t("Sheet",{attrs:{width:"30vw"},on:{input:e.closeTaskSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Tasks ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Add Task",expression:"'Add Task'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-plus",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.addTask()}}})]},proxy:!0}]),model:{value:e.taskSheet,callback:function(t){e.taskSheet=t},expression:"taskSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[e._l(e.taskEntries,(function(s){return[t("div",{key:s.id,staticClass:"taskEntries"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto q-mr-md",staticStyle:{"margin-top":"3px"},on:{click:function(t){return e.viewTask(s.id)}}},[e._v(" "+e._s(s.name)+" ")]),t("q-chip",{attrs:{size:"10px",color:e.getColor(s.priority),"text-color":"white"}},[e._v(" "+e._s(s.priority)+" ")]),t("q-chip",{attrs:{size:"10px",color:e.getColor(s.status),"text-color":"white"}},[e._v(" "+e._s(s.status)+" ")])],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col-12"},[e._v("Assigned To: "+e._s(s.assigned))]),t("div",{staticClass:"col-12"},[e._v(" Start Date: "+e._s(e.$day.format(s.startDate,!1))+" "),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" End Date: "+e._s(e.$day.format(s.endDate,!1))+" ")],1)])])]}))],2)]),e.taskFormId?t("AddTask",{attrs:{value:e.addTaskSheet,"form-settings":e.addTaskForm.settings,panels:e.addTaskForm.panels,"secondary-panels":e.addTaskForm.secondaryPanels,"form-id":e.taskFormId,"repository-id":e.taskRepositoryId,"task-model":e.selectedTask,"workflow-task":!0,mode:e.taskMode},on:{close:function(t){e.addTaskSheet=!1},addEntry:e.addTaskEntry}}):e._e(),e.importExcel?t("ImportPopup",{staticClass:"row items-center q-mr-xs",attrs:{"chip-button":!0,"data-imported":e.dataImported,"form-id":String(e.masterFormId)},on:{upload:function(t){return e.$refs.input.click()},close:function(t){e.dataImported=!1}}}):e._e(),t("input",{ref:"input",staticClass:"hidden",attrs:{type:"file",accept:".csv,.xls,.xlsx"},on:{change:e.uploadFile}}),t("Confirm",{attrs:{icon:"mdi-file-alert","icon-color":"red"},on:{input:e.closeAlertModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Documents Required!")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md text-md"},[t("p",[e._v(" Are you sure you want to submit the request without attaching the required documents. ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no"},on:{click:e.closeAlertModal}}),t("BaseButton",{attrs:{label:"yes",color:"primary"},on:{click:e.proceedSubmission}})]},proxy:!0}]),model:{value:e.alertModal,callback:function(t){e.alertModal=t},expression:"alertModal"}}),t("EmailSharing",{attrs:{"repository-id":e.workflow.repositoryId,"file-list":e.selectedFileList},on:{"update:fileList":function(t){e.selectedFileList=t},"update:file-list":function(t){e.selectedFileList=t}},model:{value:e.emailSharingSheet,callback:function(t){e.emailSharingSheet=t},expression:"emailSharingSheet"}}),t("FileDetails",{attrs:{"file-data":e.fileData},model:{value:e.fileDetailsSheet,callback:function(t){e.fileDetailsSheet=t},expression:"fileDetailsSheet"}}),e.historyProcessId?t("ProcessHistory",{attrs:{"process-id":e.historyProcessId,"selected-process":e.selectedProcess},on:{close:function(t){e.historyProcessId=0}}}):e._e(),e.showFormEntryHistoryModal?t("FormEntryHistory",{attrs:{value:e.showFormEntryHistoryModal,"workflow-id":e.workflow.id,"process-id":e.selectedProcess.processId},on:{"update:value":function(t){e.showFormEntryHistoryModal=t}}}):e._e(),e.showAttachmentSheet?t("Attachments",{attrs:{value:e.showAttachmentSheet,"selected-process":e.selectedProcess,workflow:e.workflow,"selected-node":e.selectedNode,"initiate-process":e.initiateProcess,"form-check-list":e.formCheckList,"check-list":e.checkList,wform:e.wform,"repository-details":e.repositoryDetails,"workflow-model":e.workflowModel,"form-upload-files":e.formUploadFiles,"repository-field":e.repositoryField,columns:e.columns,attachments:e.attachmentList,"workflow-id":e.workflow.id},on:{"update:value":function(t){e.showAttachmentSheet=t},"update:attachments":function(t){e.attachmentList=t},attachmentCount:e.attachmentCount}}):e._e(),e.showCommentsSheet?t("Comments",{attrs:{value:e.showCommentsSheet,"selected-process":e.selectedProcess,workflow:e.workflow,"selected-node":e.selectedNode,"initiate-process":e.initiateProcess,"attachment-list":e.attachmentList,"workflow-id":e.workflow.id,"file-names":e.fileNames,comments:e.commentsList,"display-internal-public":e.displayInternalPublic},on:{"update:value":function(t){e.showCommentsSheet=t},"update:comments":function(t){e.commentsList=t},commentsCount:e.commentsCount}}):e._e()],1)},a=[],o=(s("14d9"),s("13d5"),s("7bb1")),r=s("381e"),n=s("4bc4"),l=s("1b0d"),c=s("0cdc"),d=s("eff0"),u=s("bc3a"),m=s.n(u),h=s("dd90"),p=s("a7d2"),f=s("6a70"),v=s("cade"),y=s("c3d2"),b=s("fa1f"),g=s("ee54"),w=s("869e"),C=s("6df3"),k=s("b3d1"),S=s("9234"),_=s("695e"),I=s("b94d"),x=s("0c04"),T=s("1c54"),$=s("5e23"),A=s("abe1"),F=s("8505"),L=s("98cf"),B=s("909a"),P=s("9996"),D=s("3445"),M=s("b0ba"),q=s("ec15"),N=s("bb36"),O={name:"SubWorkflowProcess",components:{ValidationObserver:o["a"],ValidationProvider:o["b"],MultiSelectField:y["a"],FileIcon:b["a"],ListItem:v["a"],Sheet:r["a"],RenderForm:n["a"],Confirm:T["a"],SignatureField:d["a"],Modal:f["a"],MetaDataEdit:g["a"],CheckboxField:w["a"],TextAreaField:C["a"],TextField:k["a"],SingleChoiceField:S["a"],TextBuilderField:_["a"],Tabs:I["a"],AddTask:x["a"],ImportPopup:c["a"],EmailSharing:$["a"],FileDetails:A["a"],ProcessHistory:F["a"],FormFieldLabel:D["a"],FormEntryHistory:M["a"],Attachments:q["a"],Comments:N["a"]},props:{workflowId:{type:Number,default:0},initiateSubWorkflowProcess:{type:Boolean,default:!1},mainWorkflowId:{type:Number,default:0},mainProcessId:{type:Number,default:0},subProcessLink:{type:String,default:""},selectedProcess:{type:Object,default:()=>{}},openSubProcess:{type:Boolean,default:!1},mainFormFields:{type:Array,default:()=>[]},mainFormModel:{type:Object,default:()=>{}},portal:{type:Boolean,default:!1},subProcessId:{type:Number,default:0}},data(){return{workflow:{},workflowList:[],initiate:!1,processSheet:!1,headerTitle:"",formModel:{},form:{},formId:"",formData:"",actions:[],processActionsAddOn:[],workflowFormModel:{},saveAction:"",commentsList:[],attachmentList:[],initiateProcess:!1,signList:[],formEditAccess:!1,formEditControls:[],readonlyControls:[],formVisibilityAccess:!0,formSecureControls:[],repositoryDetails:{},repositoryField:[],formWidth:"100vw",checkList:[],stageLevel:[],currentStep:0,commentActions:[{id:this.$nano.id(),label:"Internal",value:2},{id:this.$nano.id(),label:"Public",value:1}],commentAction:2,jiraCommentActions:[{id:this.$nano.id(),label:"This resource",value:1},{id:this.$nano.id(),label:"All resource",value:2}],jiraCommentAction:1,formFields:[],checkListRowIndex:null,requestPrefix:"",mlPrediction:"",advancedCommentsSheet:!1,advancedCommentText:"",docWarning:!1,alertModal:!1,actionRemarks:!1,actionPassword:!1,actionPasswordConfirm:!1,actionUserPassword:"",actionComments:!1,actionConfirm:!1,actionConfirmAlert:!1,showMetaDataEditModal:!1,selectedUploadFile:{},workflowModel:{},customVerify:!1,formCheckList:!1,reuploadFile:{},documentActionList:[{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline"},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline"}],scrollPosition:0,commentsLoad:null,mailTransactionLoad:null,documentLoad:null,documentLoadList:[],uploadFilename:"",filterSearchColumn:{},selectedFilterColumn:"",watchViewerClose:null,saveOnly:!1,wform:[],userSignature:!1,dataValidationValues:[],processForwardModal:!1,forwardUsers:[],forwardGroups:[],processForwardGroupAction:!1,selectedFilter:[],filterBy:[],attachmentLoad:null,signImg:"",selectAll:!1,emailSharingSheet:!1,selectedFileList:[],fileDetailsSheet:!1,fileData:[],jiraConnect:!1,jiraAccounts:[],jiraIssueSheet:!1,issueName:"",projectKey:"",issueType:"",issueDescription:"",issueEpicValue:"",issueAssignee:"",issueAssigneeUsers:[],issueDescriptionTable:!1,issueDescriptionFields:[],jiraConfirmModal:!1,issueRef:{},taskSheet:!1,itemModel:{},errorMessage:"",errorModal:!1,successModal:!1,selectedNode:"",attachmentSheet:!1,commentsSheet:!1,processId:0,tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"mail transaction",value:"MAIL",icon:"mdi-email-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0},{id:this.$nano.id(),label:"task",value:"TASK",icon:"eva-cube-outline",count:0},{id:this.$nano.id(),label:"Form Entry History",value:"FORM_ENTRY_HISTORY",icon:"mdi-file-document",count:0}],taskEntries:[],addTaskEnabled:!1,mailTab:"OUTGOING",mailTransactionSheet:!1,commentText:"",mailTransactionList:[],mailAttachmentSheet:!1,mailAttachmentList:[],fileSheet:!1,selectedFile:{},mailTabs:[{id:this.$nano.id(),label:"outgoing",value:"OUTGOING",count:0},{id:this.$nano.id(),label:"incoming",value:"INCOMING",count:0}],userList:[],groupList:[],refreshTree:!0,loadInitial:!0,customReply:!1,userReply:!1,toRequester:!1,customCloseProcessSheet:!1,approvalTypes:[{id:this.$nano.id(),label:"Approve",value:"Approved"},{id:this.$nano.id(),label:"Cancel",value:"Cancelled"}],activeViewLoad:null,hideColumns:[],columns:[],generatePDF:0,documentRequired:!1,hasSelectedProcess:0,hasSelectedWorkflow:0,taskFormId:0,taskRepositoryId:0,addTaskForm:{},addTaskSheet:!1,taskEntryId:[],taskEntryList:[],taskMode:"",selectedTask:{},importExcel:!1,masterFormId:0,dataImported:!1,sameFormFields:[],historyProcessId:0,attachComment:!1,fileNames:[],selectedFileForAttach:0,displayInternalPublic:!1,formUploadFiles:[],mandatory:{},fileControlDeleteFile:[],hasCheckFormValidate:!1,fileUploadForControl:!1,fileUploadInput:{},metaDataUpdate:!1,metaDataModal:{},metaDataTitle:"",requestFormData:[],formView:!0,showFormEntryHistoryModal:!1,showAttachmentSheet:!1,showCommentsSheet:!1}},computed:{formName(){return this.formId?this.form.settings.general.name:""},formDescription(){return this.formId?this.form.settings.general.description:""},panels(){return this.formId?this.form.panels:[]},secondaryPanels(){return this.formId?this.form.secondaryPanels:[]},formSettings(){return this.formId?this.form.settings:{}},selectedFileCount(){let e=this.attachmentList.filter(e=>e.checked).length;return e},isSelectedPDF(){let e=!0;return this.attachmentList.forEach(t=>{let s=t.name.split(".").pop();t.checked&&"pdf"!==s.toLowerCase()&&(e=!1)}),e},isMaximized(){return"100vw"===this.formWidth},_enableControls(){let e=[],t=[];return this.panels&&this.panels.forEach(s=>{if(s.fields.length){let i=s.fields.filter(e=>"SINGLE_SELECT"===e.type||"SINGLE_CHOICE"===e.type||"MULTIPLE_CHOICE"===e.type||"MULTI_SELECT"===e.type);i.length&&i.forEach(s=>{if(s.settings.validation.enableSettings&&s.settings.validation.enableSettings.length){let i=[];s.settings.validation.enableSettings.forEach(e=>{e.controls.length&&(i.push({value:e.value,childControls:e.controls}),e.controls.forEach(e=>{i.indexOf(e)<0&&t.push(e)}))}),i.length&&e.push({id:s.id,parentControls:i})}})}}),{listControls:t,controls:e}},isCustomizedWorkflow(){let e=location.origin;if("https://demo.ezofis.com"===e||"http://52.172.32.88"===e){if(1014===this.workflow.id)return!0}else if(("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&1===this.workflow.id)return!0;return!1},outgoingMails(){return this.mailTransactionList.filter(e=>"Outgoing"===e.emailType)},incomingMails(){return this.mailTransactionList.filter(e=>"Incoming"===e.emailType)},commentsSheetHeight(){return"inbox"===this.selectedNode||"payment"===this.selectedNode||"common"===this.selectedNode?this.checkCommentsOption()?this.attachmentList.length&&this.fileNames.length?this.attachComment&&this.displayInternalPublic?"calc(100vh - 240px)":this.attachComment&&!this.displayInternalPublic?"calc(100vh - 200px)":!this.attachComment&&this.displayInternalPublic?"calc(100vh - 225px)":"calc(100vh - 190px)":this.displayInternalPublic?"calc(100vh - 190px)":"calc(100vh - 150px)":"calc(100vh - 150px)":""},mandatoryDocument(){return this.checkList.filter(e=>e.required&&!e.attach)},mandatoryFilling(){return this.mandatory.filledValue&&this.mandatory.nonFilledValue?Math.floor(this.mandatory.filledValue/(this.mandatory.filledValue+this.mandatory.nonFilledValue)*100):this.mandatory.filledValue?100:0},request(){return this.selectedProcess}},watch:{workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&(this.initiateProcess,this.checkRequiredDocument())}},attachmentSheet:{immediate:!0,handler(){if(this.attachmentSheet&&this.selectedProcess.processId){if(this.attachmentList.length){let e=this.attachmentList.length-1;this.getFileData(this.attachmentList[e],"file")}this.attachmentLoad=setInterval(()=>{this.getAttachments()},15e3)}else clearInterval(this.attachmentLoad)}},commentsSheet:{immediate:!0,handler(){this.commentsSheet&&this.selectedProcess.processId?this.commentsLoad=setInterval(()=>{this.getComments(this.workflowId,this.selectedProcess.processId)},3e4):clearInterval(this.commentsLoad)}},mailTransactionSheet:{immediate:!0,handler(){this.mailTransactionSheet&&this.selectedProcess.processId?this.mailTransactionLoad=setInterval(()=>{this.getMailTransactions()},3e4):clearInterval(this.mailTransactionLoad)}},taskEntries:{immediate:!0,handler(){this.tabs.find(e=>{"TASK"===e.value&&(e.count=this.taskEntries.length)})}},workflowId:{immediate:!0,handler(){}},initiateSubWorkflowProcess:{immediate:!0,handler(){this.initiateSubWorkflowProcess&&this.getWorkflow()}},processSheet(){this.fileData=[],this.workflowModel={}},dataValidationValues:{immediate:!0,deep:!0,handler(){if(this.customVerify=!1,this.dataValidationValues.length){let e=this.dataValidationValues.filter(e=>"Matched"!==e.status&&"Verified"!==e.status);e.length&&(this.customVerify=!0)}}},customCloseProcessSheet:{deep:!0,immediate:!0,handler(){}},subProcessLink(){this.subProcessLink&&(this.selectedNode="sent",this.showLinks(this.subProcessLink))},openSubProcess:{immediate:!0,handler(){this.openSubProcess&&(this.formId="",this.formView=!1,this.selectedProcess.inbox?(this.formView=!0,this.getWorkflow()):this.getWorkflow("process"))}},selectedProcess:{deep:!0,handler(){this.selectedProcess.processId&&(this.getAttachments(this.workflowId,this.selectedProcess.processId),this.getComments(this.workflowId,this.selectedProcess.processId))}},workflowModel:{deep:!0,handler(){this.sameFormFields.forEach(e=>{e.value&&(this.workflowModel[e.name]=e.value)})}}},created(){this.getTaskForm()},methods:{isTenantArmgroup(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e||(this.commentAction=2,!1)},checkTabAccess(e){return this.portal?"ATTACHMENTS"===e||"COMMENTS"===e:"TASK"===e?this.addTaskEnabled:"VALIDATION"===e?!!this.isTenantArmgroup():"FORM_ENTRY_HISTORY"!==e||!!this.formId},reset(){this.headerTitle="",this.mandatory={},this.actions=[],this.processActionsAddOn=[],this.form={},this.formId="",this.formFields=[],this.tabs.find(e=>{e.count=0}),this.taskEntries=[],this.commentsList=[],this.attachmentList=[],this.initiateProcess=!0,this.formModel={},this.signList=[],this.formEditAccess=!1,this.formEditControls=[],this.readonlyControls=[],this.formVisibilityAccess=!0,this.formSecureControls=[],this.importExcel=!1},async getWorkflow(e){this.reset(),this.processSheet=!0,this.$store.commit("showLoadingBarSave");const{error:t,payload:s}=await l["t"].getWorkflow(this.workflowId);t?this.$alert.error(t):(this.workflow=s,this.selectedNode=e?"sent":"inbox",this.selectedProcess.inbox?await this.openProcess(!1):await this.openProcess(!e),this.$store.commit("hideLoadingBarSave"))},closeProcessSheet(){this.processSheet=!1,this.saveAction="",this.workflowFormModel={},this.requestFormData=[],this.formView=!0,this.$emit("closeProcessSheet")},getLabel(e){let t="";return Object.keys(this.form).length&&this.form.panels.forEach(s=>{if(!s.fields.length)return;let i=s.fields.find(t=>t.id===e);i&&(t=i.label?i.label:i.type)}),t},async openProcess(e=!1){if(this.getRepository(),e){let e=JSON.parse(this.workflow.flowJson),t=e.blocks.find(e=>"START"===e.type);if(console.log(t.settings.fileSettings),t.settings.fileSettings&&t.settings.fileSettings.fileCheckList.length&&(this.checkList=t.settings.fileSettings.fileCheckList,this.checkList.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1})),t){if("MANUAL"===t.settings.initiateMode){this.headerTitle=""+t.settings.label;let s=e.rules.find(e=>e.fromBlockId===t.id);s&&this.actions.push(s.proceedAction)}else"MANUAL_AUTOMATIC"===t.settings.initiateMode&&(t.settings.users.indexOf(this.$store.state.session.id)>-1||t.settings.users.indexOf("0")>-1)&&t.settings.initiateBy.indexOf("MASTER_FORM")>-1&&(this.importExcel=!0,this.masterFormId=t.settings.masterFormId);if(this.generatePDF=t.settings.generatePDF?1:0,this.documentRequired=t.settings.documentRequired||!1,t.settings.formEditAccess&&(""===t.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===t.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===t.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=t.settings.formEditControls)),t.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=t.settings.formSecureControls),t.settings.fileSettings){if(t.settings.fileSettings.fileCheckList.length){let e=t.settings.fileSettings.fileCheckList;e.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1}),this.docWarning=t.settings.fileSettings.partial,this.checkList=e}}else this.checkList=[]}}else{if(this.getFormDetails(),"inbox"===this.selectedNode||"common"===this.selectedNode||"payment"===this.selectedNode){this.formEditAccess=!1;let e=JSON.parse(this.workflow.flowJson),t=e.blocks.find(e=>e.id===this.selectedProcess.activityId);if(t){if(""===t.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===t.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===t.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=t.settings.formEditControls),t.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=t.settings.formSecureControls),e.settings.general.processNumberPrefix.indexOf("[")>-1){let t=JSON.parse(e.settings.general.processNumberPrefix);this.readonlyControls=[];let s=t.filter(e=>"formColumn"===e.key);s.length&&s.forEach(e=>{this.readonlyControls.push(e.value),this.formEditControls.indexOf(e.value)>-1&&this.formEditControls.splice(this.formEditControls.indexOf(e.value),1)})}if(t.settings.fileSettings){if(t.settings.fileSettings.fileCheckList.length){let e=t.settings.fileSettings.fileCheckList;e.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1}),this.docWarning=t.settings.fileSettings.partial,this.checkList=e}e.rules.forEach(e=>{e.fromBlockId===this.selectedProcess.activityId&&this.actions.indexOf(e.proceedAction)<0&&(this.actions.push(e.proceedAction),this.processActionsAddOn.push({action:e.proceedAction,remarks:e.remarks||!1,passwordAccess:e.passwordAccess||!1,confirm:e.confirm||!1}))})}else this.checkList=[]}}else this.formEditAccess=!0;this.initiateProcess=!1,this.getModel(this.selectedProcess.processId);let e=location.origin;("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&this.dataValidation(this.selectedProcess.processId,!1),"https://edmsuat.sobhaapps.com"===e&&55===this.workflow.id&&(this.formEditAccess=!0),this.loadProcessLinks()}this.workflow.wFormId&&(this.formId=String(this.workflow.wFormId),await this.getForm(e,this.workflow.wFormId))},async getFormDetails(){this.$store.commit("showLoadingBarPage");let e=this.selectedProcess.requestNo;const{error:t,payload:s}=await l["o"].getWorkflowData(this.selectedProcess.id,{filterBy:[{groupCondition:"",filters:[{criteria:"requestNo",condition:"IS_EQUALS_TO",value:e}]}],currentPage:1,itemsPerPage:10,mode:""}),{data:i}=s;this.$store.commit("hideLoadingBarPage");let a=i||[];if(a[0].value[0].formData){let e=Object.keys(a[0].value[0].formData.fields),t={};e.forEach(e=>{t[e]=this.validateTypeValue(a[0].value[0].formData.fields[e])}),this.requestFormData=a,this.formModel=a[0].value[0].formData.fields}t&&this.$alert.error(t)},async getRepository(){const{error:e,payload:t}=await l["p"].getRepository(this.workflow.repositoryId);e?this.$alert.error(e):(this.repositoryDetails=t,this.repositoryField=t.fields)},async getAttachments(e=0,t=0){this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=0)});let s=this.attachmentList.length;e||t||(e=this.workflow.id,t=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:i,payload:a}=await l["t"].getAttachments(e,t);if(this.$store.commit("hideLoadingBar"),i)this.$alert.error(i);else{if(a.length?(s!==a.length&&(this.attachmentList=a.map(e=>({...e,checked:!1}))),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)})):this.attachmentList=[],this.checkList.length){this.checkList.forEach(e=>{let t=this.attachmentList.filter(t=>{let s=t.name.substr(0,t.name.lastIndexOf("."));if(e.name===s||e.name===s.split("_")[0])return t});t.length?e.attach=!0:e.attach=!1});let e=location.origin;("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&(this.formCheckList=!0)}this.$emit("attachmentLength",this.attachmentList.length)}},async getForm(e){const{error:t,payload:s}=await l["g"].getForm(this.formId);if(t)this.$alert.error(t);else if(s){this.wform=s,this.form=JSON.parse(this.wform.formJson),e||"CARD"===this.form.settings.general.layout&&(this.form.settings.general.layout="TAB");let t=JSON.parse(this.wform.formJson);const i=[...t.panels,...t.secondaryPanels];if(!i.length)return;let a=[];for(const e of i)a.push(...e.fields);a.forEach(e=>{"DIVIDER"===e.type||"LABEL"===e.type||"PARAGRAPH"===e.type||!e.label&&"TABLE"!==e.type||"DISABLE"===e.settings.general.visibility||this.formFields.push({id:this.$nano.id(),label:e.label||e.type,value:e.id,type:e.type,settings:e.settings})}),this.sameFormFields=[],this.mainFormFields.forEach(e=>{let t=this.formFields.findIndex(t=>e.label===t.label);t>-1&&this.sameFormFields.push({id:this.$nano.id(),index:t,label:e.label,name:this.formFields[t].value,value:this.mainFormModel[e.value]})})}},signLink(e){return`https://appuat.ezofis.com/ezofisapi/api/workflow/signView/${this.$store.state.session.tenantId}/${this.workflow.id}/${e}`},itemLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");return"inbox"===this.selectedNode||"common"===this.selectedNode||"payment"===this.selectedNode?"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}`:"https://trial.ezofis.com"===e?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}&action=all`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&wId=${this.workflow.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.itemModel.name}&action=all`:"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}`:"https://trial.ezofis.com"===e?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}&action=download,print`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}&action=download,print`},openFile(e){if(e.loading)this.$alert.info("Please wait to complete the uploading");else{this.selectedFile=e;let t=location.origin;"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?window.open(this.fileLink()):this.fileSheet=!0}},closeAttachmentsSheet(){this.attachmentSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},closeMetaDataEditModal(){this.showMetaDataEditModal=!1,this.$refs.attachments.value=null},async showLinks(e){if("ATTACHMENTS"===e)this.showAttachmentSheet=!0;else if("COMMENTS"===e){if(this.displayInternalPublic=!1,!this.portal){let e=JSON.parse(this.workflow.flowJson),t=e.blocks.find(e=>"START"===e.type);t&&t.settings.initiateBy.indexOf("PORTAL")>-1&&(this.displayInternalPublic=!0),this.fileNames=[],this.fileNames=this.attachmentList.filter(e=>{let t=e.name.split(".").pop().toUpperCase();return"pdf"===t.toLowerCase()}).map(e=>({id:this.$nano.id(),label:e.name,value:e.id}))}this.showCommentsSheet=!0}else"HISTORY"===e&&this.selectedProcess.processId?this.historyProcessId=this.selectedProcess.processId:"PRINT"===e?this.selectedProcess.formData?window.open(`https://appuat.ezofis.com/ezofisapi/api/form/generatePdfPrint/${this.$store.state.session.tenantId}/${this.workflow.id}/${this.selectedProcess.processId}/${this.formId}/${this.selectedProcess.formData.formEntryId}/1`):this.selectedProcess.itemData&&window.open(`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedProcess.itemData.repositoryId}/${this.selectedProcess.itemData.itemId}/2`):"TASK"===e?this.taskEntries.length?this.taskSheet=!0:this.addTask():"MAIL"===e?(this.getMailTransactions(),this.mailTransactionSheet=!0):"FORM_ENTRY_HISTORY"===e&&(this.showFormEntryHistoryModal=!0)},lastActionDuration(e){const t=e.transaction_createdAt instanceof Date?e.transaction_createdAt:new Date(e.transaction_createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},validateTypeValue(e){if(e)try{var t=JSON.parse(e);if("object"===typeof t)return t}catch(s){return e}return e},validateType(e){let t="";return this.panels&&this.panels.length&&this.panels.forEach(s=>{if(!s.fields.length)return;let i=s.fields.find(t=>t.id===e);i&&(t=i.type)}),t},validateValue(e){let t=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;return!t.test(e)},async getFileData(e,t){const{error:s,payload:i}=await l["p"].getFileData({repositoryId:e.repositoryId,itemId:e.id});s?this.$alert.error(s):i&&(e.fileData?this.fileData=e.fileData:this.fileData=i,"file"!==t&&(this.fileDetailsSheet=!0))},async sendCommentsToJira(e,t,s){if(this.$store.commit("showLoadingBar"),1===this.jiraCommentAction){var i;let t=null===(i=this.formFields.find(e=>"Resource ID"===e.label))||void 0===i?void 0:i.value;e=this.selectedProcess.formData.fields[t]+","+e}e=`${this.$store.state.session.firstName} ${this.$store.state.session.lastName}: ${e}`;let a={cloudIntegrationId:this.jiraAccounts[0].id,url:this.selectedProcess.jiraIssueInfo.self,data_onpremise:{body:e},issueId:t,ezCommentId:s};const{error:o,payload:r}=await l["j"].insertJiraIssueComments(a);if(this.$store.commit("hideLoadingBar"),o){this.$alert.error("error posting comments to jira");let e=JSON.parse(o);return this.errorMessage=e.errorMessages,void(this.errorModal=!0)}console.log(r),this.jiraCommentAction=1},async uploadAttachments(e,t){if(this.selectedProcess.processId){const i=e.target.files[0],a=new FormData;a.append("workflowId",this.workflow.id),a.append("repositoryId",this.workflow.repositoryId),a.append("processId",this.selectedProcess.processId),a.append("transactionId",this.selectedProcess.transactionId),this.formData=a,t?(a.append("fields",t),this.formData=t):a.append("fields",""),a.append("file",i);let o=e.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);a.append("filename",e[0].name+"."+r),o=e[0].name+"."+r}if(!Object(h["a"])(r))return void this.$alert.info("This file format is not supported");this.$store.commit("showLoadingBar");try{const e=await m()({url:"https://appuat.ezofis.com/ezofisapi/api/workflow/attachmentWithProcessId",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:t,data:s}=e;if(200!==t||!s)throw e;this.$alert.success("Document attached"),this.documentLoad=setInterval(()=>{this.getAttachments(),clearInterval(this.documentLoad)},15e3)}catch(s){this.$alert.error("Error uploading file"),console.error(s)}this.$store.commit("hideLoadingBar"),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value="",Object.keys(this.reuploadFile).length&&(await this.attachmentDelete(this.reuploadFile),this.reuploadFile={})}else{const i=e.target.files[0],a=new FormData;a.append("file",i),a.append("repositoryId",this.workflow.repositoryId),t&&(this.fileData=JSON.parse(t),a.append("fields",t));let o=e.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);a.append("filename",e[0].name+"."+r),o=e[0].name+"."+r}else a.append("filename",o);if(!Object(h["a"])(r))return void this.$alert.info("This file format is not supported");try{const s=await m()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:n,data:l}=s;if(200!==n)throw"Invalid response";let c=JSON.parse(l);this.$alert.success("Document attached");let d=this.repositoryField.reduce((e,t)=>e.level>t.level?e:t),u=this.fileData.find(e=>e.name===d.name),h=!1;"pdf"!==r.toLowerCase()&&(h=!0,this.documentLoadList.push(Number(c.fileId)),this.documentLoad=setInterval(()=>{let e=this.attachmentList.find(e=>this.documentLoadList.indexOf(e.id)>-1);e&&(this.documentLoadList.splice(this.documentLoadList.indexOf(e.id),1),e.loading=!1),0===this.documentLoadList.length&&clearInterval(this.documentLoad)},1e4)),this.attachmentList.push({id:Number(c.fileId),name:t?u.value+"."+r:o,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:i.size,initiate:!0,uid:this.checkListRowIndex,createdBy:this.$store.state.session.id,fileData:this.fileData,repositoryId:this.workflow.repositoryId,loading:h}),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value=""}catch(s){console.error(s),this.$alert.error("error attaching file")}}},async getMailTransactions(){this.mailTransactionList=[],this.tabs.find(e=>{"MAIL"===e.value&&(e.count=0)});let e={filterBy:[]};const{error:t,payload:s}=await l["t"].getMailTransactions(this.workflow.id,this.selectedProcess.processId,e);t?this.$alert.error(t):s.length&&(this.mailTransactionList=s,this.tabs.find(e=>{"MAIL"===e.value&&(e.count=this.mailTransactionList.length)}))},checkCommentsOption(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e&&("https://app.ezofis.com"!==e&&"https://appuat.ezofis.com"!==e||2!==this.$store.state.session.tenantId||!(!Object.keys(this.selectedProcess).length||!this.selectedProcess.jiraIssueInfo.id))},async uploadWflowAttachments(e){if(this.fileUploadForControl=!1,"STATIC"===this.repositoryDetails.fieldsType){if(this.selectedUploadFile=e,this.customCheckUpload()){let t=this.formFields.find(e=>"Document No"===e.label);this.uploadFilename=t?this.workflowModel[t.value]+".pdf":e.target.files[0].name}else this.uploadFilename=e.target.files[0].name;this.showMetaDataEditModal=!0}else this.uploadAttachments(e)},customCheckUpload(){let e=location.origin;return"https://edmsuat.sobhaapps.com"===e&&(55===this.workflow.id||2092===this.workflow.id)&&0===this.attachmentList.length},checkTenant(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e||(this.commentAction=2,!1)},isTenantGOTO(){let e=location.origin;return("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e)&&2===this.$store.state.session.tenantId},isTenantGOTOComments(){if(Object.keys(this.selectedProcess).length){let e=location.origin;if(("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e)&&2===this.$store.state.session.tenantId&&this.selectedProcess.jiraIssueInfo.id)return!0}return!1},toggleWidth(){this.formWidth="100vw"===this.formWidth?"50vw":"100vw"},clearAttach(){this.selectedFileForAttach=0,this.attachComment=!1},async getComments(e=0,t=0){this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=0)}),this.commentsList=[],e||t||(e=this.workflow.id,t=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:s,payload:i}=await l["t"].getProcessComments(e,t);this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):(i.length&&(this.commentsList=i,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)})),this.$emit("commentsLength",this.commentsList.length))},async saveComment(){if(this.commentText)if(this.selectedProcess.processId){if("https://app.ezofis.com"!==origin&&"https://appuat.ezofis.com"!==origin||2!==this.$store.state.session.tenantId||!this.selectedProcess.jiraIssueInfo.id||2!==this.jiraCommentAction){const{error:e,payload:t}=await l["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:this.portal?1:this.commentAction,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,[t])}else{const{error:e,payload:t}=await l["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.commentText});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,t)}this.commentText="",this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.commentText=""},async saveAdvancedComment(){if(this.advancedCommentText){if(this.attachComment&&!this.selectedFileForAttach)return void this.$alert.warning("Select File To Attach");if(this.selectedProcess.processId){if("https://app.ezofis.com"!==origin&&"https://appuat.ezofis.com"!==origin||2!==this.$store.state.session.tenantId||!this.selectedProcess.jiraIssueInfo.id||2!==this.jiraCommentAction){const{error:e,payload:t}=await l["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:this.portal?1:this.commentAction,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t)}else{this.$store.commit("showLoadingBar");const{error:e,payload:t}=await l["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t)}this.advancedCommentText="",this.advancedCommentsSheet=!1,this.clearAttach(),this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.advancedCommentText="",this.advancedCommentsSheet=!1,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)});this.actionComments&&this.processRequest(!1,!1)}},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},fileSize(e){return Object(p["a"])(e)},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let s=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(s=2);let i="";if(Object(h["d"])(t))i="https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":e+"/PDFViewer/web/viewer.html";else{if("http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${s}`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`}{let s="";"inbox"!==this.selectedNode&&"common"!==this.selectedNode&&"payment"!==this.selectedNode||(s="&action=all");let i="";if(Object(h["d"])(t))"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?(s="",i="https://ag-appsvc04.azurewebsites.net/web/viewer.html"):i="https://trial.ezofis.com"!==e||Object(h["c"])(t)?e+"/PDFViewer/web/viewer.html":"https://trial.ezofis.com/docsviewer/index.html";else{if(Object(h["b"])(t)||"http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflow.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${s}`}}},closeTaskSheet(){this.taskSheet=!1},closeJiraIssueSheet(){this.issueName="",this.projectKey="",this.issueType="",this.issueDescription="",this.issueEpicValue="",this.issueAssignee="",this.issueDescriptionTable=!1,this.issueDescriptionFields=[],this.jiraIssueSheet=!1},loadProcessLinks(){this.getComments(),this.getAttachments(),this.getProcessSignature(),this.getMailTransactions()},async getProcessSignature(){this.signList=[];const{error:e,payload:t}=await l["t"].getProcessSignature(this.workflow.id,this.selectedProcess.processId);e?this.$alert.error(e):this.signList=t},async attachmentDelete(e){if(e.fileControl){let t=this.workflowModel[e.fieldId];if(t.length){let s=t.findIndex(t=>t.fileId===e.id);console.log(s),s>=0&&this.workflowModel[e.fieldId].splice(s,1);let i=this.formUploadFiles.findIndex(t=>t.fileId===e.id&&t.fileId===e.fileId);console.log(i),i>=0&&this.formUploadFiles.splice(s,1),e.control.length&&e.control.forEach(e=>{this.workflowModel[e]=""})}let s=this.attachmentList.findIndex(e=>e.fileControl);console.log(s),s>=0&&(this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length-1)}),this.attachmentList.splice(s,1))}else if(e.initiate){const{error:t}=await l["r"].deleteUploadedFiles([e.id]);if(t)return void this.$alert.error(t);this.attachmentList=this.attachmentList.filter(t=>t.id!==e.id),this.checkList.forEach(t=>{t.uid===e.uid&&(t.attach=!1)})}else{const{error:t}=await l["p"].fileDelete(this.workflow.repositoryId,e.id);if(t)return void this.$alert.error(t);this.getAttachments()}},async saveProcessSignature(e){let t={signBinary:this.signImg.split(",")[1],fileType:"png"};const{error:s}=await l["t"].saveProcessSignature(this.workflow.id,e.processId,e.transactionId,t);s?this.$alert.error(s):this.signImg=""},async getAppConnection(){this.jiraConnect=!1;const{error:e,payload:t}=await l["j"].getJiraConnection({filterBy:[]});e?this.$alert.error(e):t.forEach(e=>{"jira"===e.cloudName&&(this.jiraConnect=!0,this.jiraAccounts.push(e))})},async createJiraIssue(){this.issueRef={};const e=await this.$refs.form.validate();if(!e)return;let t=[],s="",i="",a=0;this.groupKey.forEach(e=>{if(e.checked)return t=[],void(s=e.name)}),""===s&&(this.workflowRequestList.forEach(e=>{e.checked&&t.push(e.transactionId)}),this.issueDescriptionTable&&(i="||Action Taken (Mandatory)",this.issueDescriptionFields.forEach(e=>{i+="||"+e}),i+="||\n",this.workflowRequestList.forEach(e=>{e.checked&&(i+="|| ",this.issueDescriptionFields.forEach(t=>{var s;let o=null===(s=this.formFields.find(e=>e.label===t))||void 0===s?void 0:s.value;"Savings"===t?e.formData.fields[o]?(i+="||"+Number(e.formData.fields[o]).toFixed(2),a+=Number(e.formData.fields[o])):i+="|| ":e.formData.fields[o]?i+="||"+e.formData.fields[o]:i+="|| "}),i+="||\n")}),i+="Potential Savings: "+a.toFixed(2)+"\n"));let o={};o=this.jiraAccounts[0].email?{fields_cloud:{fields:{summary:this.issueName,project:{key:this.projectKey},issuetype:{name:this.issueType},description:{content:[{content:[{text:this.issueDescription+i,type:"text"}],type:"paragraph"}],type:"doc",version:1}}},cloudIntegrationId:this.jiraAccounts[0].id}:{fields_onpremise:{fields:{summary:this.issueName,project:{key:this.projectKey},issuetype:{name:this.issueType},description:this.issueDescription+i,customfield_14635:{value:"No"},customfield_15136:{value:"Maintenance"}}},cloudIntegrationId:this.jiraAccounts[0].id,workflowId:this.workflow.id,transactionId:t,mlPrediction:s,assignee:this.issueAssignee?{name:this.issueAssignee}:{},filterBy:this.filterBy},this.$store.commit("showLoadingBar");const{error:r,payload:n}=await l["j"].createJiraIssue(o);if(this.$store.commit("hideLoadingBar"),r){this.$alert.warning("error creating issue in jira");let e=JSON.parse(r);return console.log(e),this.errorMessage=e.errorMessages,void(this.errorModal=!0)}if(s)this.successModal=!0;else{if(!n)return void this.$alert.warning("error creating issue in jira");this.issueRef=JSON.parse(n),this.issueRef.self=this.getJIRALink(this.issueRef),this.$alert.success("Issue Created in JIRA"),this.jiraConfirmModal=!0}this.closeJiraIssueSheet()},async insertJiraIssueComment(){var e,t;let s="",i="";if(s=null===(e=this.formFields.find(e=>"Reference ID"===e.label))||void 0===e?void 0:e.value,i=null===(t=this.formFields.find(e=>"Remarks"===e.label))||void 0===t?void 0:t.value,this.workflowFormModel[s]&&this.workflowFormModel[i]){this.$store.commit("showLoadingBar");let e={};e=this.jiraAccounts[0].email?{cloudIntegrationId:this.jiraAccounts[0].id,url:this.workflowFormModel[s],data_cloud:{body:this.workflowFormModel[i]}}:{cloudIntegrationId:this.jiraAccounts[0].id,url:this.workflowFormModel[s],data_onpremise:{body:this.workflowFormModel[i]}};const{error:t,payload:a}=await l["j"].insertJiraIssueComments(e);if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);console.log(a)}},async getJiraUsers(){this.issueAssigneeUsers=[];const{error:e,payload:t}=await l["j"].getJiraUsers({cloudIntegrationId:this.jiraAccounts[0].id});e?this.$alert.error(e):t.length&&t.forEach(e=>{this.issueAssigneeUsers.push({id:e.key,label:e.displayName,value:e.name})})},validateRequest(e){this.saveAction=e,this.itemModel.itemId&&this.processRequest()},async processRequest(e=!0,t=!0){if(e){let e=location.origin;if(("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e)&&2===this.$store.state.session.tenantId&&"Assign"===this.saveAction&&this.internalForward.proceed)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0);if("Forward"===this.saveAction&&this.internalForward.proceed)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0)}if(t){let e=this.processActionsAddOn.find(e=>e.action===this.saveAction);if(e&&Object.keys(e).length){if(this.actionRemarks=e.remarks,this.actionPassword=e.passwordAccess,this.actionConfirm=e.confirm,this.actionPassword)return void(this.actionPasswordConfirm=!0);if(this.actionRemarks)return this.actionComments=!0,void(this.advancedCommentsSheet=!0);if(this.actionConfirm)return void(this.actionConfirmAlert=!0)}}let s={},i=location.origin;this.userReply&&this.saveAction.indexOf("Reply")>-1?this.saveAction="UserReply":this.toRequester&&"To Requester"===this.saveAction&&(this.saveAction="ToInitiator"),this.customReply&&this.saveAction.indexOf("Reply")>-1&&(this.saveAction="Reply",this.forwardUsers.push(this.selectedProcess.transaction_createdBy));let a=[];this.formFields.forEach(e=>{if("FILE_UPLOAD"===e.type&&this.workflowModel[e.value]){let t=[];this.workflowModel[e.value].forEach(e=>{e.fileId&&t.push(e.fileId)}),t.length&&a.push({jsonId:e.value,fileIds:t}),delete this.workflowFormModel[e.value]}}),this.formId?("https://app.ezofis.com"!==i&&"https://appuat.ezofis.com"!==i||2!==this.$store.state.session.tenantId||"Rollback"!==this.saveAction?"http://demo.ezofis.com"!==i&&"http://52.172.32.88"!==i||6===this.workflow.id&&this.forwardUsers.push(this.selectedProcess.transaction_createdBy):1===this.workflow.id&&this.forwardUsers.push(this.selectedProcess.transaction_createdBy),s={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction||"CustomVerify"===this.saveAction?"":this.saveAction,formData:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,fields:this.workflowFormModel,formUpload:a},userIds:this.forwardUsers,groupIds:this.forwardGroups}):this.itemModel&&(s={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction?"":this.saveAction,formData:{},userIds:this.forwardUsers,groupIds:this.forwardGroups}),this.saveAction="",this.workflowFormModel={},this.saveOnly||this.$store.commit("showLoadingBarSave");const{error:o}=await l["t"].processTransaction(s);this.saveOnly||this.$store.commit("hideLoadingBarSave"),o?this.$alert.error(o):(this.signImg&&await this.saveProcessSignature(this.selectedProcess),this.saveOnly?this.saveOnly=!1:(""===s.review?this.$alert.info(this.selectedProcess.requestNo+" data saved, awaiting your action to submit"):s.review.toLowerCase().indexOf("reject")>-1?this.$alert.danger(this.selectedProcess.requestNo+" Request Rejected Successfully"):this.$alert.success(this.selectedProcess.requestNo+" Request Processed"),this.forwardUsers=[],this.forwardGroups=[],this.customReply=!1,this.userReply=!1,this.toRequester=!1,this.closeProcessSheet()),this.fileControlDeleteFile.length&&(this.fileControlDeleteFile.forEach(e=>{this.fileControlDeletedFile(e)}),this.fileControlDeleteFile=[]))},checkRequiredDocument(){if("Save"===this.saveAction||"Force Close"===this.saveAction)this.proceedSubmission();else{if(this.documentRequired&&0===this.attachmentList.length)return this.$alert.warning("A minimum of one document is required for submission"),this.saveAction="",void(this.workflowFormModel={});let e=this.checkList.filter(e=>e.required&&!e.attach);e.length?this.docWarning?this.alertModal=!0:(this.$alert.warning("Mandatory documents required"),this.saveAction="",this.workflowFormModel={}):this.proceedSubmission()}},proceedSubmission(){this.alertModal=!1,this.initiateProcess?this.initiateRequest():this.processRequest()},closeAlertModal(){this.alertModal=!1,this.saveAction="",this.workflowFormModel={}},getJiraIssueInfo(e){if(e.jiraIssueInfo.id)return{"Ref# Id":e.jiraIssueInfo.id,Key:e.jiraIssueInfo.key,Link:e.jiraIssueInfo.self?this.getJIRALink(e.jiraIssueInfo):"",Assignee:e.jiraIssueInfo.assignee,"Issue Status":e.jiraIssueInfo.issueStatus}},async groupProcessRequest(){let e=[],t="";this.workflowRequestList.forEach(t=>{t.key===this.groupActionKey&&t.checked&&e.push(t.transactionId)}),this.groupKey.forEach(s=>{if(s.checked)return e=[],void(t=s.name)});let s={workflowId:this.workflow.id,transactionId:e,review:"Save"===this.saveAction?"":this.saveAction,fields:this.workflowFormModel,mlPrediction:t,comments:this.commentText,userIds:this.forwardUsers,groupIds:this.forwardGroups,filterBy:this.filterBy};const{error:i}=await l["t"].groupRequestAction(s);this.$store.commit("hideLoadingBar"),i?this.$alert.error(i):(await this.insertJiraIssueComment(),this.saveAction="",this.workflowFormModel={},this.forwardUsers=[],this.forwardGroups=[],this.$alert.success("Group Request Processed"),this.closeRequestActionModal(),this.$emit("refresh",this.workflow.id))},async initiateRequest(){let e=[];this.attachmentList.length&&this.attachmentList.forEach(t=>{e.push(t.id)});let t=[];this.formFields.forEach(e=>{if("FILE_UPLOAD"===e.type&&this.workflowModel[e.value]){let s=[];this.workflowModel[e.value].forEach(e=>{e.fileId&&s.push(e.fileId)}),s.length&&t.push({jsonId:e.value,fileIds:s}),delete this.workflowFormModel[e.value]}});let s={workflowId:this.workflow.id,review:"Save"===this.saveAction?"":this.saveAction,comments:this.commentsList,formData:{formId:this.formId,fields:this.workflowFormModel,formUpload:t},fileIds:e,task:this.taskEntryId,hasFormPDF:this.generatePDF,prefix:this.requestPrefix,mlPrediction:this.mlPrediction};this.$store.commit("showLoadingBarSave");const{error:i,payload:a}=await l["t"].processTransaction(s);this.$store.commit("hideLoadingBarSave"),this.saveAction="",this.workflowFormModel={},this.alertModal=!1,i?this.$alert.error(i):(this.signImg&&await this.saveProcessSignature(a),this.$alert.success(a.requestNo+" Request Initiated"),this.mainProcessId?this.addSubWorkflowProcess(a.processId):this.$emit("update:subProcessId",a.processId),this.closeProcessSheet())},saveMetaData(e){let t=[];if(this.repositoryField.forEach(s=>{t.push({name:s.name,value:e[s.name],type:s.dataType})}),t.forEach(e=>{let t=this.formFields.find(t=>Object(P["a"])(t.label)===Object(P["a"])(e.name));t&&e.value&&(this.workflowModel[t.value]=e.value)}),this.fileUploadForControl){this.metaDataModal=e;let s=this.fileUploadInput;this.uploadFilesFromForm(s.files,s.control,s.fieldId,JSON.stringify(t))}else this.uploadAttachments(this.selectedUploadFile,JSON.stringify(t))},attachTemplate(e){this.checkListRowIndex=e,this.$refs.attachments.click()},attachmentFilterCheckList(e){return this.attachmentList.filter(t=>t.name.substring(0,t.name.lastIndexOf("."))===e||t.name.substring(0,t.name.lastIndexOf(".")).split("_")[0]===e)},isCheckList(e){let t=this.checkList.filter(t=>t.name===e.substring(0,e.lastIndexOf("."))||t.name===e.substring(0,e.lastIndexOf(".")).split("_")[0]);return!t.length},showMailAttachments(e){this.mailAttachmentList=[];let t=e.attachmentJson.split(",");t.forEach(t=>{let s=t.split("\\").pop();this.mailAttachmentList.push({id:this.$nano.id(),mailId:e.id,name:s,createdAt:e.createdAt})}),this.mailAttachmentSheet=!0},openAttachmentFile(e){let t=`https://appuat.ezofis.com/ezofisapi/api/client/viewAttachment/${this.$store.state.session.tenantId}/${e.mailId}/${e.name}`;window.open(t,"_blank")},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},async getTaskForm(){this.taskFormList=[],this.addTaskEnabled=!1;const{error:e,payload:t}=await l["g"].getForms({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"type",condition:"IS_EQUALS_TO",value:"Task",dataType:""}],groupCondition:""}],itemsPerPage:50,currentPage:1});if(e)return void this.$alert.error(e);const{data:s}=t;s.length&&s[0].value.length&&(this.addTaskEnabled=!0,s[0].value.forEach(e=>{this.taskFormList.push({id:e.id,label:e.name,value:e.id,repositoryId:e.repositoryId,formJson:e.formJson})}),this.taskFormList.length&&1===this.taskFormList.length&&(this.taskFormId=this.taskFormList[0].id,this.taskRepositoryId=this.taskFormList[0].repositoryId,this.addTaskForm=JSON.parse(this.taskFormList[0].formJson)))},async getTaskFormEntry(e,t){const{error:s,payload:i}=await l["g"].getFormEntry(e,t);if(s)this.$alert.error(s);else if(i.length){const e=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let t=[];for(const i of e)t.push(...i.fields);let s="",a="",o="",r="",n="",l="";t.forEach(e=>{switch(e.label){case"Task Name":s=i[0][e.id];break;case"Task Assign":a=i[0][e.id];break;case"Start Date":o=i[0][e.id];break;case"End Date":r=i[0][e.id];break;case"Priority":n=i[0][e.id];break;case"Task Status":l=i[0][e.id];break}}),this.taskEntries.push({id:i[0].itemid,name:s,assigned:a,startDate:o,endDate:r,priority:n,status:l})}},async getTaskList(){this.taskEntries=[];const{error:e,payload:t}=await l["t"].getTaskEntries(this.selectedWorkflow.id,this.selectedProcess.processId,{filterBy:[{filters:[{criteria:"createdBy",condition:"IS_EQUALS_TO",value:this.$store.state.session.id}]}]});if(e)this.$alert.error(e);else if(t.length){const e=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let s=[];for(const t of e)s.push(...t.fields);this.taskList=t,t.forEach(e=>{let t="",i="",a="",o="",r="",n="";s.forEach(s=>{switch(s.label){case"Task Name":t=e.entryInfo[0][s.id];break;case"Task Assign":i=e.entryInfo[0][s.id];break;case"Start Date":a=e.entryInfo[0][s.id];break;case"End Date":o=e.entryInfo[0][s.id];break;case"Priority":r=e.entryInfo[0][s.id];break;case"Task Status":n=e.entryInfo[0][s.id];break}}),this.taskEntries.push({id:e.entryInfo[0].itemid,name:t,assigned:i,startDate:a,endDate:o,priority:r,status:n})})}},async insertTaskEntry(e,t){const{error:s}=await l["t"].insertTaskEntry({workflowId:this.selectedWorkflow.id,processId:this.selectedProcess.processId,transactionId:this.selectedProcess.transactionId,wFormId:e,formEntryId:t});s?this.$alert.error(s):this.getTaskList()},addTaskEntry(e,t){this.selectedProcess.processId?this.insertTaskEntry(e,t):(this.taskEntryId.push({formId:e,formEntryId:t}),this.getTaskFormEntry(e,t))},addTask(){this.selectedTask={},this.taskMode="NEW",this.addTaskSheet=!0},viewTask(e){let t=this.taskList.filter(t=>t.formEntryId===e);t.length&&(this.selectedTask=t[0].entryInfo[0],this.selectedTask={id:t[0].formEntryId,...t[0].entryInfo[0]}),this.taskMode="EDIT",this.addTaskSheet=!0},removeTags(e){return e?e.replace(/(<([^>]+)>)/gi,""):""},tableValue(e){return e?JSON.parse(e):[]},async uploadFile(e){const t=e.target.files[0];if("text/csv"===t.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===t.type||"application/vnd.ms-excel"===t.type){const i=new FormData;i.append("formId",this.masterFormId),i.append("file",t);try{this.$store.commit("showLoadingBarSave");const e=await m()({url:"https://appuat.ezofis.com/ezofisapi/api/form/uploadMasterFile",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}});this.$store.commit("hideLoadingBarSave");const{status:t,data:s}=e;if(200!==t||!s)throw e;this.$alert.success("Data imported successfully")}catch(s){this.$alert.error("Error uploading file"),console.error(s)}this.dataImported=!0,e.target.value=""}else this.$alert.error("Please upload a csv/excel file")},async addSubWorkflowProcess(e){let t={mainWorkflowId:this.mainWorkflowId,subWorkflowId:this.workflowId,mainProcessId:this.mainProcessId,subProcessId:e,subProcessStatus:0,review:""};const{error:s}=await l["t"].addSubWorkflow(t);s?this.$alert.error(s):this.updateSubWorkflowProcess()},getModel(e){if(this.formModel={},this.itemModel={},console.log(this.selectedProcess.processId,e,this.selectedProcess.id,this.workflow.id),this.selectedProcess.processId==e&&this.selectedProcess.id==this.workflow.id)if(this.headerTitle=`${this.selectedProcess.requestNo} - ${this.selectedProcess.stageName}`,this.selectedProcess.formData){let e=Object.keys(this.selectedProcess.formData.fields),t={};e.forEach(e=>{t[e]=this.validateTypeValue(this.selectedProcess.formData.fields[e])}),this.formModel=t}else this.selectedProcess.itemData&&(this.itemModel=this.selectedProcess.itemData)},async dataValidation(e,t=!0){const{error:s,payload:i}=await l["d"].armgroupMLValidation({filterBy:[{filters:[{criteria:"processId",condition:"IS_EQUALS_TO",value:e}],groupCondition:""}],mode:"BROWSE"});s?this.$alert.error(s):i.length?(this.dataValidationValues=i,t&&(this.dataValidationModal=!0)):(this.dataValidationValues=[],t&&this.$alert.info("Data not found"))},async documentMerge(){let e=[];this.attachmentList.forEach(t=>{let s=t.name.split(".").pop();t.checked&&"pdf"===s.toLowerCase()&&e.push(t.id)});let t={ids:e};const{error:s}=await l["t"].documentMerge(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,this.workflow.repositoryId,t);s?this.$alert.error(s):this.$alert.success("Document merge process initiated")},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(e=>{e.checked&&this.selectedFileList.push({id:e.id,name:e.name})}),this.emailSharingSheet=!0},fileMenuAction(e,t){this.selectedFile=e,this.documentAction(t,!0)},fileSelectAll(){this.attachmentList=this.attachmentList.map(e=>({...e,checked:this.selectAll}))},documentAction(e,t){if("Email_Sharing"===e);else if("Print"===e){if(this.selectedFile.name)if(t){let e="";if(this.selectedFile.initiate){let t=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(t=2),e=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${t}/1`}else e=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(e,"_blank")}else{let e=this.selectedFile.name.split(".").pop();Object(h["d"])(e)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myAttachmentFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===e){let e="";if(this.selectedFile.initiate){let t=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(t=2),e=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${t}/2`}else e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(e,"_blank")}},async filePrintSession(){const{error:e}=await l["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});e&&this.$alert.error(e)},async updateSubWorkflowProcess(){const{error:e,payload:t}=await l["q"].updateSubWorkflowProcess(this.mainWorkflowId,this.$store.state.session.tenantId,this.workflowId);e?this.$alert.error(e):console.log(t)},async uploadFilesFromForm(e,t,s,i){this.formUploadFiles=[];const a=new FormData;let o=[];if(t&&t.length&&t.forEach(e=>{let t=this.formFields.find(t=>t.value===e);t&&o.push(`${t.label}, ${t.type}`)}),e.length){for(let t of e)if(t.name&&!t.error){a.append("repositoryId",this.workflow.repositoryId),a.append("file",t),a.append("filename",t.name),o.length&&a.append("formFields",JSON.stringify(o)),i?a.append("fields",i):a.append("fields","");try{const e=await m()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"},onUploadProgress:function(e){let i=Math.round(100*e.loaded/e.total),a=this.workflowModel[s].findIndex(e=>e.name===t.name);a>=0&&(this.$set(this.workflowModel[s][a],"uploadedPercentage",0),this.workflowModel[s][a].uploadedPercentage=i)}.bind(this)}),{status:i,data:o}=e;if(200!==i)throw"Invalid response";t.createdAt=this.$day.newDateTime(),t.createdBy=this.$store.state.session.email;let r=JSON.parse(o);t.fileId=r.fileId,t.fieldId=s}catch(r){console.error(r),this.$alert.error("error attaching file")}}let n=Array.from(e);this.formUploadFiles=[];for(let e of n)if(e.name){const t=await Object(L["a"])(e);this.formUploadFiles.push({name:e.name,size:e.size,file:t,fileId:e.fileId,createdBy:e.createdBy,createdAt:e.createdAt,workflowId:this.selectedProcess.id,processId:this.selectedProcess.processId,fieldId:e.fieldId})}t.forEach(e=>{let t=this.readonlyControls.findIndex(t=>t===e);t>=0&&this.readonlyControls.splice(t,1)}),this.$store.commit("hideLoadingBarSave")}},mandatoryControlsList(e){this.mandatory=e},deletedFiles(e){this.fileControlDeleteFile.push(e)},async fileControlDeletedFile(e){this.$store.commit("showLoadingBar");let t=[];e.forEach(e=>{e.id&&t.push(e.id)});let s={ids:t,formInfo:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,jsonId:e[0].jsonId}};const{error:i}=await l["p"].fileControlDeleteFile(this.workflow.repositoryId,s);this.$store.commit("hideLoadingBar"),i&&this.$alert.error(i)},async checkFormValidation(){this.hasCheckFormValidate=!0},async getOCRResult(e,t,s){const i=new FormData;let a=[];if(t&&t.length){if(t.forEach(e=>{this.readonlyControls.push(e)}),t.forEach(e=>{let t=this.formFields.find(t=>t.value===e);t&&a.push(`${t.label}, ${t.type}`)}),e.length){for(let t of e){if(t.name&&!t.error){i.append("repositoryId",this.workflow.repositoryId),i.append("file",t),a.length&&i.append("formFields",JSON.stringify(a));try{const e=await m()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/uploadforStaticMetadata",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"},onUploadProgress:function(e){let i=Math.round(100*e.loaded/e.total),a=this.workflowModel[s].findIndex(e=>e.name===t.name);a>=0&&(this.$set(this.workflowModel[s][a],"uploadedPercentage",0),100!==i&&(this.workflowModel[s][a].uploadedPercentage=i))}.bind(this)}),{status:a,data:o}=e;if(200!==a)throw"Invalid response";let r=Object(B["a"])(o,this.$store.state.identity.key,this.$store.state.identity.iv),n=JSON.parse(r),l=JSON.parse(n),c=JSON.parse(l);Array.isArray(c)&&c.forEach(e=>{let t=this.formFields.find(t=>t.label===e.name);t&&e.value&&(this.workflowModel[t.value]=e.value)})}catch(o){console.error(o),this.$alert.error("error on get ocr result")}}this.workflowModel[s].findIndex(e=>e.name===t.name)}this.$store.commit("hideLoadingBarSave"),this.uploadFileForControl(e,t,s)}}else this.uploadFileForControl(e,t,s)},async uploadFileForControl(e,t,s){if(this.fileUploadInput={files:e,control:t,fieldId:s},"STATIC"===this.repositoryDetails.fieldsType){if(this.fileUploadForControl=!1,this.customCheckUpload()){let e=this.formFields.find(e=>"Document No"===e.label);e&&(this.uploadFilename=this.workflowModel[e.value]+".pdf")}this.fileUploadForControl=!0,this.showMetaDataEditModal=!0}else this.uploadFilesFromForm(e,t,s)},async showHistoryStepper(e,t){console.log("called");const{error:s,payload:i}=await l["t"].processHistory(t,e);s?this.$alert.error(s):i.length&&(this.stageLevel=[],this.currentStep=0,i.forEach(e=>{if(2!==e.actionStatus)if(0===this.stageLevel.filter(t=>t.id===e.activityId).length)this.stageLevel.push({id:e.activityId,label:e.stage,status:e.status}),((e.actionUser||e.subWorkflowHistory)&&e.status&&"Forward"!==e.status||null===e.actionUser&&!e.subWorkflowHistory)&&(this.currentStep+=1);else if(e.status)this.stageLevel.filter(t=>t.id===e.activityId&&t.status!==e.status).length?this.currentStep+=1:this.currentStep-=1;else{let t=this.stageLevel.findIndex(t=>t.id===e.activityId);t>-1&&(this.stageLevel.splice(t,this.stageLevel.length-t),this.stageLevel.push({id:e.activityId,label:e.stage,status:e.status}),e.actionUser&&e.status&&"Forward"!==e.status||null===e.actionUser?this.currentStep=t+1:this.currentStep=t)}}))},attachmentCount(e){this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=e)})},commentsCount(e){this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=e)})}}},E=O,V=(s("e98d"),s("5ab0"),s("2877")),R=s("58ea"),z=s("4e73"),j=s("b047"),H=s("cb32"),U=s("8169"),W=s("93dc"),J=s.n(W),G=Object(V["a"])(E,i,a,!1,null,"5b96b9ec",null);t["a"]=G.exports;J()(G,"components",{QCircularProgress:R["a"],QMenu:z["a"],QChip:j["a"],QAvatar:H["a"],QChatMessage:U["a"]})},4714:function(e,t,s){},4759:function(e,t,s){},"487e":function(e,t,s){"use strict";s("0b2c")},4904:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return e.showChips?t("div",{attrs:{id:"item-action-chips"}},[e.sortBy.criteria?t("div",{staticClass:"chip sort-by"},[t("div",{staticClass:"label"},[e._v("Sort by: "+e._s(e.getColumnLabel(e.sortBy.criteria)))]),t("BaseIcon",{staticClass:"q-mr-md",attrs:{name:"ASC"===e.sortBy.order?"mdi-sort-ascending":"mdi-sort-descending","inherit-color":""}}),t("BaseIcon",{staticClass:"cursor-pointer",attrs:{name:"mdi-close-circle","inherit-color":""},on:{click:e.clearSortBy}})],1):e._e(),e.groupBy?t("div",{staticClass:"chip group-by"},[t("div",{staticClass:"label"},[e._v("Group by: "+e._s(e.getColumnLabel(e.groupBy)))]),t("BaseIcon",{staticClass:"cursor-pointer",attrs:{name:"mdi-close-circle","inherit-color":""},on:{click:e.clearGroupBy}})],1):e._e(),e.contentSearch.contentSearchValue?t("div",{staticClass:"chip filter-by"},[t("div",{staticClass:"label"},[t("BaseIcon",{staticClass:"q-mr-xs",attrs:{name:"eva-funnel-outline","inherit-color":""}}),e._v(" SearchBy: "+e._s(e.contentSearch.contentSearchValue)+" ")],1),t("BaseIcon",{staticClass:"cursor-pointer",attrs:{name:"mdi-close-circle","inherit-color":""},on:{click:function(t){return e.$emit("clearContentSearch")}}})],1):e._e(),t("BaseScrollbar",[e.filterBy.length?t("div",{staticClass:"q-mb-md",staticStyle:{display:"flex"}},e._l(e.filterBy,(function(s,i){return t("div",{key:i,staticClass:"col-auto"},[s.filters.length?t("div",{class:{"filterBy-length":e.filterBy.length>1}},e._l(s.filters,(function(s,a){return t("div",{key:a,staticClass:"chip filter-by"},[t("div",{staticClass:"label"},[t("BaseIcon",{staticClass:"q-mr-xs",attrs:{name:"eva-funnel-outline","inherit-color":""}}),e._v(" "+e._s(e.getColumnLabel(s.criteria))+" "+e._s(s.condition)+" "+e._s(s.value)+" ")],1),t("BaseIcon",{staticClass:"cursor-pointer",attrs:{name:"mdi-close-circle","inherit-color":""},on:{click:function(t){return e.clearFilterBy(i,a)}}})],1)})),0):e._e()])})),0):e._e()])],1):e._e()},a=[],o={name:"ItemActionChips",props:{columns:{type:Array,required:!0},sortBy:{type:Object,required:!0},groupBy:{type:String,required:!0},filterBy:{type:Array,required:!0},contentSearch:{type:Object,default:()=>({contentSearchValue:"",fuzzy:0,searchType:1})},simpleSearchApplyed:{type:Boolean,required:!1,default:!1}},computed:{showChips(){return!!this.sortBy.criteria||(!!this.groupBy||!this.simpleSearchApplyed&&(!!this.filterBy.length||!!this.contentSearch.contentSearchValue))}},methods:{getColumnLabel(e){var t;return null===(t=this.columns.find(t=>t.name===e))||void 0===t?void 0:t.label},clearSortBy(){this.$emit("clearSortBy")},clearGroupBy(){this.$emit("clearGroupBy")},clearFilterBy(e,t){this.$emit("clearFilterBy",e,t)}}},r=o,n=(s("c3ca"),s("2877")),l=Object(n["a"])(r,i,a,!1,null,"1d4f94d9",null);t["a"]=l.exports},"4d38":function(e,t,s){},"4d5a":function(e,t,s){"use strict";var i=s("a026"),a=s("0967"),o=s("0831"),r=s("d882");const{passive:n}=r["f"];var l=i["default"].extend({name:"QScrollObserver",props:{debounce:[String,Number],horizontal:Boolean,scrollTarget:{default:void 0}},render:r["g"],data(){return{pos:0,dir:!0===this.horizontal?"right":"down",dirChanged:!1,dirChangePos:0}},watch:{scrollTarget(){this.__unconfigureScrollTarget(),this.__configureScrollTarget()},"$q.lang.rtl"(){this.__emit()}},methods:{getPosition(){return{position:this.pos,direction:this.dir,directionChanged:this.dirChanged,inflexionPosition:this.dirChangePos}},trigger(e){if(!0===e||0===this.debounce||"0"===this.debounce)this.__emit();else if(void 0===this.clearTimer){const[e,t]=this.debounce?[setTimeout(this.__emit,this.debounce),clearTimeout]:[requestAnimationFrame(this.__emit),cancelAnimationFrame];this.clearTimer=()=>{t(e),this.clearTimer=void 0}}},__emit(){void 0!==this.clearTimer&&this.clearTimer();const e=!0===this.horizontal?o["a"]:o["b"],t=Math.max(0,e(this.__scrollTarget)),s=t-this.pos,i=!0===this.horizontal?s<0?"left":"right":s<0?"up":"down";this.dirChanged=this.dir!==i,this.dirChanged&&(this.dir=i,this.dirChangePos=this.pos),this.pos=t,this.$emit("scroll",this.getPosition())},__configureScrollTarget(){this.__scrollTarget=Object(o["c"])(this.$el.parentNode,this.scrollTarget),this.__scrollTarget.addEventListener("scroll",this.trigger,n),this.trigger(!0)},__unconfigureScrollTarget(){void 0!==this.__scrollTarget&&(this.__scrollTarget.removeEventListener("scroll",this.trigger,n),this.__scrollTarget=void 0)}},mounted(){this.__configureScrollTarget()},beforeDestroy(){void 0!==this.clearTimer&&this.clearTimer(),this.__unconfigureScrollTarget()}}),c=s("3980"),d=s("87e8"),u=s("e277"),m=s("d54d");t["a"]=i["default"].extend({name:"QLayout",mixins:[d["a"]],provide(){return{layout:this}},props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())}},data(){return{height:this.$q.screen.height,width:!0===this.container?0:this.$q.screen.width,containerHeight:0,scrollbarWidth:!0===a["f"]?0:Object(o["d"])(),header:{size:0,offset:0,space:!1},right:{size:300,offset:0,space:!1},footer:{size:0,offset:0,space:!1},left:{size:300,offset:0,space:!1},scroll:{position:0,direction:"down"}}},computed:{rows(){const e=this.view.toLowerCase().split(" ");return{top:e[0].split(""),middle:e[1].split(""),bottom:e[2].split("")}},style(){return!0===this.container?null:{minHeight:this.$q.screen.height+"px"}},targetStyle(){if(0!==this.scrollbarWidth)return{[!0===this.$q.lang.rtl?"left":"right"]:this.scrollbarWidth+"px"}},targetChildStyle(){if(0!==this.scrollbarWidth)return{[!0===this.$q.lang.rtl?"right":"left"]:0,[!0===this.$q.lang.rtl?"left":"right"]:`-${this.scrollbarWidth}px`,width:`calc(100% + ${this.scrollbarWidth}px)`}},totalWidth(){return this.width+this.scrollbarWidth},classes(){return"q-layout q-layout--"+(!0===this.container?"containerized":"standard")},scrollbarEvtAction(){return!0!==this.container&&this.scrollbarWidth>0?"add":"remove"}},watch:{scrollbarEvtAction:"__updateScrollEvent"},created(){this.instances={}},mounted(){"add"===this.scrollbarEvtAction&&this.__updateScrollEvent("add")},beforeDestroy(){"add"===this.scrollbarEvtAction&&this.__updateScrollEvent("remove")},render(e){const t=e("div",{class:this.classes,style:this.style,attrs:{tabindex:-1},on:{...this.qListeners}},Object(u["a"])([e(l,{on:Object(m["b"])(this,"scroll",{scroll:this.__onPageScroll})}),e(c["a"],{on:Object(m["b"])(this,"resizeOut",{resize:this.__onPageResize})})],this,"default"));return!0===this.container?e("div",{staticClass:"q-layout-container overflow-hidden"},[e(c["a"],{on:Object(m["b"])(this,"resizeIn",{resize:this.__onContainerResize})}),e("div",{staticClass:"absolute-full",style:this.targetStyle},[e("div",{staticClass:"scroll",style:this.targetChildStyle},[t])])]):t},methods:{__animate(){void 0!==this.timer?clearTimeout(this.timer):document.body.classList.add("q-body--layout-animate"),this.timer=setTimeout(()=>{document.body.classList.remove("q-body--layout-animate"),this.timer=void 0},150)},__onPageScroll(e){!0!==this.container&&!0===document.qScrollPrevented||(this.scroll=e),void 0!==this.qListeners.scroll&&this.$emit("scroll",e)},__onPageResize({height:e,width:t}){let s=!1;this.height!==e&&(s=!0,this.height=e,void 0!==this.qListeners["scroll-height"]&&this.$emit("scroll-height",e),this.__updateScrollbarWidth()),this.width!==t&&(s=!0,this.width=t),!0===s&&void 0!==this.qListeners.resize&&this.$emit("resize",{height:e,width:t})},__onContainerResize({height:e}){this.containerHeight!==e&&(this.containerHeight=e,this.__updateScrollbarWidth())},__updateScrollbarWidth(){if(!0===this.container){const e=this.height>this.containerHeight?Object(o["d"])():0;this.scrollbarWidth!==e&&(this.scrollbarWidth=e)}},__updateScrollEvent(e){void 0!==this.timerScrollbar&&"remove"===e&&(clearTimeout(this.timerScrollbar),this.__restoreScrollbar()),window[e+"EventListener"]("resize",this.__hideScrollbar)},__hideScrollbar(){if(void 0===this.timerScrollbar){const e=document.body;if(e.scrollHeight>this.$q.screen.height)return;e.classList.add("hide-scrollbar")}else clearTimeout(this.timerScrollbar);this.timerScrollbar=setTimeout(this.__restoreScrollbar,200)},__restoreScrollbar(){this.timerScrollbar=void 0,document.body.classList.remove("hide-scrollbar")}}})},"4ddc":function(e,t,s){},"4e64":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{style:e._style,attrs:{id:"pulse"}})},a=[],o=s("b263"),r={name:"Pulse",props:{color:{type:String,default:"secondary",validator:o["a"]}},computed:{_style(){return`background-color: var(--${this.color}); color: var(--${this.color})`}}},n=r,l=(s("e953"),s("2877")),c=Object(l["a"])(n,i,a,!1,null,"123d286d",null);t["a"]=c.exports},"4f21":function(e,t,s){},5005:function(e,t,s){},5042:function(e,t,s){},"50ff":function(e,t,s){},5132:function(e,t,s){"use strict";var i=s("2250"),a=s("4dc8");function o(e,t){t=Object(i["a"])(t,e);var s=0,o=t.length;while(null!=e&&s<o)e=e[Object(a["a"])(t[s++])];return s&&s==o?e:void 0}t["a"]=o},5194:function(e,t,s){"use strict";s("c3a3")},"52e1":function(e,t,s){"use strict";s("73e7")},"53ed":function(e,t,s){e.exports=s.p+"img/users-dark.96314a57.png"},"53f6":function(e,t,s){e.exports=s.p+"img/users-light.bbcd693c.png"},5439:function(e,t,s){"use strict";s("7f31")},"55ff":function(e,t,s){"use strict";s("9db8")},5960:function(e,t,s){"use strict";s("9a8d")},"5a6e":function(e,t,s){"use strict";(function(e){s("14d9"),s("caad");var i=s("4e64"),a=s("381e"),o=s("1b0d"),r=s("4bc4"),n=s("eff0"),l=s("dd90"),c=s("a7d2"),d=s("6a70"),u=s("bc3a"),m=s.n(u),h=s("1c54"),p=s("695e"),f=s("8bc3"),v=s("869e"),y=s("6df3"),b=s("9234"),g=s("fa1f"),w=s("cade"),C=s("be3f"),k=s("8505"),S=s("470f"),_=s("b0ba"),I=s("ec15"),x=s("bb36");t["a"]={name:"Notifications",components:{Pulse:i["a"],Sheet:a["a"],RenderForm:r["a"],SignatureField:n["a"],Modal:d["a"],Confirm:h["a"],TextBuilderField:p["a"],PasswordField:f["a"],CheckboxField:v["a"],TextAreaField:y["a"],SingleChoiceField:b["a"],FileIcon:g["a"],ListItem:w["a"],ExpandableSearch:C["a"],ProcessHistory:k["a"],SubWorkflowProcess:S["a"],FormEntryHistory:_["a"],Attachments:I["a"],Comments:x["a"]},data(){return{notificationSheet:!1,notifyData:[],notifyCopyData:[],iconColor:"secondary",workflowId:0,processId:0,workflow:{},workflowRequestList:[],formId:"",form:null,formFields:[],formModel:{},formEditAccess:!1,formEditControls:[],formVisibilityAccess:!0,formSecureControls:[],workflowFormModel:{},saveAction:"",attachmentList:[],attachmentSheet:!1,commentText:"",commentsList:[],commentsSheet:!1,selectedProcess:{},selectedFile:{},fileSheet:!1,checkList:[],rowIndex:null,hideFileSheet:!1,processSheet:!1,totalItems:0,itemsPerPage:10,currentPage:1,title:"NO DATA",tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0},{id:this.$nano.id(),label:"task",value:"TASK",icon:"eva-cube-outline",count:0},{id:this.$nano.id(),label:"Data Validation",value:"VALIDATION",icon:"mdi-file-compare",count:0},{id:this.$nano.id(),label:"Sub Process",value:"SUB_PROCESS",icon:"eva-link-2-outline",count:0},{id:this.$nano.id(),label:"Form Entry History",value:"FORM_ENTRY_HISTORY",icon:"mdi-file-document",count:0}],taskSheet:!1,headerTitle:"",taskFormId:0,taskRepositoryId:0,addTaskForm:{},addTaskSheet:!1,taskEntryId:[],taskEntries:[],taskEntryList:[],taskMode:"",filterBy:[],processActions:[],processActionsAddOn:[],advancedCommentsSheet:!1,commentActions:[{id:this.$nano.id(),label:"Internal",value:2},{id:this.$nano.id(),label:"Public",value:1}],commentAction:2,advancedCommentText:"",actionText:"",actionRemarks:!1,actionPassword:!1,actionPasswordConfirm:!1,actionUserPassword:"",isLoading:!1,internalForward:{proceed:!1,users:[],groups:[]},userSignature:!1,signImg:"",signList:[],actions:[],itemModel:{},checkListRowIndex:null,selectAll:!1,processForwardGroupAction:!1,processForwardModal:!1,forwardUsers:[],forwardGroups:[],errorMessage:"",alertModal:!1,errorModal:!1,documentActionList:[{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline"},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline"}],addTaskEnabled:!1,notifyLoad:null,alertNotification:!1,historyProcessId:0,hasWflowInitiator:!1,subWorkflowId:0,initiateSubWorkflowProcess:!1,subProcessSheet:!1,subProcessData:{},subTabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0}],subProcessLink:"",openSubProcessSheet:!1,subProcessTickets:[],subProcessId:0,workflowList:[],showFormEntryHistoryModal:!1,showAttachmentSheet:!1,wform:{},showCommentsSheet:!1}},computed:{panels(){return this.form?this.form.panels:[]},secondaryPanels(){return this.form?this.form.secondaryPanels:[]},formSettings(){return this.form?this.form.settings:{}},checkListTemplate(){return!!this.checkList.length&&this.checkList.filter(e=>e.template).length>0},selectedFileCount(){let e=this.attachmentList.filter(e=>e.checked).length;return e},_enableControls(){let e=[],t=[];return this.panels.forEach(s=>{if(s.fields.length){let i=s.fields.filter(e=>"SINGLE_SELECT"===e.type||"SINGLE_CHOICE"===e.type||"MULTIPLE_CHOICE"===e.type||"MULTI_SELECT"===e.type);i.length&&i.forEach(s=>{if(s.settings.validation.enableSettings&&s.settings.validation.enableSettings.length){let i=[];s.settings.validation.enableSettings.forEach(e=>{e.controls.length&&(i.push({value:e.value,childControls:e.controls}),e.controls.forEach(e=>{i.indexOf(e)<0&&t.push(e)}))}),i.length&&e.push({id:s.id,parentControls:i})}})}}),{listControls:t,controls:e}}},watch:{selectedProcess:{immediate:!0,handler(){this.selectedProcess.processId&&(this.attachmentList=[],this.getComments(),this.getAttachments(),this.getProcessSignature())}},workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&this.checkRequiredDocument()}},subWorkflowId(){if(this.subWorkflowId){let e=this.workflowList.find(e=>e.value==this.subWorkflowId);if(e){this.subWorkflowName="Initiate - "+e.label,this.hasWflowInitiator=!1;let t=e.flowJson,s=t.blocks.find(e=>"START"===e.type);if(s&&"MANUAL"===s.settings.initiateMode&&"DOCUMENT"!==e.initiatedBy&&((s.settings.users.indexOf(this.$store.state.session.id)>-1||s.settings.users.indexOf("0")>-1)&&(this.hasWflowInitiator=!0),s.settings.initiateBy.indexOf("DOMAIN_USER")>-1)){let e=this.$store.state.session.email.split("@").pop();s.settings.userDomains.indexOf(e)>-1&&(this.hasWflowInitiator=!0)}}else this.hasWflowInitiator=!1}}},created(){this.getNotifications();let e=location.origin;e.indexOf("http://localhost")>0&&(this.notifyLoad=setInterval(()=>{this.getNotifications(!0)},3e4))},methods:{checkTenant(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e||(this.commentAction=2,!1)},isTenantArmgroup(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e},checkTabAccess(e){return"TASK"===e?this.addTaskEnabled:"VALIDATION"===e?!!this.isTenantArmgroup():"FORM_ENTRY_HISTORY"!==e||!!this.formId},duration(e){const t=e instanceof Date?e:new Date(e),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},validateURL(e){let t=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;return t.test(e)},validateTypeValue(e){if(e)try{var t=JSON.parse(e);if("object"===typeof t)return t}catch(s){return e}return e},closeAttachmentsSheet(){this.attachmentSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},fileSize(e){return Object(c["a"])(e)},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();return this.selectedFile.initiate?Object(l["d"])(t)?"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:"https://trial.ezofis.com"===e?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:"https://app.ezofis.com"===e?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:"http://52.172.32.88"===e?`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/1`:Object(l["d"])(t)?"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}`:"https://trial.ezofis.com"!==e||Object(l["c"])(t)?"https://app.ezofis.com"===e?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}&action=download,print`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}&action=download,print`:`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}&action=download,print`:Object(l["b"])(t)||"http://52.172.32.88"!==e?`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`:`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2`}},fileSelectAll(){this.attachmentList=this.attachmentList.map(e=>({...e,checked:this.selectAll}))},openFile(e){this.selectedFile=e;let t=location.origin;"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?window.open(this.fileLink()):this.fileSheet=!0},download(e){window.open(`https://appuat.ezofis.com/ezofisapi/api/workflow/viewChecklist?wId=${this.workflowId}&id=${e}`)},downloadAll(){this.checkList.forEach(e=>{e.id&&e.template&&window.open(`https://appuat.ezofis.com/ezofisapi/api/workflow/viewChecklist?wId=${this.workflowId}&id=${e.id}`)})},attachTemplate(e){this.rowIndex=e,this.$refs.attachments.click()},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},checkDocument(){this.docWarning=!1,this.trackRequest||this.checkList.length&&this.checkList.forEach(e=>{e.required&&!e.attach&&(this.docWarning=!0)})},closeTaskSheet(){this.taskSheet=!1},closeProcessSheet(){this.processSheet=!1},openForm(e){if("WORKFLOW"===e.category){let t=JSON.parse(e.inputJson);this.workflowId=Number(t.workflowId),this.processId=Number(t.processId),this.filterBy=[{id:this.$nano.id(),filters:[{id:this.$nano.id(),criteria:"requestNo",condition:"IS_EQUALS_TO",value:e.title.split(": ")[1]}]}],this.getSubWorkflow(),this.getWorkflowData()}else"TASK"===e.category&&console.log(e)},openNotification(){this.alertNotification=!1,this.notifyLoad=setInterval(()=>{this.getNotifications(!0)},3e4),this.clearAllNotifications(2),this.getUserWorkflow(),this.notificationSheet=!0},getColor(e){return"Closed"===e||"High"===e?"red":"In Progress"===e||"Medium"===e?"warning":"Open"===e||"Low"===e?"secondary":"primary"},getLabel(e){let t="";return this.form&&this.form.panels.forEach(s=>{if(!s.fields.length)return;let i=s.fields.find(t=>t.id===e);i&&(t=i.label?i.label:i.type)}),t},async getNotifications(e=!1){let t={filterBy:[{filters:[{criteria:"createdBy",condition:"IS_EQUALS_TO",value:this.$store.state.session.id}]}],mode:"Browse"};e||this.$store.commit("showLoadingBar");const{error:s,payload:i}=await o["b"].getNotifications(t);if(e||this.$store.commit("hideLoadingBar"),s)return void this.$alert.error(s);let a=i.filter(e=>!1===e.readStatus);a.length&&(this.alertNotification=!0,clearInterval(this.notifyLoad)),this.notifyData=i,this.notifyCopyData=i},async clearAllNotifications(e=1){let t=this.$store.state.session.id;const{error:s}=await o["b"].clearAllNotifications(t,e);s?this.$alert.error(s):this.getNotifications()},async deleteNotification(e){let t={isDeleted:!0};const{error:s}=await o["b"].deleteNotification(e,t);s?this.$alert.error(s):this.getNotifications()},async getTaskForm(){this.taskFormList=[],this.addTaskEnabled=!1;const{error:e,payload:t}=await o["g"].getForms({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"type",condition:"IS_EQUALS_TO",value:"Task",dataType:""}],groupCondition:""}],itemsPerPage:50,currentPage:1});if(e)return void this.$alert.error(e);const{data:s}=t;s.length&&s[0].value.length&&(this.addTaskEnabled=!0,s[0].value.forEach(e=>{this.taskFormList.push({id:e.id,label:e.name,value:e.id,repositoryId:e.repositoryId,formJson:e.formJson})}),this.taskFormList.length&&1===this.taskFormList.length&&(this.taskFormId=this.taskFormList[0].id,this.taskRepositoryId=this.taskFormList[0].repositoryId,this.addTaskForm=JSON.parse(this.taskFormList[0].formJson)))},async getWorkflow(){this.checkList=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await o["t"].getWorkflow(this.workflowId);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):(this.workflow=t,this.workflow.wFormId&&(this.formId=String(this.workflow.wFormId),await this.getForm()),this.getTaskForm())},async getWorkflowData(){this.$store.commit("showLoadingBar"),this.workflowRequestList=[],this.list=[];const{error:e,payload:t}=await o["o"].getWorkflowData(this.workflowId,{filterBy:this.filterBy,itemsPerPage:10,currentPage:1,mode:""});this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t.data.length&&(this.selectedProcess=t.data[0].value[0],await this.getWorkflow(),this.openProcess())},async getForm(){if(this.formFields=[],this.formId){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await o["g"].getForm(this.formId);if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);let s=JSON.parse(t.formJson);this.wform=t,this.form=s;const i=[...s.panels,...s.secondaryPanels];if("CARD"===this.form.settings.general.layout&&(this.form.settings.general.layout="TAB"),!i.length)return;let a=[];for(const o of i)a.push(...o.fields);a.forEach(e=>{this.formFields.push({id:this.$nano.id(),label:e.label,value:e.id,dataType:"DATE"===e.type?e.type:"SHORT_TEXT"})})}},async openProcess(){if(this.formModel={},this.itemModel={},this.formEditAccess=!0,this.formEditControls=[],this.processActions=[],this.processActionsAddOn=[],this.headerTitle=`${this.selectedProcess.requestNo} - ${this.selectedProcess.stage}`,this.selectedProcess.formData){let e=Object.keys(this.selectedProcess.formData.fields),t={};e.forEach(e=>{t[e]=this.validateTypeValue(this.selectedProcess.formData.fields[e])}),this.formModel=t}else this.selectedProcessrocess.itemData&&(this.itemModel=e.itemData);if(this.selectedProcess.activityUserEmail===this.$store.state.session.email){let e=JSON.parse(this.workflow.flowJson);e.rules.forEach(e=>{e.fromBlockId===this.selectedProcess.activityId&&this.processActions.indexOf(e.proceedAction)<0&&(this.processActions.push(e.proceedAction),this.processActionsAddOn.push({action:e.proceedAction,remarks:e.remarks||!1,passwordAccess:e.passwordAccess||!1}))}),this.internalForward={proceed:!1,users:[],groups:[]},this.userSignature=!1,e.blocks.forEach(t=>{if(t.id===this.selectedProcess.activityId){if(t.settings.internalForward&&(this.processActions.push("Forward"),this.internalForward.proceed=!0,this.internalForward.users=[],this.internalForward.groups=[]),""===t.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===t.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===t.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=t.settings.formEditControls),t.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=t.settings.formSecureControls),e.settings.general.processNumberPrefix.indexOf("[")>-1){let t=JSON.parse(e.settings.general.processNumberPrefix);this.readonlyControls=[];let s=t.filter(e=>"formColumn"===e.key);s.length&&s.forEach(e=>{this.readonlyControls.push(e.value),this.formEditControls.indexOf(e.value)>-1&&this.formEditControls.splice(this.formEditControls.indexOf(e.value),1)})}this.userSignature=t.settings.userSignature,t.settings.fileSettings&&t.settings.fileSettings.fileCheckList.length&&(this.checkList=t.settings.fileSettings.fileCheckList,this.checkList.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1})),t.settings.workflowInitiator&&(this.subWorkflowId=t.settings.subWorkflowId)}}),this.selectedProcess.userType&&"SUPERUSER"===this.selectedProcess.userType&&this.processActions.push("Force Close")}"CARD"===this.form.settings.general.layout&&(this.form.settings.general.layout="TAB"),this.actions=this.processActions,this.processSheet=!0,this.getTaskList()},validateRequest(e){this.saveAction=e,this.itemModel.itemId&&this.processRequest()},checkRequiredDocument(){if("Save"===this.saveAction||"Force Close"===this.saveAction)this.proceedSubmission();else{let e=this.checkList.filter(e=>e.required&&!e.attach);e.length?this.docWarning?this.alertModal=!0:(this.$alert.warning("Mandatory documents required"),this.saveAction="",this.workflowFormModel={}):this.proceedSubmission()}},proceedSubmission(){this.alertModal=!1,this.processRequest()},closeAlertModal(){this.alertModal=!1,this.saveAction="",this.workflowFormModel={}},async processRequest(e=!0,t=!0){if(e&&"Forward"===this.saveAction&&this.internalForward.proceed)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0);if(t){let e=this.processActionsAddOn.find(e=>e.action===this.saveAction);if(Object.keys(e).length){if(this.actionRemarks=e.remarks,this.actionPassword=e.passwordAccess,this.actionPassword)return void(this.actionPasswordConfirm=!0);if(this.actionRemarks)return this.actionComments=!0,void(this.advancedCommentsSheet=!0)}}let s={};this.formId?s={workflowId:this.workflowId,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction?"":this.saveAction,formData:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,fields:this.workflowFormModel},userIds:this.forwardUsers,groupIds:this.forwardGroups}:this.itemModel&&(s={workflowId:this.workflowId,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction?"":this.saveAction,formData:{},userIds:this.forwardUsers,groupIds:this.forwardGroups}),this.saveAction="",this.workflowFormModel={},this.$store.commit("showLoadingBarSave");const{error:i}=await o["t"].processTransaction(s);this.$store.commit("hideLoadingBarSave"),i?this.$alert.error(i):(this.signImg&&await this.saveProcessSignature(this.selectedProcess),""===s.review?this.$alert.info(this.selectedProcess.requestNo+" data saved, awaiting your action to submit"):s.review.toLowerCase().indexOf("reject")>-1?this.$alert.danger(this.selectedProcess.requestNo+" Request Rejected Successfully"):this.$alert.success(this.selectedProcess.requestNo+" Request Processed"),this.forwardUsers=[],this.forwardGroups=[],this.closeProcessSheet(),this.$emit("refresh",this.workflowId))},showLinks(e){"ATTACHMENTS"===e?this.showAttachmentSheet=!0:"COMMENTS"===e?this.showCommentsSheet=!0:"HISTORY"===e&&this.selectedProcess.processId?this.historyProcessId=this.selectedProcess.processId:"PRINT"===e?this.selectedProcess.formData?window.open(`https://appuat.ezofis.com/ezofisapi/api/form/generatePdfPrint/${this.$store.state.session.tenantId}/${this.workflowId}/${this.selectedProcess.processId}/${this.formId}/${this.selectedProcess.formData.formEntryId}/1`):this.selectedProcess.itemData&&window.open(`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedProcess.itemData.repositoryId}/${this.selectedProcess.itemData.itemId}/2`):"TASK"===e?this.taskEntries.length?this.taskSheet=!0:this.$alert.info("Task not found"):"SUB_PROCESS"===e?this.subProcessSheet=!0:"FORM_ENTRY_HISTORY"===e&&(this.showFormEntryHistoryModal=!0)},searchRow(e){this.notifyData=e?this.notifyCopyData.filter(t=>{for(let s in t)if(String(t[s]).toLowerCase().includes(e.toLowerCase()))return t}):this.notifyCopyData},attachmentCount(e){this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=e)})},commentsCount(e){this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=e)})},async getComments(){this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=0)}),this.commentsList=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await o["t"].getProcessComments(this.workflowId,this.selectedProcess.processId);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t.length&&(this.commentsList=t,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}))},async saveComment(){if(this.commentText)if(this.selectedProcess.processId){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await o["t"].insertProcessComment(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:this.commentAction});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,t),this.commentText="",this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}),this.commentText=""},async saveAdvancedComment(){if(this.advancedCommentText){if(this.selectedProcess.processId){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await o["t"].insertProcessComment(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:this.commentAction});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t),this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}),this.advancedCommentText="",this.advancedCommentsSheet=!1;this.actionComments&&this.processRequest(!1,!1)}},async sendCommentsToJira(e,t,s){this.$store.commit("showLoadingBar");let i={cloudIntegrationId:this.jiraAccounts[0].id,url:this.selectedProcess.jiraIssueInfo.self,data_onpremise:{body:e},issueId:t,ezCommentId:s};const{error:a,payload:r}=await o["j"].insertJiraIssueComments(i);if(this.$store.commit("hideLoadingBar"),a){this.$alert.error("error posting comments to jira");let e=JSON.parse(a);return this.errorMessage=e.errorMessages,void(this.errorModal=!0)}console.log(r)},async uploadAttachments(e){if(this.selectedProcess.processId){const s=e.target.files[0],i=new FormData;i.append("workflowId",this.workflowId),i.append("repositoryId",this.workflow.repositoryId),i.append("processId",this.selectedProcess.processId),i.append("transactionId",this.selectedProcess.transactionId),i.append("fields",""),i.append("file",s);let a=e.target.files[0].name;const o=a.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);i.append("filename",e[0].name+"."+o),a=e[0].name+"."+o}if(!Object(l["a"])(o))return void this.$alert.info("This file format is not supported");this.$store.commit("showLoadingBar");try{const e=await m()({url:"https://appuat.ezofis.com/ezofisapi/api/workflow/attachmentWithProcessId",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:t,data:s}=e;if(200!==t||!s)throw e;this.$alert.success("Document attached")}catch(t){this.$alert.error("Error uploading file"),console.error(t)}this.$store.commit("hideLoadingBar"),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value="",this.attachmentLoad=setInterval(()=>this.getAttachments(),5e3)}else{const s=e.target.files[0],i=new FormData;i.append("file",s),i.append("repositoryId",this.workflow.repositoryId);let a=e.target.files[0].name;const o=a.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);i.append("filename",e[0].name+"."+o),a=e[0].name+"."+o}if(!Object(l["a"])(o))return void this.$alert.info("This file format is not supported");try{const t=await m()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:o,data:r}=t;if(200!==o)throw"Invalid response";let n=JSON.parse(r);this.attachmentList.push({id:Number(n.fileId),name:a,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:s.size,initiate:!0,uid:this.checkListRowIndex}),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)}),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value=""}catch(t){console.error(t),this.$alert.error("error attaching file")}}},async getAttachments(){if(this.checkList=[],this.selectedProcess.processId){let e=JSON.parse(this.workflow.flowJson),t=e.blocks.find(e=>e.id===this.selectedProcess.activityId);t&&t.settings.fileSettings&&t.settings.fileSettings.fileCheckList.length&&(this.checkList=t.settings.fileSettings.fileCheckList,this.checkList.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1}),this.checkDocument()),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=0)});let s=this.attachmentList.length;this.$store.commit("showLoadingBar");const{error:i,payload:a}=await o["t"].getAttachments(this.workflowId,this.selectedProcess.processId);if(this.$store.commit("hideLoadingBar"),i)return void this.$alert.error(i);a.length?(s!==a.length&&(this.attachmentList=a.map(e=>({...e,checked:!1}))),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)})):this.attachmentList=[],this.checkList.length&&this.checkList.forEach(e=>{let t=this.attachmentList.filter(t=>{let s=t.name.substr(0,t.name.lastIndexOf("."));if(e.name===s)return t});t.length?e.attach=!0:e.attach=!1})}},async saveProcessSignature(e){let t={signBinary:this.signImg.split(",")[1],fileType:"png"};const{error:s}=await o["t"].saveProcessSignature(this.workflowId,e.processId,e.transactionId,t);s?this.$alert.error(s):this.signImg=""},async getProcessSignature(){this.signList=[];const{error:e,payload:t}=await o["t"].getProcessSignature(this.workflowId,this.processId);e?this.$alert.error(e):this.signList=t},signLink(e){return`https://appuat.ezofis.com/ezofisapi/api/workflow/signView/${this.$store.state.session.tenantId}/${this.workflowId}/${e}`},async validatePassword(){const e=await this.$refs.passwordForm.validate();if(!e)return;this.isLoading=!0;const{error:t}=await o["a"].validatePassword({password:this.actionUserPassword});if(this.isLoading=!1,t)return console.log(t),void this.$alert.warning(t);this.actionUserPassword="",this.actionPasswordConfirm=!1,this.actionRemarks?(this.actionComments=!0,this.advancedCommentsSheet=!0):(this.actionRemarks=!1,this.actionPassword=!1,this.processRequest(!1,!1))},async getTaskList(){this.taskEntries=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await o["t"].getTaskEntries(this.workflowId,this.selectedProcess.processId,{filterBy:[{filters:[{criteria:"createdBy",condition:"IS_EQUALS_TO",value:this.$store.state.session.id}]}]});if(this.$store.commit("hideLoadingBar"),e)this.$alert.error(e);else if(t.length){const e=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let s=[];for(const t of e)s.push(...t.fields);this.taskList=t,t.forEach(e=>{let t="",i="",a="",o="",r="",n="";s.forEach(s=>{switch(s.label){case"Task Name":t=e.entryInfo[0][s.id];break;case"Task Assign":i=e.entryInfo[0][s.id];break;case"Start Date":a=e.entryInfo[0][s.id];break;case"End Date":o=e.entryInfo[0][s.id];break;case"Priority":r=e.entryInfo[0][s.id];break;case"Task Status":n=e.entryInfo[0][s.id];break}}),this.taskEntries.push({id:e.entryInfo[0].itemid,name:t,assigned:i,startDate:a,endDate:o,priority:r,status:n})})}},documentAction(e){if("Email_Sharing"===e.id);else if("Print"===e.id){if(this.selectedFile.name){let e=this.selectedFile.name.split(".").pop();Object(l["d"])(e)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===e.id){let e="";e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`,window.open(e,"_blank")}},async filePrintSession(){const{error:e}=await o["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});e&&this.$alert.error(e)},async getSubWorkflow(){this.tabs.find(e=>{"SUB_PROCESS"===e.value&&(e.count=0)});const{error:e,payload:t}=await o["t"].getSubWorkflow(this.workflowId,this.processId);e?this.$alert.error(e):(console.log(t,"payload"),t.length&&this.getSubProcessDetails(t[0].subWorkflowId,t))},async getSubProcessDetails(e,t){this.subProcessTickets=[];const{error:s,payload:i}=await o["o"].getWorkflowData(e,{filterBy:[],itemsPerPage:0,currentPage:0,mode:""});if(s)this.$alert.error(s);else if(console.log(i),i.meta.totalItems){console.log(i);let e=[];t.forEach(t=>{let s=i.data[0].value.find(e=>e.processId===Number(t.subProcessId));console.log(s),s&&e.push(s)}),e.length&&(this.subProcessTickets=e),this.tabs.find(t=>{"SUB_PROCESS"===t.value&&(t.count=e.length)})}},subProcessShowLinks(e,t){this.subProcessLink="",this.subProcessData=t,this.subProcessLink=e},openSubProcess(e){this.subProcessData=e,this.openSubProcessSheet=!0},closeSubProcess(){this.openSubProcessSheet=!1,this.subProcessData={},this.initiateSubWorkflowProcess=!1},initiateSubWorkflow(){this.initiateSubWorkflowProcess=!0},async getUserWorkflow(){this.workflowList=[],this.$store.commit("showLoadingBarSave");const{error:e,payload:t}=await o["t"].getUserWorkflow();e?this.$alert.error(e):(t.length&&t.forEach(e=>{this.workflowList.push({id:this.$nano.id(),label:e.name,value:e.id,initiatedBy:e.initiatedBy,formId:e.wFormId,repositoryId:e.repositoryId,flowJson:JSON.parse(e.flowJson)})}),this.$store.commit("hideLoadingBarSave"))},closeSubProcessSheet(){this.subProcessSheet=!1}}}}).call(this,s("4362"))},"5a75":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("q-layout",{attrs:{view:"hHh LpR fFf"}},[t("Toolbar"),t("Drawer"),t("q-page-container",[t("BaseScrollbar",{staticClass:"q-pa-md relative-position",attrs:{height:"calc(100vh - 56px)"}},[e._t("default")],2)],1)],1)},a=[],o=function(){var e=this,t=e._self._c;return t("q-header",{attrs:{id:"toolbar"}},[t("q-toolbar",{staticClass:"no-padding",staticStyle:{height:"56px"}},[t("Legend"),e.customerLogo?[t("CustomerLogo",{staticClass:"q-ml-md q-mr-xl"})]:[t("Logo",{staticClass:"q-ml-md q-mr-xl"})],t("GlobalSearch"),t("q-space"),e.customerLogo&&e.ezofisLogo?[t("Logo",{staticClass:"q-ml-md q-mr-md"})]:e._e(),t("ThemeSwitcher",{staticClass:"q-mr-sm"}),t("Notifications",{staticClass:"q-mr-sm"}),t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-power-outline","no-border":""},on:{click:e.logOut}}),t("Account",{staticClass:"q-mr-md"})],2)],1)},r=[],n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"relative-position cursor-pointer",on:{click:e.homePage}},[e._m(0),t("div",{attrs:{id:"legend-tail"}})])},l=[function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"legend"}},[t("img",{attrs:{src:"https://demo.ezofis.com/Logo/mark-white.png"}})])}],c=(s("14d9"),{name:"Legend",methods:{homePage(){var e;if(this.$store.state.session.profile&&(this.$store.state.profileMenus.length&&null!==(e=this.$store.state.profileMenus.find(e=>e.workspaces))&&void 0!==e&&e.Menu["Overview"]))return void("repositories-browse"!==this.$route.name&&this.$router.push({name:"repositories-browse"}));"workflows-overview"!==this.$route.name&&this.$router.push({name:"workflows-overview"})}}}),d=c,u=(s("b2f9"),s("2877")),m=Object(u["a"])(d,n,l,!1,null,"7e06f69f",null),h=m.exports,p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cursor-pointer",attrs:{id:"logo"},on:{click:e.homePage}},[t("img",{attrs:{src:e._logo,height:e.logoHeight}})])},f=[],v=s("2f62"),y={name:"Logo",computed:{...Object(v["c"])(["darkTheme"]),_logo(){return this.darkTheme?"https://demo.ezofis.com/Logo/name-dark.png":"https://demo.ezofis.com/Logo/name-light.png"},logoHeight(){return"24px"}},methods:{homePage(){var e;if(this.$store.state.session.profile&&(this.$store.state.profileMenus.length&&null!==(e=this.$store.state.profileMenus.find(e=>e.workspaces))&&void 0!==e&&e.Menu["Overview"]))return void("repositories-browse"!==this.$route.name&&this.$router.push({name:"repositories-browse"}));"workflows-overview"!==this.$route.name&&this.$router.push({name:"workflows-overview"})}}},b=y,g=(s("ea0d"),Object(u["a"])(b,p,f,!1,null,"ce8b9a52",null)),w=g.exports,C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cursor-pointer",attrs:{id:"logo"},on:{click:e.homePage}},[t("img",{attrs:{src:e._logo,height:e.logoHeight}})])},k=[],S={name:"Logo",computed:{...Object(v["c"])(["darkTheme"]),_logo(){let e=location.origin;return"https://edmsuat.sobhaapps.com"===e||"https://edms.sobhaapps.com"===e?s("3846"):"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?s("651a"):"http://172.16.1.118"===e||"http://localhost:8080"===e?s("1d87"):s("bcdf")(`./name-${this.darkTheme?"dark":"light"}.png`)},logoHeight(){let e=location.origin;return"https://edmsuat.sobhaapps.com"===e||"https://edms.sobhaapps.com"===e?"28px":"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?"42px":"http://172.16.1.118"===e?"38px":"24px"}},methods:{homePage(){var e;if(this.$store.state.session.profile&&(this.$store.state.profileMenus.length&&null!==(e=this.$store.state.profileMenus.find(e=>e.workspaces))&&void 0!==e&&e.Menu["Overview"]))return void("repositories-browse"!==this.$route.name&&this.$router.push({name:"repositories-browse"}));"workflows-overview"!==this.$route.name&&this.$router.push({name:"workflows-overview"})}}},_=S,I=(s("75a4"),Object(u["a"])(_,C,k,!1,null,"7d62c8eb",null)),x=I.exports,T=function(){var e=this,t=e._self._c;return t("div",{ref:"search",attrs:{id:"global-search"}},[t("BaseIcon",{attrs:{name:"eva-search"}}),t("div",{staticClass:"label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],ref:"searchQuery",staticClass:"q-px-xs",attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),t("q-space"),e._e()],1),t("q-menu",{staticClass:"shadow-3",attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right","no-parent-event":"",fit:""},model:{value:e.showSearchOptions,callback:function(t){e.showSearchOptions=t},expression:"showSearchOptions"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:"calc(80vh - 273px)",width:"600px"}},[t("div",{attrs:{id:"search-menu"}},[t("table",[t("tbody",[t("tr",[t("td",{staticClass:"label"},[e._v("Type")]),t("td",{staticClass:"value"},[t("SelectField",{attrs:{options:e.typeList},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1)]),e.type?["Folder"===e.type||"Workspace"===e.type?t("tr",[t("td",{staticClass:"label"},[e._v("Workspace")]),t("td",{staticClass:"value"},[t("SelectField",{attrs:{options:e.workspaceList},model:{value:e.workspace,callback:function(t){e.workspace=t},expression:"workspace"}})],1)]):e._e(),"Folder"===e.type?t("tr",[t("td",{staticClass:"label"},[e._v("Folder")]),t("td",{staticClass:"value"},[t("SelectField",{attrs:{options:e.folderList},model:{value:e.folder,callback:function(t){e.folder=t},expression:"folder"}})],1)]):e._e(),"Task"===e.type?t("tr",[t("td",{staticClass:"label"},[e._v("Task")]),t("td",{staticClass:"value"},[t("SelectField",{attrs:{options:e.taskList},model:{value:e.task,callback:function(t){e.task=t},expression:"task"}})],1)]):e._e(),"Form"===e.type?t("tr",[t("td",{staticClass:"label"},[e._v("Form")]),t("td",{staticClass:"value"},[t("SelectField",{attrs:{options:e.formList},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)]):e._e(),"Workflow"===e.type?t("tr",[t("td",{staticClass:"label"},[e._v("Workflow")]),t("td",{staticClass:"value"},[t("SelectField",{attrs:{options:e.workflowList},model:{value:e.workflow,callback:function(t){e.workflow=t},expression:"workflow"}})],1)]):e._e(),"User"===e.type?t("tr",[t("td",{staticClass:"label"},[e._v("User")]),t("td",{staticClass:"value"},[t("SelectField",{attrs:{options:e.userList},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}})],1)]):e._e(),"Group"===e.type?t("tr",[t("td",{staticClass:"label"},[e._v("Group")]),t("td",{staticClass:"value"},[t("SelectField",{attrs:{options:e.groupList},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}})],1)]):e._e(),e._e()]:e._e(),e._e()],2)])])]),t("div",{staticClass:"row items-center footer q-pa-sm"},[t("div",{staticClass:"col-auto"},[t("div",{staticClass:"row items-center date-filter"},[t("div",{staticClass:"col-auto",staticStyle:{width:"160px"}},[t("DateField",{attrs:{"hide-border":!0,placeholder:"From Date"},model:{value:e.fromDate,callback:function(t){e.fromDate=t},expression:"fromDate"}})],1),t("div",{staticClass:"col-auto q-mx-sm"},[t("BaseIcon",{attrs:{name:"eva-arrow-forward-outline"}})],1),t("div",{staticClass:"col-auto",staticStyle:{width:"160px"}},[t("DateField",{attrs:{"hide-border":!0,placeholder:"To Date"},model:{value:e.toDate,callback:function(t){e.toDate=t},expression:"toDate"}})],1)])]),t("q-space"),t("div",{staticClass:"col-auto footer1 q-ml-sm"},[t("div",{staticClass:"row items-center"},[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"reset"},on:{click:e.reset}}),t("BaseButton",{attrs:{label:"search more"},on:{click:e.searchFiles}})],1)])],1)],1),t("q-menu",{staticClass:"shadow-3",attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right","no-parent-event":"",fit:"","no-focus":"","no-refocus":""},model:{value:e.showSearchMenu,callback:function(t){e.showSearchMenu=t},expression:"showSearchMenu"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:"calc(80vh - 273px)",width:"600px"}},[t("div",{attrs:{id:"search-menu"}},[t("div",{staticClass:"row items-center chip-menu q-pb-sm",staticStyle:{"border-bottom":"1px solid var(--divider-color)"}},[e._l(e.typeList,(function(s){return[s.isVisible?t("div",{key:s.id,staticClass:"chip",class:{"condition-chip":s.isSelectMenu},on:{click:function(e){s.isSelectMenu=!s.isSelectMenu}}},[s.isSelectMenu?t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-checkmark-outline"}}):e._e(),t("div",[e._v(e._s(s.label))])],1):e._e()]})),t("div",{staticClass:"chip",on:{click:e.showFullTypeList}},[t("div",[e._v(" "+e._s(e.showAllButtonText)+" "),t("BaseIcon",{class:{"rotate-180":e.isShowAll},attrs:{name:"mdi-menu-down"}})],1)])],2),t("div",{staticClass:"row items-center q-py-md",staticStyle:{"border-bottom":"1px solid var(--divider-color)"}},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-search"}}),e._v(" "+e._s(e.search)+" ")],1),e.isLoadingActive?t("BaseLoadingBarSheet",{staticStyle:{position:"absolute !important","z-index":"9999"}}):e._e(),e.searchResult.length?[e._l(e.searchResult,(function(s,i){return t("div",{key:i,staticClass:"row items-center q-py-sm cursor-pointer",staticStyle:{"border-bottom":"1px solid var(--divider-color)"},on:{click:function(t){return e.goto(s)}}},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-md",attrs:{name:e.getMenuIcon(s.menu)}})],1),t("div",{staticClass:"col"},[t("div",{staticClass:"search-title"},[e._v(" "+e._s(s.searchName)+" ")]),t("div",{staticClass:"subtitle"},[e._v(" "+e._s(s.description)+" ")])]),t("div",{staticClass:"col-auto"},[e._v(e._s(s.date))])])})),t("BaseSeparator"),t("div",{staticClass:"row items-center q-pa-sm"},[t("div",{staticClass:"col subtitle"},[e._v(e._s(e.totalItems)+" results found")]),e.totalItems>=10?t("div",{staticClass:"show-all",on:{click:e.searchFiles}},[e._v(" "+e._s(e.loadMore?"view less":"view all")+" ")]):e._e()])]:[t("div",{staticClass:"row items-center q-py-md",staticStyle:{"border-bottom":"1px solid var(--divider-color)"}},[e._v(" No recent items match your search ")])]],2)]),t("div",{staticClass:"row items-center footer q-pa-sm"},[t("div",{staticClass:"col-auto"},[t("div",{staticClass:"row items-center date-filter"},[t("div",{staticClass:"col-auto",staticStyle:{width:"160px"}},[t("DateField",{attrs:{"hide-border":!0,placeholder:"From Date"},model:{value:e.fromDate,callback:function(t){e.fromDate=t},expression:"fromDate"}})],1),t("div",{staticClass:"col-auto q-mx-sm"},[t("BaseIcon",{attrs:{name:"eva-arrow-forward-outline"}})],1),t("div",{staticClass:"col-auto",staticStyle:{width:"160px"}},[t("DateField",{attrs:{"hide-border":!0,placeholder:"To Date"},model:{value:e.toDate,callback:function(t){e.toDate=t},expression:"toDate"}})],1)])]),t("q-space"),t("div",{staticClass:"col-auto footer1 q-ml-sm"},[t("div",{staticClass:"row items-center"},[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"reset"},on:{click:e.reset}}),t("BaseButton",{attrs:{label:"search more"},on:{click:e.searchFiles}})],1)])],1)],1),t("FileSheet",{attrs:{file:e.selectFile,"repository-field":e.repositoryField,options:{}},on:{"show-files":function(t){e.isFileSheetVisible=!0}},model:{value:e.isFileSheetVisible,callback:function(t){e.isFileSheetVisible=t},expression:"isFileSheetVisible"}}),t("RequestProcessSheet",{attrs:{"workflow-request-list":e.workflowTicketList,"process-id":e.processId,workflow:e.workflows,"workflow-id":e.workflowId,"form-id":e.formId,form:e.forms,"enable-controls":e._enableControls}})],1)},$=[],A=s("12b8"),F=s("b3d1"),L=s("53c1"),B=s("7104"),P=s("1b0d"),D=s("3fc6"),M=s("4360"),q={name:"GlobalSearch",components:{SelectField:A["a"],TextField:F["a"],DateField:L["a"],FileSheet:B["a"],RequestProcessSheet:D["a"]},data(){return{search:"",type:"",isShowAll:!1,typeList:[{id:this.$nano.id(),label:"Document",value:"Documents",isSelectMenu:!1,isVisible:!0,default:!0},{id:this.$nano.id(),label:"Content",value:"content",isSelectMenu:!0,isVisible:!0,default:!0},{id:this.$nano.id(),label:"Request No",value:"Request No",isSelectMenu:!1,isVisible:!0,default:!0},{id:this.$nano.id(),label:"Workspace",value:"Workspace",isSelectMenu:!1,isVisible:!1,default:!1},{id:this.$nano.id(),label:"Folder",value:"Folders",isSelectMenu:!1,isVisible:!1,default:!1},{id:this.$nano.id(),label:"Form",value:"Form",isSelectMenu:!1,isVisible:!1,default:!1},{id:this.$nano.id(),label:"Workflow",value:"WorkFlow",isSelectMenu:!1,isVisible:!1,default:!1},{id:this.$nano.id(),label:"User",value:"User",isSelectMenu:!1,isVisible:!1,default:!1},{id:this.$nano.id(),label:"Group",value:"Group",isSelectMenu:!1,isVisible:!1,default:!1},{id:this.$nano.id(),label:"Menu",value:"Menu",isSelectMenu:!1,isVisible:!1,default:!1}],words:"",owner:"",itemName:"",location:location,date:"",workflow:"",folder:"",workspace:"",workspaceList:[],folderList:[],groupList:[],group:[],taskList:[],formList:[],form:"",task:"",workflowList:[],userList:[],user:"",isExpanded:!1,fromDate:"",toDate:"",showSearchOptions:!1,showSearchMenu:!1,isSelectMenu:!1,searchResult:[],selectFile:{},isFileSheetVisible:!1,repositoryField:[],loadMore:!1,totalItems:0,searchInput:{},workflowTicketList:[],selectedProcess:{},processId:0,workflows:{},workflowId:0,formId:0,forms:{},isLoadingActive:!1,showAllButtonText:"More"}},computed:{panels(){return this.form?this.form.panels:[]},_enableControls(){let e=[],t=[];return this.panels.forEach(s=>{if(s.fields.length){let i=s.fields.filter(e=>"SINGLE_SELECT"===e.type||"SINGLE_CHOICE"===e.type||"MULTIPLE_CHOICE"===e.type||"MULTI_SELECT"===e.type);i.length&&i.forEach(s=>{if(s.settings.validation.enableSettings&&s.settings.validation.enableSettings.length){let i=[];s.settings.validation.enableSettings.forEach(e=>{e.controls.length&&(i.push({value:e.value,childControls:e.controls}),e.controls.forEach(e=>{i.indexOf(e)<0&&t.push(e)}))}),i.length&&e.push({id:s.id,parentControls:i})}})}}),{listControls:t,controls:e}}},watch:{workspace(){this.workspace&&this.getRepositories()},type(){this.workspace="",this.workflow="",this.user="",this.group="",this.task="",this.form="",this.folder="",this.date="","Workspace"===this.type||"Folder"===this.type?this.getWorkspaces():"Group"===this.type?this.getGroups():"Form"===this.type?this.getForms():"Task"===this.type?this.getTasks():"Workflow"===this.type?this.getWorkflows():"User"===this.type&&this.getUsers()},search(){this.search?this.search.length>=2&&(this.showSearchMenu=!0,this.getGlobalSearch()):this.showSearchMenu=!1},typeList:{deep:!0,handler(){let e=this.typeList.filter(e=>e.isSelectMenu);console.log(e);let t=[];e.forEach(e=>{t.push(e.value)}),this.getGlobalSearch(t.length?t:[""])}}},created(){},methods:{showFullTypeList(){this.isShowAll=!this.isShowAll,this.showAllButtonText=this.isShowAll?"Less":"More",this.typeList.forEach(e=>{e.isVisible=!!this.isShowAll||e.default})},async getWorkspaces(){const{error:e,payload:t}=await P["u"].getWorkspaceList();this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t&&(this.workspaceList=t.map(e=>({id:e.id,label:e.value,value:e.value})))},async getRepositories(){if(this.workspace){this.folderList=[];let e=this.workspaceList.find(e=>e.value===this.workspace)["id"];const{error:t,payload:s}=await P["p"].getRepositoryList("workspaceId",e);if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);if(!s.length)return;this.folderList=s.map(e=>({id:this.$nano.id(),label:e.value,value:e.value}))}},async getGroups(){const{error:e,payload:t}=await P["i"].getGroupList();this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t&&(this.groupList=t.map(e=>({id:this.$nano.id(),label:e.value,value:e.value})))},async getForms(){const{error:e,payload:t}=await P["g"].getFormList();this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t&&(this.formList=t.map(e=>({id:this.$nano.id(),label:e.value,value:e.value})))},async getWorkflows(){const{error:e,payload:t}=await P["t"].getWorkflowList();this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t&&(this.workflowList=t.map(e=>({id:this.$nano.id(),label:e.value,value:e.value})))},async getUsers(){const{error:e,payload:t}=await P["s"].getUserList();this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t&&(this.userList=t.map(e=>({id:this.$nano.id(),label:e.value,value:e.value})))},async getTasks(){const{error:e,payload:t}=await P["g"].getFormEntries(19,{mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[],itemsPerPage:100,currentPage:1});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);const{data:s}=t;console.log(s),this.taskList=s||[],s.length&&s[0].value.length},searchFiles(){let e="";"Workspace"===this.type?e=this.workspace:"Form"===this.type?e=this.form:"Folder"===this.type?e=this.folder:"Task"===this.type?e=this.task:"Workflow"===this.type?e=this.workflow:"User"===this.type?e=this.user:"Group"===this.type&&(e=this.group),this.showSearchOptions?this.$router.replace({name:"search",query:{type:this.type,name:e}}):(this.searchInput.fromDate=this.fromDate,this.searchInput.toDate=this.toDate,"search"===this.$route.name?(this.$route.params.searchInput=this.searchInput,M["a"].commit("setSearchInput",this.searchInput)):this.$router.replace({name:"search",params:{searchInput:this.searchInput}})),this.showSearchMenu=!1},async getGlobalSearch(e){let t=this.typeList.filter(e=>e.isSelectMenu),s=[];t.forEach(e=>{s.push(e.value)});let i=[];i=e||(t.length?s:[""]);let a={SearchValue:this.search,type:i,itemsPerPage:10,currentPage:1,fromDate:this.fromDate,toDate:this.toDate,userId:this.$store.state.session.id};this.searchInput=a,this.isLoadingActive=!0;const{error:o,payload:r}=await P["h"].globalSearch(a);if(this.isLoadingActive=!1,o)return void this.$alert.error(o);console.log(r);let n=r;this.totalItems=r.meta.totalItems,n.data&&(console.log(n.data),n.data.length?(this.searchResult=[],n.data.forEach(e=>{this.searchResult.push({menu:e.type,searchName:"Documents"===e.type?e.ifileName:e.name,idJson:e.id,description:e.description?e.description:e.type,requestNo:e.requestNo,date:e.modifiedDateandtime?this.$day.format(e.modifiedDateandtime):this.$day.format(e.dateandtime)})})):this.searchResult=[])},getMenuIcon(e){switch(e){case"Folders":return"eva-archive-outline";case"WorkFlow":return"o_account_tree";case"Task":return"eva-cube-outline";case"Portal":return"eva-globe-outline";case"Form":return"mdi-text-box-outline";case"Settings":return"eva-settings-2-outline";case"Report":return"eva-pie-chart-outline";case"Documents":return"mdi-file-document-outline";case"Menu":return"mdi-menu";case"Content":return"mdi-file-document-outline";case"Request No":return"o_account_tree";default:return"o_dashboard"}},goto(e){console.log(e),e.idJson.itemId&&"Request No"!==e.menu?(this.getRepositoryField(e.idJson.repositoryId),this.getFile(e.idJson.repositoryId,e.idJson.itemId)):e.idJson.workflwId&&"Request No"===e.menu?this.getWorkflowData(e.idJson.workflowId,e.idJson.processId):"Folders"===e.menu?this.$router.replace({name:"repositories-browse",query:{workspaceId:e.idJson.workspaceId,repositoryId:e.idJson.repositoryId}}):"WorkFlow"===e.menu?this.$router.replace({name:"workflow-builder",params:{id:String(e.idJson.workflowId)}}):"Menu"===e.menu&&this.$router.replace({name:e.searchName})},async getFile(e,t){let s={repositoryId:e,parentNodeId:0,sortBy:{criteria:"",order:"ASC"},groupBy:"",filterBy:[{filters:[{id:this.$nano.id(),criteria:"itemid",condition:"IS_EQUALS_TO",value:t,dataType:"SHORT_TEXT"}],groupCondition:""}],currentPage:1,itemsPerPage:100,mode:"BROWSE",level:1};const{error:i,payload:a}=await P["p"].getEntities(s);if(this.$store.commit("hideLoadingBar"),i)this.$alert.error(i);else if(console.log(a),a.data[0].value.length){let e=a.data[0].value;console.log(e);let s=e.find(e=>e.id===Number(t));console.log(s),this.selectFile=s,this.isFileSheetVisible=!0}},async getRepositoryField(e){const{error:t,payload:s}=await P["p"].getRepositoryField({criteria:"repositoryId",value:e});t?this.$alert.error(t):this.repositoryField=s},async getWorkflowData(e,t){this.workflowTicketList=[];const{error:s,payload:i}=await P["o"].getWorkflowData(e,{filterBy:[],itemsPerPage:100,currentPage:1,mode:""});this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):(i.data.forEach(e=>{e.value.forEach(e=>{this.workflowTicketList.push({...e})})}),console.log(this.workflowTicketList),this.selectedProcess=this.workflowTicketList.find(e=>e.processId===Number(t)),await this.getWorkflow(e,t))},async getWorkflow(e,t){this.workflowId=e;const{error:s,payload:i}=await P["t"].getWorkflow(e);this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):(console.log(i),console.log(i.wFormId),this.workflows=i,this.formId=String(i.wFormId),await this.getForm(t))},async getForm(e){if(this.formId){const{error:e,payload:t}=await P["g"].getForm(this.formId);if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);let s=JSON.parse(t.formJson);this.forms=s}this.processId=Number(e)},reset(){this.search="",this.fromDate="",this.toDate=""}}},N=q,O=(s("2d9d"),s("2c91")),E=s("4e73"),V=s("93dc"),R=s.n(V),z=Object(u["a"])(N,T,$,!1,null,"48781ddd",null),j=z.exports;R()(z,"components",{QSpace:O["a"],QMenu:E["a"]});var H=s("fd26"),U=function(){var e=this,t=e._self._c;return t("div",[t("BaseActionButton",{attrs:{"is-flat":"",icon:"mdi-bell-outline","no-border":""},on:{click:e.openNotification}},[e.alertNotification?t("Pulse",{staticClass:"pulse"}):e._e()],1),t("Sheet",{attrs:{width:"40vw"},on:{input:function(t){e.notificationSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Notifications ")]},proxy:!0},{key:"actions",fn:function(){return[t("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:e.searchRow}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getNotifications()}}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"clear all",expression:"'clear all'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-notification-clear-all",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.clearAllNotifications()}}})]},proxy:!0}]),model:{value:e.notificationSheet,callback:function(t){e.notificationSheet=t},expression:"notificationSheet"}},[t("div",{staticClass:"notificationData",attrs:{id:"content-wrapper"}},[e.notifyData.length?e._l(e.notifyData,(function(s){return t("div",{key:s.id,staticClass:"notificationContent",class:!1===s.readStatus?"unread":""},[t("div",{staticClass:"entry",on:{click:function(t){return e.openForm(s)}}},[t("div",{staticClass:"header"},[e._v(e._s(s.title))]),t("div",{staticClass:"content"},[t("div",{staticClass:"changes-meta"},[t("div",{staticClass:"ellipsis"},[e._v(e._s(s.createdByEmail))]),t("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),t("div",{staticClass:"ellipsis"},[e._v(e._s(e.$day.format(s.createdAt)))]),t("div",{staticClass:"action"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-trash-can-outline",color:"red","is-flat":"",size:"20px"},on:{click:function(t){return e.deleteNotification(s.id)}}})],1)],1),t("div",{staticClass:"changes-meta"},["COMPLETED"==s.status||"SUCCESS"==s.status?[t("div",{staticClass:"text-green"},[e._v(e._s(s.status))])]:"PROCESSING"==s.status?[t("div",{staticClass:"text-orange"},[e._v(e._s(s.status))])]:"FAILED"==s.status?[t("div",{staticClass:"text-red"},[e._v(e._s(s.status))])]:[t("div",{staticClass:"text-secondary"},[e._v(e._s(s.status))])],t("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),e.validateURL(s.remarks)?[t("a",{staticClass:"ellipsis",attrs:{href:s.remarks,target:"_blank"}},[e._v(e._s(s.remarks))])]:[t("span",{staticClass:"font-semibold"},[e._v(e._s(s.remarks))])]],2),t("div",{staticClass:"changes-meta"},[t("div",{staticClass:"action"},[e._v(e._s(e.duration(s.createdAt)))])])])])])})):t("div",{staticClass:"no-history"},[e._v("No data found")])],2)]),t("Sheet",{attrs:{width:"100vw","has-footer":"","no-padding":""},on:{input:function(t){e.processSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.headerTitle)+" ")]},proxy:!0},{key:"actions",fn:function(){return[e.hasWflowInitiator?t("BaseButton",{staticClass:"q-mr-sm",attrs:{label:e.subWorkflowName,color:"secondary"},on:{click:e.initiateSubWorkflow}}):e._e()]},proxy:!0},{key:"footer",fn:function(){return[e.actions.length?t("div",{staticClass:"footer row"},[t("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Save",color:"secondary"},on:{click:function(t){return e.validateRequest("Save")}}}),e._l(e.actions,(function(s){return[t("BaseButton","Approve"===s||"Complete"===s||"Rightsize"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"positive"},on:{click:function(t){return e.validateRequest(s)}}}:"Reject"===s||"Terminate"===s||"Force Close"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"red"},on:{click:function(t){return e.validateRequest(s)}}}:"Forward"===s||"Reply"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"orange"},on:{click:function(t){return e.validateRequest(s)}}}:{key:s,staticClass:"q-ml-md",attrs:{label:s},on:{click:function(t){return e.validateRequest(s)}}})]}))],2):e._e()]},proxy:!0}]),model:{value:e.processSheet,callback:function(t){e.processSheet=t},expression:"processSheet"}},[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[e.formId?t("div",{staticClass:"col",attrs:{id:"form-view"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 145px)"}},[e.formId?t("RenderForm",{attrs:{"form-id":e.formId,panels:e.panels,"secondary-panels":e.secondaryPanels,"form-settings":e.formSettings,"form-model":e.formModel,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel,"is-readonly":e.formEditAccess,"form-edit-controls":e.formEditControls,"form-visibility-access":e.formVisibilityAccess,"form-secure-controls":e.formSecureControls,"enable-controls":e._enableControls},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t}}}):e._e(),e.signList.length?t("div",{staticClass:"q-pa-md",attrs:{id:"approvalSignature"}},[t("div",{staticClass:"title q-mb-sm"},[e._v("Approval Signature")]),t("BaseSeparator",{staticClass:"q-my-sm"}),t("div",{staticClass:"row"},[e._l(e.signList,(function(s){return[t("div",{key:s.id,staticClass:"col-3 q-mb-sm"},[t("img",{staticClass:"imgCenter col",attrs:{src:e.signLink(s.id)}}),t("div",{staticClass:"text row"},[t("span",{staticClass:"col-12 text-bold"},[e._v(e._s(s.stage))]),t("span",{staticClass:"col-12"},[e._v(e._s(s.createdByEmail))]),t("span",{staticClass:"col-12"},[e._v(e._s(e.$day.format(s.createdAt)))])])])]}))],2)],1):e._e(),e.userSignature?t("SignatureField",{staticClass:"q-pa-md",attrs:{label:"Signature"},model:{value:e.signImg,callback:function(t){e.signImg=t},expression:"signImg"}}):e._e()],1)],1):e._e(),e.itemModel.itemId?t("div",{staticClass:"col"},[t("div",{staticClass:"fileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:e.itemLink(),frameborder:"0"}})])])]):e._e(),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(s){return[e.checkTabAccess(s.value)?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()]):e._e()]}))],2)])]),t("Sheet",{attrs:{width:"30vw","sub-actions":!!e.selectedProcess.processId,upload:!0},on:{input:e.closeAttachmentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){},proxy:!0},{key:"upload",fn:function(){return[t("div",{staticClass:"hint",on:{click:function(t){e.rowIndex=null,e.$refs.attachments.click()}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),t("div",{staticClass:"title text-blue"},[e._v("UPLOAD FILES")]),t("div",{staticClass:"description"},[e._v("Click here to choose files and upload")])],1)]},proxy:!0},{key:"subActions",fn:function(){return[e.selectedProcess.processId&&e.attachmentList.length?[t("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:e.fileSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}}),e._v(" Select All ")]:e._e(),(e.selectedProcess.processId&&e.selectedFileCount,e._e()),(e.selectedProcess.processId&&e.selectedFileCount,e._e())]},proxy:!0}]),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 250px)"}},[t("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:e.uploadAttachments}}),e._l(e.checkList,(function(s){return[s.name?[s.attach?e._e():t("div",{key:s.uid,staticClass:"checkList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),t("div",{staticClass:"col q-ml-sm"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[e._v(" "+e._s(s.name)+" ")]),s.required?t("div",{staticClass:"col-12 q-mt-sm"},[t("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[e._v(" Required ")])],1):e._e()])]),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"col-12",on:{click:function(t){return e.attachTemplate(s.uid)}}},[t("q-chip",{staticClass:"chips primary-hover medium",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-upload-outline",color:"primary","text-color":"white"}}),e._v(" Upload ")],1)],1),s.template?t("div",{staticClass:"col-12",on:{click:function(t){return e.download(s.id)}}},[t("q-chip",{staticClass:"chips secondary-hover medium",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-download-outline",color:"secondary","text-color":"white"}}),e._v(" Download ")],1)],1):e._e()])])])]:e._e()]})),e._l(e.attachmentList,(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})],1):e._e(),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1)]),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])]}))],2)],1)]),t("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"30"},on:{input:e.closeCommentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:e.isTenantArmgroup()?"calc(100vh - 190px)":"calc(100vh - 150px)"}},[e._l(e.commentsList,(function(s,i){return[t("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===e.$store.state.session.id?"me":s.createdByEmail||s.externalCommentsby,text:[s.comments],"text-html":"",sent:s.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(s),"bg-color":s.createdBy===e.$store.state.session.id?"primary-1":"secondary-1"}})]}))],2)],1),t("div",{staticClass:"col q-pa-sm borderTop"},[t("div",{staticClass:"row"},[e.isTenantArmgroup()?t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.commentActions,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e()],1),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])])]),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[e.selectedFile.formJsonId?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:e.getLabel(e.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:e._e(),t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])],2)]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.documentActionList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.documentAction(s)}}})})),1)],1)],1)]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])]),t("Sheet",{attrs:{width:"30vw"},on:{input:e.closeTaskSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Tasks ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Add Task",expression:"'Add Task'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-plus",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.$emit("addTask")}}})]},proxy:!0}]),model:{value:e.taskSheet,callback:function(t){e.taskSheet=t},expression:"taskSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[e._l(e.taskEntries,(function(s){return[t("div",{key:s.id,staticClass:"taskEntries"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto q-mr-md",staticStyle:{"margin-top":"3px"},on:{click:function(t){return e.$emit("viewTask",s.id)}}},[e._v(" "+e._s(s.name)+" ")]),t("q-chip",{attrs:{size:"10px",color:e.getColor(s.priority),"text-color":"white"}},[e._v(" "+e._s(s.priority)+" ")]),t("q-chip",{attrs:{size:"10px",color:e.getColor(s.status),"text-color":"white"}},[e._v(" "+e._s(s.status)+" ")])],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col-12"},[e._v("Assigned To: "+e._s(s.assigned))]),t("div",{staticClass:"col-12"},[e._v(" Start Date: "+e._s(e.$day.format(s.startDate,!1))+" "),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" End Date: "+e._s(e.$day.format(s.endDate,!1))+" ")],1)])])]}))],2)]),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[e.isTenantArmgroup()?t("SingleChoiceField",{staticClass:"actions q-mr-sm noborder",attrs:{options:e.commentActions,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e(),t("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}}),t("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"red"},on:{input:function(t){e.errorModal=!1,e.errorMessage=""}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Error Message")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" "+e._s(e.errorMessage)+" ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Close",color:"red"},on:{click:function(t){e.errorModal=!1,e.errorMessage=""}}})]},proxy:!0}]),model:{value:e.errorModal,callback:function(t){e.errorModal=t},expression:"errorModal"}}),t("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"red"},on:{input:function(t){e.actionPasswordConfirm=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Action Password")]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"passwordForm"},[t("ValidationProvider",{attrs:{name:"password",rules:{required:!0,password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("PasswordField",{staticClass:"q-my-lg",attrs:{"is-mandatory":"","is-readonly":e.isLoading,error:s[0],"auto-focus":!0},on:{enter:e.validatePassword},model:{value:e.actionUserPassword,callback:function(t){e.actionUserPassword=t},expression:"actionUserPassword"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"validate","is-loading":e.isLoading},on:{click:e.validatePassword}})]},proxy:!0}]),model:{value:e.actionPasswordConfirm,callback:function(t){e.actionPasswordConfirm=t},expression:"actionPasswordConfirm"}}),t("Confirm",{attrs:{icon:"mdi-file-alert","icon-color":"red"},on:{input:e.closeAlertModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Documents Required!")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md text-md"},[t("p",[e._v(" Are you sure you want to submit the request without attaching the required documents. ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no"},on:{click:e.closeAlertModal}}),t("BaseButton",{attrs:{label:"yes",color:"primary"},on:{click:e.proceedSubmission}})]},proxy:!0}]),model:{value:e.alertModal,callback:function(t){e.alertModal=t},expression:"alertModal"}}),e.historyProcessId?t("ProcessHistory",{attrs:{"process-id":e.historyProcessId,"selected-process":e.selectedProcess},on:{close:function(t){e.historyProcessId=0}}}):e._e(),t("Sheet",{attrs:{width:"30vw"},on:{input:e.closeSubProcessSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Linked Request ")]},proxy:!0}]),model:{value:e.subProcessSheet,callback:function(t){e.subProcessSheet=t},expression:"subProcessSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[e._l(e.subProcessTickets,(function(s,i){return[t("div",{key:i,staticClass:"subProcess"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"o_account_tree",color:"primary-4"}})],1),t("div",{staticClass:"col ellipsis text-underline",on:{click:function(t){return e.openSubProcess(s)}}},[e._v(" "+e._s(s.requestNo)+" ")]),"1"===s.flowStatus?t("q-chip",{attrs:{size:"10px",color:"green","text-color":"white"}},[e._v(" Completed ")]):t("q-chip",{attrs:{size:"10px",color:"orange","text-color":"white"}},[e._v(" Running ")])],1),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(s.name))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.stage))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.duration)+" ago")])],1)]),e._e()])]}))],2)]),t("SubWorkflowProcess",{attrs:{"workflow-id":e.subWorkflowId||e.subProcessData.id,"initiate-sub-workflow-process":e.initiateSubWorkflowProcess,"main-workflow-id":e.workflowId,"main-process-id":e.selectedProcess.processId,"sub-process-link":e.subProcessLink,"selected-process":e.subProcessData,"open-sub-process":e.openSubProcessSheet,"main-form-fields":e.formFields,"main-form-model":e.formModel,"sub-process-id":e.subProcessId},on:{"update:subProcessId":function(t){e.subProcessId=t},"update:sub-process-id":function(t){e.subProcessId=t},closeProcessSheet:e.closeSubProcess}}),e.showFormEntryHistoryModal?t("FormEntryHistory",{attrs:{value:e.showFormEntryHistoryModal,"workflow-id":e.workflow.id,"process-id":e.selectedProcess.processId},on:{"update:value":function(t){e.showFormEntryHistoryModal=t}}}):e._e(),e.showAttachmentSheet?t("Attachments",{attrs:{value:e.showAttachmentSheet,"selected-process":e.selectedProcess,workflow:e.workflow,"selected-node":"inbox","initiate-process":!1,"form-check-list":!1,"check-list":e.checkList,wform:e.wform,"repository-details":{},"workflow-model":{},"form-upload-files":[],"repository-field":[],columns:[],attachments:e.attachmentList,"workflow-id":e.workflow.id},on:{"update:value":function(t){e.showAttachmentSheet=t},"update:attachments":function(t){e.attachmentList=t},attachmentCount:e.attachmentCount}}):e._e(),e.showCommentsSheet?t("Comments",{attrs:{value:e.showCommentsSheet,"selected-process":e.selectedProcess,workflow:e.workflow,"selected-node":"inbox","initiate-process":!1,"attachment-list":e.attachmentList,"workflow-id":e.workflow.id,"file-names":[],comments:e.commentsList,"display-internal-public":!1},on:{"update:value":function(t){e.showCommentsSheet=t},"update:comments":function(t){e.commentsList=t},commentsCount:e.commentsCount}}):e._e()],1)},W=[],J=s("5a6e"),G=J["a"],Q=(s("b97e"),s("b047")),Y=s("cb32"),K=s("8169"),X=Object(u["a"])(G,U,W,!1,null,"e67e8e24",null),Z=X.exports;R()(X,"components",{QChip:Q["a"],QAvatar:Y["a"],QChatMessage:K["a"],QMenu:E["a"]});var ee=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"account"}},[t("div",{attrs:{id:"user-avatar"},on:{click:function(t){e.profileSheet=!0}}},[t("img",{attrs:{src:e.imageURL(),alt:"avatar"}})]),t("Sheet",{attrs:{width:"25vw","has-footer":!1},on:{input:function(t){e.profileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Profile ")]},proxy:!0}]),model:{value:e.profileSheet,callback:function(t){e.profileSheet=t},expression:"profileSheet"}},[t("div",{staticClass:"profileData",attrs:{id:"content-wrapper"}},[t("div",{staticClass:"q-mt-sm q-mb-sm"},[t("div",{staticClass:"text-center"},[t("div",{staticClass:"profile-avatar"},[t("img",{attrs:{src:e.imageURL(),alt:"avatar"}})]),t("div",{staticClass:"text-weight-bold q-mt-md"},[e.isAdUser?[e._v(" "+e._s(e.$store.state.session.firstName)+" "+e._s(e.$store.state.session.lastName)+" ")]:[e._v(" "+e._s(e.$store.state.session.email)+" ")]],2),t("div",{staticClass:"text-caption"},[e._v(" "+e._s(e.$store.state.session.role)+" ")])])]),e._l(e.menus,(function(s,i){return t("div",{key:i},[e._l(s,(function(s){return[s.required||!e.checkTenant?t("div",{key:s.label,staticClass:"row items-center hoverable",staticStyle:{height:"50px"},on:{click:s.action}},[t("div",{staticClass:"col-2 row items-center justify-center",staticStyle:{color:"var(--icon-color)"}},[t("q-icon",{attrs:{name:s.icon,size:"20px"}})],1),t("div",{staticClass:"col text-capitalize"},[e._v(" "+e._s(s.label)+" ")])]):e._e()]})),i!==e.menus.length-1?t("q-separator",{attrs:{inset:"",color:"grey-2"}}):e._e()],2)}))],2)]),t("Modal",{attrs:{width:"30vw",height:"70vh","has-footer":""},on:{input:function(t){e.changePasswordModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Change Password")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"changePassword"}},[t("ValidationProvider",{attrs:{name:"password",rules:{required:!0,password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("PasswordField",{staticClass:"q-mb-lg",attrs:{label:"password","is-mandatory":"",tooltip:e._passwordHint,error:s[0]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})]}}])}),t("ValidationProvider",{attrs:{name:"password",rules:{required:!0,password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("PasswordField",{staticClass:"q-mb-lg",attrs:{label:"confirm password","is-mandatory":"","is-readonly":e.isLoading,tooltip:e._passwordHint,error:s[0]},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Update",color:"primary"},on:{click:e.updatePassword}})]},proxy:!0}]),model:{value:e.changePasswordModal,callback:function(t){e.changePasswordModal=t},expression:"changePasswordModal"}}),t("Modal",{attrs:{width:"30vw",height:"70vh","has-footer":""},on:{input:function(t){e.changeIdentityModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Change Identity")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"changePhoto"}},[t("ValidationProvider",{attrs:{name:"upload image",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("ImageField",{attrs:{label:"upload image","is-mandatory":!0,error:s[0]},model:{value:e.uploadImage,callback:function(t){e.uploadImage=t},expression:"uploadImage"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-md",attrs:{label:"Remove",color:"red"},on:{click:e.removeImage}}),t("BaseButton",{attrs:{label:"Update",color:"primary"},on:{click:e.updateImage}})]},proxy:!0}]),model:{value:e.changeIdentityModal,callback:function(t){e.changeIdentityModal=t},expression:"changeIdentityModal"}})],1)},te=[],se=s("381e"),ie=s("6a70"),ae=s("7bb1"),oe=s("8bc3"),re=s("0c6e"),ne=s("6f00"),le={name:"Account",components:{Sheet:se["a"],Modal:ie["a"],ValidationProvider:ae["b"],PasswordField:oe["a"],ImageField:ne["a"]},data(){return{profileSheet:!1,menus:[[{icon:"eva-person-outline",label:"change identity",action:this.changeIdentity,required:!1},{icon:"eva-lock-outline",label:"change password",action:this.changePassword,required:!1},{icon:"mdi-clipboard-text-outline",label:"Terms of Use",action:this.showTermsOfUse,required:!0},{icon:"eva-shield-outline",label:"Privacy Policy",action:this.showPrivacyPolicy,required:!0}],[{icon:"eva-log-out",label:"Log Out",action:this.logOut,required:!0}]],password:"",confirmPassword:"",changePasswordModal:!1,changeIdentityModal:!1,uploadImage:""}},computed:{_passwordHint(){return re["a"]},checkTenant(){let e=location.origin;return"https://edmsuat.sobhaapps.com"===e||"https://edms.sobhaapps.com"===e},isAdUser(){let e=location.origin;return"http://172.16.1.118"===e}},methods:{logOut(){window.localStorage.clear(),this.$router.push({name:"signIn"})},changePassword(){this.changePasswordModal=!0},showTermsOfUse(){window.open("https://www.ezofis.com/privacy-policy/")},showPrivacyPolicy(){window.open("https://www.ezofis.com/privacy-policy/")},changeIdentity(){this.changeIdentityModal=!0},viewProfile(){this.showUserSheet()},imageURL(){return`https://appuat.ezofis.com/ezofisapi/api/user/avatar/${this.$store.state.session.tenantId}/${this.$store.state.session.id}?t=${(new Date).getTime()}`},async updatePassword(){if(this.password===this.confirmPassword){this.$store.commit("showLoadingBar");let e={password:this.password};const{error:t}=await P["s"].updateUser(this.$store.state.session.id,e);if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.$alert.success("Password updated"),this.changePasswordModal=!1,this.password="",this.confirmPassword=""}else this.$alert.warning("password not matched")},async updateImage(){this.$store.commit("showLoadingBar");let e={base64file:this.uploadImage.split(",")[1],fileType:"png"};const{error:t}=await P["s"].uploadImage(e);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):(this.$store.commit("hideLoadingBar"),this.changeIdentityModal=!1,this.uploadImage="")},async removeImage(){const{error:e}=await P["s"].removeImage(this.$store.state.session.tenantId,this.$store.state.session.id);e?this.$alert.error(e):(this.changeIdentityModal=!1,this.uploadImage="")}}},ce=le,de=(s("108c"),s("0016")),ue=s("eb85"),me=Object(u["a"])(ce,ee,te,!1,null,"443b001b",null),he=me.exports;R()(me,"components",{QIcon:de["a"],QSeparator:ue["a"]});var pe={name:"Toolbar",components:{Legend:h,Logo:w,CustomerLogo:x,GlobalSearch:j,ThemeSwitcher:H["a"],Notifications:Z,Account:he},computed:{customerLogo(){let e=location.origin;return"https://edmsuat.sobhaapps.com"===e||"https://edms.sobhaapps.com"===e||"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://172.16.1.118"===e},ezofisLogo(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e}},methods:{logOut(){window.localStorage.clear(),location.reload()}}},fe=pe,ve=(s("b2a7"),s("e359")),ye=s("65c6"),be=Object(u["a"])(fe,o,r,!1,null,"ea69e05a",null),ge=be.exports;R()(be,"components",{QHeader:ve["a"],QToolbar:ye["a"],QSpace:O["a"]});var we=function(){var e=this,t=e._self._c;return t("q-drawer",{attrs:{mini:e.miniDrawer,side:"left",width:240,"mini-width":52},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t("div",{attrs:{id:"drawer"}},[e._l(e.menus,(function(s){return[s.access&&e.checkTenantMenu(s.label)?t("Menu",{key:s.id,attrs:{menu:s,"is-active":s.label===e.activeMenu},on:{click:function(t){return e.goto(s.route)}}}):e._e()]})),t("q-space"),e.checkTenant?t("Menu",{attrs:{menu:{label:"help center",icon:"mdi-help-circle-outline",activeIcon:"mdi-help-circle"}},on:{click:function(t){return e.goto("helpCenter")}}}):e._e()],2)])},Ce=[],ke=function(){var e=this,t=e._self._c;return t("div",e._g({directives:[{name:"tooltip",rawName:"v-tooltip:secondary.right",value:e.menu.label,expression:"menu.label",arg:"secondary",modifiers:{right:!0}}],class:{active:e.isActive},attrs:{id:"menu"}},e.$listeners),[t("BaseIcon",{attrs:{name:e.isActive?e.menu.activeIcon:e.menu.icon,color:""}}),e.isActive?t("div",{staticClass:"indicator"}):e._e()],1)},Se=[],_e={name:"Menu",props:{menu:{type:Object,required:!0},isActive:{type:Boolean,default:!1}}},Ie=_e,xe=(s("2e65"),Object(u["a"])(Ie,ke,Se,!1,null,"87127af4",null)),Te=xe.exports,$e={name:"Drawer",components:{Menu:Te},data(){return{drawer:!0,miniDrawer:!0,menus:[{id:this.$nano.id(),label:"dashboard",route:"dashboard",icon:"o_dashboard",activeIcon:"dashboard",access:!0},{id:this.$nano.id(),label:"workspaces",route:"workspaces-overview",icon:"mdi-briefcase-outline",activeIcon:"mdi-briefcase",access:!1},{id:this.$nano.id(),label:"folders",route:"repositories-browse",icon:"eva-archive-outline",activeIcon:"eva-archive",access:!0},{id:this.$nano.id(),label:"tasks",route:"tasks-overview",icon:"eva-cube-outline",activeIcon:"eva-cube",access:!1},{id:this.$nano.id(),label:"portals",route:"portals-browse",icon:"eva-globe-outline",activeIcon:"eva-globe",access:!1},{id:this.$nano.id(),label:"forms",route:"forms-overview",icon:"mdi-text-box-outline",activeIcon:"mdi-text-box",access:!1},{id:this.$nano.id(),label:"workflows",route:"workflows-inbox",icon:"o_account_tree",activeIcon:"account_tree",access:!0},{id:this.$nano.id(),label:"reports",route:"reports",icon:"eva-pie-chart-outline",activeIcon:"eva-pie-chart",access:!1},{id:this.$nano.id(),label:"settings",route:"settings",icon:"eva-settings-2-outline",activeIcon:"eva-settings-2",access:!1}],activeMenu:"",profileMenu:[]}},computed:{checkTenant(){let e=location.origin;return"https://demo.ezofis.com"===e||"http://52.172.32.88"===e||"http://localhost:8080"===e}},watch:{$route:{immediate:!0,handler(){"user"===this.$route.meta.menu||"group"===this.$route.meta.menu||"profile"===this.$route.meta.menu?this.activeMenu="settings":this.activeMenu=this.$route.meta.menu}}},created(){this.$store.state.session.profile&&(0===this.$store.state.profileMenus.length?this.getProfileMenu():this.menus.forEach(e=>{var t;e.access||(e.access=null===(t=this.$store.state.profileMenus.find(t=>t[e.label]))||void 0===t?void 0:t[e.label])}))},methods:{goto(e){this.$router.push({name:e})},checkTenantMenu(e){let t=location.origin;return"http://localhost:80801"!==t&&"http://10.16.7.1"!==t||("dashboard"===e||"workspaces"===e||"folders"===e||"tasks"===e||"settings"===e)},async getProfileMenu(){const{error:e,payload:t}=await P["n"].getProfileList(this.$store.state.session.profile.id);e?this.$alert.error(e):(this.profileMenu=t?JSON.parse(t.menuOptions):[],this.menus.forEach(e=>{var t;e.access||(e.access=null===(t=this.profileMenu.find(t=>t[e.label]))||void 0===t?void 0:t[e.label])}),M["a"].commit("setProfileMenu",this.profileMenu))}}},Ae=$e,Fe=(s("b591"),s("9404")),Le=Object(u["a"])(Ae,we,Ce,!1,null,"5cfd261b",null),Be=Le.exports;R()(Le,"components",{QDrawer:Fe["a"],QSpace:O["a"]});var Pe={name:"AppLayout",components:{Toolbar:ge,Drawer:Be}},De=Pe,Me=s("4d5a"),qe=s("09e3"),Ne=Object(u["a"])(De,i,a,!1,null,"afde89cc",null);t["a"]=Ne.exports;R()(Ne,"components",{QLayout:Me["a"],QPageContainer:qe["a"]})},"5ab0":function(e,t,s){"use strict";s("a945")},"5b8f":function(e,t,s){"use strict";s("affa")},"5ca1":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("BaseIcon",{staticClass:"q-mx-xs",class:e.color,attrs:{id:"separator",name:"eva-chevron-right","inherit-color":"",size:"18px"}})},a=[],o=s("2f62"),r={name:"Separator",computed:{...Object(o["c"])(["darkTheme"]),color(){return this.darkTheme?"text-gray-6":"text-gray-5"}}},n=r,l=s("2877"),c=Object(l["a"])(n,i,a,!1,null,"d7a62b86",null);t["a"]=c.exports},"5d0b":function(e,t,s){},"5e23":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,"no-padding":!0,"has-footer":"",width:"650px"},on:{input:function(t){return e.$emit("input",!1)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Document Sharing By Email")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"document-sharing-details"}},[t("Tabs",{staticClass:"tabs",attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),t("BaseScrollbar",{attrs:{height:"calc(100vh - 170px)"}},[t("div",{staticClass:"q-pa-md"},[t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"field-wrapper"},[t("ValidationProvider",{attrs:{name:"to",rules:{required:!0,email:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("MultiSelectField",{staticClass:"q-mb-sm",attrs:{label:"to","is-mandatory":"","new-option":"",error:s[0]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})]}}])}),t("ValidationProvider",{attrs:{name:"subject",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{staticClass:"q-mb-sm",attrs:{label:"subject","is-mandatory":"",error:s[0]},model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}})]}}])}),"attach link"===e.tab?[t("div",{staticClass:"row"},[t("div",{staticClass:"col-6 q-pr-sm"},[t("ValidationProvider",{attrs:{name:"Expiry from Date",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateField",{staticClass:"q-mb-sm",attrs:{label:"Expiry from Date","is-mandatory":"",error:s[0],"minimum-validation":!0},model:{value:e.fromDate,callback:function(t){e.fromDate=t},expression:"fromDate"}})]}}],null,!1,714078504)})],1),t("div",{staticClass:"col-6 q-pl-sm"},[t("ValidationProvider",{attrs:{name:"Expiry to Date",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateField",{staticClass:"q-mb-sm",attrs:{label:"Expiry to Date","is-mandatory":"",error:s[0],"minimum-validation":!0},model:{value:e.toDate,callback:function(t){e.toDate=t},expression:"toDate"}})]}}],null,!1,738413864)})],1)])]:e._e(),e._l(e.fileList,(function(s){return[t("q-chip",{key:s.id,staticClass:"chips secondary-hover cursor-pointer",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{attrs:{icon:"mdi-file",color:"secondary","text-color":"white"},on:{click:function(t){return e.remove(s.id)}}}),e._v(" "+e._s(s.name)+" "),t("q-avatar",{staticClass:"close-icon",attrs:{icon:"mdi-close","text-color":"red"},on:{click:function(t){return e.remove(s.id)}}})],1)]})),t("TextBuilderField",{model:{value:e.body,callback:function(t){e.body=t},expression:"body"}})],2)])],1)])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:function(t){return e.$emit("input",!1)}}}),t("BaseButton",{attrs:{label:"send"},on:{click:e.documentShare}})]},proxy:!0}])})},a=[],o=(s("14d9"),s("7bb1")),r=s("381e"),n=s("b94d"),l=s("b3d1"),c=s("53c1"),d=s("c3d2"),u=s("695e"),m=s("1b0d"),h={name:"EmailSharing",components:{Sheet:r["a"],ValidationObserver:o["a"],ValidationProvider:o["b"],TextField:l["a"],Tabs:n["a"],DateField:c["a"],MultiSelectField:d["a"],TextBuilderField:u["a"]},props:{value:{type:Boolean,default:!1},repositoryId:{type:Number,default:0},fileList:{type:Array,default:()=>[]}},data(){return{tab:"attach file",tabs:[{id:this.$nano.id(),label:"attach file",value:"attach file"},{id:this.$nano.id(),label:"attach link",value:"attach link"}],email:[],subject:"",body:"",fromDate:"",toDate:"",minimumFromDate:""}},created(){const e=new Date,t=e.toISOString().split("T")[0];this.minimumFromDate=t},methods:{clearFields(){this.tab="attach file",this.email=[],this.subject="",this.body="",this.fromDate="",this.toDate=""},remove(e){if(this.fileList.length>1){let t=this.fileList.filter(t=>t.id!=e);this.$emit("update:fileList",t)}else this.$alert.warning("Minimum one document is required")},async documentShare(){const e=await this.$refs.form.validate();if(!e)return;let t=[];if(this.fileList.forEach(e=>{t.push(e.id)}),"attach file"===this.tab){let e={repositoryId:this.repositoryId,itemIds:t,toAdd:this.email.toString(),subject:this.subject,body:this.body};const{error:s}=await m["k"].documentShare(e);if(s)return void this.$alert.error(s)}else if("attach link"===this.tab){if(this.toDate<this.fromDate)return void this.$alert.warning("ToDate Is Must Be Greater Than Or Equal To FromDate");let e={toAddress:this.email.toString(),subject:this.subject,body:this.body,expiryFromDate:this.fromDate,expiryTodate:this.toDate,repositoryId:this.repositoryId,itemIdArray:t};const{error:s}=await m["k"].documentShareLink(e);if(s)return void this.$alert.error(s)}this.$alert.success("Initiated Document Sharing by Email"),this.clearFields(),this.$emit("input",!1)}}},p=h,f=(s("5fab"),s("2877")),v=s("b047"),y=s("cb32"),b=s("93dc"),g=s.n(b),w=Object(f["a"])(p,i,a,!1,null,"2c37c0ea",null);t["a"]=w.exports;g()(w,"components",{QChip:v["a"],QAvatar:y["a"]})},"5e5c":function(e,t,s){"use strict";s("204d")},"5f17":function(e,t,s){},"5f3d":function(e,t,s){},"5fab":function(e,t,s){"use strict";s("467fa")},"61cf":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[e.showWorkspaceRepository?[t("WorkspaceList",{model:{value:e.workspaceId,callback:function(t){e.workspaceId=t},expression:"workspaceId"}}),t("RepositoryList",{attrs:{"workspace-id":e.workspaceId},model:{value:e.repositoryId,callback:function(t){e.repositoryId=t},expression:"repositoryId"}})]:e._e(),t("div",{class:[{"is-dragging":e.isDragging},{"is-indexing":e.tabIndexing}],attrs:{id:"dropzone"}},[t("div",{staticClass:"hint"},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"128px","inherit-color":""}}),t("div",{staticClass:"title"},[e._v("Drag & Drop your files here to upload")]),t("div",{staticClass:"description"},[e._v(" Simply dragging and dropping them from the user's computer or device onto a designated area on the screen ")]),t("OrDivider",{staticClass:"full-width"}),e.tabIndexing?t("BaseButton",{attrs:{icon:"eva-plus",label:"Add more files"}}):t("BaseButton",{attrs:{label:"browse files"}})],1),t("input",{ref:"dropzone",attrs:{type:"file",multiple:e.hasMultiple},on:{dragenter:function(t){e.isDragging=!0},dragleave:function(t){e.isDragging=!1},drop:function(t){e.isDragging=!1},change:e.handleChange}})])],2)},a=[],o=(s("caad"),s("14d9"),s("42dc")),r=s("dc7a"),n=s("9c79"),l=s("2f62"),c=s("dd90"),d={name:"Dropzone",components:{WorkspaceList:o["a"],RepositoryList:r["a"],OrDivider:n["a"]},props:{workspaceId:{type:Number,required:!0},repositoryId:{type:Number,required:!0},hasMultiple:{type:Boolean,default:!0},showWorkspaceRepository:{type:Boolean,default:!0},tabIndexing:{type:Boolean,default:!1}},data(){return{isDragging:!1}},computed:{...Object(l["c"])(["session"]),fileSizeLimit(){return this.session.license,52428800}},methods:{handleChange(e){const t=e.target.files,s=[],i=["exe"];if(t.length){for(let e of t){if(e.size>this.fileSizeLimit)return void this.$alert.warning(e.name+" - Maximum file size exceeded");const t=e.name.split(".").reverse()[0];if(i.includes(t))return void this.$alert.warning(e.name+" - Invalid file type");if(!Object(c["a"])(t))return void this.$alert.warning(e.name+" - Invalid file type");s.push({id:this.$nano.id(),name:e.name,type:t.slice(0,4),size:e.size,createdAt:"",status:"UPLOADING",file:e,uploadedPercentage:0})}this.$refs.dropzone.value="",this.$emit("upload",s)}}}},u=d,m=(s("9495"),s("2877")),h=Object(m["a"])(u,i,a,!1,null,"dc127c58",null);t["a"]=h.exports},"626d":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("Modal",{attrs:{value:e.value,"is-header":!1,"has-footer":!0,width:"60vw",height:"80vh"},on:{input:function(t){return e.$emit("input")}},scopedSlots:e._u([{key:"default",fn:function(){return[e.summarizeView?[t("div",{staticClass:"footer-modal q-pa-sm"},[t("BaseIcon",{attrs:{name:"mdi-creation",color:"secondary"}}),t("span",{staticClass:"footer-text"},[e._v("Recommended Action:")]),e._v(" "+e._s(e.summarizingData.description)+" ")],1),t("div",{staticClass:"q-pt-md"},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 320px)"}},[t("table",[t("tbody",[e._l(e.summarizingData.data,(function(s,i){return["string"===typeof s?[t("tr",{key:i},[t("td",{staticClass:"tablekey"},[e._v(e._s(i))]),t("td",{staticClass:"tablevalue"},[e._v(e._s(s))])])]:"object"===typeof s?[Array.isArray(s)?[t("tr",{key:i},[t("td",{staticClass:"tablekey",staticStyle:{color:"#643094"},attrs:{colspan:"2"}},[e._v(" "+e._s(i)+" ")])]),t("tr",{key:i},[t("td",{attrs:{colspan:"2"}},[t("table",{staticClass:"sub-table"},[t("thead",[t("tr",e._l(s[0],(function(s,i){return t("th",{key:i,staticClass:"tablevalue",staticStyle:{color:"#00bcd4"}},[e._v(" "+e._s(i)+" ")])})),0)]),t("tbody",e._l(s,(function(s,i){return t("tr",{key:i},e._l(s,(function(s,i){return t("td",{key:i,staticClass:"tablevalue"},[e._v(" "+e._s(s)+" ")])})),0)})),0)])])])]:[t("tr",{key:i},[t("td",{staticClass:"tablekey",staticStyle:{color:"#643094"},attrs:{colspan:"2"}},[e._v(" "+e._s(i)+" ")])]),e._l(s,(function(s,i){return["string"===typeof s?[t("tr",{key:i},[t("td",{staticClass:"tablekey"},[e._v(e._s(i))]),t("td",{staticClass:"tablevalue"},[e._v(e._s(s))])])]:"object"===typeof s?[t("tr",{key:i},[t("td",{staticClass:"tablekey",staticStyle:{color:"#f49d3a"},attrs:{colspan:"2"}},[e._v(" "+e._s(i)+" ")])]),e._l(s,(function(s,i){return["string"===typeof s?[t("tr",{key:i},[t("td",{staticClass:"tablekey"},[e._v(e._s(i))]),t("td",{staticClass:"tablevalue"},[e._v(" "+e._s(s)+" ")])])]:e._e()]}))]:"array"===typeof s?[t("tr",{key:i},[t("td",{attrs:{colspan:"2"}},[e._v(e._s(i))])]),e._l(s,(function(s,i){return["string"===typeof e.objectvalueobject?[t("tr",{key:i},[t("td",{staticClass:"tablekey"},[e._v(e._s(i))]),t("td",{staticClass:"tablevalue"},[e._v(" "+e._s(s)+" ")])])]:e._e()]}))]:e._e()]}))]]:e._e()]}))],2)])])],1)]:[t("div",{staticClass:"htmlElement",domProps:{innerHTML:e._s(e.summarizingData)}})]]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Close"},on:{click:function(t){return e.$emit("input",!1)}}})]},proxy:!0}])})},a=[],o=s("6a70"),r=s("1b0d"),n={name:"Summarize",components:{Modal:o["a"]},props:{value:{type:Boolean,default:!1},repositoryId:{type:Number,default:0},itemid:{type:Number,default:0},transactionId:{type:Number,default:0},workflowId:{type:Number,default:0},processId:{type:Number,default:0},page:{type:String,default:""}},data(){return{summarizingData:"",summarizeView:!1}},watch:{value:{immediate:!0,handler(){this.value&&("REPOSITORY"===this.page?this.documentSummarize():"WORKFLOW"===this.page&&this.workflowRecommendation())}}},methods:{async documentSummarize(){this.$store.commit("showLoadingBarSave");const{error:e,payload:t}=await r["p"].getSummary(this.repositoryId,this.itemid);if(this.$store.commit("hideLoadingBarSave"),e)this.$alert.error(e);else if(t)try{this.summarizingData=JSON.parse(t.output),this.summarizeView=!0}catch(s){console.log(s),this.summarizeView=!1,this.summarizingData=t.output.replace(new RegExp("<title>","g"),'<title class="heading" style="display:block">').replace(new RegExp("<h1>","g"),'<h6 class="heading">').replace(new RegExp("<h2>","g"),'<h6 class="heading2">').replace(new RegExp("<table>","g"),'<table class="custom-table-style">').replace(new RegExp("<p>","g"),'<p style="margin-top:20px">')}},async workflowRecommendation(){this.$store.commit("showLoadingBarSave");const{error:e,payload:t}=await r["t"].getWorkflowRecommendation(this.workflowId,this.processId,this.transactionId);if(this.$store.commit("hideLoadingBarSave"),e)this.$alert.error(e);else if(t)try{this.summarizingData=JSON.parse(t.output),this.summarizeView=!0}catch(s){console.log(s),this.summarizeView=!1,this.summarizingData=t.replace(new RegExp("<title>","g"),'<title class="heading" style="display:block">').replace(new RegExp("<h1>","g"),'<h6 class="heading">').replace(new RegExp("<h2>","g"),'<h6 class="heading2">').replace(new RegExp("<table>","g"),'<table class="custom-table-style">').replace(new RegExp("<p>","g"),'<p style="margin-top:20px">')}}}},l=n,c=(s("3595"),s("e864"),s("2877")),d=Object(c["a"])(l,i,a,!1,null,"85a6110e",null);t["a"]=d.exports},"64ab":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"tip-tap-editor"}},[t("Toolbar",{attrs:{"hide-tool-bar":e.hideToolBar,"form-columns":e.formColumns},on:{"set-heading":e.setHeading,"unset-heading":e.unsetHeading,"toggle-alignment":e.toggleAlignment,"toggle-bold":e.toggleBold,"toggle-italic":e.toggleItalic,"toggle-underline":e.toggleUnderline,"toggle-bullet-list":e.toggleBulletList,"toggle-number-list":e.toggleNumberList,"increase-indent":e.increaseIndent,"decrease-indent":e.decreaseIndent,"set-text-color":e.setTextColor,"unset-text-color":e.unsetTextColor,"set-bg-color":e.setBgColor,"unset-bg-color":e.unsetBgColor,undo:e.undo,redo:e.redo,"set-link":e.setLink,"add-field":e.addField}}),t("EditorContent",{attrs:{editor:e.editor}})],1)},a=[],o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"toolbar"}},[t("AddField",{attrs:{"form-columns":e.formColumns},on:{click:e.addField}}),e.hideToolBar?[t("Heading",{on:{set:e.setHeading,unset:e.unsetHeading}}),t("Alignment",{on:{toggle:e.toggleAlignment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"bold",expression:"'bold'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-bold"},on:{click:e.toggleBold}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"italic",expression:"'italic'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-italic"},on:{click:e.toggleItalic}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"underline",expression:"'underline'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-underline"},on:{click:e.toggleUnderline}}),t("List",{on:{bullet:e.toggleBulletList,number:e.toggleNumberList}}),t("Indent",{on:{increase:e.increaseIndent,decrease:e.decreaseIndent}}),t("TextColor",{on:{set:e.setTextColor,unset:e.unsetTextColor}}),t("BackgroundColor",{on:{set:e.setBgColor,unset:e.unsetBgColor}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"undo",expression:"'undo'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-undo"},on:{click:e.undo}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"redo",expression:"'redo'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-redo"},on:{click:e.redo}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"link",expression:"'link'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-link-2-outline"},on:{click:e.setLink}})]:e._e()],2)},r=[],n=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"heading",expression:"'heading'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-size"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},e._l(e.headings,(function(s){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:s.label,expression:"heading.label",modifiers:{right:!0}}],key:s.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:s.icon},on:{click:function(t){return e.handleClick(s.level)}}})})),1)],1)},l=[],c={name:"Heading",data(){return{headings:[{id:this.$nano.id(),label:"heading 1",icon:"mdi-format-header-1",level:1},{id:this.$nano.id(),label:"heading 2",icon:"mdi-format-header-2",level:2},{id:this.$nano.id(),label:"heading 3",icon:"mdi-format-header-3",level:3},{id:this.$nano.id(),label:"heading 4",icon:"mdi-format-header-4",level:4},{id:this.$nano.id(),label:"heading 5",icon:"mdi-format-header-5",level:5},{id:this.$nano.id(),label:"heading 6",icon:"mdi-format-header-6",level:6},{id:this.$nano.id(),label:"normal",icon:"mdi-format-paragraph",level:0}]}},methods:{handleClick(e){e?this.$emit("set",e):this.$emit("unset")}}},d=c,u=s("2877"),m=s("4e73"),h=s("93dc"),p=s.n(h),f=Object(u["a"])(d,n,l,!1,null,"5b56e398",null),v=f.exports;p()(f,"components",{QMenu:m["a"]});var y=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"alignment",expression:"'alignment'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-align-center"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},e._l(e.alignments,(function(s){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:s.label,expression:"alignment.label",modifiers:{right:!0}}],key:s.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:s.icon},on:{click:function(t){return e.$emit("toggle",s.label)}}})})),1)],1)},b=[],g={name:"Alignment",data(){return{alignments:[{id:this.$nano.id(),label:"left",icon:"mdi-format-align-left"},{id:this.$nano.id(),label:"center",icon:"mdi-format-align-center"},{id:this.$nano.id(),label:"right",icon:"mdi-format-align-right"},{id:this.$nano.id(),label:"justify",icon:"mdi-format-align-justify"}]}}},w=g,C=Object(u["a"])(w,y,b,!1,null,"4a6ff39e",null),k=C.exports;p()(C,"components",{QMenu:m["a"]});var S=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"list",expression:"'list'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-list-bulleted-square"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},e._l(e.lists,(function(s){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:s.label,expression:"list.label",modifiers:{right:!0}}],key:s.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:s.icon},on:{click:function(t){return e.$emit(s.value)}}})})),1)],1)},_=[],I={name:"List",data(){return{lists:[{id:this.$nano.id(),label:"bullet list",icon:"mdi-format-list-bulleted",value:"bullet"},{id:this.$nano.id(),label:"number list",icon:"mdi-format-list-numbered",value:"number"}]}}},x=I,T=Object(u["a"])(x,S,_,!1,null,"6f405cc2",null),$=T.exports;p()(T,"components",{QMenu:m["a"]});var A=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"indent",expression:"'indent'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-indent-increase"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},e._l(e.indents,(function(s){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:s.label,expression:"indent.label",modifiers:{right:!0}}],key:s.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:s.icon},on:{click:function(t){return e.$emit(s.value)}}})})),1)],1)},F=[],L={name:"Indent",data(){return{indents:[{id:this.$nano.id(),label:"increase indent",icon:"mdi-format-indent-increase",value:"increase"},{id:this.$nano.id(),label:"decrease indent",icon:"mdi-format-indent-decrease",value:"decrease"}]}}},B=L,P=Object(u["a"])(B,A,F,!1,null,"fd1a0bc6",null),D=P.exports;p()(P,"components",{QMenu:m["a"]});var M=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"text color",expression:"'text color'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"format_color_text"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"auto-close":"","transition-show":"scale","transition-hide":"scale"}},[t("div",{attrs:{id:"colors"}},e._l(e.colors,(function(s){return t("div",{key:s.id,staticClass:"color",style:{backgroundColor:s.value},on:{click:function(t){return e.handleInput(s)}}},[e.activeColor===s.value?t("BaseIcon",{attrs:{name:"eva-checkmark",color:"white"}}):e._e()],1)})),0)])],1)},q=[],N={name:"TextColor",data(){return{colors:[{id:this.$nano.id(),label:"primary",value:"#643094"},{id:this.$nano.id(),label:"secondary",value:"#00bcd4"},{id:this.$nano.id(),label:"red",value:"#f44336"},{id:this.$nano.id(),label:"pink",value:"#e91e63"},{id:this.$nano.id(),label:"purple",value:"#9c27b0"},{id:this.$nano.id(),label:"deep-purple",value:"#673ab7"},{id:this.$nano.id(),label:"indigo",value:"#3f51b5"},{id:this.$nano.id(),label:"blue",value:"#2196f3"},{id:this.$nano.id(),label:"teal",value:"#009688"},{id:this.$nano.id(),label:"green",value:"#4caf50"},{id:this.$nano.id(),label:"light-green",value:"#8bc34a"},{id:this.$nano.id(),label:"lime",value:"#cddc39"},{id:this.$nano.id(),label:"amber",value:"#ffc107"},{id:this.$nano.id(),label:"orange",value:"#ff9800"},{id:this.$nano.id(),label:"deep-orange",value:"#ff5722"},{id:this.$nano.id(),label:"brown",value:"#795548"},{id:this.$nano.id(),label:"gray",value:"#64748b"},{id:this.$nano.id(),label:"none",value:""}],activeColor:""}},methods:{handleInput(e){this.activeColor=e.value,"none"!==e.label?this.$emit("set",e.value):this.$emit("unset")}}},O=N,E=(s("718c"),Object(u["a"])(O,M,q,!1,null,"781fdde1",null)),V=E.exports;p()(E,"components",{QMenu:m["a"]});var R=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"background color",expression:"'background color'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-color-palette-outline"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"auto-close":"","transition-show":"scale","transition-hide":"scale"}},[t("div",{attrs:{id:"colors"}},e._l(e.colors,(function(s){return t("div",{key:s.id,staticClass:"color",style:{backgroundColor:s.value},on:{click:function(t){return e.handleInput(s)}}},[e.activeColor===s.value?t("BaseIcon",{attrs:{name:"eva-checkmark",color:"white"}}):e._e()],1)})),0)])],1)},z=[],j={name:"BackgroundColor",data(){return{colors:[{id:this.$nano.id(),label:"primary",value:"#dec2e7"},{id:this.$nano.id(),label:"secondary",value:"#b2ebf2"},{id:this.$nano.id(),label:"red",value:"#ffcdd2"},{id:this.$nano.id(),label:"pink",value:"#f8bbd0"},{id:this.$nano.id(),label:"purple",value:"#e1bee7"},{id:this.$nano.id(),label:"deep-purple",value:"#d1c4e9"},{id:this.$nano.id(),label:"indigo",value:"#c5cae9"},{id:this.$nano.id(),label:"blue",value:"#bbdefb"},{id:this.$nano.id(),label:"teal",value:"#b2dfdb"},{id:this.$nano.id(),label:"green",value:"#c8e6c9"},{id:this.$nano.id(),label:"lime",value:"#f0f4c3"},{id:this.$nano.id(),label:"amber",value:"#ffecb3"},{id:this.$nano.id(),label:"orange",value:"#ffe0b2"},{id:this.$nano.id(),label:"deep-orange",value:"#ffccbc"},{id:this.$nano.id(),label:"brown",value:"#d7ccc8"},{id:this.$nano.id(),label:"none",value:""}],activeColor:""}},methods:{handleInput(e){this.activeColor=e.value,"none"!==e.label?this.$emit("set",e.value):this.$emit("unset")}}},H=j,U=(s("e21c"),Object(u["a"])(H,R,z,!1,null,"6647f5ea",null)),W=U.exports;p()(U,"components",{QMenu:m["a"]});var J=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"add field",expression:"'add field'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-plus"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale"}},[t("div",{staticClass:"row border"},[t("div",{staticClass:"title-3 q-pa-xs col-auto"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchColumns,expression:"searchColumns"}],ref:"searchQuery",staticClass:"q-pa-md",attrs:{type:"text",placeholder:"Search",autofocus:""},domProps:{value:e.searchColumns},on:{keyup:function(t){return e.searchColumnList(e.searchColumns)},input:function(t){t.target.composing||(e.searchColumns=t.target.value)}}})])]),t("BaseScrollbar",{attrs:{height:"200px"}},e._l(e.fields,(function(s){return t("ListItem",{key:s.id,staticClass:"text-capitalize",class:s.display,attrs:{label:s.label,color:s.color},on:{click:function(t){return e.$emit("click",s)}}})})),1)],1)],1)},G=[],Q=(s("14d9"),s("caad"),s("cade")),Y={name:"AddField",components:{ListItem:Q["a"]},props:{formColumns:{type:Array,default:()=>[]}},data(){return{fields:[],searchColumns:""}},watch:{formColumns:{immediate:!0,handler(){this.formColumns.length&&this.formColumns.forEach(e=>{this.fields.push({id:this.$nano.id(),label:e.label,value:e.hasDefault?e.value:`#F#${e.label}#F#`,display:"",color:e.hasDefault?e.color:"#00bcd4"})})}}},methods:{searchColumnList(e){this.fields.forEach(t=>{t.display="",e&&(t.label.toLowerCase().includes(e.toLowerCase())||(t.display="hide"))})}}},K=Y,X=(s("ea98"),Object(u["a"])(K,J,G,!1,null,"42d457c1",null)),Z=X.exports;p()(X,"components",{QMenu:m["a"]});var ee={name:"Toolbar",components:{Heading:v,Alignment:k,List:$,Indent:D,TextColor:V,BackgroundColor:W,AddField:Z},props:{hideToolBar:{type:Boolean,default:!1},formColumns:{type:Array,default:()=>[]}},methods:{setHeading(e){this.$emit("set-heading",e)},unsetHeading(){this.$emit("unset-heading")},toggleAlignment(e){this.$emit("toggle-alignment",e)},toggleBold(){this.$emit("toggle-bold")},toggleItalic(){this.$emit("toggle-italic")},toggleUnderline(){this.$emit("toggle-underline")},toggleBulletList(){this.$emit("toggle-bullet-list")},toggleNumberList(){this.$emit("toggle-number-list")},increaseIndent(){this.$emit("increase-indent")},decreaseIndent(){this.$emit("decrease-indent")},setTextColor(e){this.$emit("set-text-color",e)},unsetTextColor(){this.$emit("unset-text-color")},setBgColor(e){this.$emit("set-bg-color",e)},unsetBgColor(){this.$emit("unset-bg-color")},undo(){this.$emit("undo")},redo(){this.$emit("redo")},setLink(){this.$emit("set-link")},addField(e){this.$emit("add-field",e)}}},te=ee,se=(s("8829"),Object(u["a"])(te,o,r,!1,null,"10d390a9",null)),ie=se.exports,ae=s("1ab4"),oe=s("672a"),re=s("3560"),ne=s("cc86"),le=s("97a2"),ce=s("58e6"),de=s("e8d8"),ue=s("9751"),me=s("795d"),he=s("9980"),pe=function(){var e=this,t=e._self._c;return t("NodeViewWrapper",{staticClass:"field-placeholder-wrapper"},[t("div",{attrs:{id:"field-placeholder"}},[t("div",{staticClass:"field"},[e._v(" "+e._s(e.node.attrs.fieldType)+" ")]),t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-close",color:"red"},on:{click:e.deleteNode}})],1)])},fe=[],ve={name:"FieldPlaceholder",components:{NodeViewWrapper:ae["c"]},props:ae["e"]},ye=ve,be=(s("2f12"),Object(u["a"])(ye,pe,fe,!1,null,"f6682294",null)),ge=be.exports,we=he["d"].create({name:"FieldPlaceholder",group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{fieldType:{type:String,required:!0}}},parseHTML(){return[{tag:"FieldPlaceholder"}]},renderHTML({HTMLAttributes:e}){return["FieldPlaceholder",Object(he["r"])(e)]},addNodeView(){return Object(ae["d"])(ge)}}),Ce=s("dce4"),ke={name:"TextEditor",components:{Toolbar:ie,EditorContent:ae["b"]},props:{value:{type:Object,required:!0},field:{type:Object,default:()=>{}},hideToolBar:{type:Boolean,default:!0},formColumns:{type:Array,default:()=>[]}},data(){return{editor:null,textContent:""}},watch:{editor:{deep:!0,handler(){if(this.value){const t=new DOMParser,s=t.parseFromString(this.editor.getHTML(),"text/html");var e="";s.body.childNodes.forEach(t=>{let s=t.outerHTML.replace(new RegExp('"></fieldplaceholder>',"g"),""),i=s.split('<fieldplaceholder fieldtype="');e+=i.join("")});let i={text:this.editor.getHTML(),content:e};this.$emit("input",i)}}}},created(){this.initiateEditor()},beforeDestroy(){this.editor.destroy()},methods:{initiateEditor(){this.editor=new ae["a"]({content:this.value.text,extensions:[oe["a"],re["a"],ne["a"],le["a"].configure({types:["heading","paragraph"]}),ce["a"],de["a"],ue["a"].configure({multicolor:!0}),me["a"].configure({placeholder:"Start typing "}),we,Text,Ce["b"]]})},setHeading(e){this.editor.chain().focus().toggleHeading({level:e}).run()},unsetHeading(){this.editor.chain().focus().clearNodes().unsetAllMarks().run()},toggleAlignment(e){this.editor.chain().focus().setTextAlign(e).run()},toggleBold(){this.editor.chain().focus().toggleBold().run()},toggleItalic(){this.editor.chain().focus().toggleItalic().run()},toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()},toggleBulletList(){this.editor.chain().focus().toggleBulletList().run()},toggleNumberList(){this.editor.chain().focus().toggleOrderedList().run()},increaseIndent(){this.editor.chain().focus().sinkListItem("listItem").run()},decreaseIndent(){this.editor.chain().focus().liftListItem("listItem").run()},undo(){this.editor.chain().focus().undo().run()},redo(){this.editor.chain().focus().redo().run()},setLink(){const e=this.editor.getAttributes("link").href,t=window.prompt("URL",e);null!==t&&(t?this.editor.chain().focus().extendMarkRange("link").setLink({href:t}).run():this.editor.chain().focus().extendMarkRange("link").unsetLink().run())},setTextColor(e){this.editor.chain().focus().setColor(e).run()},unsetTextColor(){this.editor.chain().focus().unsetColor().run()},setBgColor(e){this.editor.chain().focus().setHighlight({color:e}).run()},unsetBgColor(){this.editor.chain().focus().unsetHighlight().run()},addField(e){const t=`<FieldPlaceholder fieldId="${e.id}" fieldType="${e.value}">${e.value}</FieldPlaceholder>`;this.editor.chain().focus().insertContent(t).run()}}},Se=ke,_e=(s("74d9"),Object(u["a"])(Se,i,a,!1,null,"b184c692",null));t["a"]=_e.exports},"651a":function(e,t,s){e.exports=s.p+"img/psg-logo.20670f47.png"},"65c0":function(e,t,s){},"65c6":function(e,t,s){"use strict";var i=s("a026"),a=s("87e8"),o=s("e277");const r={role:"toolbar"};t["a"]=i["default"].extend({name:"QToolbar",mixins:[a["a"]],props:{inset:Boolean},render(e){return e("div",{staticClass:"q-toolbar row no-wrap items-center",class:this.inset?"q-toolbar--inset":null,attrs:r,on:{...this.qListeners}},Object(o["c"])(this,"default"))}})},"670a":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"toggle"}},e._l(e.options,(function(s){return t("div",{key:s,staticClass:"option",class:{"is-selected":e.value===s},on:{click:function(t){return e.$emit("input",s)}}},[e._v(" "+e._s(s)+" ")])})),0)},a=[],o={name:"Toggle",props:{value:{type:String,required:!0},options:{type:Array,required:!0}}},r=o,n=(s("fa79"),s("2877")),l=Object(n["a"])(r,i,a,!1,null,"0e83c5c2",null);t["a"]=l.exports},"686b":function(e,t,s){},"6c88":function(e,t,s){"use strict";s("5d0b")},"6d35":function(e,t,s){"use strict";s.r(t);var i=function(){var e,t,s=this,i=s._self._c;return i("AppLayout",[i("ViewWrapper",{attrs:{title:"Connection",tab:"api-browse",breadcrumbs:s.breadcrumbs},on:{quickHelp:s.showQuickHelp},scopedSlots:s._u([{key:"header-actions",fn:function(){return[i("BaseButton",{staticClass:"q-ml-md",attrs:{icon:"eva-plus",label:"add lookup"},on:{click:s.addLookup}})]},proxy:!0}])},[i("QuickHelp",{model:{value:s.quickHelp,callback:function(e){s.quickHelp=e},expression:"quickHelp"}}),i("div",{attrs:{id:"integration-builder-browse"}},[i("Portal",{attrs:{to:"action-bar"}},[i("ItemActions",{staticClass:"q-mb-sm",attrs:{item:"connection entry",columns:s.columns,"group-by":s.groupBy,order:s.sortBy.order,"filter-by":s.filterBy,"active-view":s.activeView,criteria:s.sortBy.criteria},on:{"update:columns":function(e){s.columns=e},"update:groupBy":function(e){s.groupBy=e},"update:group-by":function(e){s.groupBy=e},"update:order":function(e){return s.$set(s.sortBy,"order",e)},"update:filterBy":function(e){s.filterBy=e},"update:filter-by":function(e){s.filterBy=e},"update:activeView":function(e){s.activeView=e},"update:active-view":function(e){s.activeView=e},"update:criteria":function(e){return s.$set(s.sortBy,"criteria",e)},refresh:s.getLookUp,search:s.searchRow}})],1),i("div",{staticClass:"content"},[i("ItemActionChips",{attrs:{"sort-by":s.sortBy,columns:s.columns,"group-by":s.groupBy,"filter-by":s.filterBy},on:{clearSortBy:s.clearSortBy,clearGroupBy:s.clearGroupBy}}),"GRID"===s.activeView?i("ConnectionEntryGrid",{attrs:{mode:s.mode,items:s.items,columns:s.columns},on:{edit:s.editLooup,more:s.viewConnectionEntry,delete:s.showDeleteConfirmation,restore:s.showRestoreConfirmation}}):s._e(),"LIST"===s.activeView?i("ConnectionEntryList",{attrs:{mode:s.mode,items:s.items,columns:s.columns},on:{edit:s.editLooup,more:s.viewConnectionEntry,delete:s.showDeleteConfirmation,restore:s.showRestoreConfirmation}}):s._e()],1),i("Pagination",{attrs:{"total-items":s.totalItems,"current-page":s.currentPage,"items-per-page":s.itemsPerPage},on:{"update:currentPage":function(e){s.currentPage=e},"update:current-page":function(e){s.currentPage=e},"update:itemsPerPage":function(e){s.itemsPerPage=e},"update:items-per-page":function(e){s.itemsPerPage=e}}}),s.isConnectionDetailsVisible?i("ConnectionDetails",{attrs:{columns:s.columns,entry:s.selectedLookup},on:{edit:s.editLooup,delete:s.showDeleteConfirmation},model:{value:s.isConnectionDetailsVisible,callback:function(e){s.isConnectionDetailsVisible=e},expression:"isConnectionDetailsVisible"}}):s._e(),i("ConfirmDeleteConnectionEntry",{attrs:{"app-name":null===(e=s.selectedLookup)||void 0===e?void 0:e.name},on:{delete:s.updateLookup},model:{value:s.isDeleteConfirmationVisible,callback:function(e){s.isDeleteConfirmationVisible=e},expression:"isDeleteConfirmationVisible"}}),i("ConfirmRestoreConnectionEntry",{attrs:{"app-name":null===(t=s.selectedLookup)||void 0===t?void 0:t.name},on:{restore:s.updateLookup},model:{value:s.isRestoreConfirmationVisible,callback:function(e){s.isRestoreConfirmationVisible=e},expression:"isRestoreConfirmationVisible"}}),i("APIConnection",{attrs:{value:s.addLookUpSheet,entry:s.selectedLookup,"connector-id":s.id},on:{close:s.getLookUp}})],1)],1)],1)},a=[],o=(s("14d9"),s("caad"),s("5a75")),r=s("b822"),n=s("36b4"),l=s("1b0d"),c=s("381b"),d=s("2b88"),u=s("b6d2"),m=s("064c"),h=s("4904"),p=s("77ac"),f=s("7365"),v=s("f00a"),y=s("d5ea"),b=s("ba54"),g=s("fbb4"),w={name:"APILookUpBrowse",components:{AppLayout:o["a"],ViewWrapper:r["a"],QuickHelp:n["a"],Portal:d["Portal"],ItemActionChips:h["a"],ItemActions:m["a"],ConnectionEntryGrid:p["a"],ConnectionEntryList:f["a"],Pagination:u["a"],ConfirmDeleteConnectionEntry:v["a"],ConfirmRestoreConnectionEntry:y["a"],ConnectionDetails:b["a"],APIConnection:g["a"]},props:{mode:{type:String,default:""},id:{type:[String,Number],required:!0}},data(){return{breadcrumbs:[{id:this.$nano.id(),label:"dashboard",route:"dashboard"},{id:this.$nano.id(),label:"settings",route:"settings"},{id:this.$nano.id(),label:"integration",route:"integration-browse"},{id:this.$nano.id(),label:"API",route:"integration-builder",query:"app:API"},{id:this.$nano.id(),label:"browse",route:""}],quickHelp:!1,columns:[{id:this.$nano.id(),name:"name",label:"Name",type:"TITLE",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:c["a"].SHORT_TEXT},{id:this.$nano.id(),name:"apiurl",label:"API URL",type:"SUBTITLE",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:c["a"].SHORT_TEXT},{id:this.$nano.id(),name:"input",label:"Input",type:"NORMAL",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:c["a"].SHORT_TEXT},{id:this.$nano.id(),name:"output",label:"Output",type:"NORMAL",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:c["a"].SHORT_TEXT},{id:this.$nano.id(),name:"createdBy",label:"Created By",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!0,dataType:c["a"].SHORT_TEXT},{id:this.$nano.id(),name:"createdAt",label:"Created At",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!1,dataType:c["a"].DATE_TIME},{id:this.$nano.id(),name:"modifiedBy",label:"Modified By",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!0,dataType:c["a"].SHORT_TEXT},{id:this.$nano.id(),name:"modifiedAt",label:"Modified At",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!1,dataType:c["a"].DATE_TIME}],activeView:"LIST",isDeleteConfirmationVisible:!1,isRestoreConfirmationVisible:!1,sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[],totalItems:0,itemsPerPage:50,currentPage:1,lookups:[],lookupsData:[],selectedLookup:{},jiraConnectSheet:!1,isConnectionDetailsVisible:!1,smtpConnectSheet:!1,sqlConnectSheet:!1,sqlConnectionId:0,addLookUpSheet:!1}},computed:{items(){let e=[];return e=this.lookups.map(({key:e,value:t})=>({key:this.groupBy,value:e,data:t.map(e=>({id:e.id,name:e.name,apiurl:e.hubPoint,connectorId:e.connectorId,input:JSON.parse(e.inDataPoint).toString(),output:JSON.parse(e.outDataPoint).toString(),createdBy:e.createdByEmail,createdAt:this.$day.format(e.createdAt),modifiedBy:e.modifiedByEmail,modifiedAt:this.$day.format(e.modifiedAt),icon:"eva-layers-outline"}))})),e}},mounted(){this.$watch(e=>[e.mode,e.sortBy,e.groupBy,e.filterBy,e.currentPage,e.itemsPerPage],()=>this.getLookUp(),{deep:!0,immediate:!0})},methods:{showQuickHelp(){this.quickHelp=!0},clearSortBy(){this.sortBy={criteria:"",order:"DESC"}},clearGroupBy(){this.groupBy=""},showDeleteConfirmation(e){this.selectedLookup=this.findEntry(e),this.isDeleteConfirmationVisible=!0},showRestoreConfirmation(e){this.selectedLookup=this.findEntry(e),this.isRestoreConfirmationVisible=!0},findEntry(e){const t=[];return this.items.forEach(e=>t.push(...e.data)),t.find(t=>t.id===e)},addLookup(){this.selectedLookup={},this.addLookUpSheet=!0},editLooup(e){this.selectedLookup=this.findEntry(e),this.addLookUpSheet=!0},viewConnectionEntry(e){this.selectedLookup=this.findEntry(e),this.isConnectionDetailsVisible=!0},searchRow(e){this.lookups=e?this.lookupsData.map(({key:t,value:s})=>({key:t,value:s.filter(t=>{for(let s in t){let i=this.columns.findIndex(e=>e.name===s);if(i>=0&&t[s]&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return t}})})):this.lookupsData,this.totalItems=this.lookups[0].value.length},async updateLookup(e){this.$store.commit("showLoadingBar");const{error:t}=await l["c"].updateLookUp(this.selectedLookup.id,e);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):(this.$alert.success("lookup deleted"),this.getLookUp())},async getLookUp(){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await l["c"].getLookUp({filterBy:[],mode:this.mode});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);let s=[];t.forEach(e=>{s.push(e.connectorHub)}),console.log(s);const i=s.filter(e=>e.createdBy===this.$store.state.session.id&&e.connectorId===Number(this.id));let a=[{key:"",value:i}];this.lookups=a||[],this.lookupsData=a||[],this.totalItems=i.length||0,this.addLookUpSheet=!1}}},C=w,k=(s("1d1a"),s("2877")),S=Object(k["a"])(C,i,a,!1,null,"4cd64e80",null);t["default"]=S.exports},"6f0e":function(e,t,s){"use strict";s("8dc1")},"6f95":function(e,t,s){},"70a9":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cursor-pointer",attrs:{id:"async-select-field"}},[e.label?t("FormFieldLabel",{attrs:{label:e.label,"is-mandatory":e.isMandatory,tooltip:e.tooltip}}):e._e(),t("FormFieldWrapper",{ref:"wrapper",attrs:{"is-focused":e._isFocused,"is-clearable":e._isClearable,"is-readonly":e.isReadonly,"is-disabled":e.isDisabled,"has-error":!!e.error,"action-icon":"eva-chevron-down"},on:{click:e.showOptionPicker,clear:e.handleClear},scopedSlots:e._u([{key:"default",fn:function(){return[t("div",{staticClass:"async-select"},[e._l(e.value,(function(s,i){return t("div",{key:s,staticClass:"chip"},[t("div",{staticClass:"q-mr-xs"},[e._v(e._s(s))]),t("BaseIcon",{attrs:{name:"eva-close"},on:{click:function(t){return t.stopPropagation(),e.removeOption(i)}}})],1)})),t("div",{staticClass:"col search-query"},[t("input",{ref:"searchQuery",attrs:{type:"text",placeholder:e._placeholder},domProps:{value:e.searchQuery},on:{focus:function(t){e.isFocused=!0},blur:function(t){e.isFocused=!1},input:e.debouncedInput,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleKeypress.apply(null,arguments)}}})])],2),t("q-menu",{attrs:{target:e.$refs.wrapper,fit:"","no-focus":"","no-refocus":"","no-parent-event":"","transition-show":"scale","transition-hide":"scale"},model:{value:e.optionPicker,callback:function(t){e.optionPicker=t},expression:"optionPicker"}},[t("OptionPicker",{attrs:{"is-multiple":"",value:e.value,options:e._options,"new-option":e.newOption},on:{select:e.handleSelect,loadMore:e.getOptions}})],1)]},proxy:!0},{key:"action",fn:function(){return[e.isLoading?t("q-spinner",{staticClass:"q-mr-sm",attrs:{color:"secondary",size:"20px"}}):e._e()]},proxy:!0}])}),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e()],1)},a=[],o=(s("caad"),s("14d9"),s("3445")),r=s("0f01"),n=s("e683"),l=s("29db"),c=s("0d5e"),d=s("9996"),u=s("32e8"),m=s("5c8a"),h=s("85b1"),p={name:"AsyncMultiSelectField",components:{FormFieldLabel:o["a"],FormFieldWrapper:r["a"],FormFieldError:n["a"],OptionPicker:l["a"]},props:{value:{type:Array,default:()=>[]},label:{type:String,default:""},placeholder:{type:String,default:""},isMandatory:{type:Boolean,default:!1},tooltip:{type:String,default:""},isDisabled:{type:Boolean,default:!1},isReadonly:{type:Boolean,default:!1},isClearable:{type:Boolean,default:!0},error:{type:String,default:""},newOption:{type:Boolean,default:!1},apiPath:{type:String,default:""},columnName:{type:String,default:""}},data(){return{isFocused:!1,optionPicker:!1,searchQuery:"",options:[],isLoading:!1,optionsCount:0,optionsClone:[]}},computed:{_placeholder(){if(!this.value.length)return this.placeholder||"Select"},_isFocused(){return this.isFocused||this.optionPicker},_isClearable(){return this.isClearable&&!!this.value.length},_options(){return this.searchQuery?this.optionsClone.filter(e=>Object(d["a"])(e).includes(Object(d["a"])(this.searchQuery))):this.optionsClone}},watch:{options:{immediate:!0,deep:!0,handler(){Object(u["a"])(this.options,this.optionsClone)||(this.optionsClone=Object(m["a"])(this.options))}},optionPicker(){this.optionPicker||(this.searchQuery="")},columnName(){this.columnName&&(this.options=[],this.getOptions())}},created(){this.getOptions()},methods:{showOptionPicker(){this.optionPicker=!0},handleChange(e){this.searchQuery=e.target.value},handleSelect(e){const t=[...this.value],s=t.findIndex(t=>t===e);-1===s?t.push(e):t.splice(s,1),this.$emit("input",t),this.searchQuery=""},removeOption(e){const t=[...this.value];t.splice(e,1),this.$emit("input",t)},handleKeypress(){this.searchQuery&&this.newOption&&(this.handleSelect(this.searchQuery),this.$refs.searchQuery.blur())},handleClear(){this.$emit("input",[])},debouncedInput:Object(h["a"])((function(e){this.searchQuery=e.target.value}),500),async getOptions(){try{let e="";e=this.label?this.label:"object"===typeof this.columnName?this.columnName[0]:this.columnName;const t=await c["b"].post(this.apiPath,JSON.stringify({column:e,keyword:this.searchQuery,rowFrom:this.options.length||0,rowCount:this.options.length+10})),{status:s,data:i}=t;if(200!==s)throw t;const a=JSON.parse(i);this.options.push(...a)}catch(e){console.error(e),this.$alert.error("Error fetching options")}},loadMoreOptions(){}}},f=p,v=(s("c187"),s("2877")),y=s("4e73"),b=s("0d59"),g=s("93dc"),w=s.n(g),C=Object(v["a"])(f,i,a,!1,null,"b0cc9a00",null);t["a"]=C.exports;w()(C,"components",{QMenu:y["a"],QSpinner:b["a"]})},7104:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,"no-padding":"",width:"100vw"},on:{input:e.closeFileSheet},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{attrs:{id:"file"}},[e.menuActions?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"files",expression:"'files'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-menu-2"},on:{click:function(t){return e.$emit("show-files")}}}):e._e(),t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.type}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.file.name)+" "),2===e.file.checkinStatus?t("q-chip",{staticClass:"chips red-hover ellipsis",staticStyle:{height:"20px","font-size":"12px"},attrs:{color:"red","text-color":"white"}},[e._v(" Readonly ")]):e._e()],1),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.file.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.file.createdBy))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("File Size: "+e._s(e.fileSize))])],1)])],1)]},proxy:!0},e.menuActions?{key:"actions",fn:function(){return[e.checkTenant?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Data Extraction",expression:"'Data Extraction'",modifiers:{top:!0}}],staticClass:"q-ml-xs btnColor",attrs:{icon:"mdi-creation",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){e.summarizeModal=!0}}}):e._e(),t("div",{staticClass:"row q-mr-sm"},[2===e.file.checkinStatus&&e.file.checkinBy===e.$store.state.session.email?t("q-chip",{staticClass:"chips ellipsis",staticStyle:{height:"25px"},attrs:{outline:"",color:"orange",clickable:""},on:{click:function(t){return e.showCheckinUploadFile(e.file)}}},[t("q-avatar",{attrs:{icon:"mdi-file-upload-outline",color:"orange","text-color":"white"}}),e._v(" CheckIn ")],1):e._e()],1),e.isSignProcessFound&&0===e.file.checkinStatus?t("div",{staticClass:"row q-mr-sm"},[t("q-chip",{staticClass:"chips ellipsis",staticStyle:{height:"25px"},attrs:{outline:"",color:"primary",clickable:""},on:{click:e.checkSignProcess}},[t("q-avatar",{attrs:{icon:"mdi-file-outline",color:"primary","text-color":"white"}}),e._v(" Request for Sign ")],1)],1):e._e(),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight,width:"240px"}},e._l(e.actionList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label,visible:s.visible,disabled:s.disable,"sub-list":s.subMenu||[]},on:{click:function(t){return e.updateColumns(s)},subListAction:e.checkWorkflow}})})),1)],1)],1)]},proxy:!0}:null],null,!0)},[t("div",{attrs:{id:"content-wrapper"}},[e.menuActions?t("div",{staticClass:"file-list"},[t("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})]):e._e(),e.documentEdit?e._e():t("div",{staticClass:"aside"},[t("div",{staticClass:"action-bar"},[t("Tabs",{attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}})],1),e.loadingBar?t("BaseLoadingBarSheet"):e._e(),t("div",["METADATA"===e.tab?t("FileDetails",{attrs:{file:e.file,"repository-field":e.repositoryField,"file-data":e.fileData,"is-retention-required":e.menuActions,"retention-list":e.retentionList},on:{refresh:e.getFileRetentions}}):e._e(),"COMMENTS"===e.tab?t("Comments",{attrs:{"repository-id":e.file.repositoryId,"item-id":e.file.id}}):e._e(),"HISTORY"===e.tab?t("DocumentHistory",{attrs:{history:e.history},on:{get:e.getFileHistory}}):e._e()],1)],1)]),t("Password",{attrs:{value:e.showPasswordModal,header:e.selectList,"repository-id":e.file.repositoryId,"item-id":e.file.id},on:{close:function(t){e.showPasswordModal=!1}}}),t("MetaDataEdit",{attrs:{value:e.showMetaDataEditModal,file:e.file,"repository-field":e.repositoryField,"file-data":e.fileData,"edit-from-file-sheet":""},on:{close:function(t){e.showMetaDataEditModal=!1},save:e.saveMetaData}}),t("EncryptDecrypt",{attrs:{value:e.showEncryptDecryptModal,header:e.selectList},on:{close:function(t){e.showEncryptDecryptModal=!1}}}),t("HidePage",{attrs:{value:e.showHidePageModal,header:e.selectList},on:{close:function(t){e.showHidePageModal=!1}}}),t("Task",{attrs:{value:e.showTaskModal},on:{close:function(t){e.showTaskModal=!1}}}),t("Alert",{attrs:{value:e.showAlertModal},on:{close:function(t){e.showAlertModal=!1}}}),t("CheckedInOut",{attrs:{value:e.showCheckedInOutModal,header:e.selectList,file:e.file},on:{close:function(t){e.showCheckedInOutModal=!1},checkout:e.closeFileSheet,downloadFile:e.fileDownload}}),t("Delete",{attrs:{value:e.showDeleteModal,header:e.selectList,"repository-id":e.file.repositoryId,"item-id":e.file.id},on:{close:e.closeDeleteFile}}),t("AddVault",{attrs:{value:e.showAddVaultModal},on:{close:function(t){e.showAddVaultModal=!1}}}),t("EmailSharing",{attrs:{"repository-id":e.file.repositoryId,"file-list":e.selectedFileList},on:{"update:fileList":function(t){e.selectedFileList=t},"update:file-list":function(t){e.selectedFileList=t}},model:{value:e.emailSharingSheet,callback:function(t){e.emailSharingSheet=t},expression:"emailSharingSheet"}}),t("Sheet",{attrs:{width:e.formWidth,"has-footer":"","no-padding":""},on:{input:e.closeProcessSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.headerTitle)+" ")]},proxy:!0},e.documentSignProcess?null:{key:"footer",fn:function(){return[e.actions?t("div",{staticClass:"footer row"},[e._l(e.actions,(function(s){return[t("BaseButton","Approve"===s||"Complete"===s||"Rightsize"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"positive"},on:{click:function(t){return e.validateRequest(s)}}}:"Reject"===s||"Terminate"===s||"Force Close"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"red"},on:{click:function(t){return e.validateRequest(s)}}}:"Forward"===s||"Reply"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"orange"},on:{click:function(t){return e.validateRequest(s)}}}:{key:s,staticClass:"q-ml-md",attrs:{label:s},on:{click:function(t){return e.validateRequest(s)}}})]}))],2):e._e()]},proxy:!0}],null,!0),model:{value:e.processSheet,callback:function(t){e.processSheet=t},expression:"processSheet"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 115px)"}},[e.formId?t("div",[t("RenderForm",{attrs:{"form-id":e.formId,panels:e.panels,"secondary-panels":e.secondaryPanels,"form-settings":e.formSettings,"form-model":e.formModel,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel,"enable-controls":e._enableControls},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t}}})],1):e._e(),e.documentSignProcess?t("div",[t("div",{staticClass:"fileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{attrs:{id:"file-frame",src:e.itemLink(),frameborder:"0"}})])])]):e._e()])],1),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.processTabs,(function(s){return["TASK"!==s.value||"TASK"===s.value&&e.addTaskEnabled?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"processTab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()]):e._e()]}))],2)])]),t("Sheet",{attrs:{width:"30vw"},on:{input:e.closeAttachmentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"upload documents",expression:"'upload documents'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-upload",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.$refs.attachments.click()}}})]},proxy:!0}]),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",[t("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:e.uploadWflowAttachments}}),e._l(e.attachmentList,(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1)]),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.attachedFileSize(s.size)))])]:e._e()],2)])]}))],2)]),t("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"30"},on:{input:e.closeCommentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",[t("BaseScrollbar",{attrs:{height:"calc(100vh - 155px)"}},[e._l(e.commentsList,(function(s,i){return[t("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===e.$store.state.session.id?"me":s.createdByEmail,text:e.commentsText(s),"text-html":"",sent:s.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(s),"bg-color":e.bgCommentsColor(s)}})]}))],2)],1),t("div",{staticClass:"col q-pa-sm borderTop"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])])]),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("File Size: "+e._s(e.attachedFileSize(e.selectedFile.size)))])],1)])])]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{attrs:{id:"file-frame",src:e.attachedFileLink(),frameborder:"0"}})])])]),t("Sheet",{attrs:{width:"30vw"},on:{input:e.closeTaskSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Tasks ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Add Task",expression:"'Add Task'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-plus",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:e.addTask}})]},proxy:!0}]),model:{value:e.taskSheet,callback:function(t){e.taskSheet=t},expression:"taskSheet"}},[t("div",[e._l(e.taskEntries,(function(s){return[t("div",{key:s.id,staticClass:"taskEntries"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto q-mr-md",staticStyle:{"margin-top":"3px"},on:{click:function(t){return e.$emit("viewTask",s.id)}}},[e._v(" "+e._s(s.name)+" ")]),t("q-chip",{attrs:{size:"10px",color:e.getColor(s.priority),"text-color":"white"}},[e._v(" "+e._s(s.priority)+" ")]),t("q-chip",{attrs:{size:"10px",color:e.getColor(s.status),"text-color":"white"}},[e._v(" "+e._s(s.status)+" ")])],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col-12"},[e._v("Assigned To: "+e._s(s.assigned))]),t("div",{staticClass:"col-12"},[e._v(" Start Date: "+e._s(e.$day.format(s.startDate,!1))+" "),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" End Date: "+e._s(e.$day.format(s.endDate,!1))+" ")],1)])])]}))],2)]),e.taskFormId?t("AddTask",{attrs:{value:e.addTaskSheet,"form-settings":e.addTaskForm.settings,panels:e.addTaskForm.panels,"secondary-panels":e.addTaskForm.secondaryPanels,"form-id":e.taskFormId,"repository-id":e.taskRepositoryId,"task-model":e.selectedTask,"document-task":!0,file:e.file,mode:e.taskMode},on:{close:function(t){e.addTaskSheet=!1},addEntry:e.addTaskEntry}}):e._e(),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}}),t("Sheet",{attrs:{width:"470px","has-footer":""},on:{input:e.reset},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Upload File ")]},proxy:!0},{key:"default",fn:function(){return[e.filesToUpload.length?e._e():t("Dropzone",{attrs:{"show-workspace-repository":!1,"workspace-id":Number(e.$route.query.workspaceId),"repository-id":Number(e.file.repositoryId),"has-multiple":!1},on:{upload:e.queueFilesForUpload}}),e.filesError?t("FormFieldError",{staticClass:"q-mx-md",attrs:{error:"Please upload file"}}):e._e(),e.filesToUpload.length?t("UploadingFileList",{attrs:{files:e.filesToUpload,"show-progress":e.showProgress,"show-delete-btn":e.showDeleteBtn},on:{delete:e.deleteUploadFile}}):e._e(),t("div",{staticClass:"q-px-md"},[t("ValidationObserver",{ref:"checkin"},[t("ValidationProvider",{attrs:{name:"comment",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextAreaField",{staticClass:"q-mb-lg",attrs:{label:"Purpose for checking in","is-mandatory":"",error:s[0]},model:{value:e.comments,callback:function(t){e.comments=t},expression:"comments"}})]}}])})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:e.reset}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.uploadFile}})]},proxy:!0}]),model:{value:e.showCheckinModal,callback:function(t){e.showCheckinModal=t},expression:"showCheckinModal"}}),t("Modal",{attrs:{width:"40vw",height:"60vh","has-footer":""},on:{input:function(t){e.signProcessModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Document Sign")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"field-wrapper"},[t("SingleChoiceField",{staticClass:"q-mb-lg",attrs:{label:"Signature Type","is-mandatory":"",options:e.signTypes,"options-per-line":2},model:{value:e.signType,callback:function(t){e.signType=t},expression:"signType"}}),t("SingleChoiceField",{staticClass:"q-mb-lg",attrs:{label:"Order Type","is-mandatory":"",options:e.orderTypes,"options-per-line":2},model:{value:e.orderType,callback:function(t){e.orderType=t},expression:"orderType"}})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Continue",color:"primary"},on:{click:e.openSignProcess}})]},proxy:!0}]),model:{value:e.signProcessModal,callback:function(t){e.signProcessModal=t},expression:"signProcessModal"}}),t("Summarizing",{attrs:{itemid:e.file.id,"repository-id":e.file.repositoryId,page:"REPOSITORY"},on:{input:function(t){e.summarizeModal=!1}},model:{value:e.summarizeModal,callback:function(t){e.summarizeModal=t},expression:"summarizeModal"}})],1)},a=[],o=(s("14d9"),s("a7d2")),r=s("1b0d"),n=s("381e"),l=s("fa1f"),c=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"file-details"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[t("div",{attrs:{id:"item-overview"}},[t("div",{staticClass:"version"},[e._v("Version : "+e._s(e.file.fileVersion))]),t("table",[t("tbody",[e._l(e.fileData,(function(s,i){return t("tr",{key:i+""+s.name,staticClass:"tableRow",on:{click:function(t){return e.textSearchInFile(s.value)}}},[t("td",{staticClass:"label"},[e._v(e._s(s.name))]),"TABLE"!==s.type?t("td",{staticClass:"value"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col ellipsis"},[e._t(s.name,(function(){return[e._v(" "+e._s(s.value||"-")+" ")]}),{value:s.value})],2),e.isRetentionRequired&&"DATE"===s.type&&s.value?[t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Notification Settings",expression:"'Notification Settings'",modifiers:{top:!0}}],staticClass:"actions",attrs:{"is-flat":"","no-border":"",icon:"eva-settings-outline",color:e.checkRetention(s.id)},on:{click:function(t){return e.showRetention(s.id)}}})],1)]:e._e()],2)]):t("td",{staticClass:"value",staticStyle:{padding:"8px"}},[e._t(s.name,(function(){return[t("BaseActionButton",{attrs:{icon:"mdi-table-large","is-flat":"","no-border":""},on:{click:function(t){return e.showTable(s.name)}}})]}))],2)])})),t("tr",{staticClass:"tableRow"},[t("td",{staticClass:"label"},[e._v("Uploaded Date")]),t("td",{staticClass:"value"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col ellipsis"},[e._v(" "+e._s(e.$day.format(e.file.createdAt))+" ")]),e.isRetentionRequired?t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Notification Settings",expression:"'Notification Settings'",modifiers:{top:!0}}],staticClass:"actions",attrs:{"is-flat":"","no-border":"",icon:"eva-settings-outline",color:e.checkRetention(0)},on:{click:function(t){return e.showRetention(0)}}})],1):e._e()])])])],2)])])]),t("Modal",{attrs:{width:"60vw",height:"80vh"},on:{input:function(t){e.expandTableModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.tableHeader))]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"tableData"}},[e.tableData.cellvalues?[t("table",e._l(e.tableData.cellvalues,(function(s,i){return t("tr",{key:i},e._l(s,(function(s){return t("NoHeader"===s.kind?"td":"th",{key:`r${i}_c${s.columnindex}`,tag:"th"},[e._v(" "+e._s(s.cellvalue)+" ")])})),1)})),0)]:[t("table",[t("thead",[t("tr",e._l(e.tableData[0],(function(s,i){return t("th",{key:i},[e._v(" "+e._s(i)+" ")])})),0)]),t("tbody",e._l(e.tableData,(function(s,i){return t("tr",{key:i},e._l(s,(function(s,i){return t("td",{key:i},[e._v(" "+e._s(s)+" ")])})),0)})),0)])]],2)]},proxy:!0}]),model:{value:e.expandTableModal,callback:function(t){e.expandTableModal=t},expression:"expandTableModal"}}),t("Sheet",{attrs:{width:"750px","has-footer":""},on:{input:e.reset},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Notification Settings ")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"row",attrs:{id:"tab-settings"}},[t("div",{staticClass:"content"},[t("div",{},[t("ValidationObserver",{ref:"retention"},[t("div",{directives:[{name:"show",rawName:"v-show",value:"GENERAL"===e.activeTab,expression:"activeTab === 'GENERAL'"}]},[t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{staticClass:"q-mb-md",attrs:{label:"name","is-mandatory":"",error:s[0]},model:{value:e.retention.name,callback:function(t){e.$set(e.retention,"name",t)},expression:"retention.name"}})]}}])})],1)]),t("SingleChoiceField",{staticClass:"q-mb-md",attrs:{"is-mandatory":"",label:"Set Notification Date","options-per-line":e.notificationDateOptions.length,options:e.notificationDateOptions},model:{value:e.notificationDate,callback:function(t){e.notificationDate=t},expression:"notificationDate"}}),"field_date"===e.notificationDate?[t("FormFieldLabel",{staticClass:"q-mb-lg",attrs:{label:e.getFieldDateLabel}}),t("BaseSeparator",{staticClass:"q-mb-md"})]:e._e(),"specific_date"===e.notificationDate?[t("FormFieldLabel",{staticClass:"q-mb-lg",attrs:{label:"Define a specific date for document notification, activating automatic reminders when the chosen date is reached.",transform:""}}),t("BaseSeparator",{staticClass:"q-mb-md"}),t("ValidationProvider",{attrs:{name:"notification date",rules:e.dateValidation},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateField",{staticClass:"q-mb-md",attrs:{label:"notification date","is-mandatory":"",validation:"",error:s[0]},model:{value:e.retention.actionDate,callback:function(t){e.$set(e.retention,"actionDate",t)},expression:"retention.actionDate"}})]}}],null,!1,2663690688)})]:e._e(),"future_date"===e.notificationDate?t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12"},[t("FormFieldLabel",{staticClass:"q-mb-md",attrs:{label:"Allows to schedule a future expiry date\n              based on an existing date, which prompts automatic reminders\n              when due",transform:""}}),t("BaseSeparator")],1),t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"Duration",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("CounterField",{staticClass:"q-mb-md",attrs:{label:"Duration",error:s[0]},model:{value:e.retention.duration,callback:function(t){e.$set(e.retention,"duration",t)},expression:"retention.duration"}})]}}],null,!1,3325698584)})],1),t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"Duration Type",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{staticClass:"q-mb-md",attrs:{label:"Duration Type",options:e.durationTypes,error:s[0]},model:{value:e.retention.durationType,callback:function(t){e.$set(e.retention,"durationType",t)},expression:"retention.durationType"}})]}}],null,!1,1187220727)})],1)]):e._e(),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"user",rules:{required:0===e.retention.notification.group.length}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("MultiSelectField",{staticClass:"q-m-md",attrs:{label:"users",options:e.userList,error:s[0]},model:{value:e.retention.notification.user,callback:function(t){e.$set(e.retention.notification,"user",t)},expression:"retention.notification.user"}})]}}])})],1),t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"group",rules:{required:0===e.retention.notification.user.length}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("MultiSelectField",{staticClass:"q-m-md",attrs:{label:"groups",options:e.groupList,error:s[0]},model:{value:e.retention.notification.group,callback:function(t){e.$set(e.retention.notification,"group",t)},expression:"retention.notification.group"}})]}}])})],1)]),e.dateError?t("FormFieldError",{attrs:{error:e.dateError}}):e._e()],2),"NOTIFICATION"===e.activeTab?[t("FormFieldLabel",{attrs:{label:"Mail Subject"}}),t("TextEditor",{staticClass:"mail-class",attrs:{"hide-tool-bar":!1,"form-columns":e.fieldColumns},model:{value:e.retention.notification.mailSubject,callback:function(t){e.$set(e.retention.notification,"mailSubject",t)},expression:"retention.notification.mailSubject"}}),t("FormFieldLabel",{staticClass:"q-my-md",attrs:{label:"Mail Content"}}),t("TextEditor",{staticClass:"mail-class",attrs:{"form-columns":e.fieldColumns},model:{value:e.retention.notification.mailBody,callback:function(t){e.$set(e.retention.notification,"mailBody",t)},expression:"retention.notification.mailBody"}})]:e._e()],2)],1)]),t("div",{staticClass:"tabs"},e._l(e.tabs,(function(s){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"q-mb-md",attrs:{"is-flat":e.activeTab!==s.value,icon:s.icon,color:e.activeTab===s.value?"primary":"gray"},on:{click:function(t){e.activeTab=s.value}}})})),1)])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:e.reset}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.saveRetention}})]},proxy:!0}]),model:{value:e.retentionSettings,callback:function(t){e.retentionSettings=t},expression:"retentionSettings"}})],1)},d=[],u=s("6a70"),m=s("cc77"),h=s("c3d2"),p=s("b3d1"),f=s("12b8"),v=s("7bb1"),y=s("869e"),b=s("3445"),g=s("9234"),w=s("53c1"),C=s("64ab"),k=s("e683"),S={name:"FileDetails",components:{Modal:u["a"],Sheet:n["a"],CounterField:m["a"],MultiSelectField:h["a"],TextField:p["a"],SelectField:f["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],CheckboxField:y["a"],FormFieldLabel:b["a"],TextEditor:C["a"],SingleChoiceField:g["a"],DateField:w["a"],FormFieldError:k["a"]},props:{file:{type:Object,required:!0},repositoryField:{type:Array,required:!0},fileData:{type:Array,required:!0},isRetentionRequired:{type:Boolean,default:!1},retentionList:{type:Array,default:()=>[]}},data(){return{expandTableModal:!1,tableHeader:"",tableData:[],retentionFieldId:0,retentionSettings:!1,retention:{id:0,repositoryId:this.file.repositoryId,itemId:this.file.id,name:"",fieldId:"",duration:0,durationType:"Day",conditionJson:"",action:"",actionDate:"",notification:{duration:0,durationType:"Day",user:[],group:[],mailSubject:{text:"",content:""},mailBody:{text:"",content:""}}},durationTypes:[{id:this.$nano.id(),label:"Year",value:"Year"},{id:this.$nano.id(),label:"Month",value:"Month"},{id:this.$nano.id(),label:"Day",value:"Day"}],userList:[],groupList:[],retentionActions:[{id:this.$nano.id(),label:"No Action",value:"NO_ACTION"},{id:this.$nano.id(),label:"Hide",value:"HIDE"},{id:this.$nano.id(),label:"Move to Trash",value:"TRASH"},{id:this.$nano.id(),label:"Permanent Delete",value:"DELETE"}],notify:!0,notificationDate:"field_date",activeTab:"GENERAL",tabs:[{id:this.$nano.id(),label:"general",value:"GENERAL",icon:"mdi-tune"},{id:this.$nano.id(),label:"notification",value:"NOTIFICATION",icon:"mdi-bell-outline"}],dateError:""}},computed:{fieldColumns(){let e=[{id:this.$nano.id(),label:"Uploaded Date",value:"#UPLOADEDDATE#",display:"",color:"#643094",hasDefault:!0},{id:this.$nano.id(),label:"Uploaded By",value:"#UPLOADBY#",display:"",color:"#643094",hasDefault:!0}],t=this.repositoryField.map(e=>({id:e.id,label:e.name,value:e.id,hasDefault:!1}));return[...e,...t]},getFieldDateLabel(){if(this.retention.fieldId){let e=this.repositoryField.find(e=>e.id===this.retention.fieldId);return`Set a Document's expiry based on\n                    an ${e.name}, which triggers auto-reminders when due.`}return""},notificationDateOptions(){return this.retention.fieldId?[{id:this.$nano.id(),label:"Use Field Date",value:"field_date"},{id:this.$nano.id(),label:"Use Specific Date",value:"specific_date"},{id:this.$nano.id(),label:"Set Future Date from Field Date",value:"future_date"}]:[{id:this.$nano.id(),label:"Use Specific Date",value:"specific_date"},{id:this.$nano.id(),label:"Set Future Date from Field Date",value:"future_date"}]},dateValidation(){const e={};"specific_date"===this.notificationDate&&(e.required=!0);let t="";if(this.retention.fieldId){let e=this.fileData.find(e=>e.id===this.retention.fieldId);t=e.value}else t=this.$day.format(this.file.createdAt,!1);return t&&(e.minDate=t),e}},watch:{file:{immediate:!0,deep:!0,async handler(){this.file}},notificationDate(){this.notificationDate&&(this.dateError="")}},mounted(){this.getUserList(),this.getGroupList()},methods:{textSearchInFile(e){localStorage.setItem("findText",e)},showTable(e){let t=this.fileData.filter(t=>t.name===e);this.tableHeader=t[0].name,this.tableData=JSON.parse(t[0].value),this.expandTableModal=!0},checkRetention(e){return this.retentionList.filter(t=>t.fieldId===e).length?"orange":""},showRetention(e){this.retentionFieldId=e,this.reset();let t=this.retentionList.find(t=>t.fieldId===e);t&&(this.retention.id=t.id,this.retention.name=t.name,this.retention.duration=t.duration,this.retention.durationType=t.durationType,this.retention.action=t.action,this.retention.actionDate=t.actionDate,this.notificationDate="field_date",this.retention.duration?this.notificationDate="future_date":this.retention.actionDate&&(this.notificationDate="specific_date"),this.retention.notification=JSON.parse(t.notifyJson),t.notifyJson&&(this.notify=!0),this.retention.notification.mailSubject||(this.retention.notification.mailSubject={text:"",content:""},this.retention.notification.mailBody={text:"",content:""})),this.retention.fieldId=e,t||(this.retention.fieldId?this.notificationDate="field_date":this.notificationDate="future_date"),this.retentionSettings=!0},reset(){this.activeTab="GENERAL",this.retentionSettings=!1,this.retention.name="",this.retention.fieldId="",this.retention.action="NO_ACTION",this.retention.actionDate="",this.retention.durationType="Day",this.retention.duration=0,this.retention.notification={duration:0,durationType:"Day",user:[],group:[],mailSubject:{text:"",content:""},mailBody:{text:"",content:""}},this.dateError="",this.notify=!0},async getUserList(){const{error:e,payload:t}=await r["s"].getUserList();e?this.$alert.error("Error fetching users"):this.userList=t&&t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))},async getGroupList(){const{error:e,payload:t}=await r["i"].getGroupList();e?this.$alert.error("Error fetching groups"):this.groupList=t&&t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))},async saveRetention(){"field_date"===this.notificationDate?(this.retention.actionDate="",this.retention.duration=0,this.retention.durationType="Day"):"specific_date"===this.notificationDate?(this.retention.duration=0,this.retention.durationType="Day"):"future_date"===this.notificationDate&&(this.retention.actionDate="");let e="";if(this.retention.fieldId){let t=this.fileData.find(e=>e.id===this.retention.fieldId);e=t.value}else e=this.$day.format(this.file.createdAt,!1);let t="",s="";if("future_date"===this.notificationDate?("Day"===this.retention.durationType&&(t=this.$day.addDate(e,this.retention.duration)),"Month"===this.retention.durationType&&(t=this.$day.addMonth(e,this.retention.duration)),"Year"===this.retention.durationType&&(t=this.$day.addYear(e,this.retention.duration)),s=this.$day.isDateGreater(e,this.$day.newDate())?e:this.$day.newDate()):t="specific_date"===this.notificationDate?this.retention.actionDate:e,!(t>=this.$day.newDate()))return void("field_date"===this.notificationDate?this.dateError="Its completed date. please select any one option in two options":this.dateError=`Please select any date after (${s}) this date`);this.dateError="";const i=await this.$refs.retention.validate();if(i){if(this.notify?this.retention.notifyJson=JSON.stringify(this.retention.notification):this.retention.notifyJson="",this.$store.commit("showLoadingBar"),this.retention.id&&this.retention.fieldId===this.retentionFieldId){const{error:e}=await r["p"].updateRetention(this.retention.id,this.retention);if(e)return void this.$alert.error(e);this.$alert.success("Notification rule updated succesfully")}else{const{error:e}=await r["p"].addRetention(this.retention);if(e)return void this.$alert.error(e);this.$alert.success("Notification rule added succesfully")}this.$store.commit("hideLoadingBar"),this.$emit("refresh"),this.reset()}}}},_=S,I=(s("d2fb"),s("2877")),x=Object(I["a"])(_,c,d,!1,null,"1ffcec1e",null),T=x.exports,$=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card"},[t("div",{staticClass:"q-pa-xs"},[t("BaseScrollbar",{staticClass:"q-pa-sm",attrs:{height:"calc(100vh - 215px)"}},[e._l(e.commentsList,(function(s,i){return[t("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===e.$store.state.session.id?"me":s.createdByEmail,text:e.commentsText(s),"text-html":"",sent:s.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(s),"bg-color":e.bgCommentsColor(s)}})]}))],2)],1),t("div",{staticClass:"col q-pa-sm borderTop"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])]),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}})],1)},A=[],F=s("6df3"),L=s("695e"),B={name:"FileComments",components:{TextAreaField:F["a"],TextBuilderField:L["a"],Modal:u["a"]},props:{repositoryId:{type:Number,default:0},itemId:{type:Number,default:0}},data(){return{commentText:"",commentsList:[],advancedCommentsSheet:!1,advancedCommentText:""}},created(){this.getComments()},methods:{commentsText(e){return e.processId?[`<b>${e.workflowName} : ${e.requestNo}</b><br/> ${e.comments}`]:2===e.checkinStatus?["<b>CheckOut:</b><br/> "+e.comments]:1===e.checkinStatus?["<b>CheckIn:</b><br/> "+e.comments]:[e.comments]},bgCommentsColor(e){return e.processId?"orange-1":2===e.checkinStatus?"red-1":1===e.checkinStatus?"green-1":e.createdBy===this.$store.state.session.id?"primary-1":"secondary-1"},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},async getComments(){this.commentsList=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["p"].getFileComments(this.repositoryId,this.itemId);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t.length&&(this.commentsList=t)},async saveComment(){if(this.commentText){this.$store.commit("showLoadingBar");const{error:e}=await r["p"].insertFileComments(this.repositoryId,this.itemId,{comments:this.commentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.commentText="",this.getComments()}},async saveAdvancedComment(){if(this.advancedCommentText){this.$store.commit("showLoadingBar");const{error:e}=await r["p"].insertFileComments(this.repositoryId,this.itemId,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}}}},P=B,D=(s("81e5"),s("8169")),M=s("93dc"),q=s.n(M),N=Object(I["a"])(P,$,A,!1,null,"f1ea4660",null),O=N.exports;q()(N,"components",{QChatMessage:D["a"]});var E=s("b94d"),V=s("cade"),R=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:e.header.icon||"","icon-color":"primary",width:"450px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){var t;return[e._v(e._s(null===(t=e.header)||void 0===t?void 0:t.label))]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"form"},[t("ValidationProvider",{attrs:{name:"password",rules:{required:!0,password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("PasswordField",{staticClass:"q-my-lg",attrs:{label:"Set_Password"===e.header.id?"enter a password for to protect this file":"enter a password to remove this file protection","is-mandatory":"",tooltip:e._passwordHint,error:s[0]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})]}}])}),t("ValidationProvider",{attrs:{name:"password",rules:{required:!0,password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("PasswordField",{staticClass:"q-mb-lg",attrs:{label:"confirm password","is-mandatory":"",tooltip:e._passwordHint,error:s[0]},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.updatePassword}})]},proxy:!0}])})},z=[],j=s("1c54"),H=s("8bc3"),U=s("0c6e"),W={name:"Password",components:{Confirm:j["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],PasswordField:H["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0},repositoryId:{type:Number,required:!0},itemId:{type:Number,required:!0}},data(){return{password:"",confirmPassword:""}},computed:{_passwordHint(){return U["a"]}},methods:{closeModal(){this.$emit("close",!1)},async updatePassword(){if(this.password===this.confirmPassword){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["k"].setRemoveFilePassword({repositoryId:this.repositoryId,itemId:this.itemId,password:"Set_Password"===this.header.id?this.confirmPassword:""});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);202===t.status&&("Set_Password"===this.header.id?this.$alert.success("password set successfully"):this.$alert.success("password removed successfully"),this.password="",this.confirmPassword=""),this.$emit("close",!1)}else this.$alert.warning("password not matched")}}},J=W,G=Object(I["a"])(J,R,z,!1,null,"5e2bad70",null),Q=G.exports,Y=s("ee54"),K=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:e.header.icon||"","icon-color":"primary",width:"450px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){var t;return[e._v(e._s(null===(t=e.header)||void 0===t?void 0:t.label))]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"form"},[t("ValidationProvider",{attrs:{name:"field",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{staticClass:"q-my-lg",attrs:{label:"Encrypt"===e.header.id?"enter a password for to encrypt this file":"enter a password for to decrypt this file","is-mandatory":"",error:s[0]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})},X=[],Z={name:"EncryptDecrypt",components:{Confirm:j["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],TextField:p["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0}},data(){return{password:""}},methods:{closeModal(){this.$emit("close",!1)}}},ee=Z,te=Object(I["a"])(ee,K,X,!1,null,"30ac12fa",null),se=te.exports,ie=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:e.header.icon||"","icon-color":"primary",width:"450px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){var t;return[e._v(e._s(null===(t=e.header)||void 0===t?void 0:t.label))]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"form"},[t("ValidationProvider",{attrs:{name:"field",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{staticClass:"q-mt-lg",attrs:{label:"Pages","is-mandatory":"",error:s[0],placeholder:"enter page number like 2,3,4  or 2-5"},model:{value:e.pages,callback:function(t){e.pages=t},expression:"pages"}})]}}])}),t("div",{staticClass:"description q-mb-lg q-mt-sm"},[e._v(" Note: First page and last page cannot be hide ")])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})},ae=[],oe={name:"HidePage",components:{Confirm:j["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],TextField:p["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0}},data(){return{pages:""}},methods:{closeModal(){this.$emit("close",!1)}}},re=oe,ne=(s("02fb"),Object(I["a"])(re,ie,ae,!1,null,"7b871c5e",null)),le=ne.exports,ce=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,"has-footer":"",width:"540px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Task")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"task-details"}},[t("Tabs",{staticClass:"tabs",attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),t("div",{staticClass:"q-pa-md"},["form"===e.tab?t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"field-wrapper"},[t("ValidationProvider",{attrs:{name:"type",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{staticClass:"q-mb-sm",attrs:{label:"Type","is-mandatory":"",options:[],error:s[0]},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})]}}],null,!1,221057675)}),t("TextAreaField",{staticClass:"q-mb-sm",attrs:{value:e.task,label:"Task"}}),t("ValidationProvider",{attrs:{name:"start time",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateTimeField",{staticClass:"q-mb-sm",attrs:{value:e.startTime,label:"Start Time","is-mandatory":"",error:s[0]}})]}}],null,!1,882080563)}),t("ValidationProvider",{attrs:{name:"end time",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateTimeField",{staticClass:"q-mb-sm",attrs:{value:e.endTime,label:"End Time","is-mandatory":"",error:s[0]}})]}}],null,!1,384865875)}),t("ValidationProvider",{attrs:{name:"users",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("MultiSelectField",{staticClass:"q-mb-sm",attrs:{label:"users","is-mandatory":"",options:[],error:s[0]},model:{value:e.users,callback:function(t){e.users=t},expression:"users"}})]}}],null,!1,1613393186)}),t("ValidationProvider",{attrs:{name:"priority",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{staticClass:"q-mb-sm",attrs:{label:"task priority","is-mandatory":"",options:e.priorityList,error:s[0]},model:{value:e.priority,callback:function(t){e.priority=t},expression:"priority"}})]}}],null,!1,1876549040)})],1)]):e._e(),"history"===e.tab?t("div",{attrs:{id:"history"}},[[t("div",{staticClass:"entry"},[t("div",{staticClass:"header"},[e._v("1 Task Assign")]),t("div",{staticClass:"content"},[t("div",{staticClass:"changes-meta"},[t("div",[e._v("admin@ezofis.com")]),t("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),t("div",[e._v("2022-May-06 09:35 PM")])],1),t("div",{staticClass:"change"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),t("div",[t("span",{staticClass:"font-semibold"},[e._v(' "Assigned" ')]),e._v(" to abc@ezofis.com ")])],1)])])]],2):e._e()],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})},de=[],ue=s("d1e5"),me={name:"Task",components:{Sheet:n["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],TextAreaField:F["a"],SelectField:f["a"],DateTimeField:ue["a"],MultiSelectField:h["a"],Tabs:E["a"]},props:{value:{type:Boolean,default:!1}},data(){return{tab:"form",tabs:[{id:this.$nano.id(),label:"form",value:"form"},{id:this.$nano.id(),label:"history",value:"history"}],type:"",task:"",startTime:"",endTime:"",users:[],priority:"",priorityList:[{id:this.$nano.id(),label:"High",value:"High"},{id:this.$nano.id(),label:"Medium",value:"Medium"},{id:this.$nano.id(),label:"Low",value:"Low"}]}},methods:{closeModal(){this.$emit("close",!1)}}},he=me,pe=(s("21e0"),Object(I["a"])(he,ce,de,!1,null,"1a249f74",null)),fe=pe.exports,ve=(s("caad"),function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,"has-footer":"",width:"540px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Alert")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"alert-details"}},[t("Tabs",{staticClass:"tabs",attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),t("div",{staticClass:"q-pa-md"},["form"===e.tab?t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"field-wrapper"},[t("FormFieldLabel",{attrs:{label:"Conditions","is-mandatory":""}}),t("div",{staticClass:"options-wrapper"},[t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Checked In"),label:"Checked In"},on:{input:function(t){return e.updateValue("Checked In")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Checked Out"),label:"Checked Out"},on:{input:function(t){return e.updateValue("Checked Out")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Commented"),label:"Commented"},on:{input:function(t){return e.updateValue("Commented")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Email"),label:"Email"},on:{input:function(t){return e.updateValue("Email")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Link"),label:"Link"},on:{input:function(t){return e.updateValue("Link")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Viewed"),label:"Viewed"},on:{input:function(t){return e.updateValue("Viewed")}}})],1),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e(),t("ValidationProvider",{attrs:{name:"Alert To",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("MultiSelectField",{staticClass:"q-mb-sm",attrs:{label:"alert to","is-mandatory":"",options:[],error:s[0]},model:{value:e.users,callback:function(t){e.users=t},expression:"users"}})]}}],null,!1,3515054549)})],1)]):e._e(),"history"===e.tab?t("div",{attrs:{id:"history"}},[[t("div",{staticClass:"entry"},[t("div",{staticClass:"header"},[e._v("2 Alerts")]),t("div",{staticClass:"content"},[t("div",{staticClass:"changes-meta"},[t("div",[e._v("admin@ezofis.com")]),t("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),t("div",[e._v("2022-May-06 09:35 PM")])],1),t("div",{staticClass:"change"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),t("div",[t("span",{staticClass:"font-semibold"},[e._v(' "Checkin" ')]),e._v(" alert sent to abc@ezofis.com ")])],1),t("div",{staticClass:"change"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),t("div",[t("span",{staticClass:"font-semibold"},[e._v(' "Viewed" ')]),e._v(" alert sent to xyz@ezofis.com ")])],1)])])]],2):e._e()],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})}),ye=[],be={name:"Alert",components:{Sheet:n["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],MultiSelectField:h["a"],FormFieldLabel:b["a"],CheckboxField:y["a"],FormFieldError:k["a"],Tabs:E["a"]},props:{value:{type:Boolean,default:!1}},data(){return{tab:"form",tabs:[{id:this.$nano.id(),label:"form",value:"form"},{id:this.$nano.id(),label:"history",value:"history"}],users:[],conditions:[],error:""}},methods:{closeModal(){this.$emit("close",!1)},updateValue(e){const t=[...this.conditions];if(t.includes(e)){const s=t.indexOf(e);t.splice(s,1)}else t.push(e);this.conditions=t}}},ge=be,we=(s("cccc"),Object(I["a"])(ge,ve,ye,!1,null,"67ebff79",null)),Ce=we.exports,ke=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:e.header.icon||"","icon-color":"primary",width:"450px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){var t;return[e._v(e._s(null===(t=e.header)||void 0===t?void 0:t.label))]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"form"},[t("ValidationProvider",{attrs:{name:"field",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextAreaField",{staticClass:"q-my-lg",attrs:{label:"CheckIn"===e.header.id?"Purpose for checking in":"Purpose for checking out","is-mandatory":"",error:s[0]},model:{value:e.checkInOut,callback:function(t){e.checkInOut=t},expression:"checkInOut"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.saveCheckInCheckOut}})]},proxy:!0}])})},Se=[],_e={name:"CheckedInOut",components:{Confirm:j["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],TextAreaField:F["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0},file:{type:Object,required:!0}},data(){return{checkInOut:""}},methods:{closeModal(){this.$emit("close",!1)},async saveCheckInCheckOut(){this.$store.commit("showLoadingBar");let e={comments:this.checkInOut};if("CheckOut"===this.header.label){const{error:t,payload:s}=await r["p"].fileCheckOut(this.file.repositoryId,this.file.id,e);if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);if(!s)return;console.log(s),this.$emit("checkout",!1),this.$emit("downloadFile","")}this.checkInOut="",this.$emit("close",!1)}}},Ie=_e,xe=Object(I["a"])(Ie,ke,Se,!1,null,"3664c360",null),Te=xe.exports,$e=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:e.header.icon||"","icon-color":"red",width:"450px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){var t;return[e._v(e._s(null===(t=e.header)||void 0===t?void 0:t.label))]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" Are you sure you want to delete this "),t("span",[e._v("file")])]),t("p",[e._v("You can always restore the deleted file from the trash page.")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"red"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"yes",color:"red"},on:{click:e.deleteFile}})]},proxy:!0}])})},Ae=[],Fe={name:"Delete",components:{Confirm:j["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0},repositoryId:{type:Number,required:!0},itemId:{type:Number,required:!0}},data(){return{}},methods:{closeModal(){this.$emit("close",!1)},async deleteFile(){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["p"].fileDelete(this.repositoryId,this.itemId);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):(200===t.status&&this.$alert.success("file deleted successfully"),this.$emit("close",!1))}}},Le=Fe,Be=Object(I["a"])(Le,$e,Ae,!1,null,"5663a02d",null),Pe=Be.exports,De=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,"has-footer":"",width:"540px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Protect using password")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"vault-details"}},[t("Tabs",{staticClass:"tabs",attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),t("div",{staticClass:"q-pa-md"},["form"===e.tab?t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"field-wrapper"},[t("FormFieldLabel",{attrs:{label:"Requires user to enter a password for","is-mandatory":""}}),t("div",{staticClass:"options-wrapper"},[t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Viewing"),label:"Viewing"},on:{input:function(t){return e.updateValue("Viewing")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Editing"),label:"Editing"},on:{input:function(t){return e.updateValue("Editing")}}})],1),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e(),t("ValidationProvider",{attrs:{name:"password",rules:{password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("PasswordField",{staticClass:"q-mb-sm",attrs:{"is-mandatory":"",label:"password",value:e.password,error:s[0]}})]}}],null,!1,2834753869)}),t("ValidationProvider",{attrs:{name:"confirm password",rules:{password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("PasswordField",{staticClass:"q-mb-sm",attrs:{"is-mandatory":"",label:"confirm password",value:e.password,error:s[0]}})]}}],null,!1,298225343)}),t("div",{staticClass:"advanced q-py-sm q-mb-sm",on:{click:function(t){e.showAdvanceOptions=!e.showAdvanceOptions}}},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"label"},[e._v("Advanced Options")]),t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-chevron-down","inherit-color":""}})],1)]),e.showAdvanceOptions?[t("FormFieldLabel",{attrs:{label:"Requires user to enter a password for","is-mandatory":""}}),t("div",{staticClass:"options-wrapper"},[t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Links"),label:"Links"},on:{input:function(t){return e.updateValue("Links")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Comments"),label:"Comments"},on:{input:function(t){return e.updateValue("Comments")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Share"),label:"Share"},on:{input:function(t){return e.updateValue("Share")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Task"),label:"Task"},on:{input:function(t){return e.updateValue("Task")}}})],1)]:e._e()],2)]):e._e(),"history"===e.tab?t("div",{attrs:{id:"history"}},[[t("div",{staticClass:"entry"},[t("div",{staticClass:"header"},[e._v("1 items protected")]),t("div",{staticClass:"content"},[t("div",{staticClass:"changes-meta"},[t("div",[e._v("admin@ezofis.com")]),t("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),t("div",[e._v("2022-May-06 09:35 PM")])],1),t("div",{staticClass:"change"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),t("div",[t("span",{staticClass:"font-semibold"},[e._v(' "Editing" ')]),e._v(" menu protected ")])],1)])])]],2):e._e()],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})},Me=[],qe={name:"AddVault",components:{Sheet:n["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],PasswordField:H["a"],FormFieldLabel:b["a"],CheckboxField:y["a"],FormFieldError:k["a"],Tabs:E["a"]},props:{value:{type:Boolean,default:!1}},data(){return{tab:"form",tabs:[{id:this.$nano.id(),label:"form",value:"form"},{id:this.$nano.id(),label:"history",value:"history"}],password:"",conditions:[],error:"",showAdvanceOptions:!1}},methods:{closeModal(){this.$emit("close",!1)}}},Ne=qe,Oe=(s("297e"),Object(I["a"])(Ne,De,Me,!1,null,"4b214f92",null)),Ee=Oe.exports,Ve=s("5e23"),Re=s("4bc4"),ze=s("bc3a"),je=s.n(ze),He=s("0c04"),Ue=s("dd90"),We=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"history"}},[e.history.length?[t("BaseScrollbar",{attrs:{height:"calc(100vh - 140px)"}},e._l(e.history,(function(s){return t("div",{key:s.id,staticClass:"entry"},[t("div",{staticClass:"header"},[e._v(" "+e._s(s.activity)+" ")]),t("div",{staticClass:"content"},[t("div",{staticClass:"changes-meta"},[t("div",[e._v(e._s(s.activityBy))]),t("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.activityOn))])],1)])])})),0)]:t("div",{staticClass:"no-history"},[e._v("No data found")])],2)},Je=[],Ge={name:"DocumentHistory",props:{history:{type:Array,required:!0}},data(){return{}},created(){this.$emit("get")}},Qe=Ge,Ye=(s("5960"),Object(I["a"])(Qe,We,Je,!1,null,"707cfe64",null)),Ke=Ye.exports,Xe=s("61cf"),Ze=s("1026"),et=s("2f62"),tt=s("626d"),st={name:"FileSheet",components:{Sheet:n["a"],FileIcon:l["a"],Tabs:E["a"],FileDetails:T,Comments:O,ListItem:V["a"],Password:Q,MetaDataEdit:Y["a"],EncryptDecrypt:se,HidePage:le,Task:fe,Alert:Ce,CheckedInOut:Te,Delete:Pe,AddVault:Ee,EmailSharing:Ve["a"],RenderForm:Re["a"],TextAreaField:F["a"],AddTask:He["a"],TextBuilderField:L["a"],Modal:u["a"],DocumentHistory:Ke,Dropzone:Xe["a"],UploadingFileList:Ze["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],FormFieldError:k["a"],SingleChoiceField:g["a"],Summarizing:tt["a"]},props:{value:{type:Boolean,default:!1},file:{type:Object,required:!0},repositoryField:{type:Array,required:!0},options:{type:Object,default:()=>{}},menuActions:{type:Boolean,default:!0}},data(){return{tab:"METADATA",tabs:[{id:this.$nano.id(),label:"Metadata",value:"METADATA"},{id:this.$nano.id(),label:"Comments",value:"COMMENTS"},{id:this.$nano.id(),label:"History",value:"HISTORY"}],actionList:[{id:"Indexing_Change",key:"metadataEdit",label:"Metadata Edit",icon:"eva-edit-2-outline",visible:!0,disable:!0},{id:"Set_Password",key:"password",label:"Set Password",icon:"mdi-lock-outline",visible:!0,disable:!0},{id:"Remove_Password",key:"password",label:"Remove Password",icon:"mdi-lock-minus-outline",visible:!0,disable:!0},{id:"Add_To_Vault",key:"vault",label:"Add To Vault",icon:"mdi-eye-off-outline",visible:!0,disable:!0},{id:"Hide_Pages",key:"hidePages",label:"Hide Pages",icon:"mdi-book-open-page-variant-outline",visible:!0,disable:!0},{id:"Task",key:"task",label:"Task",icon:"mdi-send-outline",visible:!0,disable:!1},{id:"Initiate_Workflow",key:"workFlow",label:"Initiate Workflow",icon:"mdi-sitemap",subMenu:[],visible:!0,disable:!1},{id:"Alert",key:"alert",label:"Alert",icon:"mdi-file-alert-outline",visible:!0,disable:!0},{id:"CheckIn",key:"checkInAndOut",label:"CheckIn",icon:"mdi-file-upload-outline",visible:!0,disable:!0},{id:"CheckOut",key:"checkInAndOut",label:"CheckOut",icon:"mdi-file-download-outline",visible:!0,disable:!0},{id:"Delete",key:"deleteFile",label:"Delete",icon:"mdi-file-remove-outline",visible:!0,disable:!0},{id:"Email_Sharing",key:"emailSharing",label:"Email Sharing",icon:"mdi-email-outline",visible:!0,disable:!0},{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline",visible:!0,disable:!0},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline",visible:!0,disable:!0},{id:"Links",key:"links",label:"Links",icon:"mdi-link-variant",visible:!0,disable:!0}],showPasswordModal:!1,selectList:{},showMetaDataEditModal:!1,showEncryptDecryptModal:!1,showHidePageModal:!1,showTaskModal:!1,showAlertModal:!1,showCheckedInOutModal:!1,showDeleteModal:!1,showAddVaultModal:!1,emailSharingSheet:!1,selectedFileList:[],processSheet:!1,headerTitle:"",fileData:[],workflows:[],formId:"",form:{},formModel:{},workflowFormModel:{},actions:[],saveAction:"",processTabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0},{id:this.$nano.id(),label:"task",value:"TASK",icon:"eva-cube-outline",count:0}],attachmentSheet:!1,commentsSheet:!1,commentText:"",commentsList:[],attachmentList:[],fileSheet:!1,selectedFile:{},taskSheet:!1,taskEntries:[],workflowInit:{},taskFormId:0,taskRepositoryId:0,addTaskForm:{},addTaskSheet:!1,taskEntryId:[],taskEntryList:[],taskMode:"",selectedTask:{},formWidth:"100vw",advancedCommentsSheet:!1,advancedCommentText:"",history:[],fileAction:"",addTaskEnabled:!1,showCheckinModal:!1,filesToUpload:[],comments:"",showProgress:!1,filesError:!1,showDeleteBtn:!0,retentionList:[],isSignProcessFound:!1,documentSignProcess:!1,signWorkflow:{},signAction:"",signProcessModal:!1,signType:0,signTypes:[{id:this.$nano.id(),label:"E-Signature",value:0},{id:this.$nano.id(),label:"Digital Signature",value:1}],orderType:0,orderTypes:[{id:this.$nano.id(),label:"Sequential",value:1},{id:this.$nano.id(),label:"Non-Sequential",value:0}],watchViewerClose:null,watchViewerEdit:null,transactionUserIds:[],signerSettings:{},summarizeModal:!1,selectedUploadFile:[],repositoryDetails:{},userList:[],documentEdit:!1}},computed:{...Object(et["c"])(["loadingBar"]),checkTenant(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e&&"http://10.16.7.1"!==e&&"http://172.16.1.118"!==e},type(){return this.file.name?this.file.name.split(".").reverse()[0].slice(0,4):""},fileSize(){return Object(o["a"])(this.file.size)},scrollbarHeight(){const e=36*this.actionList.length;return e>216?"276px":e+58+"px"},formName(){return this.formId?this.form.settings.general.name:""},formDescription(){return this.formId?this.form.settings.general.description:""},panels(){return this.formId?this.form.panels:[]},secondaryPanels(){return this.formId?this.form.secondaryPanels:[]},formSettings(){return this.formId?this.form.settings:{}},updatedActionList(){const e=[...this.actionList];return e.forEach(e=>{e.key in this.options&&(e.disable="true"!==this.options[e.key],"download"!==e.key||e.disable?"print"!==e.key||e.disable||(this.fileAction+=",print"):(this.fileAction="",this.fileAction+="download"))}),e},_enableControls(){let e=[],t=[];return this.panels.forEach(s=>{if(s.fields.length){let i=s.fields.filter(e=>"SINGLE_SELECT"===e.type||"SINGLE_CHOICE"===e.type||"MULTIPLE_CHOICE"===e.type||"MULTI_SELECT"===e.type);i.length&&i.forEach(s=>{if(s.settings.validation.enableSettings&&s.settings.validation.enableSettings.length){let i=[];s.settings.validation.enableSettings.forEach(e=>{e.controls.length&&(i.push({value:e.value,childControls:e.controls}),e.controls.forEach(e=>{i.indexOf(e)<0&&t.push(e)}))}),i.length&&e.push({id:s.id,parentControls:i})}})}}),{listControls:t,controls:e}}},watch:{value:{immediate:!0,deep:!0,async handler(){if(this.file.id&&this.value){if(this.getUserList(),this.getItemDetails(),this.getFileRetentions(),this.getWorkflows(),this.isSignProcessFound=!1,this.file.name){let e=this.file.name.split(".").pop();"pdf"===e.toLowerCase()&&this.getSignWorkflow()}if(this.getFileHistory(),this.getTaskForm(),this.file.repositoryId&&this.getFolderSecurity(),this.file.hasPassword)if(this.$store.state.session.id==this.file.encryptedBy){let e=this.actionList.findIndex(e=>"Set_Password"===e.id);this.actionList[e].label="Change Password",this.actionList[1].visible=!0,this.actionList[2].visible=!0}else this.actionList[1].visible=!1,this.actionList[2].visible=!1;else this.actionList[1].visible=!0,this.actionList[2].visible=!1;let e=this.actionList.findIndex(e=>"CheckIn"===e.id),t=this.actionList.findIndex(e=>"CheckOut"===e.id);this.file.checkinStatus?2===this.file.checkinStatus&&this.file.checkinBy===this.$store.state.session.email?e>=0&&(this.actionList[e].disable=!1,this.actionList[t].disable=!0):1===this.file.checkinStatus&&this.file.checkinBy===this.$store.state.session.email&&t>=0&&(this.actionList[t].disable=!1,this.actionList[e].disable=!0):t>=0&&(this.actionList[t].disable=!1,this.actionList[e].disable=!0)}}},workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&this.initiateWorkflow()}},options:{deep:!0,immediate:!0,handler(){this.actionList=this.updatedActionList}}},methods:{fileLink(){let e=location.origin.replace("http://localhost:8080","https://trial.ezofis.com");if(this.file.name){let t=this.file.name.split(".").pop();if(Object(Ue["d"])(t)){let s="";return this.fileAction&&(s="&action="+this.fileAction),"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}`:"https://trial.ezofis.com"!==e||Object(Ue["c"])(t)?"https://app.ezofis.com"===e?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}${s}`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}${s}`:(this.isSignProcessFound&&0===this.file.checkinStatus&&(localStorage.setItem("viewerClose",!1),localStorage.setItem("viewerEdit",!1),this.watchViewerEdit=setInterval(()=>this.checkViewerEdit(),1e3),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3)),`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}${s}`)}return Object(Ue["b"])(t)||"http://52.172.32.88"!==e?`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.file.repositoryId}/${this.file.id}/2`:(localStorage.setItem("viewerClose",!1),localStorage.setItem("viewerEdit",!1),this.watchViewerEdit=setInterval(()=>this.checkViewerEdit(),1e3),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}`)}return""},closeFileSheet(){this.$emit("input",!1)},updateColumns(e){if(this.selectList={},"Set_Password"===e.id||"Remove_Password"===e.id)this.showPasswordModal=!0,this.selectList=e;else if("Indexing_Change"===e.id)this.showMetaDataEditModal=!0;else if("Encrypt"===e.id||"Decrypt"===e.id)this.showEncryptDecryptModal=!0,this.selectList=e;else if("Hide_Pages"===e.id&&this.file&&this.file.name&&this.file.name.endsWith(".pdf"))this.showHidePageModal=!0,this.selectList=e;else if("Task"===e.id)this.taskEntries.length?this.taskSheet=!0:this.addTask();else if("Alert"===e.id)this.showAlertModal=!0;else if("CheckIn"===e.id||"CheckOut"===e.id)"CheckOut"===e.id?this.showCheckedInOutModal=!0:(this.itemId=this.file.id,this.showCheckinModal=!0),this.selectList=e;else if("Delete"===e.id)this.showDeleteModal=!0,this.selectList=e;else if("Add_To_Vault"===e.id)this.showAddVaultModal=!0;else if("Email_Sharing"===e.id)this.selectedFileList=[],this.selectedFileList.push({id:this.file.id,name:this.file.name}),this.emailSharingSheet=!0;else if("Print"===e.id){if(this.file.name){let e=this.file.name.split(".").pop();Object(Ue["d"])(e)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.file.id)):this.$refs.myFiles.contentWindow.print()}this.filePrintSession()}else if("Initiate_Workflow"===e.id);else if("Download"===e.id){let e="";e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.file.repositoryId}/${this.file.id}/2`,window.open(e,"_blank")}},closeProcessSheet(){this.processSheet=!1},showLinks(e){"ATTACHMENTS"===e?this.attachmentSheet=!0:"COMMENTS"===e?this.commentsSheet=!0:"PRINT"===e?window.print():"TASK"===e&&(this.taskEntries.length?this.taskSheet=!0:this.addTask())},closeAttachmentsSheet(){this.attachmentSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},commentsText(e){return e.processId?[`<b>${e.workflowName} : ${e.requestNo}</b><br/> ${e.comments}`]:2===e.checkinStatus?["<b>CheckOut:</b><br/> "+e.comments]:1===e.checkinStatus?["<b>CheckIn:</b><br/> "+e.comments]:[e.comments]},bgCommentsColor(e){return e.processId?"orange-1":2===e.checkinStatus?"red-1":1===e.checkinStatus?"green-1":e.createdBy===this.$store.state.session.id?"primary-1":"secondary-1"},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},openFile(e){this.selectedFile=e;let t=location.origin;"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?window.open(this.fileLink()):this.fileSheet=!0},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},attachedFileSize(e){return Object(o["a"])(e)},attachedFileLink(){return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view?id=${this.selectedFile.id}&type=1`},closeTaskSheet(){this.taskSheet=!1},validateRequest(e){this.saveAction=e},addTask(){this.selectedTask={},this.taskMode="NEW",this.addTaskSheet=!0},addTaskEntry(e,t){this.taskEntryId.push({formId:e,formEntryId:t}),this.getTaskFormEntry(e,t)},getColor(e){return"Closed"===e||"High"===e?"red":"In Progress"===e||"Medium"===e?"warning":"Open"===e||"Low"===e?"secondary":"primary"},disableAction(e,t){return!!("Hide_Pages"===t.id&&e&&this.file&&this.file.name)&&!this.file.name.endsWith(".pdf")},closeDeleteFile(){this.showDeleteModal=!1,this.$emit("input",!1)},showCheckinUploadFile(e){if(2===e.checkinStatus)this.showCheckinModal=!0,console.log(e),this.itemId=e.id;else{this.showCheckedInOutModal=!0;let e=this.actionList.findIndex(e=>"CheckOut"===e.id);this.selectList=this.actionList[e]}},queueFilesForUpload(e){this.filesError=!1,this.filesToUpload.push(...e)},fileDownload(){let e="";e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.file.repositoryId}/${this.file.id}/2`,window.open(e,"_blank")},reset(){this.filesToUpload=[],this.comments="",this.showCheckinModal=!1},deleteUploadFile(e){this.filesToUpload.splice(e,1)},checkSignProcess(){this.signType=0,this.orderType=1,this.signProcessModal=!0},openSignProcess(){this.signProcessModal=!1,this.actions=[];let e=JSON.parse(this.signWorkflow.flowJson),t=e.blocks.find(e=>"START"===e.type);if(t&&"MANUAL"===t.settings.initiateMode){this.headerTitle=`${this.signWorkflow.name} - ${t.settings.label}`;let s=e.rules.find(e=>e.fromBlockId===t.id);s&&this.actions.push(s.proceedAction)}localStorage.setItem("userList",JSON.stringify(this.userList)),localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),this.documentSignProcess=!0,this.processSheet=!0},itemLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88"),t="";return t="https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":"https://app.ezofis.com"===e?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":"http://52.172.32.88"===e?"http://52.172.32.88/DocsViewer/index.html":e+"/PDFViewer/web/viewer.html",`${t}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&wId=${this.signWorkflow.id}&type=2&position=true&signType=${this.signType}&orderType=${this.orderType}`},checkViewerClose(){localStorage.getItem("viewerClose")&&"true"===localStorage.getItem("viewerClose")&&(clearInterval(this.watchViewerClose),localStorage.removeItem("viewerClose"),this.processSheet?this.getSignerSettings():this.closeFileSheet())},checkViewerEdit(){localStorage.getItem("viewerEdit")&&"true"===localStorage.getItem("viewerEdit")&&(localStorage.removeItem("viewerEdit"),clearInterval(this.watchViewerEdit),this.documentEdit=!0)},async getUserList(){const{error:e,payload:t}=await r["s"].getUserList();e?this.$alert.error("Error fetching users"):this.userList=t&&t.map(e=>({id:e.id,value:e.value,firstName:e.firstName}))},async getItemDetails(){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["p"].getFileData({repositoryId:this.file.repositoryId,itemId:this.file.id});this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t&&(this.fileData=t)},async getFileRetentions(){this.retentionList=[];const{error:e,payload:t}=await r["p"].getRetentions({sortBy:{criteria:"",order:"ASC"},groupBy:"",filterBy:[{filters:[{criteria:"repositoryId",condition:"IS_EQUALS_TO",value:this.file.repositoryId},{criteria:"itemId",condition:"IS_EQUALS_TO",value:this.file.id}],groupCondition:""}],currentPage:0,itemsPerPage:0,mode:"BROWSE"});e?this.$alert.error(e):null!==t&&(this.retentionList=t&&t.map(e=>({id:e.id,name:e.name,action:e.action,actionDate:e.actionDate,fieldId:e.fieldId,durationType:e.durationType,duration:e.duration,notifyJson:e.notifyJson})))},async getWorkflows(){this.workflows=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["t"].getWorkflows({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"initiatedBy",condition:"CONTAINS",value:"Document",dataType:""},{criteria:"flowstatus",condition:"IS_EQUALS_TO",value:"PUBLISHED",dataType:""},{criteria:"repositoryId",condition:"IS_EQUALS_TO",value:this.file.repositoryId,dataType:""}],groupCondition:""}],itemsPerPage:0,currentPage:0,hasSecurity:!1});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);const{data:s}=t;s.length&&s[0].value.length&&(s[0].value.forEach(e=>{let t=JSON.parse(e.flowJson),s=t.blocks.find(e=>"START"===e.type);if(s&&s.settings.initiateBy.indexOf("USER")>-1){let i=!1;if((s.settings.users.indexOf(this.$store.state.session.id)>-1||s.settings.users.indexOf("0")>-1)&&(i=!0),s.settings.initiateBy.indexOf("DOMAIN_USER")>-1){let e=this.$store.state.session.email.split("@").pop();s.settings.userDomains.indexOf(e)>-1&&(i=!0)}if(i){let i="",a=t.rules.find(e=>e.fromBlockId===s.id);a&&(i=a.proceedAction),this.workflows.push({id:e.id,name:e.name,review:i,initiatedBy:e.initiatedBy,formId:e.wFormId,flowJson:e.flowJson})}}}),this.workflows.length&&this.actionList.find(e=>{"Initiate_Workflow"===e.id&&(e.subMenu=this.workflows)}))},async getSignWorkflow(){this.isSignProcessFound=!1,this.signWorkflow={},this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["t"].getWorkflows({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"initiatedBy",condition:"CONTAINS",value:"DOCUMENT_SIGN",dataType:""},{criteria:"flowstatus",condition:"IS_EQUALS_TO",value:"PUBLISHED",dataType:""}],groupCondition:""}],itemsPerPage:0,currentPage:0,hasSecurity:!1});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);const{data:s}=t;s.length&&s[0].value.length&&(this.isSignProcessFound=!0,s[0].value.forEach(e=>{let t=JSON.parse(e.flowJson),s=t.blocks.find(e=>"START"===e.type);if(s){let i="",a=t.rules.find(e=>e.fromBlockId===s.id);a&&(i=a.proceedAction),this.signWorkflow={id:e.id,name:e.name,review:i,initiatedBy:e.initiatedBy,formId:e.wFormId,flowJson:e.flowJson}}}))},async checkWorkflow(e){if(this.documentSignProcess=!1,"DOCUMENT"===e.initiatedBy||"DOCUMENT_SIGN"===e.initiatedBy)this.workflowInit=e,this.saveAction=e.review,this.initiateWorkflow();else if("DOCUMENT_FORM"===e.initiatedBy&&e.formId){this.workflowInit=e,this.actions=[],await this.getForm(e.formId),this.formId=String(e.formId);let t=JSON.parse(e.flowJson),s=t.blocks.find(e=>"START"===e.type);if(s&&"MANUAL"===s.settings.initiateMode){this.headerTitle=`${e.name} - ${s.settings.label}`;let i=t.rules.find(e=>e.fromBlockId===s.id);i&&this.actions.push(i.proceedAction)}const i=[...this.form.panels,...this.form.secondaryPanels];if(!i.length)return;let a=[];for(const e of i)a.push(...e.fields);a.forEach(e=>{this.fileData.forEach(t=>{t.name==e.label&&(this.formModel[e.id]=t.value)})}),this.processSheet=!0}},async getForm(e){const{error:t,payload:s}=await r["g"].getForm(e);t?this.$alert.error(t):s&&(this.form=JSON.parse(s.formJson))},async initiateWorkflow(){let e=[];this.attachmentList.length&&this.attachmentList.forEach(t=>{e.push(t.id)});let t={workflowId:this.workflowInit.id,repositoryId:this.file.repositoryId,itemId:this.file.id,review:this.saveAction,formData:{formId:this.workflowInit.formId,fields:this.workflowFormModel},comments:this.commentsList,task:this.taskEntryId,userIds:this.transactionUserIds,fileIds:e};this.saveAction="",this.workflowFormModel={},this.$store.commit("showLoadingBarSave");const{error:s,payload:i}=await r["t"].processTransaction(t);this.$store.commit("hideLoadingBarSave"),s?this.$alert.error(s):(this.$alert.success(i.requestNo+" Request Initiated"),"DOCUMENT_SIGN"===this.workflowInit.initiatedBy&&this.updateSignerSettingWithProcessId(i),this.workflowInit={},this.closeProcessSheet())},async saveComment(){this.commentText&&(this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id,fileIds:[0]}),this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}),this.commentText="")},async saveAdvancedComment(){this.advancedCommentText&&(this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id,fileIds:[0]}),this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}),this.advancedCommentText="",this.advancedCommentsSheet=!1)},async getRepository(){const{error:e,payload:t}=await r["p"].getRepository(this.file.repositoryId);e?this.$alert.error(e):this.repositoryDetails=t},async uploadWflowAttachments(e){"STATIC"===this.repositoryDetails.fieldsType&&(this.selectedUploadFile=e,this.uploadFilename=e.target.files[0].name,this.showMetaDataEditModal=!0)},async uploadAttachments(e){const t=e.target.files[0],s=new FormData;s.append("file",t),s.append("repositoryId",this.file.repositoryId);let i=e.target.files[0].name;const a=i.split(".").pop();if(Object(Ue["a"])(a))try{const i=await je()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:s,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:a,data:o}=i;if(200!==a)throw"Invalid response";let r=JSON.parse(o);this.attachmentList.push({id:Number(r.fileId),name:t.name,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:t.size,initiate:!0}),e.target.value=""}catch(o){console.error(o),this.$alert.error("error attaching file")}else this.$alert.info("This file format is not supported")},async attachmentDelete(e){if(this.$store.commit("showLoadingBar"),e.initiate){const{error:t}=await r["r"].deleteUploadedFiles([e.id]);if(t)return void this.$alert.error(t);this.$store.commit("hideLoadingBar"),this.attachmentList=this.attachmentList.filter(t=>t.id!==e.id)}},async getTaskForm(){this.taskFormList=[],this.addTaskEnabled=!1;const{error:e,payload:t}=await r["g"].getForms({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"type",condition:"IS_EQUALS_TO",value:"Task",dataType:""}],groupCondition:""}],itemsPerPage:50,currentPage:1});if(e)return void this.$alert.error(e);const{data:s}=t;s.length&&s[0].value.length&&(this.addTaskEnabled=!0,s[0].value.forEach(e=>{this.taskFormList.push({id:e.id,label:e.name,value:e.id,repositoryId:e.repositoryId,formJson:e.formJson})}),this.taskFormList.length&&1===this.taskFormList.length&&(this.taskFormId=this.taskFormList[0].id,this.taskRepositoryId=this.taskFormList[0].repositoryId,this.addTaskForm=JSON.parse(this.taskFormList[0].formJson),this.getDocumentTaskEntries()))},async getTaskFormEntry(e,t){this.$store.commit("showLoadingBar");const{error:s,payload:i}=await r["g"].getFormEntry(e,t);if(this.$store.commit("hideLoadingBar"),s)this.$alert.error(s);else if(i.length){const e=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let t=[];for(const i of e)t.push(...i.fields);let s="",a="",o="",r="",n="",l="";t.forEach(e=>{switch(e.label){case"Task Name":s=i[0][e.id];break;case"Task Assign":a=i[0][e.id];break;case"Start Date":o=i[0][e.id];break;case"End Date":r=i[0][e.id];break;case"Priority":n=i[0][e.id];break;case"Task Status":l=i[0][e.id];break}}),this.taskEntries.push({id:i[0].itemid,name:s,assigned:a,startDate:o,endDate:r,priority:n,status:l})}},async getDocumentTaskEntries(){this.taskEntries=[];const{error:e,payload:t}=await r["g"].getDocumentTaskEntries(this.taskFormId,this.file.repositoryId,this.file.id);if(e)this.$alert.error(e);else if(t.length){const e=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let s=[];for(const t of e)s.push(...t.fields);let i="",a="",o="",r="",n="",l="";s.forEach(e=>{switch(e.label){case"Task Name":i=t[0][e.id];break;case"Task Assign":a=t[0][e.id];break;case"Start Date":o=t[0][e.id];break;case"End Date":r=t[0][e.id];break;case"Priority":n=t[0][e.id];break;case"Task Status":l=t[0][e.id];break}}),this.taskEntries.push({id:t[0].itemid,name:i,assigned:a,startDate:o,endDate:r,priority:n,status:l})}},async filePrintSession(){const{error:e}=await r["k"].filePrintSession({repositoryId:this.file.repositoryId,itemId:this.file.id,activityId:4});e&&this.$alert.error(e)},async getFileHistory(){this.$store.commit("showLoadingBar"),this.history=[];const{error:e,payload:t}=await r["o"].getRepositoryData(this.file.repositoryId,{itemId:this.file.id,filterBy:[],itemsPerPage:100,currentPage:1});this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t&&(this.history=t.data[0].value.map(e=>({activity:e.activity,activityBy:e.activityBy,activityOn:this.$day.format(e.activityOn)})))},async uploadFile(){const e=await this.$refs.checkin.validate();if(!this.filesToUpload.length)return void(this.filesError=!0);if(!e)return;let t=this.filesToUpload[0],s=0;const i=new FormData;i.append("file",t.file),i.append("repositoryId",this.file.repositoryId),i.append("itemId",this.itemId),i.append("comments",this.comments),this.showProgress=!0,this.showDeleteBtn=!1;let a=t.name;const o=a.split(".").pop();if(!Object(Ue["a"])(o))return this.filesToUpload.splice(s,1),void this.$alert.info("This file format is not supported");try{const e=await je()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"},onUploadProgress:function(e){const s=Math.round(100*e.loaded/e.total);t.uploadedPercentage=s}}),{status:s}=e;if(200!==s)throw"Invalid response";this.$alert.success("file updated successfully"),this.reset(),this.showCheckinModal=!1,this.$emit("input",!1)}catch(r){console.error(r),this.$alert.error("error uploading file - "+t.name)}},async saveMetaData(e){this.$store.commit("showLoadingBar");let t=[],s=!1;if(e.forEach(e=>{e.oldValue!==e.newValue&&(s=!0,t.push(e))}),!s)return void this.$alert.error("Not edited any field");let i={repositoryId:this.file.repositoryId,itemId:this.file.id,settings:JSON.stringify(t)};const{error:a,payload:o}=await r["p"].saveMetaData(i);this.$store.commit("hideLoadingBar"),a?this.$alert.error(a):(o&&this.$alert.success("Metadata edit successfully"),this.getItemDetails())},async getFolderSecurity(){const{error:e,payload:t}=await r["p"].getRepositorySecurity(this.file.repositoryId);if(e)this.$alert.error(e);else if(t&&t.userOptions){const e=t.userOptions.map(e=>({id:e.id,userName:e.email,userId:e.userId,options:JSON.parse(e.options)}));let s=e.find(e=>e.userId===this.$store.state.session.id),i=!1;i=!(!s||!s.options)&&!!s.options.metadataEdit;const a=t.groupOptions.map(e=>({id:e.id,groupId:e.groupId,options:JSON.parse(e.options)}));let o=!1;this.$store.state.session.groups&&this.$store.state.session.groups.forEach(e=>{let t=a.find(t=>t.groupId===e.id);t&&t.options&&t.options.metadataEdit&&(o=!0)});let r=this.actionList.findIndex(e=>"Indexing_Change"===e.id);r>=0&&(this.actionList[r].disable=!i&&!o)}},async getSignerSettings(){this.transactionUserIds=[],this.signerSettings={};let e=[{groupCondition:"",filters:[{criteria:"repositoryId",condition:"IS_EQUALS_TO",value:this.file.repositoryId.toString()},{criteria:"itemId",condition:"IS_EQUALS_TO",value:this.file.id.toString()}]}];try{const t=await je()({url:`https://appuat.ezofis.com/ezofisapi/api/annotation/signSettingsList/${this.$store.state.session.tenantId}/${this.signWorkflow.id}`,method:"POST",headers:{Accept:"application/json"},data:e}),{status:s,data:i}=t;if(200!==s)throw"Invalid response";this.signerSettings=JSON.parse(i);let a=JSON.parse(this.signerSettings.settingsJson);if(a.length)if(0===this.orderType)a.forEach(e=>{"External"===e.signerType?this.transactionUserIds.push(e.externalSignerId):this.transactionUserIds.push(e.signerId)});else{let e=a.find(e=>1===e.signOrder);if(e){let t="External"===e.signerType?e.externalSignerId:e.signerId;this.transactionUserIds.push(t)}}this.transactionUserIds.length&&this.checkWorkflow(this.signWorkflow)}catch(t){console.error(t),this.$alert.error("error getting signer details")}},async updateSignerSettingWithProcessId(e){try{this.signerSettings.processId=e.processId;let t={pId:e.processId,rId:this.signerSettings.repositoryId,itemId:this.signerSettings.itemId,settingsJson:this.signerSettings.settingsJson,isDeleted:0};const s=await je()({url:`https://appuat.ezofis.com/ezofisapi/api/annotation/signSettings/${this.$store.state.session.tenantId}/${this.signWorkflow.id}/${this.signerSettings.id}`,method:"PUT",headers:{Accept:"application/json"},data:t}),{status:i}=s;if(202!==i)throw"Invalid response"}catch(t){console.error(t),this.$alert.error("error updating signer details")}}}},it=st,at=(s("487e"),s("b047")),ot=s("cb32"),rt=s("4e73"),nt=Object(I["a"])(it,i,a,!1,null,"07c89b08",null);t["a"]=nt.exports;q()(nt,"components",{QChip:at["a"],QAvatar:ot["a"],QMenu:rt["a"],QChatMessage:D["a"]})},"718c":function(e,t,s){"use strict";s("1a82")},"71f4":function(e,t,s){},7225:function(e,t,s){"use strict";s("afe7")},7334:function(e,t,s){},7365:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("ItemList",{attrs:{columns:e.columns,items:e.items,mode:e.mode},on:{select:e.handleSelect,edit:e.handleEdit,delete:e.handleDelete,restore:e.handleRestore,more:e.handleMore,info:e.handleInfo},scopedSlots:e._u([{key:"entries",fn:function({value:s,item:i}){return[t("div",{staticClass:"stat",on:{click:function(t){return t.stopPropagation(),e.$emit("entries",i.id)}}},[t("div",{staticClass:"ellipsis"},[e._v(" "+e._s(s||"-")+" ")])])]}}])})},a=[],o=s("f92f"),r={name:"ConnectionEntryList",components:{ItemList:o["a"]},props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},mode:{type:String,required:!0}},methods:{handleSelect(e){this.$emit("select",e)},handleEdit(e){this.$emit("edit",e)},handleDelete(e){this.$emit("delete",e)},handleRestore(e){this.$emit("restore",e)},handleMore(e){this.$emit("more",e)},handleInfo(e){this.$emit("info",e)}}},n=r,l=s("2877"),c=Object(l["a"])(n,i,a,!1,null,"af89c504",null);t["a"]=c.exports},"739a":function(e,t,s){var i={"./users-dark.png":"53ed","./users-light.png":"53f6","./workspace-dark.png":"c53c","./workspace-light.png":"972e"};function a(e){var t=o(e);return s(t)}function o(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=o,e.exports=a,a.id="739a"},"73e0":function(e,t,s){"use strict";s("8ddd")},"73e7":function(e,t,s){},"742a":function(e,t,s){"use strict";s("ef04")},"74d9":function(e,t,s){"use strict";s("ee7b")},"75a4":function(e,t,s){"use strict";s("f458")},"75c3":function(e,t,s){"use strict";var i=s("0967"),a=s("7c86"),o=s("d882"),r=s("f249");function n(e,t,s){const i=Object(o["h"])(e);let a,r=i.left-t.event.x,n=i.top-t.event.y,l=Math.abs(r),c=Math.abs(n);const d=t.direction;!0===d.horizontal&&!0!==d.vertical?a=r<0?"left":"right":!0!==d.horizontal&&!0===d.vertical?a=n<0?"up":"down":!0===d.up&&n<0?(a="up",l>c&&(!0===d.left&&r<0?a="left":!0===d.right&&r>0&&(a="right"))):!0===d.down&&n>0?(a="down",l>c&&(!0===d.left&&r<0?a="left":!0===d.right&&r>0&&(a="right"))):!0===d.left&&r<0?(a="left",l<c&&(!0===d.up&&n<0?a="up":!0===d.down&&n>0&&(a="down"))):!0===d.right&&r>0&&(a="right",l<c&&(!0===d.up&&n<0?a="up":!0===d.down&&n>0&&(a="down")));let u=!1;if(void 0===a&&!1===s){if(!0===t.event.isFirst||void 0===t.event.lastDir)return{};a=t.event.lastDir,u=!0,"left"===a||"right"===a?(i.left-=r,l=0,r=0):(i.top-=n,c=0,n=0)}return{synthetic:u,payload:{evt:e,touch:!0!==t.event.mouse,mouse:!0===t.event.mouse,position:i,direction:a,isFirst:t.event.isFirst,isFinal:!0===s,duration:Date.now()-t.event.time,distance:{x:l,y:c},offset:{x:r,y:n},delta:{x:i.left-t.event.lastX,y:i.top-t.event.lastY}}}}function l(e){const t=e.__qtouchpan;void 0!==t&&(void 0!==t.event&&t.end(),Object(o["b"])(t,"main"),Object(o["b"])(t,"temp"),!0===i["a"].is.firefox&&Object(o["j"])(e,!1),void 0!==t.styleCleanup&&t.styleCleanup(),delete e.__qtouchpan)}let c=0;t["a"]={name:"touch-pan",bind(e,{value:t,modifiers:s}){if(void 0!==e.__qtouchpan&&(l(e),e.__qtouchpan_destroyed=!0),!0!==s.mouse&&!0!==i["a"].has.touch)return;function d(e,t){!0===s.mouse&&!0===t?Object(o["l"])(e):(!0===s.stop&&Object(o["k"])(e),!0===s.prevent&&Object(o["i"])(e))}const u={uid:"qvtp_"+c++,handler:t,modifiers:s,direction:Object(a["a"])(s),noop:o["g"],mouseStart(e){Object(a["b"])(e,u)&&Object(o["e"])(e)&&(Object(o["a"])(u,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),u.start(e,!0))},touchStart(e){if(Object(a["b"])(e,u)){const t=e.target;Object(o["a"])(u,"temp",[[t,"touchmove","move","notPassiveCapture"],[t,"touchcancel","end","passiveCapture"],[t,"touchend","end","passiveCapture"]]),u.start(e)}},start(t,a){!0===i["a"].is.firefox&&Object(o["j"])(e,!0),u.lastEvt=t;const r=Object(o["h"])(t);if(!0===a||!0===s.stop){if(!0!==u.direction.all&&(!0!==a||!0!==u.modifiers.mouseAllDir&&!0!==u.modifiers.mousealldir)){const e=t.type.indexOf("mouse")>-1?new MouseEvent(t.type,t):new TouchEvent(t.type,t);!0===t.defaultPrevented&&Object(o["i"])(e),!0===t.cancelBubble&&Object(o["k"])(e),e.qClonedBy=void 0===t.qClonedBy?[u.uid]:t.qClonedBy.concat(u.uid),e.qKeyEvent=t.qKeyEvent,e.qClickOutside=t.qClickOutside,u.initialEvent={target:t.target,event:e}}Object(o["k"])(t)}u.event={x:r.left,y:r.top,time:Date.now(),mouse:!0===a,detected:!1,isFirst:!0,isFinal:!1,lastX:r.left,lastY:r.top}},move(e){if(void 0===u.event)return;u.lastEvt=e;const t=!0===u.event.mouse,s=()=>{let s;d(e,t),!0!==u.modifiers.preserveCursor&&!0!==u.modifiers.preservecursor&&(s=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),!0===t&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Object(r["a"])(),u.styleCleanup=e=>{if(u.styleCleanup=void 0,void 0!==s&&(document.documentElement.style.cursor=s),document.body.classList.remove("non-selectable"),!0===t){const t=()=>{document.body.classList.remove("no-pointer-events--children")};void 0!==e?setTimeout(()=>{t(),e()},50):t()}else void 0!==e&&e()}};if(!0===u.event.detected){!0!==u.event.isFirst&&d(e,u.event.mouse);const{payload:t,synthetic:i}=n(e,u,!1);return void(void 0!==t&&(!1===u.handler(t)?u.end(e):(void 0===u.styleCleanup&&!0===u.event.isFirst&&s(),u.event.lastX=t.position.left,u.event.lastY=t.position.top,u.event.lastDir=!0===i?void 0:t.direction,u.event.isFirst=!1)))}if(!0===u.direction.all||!0===t&&(!0===u.modifiers.mouseAllDir||!0===u.modifiers.mousealldir))return s(),u.event.detected=!0,void u.move(e);const i=Object(o["h"])(e),a=i.left-u.event.x,l=i.top-u.event.y,c=Math.abs(a),m=Math.abs(l);c!==m&&(!0===u.direction.horizontal&&c>m||!0===u.direction.vertical&&c<m||!0===u.direction.up&&c<m&&l<0||!0===u.direction.down&&c<m&&l>0||!0===u.direction.left&&c>m&&a<0||!0===u.direction.right&&c>m&&a>0?(u.event.detected=!0,u.move(e)):u.end(e,!0))},end(t,s){if(void 0!==u.event){if(Object(o["b"])(u,"temp"),!0===i["a"].is.firefox&&Object(o["j"])(e,!1),!0===s)void 0!==u.styleCleanup&&u.styleCleanup(),!0!==u.event.detected&&void 0!==u.initialEvent&&u.initialEvent.target.dispatchEvent(u.initialEvent.event);else if(!0===u.event.detected){!0===u.event.isFirst&&u.handler(n(void 0===t?u.lastEvt:t,u).payload);const{payload:e}=n(void 0===t?u.lastEvt:t,u,!0),s=()=>{u.handler(e)};void 0!==u.styleCleanup?u.styleCleanup(s):s()}u.event=void 0,u.initialEvent=void 0,u.lastEvt=void 0}}};e.__qtouchpan=u,!0===s.mouse&&Object(o["a"])(u,"main",[[e,"mousedown","mouseStart","passive"+(!0===s.mouseCapture||!0===s.mousecapture?"Capture":"")]]),!0===i["a"].has.touch&&Object(o["a"])(u,"main",[[e,"touchstart","touchStart","passive"+(!0===s.capture?"Capture":"")],[e,"touchmove","noop","notPassiveCapture"]])},update(e,{oldValue:t,value:s}){const i=e.__qtouchpan;void 0!==i&&t!==s&&("function"!==typeof s&&i.end(),i.handler=s)},unbind(e){void 0===e.__qtouchpan_destroyed?l(e):delete e.__qtouchpan_destroyed}}},7794:function(e,t,s){"use strict";s("caad");var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{attrs:{id:"repository-field"}},[e.showFreeze?t("div",{attrs:{id:"checkbox-field"}},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Freeze",expression:"'Freeze'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:e.freezed?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:e.handleFreeze},model:{value:e.freezed,callback:function(t){e.freezed=t},expression:"freezed"}})],1):e._e(),"SHORT_TEXT"===e.field.dataType||"BARCODE"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:s[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,2138129544)}):e._e(),"NUMBER"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory,integer:!e.field.options.allowDecimals}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("NumberField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:s[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,3272965974)}):e._e(),"DATE"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:s[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,2736912833)}):e._e(),"TIME"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TimeField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:s[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,2195704480)}):e._e(),"DATE_TIME"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateTimeField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:s[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,1802324180)}):e._e(),"SINGLE_SELECT"===e.field.dataType&&["EXISTING"].includes(e.field.options.optionsType)?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("AsyncSelectField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,"api-path":e.apiPath,error:s[0],"new-option":e.field.options.allowToAddNewOptions,"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,364407705)}):e._e(),"SINGLE_SELECT"===e.field.dataType&&"PREDEFINED"===e.field.options.optionsType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:s[0],"new-option":e.field.options.allowToAddNewOptions,options:e.predefinedSelectOptions,"is-readonly":e.readOnly,page:"repository"},on:{input:e.handleInput}})]}}],null,!1,3382750843)}):e._e(),"SINGLE_SELECT"===e.field.dataType&&["MASTER"].includes(e.field.options.optionsType)?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:s[0],"new-option":e.field.options.allowToAddNewOptions,options:e.options,"is-readonly":e.readOnly,page:"repository"},on:{input:e.handleInput}})]}}],null,!1,768311157)}):e._e(),"BOOLEAN"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SingleChoiceField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,options:e.booleanOptions,error:s[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,61245750)}):e._e(),"OMR"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SingleChoiceField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,options:e.omrOptions,error:s[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,1875132930)}):e._e()],1),t("div",{staticClass:"row items-center justify-center q-mt-sm"},[e.visiableSyncBtn?t("BaseButton",{attrs:{label:"Sync",color:"secondary"},on:{click:function(t){return e.$emit("saveSync",e.field)}}}):e._e()],1)])},a=[],o=s("7bb1"),r=s("b3d1"),n=s("ad54"),l=s("53c1"),c=s("cedb"),d=s("d1e5"),u=s("12b8"),m=s("0c21"),h=s("9234"),p=s("0d5e"),f={name:"RepositoryField",components:{ValidationProvider:o["b"],TextField:r["a"],NumberField:n["a"],DateField:l["a"],TimeField:c["a"],DateTimeField:d["a"],SelectField:u["a"],AsyncSelectField:m["a"],SingleChoiceField:h["a"]},props:{field:{type:Object,required:!0},repositoryId:{type:[String,Number],required:!0},value:{type:[String,Number],required:!0},readOnly:{type:Boolean,default:!1},label:{type:String,default:""},syncField:{type:Object,default:()=>{}},parentControl:{type:Boolean,default:!1},rowIndex:{type:Number,required:!0},filter:{type:Boolean,default:!1},freezedData:{type:Object,default:()=>{}},showFreeze:{type:Boolean,default:!1}},data(){return{booleanOptions:[{id:this.$nano.id(),label:this.field.options.truthyValue,value:this.field.options.truthyValue},{id:this.$nano.id(),label:this.field.options.falsyValue,value:this.field.options.falsyValue}],omrOptions:[{id:this.$nano.id(),label:"Yes",value:"true"},{id:this.$nano.id(),label:"No",value:"false"}],visiableSyncBtn:!1,options:[],freeze:!1,freezeData:this.freezedData,freezed:!1}},computed:{predefinedSelectOptions(){return this.field.options.predefinedOptions.map(e=>({id:this.$nano.id(),label:e,value:e}))},apiPath(){return`/repository/${this.repositoryId}/uniqueColumnValues`}},watch:{field:{immediate:!0,async handler(){for(let e in this.syncField)this.syncField[e]===this.field.name&&(this.visiableSyncBtn=!0)}},filter:{immediate:!0,deep:!0,handler(){this.field.filterBy&&this.field.options.masterFormId&&this.getMasterEntriesFilter(this.field)}}},created(){this.freezedData&&(this.freezed=this.field.name in this.freezedData),this.field.options.masterFormId&&this.getMasterEntries(this.field.options.masterFormId,this.field.options.masterTableColumn)},methods:{handleInput(e){this.$emit("input",e),this.parentControl&&this.$emit("filterBy",this.field,this.rowIndex),this.freezed&&this.updateOrAddField(this.field.name,e)},handleFreeze(){this.freezed=!this.freezed,this.freezed?(this.updateOrAddField(this.field.name,this.value),this.$emit("update:freezed",this.freeze)):this.$emit("update:removeFreezed",this.field.name)},updateOrAddField(e,t){e in this.freezeData?this.freezeData[e]=t:this.freezeData={...this.freezeData,[e]:t},this.$emit("update:freezedData",this.freezeData)},async getMasterEntries(e,t){try{const s=await p["b"].post(`/form/${e}/uniqueColumnValues`,JSON.stringify({column:t,keyword:"",rowFrom:0,rowCount:0})),{status:i,data:a}=s;if(200!==i)throw s;const o=JSON.parse(a);o.length&&(this.options=o.map(e=>({id:this.$nano.id(),label:e,value:e})))}catch(s){console.error(s),this.$alert.error("Error fetching options")}},async getMasterEntriesFilter(e){try{const t=await p["b"].post(`/form/${e.options.masterFormId}/uniqueColumnValues`,JSON.stringify({column:e.options.masterTableColumn,keyword:"",rowFrom:0,rowCount:0,filters:e.filterBy})),{status:s,data:i}=t;if(200!==s)throw t;const a=JSON.parse(i);a.length?(this.options=a.map(e=>({id:this.$nano.id(),label:e,value:e})),1===this.options.length&&this.handleInput(this.options[0].value)):(this.field.options.masterFormId&&this.getMasterEntries(this.field.options.masterFormId,this.field.options.masterTableColumn),this.handleInput(""))}catch(t){console.error(t),this.$alert.error("Error fetching options")}}}},v=f,y=(s("87dc"),s("2877")),b=Object(y["a"])(v,i,a,!1,null,"174d3602",null);t["a"]=b.exports},"77ac":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("ItemGrid",{attrs:{columns:e.columns,items:e.items,mode:e.mode},on:{select:e.handleSelect,edit:e.handleEdit,delete:e.handleDelete,restore:e.handleRestore,more:e.handleMore,info:e.handleInfo}})},a=[],o=s("0412"),r={name:"ConnectionEntryGrid",components:{ItemGrid:o["a"]},props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},mode:{type:String,required:!0}},methods:{handleSelect(e){this.$emit("select",e)},handleEdit(e){this.$emit("edit",e)},handleDelete(e){this.$emit("delete",e)},handleRestore(e){this.$emit("restore",e)},handleMore(e){this.$emit("more",e)},handleInfo(e){this.$emit("info",e)}}},n=r,l=s("2877"),c=Object(l["a"])(n,i,a,!1,null,"bc5c464a",null);t["a"]=c.exports},"79b4":function(e,t,s){},"7f31":function(e,t,s){},"7fe6":function(e,t,s){"use strict";s("b4cd")},8169:function(e,t,s){"use strict";s("14d9");var i=s("a026"),a=s("87e8");t["a"]=i["default"].extend({name:"QChatMessage",mixins:[a["a"]],props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelSanitize:Boolean,nameSanitize:Boolean,textSanitize:Boolean,stampSanitize:Boolean},computed:{textClass(){return"q-message-text-content q-message-text-content--"+this.op+(void 0!==this.textColor?" text-"+this.textColor:"")},messageClass(){return"q-message-text q-message-text--"+this.op+(void 0!==this.bgColor?" text-"+this.bgColor:"")},containerClass(){return"q-message-container row items-end no-wrap"+(!0===this.sent?" reverse":"")},sizeClass(){if(void 0!==this.size)return"col-"+this.size},op(){return!0===this.sent?"sent":"received"}},methods:{__wrapStamp(e,t){if(void 0!==this.$scopedSlots.stamp)return[t,e("div",{staticClass:"q-message-stamp"},this.$scopedSlots.stamp())];if(this.stamp){const s=!0===this.stampSanitize?"textContent":"innerHTML";return[t,e("div",{staticClass:"q-message-stamp",domProps:{[s]:this.stamp}})]}return[t]},__getText(e,t,s){const i=!0===this.textSanitize?"textContent":"innerHTML";if(!0===s&&!0===t.some(e=>void 0===e.tag&&void 0!==e.text))return[e("div",{class:this.messageClass},[e("div",{class:this.textClass},this.__wrapStamp(e,e("div",t)))])];const a=!0!==s?t=>e("div",{domProps:{[i]:t}}):t.length>1?e=>e:t=>e("div",[t]);return t.map((t,s)=>e("div",{key:s,class:this.messageClass},[e("div",{class:this.textClass},this.__wrapStamp(e,a(t)))]))}},render(e){const t=[];void 0!==this.$scopedSlots.avatar?t.push(this.$scopedSlots.avatar()):void 0!==this.avatar&&t.push(e("img",{class:"q-message-avatar q-message-avatar--"+this.op,attrs:{src:this.avatar,"aria-hidden":"true"}}));const s=[];void 0!==this.$scopedSlots.name?s.push(e("div",{class:"q-message-name q-message-name--"+this.op},this.$scopedSlots.name())):void 0!==this.name&&s.push(e("div",{class:"q-message-name q-message-name--"+this.op,domProps:{[!0===this.nameSanitize?"textContent":"innerHTML"]:this.name}})),void 0!==this.text&&s.push(this.__getText(e,this.text)),void 0!==this.$scopedSlots.default&&s.push(this.__getText(e,this.$scopedSlots.default(),!0)),t.push(e("div",{class:this.sizeClass},s));const i=[];return void 0!==this.$scopedSlots.label?i.push(e("div",{staticClass:"q-message-label"},this.$scopedSlots.label())):void 0!==this.label&&i.push(e("div",{staticClass:"q-message-label",domProps:{[!0===this.labelSanitize?"textContent":"innerHTML"]:this.label}})),i.push(e("div",{class:this.containerClass},t)),e("div",{class:"q-message q-message-"+this.op,on:{...this.qListeners}},i)}})},8180:function(e,t,s){"use strict";s("e0b6")},"81e5":function(e,t,s){"use strict";s("e887")},8505:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("Modal",{attrs:{width:e.externalAccess?"100vw":"70vw","external-access":e.externalAccess},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v('"'+e._s(e.historyTitle)+'" Process History')]},proxy:!0},{key:"action",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Export",expression:"'Export'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-table-arrow-right"},on:{click:e.export_Data}})]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"processHistory"}},[t("div",{staticClass:"col-12 q-mb-md q-pt-sm"},[t("Stepper",{attrs:{"stage-level":e.stageLevel,"current-step":e.currentStep}})],1),t("table",{attrs:{id:"history"}},[t("thead",[t("tr",e._l(e.columns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0)]),t("tbody",[e._l(e.processHistoryData,(function(s){return[t("tr",{key:s.id},e._l(e.columns,(function(i){return t("td",{key:i.id,staticClass:"ellipsis"},[e._t(i.name,(function(){return["DATE"===i.type?[e._v(" "+e._s(e.$day.format(s[i.name])||"-")+" ")]:"stage"===i.name?[e._v(" "+e._s(s[i.name]||"-")+" "),s.subWorkflowHistory?[s.subWorkflowHistory.length?[t("span",{staticClass:"text-secondary"},[e._v(" [CONNECTOR] ")])]:e._e()]:e._e()]:[e._v(" "+e._s(s[i.name]||"-")+" ")]]}),{value:s[i.name],item:s})],2)})),0),s.comments.length?t("tr",{key:s.id,on:{click:function(e){s.showComments=!s.showComments}}},[t("td",{staticClass:"comments",attrs:{colspan:"6"}},[t("BaseIcon",{attrs:{name:s.showComments?"eva-arrow-downward-outline":"eva-arrow-forward-outline",color:"primary"}}),e._v(" Comments ("+e._s(s.comments.length)+") ")],1)]):e._e(),s.comments.length&&s.showComments?t("tr",{key:s.id},[t("td",{attrs:{colspan:"6"}},[t("table",{attrs:{id:"comments1"}},[t("thead",[t("tr",[t("th",{staticClass:"large"},[e._v("Comments")]),t("th",{staticClass:"medium"},[e._v("Commented By")]),t("th",{staticClass:"medium"},[e._v("Commented On")]),t("th",{staticClass:"medium"},[e._v("Attached In")])])]),t("tbody",[e._l(s.comments,(function(s,i){return[t("tr",{key:i},[t("td",{staticClass:"commentsText ellipsis"},[e._v(" "+e._s(e.removeTags(s.comments)||"-")+" ")]),t("td",{staticClass:"ellipsis"},[e._v(" "+e._s(s.createdByEmail||"-")+" ")]),t("td",{staticClass:"ellipsis"},[e._v(" "+e._s(e.$day.format(s.createdAt)||"-")+" ")]),t("td",[s.embedFileList&&s.embedFileList.length?[t("div",{staticClass:"file-icons",on:{click:function(t){return e.openFileByCmd(s.embedFileList[0])}}},[t("FileIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.embedFileList[0].fileName,expression:"\n                                    comment.embedFileList[0].fileName\n                                  ",modifiers:{top:!0}}],key:"Icon-"+i,staticClass:"file-icon q-mr-sm",attrs:{"mime-type":e.fileType(s.embedFileList[0].fileName)}}),t("a",{staticClass:"file-link",attrs:{href:"javascript:void(0)"},on:{click:function(e){e.preventDefault()}}},[e._v(e._s(s.embedFileList[0].fileName||"-"))])],1)]:[e._v(" "+e._s("-")+" ")]],2)])]}))],2)])])]):e._e(),s.attachments.length?t("tr",{key:s.id},[t("td",{staticClass:"attachments",attrs:{colspan:"6"},on:{click:function(e){s.showAttachments=!s.showAttachments}}},[t("BaseIcon",{attrs:{name:s.showAttachments?"eva-arrow-downward-outline":"eva-arrow-forward-outline",color:"primary"}}),e._v(" Attachments ("+e._s(s.attachments.length)+") ")],1)]):e._e(),s.attachments.length&&s.showAttachments?t("tr",{key:s.id},[t("td",{attrs:{colspan:"6"}},[t("table",{attrs:{id:"attachments"}},[t("thead",[t("tr",[t("th",[e._v("File Name")]),t("th",[e._v("Attached By")]),t("th",[e._v("Attached On")])])]),t("tbody",[e._l(s.attachments,(function(s,i){return[t("tr",{key:i},[t("td",[e._v(e._s(s.name||"-"))]),t("td",[e._v(e._s(s.createdByEmail||"-"))]),t("td",[e._v(" "+e._s(e.$day.format(s.createdAt)||"-")+" ")])])]}))],2)])])]):e._e(),s.subWorkflowHistory?[s.subWorkflowHistory.length?t("tr",{key:s.id},[t("td",{staticClass:"attachments",attrs:{colspan:"6"},on:{click:function(e){s.showSubWorkflowHistory=!s.showSubWorkflowHistory}}},[t("BaseIcon",{attrs:{name:s.showSubWorkflowHistory?"eva-arrow-downward-outline":"eva-arrow-forward-outline",color:"primary"}}),1===s.actionStatus?[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Completed",expression:"'Completed'",modifiers:{top:!0}}],staticClass:"q-ml-xs q-mr-xs",attrs:{name:"mdi-progress-check",color:"green"}})]:0===s.actionStatus?[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"In-progress",expression:"'In-progress'",modifiers:{top:!0}}],staticClass:"q-ml-xs q-mr-xs",attrs:{name:"mdi-progress-clock",color:"orange"}})]:e._e(),e._v(" "+e._s(s.subWorkflowHistory[0].requestNo)+" ")],2)]):e._e(),s.showSubWorkflowHistory?t("tr",{key:s.id},[t("td",{attrs:{colspan:"6"}},[t("table",{attrs:{id:"attachments"}},[t("thead",e._l(e.columns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0),t("tbody",[e._l(s.subWorkflowHistory,(function(s){return[t("tr",{key:s.id},e._l(e.columns,(function(i){return t("td",{key:i.id,staticClass:"ellipsis"},[e._t(i.name,(function(){return["DATE"===i.type?[e._v(" "+e._s(e.$day.format(s[i.name])||"-")+" ")]:[e._v(" "+e._s(s[i.name]||"-")+" ")]]}),{value:s[i.name],item:s})],2)})),0)]}))],2)])])]):e._e()]:e._e()]}))],2)])])]},proxy:!0}],null,!0),model:{value:e.processHistoryModal,callback:function(t){e.processHistoryModal=t},expression:"processHistoryModal"}}),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v(" Archived At: "+e._s(e.$day.format(e.selectedFiles[0].createdAt))+" ")]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFiles[0].createdByEmail))]),e.selectedFiles[0].size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFiles[0].size))+" ")],1):e._e()],1)])])]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myAttachmentFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])])],1)},a=[],o=(s("14d9"),s("1b0d")),r=s("6a70"),n=s("0006"),l=s("fa1f"),c=s("381e"),d=s("dd90"),u=s("a7d2"),m=s("42fc"),h={name:"ProcessHistory",components:{Modal:r["a"],Stepper:n["a"],Sheet:c["a"],FileIcon:l["a"]},props:{processId:{type:Number,required:!0},selectedProcess:{type:Object,default:()=>{}},externalAccess:{type:Boolean,default:!1}},data(){return{historyTitle:"",processHistoryData:[],processHistoryModal:!1,columns:[{id:this.$nano.id(),name:"stage",label:"STAGE",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"actionUser",label:"ACTION USER",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"receivedOn",label:"RECEIVED ON",type:"DATE"},{id:this.$nano.id(),name:"processedBy",label:"PROCESSED BY",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"processedOn",label:"PROCESSED ON",type:"DATE"},{id:this.$nano.id(),name:"status",label:"STATUS",type:"SHORT_TEXT"}],stageLevel:[],currentStep:0,selectedFile:{},fileSheet:!1,selectedFiles:[]}},watch:{processId:{immediate:!0,handler(){this.processId&&this.showHistory(this.processId)}}},methods:{async showHistory(e){this.processHistoryModal=!0,this.processHistoryData=[],this.historyTitle=this.selectedProcess.requestNo,this.$store.commit("showLoadingBarSave");const{error:t,payload:s}=await o["t"].processHistory(this.selectedProcess.id,e);this.$store.commit("hideLoadingBarSave"),t?this.$alert.error(t):s.length&&(s.forEach(e=>{this.processHistoryData.push({...e,showComments:!1,showAttachments:!1,showSubWorkflowHistory:!1})}),this.stageLevel=[],this.currentStep=0,s.forEach(e=>{if(2!==e.actionStatus)if(0===this.stageLevel.filter(t=>t.id===e.activityId).length)this.stageLevel.push({id:e.activityId,label:e.stage,status:e.status}),((e.actionUser||e.subWorkflowHistory)&&e.status&&"Forward"!==e.status||null===e.actionUser&&!e.subWorkflowHistory)&&(this.currentStep+=1);else if(e.status)this.stageLevel.filter(t=>t.id===e.activityId&&t.status!==e.status).length?this.currentStep+=1:this.currentStep-=1;else{let t=this.stageLevel.findIndex(t=>t.id===e.activityId);t>-1&&(this.stageLevel.splice(t,this.stageLevel.length-t),this.stageLevel.push({id:e.activityId,label:e.stage,status:e.status}),e.actionUser&&e.status&&"Forward"!==e.status||null===e.actionUser?this.currentStep=t+1:this.currentStep=t)}}))},openFileByCmd(e){const t=e,{fileName:s,itemid:i,...a}=t;this.selectedFile={name:s,id:i,...a};const o=this.processHistoryData.map(e=>e.attachments).flat();this.selectedFiles=o.filter(e=>e.id==this.selectedFile.id&&e.name==this.selectedFile.name),this.openFile(this.selectedFile)},fileSize(e){return Object(u["a"])(e)},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let s=1;return"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(s=2),Object(d["d"])(t)?"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`:"https://trial.ezofis.com"===e?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`:"https://app.ezofis.com"===e?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`:"http://52.172.32.88"===e?`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`:`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${s}`}return Object(d["d"])(t)?"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:"https://trial.ezofis.com"!==e||Object(d["c"])(t)?"https://app.ezofis.com"===e?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:Object(d["b"])(t)||"http://52.172.32.88"!==e?`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`:`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`}},openFile(e){if(e.loading)this.$alert.info("Please wait to complete the uploading");else{this.selectedFile=e;let t=location.origin;"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?window.open(this.fileLink()):this.fileSheet=!0}},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},closeModal(){this.processHistoryModal=!1,this.$emit("close")},removeTags(e){return e?e.replace(/(<([^>]+)>)/gi,""):""},export_Data1(){let e=[];this.processHistoryData.forEach(t=>{e.push({Stage:t.stage,"Action User":t.actionUser,"Received On":this.$day.format(t.receivedOn),"Processed On":this.$day.format(t.processedOn),"Processed By":t.processedBy,Status:t.status})}),Object(m["a"])(e,this.historyTitle+" - Process History")},export_Data(){let e=[];this.processHistoryData.forEach(t=>{if(e.push({Stage:t.stage,"Action User":t.actionUser||"","Received On":this.$day.format(t.receivedOn)||"","Processed On":this.$day.format(t.processedOn)||"","Processed By":t.processedBy||"",Status:t.status||""}),t.comments&&t.comments.length){let s;e.push({Stage:`<span style="color: #00BCD4;font-weight: bold;">Comments(${t.comments.length})</span>`}),e.push({Stage:"<strong>Comments<strong>","Action User":"<strong>Commented By<strong>","Received On":"<strong>Commented On<strong>","Processed On":"<strong>Attached In<strong>"}),t.comments.forEach(t=>{t.embedFileList&&t.embedFileList.length&&t.embedFileList.forEach(e=>{s=e.fileName}),e.push({Stage:`<span style="color: #00BCD4;">${t.comments||""}</span>`,"Action User":`<span style="color: #00BCD4;">${t.createdByEmail||""}</span>`,"Received On":`<span style="color: #00BCD4;">${this.$day.format(t.createdAt)||""}</span>`,"Processed On":`<span style="color: #00BCD4;">${s||""}</span>`})})}t.attachments&&t.attachments.length&&(e.push({Stage:`<span style="color: #643094;font-weight: bold;">Attachment(${t.attachments.length})</span>`}),e.push({Stage:"<strong>File Name<strong>","Action User":"<strong>\tAttached By<strong>","Received On":"<strong>Attached On<strong>"}),t.attachments.forEach(t=>{e.push({Stage:`<span style="color: #643094; border: 12px solid#50067e;">${t.name||""}</span>`,"Action User":`<span style="color: #643094;">${t.createdByEmail||""}</span>`,"Received On":`<span style="color: #643094;">${this.$day.format(t.createdAt)||""}</span>`})})),t.subWorkflowHistory&&t.subWorkflowHistory.length&&(e.push({Stage:`<span style="color: #e97f06;font-weight: bold;">${t.subWorkflowHistory[0].requestNo}[Connector]<span>`}),e.push({Stage:"<strong>Stage</strong>","Action User":"<strong>Action User</strong>","Received On":"<strong>Received On</strong>","Processed On":"<strong>Processed On</strong>","Processed By":"<strong>Processed By</strong>",Status:"<strong>status</strong>"}),t.subWorkflowHistory.forEach(t=>{e.push({Stage:`<span style="color: #e97f06;">${t.stage}</span>`,"Action User":`<span style="color: #e97f06;border:2px solid black">${t.actionUser||""}</span>`,"Received On":`<span style="color: #e97f06;">${this.$day.format(t.receivedOn)||""}</span>`,"Processed On":`<span style="color: #e97f06;">${this.$day.format(t.processedOn)||""}</span>`,"Processed By":`<span style="color: #e97f06;">${t.processedBy||""}</span>`,Status:`<span style="color: #e97f06;">${t.status||""}</span>`})}))}),Object(m["a"])(e,this.historyTitle+" Report")}}},p=h,f=(s("bf55"),s("2877")),v=s("4e73"),y=s("93dc"),b=s.n(y),g=Object(f["a"])(p,i,a,!1,null,"2443da3d",null);t["a"]=g.exports;b()(g,"components",{QMenu:v["a"]})},8749:function(e,t,s){},"874f":function(e,t,s){"use strict";var i=s("7c4a"),a=s("0e40"),o=Object(i["a"])((function(e,t,s){return e+(s?" ":"")+Object(a["a"])(t)}));t["a"]=o},"87dc":function(e,t,s){"use strict";s("5f3d")},8829:function(e,t,s){"use strict";s("4714")},"888a":function(e,t,s){},8920:function(e,t,s){},"8b18":function(e,t,s){"use strict";s("28f7")},"8b55":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",e._g({class:{active:e.isActive,"is-full-width":e.isFullWidth},style:{color:e.isActive?e._color:""},attrs:{id:"tab"}},e.$listeners),[e._v(" "+e._s(e.label)+" ")])},a=[],o={name:"Tab",props:{label:{type:String,required:!0},isActive:{type:Boolean,default:!1},isFullWidth:{type:Boolean,default:!1},color:{type:String,default:"primary"}},computed:{_color(){return`var(--${this.color})`}}},r=o,n=(s("2ac6"),s("2877")),l=Object(n["a"])(r,i,a,!1,null,"f3c4783e",null);t["a"]=l.exports},"8dc1":function(e,t,s){},"8ddd":function(e,t,s){},"8fbb":function(e,t,s){},"91dd":function(e,t,s){},9290:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,width:e.width},on:{input:function(t){return e.$emit("input",!1)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("title")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-edit-outline"},on:{click:function(t){return e.$emit("edit")}}}),t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-trash-2-outline"},on:{click:function(t){return e.$emit("delete")}}})]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"item-details"}},[t("Tabs",{staticClass:"tabs",attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),"overview"===e.tab?t("ItemOverview",{attrs:{overview:e.overview},scopedSlots:e._u([e._l(e.overview,(function(t){return{key:t.name,fn:function(){return[e._t(t.name,null,{value:t.value})]},proxy:!0}}))],null,!0)}):e._e(),"history"===e.tab?t("ItemHistory",{attrs:{history:e.history}}):e._e()],1)]},proxy:!0}],null,!0)})},a=[],o=s("381e"),r=s("b94d"),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"item-overview"}},[t("table",[t("tbody",e._l(e.overview,(function(s){return t("tr",{key:s.id},[t("td",{staticClass:"label"},[e._v(e._s(s.label))]),t("td",{staticClass:"value"},[e._t(s.name,(function(){return["options"===s.name&&"MenuOptions"===s.label?[t("MenuOptionsDetails",{attrs:{options:s.value}})]:[e._v(" "+e._s(s.value||"-")+" ")]]}),{value:s.value})],2)])})),0)])])},l=[],c=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"menu-options"}},[t("div",{staticClass:"options-wrapper"},[t("div",{staticClass:"row q-col-gutter-md"},[e._l(e.options,(function(s){return[e._l(s,(function(s,i){return["Menu"!==i&&"dashboard"!==i?t("div",{key:i,staticClass:"option col-4 is-selected",attrs:{tabindex:0}},["Menu"!==i&&"dashboard"!==i?t("BaseIcon",{key:i,staticClass:"icon",attrs:{name:e.isSelected(s)?"eva-checkmark-outline":"eva-close-outline",color:e.isSelected(s)?"positive":"negative"}}):e._e(),t("div",["Menu"!==i?t("div",{staticClass:"label"},[e._v(" "+e._s(i)+" ")]):e._e()])],1):e._e()]})),e._l(s.Menu,(function(s,i){return t("div",{key:s[i],staticClass:"option1 col-12 is-selected",attrs:{tabindex:0}},[t("BaseIcon",{key:i,staticClass:"icon",attrs:{name:e.isSelected(s)?"eva-checkmark-outline":"eva-close-outline",color:e.isSelected(s)?"positive":"negative"}}),t("div",[t("div",{staticClass:"label"},[e._v(e._s(i))])])],1)}))]}))],2)])])},d=[],u={name:"MenuOptionsDetails",props:{options:{type:Array,default:()=>[]}},methods:{isSelected(e){return e}}},m=u,h=(s("3607"),s("2877")),p=Object(h["a"])(m,c,d,!1,null,"1160de11",null),f=p.exports,v={name:"ItemOverview",components:{MenuOptionsDetails:f},props:{overview:{type:Array,required:!0}}},y=v,b=(s("beae"),Object(h["a"])(y,n,l,!1,null,"785f64ce",null)),g=b.exports,w=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"history"}},[e.changes.length?e._l(e.changes,(function(s){return t("div",{key:s.id,staticClass:"entry"},[t("div",{staticClass:"header"},[e._v(" "+e._s(s.changes.length)+" "+e._s(s.changes.length>1?"Changes":"Change")+" ")]),t("div",{staticClass:"content"},[t("div",{staticClass:"changes-meta"},[t("div",[e._v(e._s(s.changedBy))]),t("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.changedAt))])],1),e._l(s.changes,(function(s,i){return t("div",{key:i+1,staticClass:"change"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),"isDeleted"===s.column?t("div",[Number(s.newValue)?t("span",{staticClass:"font-semibold"},[e._v(' "Deleted" ')]):t("span",{staticClass:"font-semibold"},[e._v('"Restored"')]),e._v(" the item ")]):s.oldValue?t("div",[e._v(" Modified "+e._s(s.column)+" from "),t("span",{staticClass:"font-semibold"},[e._v('"'+e._s(s.oldValue)+'"')]),e._v(" to "),t("span",{staticClass:"font-semibold"},[e._v('"'+e._s(s.newValue)+'"')])]):t("div",[e._v(" Assigned "),t("span",{staticClass:"font-semibold"},[e._v('"'+e._s(s.newValue)+'"')]),e._v(" as "+e._s(s.column)+" ")])],1)}))],2)])})):t("div",{staticClass:"no-history"},[e._v("No data found")])],2)},C=[],k={name:"ItemHistory",props:{history:{type:Array,required:!0}},data(){return{changes:[]}},watch:{history:{immediate:!0,deep:!0,handler(){this.changes=this.history.map(e=>({id:this.$nano.id(),changedBy:"admin@ezofis.com",changedAt:this.$day.format(e.key),changes:e.changes}))}}}},S=k,_=(s("52e1"),Object(h["a"])(S,w,C,!1,null,"262c778d",null)),I=_.exports,x={name:"ItemDetails",components:{Sheet:o["a"],Tabs:r["a"],ItemOverview:g,ItemHistory:I},props:{value:{type:Boolean,default:!1},overview:{type:Array,required:!0},history:{type:Array,required:!0},width:{type:String,default:"540px"}},data(){return{tab:"overview",tabs:[{id:this.$nano.id(),label:"overview",value:"overview"},{id:this.$nano.id(),label:"history",value:"history"}]}}},T=x,$=(s("99dc"),Object(h["a"])(T,i,a,!1,null,"08327a1e",null));t["a"]=$.exports},9404:function(e,t,s){"use strict";s("caad"),s("14d9");var i=s("a026"),a=s("58e5"),o=s("463c"),r=s("7ee0"),n=s("efe6"),l=s("b7fa"),c=s("75c3"),d=s("7937"),u=s("e277"),m=s("d54d"),h=s("f376");const p=150,f=["mouseover","mouseout","mouseenter","mouseleave"];t["a"]=i["default"].extend({name:"QDrawer",inject:{layout:{default(){console.error("QDrawer needs to be child of QLayout")}}},mixins:[l["a"],a["a"],o["a"],r["a"],n["a"]],directives:{TouchPan:c["a"]},props:{side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,contentStyle:[String,Object,Array],contentClass:[String,Object,Array],overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},data(){const e="mobile"===this.behavior||"desktop"!==this.behavior&&this.layout.totalWidth<=this.breakpoint;return{belowBreakpoint:e,showing:!0===this.showIfAbove&&!1===e||!0===this.value}},watch:{belowBreakpoint(e){!0===e?(this.lastDesktopState=this.showing,!0===this.showing&&this.hide(!1)):!1===this.overlay&&"mobile"!==this.behavior&&!1!==this.lastDesktopState&&(!0===this.showing?(this.__applyPosition(0),this.__applyBackdrop(0),this.__cleanup()):this.show(!1))},"layout.totalWidth"(){!0!==this.layout.container&&!0===document.qScrollPrevented||this.__updateBelowBreakpoint()},side(e,t){this.layout.instances[t]===this&&(this.layout.instances[t]=void 0,this.layout[t].space=!1,this.layout[t].offset=0),this.layout.instances[e]=this,this.layout[e].size=this.size,this.layout[e].space=this.onLayout,this.layout[e].offset=this.offset},behavior(){this.__updateBelowBreakpoint()},breakpoint(){this.__updateBelowBreakpoint()},"layout.container"(e){!0===this.showing&&this.__preventScroll(!0!==e),!0===e&&this.__updateBelowBreakpoint()},"layout.scrollbarWidth"(){this.__applyPosition(!0===this.showing?0:void 0)},offset(e){this.__update("offset",e)},onLayout(e){this.$emit("on-layout",e),this.__update("space",e)},rightSide(){this.__applyPosition()},size(e){this.__applyPosition(),this.__updateSizeOnLayout(this.miniToOverlay,e)},miniToOverlay(e){this.__updateSizeOnLayout(e,this.size)},"$q.lang.rtl"(){this.__applyPosition()},mini(){!0===this.value&&(this.__animateMini(),this.layout.__animate())},isMini(e){this.$emit("mini-state",e)}},computed:{rightSide(){return"right"===this.side},otherSide(){return!0===this.rightSide?"left":"right"},offset(){return!0===this.showing&&!1===this.belowBreakpoint&&!1===this.overlay?!0===this.miniToOverlay?this.miniWidth:this.size:0},size(){return!0===this.isMini?this.miniWidth:this.width},fixed(){return!0===this.overlay||!0===this.miniToOverlay||this.layout.view.indexOf(this.rightSide?"R":"L")>-1||this.$q.platform.is.ios&&!0===this.layout.container},onLayout(){return!0===this.showing&&!1===this.belowBreakpoint&&!1===this.overlay},onScreenOverlay(){return!0===this.showing&&!1===this.belowBreakpoint&&!0===this.overlay},backdropClass(){return!1===this.showing?"hidden":null},headerSlot(){return!0===this.rightSide?"r"===this.layout.rows.top[2]:"l"===this.layout.rows.top[0]},footerSlot(){return!0===this.rightSide?"r"===this.layout.rows.bottom[2]:"l"===this.layout.rows.bottom[0]},aboveStyle(){const e={};return!0===this.layout.header.space&&!1===this.headerSlot&&(!0===this.fixed?e.top=this.layout.header.offset+"px":!0===this.layout.header.space&&(e.top=this.layout.header.size+"px")),!0===this.layout.footer.space&&!1===this.footerSlot&&(!0===this.fixed?e.bottom=this.layout.footer.offset+"px":!0===this.layout.footer.space&&(e.bottom=this.layout.footer.size+"px")),e},style(){const e={width:this.size+"px"};return!0===this.belowBreakpoint?e:Object.assign(e,this.aboveStyle)},classes(){return"q-drawer--"+this.side+(!0===this.bordered?" q-drawer--bordered":"")+(!0===this.isDark?" q-drawer--dark q-dark":"")+(!0!==this.showing?" q-layout--prevent-focus":"")+(!0===this.belowBreakpoint?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":" q-drawer--"+(!0===this.isMini?"mini":"standard")+(!0===this.fixed||!0!==this.onLayout?" fixed":"")+(!0===this.overlay||!0===this.miniToOverlay?" q-drawer--on-top":"")+(!0===this.headerSlot?" q-drawer--top-padding":""))},stateDirection(){return(!0===this.$q.lang.rtl?-1:1)*(!0===this.rightSide?1:-1)},isMini(){return!0===this.mini&&!0!==this.belowBreakpoint},onNativeEvents(){if(!0!==this.belowBreakpoint){const e={"!click":e=>{this.$emit("click",e)}};return f.forEach(t=>{e[t]=e=>{void 0!==this.qListeners[t]&&this.$emit(t,e)}}),e}},hideOnRouteChange(){return!0!==this.persistent&&(!0===this.belowBreakpoint||!0===this.onScreenOverlay)},openDirective(){const e=!0===this.$q.lang.rtl?this.side:this.otherSide;return[{name:"touch-pan",value:this.__openByTouch,modifiers:{[e]:!0,mouse:!0}}]},contentCloseDirective(){if(!0!==this.noSwipeClose){const e=!0===this.$q.lang.rtl?this.otherSide:this.side;return[{name:"touch-pan",value:this.__closeByTouch,modifiers:{[e]:!0,mouse:!0}}]}},backdropCloseDirective(){if(!0!==this.noSwipeBackdrop){const e=!0===this.$q.lang.rtl?this.otherSide:this.side;return[{name:"touch-pan",value:this.__closeByTouch,modifiers:{[e]:!0,mouse:!0,mouseAllDir:!0}}]}}},methods:{__applyPosition(e){void 0===e?this.$nextTick(()=>{e=!0===this.showing?0:this.size,this.__applyPosition(this.stateDirection*e)}):void 0!==this.$refs.content&&(!0!==this.layout.container||!0!==this.rightSide||!0!==this.belowBreakpoint&&Math.abs(e)!==this.size||(e+=this.stateDirection*this.layout.scrollbarWidth),this.__lastPosition!==e&&(this.$refs.content.style.transform=`translateX(${e}px)`,this.__lastPosition=e))},__applyBackdrop(e,t){void 0!==this.$refs.backdrop?this.$refs.backdrop.style.backgroundColor=this.lastBackdropBg=`rgba(0,0,0,${.4*e})`:!0!==t&&this.$nextTick(()=>{this.__applyBackdrop(e,!0)})},__setBackdropVisible(e){void 0!==this.$refs.backdrop&&this.$refs.backdrop.classList[!0===e?"remove":"add"]("hidden")},__setScrollable(e){const t=!0===e?"remove":!0!==this.layout.container?"add":"";""!==t&&document.body.classList[t]("q-body--drawer-toggle")},__animateMini(){void 0!==this.timerMini?clearTimeout(this.timerMini):void 0!==this.$el&&this.$el.classList.add("q-drawer--mini-animate"),this.timerMini=setTimeout(()=>{void 0!==this.$el&&this.$el.classList.remove("q-drawer--mini-animate"),this.timerMini=void 0},150)},__openByTouch(e){if(!1!==this.showing)return;const t=this.size,s=Object(d["a"])(e.distance.x,0,t);if(!0===e.isFinal){const e=this.$refs.content,i=s>=Math.min(75,t);return e.classList.remove("no-transition"),void(!0===i?this.show():(this.layout.__animate(),this.__applyBackdrop(0),this.__applyPosition(this.stateDirection*t),e.classList.remove("q-drawer--delimiter"),e.classList.add("q-layout--prevent-focus"),this.__setBackdropVisible(!1)))}if(this.__applyPosition((!0===this.$q.lang.rtl?!0!==this.rightSide:this.rightSide)?Math.max(t-s,0):Math.min(0,s-t)),this.__applyBackdrop(Object(d["a"])(s/t,0,1)),!0===e.isFirst){const e=this.$refs.content;e.classList.add("no-transition"),e.classList.add("q-drawer--delimiter"),e.classList.remove("q-layout--prevent-focus"),this.__setBackdropVisible(!0)}},__closeByTouch(e){if(!0!==this.showing)return;const t=this.size,s=e.direction===this.side,i=(!0===this.$q.lang.rtl?!0!==s:s)?Object(d["a"])(e.distance.x,0,t):0;if(!0===e.isFinal){const e=Math.abs(i)<Math.min(75,t);return this.$refs.content.classList.remove("no-transition"),void(!0===e?(this.layout.__animate(),this.__applyBackdrop(1),this.__applyPosition(0)):this.hide())}this.__applyPosition(this.stateDirection*i),this.__applyBackdrop(Object(d["a"])(1-i/t,0,1)),!0===e.isFirst&&this.$refs.content.classList.add("no-transition")},__show(e,t){if(this.__addHistory(),this.__setBackdropVisible(!0),!1!==e&&this.layout.__animate(),this.__applyPosition(0),!0===this.belowBreakpoint){const e=this.layout.instances[this.otherSide];void 0!==e&&!0===e.belowBreakpoint&&e.hide(!1),this.__applyBackdrop(1),!0!==this.layout.container&&this.__preventScroll(!0)}else this.__applyBackdrop(0),!1!==e&&this.__setScrollable(!1);this.__registerTimeout(()=>{!1!==e&&this.__setScrollable(!0),!0!==t&&this.$emit("show",e)},p)},__hide(e,t){this.__removeHistory(),!1!==e&&this.layout.__animate(),this.__applyBackdrop(0),this.__applyPosition(this.stateDirection*this.size),this.__setBackdropVisible(!1),this.__cleanup(),!0!==t?this.__registerTimeout(()=>{this.$emit("hide",e)},p):this.__removeTimeout()},__cleanup(){this.__preventScroll(!1),this.__setScrollable(!0)},__update(e,t){this.layout[this.side][e]!==t&&(this.layout[this.side][e]=t)},__updateLocal(e,t){this[e]!==t&&(this[e]=t)},__updateSizeOnLayout(e,t){this.__update("size",!0===e?this.miniWidth:t)},__updateBelowBreakpoint(){this.__updateLocal("belowBreakpoint","mobile"===this.behavior||"desktop"!==this.behavior&&this.layout.totalWidth<=this.breakpoint)}},created(){this.__useTimeout("__registerTimeout","__removeTimeout"),this.layout.instances[this.side]=this,this.__updateSizeOnLayout(this.miniToOverlay,this.size),this.__update("space",this.onLayout),this.__update("offset",this.offset),!0===this.showIfAbove&&!0!==this.value&&!0===this.showing&&void 0!==this.qListeners.input&&this.$emit("input",!0)},mounted(){this.$emit("on-layout",this.onLayout),this.$emit("mini-state",this.isMini),this.lastDesktopState=!0===this.showIfAbove;const e=()=>{const e=!0===this.showing?"show":"hide";this["__"+e](!1,!0)};0===this.layout.totalWidth?this.watcher=this.$watch("layout.totalWidth",()=>{this.watcher(),this.watcher=void 0,!1===this.showing&&!0===this.showIfAbove&&!1===this.belowBreakpoint?this.show(!1):e()}):this.$nextTick(e)},beforeDestroy(){void 0!==this.watcher&&this.watcher(),clearTimeout(this.timerMini),!0===this.showing&&this.__cleanup(),this.layout.instances[this.side]===this&&(this.layout.instances[this.side]=void 0,this.__update("size",0),this.__update("offset",0),this.__update("space",!1))},render(e){const t=[];!0===this.belowBreakpoint&&(!0!==this.noSwipeOpen&&t.push(e("div",{staticClass:"q-drawer__opener fixed-"+this.side,attrs:h["a"],directives:this.openDirective})),t.push(e("div",{ref:"backdrop",staticClass:"fullscreen q-drawer__backdrop",class:this.backdropClass,attrs:h["a"],style:void 0!==this.lastBackdropBg?{backgroundColor:this.lastBackdropBg}:null,on:Object(m["b"])(this,"bkdrop",{click:this.hide}),directives:!1===this.showing?void 0:this.backdropCloseDirective})));const s=[e("div",{staticClass:"q-drawer__content fit "+(!0===this.layout.container?"overflow-auto":"scroll"),class:this.contentClass,style:this.contentStyle},!0===this.isMini&&void 0!==this.$scopedSlots.mini?this.$scopedSlots.mini():Object(u["c"])(this,"default"))];return!0===this.elevated&&!0===this.showing&&s.push(e("div",{staticClass:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(e("aside",{ref:"content",staticClass:"q-drawer",class:this.classes,style:this.style,on:this.onNativeEvents,directives:!0===this.belowBreakpoint?this.contentCloseDirective:void 0},s)),e("div",{staticClass:"q-drawer-container"},t)}})},9495:function(e,t,s){"use strict";s("888a")},"94f5":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",e._g({attrs:{id:"action"}},e.$listeners),[t("BaseIcon",{attrs:{name:e.icon,"inherit-color":""}}),t("div",{staticClass:"label"},[e._v(e._s(e.label))])],1)},a=[],o={name:"Action",props:{icon:{type:String,required:!0},label:{type:String,default:""}}},r=o,n=(s("a116"),s("2877")),l=Object(n["a"])(r,i,a,!1,null,"1619714d",null);t["a"]=l.exports},"956a":function(e,t,s){"use strict";s("5f17")},"970a":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));const i={CONTAINS:"CONTAINS",IS_EQUALS_TO:"IS_EQUALS_TO (=)",IS_NOT_EQUALS_TO:"IS_NOT_EQUALS_TO (!=)",IS_GREATER_THAN:"IS_GREATER_THAN (>)",IS_GREATER_THAN_OR_EQUALS_TO:"IS_GREATER_THAN_OR_EQUALS_TO (>=)",IS_LESSER_THAN:"IS_LESSER_THAN (<)",IS_LESSER_THAN_OR_EQUALS_TO:"IS_LESSER_THAN_OR_EQUALS_TO (<=)",IS_EMPTY:"IS_EMPTY ({})",IS_NOT_EMPTY:"IS_NOT_EMPTY (!{})",IS_ANY_OF:"IS_ANY_OF",IS_NOT_ANY_OF:"IS_NOT_ANY_OF",NOT_CONTAINS:"NOT_CONTAINS",STARTS_WITH:"STARTS_WITH",NOT_STARTS_WITH:"NOT_STARTS_WITH",ENDS_WITH:"ENDS_WITH",NOT_ENDS_WITH:"NOT_ENDS_WITH"};Object.freeze(i);var a=i,o=s("381b");function r(e){switch(e){case o["a"].NUMBER:case o["a"].DATE:case o["a"].TIME:case o["a"].DATE_TIME:case o["a"].COUNTER:case o["a"].CALCULATED:return[a.IS_EQUALS_TO,a.IS_NOT_EQUALS_TO,a.IS_GREATER_THAN,a.IS_GREATER_THAN_OR_EQUALS_TO,a.IS_LESSER_THAN,a.IS_LESSER_THAN_OR_EQUALS_TO,a.IS_EMPTY,a.IS_NOT_EMPTY,a.IS_ANY_OF,a.IS_NOT_ANY_OF,a.STARTS_WITH,a.NOT_STARTS_WITH,a.ENDS_WITH,a.NOT_ENDS_WITH];case o["a"].SHORT_TEXT:case o["a"].LONG_TEXT:case o["a"].TABLE:return[a.CONTAINS,a.IS_EQUALS_TO,a.IS_NOT_EQUALS_TO,a.IS_EMPTY,a.IS_NOT_EMPTY,a.IS_ANY_OF,a.IS_NOT_ANY_OF,a.NOT_CONTAINS,a.STARTS_WITH,a.NOT_STARTS_WITH,a.ENDS_WITH,a.NOT_ENDS_WITH];case o["a"].SINGLE_SELECT:case o["a"].MULTI_SELECT:case o["a"].MULTIPLE_CHOICE:return[a.CONTAINS,a.IS_EMPTY,a.IS_NOT_EMPTY,a.IS_EQUALS_TO,a.IS_NOT_EQUALS_TO,a.IS_ANY_OF,a.IS_NOT_ANY_OF];default:return[a.IS_EMPTY,a.IS_NOT_EMPTY,a.IS_EQUALS_TO,a.IS_NOT_EQUALS_TO]}}},"972e":function(e,t,s){e.exports=s.p+"img/workspace-light.cfe4603d.png"},9935:function(e,t,s){},"99dc":function(e,t,s){"use strict";s("cc92")},"9a8d":function(e,t,s){},"9bc4":function(e,t,s){"use strict";var i=s("b703"),a=s("09f4"),o=s("1549"),r=s("2250"),n=s("f842"),l=s("e8b2");function c(e){return Object(l["a"])(e)?void 0:e}var d=c,u=s("b4f1"),m=s("ca54"),h=s("f5fe"),p=s("ff51"),f=m["a"]?m["a"].isConcatSpreadable:void 0;function v(e){return Object(p["a"])(e)||Object(h["a"])(e)||!!(f&&e&&e[f])}var y=v;function b(e,t,s,i,a){var o=-1,r=e.length;s||(s=y),a||(a=[]);while(++o<r){var n=e[o];t>0&&s(n)?t>1?b(n,t-1,s,i,a):Object(u["a"])(a,n):i||(a[a.length]=n)}return a}var g=b;function w(e){var t=null==e?0:e.length;return t?g(e,1):[]}var C=w,k=s("500e"),S=s("c619");function _(e){return Object(S["a"])(Object(k["a"])(e,void 0,C),e+"")}var I=_,x=s("4e71"),T=1,$=2,A=4,F=I((function(e,t){var s={};if(null==e)return s;var l=!1;t=Object(i["a"])(t,(function(t){return t=Object(r["a"])(t,e),l||(l=t.length>1),t})),Object(n["a"])(e,Object(x["a"])(e),s),l&&(s=Object(a["a"])(s,T|$|A,d));var c=t.length;while(c--)Object(o["a"])(s,t[c]);return s}));t["a"]=F},"9db8":function(e,t,s){},"9ef6":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"file-list"}},[t("div",{staticClass:"header",class:{"has-selected-files":e.hasSelectedFiles},on:{click:e.toggleContent}},[t("div",{staticClass:"label name-and-files"},[e._t("label"),t("span",{staticClass:"q-ml-xs"},[e._v("("+e._s(e.numberOfFiles)+")")])],2),t("q-space"),e.showAutoLoad?t("div",{staticClass:"auto-reload"},[e.isContentMaximized?t("p",{staticClass:"q-ml-sm text-gray ellipsis",staticStyle:{"font-size":"10px","margin-top":"15px"}},[e._v(" auto-refresh every 15 seconds ")]):e._e(),e.isContentMaximized?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.refreshClicked()}}}):e._e()],1):e._e(),e.isContentMaximized?e._t("actions-maximized"):e._t("actions-minimized"),t("BaseIcon",{staticClass:"icon",class:{"rotate-180":e.isContentMaximized},attrs:{name:"mdi-menu-down","inherit-color":""}})],2),t("q-expansion-item",{attrs:{value:e.isContentMaximized,"header-style":e._styles}},[e.hasFiles?t("div",{staticClass:"q-pb-sm"},[e._t("default")],2):t("div",{staticClass:"no-files"},[e._v("No files found")])])],1)},a=[],o={name:"FileList",props:{hasFiles:{type:Boolean,default:!1},hasSelectedFiles:{type:Boolean,default:!1},numberOfFiles:{type:Number,default:0},showAutoLoad:{type:Boolean,default:!1}},data(){return{reloadClicked:!1,isContentMaximized:this.hasFiles}},computed:{_styles(){return{minHeight:"0px",height:"0px",padding:"0px",overflow:"hidden"}}},watch:{hasFiles(e){this.isContentMaximized=e}},mounted(){this.startAutoRefresh()},beforeDestroy(){this.stopAutoRefresh()},methods:{toggleContent(){this.reloadClicked?this.reloadClicked=!1:this.isContentMaximized=!this.isContentMaximized},showContent(){this.isContentMaximized=this.hasFiles},refreshClicked(){this.reloadClicked=!0,this.getdata()},getdata(){this.isContentMaximized&&this.$emit("getFiles")},startAutoRefresh(){this.autoRefreshInterval=setInterval(()=>{this.getdata()},15e3)},stopAutoRefresh(){this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=null)}}},r=o,n=(s("5e5c"),s("2877")),l=s("2c91"),c=s("3b73"),d=s("93dc"),u=s.n(d),m=Object(n["a"])(r,i,a,!1,null,"d1f2acf4",null);t["a"]=m.exports;u()(m,"components",{QSpace:l["a"],QExpansionItem:c["a"]})},a116:function(e,t,s){"use strict";s("f6de")},a4c9:function(e,t,s){"use strict";s("91dd")},a589:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{style:{width:e.formWidth},attrs:{id:"custom-form-view"}},[t("div",{staticClass:"header"},[t("div",{staticClass:"col-auto logo"},[t("img",{attrs:{src:e._logo}})]),e._m(0)]),t("div",{staticClass:"content"},[t("FormFieldLabel",{attrs:{label:"Claimant Search"}}),t("div",{staticClass:"content-wrapper"},[e.$q.screen.width>1280?t("div",{staticClass:"row q-mb-md"},[t("MultiSelectField",{staticClass:"col",attrs:{label:"lender",options:e.lenderList},model:{value:e.lender,callback:function(t){e.lender=t},expression:"lender"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"first name"},on:{enter:e.getData},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"last name"},on:{enter:e.getData},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),t("DateField",{staticClass:"col q-ml-md",attrs:{label:"DOB"},on:{enter:e.getData},model:{value:e.dob,callback:function(t){e.dob=t},expression:"dob"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"province"},on:{enter:e.getData},model:{value:e.province,callback:function(t){e.province=t},expression:"province"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"claim number"},on:{enter:e.getData},model:{value:e.claimNumber,callback:function(t){e.claimNumber=t},expression:"claimNumber"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"contract number"},on:{enter:e.getData},model:{value:e.contractNumber,callback:function(t){e.contractNumber=t},expression:"contractNumber"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"Ref. number"},on:{enter:e.getData},model:{value:e.refNumber,callback:function(t){e.refNumber=t},expression:"refNumber"}}),t("BaseButton",{staticClass:"searchBtn col-auto q-ml-md",attrs:{label:"Search",icon:"eva-search-outline"},on:{click:e.getData}})],1):t("div",[t("div",{staticClass:"row q-mb-md"},[t("MultiSelectField",{staticClass:"col",attrs:{label:"lender",options:e.lenderList},model:{value:e.lender,callback:function(t){e.lender=t},expression:"lender"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"first name"},on:{enter:e.getData},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"last name"},on:{enter:e.getData},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),t("DateField",{staticClass:"col q-ml-md",attrs:{label:"DOB"},on:{enter:e.getData},model:{value:e.dob,callback:function(t){e.dob=t},expression:"dob"}})],1),t("div",{staticClass:"row q-mb-md"},[t("TextField",{staticClass:"col",attrs:{label:"province"},on:{enter:e.getData},model:{value:e.province,callback:function(t){e.province=t},expression:"province"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"claim number"},on:{enter:e.getData},model:{value:e.claimNumber,callback:function(t){e.claimNumber=t},expression:"claimNumber"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"contract number"},on:{enter:e.getData},model:{value:e.contractNumber,callback:function(t){e.contractNumber=t},expression:"contractNumber"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"Ref. number"},on:{enter:e.getData},model:{value:e.refNumber,callback:function(t){e.refNumber=t},expression:"refNumber"}}),t("BaseButton",{staticClass:"searchBtn col-auto q-ml-md",attrs:{label:"Search",icon:"eva-search-outline"},on:{click:e.getData}})],1)])]),t("div",{staticClass:"row q-mb-xs"},[t("div",{staticClass:"col q-mt-sm"},[t("FormFieldLabel",{attrs:{label:"Search Results"}})],1),t("q-space"),t("div",{staticClass:"col-auto"},[t("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:e.searchRow}})],1),t("div",{staticClass:"col-auto"},[t("BaseButton",{attrs:{label:"Add Contract and Send Package",icon:"eva-plus-outline",color:"gray"},on:{click:function(t){e.addContractSheet=!0}}})],1)],1),t("div",{staticClass:"content-wrapper tables"},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 360px)"}},[t("div",{staticClass:"row"},[t("FormFieldLabel",{attrs:{label:e.contractCount}}),t("BaseActionButton",{staticClass:"q-ml-sm small",attrs:{icon:e.contractExpand?"mdi-chevron-down":"mdi-chevron-up","is-flat":"","no-border":""},on:{click:function(t){e.contractExpand=!e.contractExpand}}})],1),e.contractExpand?t("table",[t("thead",[t("tr",[t("th",{staticClass:"sticky",staticStyle:{left:"0",width:"15px"}}),e._l(e.contractColumnsFilter,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),t("th",{staticClass:"sticky"})],2)]),t("tbody",[e._l(e.tableContracts,(function(s){return[t("tr",{key:s.id},[t("td",{staticClass:"sticky",staticStyle:{left:"0",width:"15px"}},[t("div",{staticClass:"row items-center justify-center"},[t("BaseButton",{attrs:{label:"Expand",icon:s.infoVisible?"eva-eye-off":"eva-eye",color:"secondary","is-flat":"","no-border":""},on:{click:function(e){s.infoVisible=!s.infoVisible}}})],1)]),e._l(e.contractColumnsFilter,(function(i){return t("td",{key:i.id},[i.editable?["email"===i.valueType?[t("ValidationProvider",{attrs:{name:i.name,rules:{required:i.required,email:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("TextField",{attrs:{"is-mandatory":"",error:a[0]},model:{value:s[i.name],callback:function(t){e.$set(s,i.name,t)},expression:"item[column.name]"}})]}}],null,!0)})]:"lender"===i.name?[t("ValidationProvider",{attrs:{name:i.name,rules:{required:i.required}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("SelectField",{attrs:{"is-mandatory":"",options:e.lenderList,error:a[0]},model:{value:s[i.name],callback:function(t){e.$set(s,i.name,t)},expression:"item[column.name]"}})]}}],null,!0)})]:[t("TextField",{attrs:{"is-mandatory":""},model:{value:s[i.name],callback:function(t){e.$set(s,i.name,t)},expression:"item[column.name]"}})]]:[e._t(i.name,(function(){return[e._v(" "+e._s(s[i.name])+" ")]}),{value:s[i.name],item:s})]],2)})),t("td",{staticClass:"sticky"},[t("div",{staticClass:"row justify-center"},[t("BaseButton",{staticClass:"col-auto q-ml-md",attrs:{label:"Send Package",icon:"mdi-file-send-outline",color:"secondary"},on:{click:function(t){return e.getProduct(s.id)}}})],1)])],2),s.infoVisible?t("tr",{key:"sub-"+s.id},[t("td",{attrs:{colspan:e.contractColumnsFilter.length+2}},[t("table",{staticClass:"subDetails"},[t("thead",e._l(e.contractColumnsInfo,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0),t("tbody",e._l(e.contractColumnsInfo,(function(i){return t("td",{key:i.id},[e._t(i.name,(function(){return[e._v(" "+e._s(s[i.name])+" ")]}),{value:s[i.name],item:s})],2)})),0)])])]):e._e()]}))],2)]):e._e(),t("div",{staticClass:"row"},[t("FormFieldLabel",{attrs:{label:e.claimCount}}),t("BaseActionButton",{staticClass:"q-ml-sm small",attrs:{icon:e.claimExpand?"mdi-chevron-down":"mdi-chevron-up","is-flat":"","no-border":""},on:{click:function(t){e.claimExpand=!e.claimExpand}}})],1),e.claimExpand?t("table",[t("thead",[t("tr",[t("th",{staticClass:"sticky",staticStyle:{left:"0",width:"15px"}}),e._l(e.claimColumnsFilter,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),t("th",{staticClass:"sticky"})],2)]),t("tbody",[e._l(e.tableClaims,(function(s){return[t("tr",{key:s.id},[t("td",{staticClass:"sticky",staticStyle:{left:"0",width:"15px"}},[t("div",{staticClass:"row items-center justify-center"},[t("BaseButton",{attrs:{label:"Expand",icon:s.infoVisible?"eva-eye-off":"eva-eye",color:"secondary","is-flat":"","no-border":""},on:{click:function(e){s.infoVisible=!s.infoVisible}}})],1)]),e._l(e.claimColumnsFilter,(function(i){return t("td",{key:i.id},["history"===i.name?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Claim History",expression:"'Claim History'",modifiers:{bottom:!0}}],attrs:{icon:"mdi-history",color:"secondary","is-flat":"","no-border":""},on:{click:function(t){return e.claimHistory(s)}}})]:i.editable?["email"===i.valueType?[t("ValidationProvider",{attrs:{name:i.name,rules:{required:i.required,email:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("TextField",{attrs:{"is-mandatory":"",error:a[0]},model:{value:s[i.name],callback:function(t){e.$set(s,i.name,t)},expression:"item[column.name]"}})]}}],null,!0)})]:[t("TextField",{attrs:{"is-mandatory":""},model:{value:s[i.name],callback:function(t){e.$set(s,i.name,t)},expression:"item[column.name]"}})]]:[e._t(i.name,(function(){return[e._v(" "+e._s(s[i.name])+" ")]}),{value:s[i.name],item:s})]],2)})),t("td",{staticClass:"sticky"},[t("div",{staticClass:"row justify-center q-mt-sm"},[e.claimStatus(s)?[t("div",{on:{click:function(t){return e.reopenClaim(s.id)}}},[t("q-chip",{staticClass:"chips pink-hover",attrs:{outline:"",color:"pink"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"mdi-arrow-top-right",color:"pink","text-color":"white"}}),e._v(" Re-open ")],1)],1)]:e._e(),t("div",{on:{click:function(t){return e.viewClaim(s.id)}}},[t("q-chip",{staticClass:"chips orange-hover",attrs:{outline:"",color:"orange"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-eye-outline",color:"orange","text-color":"white"}}),e._v(" View Claim ")],1)],1)],2)])],2),s.infoVisible?t("tr",{key:"sub-"+s.id},[t("td",{attrs:{colspan:e.claimColumnsFilter.length+2}},[t("table",{staticClass:"subDetails"},[t("thead",e._l(e.claimColumnsInfo,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0),t("tbody",e._l(e.claimColumnsInfo,(function(i){return t("td",{key:i.id},[e._t(i.name,(function(){return[e._v(" "+e._s(s[i.name])+" ")]}),{value:s[i.name],item:s})],2)})),0)])])]):e._e()]}))],2)]):e._e()])],1)],1),t("AddContract",{attrs:{value:e.addContractSheet,"lender-list":e.lenderList},on:{initiate:e.processInitiate,close:function(t){e.addContractSheet=!1}}}),t("Modal",{attrs:{width:"40vw",height:"60vh","has-footer":""},on:{input:function(t){e.productModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Choose Product")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"productModal"}},[t("MultiSelectField",{staticClass:"field",attrs:{label:"product","is-mandatory":"",options:e.productList},model:{value:e.products,callback:function(t){e.products=t},expression:"products"}})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Send Package",color:"primary"},on:{click:function(t){return e.processInitiate("")}}})]},proxy:!0}]),model:{value:e.productModal,callback:function(t){e.productModal=t},expression:"productModal"}}),t("Modal",{attrs:{width:"70vw"},on:{input:function(t){e.claimHistoryModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Claim History")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"claimHistory"}},[t("table",[t("thead",[t("tr",e._l(e.historyColumns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0)]),t("tbody",e._l(e.claimHistoryData,(function(s){return t("tr",{key:s.id},e._l(e.historyColumns,(function(i){return t("td",{key:i.id},[e._t(i.name,(function(){return[e._v(" "+e._s(s[i.name]||"-")+" ")]}),{value:s[i.name],item:s})],2)})),0)})),0)])])]},proxy:!0}],null,!0),model:{value:e.claimHistoryModal,callback:function(t){e.claimHistoryModal=t},expression:"claimHistoryModal"}}),t("Sheet",{attrs:{width:"100vw","no-padding":"","has-footer":""},on:{input:function(t){e.processSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.headerTitle)+" ")]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"footer row"},[t("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Update Claim Details",color:"secondary"},on:{click:function(t){return e.updateClaimDetails()}}})],1)]},proxy:!0}]),model:{value:e.processSheet,callback:function(t){e.processSheet=t},expression:"processSheet"}},[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t("div",{staticClass:"col"},[t("CustomProcessForm",{attrs:{"form-id":e.formId,panels:e.panels,"secondary-panels":e.secondaryPanels,"selected-process":e.selectedProcess,"is-readonly":!1,"check-list":e.checkList,"form-model":e.formModel,"form-fields":e.formFields,inbox:!0},on:{"update:checkList":function(t){e.checkList=t},"update:check-list":function(t){e.checkList=t}}})],1),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(s){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()])]}))],2)])]),t("Sheet",{attrs:{width:"30vw","sub-actions":!1,"no-padding":""},on:{input:function(t){e.attachmentSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getAttachments()}}}):e._e()]},proxy:!0}]),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",[e._l(e.checkList,(function(s){return[s.name?[s.attach?t("div",{key:s.uid},[e._l(e.attachmentFilterCheckList(s.name),(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})]],2):t("div",[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e()],2),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])])]}))],2):t("div",{key:s.uid,staticClass:"checkList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),t("div",{staticClass:"col q-ml-sm"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[e._v(" "+e._s(s.name)+" ")]),s.required?t("div",{staticClass:"col-12 q-mt-sm"},[t("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[e._v(" Required ")])],1):e._e()])])])])]:e._e()]})),e._l(e.attachmentList,(function(s){return[e.isCheckList(s.name)?[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e(),e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})],1):e._e(),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)],2),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])])]:e._e()]}))],2)],1)]),t("Sheet",{attrs:{width:"30vw",height:"80vh","no-padding":""},on:{input:function(t){e.commentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getComments(0)}}})]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 160px)"}},[e._l(e.commentsList,(function(s,i){return[t("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===e.$store.state.session.id?"me":s.createdByEmail||s.externalCommentsby,text:[s.comments],"text-html":"",sent:s.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(s),"bg-color":s.createdBy===e.$store.state.session.id?"primary-1":"secondary-1"},scopedSlots:e._u([{key:"avatar",fn:function(){return[s.embedFileList&&s.embedFileList.length?t("div",{staticClass:"file-icons"},[t("FileIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.embedFileList[0].fileName,expression:"row.embedFileList[0].fileName",modifiers:{top:!0}}],key:"Icon-"+i,staticClass:"file-icon q-mr-sm",attrs:{"mime-type":e.fileType(s.embedFileList[0].fileName)}})],1):e._e()]},proxy:!0}],null,!0)})]}))],2)],1),t("div",{staticClass:"col borderTop"},[t("div",{staticClass:"row q-ma-sm"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto","margin-right":"8px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm comment-actions",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm comment-actions",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])])]),t("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(t){e.mailTransactionSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Mail Transactions ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getMailTransactions()}}})]},proxy:!0}]),model:{value:e.mailTransactionSheet,callback:function(t){e.mailTransactionSheet=t},expression:"mailTransactionSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("div",{staticClass:"q-pl-sm"},[t("Tabs",{attrs:{tabs:e.mailTabs},model:{value:e.mailTab,callback:function(t){e.mailTab=t},expression:"mailTab"}})],1),"OUTGOING"===e.mailTab?[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[e._l(e.outgoingMails,(function(s){return[t("div",{key:"outgoing"+s.id,staticClass:"mailTransactionList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(s.subject)+" ")])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),t("div",{staticClass:"col-auto"},[e._v(e._s(s.email))])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(e.$day.format(s.createdAt,!0))+" ")])])]),t("div",{staticClass:"col-auto q-mr-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.showMailAttachments(s)}}},[s.attachmentCount?t("span",{staticClass:"badge"},[e._v(e._s(s.attachmentCount)+" ")]):e._e()])],1)])])]}))],2)]:e._e(),"INCOMING"===e.mailTab?[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[e._l(e.incomingMails,(function(s){return[t("div",{key:"incoming"+s.id,staticClass:"mailTransactionList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(s.subject)+" ")])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),t("div",{staticClass:"col-auto"},[e._v(e._s(s.email))])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(e.$day.format(s.createdAt,!0))+" ")])])]),t("div",{staticClass:"col-auto q-mr-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.showMailAttachments(s)}}},[s.attachmentCount?t("span",{staticClass:"badge"},[e._v(e._s(s.attachmentCount)+" ")]):e._e()])],1)])])]}))],2)]:e._e()],2)]),t("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(t){e.mailAttachmentSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Mail Attachments ")]},proxy:!0}]),model:{value:e.mailAttachmentSheet,callback:function(t){e.mailAttachmentSheet=t},expression:"mailAttachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 200px)"}},[e._l(e.mailAttachmentList,(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openAttachmentFile(s)}}},[e._v(" "+e._s(s.name)+" ")])]),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])]}))],2)],1)]),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[e.selectedFile.formJsonId?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:e.getLabel(e.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:e._e(),t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])],2)]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myAttachmentFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])]),e.historyProcessId?t("ProcessHistory",{attrs:{"process-id":e.historyProcessId,"selected-process":e.selectedProcess},on:{close:function(t){e.historyProcessId=0}}}):e._e(),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Post Comments",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}})],1)},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"col q-mr-xl text-center"},[t("div",{staticClass:"title-1"},[e._v("Request Submission")]),t("div",{staticClass:"description"},[e._v("To submit the Claim Request")])])}],o=(s("caad"),s("14d9"),s("1b0d")),r=s("7bb1"),n=s("be3f"),l=s("3445"),c=s("b3d1"),d=s("c3d2"),u=s("12b8"),m=s("53c1"),h=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,width:"30vw",height:"70vh","has-footer":""},on:{input:e.closeSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Add Contract")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-pa-md"},[t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"field-wrapper"},[t("ValidationProvider",{attrs:{name:"First Name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{staticClass:"q-mb-sm",attrs:{label:"First Name","is-mandatory":"",error:s[0]},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}})]}}])}),t("ValidationProvider",{attrs:{name:"Last Name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{staticClass:"q-mb-sm",attrs:{label:"Last Name","is-mandatory":"",error:s[0]},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}})]}}])}),t("ValidationProvider",{attrs:{name:"DOB",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateField",{staticClass:"q-mb-sm",attrs:{label:"DOB","is-mandatory":"",error:s[0]},model:{value:e.dob,callback:function(t){e.dob=t},expression:"dob"}})]}}])}),t("NumberField",{staticClass:"q-mb-sm",attrs:{label:"Current Age","is-mandatory":"","is-readonly":""},model:{value:e.currentAge,callback:function(t){e.currentAge=t},expression:"currentAge"}}),t("ValidationProvider",{attrs:{name:"Email",rules:{required:!0,email:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{staticClass:"q-mb-sm",attrs:{label:"Email","is-mandatory":"",error:s[0]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})]}}])}),t("TextField",{staticClass:"q-mb-sm",attrs:{label:"Loan Number"},model:{value:e.loanNumber,callback:function(t){e.loanNumber=t},expression:"loanNumber"}}),t("ValidationProvider",{attrs:{name:"Product",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("MultiSelectField",{staticClass:"q-mb-sm",attrs:{label:"Product","is-mandatory":"",options:e.productList,error:s[0]},model:{value:e.products,callback:function(t){e.products=t},expression:"products"}})]}}])}),t("ValidationProvider",{attrs:{name:"Lender",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{staticClass:"q-mb-sm",attrs:{label:"Lender","is-mandatory":"",options:e.lenderList,error:s[0]},model:{value:e.lender,callback:function(t){e.lender=t},expression:"lender"}})]}}])})],1)])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Save and Send Package",color:"primary"},on:{click:e.createContract}})]},proxy:!0}])})},p=[],f=s("381e"),v=s("ad54"),y={name:"AddContract",components:{ValidationObserver:r["a"],ValidationProvider:r["b"],Sheet:f["a"],TextField:c["a"],DateField:m["a"],NumberField:v["a"],MultiSelectField:d["a"],SelectField:u["a"]},props:{value:{type:Boolean,default:!1},lenderList:{type:Array,default:()=>[]}},data(){return{firstName:"",lastName:"",dob:"",currentAge:0,email:"",loanNumber:"",products:["Involuntary Unemployment"],productList:[{id:this.$nano.id(),label:"Critical Illness",value:"Critical Illness"},{id:this.$nano.id(),label:"Disability",value:"Disability"},{id:this.$nano.id(),label:"Involuntary Unemployment",value:"Involuntary Unemployment"},{id:this.$nano.id(),label:"Life",value:"Life"},{id:this.$nano.id(),label:"Lifetime Milestone",value:"Lifetime Milestone"},{id:this.$nano.id(),label:"Sickness or Injury",value:"Sickness or Injury"},{id:this.$nano.id(),label:"Unpaid Family Leave",value:"Unpaid Family Leave"}],lender:""}},watch:{dob:{deep:!0,immediate:!0,handler(){this.dob?this.currentAge=this.calculateAge(this.dob):this.currentAge=0}}},methods:{closeSheet(){this.$emit("close")},reset(){this.firstName="",this.lastName="",this.dob="",this.currentAge=0,this.email="",this.loanNumber="",this.products=["Involuntary Unemployment"],this.lender=""},calculateAge(e){if(!e)return;const t=new Date;if(new Date(e)>t)return"";const s=t-new Date(e),i=Math.floor(s/864e5);return Math.floor(i/365.25)},async createContract(){const e=await this.$refs.form.validate();if(!e)return;this.$store.commit("showLoadingBar");let t={firstName:this.firstName,lastName:this.lastName,dob:this.dob,loanNumber:this.loanNumber,product:this.products};const{error:s}=await o["d"].createContract(t);this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):(t.lender=this.lender,t.currentAge=this.currentAge,t.email=this.email,this.$emit("initiate",t),this.reset(),this.closeSheet())}}},b=y,g=s("2877"),w=Object(g["a"])(b,h,p,!1,null,null,null),C=w.exports,k=s("6a70"),S=s("b94d"),_=s("fa1f"),I=s("a7d2"),x=s("dd90"),T=s("c52a"),$=s("8505"),A=s("6df3"),F=s("695e"),L={name:"CustomForm",components:{ValidationProvider:r["b"],ExpandableSearch:n["a"],FormFieldLabel:l["a"],TextField:c["a"],MultiSelectField:d["a"],SelectField:u["a"],DateField:m["a"],AddContract:C,Modal:k["a"],Sheet:f["a"],Tabs:S["a"],FileIcon:_["a"],CustomProcessForm:T["a"],ProcessHistory:$["a"],TextAreaField:A["a"],TextBuilderField:F["a"]},props:{workflowId:{type:Number,default:0},workflow:{type:Object,default:()=>{}},formId:{type:[String,Number],default:0},panels:{type:Array,default:()=>[]},secondaryPanels:{type:Array,default:()=>[]},saveAction:{type:String,default:""},workflowFormModel:{type:Object,default:()=>{}},actions:{type:Array,default:()=>[]},requestPrefix:{type:String,default:""},mlPrediction:{type:String,default:""},formFields:{type:Array,default:()=>[]},generatePDF:{type:Number,default:0}},data(){return{form:null,formWidth:"100%",lender:[],firstName:"",lastName:"",dob:"",province:"",claimNumber:"",contractNumber:"",refNumber:"",contractColumns:[{id:this.$nano.id(),name:"firstName",label:"First Name",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"lastName",label:"Last Name",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"loanNumber",label:"Loan Number",subLabel:"Loan No.",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"dob",label:"DOB",subLabel:"",type:"NORMAL",editable:!1,valueType:"date",main:!0,visible:!0},{id:this.$nano.id(),name:"currentAge",label:"Current Age",subLabel:"",type:"NORMAL",editable:!1,valueType:"number",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"policyNumber",label:"Policy Number",subLabel:"Group Policy",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"email",label:"Email",subLabel:"Email ID",type:"NORMAL",editable:!0,valueType:"email",required:!0,main:!0,visible:!0},{id:this.$nano.id(),name:"address1",label:"Address1",subLabel:"Address",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"address2",label:"Address2",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"city",label:"City",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"province",label:"Province",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"postalCode",label:"Postal Code",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"phone",label:"Phone",subLabel:"Phone No.",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"startDate",label:"Start Date",subLabel:"Loan Start Date",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"endDate",label:"End Date",subLabel:"Loan End Date",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"cancelDate",label:"Cancel Date",subLabel:"Cancellation Date",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"contractNumber",label:"Contract Number",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"product",label:"Product",subLabel:"Benefit Claimed",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"loanNumber",label:"Loan No.",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1},{id:this.$nano.id(),name:"paymentFrequency",label:"Payment Freq",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1},{id:this.$nano.id(),name:"term",label:"Term",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1},{id:this.$nano.id(),name:"remitDate",label:"Last Remitted Date",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1},{id:this.$nano.id(),name:"reason",label:"Reason",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1}],claimColumns:[{id:this.$nano.id(),name:"claimsStoreLoanNumber",label:"Claims Store Loan Number",store:"Loan Number",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimNumber",label:"Claim Number",store:"Claim Number",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimantFirstName",label:"Claimant First Name",store:"First Name",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimantLastName",label:"Claimant Last Name",store:"Last Name",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimantDOB",label:"Claimant DOB",store:"DOB",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimantEmail",label:"Claimant Email",store:"Email",type:"NORMAL",editable:!0,main:!0},{id:this.$nano.id(),name:"claimStatus",label:"Claim Status",store:"",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"history",label:"",store:"",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"branchNumber",label:"Branch Number",store:"",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"claimDate",label:"Claim Date",store:"",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"receiveDate",label:"Receive Date",store:"",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"recommendation",label:"Recommendation",store:"",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"product",label:"Product",store:"Product",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"claimantCity",label:"Claimant City",store:"City",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"claimantProv",label:"Claimant Prov",store:"Province",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"currentAge",label:"Current Age",store:"Current Age",type:"NORMAL",editable:!1,main:!1}],tableContracts:[],tableContractsData:[],tableClaims:[],tableClaimsData:[],contractExpand:!0,claimExpand:!0,selectedContract:{},selectedClaim:{},search:"",addContractSheet:!1,productModal:!1,products:[],productList:[{id:this.$nano.id(),label:"Critical Illness",value:"Critical Illness"},{id:this.$nano.id(),label:"Disability",value:"Disability"},{id:this.$nano.id(),label:"Involuntary Unemployment",value:"Involuntary Unemployment"},{id:this.$nano.id(),label:"Life",value:"Life"},{id:this.$nano.id(),label:"Lifetime Milestone",value:"Lifetime Milestone"},{id:this.$nano.id(),label:"Sickness or Injury",value:"Sickness or Injury"},{id:this.$nano.id(),label:"Unpaid Family Leave",value:"Unpaid Family Leave"}],fieldsModel:{},historyColumns:[{id:this.$nano.id(),name:"claimNumber",label:"Claim Number"},{id:this.$nano.id(),name:"status",label:"Status"},{id:this.$nano.id(),name:"date",label:"Date"},{id:this.$nano.id(),name:"note",label:"Note"}],claimHistoryData:[],claimHistoryModal:!1,lenderList:[],totalItems:0,itemsPerPage:500,currentPage:1,contractDataResult:!1,claimDataResult:!1,selectedProcess:{},processSheet:!1,headerTitle:"",tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"mail transaction",value:"MAIL",icon:"mdi-email-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0}],mailTabs:[{id:this.$nano.id(),label:"outgoing",value:"OUTGOING",count:0},{id:this.$nano.id(),label:"incoming",value:"INCOMING",count:0}],mailTab:"OUTGOING",attachmentSheet:!1,commentsSheet:!1,mailTransactionSheet:!1,commentText:"",commentsList:[],attachmentList:[],mailTransactionList:[],mailAttachmentSheet:!1,mailAttachmentList:[],fileSheet:!1,selectedFile:{},formModel:{},historyProcessId:0,checkList:[],advancedCommentsSheet:!1,advancedCommentText:""}},computed:{isMaximized(){return"100%"===this.formWidth},_logo(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?s("651a"):s("bcdf")(`./name-${this.darkTheme?"dark":"light"}.png`)},contractCount(){return`Contracts (${this.tableContracts.length})`},claimCount(){return`Claims (${this.tableClaims.length})`},contractColumnsFilter(){return this.contractColumns.filter(e=>e.main&&e.visible)},contractColumnsInfo(){return this.contractColumns.filter(e=>!e.main&&e.visible)},claimColumnsFilter(){return this.claimColumns.filter(e=>e.main)},claimColumnsInfo(){return this.claimColumns.filter(e=>!e.main)},outgoingMails(){return this.mailTransactionList.filter(e=>"Outgoing"===e.emailType)},incomingMails(){return this.mailTransactionList.filter(e=>"Incoming"===e.emailType)}},watch:{},created(){let e=location.origin;"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId||"http://localhost:8080"===e?this.getLenderMaster(3):this.getLenderMaster(3056)},methods:{toggleWidth(){this.formWidth="100%"===this.formWidth?"720px":"100%"},calculateAge(e){if(!e)return;const t=new Date;if(new Date(e)>t)return"";const s=t-new Date(e),i=Math.floor(s/864e5);return Math.floor(i/365.25)},claimStatus(e){return e.claimStatus.indexOf("Declined")>-1||e.claimStatus.indexOf("Force Close")>-1},isArrayField(e){return["MULTIPLE_CHOICE","FILE_UPLOAD","MULTI_SELECT"].includes(e)},searchRow(e){e?(this.tableContracts=this.tableContractsData.filter(t=>{for(let s in t){let i=this.contractColumns.findIndex(e=>e.name===s);if(i>=0&&t[s]&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return t}}),this.tableClaims=this.tableClaimsData.filter(t=>{for(let s in t){let i=this.claimColumns.findIndex(e=>e.name===s);if(i>=0&&t[s]&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return t}})):(this.tableContracts=this.tableContractsData,this.tableClaims=this.tableClaimsData)},processInitiate(e){let t="",s="",i="";e?this.selectedContract=e:this.selectedContract.product=this.products;let a=[];this.selectedContract.product.length&&this.selectedContract.product.forEach(e=>{if(this.panels.length){if(this.selectedContract.policyNumber){let e=this.selectedContract.policyNumber.split("-");t=isNaN(e[1][2])?e[1].substring(0,3):e[1].substring(0,2)}else this.selectedContract.lender&&(t=this.selectedContract.lender);let a=this.lenderList.filter(e=>e.value===t);a.length&&(s=a[0].email,i=a[0].label),this.fieldsModel={},this.panels.forEach(t=>{if(t.fields.length)for(let a of t.fields)if("Lender Email"===a.label)this.fieldsModel[a.id]=s;else if("Lender Name"===a.label)this.fieldsModel[a.id]=i;else if("Initials1"===a.label){let e="";this.$store.state.session.firstName&&(e+=this.$store.state.session.firstName[0].toUpperCase()),this.$store.state.session.lastName?e+=this.$store.state.session.lastName[0].toUpperCase():e+=this.$store.state.session.firstName[1],this.fieldsModel[a.id]=e}else{let t=this.contractColumns.find(e=>e.label===a.label||e.subLabel===a.label);t&&("product"===t.name?this.fieldsModel[a.id]=e:this.fieldsModel[a.id]=this.selectedContract[t.name]||"")}})}a.push(this.fieldsModel)}),this.actions.length?this.initiateRequest(a,t,i,this.actions[0]):this.$alert.error("Process Configuration Error")},async initiateRequest(e,t,s,i){let a=[];if(e&&e.length)for(let r of e){let e={workflowId:this.workflow.id,review:"Save"===i?"":i,comments:this.commentsList,formData:{formId:this.formId,fields:r,formUpload:[]},fileIds:[],task:[],hasFormPDF:this.generatePDF,prefix:t,mlPrediction:s};this.$store.commit("showLoadingBarSave");const{error:n,payload:l}=await o["t"].processTransaction(e);if(this.$store.commit("hideLoadingBarSave"),this.saveAction="",this.fieldsModel={},n)return void this.$alert.error(n);a.push(l.requestNo)}a.length&&("Save"!==i?this.$alert.success(a.toString()+" Request Initiated"):this.$alert.success(a.toString()+" Request Initiated and Moved to your inbox")),this.$emit("refresh")},newClaim(e){let t="",s="",i="";this.selectedClaim=this.tableClaims.find(t=>t.id===e),this.panels.length&&this.panels.forEach(e=>{if(!e.fields.length)return;if(this.selectedClaim.claimNumber){let e=this.selectedClaim.claimNumber.split("-");t=isNaN(e[1][2])?e[1].substring(0,3):e[1].substring(0,2)}let a=this.lenderList.filter(e=>e.value===t);a.length&&(s=a[0].email,i=a[0].label);for(let o of e.fields)if("Lender Email"===o.label)this.fieldsModel[o.id]=s;else if("Product"===o.label)this.fieldsModel[o.id]=this.selectedClaim.product.split(",")||"";else if("Lender Name"===o.label)this.fieldsModel[o.id]=i;else if("Initials"===o.label)this.fieldsModel[o.id]=t;else{let e=this.claimColumns.find(e=>e.store===o.label);e&&(this.fieldsModel[o.id]=this.selectedClaim[e.name]||"")}}),this.$emit("update:workflowFormModel",this.fieldsModel),this.$emit("update:requestPrefix",t),this.$emit("update:mlPrediction",i),this.actions.length?this.$emit("update:saveAction",this.actions[0]):this.$alert.error("Process Configuration Error")},async viewClaim(e){this.formModel={},this.selectedProcess={},this.selectedClaim=this.tableClaims.find(t=>t.id===e),this.$store.commit("showLoadingBarSave"),this.workflowProcessList=[];const{error:t,payload:s}=await o["o"].getWorkflowData(this.workflowId,{filterBy:[{groupCondition:"",filters:[{criteria:"requestNo",condition:"IS_EQUALS_TO",value:this.selectedClaim.claimNumber}]}],itemsPerPage:10,currentPage:1,mode:""});if(this.$store.commit("hideLoadingBarSave"),t)this.$alert.error(t);else if(s.data.length){if(s.data[0].value.length){this.selectedProcess=s.data[0].value[0],this.headerTitle=`${this.selectedProcess.requestNo} - ${this.selectedProcess.stage}`;let e=Object.keys(this.selectedProcess.formData.fields),t={};e.forEach(e=>{t[e]=this.validateTypeValue(this.selectedProcess.formData.fields[e])}),this.formModel=t,this.tabs.find(e=>{"COMMENTS"===e.value?e.count=this.selectedProcess.commentsCount:"ATTACHMENTS"===e.value&&(e.count=this.selectedProcess.attachmentCount)});let i=JSON.parse(this.workflow.flowJson);i.blocks.forEach(e=>{e.id===this.selectedProcess.activityId&&e.settings.fileSettings&&e.settings.fileSettings.fileCheckList.length&&(this.checkList=e.settings.fileSettings.fileCheckList,this.checkList.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1}))}),this.getComments(),this.getAttachments(),this.getMailTransactions(),this.processSheet=!0}}else this.$alert.info("No Details Found")},async reopenClaim(e){this.selectedClaim=this.tableClaims.find(t=>t.id===e),this.$store.commit("showLoadingBarSave");const{error:t}=await o["t"].reopenRequest(1,0,{requestNumber:this.selectedClaim.claimNumber});if(this.$store.commit("hideLoadingBarSave"),t)return console.log(t),void this.$alert.info(t);this.$alert.success(this.selectedClaim.claimNumber+" request re-initiated")},async getLenderMaster(e){this.$store.commit("showLoadingBar");const{error:t,payload:s}=await o["g"].getFormEntries(e,{mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[],itemsPerPage:0,currentPage:0});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);const{data:i}=s;this.lenderList=i[0].value.map(e=>({id:e.itemid,label:e["xPAsoGQlJ_xrm5f3EAeo6"],value:e["aeyluPk9Q8w6NaUs0HO8r"],email:e["XsPSz3d4dF2VSz1Svmymv"]}))},async getProduct(e){if(this.selectedContract=this.tableContracts.find(t=>t.id===e),Object.keys(this.selectedContract).length){let e="";if(this.selectedContract.policyNumber){let t=this.selectedContract.policyNumber.split("-");e=isNaN(t[1][2])?t[1].substring(0,3):t[1].substring(0,2)}else this.selectedContract.lender&&(e=this.selectedContract.lender);if(!e)return void this.$alert.warning("Policy Number Not Found");if(!this.selectedContract.email)return void this.$alert.warning("Required Claimant Email");this.products=[],this.selectedContract.product&&!this.products.includes(this.selectedContract.product)&&this.products.push(this.selectedContract.product),this.productModal=!0}},async claimHistory(e){this.claimHistoryData=[];let t="",s="";if(e.claimNumber){let s=e.claimNumber.split("-");t=isNaN(s[1][2])?s[1].substring(0,3):s[1].substring(0,2)}let i=this.lenderList.filter(e=>e.value===t);i.length&&(s=i[0].label),this.$store.commit("showLoadingBarSave");let a={claimNumber:e.claimNumber,lenderName:s};const{payload:r,error:n}=await o["d"].getClaimHistory(a);this.$store.commit("hideLoadingBarSave"),n?this.$alert.error(n):r.length?(this.claimHistoryData=r.map(e=>({id:e.ClaimStatusID,claimNumber:e.CSClaimNumber,status:e.ClaimStatus,date:this.$day.format(e.CSDate,!1),note:e.CSNote})),this.claimHistoryModal=!0):this.$alert.info("Claim history records not found")},getData(){this.tableContracts=[],this.tableContractsData=[],this.tableClaims=[],this.tableClaimsData=[],this.contractDataResult=!1,this.claimDataResult=!1,this.getContractData(),this.getClaimData()},async getContractData(){if(this.firstName||this.lastName||this.dob||this.province||this.contractNumber||this.refNumber){let e={};this.firstName&&(e["FirstName"]=this.firstName),this.lastName&&(e["LastName"]=this.lastName),this.dob&&(e["DOB"]=this.dob),this.province&&(e["Province"]=this.province),this.contractNumber&&(e["StoreLoanNumber"]=this.contractNumber),this.refNumber;let t="";if(this.lender.length){let e=this.lenderList.filter(e=>e.value===this.lender[0]);e.length&&(t=e[0].label)}this.$store.commit("showLoadingBarSave");let s={hublinkId:1,lenderName:t,payloadMapping:JSON.stringify(e),itemsPerPage:500,currentPage:1};const{payload:i,error:a}=await o["d"].getDataSync(s);if(this.$store.commit("hideLoadingBarSave"),this.contractDataResult=!0,a)return void("Connection Interrupted"===a?this.$alert.warning(a):this.$alert.error(a));const{data:r,meta:n}=i;n.totalItems?r.length&&r[0].value.length&&(this.tableContracts=r[0].value.map(e=>({id:this.$nano.id(),firstName:e.FirstName,lastName:e.LastName,loanNumber:e.LoanNumber,dob:e.DOB?e.DOB.split(" ")[0]:"",policyNumber:e.PolicyNumber,lender:"",email:e.Email||"",currentAge:e.DOB?this.calculateAge(e.DOB.split(" ")[0]):"",address1:e.Address1,address2:e.Address2,city:e.City,province:e.Province,postalCode:e.PostalCode,phone:e.Phone,startDate:e.StartDate?e.StartDate.split(" ")[0]:"",endDate:e.EndDate?e.EndDate.split(" ")[0]:"",cancelDate:e.CancelDate?e.CancelDate.split(" ")[0]:"",contractNumber:e.StoreLoanNumber,product:e.Product,paymentFrequency:e.PmtFrq,term:e.Term,remitDate:e.RemitDate?e.RemitDate.split(" ")[0]:"",reason:e.Comments,infoVisible:!1})),this.tableContractsData=this.tableContracts):this.claimDataResult&&0===this.tableClaimData.length&&this.$alert.info("No result found")}},async getClaimData(){if(this.firstName||this.lastName||this.dob||this.province||this.claimNumber||this.contractNumber){this.$store.commit("showLoadingBarSave");let e={};this.firstName&&(e["ClaimantFirstName"]=this.firstName),this.lastName&&(e["ClaimantLastName"]=this.lastName),this.dob&&(e["ClaimantDOB"]=this.dob),this.province&&(e["ClaimantProv"]=this.province),this.claimNumber&&(e["ClaimNumber"]=this.claimNumber),this.contractNumber&&(e["ClaimsStoreLoanNumber"]=this.contractNumber);let t="";if(this.lender.length){let e=this.lenderList.filter(e=>e.value===this.lender[0]);e.length&&(t=e[0].label)}let s={hublinkId:2,lenderName:t,payloadMapping:JSON.stringify(e),itemsPerPage:500,currentPage:1};const{payload:i,error:a}=await o["d"].getDataSync(s);if(this.$store.commit("hideLoadingBarSave"),this.claimDataResult=!0,a)return void this.$alert.error(a);const{data:r,meta:n}=i;n.totalItems?r.length&&r[0].value.length&&(this.tableClaims=r[0].value.map(e=>({id:this.$nano.id(),claimsStoreLoanNumber:e.ClaimsStoreLoanNumber,claimNumber:e.ClaimNumber,claimantFirstName:e.ClaimantFirstName,claimantLastName:e.ClaimantLastName,claimantDOB:e.ClaimantDOB?e.ClaimantDOB.split(" ")[0]:"",claimantEmail:e.ClaimantEmail,claimStatus:e.ClaimStatus||e.ClaimDecision||"",branchNumber:e.BranchNumber,claimDate:e.ClaimDate?e.ClaimDate.split(" ")[0]:"",receiveDate:e.ReceiveDate?e.ReceiveDate.split(" ")[0]:"",recommendation:e.Recommendation,product:e.Product,claimantCity:e.ClaimantCIty,claimantProv:e.ClaimantProv,currentAge:e.ClaimantDOB?this.calculateAge(e.ClaimantDOB.split(" ")[0]):"",infoVisible:!1})),this.tableClaimsData=this.tableClaims):this.contractDataResult&&0===this.tableContractsData.length&&this.$alert.info("No result found")}},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},fileSize(e){return Object(I["a"])(e)},openFile(e){e.loading?this.$alert.info("Please wait to complete the uploading"):(this.selectedFile=e,window.open(this.fileLink()))},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();if(Object(x["d"])(t)){let t="";return"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:"https://trial.ezofis.com"===e?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${t}`:"https://app.ezofis.com"===e?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${t}`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${t}`}return Object(x["b"])(t)||"http://52.172.32.88"!==e?`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`:`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`}},async showLinks(e){"ATTACHMENTS"===e?this.attachmentSheet=!0:"COMMENTS"===e?this.commentsSheet=!0:"HISTORY"===e&&this.selectedProcess.processId?this.historyProcessId=this.selectedProcess.processId:"PRINT"===e?this.selectedProcess.formData?window.open(`https://appuat.ezofis.com/ezofisapi/api/form/generatePdfPrint/${this.$store.state.session.tenantId}/${this.workflowId}/${this.selectedProcess.processId}/${this.formId}/${this.selectedProcess.formData.formEntryId}/1`):this.selectedProcess.itemData&&window.open(`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedProcess.itemData.repositoryId}/${this.selectedProcess.itemData.itemId}/2`):"TASK"===e?this.taskEntries.length?this.taskSheet=!0:this.$emit("addTask"):"VALIDATION"===e?this.$emit("validation",this.selectedProcess.processId):"PAYMENT_TABLE"===e?this.$emit("paymentTable"):"MAIL"===e?(this.getMailTransactions(),this.mailTransactionSheet=!0):"SUB_PROCESS"===e&&(this.subProcessSheet=!0)},lastActionDuration(e){const t=e.transaction_createdAt instanceof Date?e.transaction_createdAt:new Date(e.transaction_createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},validateTypeValue(e){if(e)try{var t=JSON.parse(e);if("object"===typeof t)return t}catch(s){return e}return e},attachmentFilterCheckList(e){return this.attachmentList.filter(t=>t.name.substring(0,t.name.lastIndexOf("."))===e||t.name.substring(0,t.name.lastIndexOf(".")).split("_")[0]===e)},isCheckList(e){let t=this.checkList.filter(t=>t.name===e.substring(0,e.lastIndexOf("."))||t.name===e.substring(0,e.lastIndexOf(".")).split("_")[0]);return!t.length},showMailAttachments(e){this.mailAttachmentList=[];let t=e.attachmentJson.split(",");t.forEach(t=>{let s=t.split("\\").pop();this.mailAttachmentList.push({id:this.$nano.id(),mailId:e.id,name:s,createdAt:e.createdAt})}),this.mailAttachmentSheet=!0},openAttachmentFile(e){let t=`https://appuat.ezofis.com/ezofisapi/api/client/viewAttachment/${this.$store.state.session.tenantId}/${e.mailId}/${e.name}`;window.open(t,"_blank")},fileMenuAction(e,t){this.selectedFile=e,this.documentAction(t,!0)},documentAction(e,t){if("Email_Sharing"===e);else if("Print"===e){if(this.selectedFile.name)if(t){let e="";if(this.selectedFile.initiate){let t=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(t=2),e=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${t}/1`}else e=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(e,"_blank")}else{let e=this.selectedFile.name.split(".").pop();Object(x["d"])(e)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myAttachmentFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===e){let e="";e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`,window.open(e,"_blank")}},async filePrintSession(){const{error:e}=await o["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});e&&this.$alert.error(e)},async getMailTransactions(){this.mailTransactionList=[],this.tabs.find(e=>{"MAIL"===e.value&&(e.count=0)});let e={filterBy:[]};const{error:t,payload:s}=await o["t"].getMailTransactions(this.workflowId,this.selectedProcess.processId,e);t?this.$alert.error(t):s.length&&(this.mailTransactionList=s,this.tabs.find(e=>{"MAIL"===e.value&&(e.count=this.mailTransactionList.length)}))},async getComments(e=0,t=0){this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=0)}),this.commentsList=[],e||t||(e=this.workflowId,t=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:s,payload:i}=await o["t"].getProcessComments(e,t);this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):i.length&&(this.commentsList=i,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}))},async getAttachments(e=0,t=0){this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=0)});let s=this.attachmentList.length;e||t||(e=this.workflowId,t=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:i,payload:a}=await o["t"].getAttachments(e,t);if(this.$store.commit("hideLoadingBar"),i)this.$alert.error(i);else if(a.length?(s!==a.length&&(this.attachmentList=a.map(e=>({...e,checked:!1}))),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)})):this.attachmentList=[],this.checkList.length){this.checkList.forEach(e=>{let t=this.attachmentList.filter(t=>{let s=t.name.substr(0,t.name.lastIndexOf("."));if(e.name===s||e.name===s.split("_")[0])return t});t.length?e.attach=!0:e.attach=!1});let e=location.origin;("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://localhost:8080"===e||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&(this.formCheckList=!0)}},async saveComment(){if(this.commentText&&this.selectedProcess.processId){const{error:e}=await o["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:2});if(e)return void this.$alert.error(e);this.commentText="",this.getComments()}},async saveAdvancedComment(){if(this.advancedCommentText){if(this.selectedProcess.processId){const{error:e}=await o["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:2});if(e)return void this.$alert.error(e)}this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}},async updateClaimDetails(){let e={};e={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"",formData:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,fields:this.formModel}};const{error:t}=await o["t"].processTransaction(e);t?this.$alert.error(t):(this.$alert.success("Claim details are updated"),this.processSheet=!1)}}},B=L,P=(s("ccc5"),s("2c91")),D=s("b047"),M=s("cb32"),q=s("8169"),N=s("93dc"),O=s.n(N),E=Object(g["a"])(B,i,a,!1,null,"1b34e972",null);t["default"]=E.exports;O()(E,"components",{QSpace:P["a"],QChip:D["a"],QAvatar:M["a"],QChatMessage:q["a"]})},a5be:function(e,t,s){"use strict";s("2dcd")},a7f2:function(e,t,s){},a809:function(e,t,s){"use strict";function i(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}t["a"]=i},a945:function(e,t,s){},abe1:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,width:"40vw"},on:{input:function(t){return e.$emit("input",!1)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Metadata ")]},proxy:!0}])},[t("div",{attrs:{id:"file-details"}},[t("div",{attrs:{id:"item-overview"}},[t("table",[t("tbody",e._l(e.fileData,(function(s){return t("tr",{key:s.name,staticClass:"tableRow"},[t("td",{staticClass:"label"},[e._v(e._s(s.name))]),"TABLE"!==s.type?t("td",{staticClass:"value"},[e._t(s.name,(function(){return[e._v(" "+e._s(s.value||"-")+" ")]}),{value:s.value})],2):t("td",{staticClass:"value",staticStyle:{padding:"8px"}},[e._t(s.name,(function(){return[s.value?[t("BaseActionButton",{attrs:{icon:"mdi-table","is-flat":"","no-border":""},on:{click:function(t){return e.showTable(s.name)}}})]:[t("BaseActionButton",{attrs:{icon:"mdi-table","is-flat":"","no-border":"","is-disabled":""}})]]}))],2)])})),0)])]),t("Modal",{attrs:{width:"60vw",height:"80vh"},on:{input:function(t){e.expandTableModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.tableHeader))]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"tableData"}},[e.tableData.cellvalues?[t("table",e._l(e.tableData.cellvalues,(function(s,i){return t("tr",{key:i},e._l(s,(function(s){return t("NoHeader"===s.kind?"td":"th",{key:`r${i}_c${s.columnindex}`,tag:"th"},[e._v(" "+e._s(s.cellvalue)+" ")])})),1)})),0)]:[t("table",[t("thead",[t("tr",e._l(e.tableData[0],(function(s,i){return t("th",{key:i},[e._v(" "+e._s(i)+" ")])})),0)]),t("tbody",e._l(e.tableData,(function(s,i){return t("tr",{key:i},e._l(s,(function(s,i){return t("td",{key:i},[e._v(" "+e._s(s)+" ")])})),0)})),0)])]],2)]},proxy:!0}]),model:{value:e.expandTableModal,callback:function(t){e.expandTableModal=t},expression:"expandTableModal"}})],1)])},a=[],o=s("381e"),r=s("6a70"),n={name:"FileDetails",components:{Sheet:o["a"],Modal:r["a"]},props:{value:{type:Boolean,required:!0},fileData:{type:Array,required:!0}},data(){return{expandTableModal:!1,tableHeader:"",tableData:[]}},methods:{showTable(e){this.expandTableModal=!0;let t=this.fileData.filter(t=>t.name===e);console.log(t),this.tableHeader=t[0].name,this.tableData=JSON.parse(t[0].value),console.log(this.tableData)}}},l=n,c=(s("4045"),s("2877")),d=Object(c["a"])(l,i,a,!1,null,"65baddda",null);t["a"]=d.exports},ad4f:function(e,t,s){},ae23:function(e,t,s){"use strict";s("4ddc")},afe7:function(e,t,s){},affa:function(e,t,s){},b0ba:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("Sheet",{attrs:{width:"50vw","no-padding":""},on:{input:e.closeFormHistorySheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Form Entry History ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getFormHistory()}}})]},proxy:!0}]),model:{value:e.formHistorySheet,callback:function(t){e.formHistorySheet=t},expression:"formHistorySheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"\n          calc(100vh - 200px)\n        "}},[t("div",{attrs:{id:"history"}},[e.history.length?e._l(e.history,(function(s){return t("div",{key:s.id,staticClass:"entry"},[t("div",{staticClass:"header"},[e._v(" "+e._s(s.changes.length)+" "+e._s(s.changes.length>1?"Changes":"Change")+" ")]),t("div",{staticClass:"content"},[t("div",{staticClass:"changes-meta"},[t("div",[e._v(e._s(s.changedBy))]),t("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.changedAt))])],1),e._l(s.changes,(function(s,i){return t("div",{key:i+1,staticClass:"change"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),"isDeleted"===s.name?t("div",[Number(s.newValue)?t("span",{staticClass:"font-semibold"},[e._v(' "Deleted" ')]):t("span",{staticClass:"font-semibold"},[e._v('"Restored"')]),e._v(" the item ")]):s.oldValue?t("div",[e._v(" Modified "+e._s(s.name)+" from "),t("span",{staticClass:"font-semibold"},[e._v('"'+e._s(s.oldValue)+'"')]),e._v(" to "),t("span",{staticClass:"font-semibold"},[e._v('"'+e._s(s.newValue)+'"')])]):t("div",[e._v(" Assigned "),t("span",{staticClass:"font-semibold"},[e._v('"'+e._s(s.newValue)+'"')]),e._v(" as "+e._s(s.name)+" ")])],1)}))],2)])})):t("div",{staticClass:"no-history"},[e._v("No data found")])],2)])],1)])],1)},a=[],o=s("381e"),r=s("1b0d"),n={name:"FormEntryHistory",components:{Sheet:o["a"]},props:{value:{type:Boolean,default:!1},processId:{type:Number,required:!0},workflowId:{type:Number,required:!0}},data(){return{changes:[],history:[],formHistorySheet:!1}},watch:{value:{immediate:!0,handler(){this.value&&this.getFormHistory()}}},methods:{async getFormHistory(){this.formHistorySheet=!0,this.history=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["g"].formHistory(this.workflowId,this.processId);if(this.$store.commit("hideLoadingBar"),e)this.$alert.error(e);else if(t){let e=t;this.history=e.length&&e.map(e=>({id:this.$nano.id(),changedBy:e.modifiedBy,changedAt:this.$day.format(e.modifiedAt),changes:e.fields}))}},closeFormHistorySheet(){this.formHistorySheet=!1,this.$emit("update:value",!1)}}},l=n,c=(s("742a"),s("2877")),d=Object(c["a"])(l,i,a,!1,null,"231e188e",null);t["a"]=d.exports},b2a7:function(e,t,s){"use strict";s("79b4")},b2f9:function(e,t,s){"use strict";s("b3f6")},b3f6:function(e,t,s){},b4cd:function(e,t,s){},b591:function(e,t,s){"use strict";s("a7f2")},b641:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("q-dialog",{attrs:{value:e.value},on:{input:e.close}},[t("div",{style:{width:e.width},attrs:{id:"quickhelpmodal"}},[t("BaseScrollbar",{attrs:{height:e.scrollBarHeight}},[e.loadingBarSave?t("BaseSheetLoading"):e._e(),e._t("default")],2),e.hasFooter&&!e.loadingBarSave?t("div",{staticClass:"footer"},[e._t("footer")],2):e._e()],1)])},a=[],o=s("2f62"),r={name:"Modal",props:{value:{type:Boolean,required:!0},hasFooter:{type:Boolean,default:!1},width:{type:String,default:"320px"},height:{type:String,default:"80vh"},noPadding:{type:Boolean,default:!1}},computed:{...Object(o["c"])(["loadingBarSave"]),scrollBarHeight(){if("auto"===this.height)return this.height;const e=this.hasFooter?138:69;return`calc(${this.height} - ${e}px)`}},methods:{close(){this.$emit("input",!1)}}},n=r,l=(s("eed3"),s("2877")),c=s("24e8"),d=s("93dc"),u=s.n(d),m=Object(l["a"])(n,i,a,!1,null,"8ceee4de",null);t["a"]=m.exports;u()(m,"components",{QDialog:c["a"]})},b811:function(e,t,s){},b822:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"view-wrapper"}},[e.showMinimumFileSheet?t("div",{staticClass:"row justify-end"},[t("div",{staticClass:"col-md-6 col-lg-6"},[t("div",{staticClass:"shadow-3",attrs:{id:"file-sheet"}},[t("div",{staticClass:"header"},[t("div",{staticClass:"title-1"},[t("div",{attrs:{id:"file"}},[t("div",{staticClass:"avatar"},[t("FileIcon",{attrs:{"mime-type":e.minimumFileSheet.type}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.minimumFileSheet.name)+" ")])])])]),t("q-space"),t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-expand-outline"},on:{click:e.handleOpenFullFileSheet}}),t("BaseCloseButton",{on:{click:e.hideFileSheet}})],1),t("BaseScrollbar",{attrs:{id:"file-content",height:"calc(100vh - 125px)"}},[t("div",{staticClass:"file-list"},[t("iframe",{attrs:{id:"file-frame",src:e.fileLink,frameborder:"0"}})])])],1)])]):e._e(),t("Header",{attrs:{title:e.title,breadcrumbs:e.breadcrumbs},scopedSlots:e._u([{key:"actions",fn:function(){return[e._t("header-actions")]},proxy:!0}],null,!0)}),e.hideActionBar?e._e():t("ActionBar",{attrs:{tab:e.tab,tabs:e.tabs,"hide-actionbar":!e.showMinimumFileSheet},scopedSlots:e._u([{key:"header-title",fn:function(){return[e._t("header-title")]},proxy:!0}],null,!0)}),e.loadingBarPage?t("LoadingBar"):e._e(),e._t("default")],2)},a=[],o=s("2f62"),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"view-header"}},[t("div",[t("div",{staticClass:"title-1 q-mb-xs"},[e._v(" "+e._s(e.title)+" ")]),t("Breadcrumbs",{attrs:{breadcrumbs:e.breadcrumbs}})],1),t("q-space"),t("BaseActionButton",{attrs:{icon:"eva-question-mark",color:"secondary"},on:{click:function(t){return e.$parent.$emit("quickHelp")}}}),e._t("actions")],2)},n=[],l=s("36ce"),c={name:"Header",components:{Breadcrumbs:l["a"]},props:{title:{type:String,required:!0},breadcrumbs:{type:Array,required:!0}}},d=c,u=(s("5439"),s("2877")),m=s("2c91"),h=s("93dc"),p=s.n(h),f=Object(u["a"])(d,r,n,!1,null,"9fc08392",null),v=f.exports;p()(f,"components",{QSpace:m["a"]});var y=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"view-action-bar"}},[e._t("header-title"),t("Tabs",{attrs:{tab:e.tab,tabs:e.tabs}}),t("q-space"),e.hideActionbar?t("PortalTarget",{attrs:{name:"action-bar",slim:""}}):e._e()],2)},b=[],g=s("2b88"),w=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"tabs"}},[e._l(e.tabs,(function(s){return t("Tab",{key:s.id,ref:"tab",refInFor:!0,attrs:{label:s.label,"is-active":e.isActive(s.route)},on:{click:function(t){return e.handleClick(s)}}})})),t("div",{ref:"indicator",staticClass:"indicator"})],2)},C=[],k=(s("14d9"),s("8b55")),S={name:"RouteTabs",components:{Tab:k["a"]},props:{tab:{type:String,default:""},tabs:{type:Array,required:!0}},watch:{$route(){this.setTab()},tabs(){setTimeout(()=>this.setTab(),300)}},mounted(){!this.tab||this.isActive(this.tab)?setTimeout(()=>this.setTab(),300):this.$router.push({name:this.tab})},methods:{setIndicatorPosition(e){const t=this.tabs.findIndex(t=>t.id===e),s=this.$refs.tab[t],i=s.$el.offsetLeft;this.$refs.indicator.style.left=i+"px";const a=s.$el.clientWidth;this.$refs.indicator.style.width=a+"px"},isActive(e){return this.$route.name===e},setTab(){const e=this.$route.name,t=this.tabs.find(t=>t.route===e);t&&this.setIndicatorPosition(t.id)},handleClick(e){this.isActive(e.route)||this.$router.push({name:e.route})}}},_=S,I=(s("f042"),Object(u["a"])(_,w,C,!1,null,"255c1fc8",null)),x=I.exports,T={name:"ActionBar",components:{Tabs:x,PortalTarget:g["PortalTarget"]},props:{tab:{type:String,required:!0},tabs:{type:Array,required:!0},hideActionbar:{type:Boolean,default:!0}}},$=T,A=(s("5b8f"),Object(u["a"])($,y,b,!1,null,"05ac58aa",null)),F=A.exports;p()(A,"components",{QSpace:m["a"]});var L=s("fa1f"),B=s("dd90"),P=s("048d"),D={name:"ViewWrapper",components:{Header:v,ActionBar:F,FileIcon:L["a"],LoadingBar:P["a"]},props:{title:{type:String,required:!0},breadcrumbs:{type:Array,required:!0},hideActionBar:{type:Boolean,default:!1},tab:{type:String,default:""},tabs:{type:Array,default:()=>[]},minimumFileSheet:{type:Object,default:()=>{}}},data(){return{showMinimumFileSheet:!1}},computed:{...Object(o["c"])(["loadingBarPage"]),fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.minimumFileSheet.name){let t=this.minimumFileSheet.name.split(".").pop(),s="";if(Object(B["d"])(t))s="https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"!==e||Object(B["c"])(t)?"https://app.ezofis.com"===e?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html":"https://trial.ezofis.com/docsviewer/index.html";else{if(Object(B["b"])(t)||"http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.$route.query.repositoryId}/${this.minimumFileSheet.id}/2`;s="http://52.172.32.88/DocsViewer/index.html"}return`${s}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.$route.query.repositoryId}&itemId=${this.minimumFileSheet.id}&type=2&filename=${this.minimumFileSheet.name}`}return""}},watch:{minimumFileSheet:{deep:!0,handler(){this.minimumFileSheet&&(this.showMinimumFileSheet=!0,this.$emit("hideFileSheet",!0))}},$route:{deep:!0,handler(){this.$route.query.repositoryId||this.hideFileSheet()}}},methods:{handleOpenFullFileSheet(){this.hideFileSheet(),this.$emit("handleOpenFullFileSheet",this.minimumFileSheet)},hideFileSheet(){this.$emit("hideFileSheet",!1),this.showMinimumFileSheet=!1}}},M=D,q=(s("bded"),Object(u["a"])(M,i,a,!1,null,"4e92c3e4",null));t["a"]=q.exports;p()(q,"components",{QSpace:m["a"]})},b94d:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{style:{color:e._color},attrs:{id:"tabs"}},[e._l(e.tabs,(function(s){return t("Tab",{key:s.id,ref:"tab",refInFor:!0,attrs:{label:s.label,color:e.color,"is-full-width":e.isFullWidth,"is-active":s.value===e.value},on:{click:function(t){return e.handleClick(s)}}})})),t("div",{ref:"indicator",staticClass:"indicator"})],2)},a=[],o=s("8b55"),r={name:"Tabs",components:{Tab:o["a"]},props:{tabs:{type:Array,required:!0},value:{type:[String,Number],required:!0},color:{type:String,default:"primary"},isFullWidth:{type:Boolean,default:!1}},computed:{_color(){return`var(--${this.color})`}},watch:{value(){this.setIndicatorPosition()}},mounted(){this.setIndicatorPosition()},methods:{setIndicatorPosition(){const e=this.tabs.findIndex(e=>e.value===this.value),t=this.$refs.tab[e],s=t.$el.offsetLeft;this.$refs.indicator.style.left=s+"px";const i=t.$el.clientWidth;this.$refs.indicator.style.width=i+"px"},handleClick(e){e.value!==this.value&&this.$emit("input",e.value)}}},n=r,l=(s("40f9"),s("2877")),c=Object(l["a"])(n,i,a,!1,null,"48eb7e5e",null);t["a"]=c.exports},b97e:function(e,t,s){"use strict";s("21fc")},ba54:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("ItemDetails",{attrs:{width:"620px",value:e.value,history:e.history,overview:e.overview},on:{edit:e.handleEdit,input:e.handleInput,delete:e.handleDelete},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Connection Details")]},proxy:!0},{key:"fields",fn:function({value:s}){return[s&&s.length?t("ol",e._l(s,(function(s){return t("li",{key:s.id},[e._v(" "+e._s(s.name)+" ")])})),0):t("div",[e._v("-")])]}}])})},a=[],o=s("1b0d"),r=s("9290"),n={name:"ConnectionDetails",components:{ItemDetails:r["a"]},props:{value:{type:Boolean,default:!1},columns:{type:Array,required:!0},entry:{type:Object,required:!0}},data(){return{isLoading:!1,history:[]}},computed:{overview(){return this.columns.map(e=>({id:e.id,name:e.name,label:e.label,value:this.entry[e.name]}))}},watch:{entry:{immediate:!0,deep:!0,handler(){this.entry.id&&this.getConnectionHistory()}}},methods:{handleInput(e){this.$emit("input",e)},handleEdit(){this.$emit("input",!1),this.$emit("edit",this.entry.id)},handleDelete(){this.$emit("input",!1),this.$emit("delete",this.entry.id)},async getConnectionHistory(){this.isLoading=!0;const{error:e,payload:t}=await o["j"].getIntegrationHistory(this.entry.id);this.isLoading=!1,e?this.$alert.error(e):this.history=t}}},l=n,c=(s("f39e"),s("2877")),d=Object(c["a"])(l,i,a,!1,null,"68ebb473",null);t["a"]=d.exports},ba5a:function(e,t,s){"use strict";s("5042")},bb36:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess||e.isPortal?"30":"0","no-padding":""},on:{input:e.closeCommentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 30 seconds ")]):e._e(),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getComments(0)}}})]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:e.commentsSheetHeight}},[e._l(e.commentsList,(function(s,i){return[t("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===e.$store.state.session.id?"me":s.createdByEmail||s.externalCommentsby,text:[s.comments],"text-html":"",sent:s.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(s),"bg-color":s.createdBy===e.$store.state.session.id?"primary-1":"secondary-1"},scopedSlots:e._u([{key:"avatar",fn:function(){return[s.embedFileList&&s.embedFileList.length?t("div",{staticClass:"file-icons"},[t("FileIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.embedFileList[0].fileName,expression:"row.embedFileList[0].fileName",modifiers:{top:!0}}],key:"Icon-"+i,staticClass:"file-icon q-mr-sm",attrs:{"mime-type":e.fileType(s.embedFileList[0].fileName)}})],1):e._e()]},proxy:!0}],null,!0)})]}))],2)],1),"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess||e.isPortal?t("div",{staticClass:"col borderTop"},[t("div",{staticClass:"row"},[e.checkTenant()?[t("div",{staticClass:"col actions"},[e.attachmentList.length&&e.fileNames.length?t("div",{staticClass:"row select-action q-pa-sm action-container"},[t("CheckboxField",{staticClass:"q-pr-sm",class:e.attachComment?"col-auto":"col",attrs:{label:"Add Comment to PDF"},model:{value:e.attachComment,callback:function(t){e.attachComment=t},expression:"attachComment"}}),!e.selectedProcess.processId||"START"===e.selectedProcess.stageType||e.attachComment||e.isPortal?e._e():t("CheckboxField",{staticClass:"col-auto notify-cmd",attrs:{label:"Notify Initiator/Requester"},model:{value:e.notifyInitiator,callback:function(t){e.notifyInitiator=t},expression:"notifyInitiator"}}),e.attachComment?t("SelectField",{staticClass:"col field comment-attach attach-cmd",attrs:{"is-searchable":!0,options:e.fileNames},model:{value:e.selectedFileForAttach,callback:function(t){e.selectedFileForAttach=t},expression:"selectedFileForAttach"}}):e._e()],1):e._e(),!e.selectedProcess.processId||"START"===e.selectedProcess.stageType||!e.attachComment&&e.attachmentList.length&&e.fileNames.length||e.isPortal?e._e():t("CheckboxField",{staticClass:"col-12 q-pl-sm q-pb-sm q-pt-sm",class:e.notifyInitiatorClass,attrs:{label:"Notify Initiator/Requester"},model:{value:e.notifyInitiator,callback:function(t){e.notifyInitiator=t},expression:"notifyInitiator"}}),e.displayInternalPublic?t("SingleChoiceField",{staticClass:"action-container",class:{"internal-public":e.attachmentList.length>0,"col q-pa-sm":!0,"internal-public-margin":e.attachComment},attrs:{options:e.commentActions,"show-options-wrapper":!1,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e()],1)]:e._e(),e.isTenantGOTOComments()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.jiraCommentActions,"options-per-line":2},model:{value:e.jiraCommentAction,callback:function(t){e.jiraCommentAction=t},expression:"jiraCommentAction"}})]:e._e()],2),t("div",{staticClass:"row text-area-action q-ml-sm q-mr-sm"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto","margin-right":"8px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm comment-actions",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm comment-actions",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])]):e._e()]),t("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"red"},on:{input:function(t){e.errorModal=!1,e.errorMessage=""}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Error Message")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" "+e._s(e.errorMessage)+" ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Close",color:"red"},on:{click:function(t){e.errorModal=!1,e.errorMessage=""}}})]},proxy:!0}]),model:{value:e.errorModal,callback:function(t){e.errorModal=t},expression:"errorModal"}}),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.saveAction="",e.workflowFormModel={},e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[e.checkTenant()?[e.attachmentList.length&&e.fileNames.length?t("div",{staticClass:"row actions advance-cmd"},[t("CheckboxField",{staticClass:"col-auto q-pr-sm",staticStyle:{margin:"auto"},attrs:{label:"Add Comment to PDF"},model:{value:e.attachComment,callback:function(t){e.attachComment=t},expression:"attachComment"}}),e.attachComment?t("SelectField",{staticClass:"field comment-attach",attrs:{"is-searchable":!0,options:e.fileNames},model:{value:e.selectedFileForAttach,callback:function(t){e.selectedFileForAttach=t},expression:"selectedFileForAttach"}}):e._e(),e.selectedProcess.processId&&"START"!==e.selectedProcess.stageType&&!e.isPortal?t("CheckboxField",{staticClass:"col-auto q-pl-sm adv-notify-cmd",attrs:{label:"Notify Initiator/Requester"},model:{value:e.notifyInitiator,callback:function(t){e.notifyInitiator=t},expression:"notifyInitiator"}}):e._e()],1):e._e(),e.checkTenant()&&e.displayInternalPublic?t("SingleChoiceField",{staticClass:"actions q-mr-sm noborder",attrs:{options:e.commentActions,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e()]:e._e(),e.isTenantGOTOComments()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.jiraCommentActions,"options-per-line":2},model:{value:e.jiraCommentAction,callback:function(t){e.jiraCommentAction=t},expression:"jiraCommentAction"}})]:e._e(),t("BaseButton",{attrs:{label:"Post Comments",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}})],1)},a=[],o=(s("14d9"),s("381e")),r=s("1b0d"),n=s("1c54"),l=s("6df3"),c=s("6a70"),d=s("695e"),u=s("869e"),m=s("12b8"),h=s("9234"),p=s("fa1f"),f={name:"Comments",components:{Sheet:o["a"],Confirm:n["a"],TextAreaField:l["a"],Modal:c["a"],TextBuilderField:d["a"],CheckboxField:u["a"],SelectField:m["a"],SingleChoiceField:h["a"],FileIcon:p["a"]},props:{value:{type:Boolean,default:!1},selectedProcess:{type:Object,default:()=>{}},workflow:{type:Object,default:()=>{}},selectedNode:{type:String,required:!0},initiateProcess:{type:Boolean,default:!1},formFields:{type:Array,default:()=>[]},attachmentList:{type:Array,default:()=>[]},workflowId:{type:Number,required:!0},actionComments:{type:Boolean,default:!1},fileNames:{type:Array,default:()=>[]},comments:{type:Array,default:()=>[]},displayInternalPublic:{type:Boolean,default:!1},isPortal:{type:Boolean,default:!1}},data(){return{commentsSheet:!1,commentText:"",commentsList:[],attachComment:!1,selectedFileForAttach:0,advancedCommentsSheet:!1,advancedCommentText:"",commentActions:[{id:this.$nano.id(),label:"Internal",value:2},{id:this.$nano.id(),label:"Public",value:1}],commentAction:2,jiraCommentActions:[{id:this.$nano.id(),label:"This resource",value:1},{id:this.$nano.id(),label:"All resource",value:2}],jiraCommentAction:1,errorMessage:"",errorModal:!1,successModal:!1,notifyInitiator:!1}},computed:{commentsSheetHeight(){return"inbox"===this.selectedNode||"payment"===this.selectedNode||"common"===this.selectedNode||this.initiateProcess||this.isPortal?this.checkCommentsOption()&&!this.isCustomizedWorkflow?this.attachmentList.length&&this.fileNames.length?this.attachComment&&this.displayInternalPublic?"calc(100vh - 270px)":this.attachComment&&!this.displayInternalPublic?"calc(100vh - 230px)":!this.attachComment&&this.displayInternalPublic?"calc(100vh - 225px)":"calc(100vh - 200px)":this.displayInternalPublic?"calc(100vh - 220px)":"START"===this.selectedProcess.stageType||this.isPortal?"calc(100vh - 150px)":"calc(100vh - 180px)":"calc(100vh - 150px)":""},notifyInitiatorClass(){return this.attachmentList.length&&this.fileNames.length?"":"action-container"}},watch:{value:{immediate:!0,handler(){this.commentsSheet=!0,this.commentsList=this.comments,this.commentsSheet&&this.selectedProcess.processId?this.commentsLoad=setInterval(()=>{this.getComments()},3e4):clearInterval(this.commentsLoad)}}},methods:{closeCommentsSheet(){this.commentsSheet=!1,this.$emit("update:comments",this.commentsList),this.$emit("commentsCount",this.commentsList.length),this.$emit("update:value",!1)},async getComments(e=0,t=0){this.commentsList=[],e||t||(e=this.workflowId,t=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:s,payload:i}=await r["t"].getProcessComments(e,t);this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):i.length&&(this.commentsList=i,this.$emit("commentsCount",this.commentsList.length))},async saveComment(){if(this.commentText){if(this.attachComment&&!this.selectedFileForAttach)return void this.$alert.warning("Select File To Attach");if(this.selectedProcess.processId){if(this.isTenantGOTO()&&this.selectedProcess.jiraIssueInfo.id&&2===this.jiraCommentAction){const{error:e,payload:t}=await r["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.commentText});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,t)}else{const{error:e,payload:t}=await r["t"].insertProcessComment(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:this.isPortal?1:this.commentAction,hasNotifytoInitiated:this.notifyInitiator,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,[t])}this.commentText="",this.clearAttach(),this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id,hasNotifytoInitiated:this.notifyInitiator,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})}),this.$emit("commentsCount",this.commentsList.length),this.commentText="",this.clearAttach()}},async saveAdvancedComment(){if(this.advancedCommentText){if(this.attachComment&&!this.selectedFileForAttach)return void this.$alert.warning("Select File To Attach");if(this.selectedProcess.processId){if(this.isTenantGOTO()&&this.selectedProcess.jiraIssueInfo.id&&2===this.jiraCommentAction){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t)}else{const{error:e,payload:t}=await r["t"].insertProcessComment(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:this.isPortal?1:this.commentAction,hasNotifytoInitiated:this.notifyInitiator,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t)}this.advancedCommentText="",this.advancedCommentsSheet=!1,this.clearAttach(),this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.advancedCommentText="",this.advancedCommentsSheet=!1,this.$emit("commentsCount",this.commentsList.length);this.actionComments&&this.$emit("processRequest",!1,!1)}},clearAttach(){this.selectedFileForAttach=0,this.attachComment=!1,this.notifyInitiator=!1},async sendCommentsToJira(e,t,s){if(this.$store.commit("showLoadingBar"),1===this.jiraCommentAction){var i;let t=null===(i=this.formFields.find(e=>"Resource ID"===e.label))||void 0===i?void 0:i.value;e=this.selectedProcess.formData.fields[t]+","+e}e=`${this.$store.state.session.firstName} ${this.$store.state.session.lastName}: ${e}`;let a={cloudIntegrationId:this.jiraAccounts[0].id,url:this.selectedProcess.jiraIssueInfo.self,data_onpremise:{body:e},issueId:t,ezCommentId:s};const{error:o,payload:n}=await r["j"].insertJiraIssueComments(a);if(this.$store.commit("hideLoadingBar"),o){this.$alert.error("error posting comments to jira");let e=JSON.parse(o);return this.errorMessage=e.errorMessages,void(this.errorModal=!0)}console.log(n),this.jiraCommentAction=1},isTenantGOTO(){let e=location.origin;return("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e)&&2===this.$store.state.session.tenantId},checkCommentsOption(){return!this.isTenantArmgroup()&&(!this.isTenantGOTO()||!(!Object.keys(this.selectedProcess).length||!this.selectedProcess.jiraIssueInfo.id))},checkTenant(){return!this.isTenantArmgroup()||(this.commentAction=2,!1)},isTenantArmgroup(){let e=location.origin;return("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://localhost:80801"===e)&&3===this.$store.state.session.tenantId},isTenantGOTOComments(){return!!(Object.keys(this.selectedProcess).length&&this.isTenantGOTO()&&this.selectedProcess.jiraIssueInfo.id)},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)}}},v=f,y=(s("c5b7"),s("2877")),b=s("8169"),g=s("93dc"),w=s.n(g),C=Object(y["a"])(v,i,a,!1,null,null,null);t["a"]=C.exports;w()(C,"components",{QChatMessage:b["a"]})},bcdf:function(e,t,s){var i={"./name-dark.png":"cd22","./name-light.png":"00c2"};function a(e){var t=o(e);return s(t)}function o(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=o,e.exports=a,a.id="bcdf"},bded:function(e,t,s){"use strict";s("fabd")},bdf3:function(e,t,s){},be3f:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"search",expression:"'search'",modifiers:{top:!0}}],staticClass:"is-expanded",attrs:{id:"expandable-search"},on:{click:e.toggle}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-search"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],ref:"expandableSearch",attrs:{type:"text",placeholder:"Search"},domProps:{value:e.searchQuery},on:{keyup:function(t){return e.$emit("search",e.searchQuery)},blur:e.handleBlur,input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}})],1)},a=[],o={name:"ExpandableSearch",data(){return{isExpanded:!1,searchQuery:""}},methods:{toggle(){this.isExpanded=!this.isExpanded,this.isExpanded&&this.$refs.expandableSearch.focus()},handleBlur(){this.isExpanded=!1}}},r=o,n=(s("fdd5"),s("2877")),l=Object(n["a"])(r,i,a,!1,null,"29b72610",null);t["a"]=l.exports},beae:function(e,t,s){"use strict";s("dccd")},bf55:function(e,t,s){"use strict";s("686b")},c187:function(e,t,s){"use strict";s("9935")},c3a3:function(e,t,s){},c3ca:function(e,t,s){"use strict";s("0ad7")},c52a:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{style:{width:e.formWidth},attrs:{id:"custom-process-form-view"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 130px)"}},[t("div",{staticClass:"content"},[t("div",{staticClass:"row"},[t("div",{staticClass:"q-pr-sm row",class:e.$q.screen.width>1200?"col-lg-6 col-md-6 col-sm-12":"col-lg-6 col-md-12 col-sm-12",style:e.inbox?"":"height:10px;"},[t("div",{staticClass:"col-12 header",class:e.inbox?"":"q-mb-sm"},[e._v(" Customer Information ")]),t("table",{staticClass:"col-12 q-mb-sm"},[t("tbody",[t("tr",[t("td",[e._v("Claimant Info")]),t("td",[t("SelectField",{staticClass:"custom-controls",attrs:{value:e.getModel("Claimant Info"),options:e.claimantInfoList,"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Claimant Info")},onBlur:function(t){return e.autoSave("Claimant Info")}}})],1),t("td",[e._v("First Name")]),t("td",[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("First Name"),highlight:e.checkHighlight("First Name"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"First Name")},onBlur:function(t){return e.autoSave("First Name")}}})],1),t("td",[e._v("Last Name")]),t("td",{attrs:{colspan:"2"}},[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Last Name"),highlight:e.checkHighlight("Last Name"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Last Name")},onBlur:function(t){return e.autoSave("Last Name")}}})],1)]),t("tr",[t("td",[e._v("DOB")]),t("td",[t("DateField",{staticClass:"custom-controls",attrs:{value:e.getModel("DOB"),highlight:e.checkHighlight("DOB"),"is-readonly":e.isReadonly||!e.fieldVerification,"maximum-validation":!0},on:{input:function(t){return e.updateModel(t,"DOB")},onBlur:function(t){return e.autoSave("DOB")}}})],1),t("td",[e._v("Current Age")]),t("td",[t("NumberField",{staticClass:"custom-controls",attrs:{value:e.getModel("Current Age"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Current Age")},onBlur:function(t){return e.autoSave("Current Age")}}})],1),t("td",[e._v("Age at DOC")]),t("td",[t("NumberField",{staticClass:"custom-controls",attrs:{value:e.getModel("Age at Doc"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Age at Doc")},onBlur:function(t){return e.autoSave("Age at Doc")}}})],1)]),t("tr",[t("td",[e._v("Address")]),t("td",{attrs:{colspan:"5"}},[t("TextAreaField",{attrs:{value:e.getModel("Address"),highlight:e.checkHighlight("Address"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Address")},onBlur:function(t){return e.autoSave("Address")}}})],1)]),t("tr",[t("td",[e._v("City")]),t("td",[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("City"),highlight:e.checkHighlight("City"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"City")},onBlur:function(t){return e.autoSave("City")}}})],1),t("td",[e._v("Province")]),t("td",[t("SelectField",{staticClass:"custom-controls",attrs:{value:e.getModel("Province"),options:e.provinceList,highlight:e.checkHighlight("Province"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Province")},onBlur:function(t){return e.autoSave("Province")}}})],1),t("td",[e._v("Postal Code")]),t("td",[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Postal Code"),highlight:e.checkHighlight("Postal Code"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Postal Code")},onBlur:function(t){return e.autoSave("Postal Code")}}})],1)]),t("tr",[t("td",[e._v("Phone No.")]),t("td",[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Phone No."),highlight:e.checkHighlight("Phone No."),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Phone No.")},onBlur:function(t){return e.autoSave("Phone No.")}}})],1),t("td",[e._v("Email ID")]),t("td",[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Email ID"),highlight:e.checkHighlight("Email ID"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Email ID")},onBlur:function(t){return e.autoSave("Email ID")}}})],1),t("td",[e._v("Name of Deceased")]),t("td",[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Name of Deceased"),"is-readonly":e.isReadonly||!e.isNameOfDeceasedEditable||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Name of Deceased")},onBlur:function(t){return e.autoSave("Name of Deceased")}}})],1)])])]),"001f5CdkTDtjCDn3logTT"!==e.selectedProcess.activityId&&"szS6B-q1x9acpB83rP6jT"!==e.selectedProcess.activityId&&!e.isReadonly&&e.inbox?t("div",{staticClass:"col-12"},[e.isReadonly?e.fieldVerification?e._e():[t("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirmed",color:"green"}})]:[e.fieldVerification?[t("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirm",color:"orange"},on:{click:e.confirmCustomerInfo}})]:[t("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirmed",color:"green"}}),t("BaseButton",{staticClass:"custom-button q-mr-sm",staticStyle:{float:"right"},attrs:{label:"Edit",color:"orange"},on:{click:e.unConfirmCustomerInfo}})]]],2):e._e(),t("div",{staticClass:"header col-12",class:e.inbox?"":"q-mb-sm"},[e._v(" Loan Information ")]),t("table",{staticClass:"col-12 q-mb-sm loan-info"},[t("tbody",[t("tr",[t("td",[e._v("Group Policy")]),t("td",[e._v(e._s(e.getModel("Group Policy")||"-"))]),t("td",[e._v("Payment Frequency")]),t("td",[e._v(e._s(e.getModel("Payment Frequency")||"-"))])]),t("tr",[t("td",[e._v("Loan No.")]),t("td",[e._v(e._s(e.getModel("Loan No.")||"-"))]),t("td",[e._v("No. of Loan Payments")]),t("td",[e._v(" "+e._s(e.getModel("No. of Loan Payments")||"-")+" ")])]),t("tr",[t("td",[e._v("Loan Start Date")]),t("td",[e._v(e._s(e.getModel("Loan Start Date")||"-"))]),t("td",[e._v("Last Remitted Date")]),t("td",[e._v(e._s(e.getModel("Last Remitted Date")||"-"))])]),t("tr",[t("td",[e._v("Term")]),t("td",[e._v(e._s(e.getModel("Term")||"-"))]),t("td",[e._v("Cancellation Date")]),t("td",[e._v(e._s(e.getModel("Cancellation Date")||"-"))])]),t("tr",[t("td",[e._v("Loan End Date")]),t("td",[e._v(e._s(e.getModel("Loan End Date")||"-"))]),t("td",[e._v("Cancel Reason")]),t("td",[e._v(e._s(e.getModel("Cancel Reason")||"-"))])])])]),"001f5CdkTDtjCDn3logTT"!==e.selectedProcess.activityId&&"szS6B-q1x9acpB83rP6jT"!==e.selectedProcess.activityId&&!e.isReadonly&&e.inbox?t("div",{staticClass:"col-12"},[e.loanInfoVerify?e.loanInfoVerify?[t("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirmed",color:"green"}}),t("BaseButton",{staticClass:"custom-button q-mr-sm",staticStyle:{float:"right"},attrs:{label:"Edit",color:"orange"},on:{click:e.unConfirmLoanInfo}})]:e._e():[t("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirm",color:"orange"},on:{click:e.confirmLoanInfo}})]],2):e._e()]),t("div",{staticClass:"row",class:e.$q.screen.width>1200?"col-lg-6 col-md-6 col-sm-12":"col-lg-6 col-md-12 col-sm-12"},[t("div",{staticClass:"col-12 header q-mb-sm"},[e._v("Claim Information")]),t("div",{staticClass:"col-12 full-border q-pa-sm"},[t("table",{staticClass:"claim-info q-mb-sm table-content single-border"},[t("thead",[t("tr",[t("th",[e._v("Claim No.")]),t("th",[e._v("Reference No.")]),t("th",[e._v("Claim Date")]),t("th",[e._v("Claim Package Sent")])])]),t("tbody",[t("tr",[t("td",[e._v(e._s(e.getModel("Claim No.")||"-"))]),t("td",[e._v(e._s(e.getModel("Reference No.")||"-"))]),t("td",[t("DateField",{staticClass:"custom-controls",attrs:{value:e.getModel("Claim Date"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"Claim Date")},onBlur:function(t){return e.autoSave("Claim Date")}}})],1),t("td",[e._v(e._s(e.getModel("Claim Package Sent")||"-"))])])])]),t("table",{staticClass:"claim-info q-mb-sm table-content single-border"},[t("thead",[t("tr",[t("th",[e._v("Claim Received Date")]),t("th",[e._v("Processing Date")]),t("th",[e._v("Initials")]),t("th",[e._v("Language")])])]),t("tbody",[t("tr",[t("td",[e._v(e._s(e.getModel("Claim Received Date")||"-"))]),t("td",[e._v(e._s(e.getModel("Processing Date")||"-"))]),t("td",[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Initials"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"Initials")},onBlur:function(t){return e.autoSave("Initials")}}})],1),t("td",[t("SelectField",{staticClass:"custom-controls",attrs:{value:e.getModel("Language"),options:e.languageList,"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"Language")},onBlur:function(t){return e.autoSave("Language")}}})],1)])])]),t("table",{staticClass:"claim-info single-border"},[t("tbody",[t("tr",[t("td",[e._v("Benefit Claimed")]),t("td",{staticClass:"medium"},[t("SelectField",{staticClass:"custom-controls",attrs:{value:e.getModel("Benefit Claimed"),options:e._productList,"is-readonly":e.isReadonly||e.claimInfoVerify||!e.isChangeBenefitClaimed},on:{input:function(t){return e.updateModel(t,"Benefit Claimed")},onBlur:function(t){return e.autoSave("Benefit Claimed")}}})],1),t("td",[e._v("Loan Payment Amount")]),t("td",{staticClass:"medium"},[t("NumberField",{staticClass:"custom-controls",attrs:{value:e.getModel("Loan Payment Amount"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"Loan Payment Amount")},onBlur:function(t){return e.autoSave("Loan Payment Amount")}}})],1)]),t("tr",[t("td",[e._v("Reason/Cause")]),t("td",{staticClass:"medium"},[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Reason/Cause"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"Reason/Cause")},onBlur:function(t){return e.autoSave("Reason/Cause")}}})],1),t("td",[e._v("LPP Premium Amount")]),t("td",{staticClass:"medium"},[t("NumberField",{staticClass:"custom-controls",attrs:{value:e.getModel("LPP Premium Amount"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"LPP Premium Amount")},onBlur:function(t){return e.autoSave("LPP Premium Amount")}}})],1)]),t("tr",[t("td",[e._v("Claim Decision")]),t("td",{staticClass:"medium"},[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Claim Decision"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"Claim Decision")},onBlur:function(t){return e.autoSave("Claim Decision")}}})],1),t("td",[e._v("Principal Balance at DOC")]),t("td",{staticClass:"medium"},[t("NumberField",{staticClass:"custom-controls",attrs:{value:e.getModel("Principal Balance At Doc"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"Principal Balance At Doc")},onBlur:function(t){return e.autoSave("Principal Balance At Doc")}}})],1)]),t("tr",[t("td",[e._v("Decline Reason")]),t("td",{staticClass:"medium"},[t("SelectField",{staticClass:"custom-controls",attrs:{value:e.getModel("Decline Reason"),options:e.declineReasonList,"is-readonly":!0},on:{input:function(t){return e.updateModel(t,"Decline Reason")},onBlur:function(t){return e.autoSave("Decline Reason")}}})],1),t("td",[e._v("LumpSum Principal Balance")]),t("td",{staticClass:"medium"},[t("NumberField",{staticClass:"custom-controls",attrs:{value:e.getModel("LumpSum Principal Balance"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"LumpSum Principal Balance")},onBlur:function(t){return e.autoSave("LumpSum Principal Balance")}}})],1)]),t("tr",[t("td",{attrs:{colspan:"3"}},[t("MultipleChoiceField",{staticClass:"custom-controls no-border",attrs:{value:e.getModel("Authorization"),options:e.authorizationTypes,"options-per-line":3,"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){e.updateModel(t,"Authorization"),e.autoSave("Authorization")}}})],1),t("td",["001f5CdkTDtjCDn3logTT"!==e.selectedProcess.activityId&&"szS6B-q1x9acpB83rP6jT"!==e.selectedProcess.activityId&&!e.isReadonly&&e.inbox?[e.claimInfoVerify?e.claimInfoVerify?[t("BaseButton",{staticClass:"custom-button",staticStyle:{margin:"auto"},attrs:{label:"Confirmed",color:"green"}}),t("BaseButton",{staticClass:"custom-button",staticStyle:{margin:"auto","margin-top":"10px"},attrs:{label:"Edit",color:"orange"},on:{click:e.unConfirmClaimInfo}})]:e._e():[t("BaseButton",{staticClass:"custom-button",staticStyle:{margin:"auto"},attrs:{label:"Confirm",color:"orange"},on:{click:e.confirmClaimInfo}})]]:e._e()],2)])])])]),t("div",{staticClass:"col-12 q-mt-sm full-border q-pa-sm"},[t("div",{staticClass:"col header"},[e._v("Required Documents")]),t("MultipleChoiceField",{staticClass:"custom-controls q-mt-sm",attrs:{value:e.getModel("Required Documents"),options:e._documentCheckList,"options-per-line":3,"is-readonly":e.isReadonly},on:{input:function(t){e.updateModel(t,"Required Documents"),e.autoSave("Required Documents")}}})],1)])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col q-mt-sm"},[t("div",{staticClass:"q-pl-sm q-mb-sm"},[t("Tabs",{attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}})],1),"Claim Status"===e.tab?[e.claimStatusTotalItems?t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("Pagination",{staticClass:"custom-form-table",attrs:{"total-items":e.claimStatusTotalItems,"current-page":e.claimStatusCurrentPage,"items-per-page":e.claimStatusItemsPerPage},on:{"update:currentPage":function(t){e.claimStatusCurrentPage=t},"update:current-page":function(t){e.claimStatusCurrentPage=t},"update:itemsPerPage":function(t){e.claimStatusItemsPerPage=t},"update:items-per-page":function(t){e.claimStatusItemsPerPage=t},loadAll:e.loadAllClaimStatus}})],1),t("div",{staticClass:"col-auto q-mt-xs q-ml-sm"},[t("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:e.claimStatusSearchRow}})],1)]):e._e(),t("BaseScrollbar",{attrs:{height:"330px"}},[t("table",{staticClass:"tab-table table-content q-mt-sm",class:e.claimStatusTotalItems?"":"empty"},[t("thead",[t("tr",[e.inbox?t("th",{staticClass:"actions"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"add row",expression:"'add row'",arg:"top"}],staticClass:"q-ml-xs small",attrs:{color:"primary",icon:"eva-plus","no-border":"",size:"16px"},on:{click:e.addClaimStatus}})],1):e._e(),e._l(e.claimStatusColumns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])}))],2)]),t("tbody",e._l(e.claimStatusValues,(function(s,i){return t("tr",{key:"claimstatusrow"+i},[e.inbox?t("td",{staticClass:"actions"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"edit",expression:"'edit'",arg:"top"}],staticClass:"q-ml-xs small",attrs:{color:"secondary",icon:"mdi-square-edit-outline",size:"16px","is-flat":"","no-border":""},on:{click:function(t){return e.editClaimStatus(s)}}})],1):e._e(),e._l(e.claimStatusColumns,(function(i){return t("td",{key:i.id},[e._v(" "+e._s(s[i.name])+" ")])}))],2)})),0)])])]:"Daily Data Summary"===e.tab?[e.dailyDataStatusTotalItems?t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("Pagination",{staticClass:"custom-form-table",attrs:{"total-items":e.dailyDataStatusTotalItems,"current-page":e.dailyDataStatusCurrentPage,"items-per-page":e.dailyDataStatusItemsPerPage},on:{"update:currentPage":function(t){e.dailyDataStatusCurrentPage=t},"update:current-page":function(t){e.dailyDataStatusCurrentPage=t},"update:itemsPerPage":function(t){e.dailyDataStatusItemsPerPage=t},"update:items-per-page":function(t){e.dailyDataStatusItemsPerPage=t},loadAll:e.loadAllDailyDataStatus}})],1),t("div",{staticClass:"col-auto q-mt-xs q-ml-sm"},[t("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:e.dailyDataStatusSearchRow}})],1)]):e._e(),t("BaseScrollbar",{attrs:{height:"330px"}},[t("table",{staticClass:"tab-table q-mt-sm",class:e.dailyDataStatusTotalItems?"":"empty"},[t("thead",[t("tr",e._l(e.dailyDataStatusColumns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0)]),t("tbody",e._l(e.dailyDataStatusValues,(function(s,i){return t("tr",{key:"dailydatarow"+i},e._l(e.dailyDataStatusColumns,(function(i){return t("td",{key:i.id},[e._v(" "+e._s(s[i.name])+" ")])})),0)})),0)])])]:"Benefit Payment"===e.tab?[t("div",{attrs:{id:"paymentTable"}},[e.inbox?[e.hasLifeType||e.hasCIClaimsType?e._e():t("div",{staticClass:"row controls"},[t("div",{staticClass:"col"},["psyCrYXtKfcs-EJmrYIhv"===e.selectedProcess.activityId||"psyCrYXtKfcs-EJmrYIhv"===e.selectedProcess.activityId&&!e.isPaymentFound?[t("ValidationObserver",{ref:"form",staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("ValidationProvider",{staticClass:"col",attrs:{name:"Total Payment",rules:e.paymentValidationRules},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("NumberField",{staticClass:"q-pa-sm custom-controls",attrs:{label:"Total Payment","is-mandatory":"",error:s[0]},on:{input:e.updateLoanPaymentAmount},model:{value:e.totalPayment,callback:function(t){e.totalPayment=t},expression:"totalPayment"}})]}}],null,!1,452974274)})],1),e._e(),t("div",{staticClass:"col-auto"},[t("ValidationProvider",{staticClass:"col",attrs:{name:"Payment Frequency",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{staticClass:"q-pa-sm custom-controls",attrs:{label:"Payment Frequency","is-mandatory":"",options:e.benefitTypes,"is-clearable":!1,error:s[0]},model:{value:e.benefitType,callback:function(t){e.benefitType=t},expression:"benefitType"}})]}}],null,!1,4170057051)})],1),t("div",{staticClass:"col-auto"},[t("BaseButton",{staticClass:"payment-action custom-button q-ml-sm",attrs:{label:"Calculate"},on:{click:e.paymentCalculation}})],1)])]:e._e()],2),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"row"},["90xxPehjko0dNYRjbX5wm"===e.selectedProcess.activityId&&e.isPaymentFound&&e.hasOtherClaimsType?t("div",{staticClass:"col-auto"},[t("BaseButton",{staticClass:"payment-action q-mr-sm custom-button",attrs:{label:"Add Lumpsum Payment",color:"primary"},on:{click:e.addLumpsumRow}})],1):e._e(),"001f5CdkTDtjCDn3logTT"!==e.selectedProcess.activityId&&"szS6B-q1x9acpB83rP6jT"!==e.selectedProcess.activityId?[t("div",{staticClass:"col-auto"},[t("FormFieldLabel",{staticClass:"payment-action",attrs:{label:"Number of payments to approve"}})],1),t("div",{staticClass:"col-auto"},[t("ValidationProvider",{staticClass:"col",attrs:{name:"Number of payments",rules:{min_value:0,max_value:e.paymentTableValues.length}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("NumberField",{staticClass:"payment-action q-ml-sm custom-controls",attrs:{"is-clearable":!1,"is-readonly":!e.paymentTableValues.length,error:s[0]},model:{value:e.numberOfApprovePayment,callback:function(t){e.numberOfApprovePayment=t},expression:"numberOfApprovePayment"}})]}}],null,!1,2997542867)})],1),t("div",{staticClass:"col-auto"},[t("BaseButton",{staticClass:"payment-action q-ml-sm custom-button",attrs:{label:"Payment Approve",color:"secondary",disabled:!e.paymentTableValues.length},on:{click:e.paymentApprove}})],1),t("div",{staticClass:"col-auto"},[t("BaseButton",{staticClass:"payment-action q-ml-sm custom-button",attrs:{label:"Clear",color:"red",disabled:!e.paymentTableValues.length},on:{click:e.clearPaymentApprove}})],1)]:e._e()],2)])])]:e._e(),t("div",{staticClass:"col"},[t("BaseScrollbar",[t("table",{staticClass:"tab-table table-content q-mb-sm",class:0===e.paymentTableValues.length?"empty":""},[t("thead",[t("tr",[e._l(e.paymentTableColumns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),e.inbox&&"90xxPehjko0dNYRjbX5wm"===e.selectedProcess.activityId&&e.isPaymentFound&&!e.hasLifeType&&!e.hasCIClaimsType?t("th",{staticClass:"actions"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"add row",expression:"'add row'",arg:"top"}],staticClass:"q-ml-xs small",attrs:{color:"primary",icon:"eva-plus","no-border":"",size:"16px"},on:{click:e.addPaymentRow}})],1):e._e()],2)]),t("tbody",e._l(e.paymentTableValues,(function(s,i){return t("tr",{key:"paymentrow"+i},[e.inbox?[s["edit"]?e._l(e.paymentTableColumns,(function(a){return t("td",{key:a.id},["SINGLE_SELECT"===a.type?[t("SelectField",{attrs:{options:e.approvalTypes,"is-readonly":e.checkApprovalEdit(s)},on:{input:function(t){return e.updateApprovalDate(i)}},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"DATE"===a.type?[t("DateField",{attrs:{"minimum-validation":!0,"is-readonly":!0},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"NUMBER"===a.type?[t("NumberField",{attrs:{placeholder:"0.00"},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"SHORT_TEXT"===a.type?[t("TextField",{attrs:{"is-readonly":e.checkApprovalEdit(s)},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"CHECKBOX"===a.type?[t("CheckboxField",{staticClass:"custom-controls",attrs:{"is-disabled":e.checkApprovalEdit(s)},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:[e._t(a.name,(function(){return[e._v(" "+e._s(s[a.name])+" ")]}),{value:s[a.name],item:s})]],2)})):[e._l(e.paymentTableColumns,(function(a){return t("td",{key:a.id},["90xxPehjko0dNYRjbX5wm"===e.selectedProcess.activityId&&e.isPaymentFound&&""!==s[a.name]&&!s["delete"]?["approval"===a.name?["Approved"===s[a.name]?[t("span",{staticClass:"text-green",attrs:{name:a.name,value:s[a.name],item:s}},[e._v(" "+e._s(s[a.name])+" ")])]:[t("span",{staticClass:"text-red",attrs:{name:a.name,value:s[a.name],item:s}},[e._v(" "+e._s(s[a.name])+" ")])]]:"paymentDate"===a.name?[t("DateField",{attrs:{"minimum-validation":!0},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"CHECKBOX"===a.type?[t("CheckboxField",{staticClass:"custom-controls",attrs:{"is-disabled":e.checkApprovalEdit(s)},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:[e._t(a.name,(function(){return[e._v(" "+e._s(s[a.name])+" ")]}),{value:s[a.name],item:s})]]:["SINGLE_SELECT"===a.type?[t("SelectField",{attrs:{options:e.approvalTypes,"is-readonly":e.checkApprovalEdit(s)},on:{input:function(t){return e.updateApprovalDate(i)}},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"DATE"===a.type?[t("DateField",{attrs:{"minimum-validation":!0,"is-readonly":!0},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"baseAmount"===a.name&&s["delete"]?[t("NumberField",{attrs:{placeholder:"0.00",min:0,max:2e3},on:{input:function(t){return e.calcOtherColumns(i)}},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"SHORT_TEXT"===a.type?[t("TextField",{attrs:{"is-readonly":e.checkApprovalEdit(s)},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"CHECKBOX"===a.type?[t("CheckboxField",{staticClass:"custom-controls",attrs:{"is-disabled":e.checkApprovalEdit(s)},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:[e._t(a.name,(function(){return[e._v(" "+e._s(s[a.name])+" ")]}),{value:s[a.name],item:s})]]],2)})),e.inbox&&"90xxPehjko0dNYRjbX5wm"===e.selectedProcess.activityId&&e.isPaymentFound?t("td",{staticClass:"actions"},[s["delete"]?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"delete row",expression:"'delete row'"}],staticClass:"q-ml-xs small",attrs:{"is-flat":"",color:"red",icon:"eva-trash-outline","no-border":"",size:"16px"},on:{click:function(t){return e.removePaymentRow(i)}}}):e._e()],1):e._e()]]:e._l(e.paymentTableColumns,(function(i){return t("td",{key:i.id},["approval"===i.name?["Approved"===s[i.name]?[t("span",{staticClass:"text-green",attrs:{name:i.name,value:s[i.name],item:s}},[e._v(" "+e._s(s[i.name])+" ")])]:[t("span",{staticClass:"text-red",attrs:{name:i.name,value:s[i.name],item:s}},[e._v(" "+e._s(s[i.name])+" ")])]]:"paymentDate"===i.name?[t("DateField",{attrs:{"minimum-validation":!0,"is-readonly":""},model:{value:s[i.name],callback:function(t){e.$set(s,i.name,t)},expression:"item[column.name]"}})]:"CHECKBOX"===i.type?[t("CheckboxField",{staticClass:"custom-controls",attrs:{"is-disabled":!0},model:{value:s[i.name],callback:function(t){e.$set(s,i.name,t)},expression:"item[column.name]"}})]:[e._t(i.name,(function(){return[e._v(" "+e._s(s[i.name])+" ")]}),{value:s[i.name],item:s})]],2)}))],2)})),0)]),e.inbox&&e.paymentTableValues.length?t("BaseButton",{staticStyle:{float:"right"},attrs:{label:"Update Payments",color:"primary"},on:{click:e.updatePaymentTable}}):e._e()],1)],1)],2)]:"Payments"===e.tab?[e.paymentHistoryTotalItems?t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("Pagination",{staticClass:"custom-form-table",attrs:{"total-items":e.paymentHistoryTotalItems,"current-page":e.paymentHistoryCurrentPage,"items-per-page":e.paymentHistoryItemsPerPage},on:{"update:currentPage":function(t){e.paymentHistoryCurrentPage=t},"update:current-page":function(t){e.paymentHistoryCurrentPage=t},"update:itemsPerPage":function(t){e.paymentHistoryItemsPerPage=t},"update:items-per-page":function(t){e.paymentHistoryItemsPerPage=t},loadAll:e.loadAllPaymentHistory}})],1),t("div",{staticClass:"col-auto q-mt-xs q-ml-sm"},[t("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:e.paymentHistorySearchRow}})],1)]):e._e(),t("BaseScrollbar",{attrs:{height:"330px"}},[t("table",{staticClass:"tab-table q-mt-sm",class:e.paymentHistoryTotalItems?"":"empty"},[t("thead",[t("tr",e._l(e.paymentHistoryColumns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0)]),t("tbody",e._l(e.paymentHistoryValues,(function(s,i){return t("tr",{key:"paymenthistoryrow"+i},e._l(e.paymentHistoryColumns,(function(i){return t("td",{key:i.id},[e._v(" "+e._s(s[i.name])+" ")])})),0)})),0)])])]:e._e()],2)])])]),t("Modal",{attrs:{width:"30vw",height:"40vh","has-footer":""},on:{input:function(t){e.declineReasonModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Recommend to Decline")]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"declineModal"},[t("div",[t("ValidationProvider",{staticClass:"col",attrs:{name:"Decline Reason",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{staticClass:"field",attrs:{label:"Decline Reason","is-mandatory":"",options:e.declineReasonList,error:s[0]},model:{value:e.declineReason,callback:function(t){e.declineReason=t},expression:"declineReason"}})]}}])})],1)])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"Cancel"},on:{click:function(t){e.declineReasonModal=!1}}}),t("BaseButton",{attrs:{label:"Recommend to Decline",color:"primary"},on:{click:e.updateDeclineReason}})]},proxy:!0}]),model:{value:e.declineReasonModal,callback:function(t){e.declineReasonModal=t},expression:"declineReasonModal"}}),t("Modal",{attrs:{width:"60vw",height:"70vh","has-footer":""},on:{input:function(t){e.claimStatusModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v('"'+e._s(e.selectedProcess.requestNo)+'" Claim Status Entry')]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"claim-status",attrs:{id:"content-wrapper"}},[t("ValidationObserver",{ref:"claimStatusModal"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-4"},[t("ValidationProvider",{staticClass:"col",attrs:{name:"Claim Status",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{staticClass:"field",attrs:{label:"Claim Status","is-mandatory":"",options:e.claimStatusList,error:s[0]},model:{value:e.claimStatus,callback:function(t){e.claimStatus=t},expression:"claimStatus"}})]}}])})],1),t("div",{staticClass:"col-4"},[t("SelectField",{staticClass:"field",attrs:{label:"Note",options:e.csNoteList,"new-option":"","is-readonly":""},model:{value:e.csNote,callback:function(t){e.csNote=t},expression:"csNote"}})],1),t("div",{staticClass:"col-4"},[t("SelectField",{staticClass:"field",attrs:{label:"Claim Letter Sent",options:e.claimLetterSentList,"new-option":"","is-readonly":""},model:{value:e.claimLetterSent,callback:function(t){e.claimLetterSent=t},expression:"claimLetterSent"}})],1),t("div",{staticClass:"col-4"},[t("SelectField",{staticClass:"field",attrs:{label:"Mailing Type",options:e.mailingTypeList},model:{value:e.mailingType,callback:function(t){e.mailingType=t},expression:"mailingType"}})],1),t("div",{staticClass:"col-4"},[t("SelectField",{staticClass:"field",attrs:{label:"Lender Letter",options:e.lenderLetterList,"new-option":"","is-readonly":""},model:{value:e.lenderLetter,callback:function(t){e.lenderLetter=t},expression:"lenderLetter"}})],1),t("div",{staticClass:"col-4",staticStyle:{margin:"auto"}},[t("CheckboxField",{staticClass:"field",attrs:{label:"Internal Only"},model:{value:e.internalOnly,callback:function(t){e.internalOnly=t},expression:"internalOnly"}})],1),t("div",{staticClass:"col-12"},[t("TextAreaField",{staticClass:"field",attrs:{label:"Internal Notes"},model:{value:e.internalNotes,callback:function(t){e.internalNotes=t},expression:"internalNotes"}})],1)])])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"Cancel"},on:{click:function(t){e.claimStatusModal=!1}}}),t("BaseButton",{attrs:{label:Object.keys(e.claimStatusRow).length?"Update":"Add",color:"primary"},on:{click:e.saveClaimStatus}})]},proxy:!0}]),model:{value:e.claimStatusModal,callback:function(t){e.claimStatusModal=t},expression:"claimStatusModal"}})],1)},a=[],o=(s("caad"),s("14d9"),s("7bb1")),r=s("3445"),n=s("12b8"),l=s("b3d1"),c=s("53c1"),d=s("ad54"),u=s("6df3"),m=s("1e48"),h=s("869e"),p=s("7286"),f=s("6a70"),v=s("42fc"),y=s("0d5e"),b=s("1b0d"),g=s("b6d2"),w=s("be3f"),C=s("5c8a"),k={name:"CustomProcessForm",components:{ValidationObserver:o["a"],ValidationProvider:o["b"],FormFieldLabel:r["a"],SelectField:n["a"],TextField:l["a"],DateField:c["a"],NumberField:d["a"],TextAreaField:u["a"],MultipleChoiceField:m["a"],CheckboxField:h["a"],Tabs:p["a"],Modal:f["a"],Pagination:g["a"],ExpandableSearch:w["a"]},props:{formId:{type:String,default:"0"},panels:{type:Array,default:()=>[]},secondaryPanels:{type:Array,default:()=>[]},formModel:{type:Object,default:()=>{}},saveAction:{type:String,default:""},workflowFormModel:{type:Object,default:()=>{}},formFields:{type:Array,default:()=>[]},dataValidationValues:{type:Array,default:()=>[]},selectedProcess:{type:Object,required:!0},isReadonly:{type:Boolean,default:!1},checkList:{type:Array,default:()=>[]},formCheckList:{type:Boolean,default:!1},saveOnly:{type:Boolean,default:!1},inbox:{type:Boolean,default:!1},autoSaveModel:{type:Object,default:()=>{}}},data(){return{formWidth:"100%",claimantInfoList:[{id:this.$nano.id(),label:"Borrower",value:"Borrower",claimType:""},{id:this.$nano.id(),label:"Co-Borrower",value:"Co-Borrower",claimType:""},{id:this.$nano.id(),label:"Next of Kin",value:"Next of Kin",claimType:"Life"}],authorizationTypes:[{id:this.$nano.id(),label:"Claimant Submitted",value:"Claimant Submitted"},{id:this.$nano.id(),label:"Special Auth",value:"Special Auth"},{id:this.$nano.id(),label:"Goodwill Claim",value:"Goodwill Claim"},{id:this.$nano.id(),label:"Advance Receipt",value:"Advance Receipt"},{id:this.$nano.id(),label:"Lump Sum Eligibility Status",value:"Lump Sum Eligibility Status"},{id:this.$nano.id(),label:"Pandemic",value:"Pandemic"},{id:this.$nano.id(),label:"Return To Work",value:"Return To Work"},{id:this.$nano.id(),label:"Prior Loan Used",value:"Prior Loan Used"}],documentCheckList:[{id:this.$nano.id(),label:"Claimant's Statement",value:"Claimant's Statement",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Application to Enroll",value:"Application to Enroll",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Payment Schedule/History",value:"Payment Schedule or History",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Employer's Statement/ROE",value:"Employer's Statement Or ROE",for:["Critical Illness","Involuntary Unemployment","Sickness or Injury","Unpaid Family Leave","Disability"]},{id:this.$nano.id(),label:"Loan Agreement",value:"Loan Agreement",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Lender Claim Statement",value:"Lender Claim Statement",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Physician's Statement",value:"Physician's Statement",for:["Critical Illness","Life","Sickness or Injury","Disability"]},{id:this.$nano.id(),label:"Section 2B",value:"Section 2B",for:["Lifetime Milestone"]},{id:this.$nano.id(),label:"Supporting Documentation",value:"Supporting Documentation",for:["Lifetime Milestone"]}],tabs:[{id:this.$nano.id(),label:"Claim Status",value:"Claim Status"},{id:this.$nano.id(),label:"Daily Data Summary",value:"Daily Data Summary"},{id:this.$nano.id(),label:"Benefit Payment",value:"Benefit Payment"},{id:this.$nano.id(),label:"Payments",value:"Payments"}],tab:"Claim Status",totalPayment:0,lumpsumAmount:0,benefitType:"",benefitTypes:[{id:this.$nano.id(),label:"Monthly",value:"Monthly"},{id:this.$nano.id(),label:"Bi-weekly",value:"BiWeekly"},{id:this.$nano.id(),label:"Semi-monthly",value:"SemiMonthly"},{id:this.$nano.id(),label:"Weekly",value:"Weekly"}],numberOfApprovePayment:0,paymentTableColumns:[{id:this.$nano.id(),name:"paymentNumber",label:"Payment Number",type:"LABEL"},{id:this.$nano.id(),name:"baseAmount",label:"Payment Base Amount",type:"NUMBER"},{id:this.$nano.id(),name:"claimAmount",label:"Claim Amount (20% Increased)",type:"NUMBER"},{id:this.$nano.id(),name:"cumulativeTotal",label:"Cumulative Total",type:"NUMBER"},{id:this.$nano.id(),name:"approval",label:"Approval",type:"SINGLE_SELECT"},{id:this.$nano.id(),name:"approvedDate",label:"Approved Date",type:"DATE"},{id:this.$nano.id(),name:"paymentDate",label:"Payment Date",type:"DATE"},{id:this.$nano.id(),name:"approvedBy",label:"Approved By",type:"LABEL"},{id:this.$nano.id(),name:"notes",label:"Notes",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"goodWill",label:"Goodwill",type:"CHECKBOX"},{id:this.$nano.id(),name:"lppPlus",label:"LPP Plus",type:"CHECKBOX"},{id:this.$nano.id(),name:"preApprovedPmt",label:"Pre Approved Pmt",type:"CHECKBOX"},{id:this.$nano.id(),name:"psgCovered",label:"PSG Covered",type:"CHECKBOX"}],paymentTableValues:[],isPaymentFound:!1,approvalTypes:[{id:this.$nano.id(),label:"Approve",value:"Approved"},{id:this.$nano.id(),label:"Cancel",value:"Cancelled"}],cityList:[],provinceList:[],productList:[{id:this.$nano.id(),label:"Critical Illness",value:"Critical Illness"},{id:this.$nano.id(),label:"Disability",value:"Disability"},{id:this.$nano.id(),label:"Involuntary Unemployment",value:"Involuntary Unemployment"},{id:this.$nano.id(),label:"Life",value:"Life"},{id:this.$nano.id(),label:"Lifetime Milestone",value:"Lifetime Milestone"},{id:this.$nano.id(),label:"Sickness or Injury",value:"Sickness or Injury"},{id:this.$nano.id(),label:"Unpaid Family Leave",value:"Unpaid Family Leave"}],declineReasonList:[],declineReason:"",declineReasonModal:!1,loanInfoVerify:!1,claimInfoVerify:!1,languageList:[{id:this.$nano.id(),label:"EN",value:"EN"},{id:this.$nano.id(),label:"FR",value:"FR"}],isNameOfDeceasedEditable:!1,claimStatusColumns:[{id:this.$nano.id(),name:"ClaimStatus",label:"Claim Status"},{id:this.$nano.id(),name:"CSDate",label:"Date"},{id:this.$nano.id(),name:"CSNote",label:"Note"},{id:this.$nano.id(),name:"ClaimLetterSent",label:"Claim Letter Sent"},{id:this.$nano.id(),name:"AuthorizedBy",label:"Authorized By"},{id:this.$nano.id(),name:"MailingType",label:"Mailing Type"},{id:this.$nano.id(),name:"ModifiedBy",label:"Modified By"},{id:this.$nano.id(),name:"ModifiedDt",label:"Modified Date"},{id:this.$nano.id(),name:"LenderLetter",label:"Lender Letter"},{id:this.$nano.id(),name:"CreatedBy",label:"Created By"},{id:this.$nano.id(),name:"CreatedDt",label:"Created Date"},{id:this.$nano.id(),name:"InternalOnly",label:"Internal Only"},{id:this.$nano.id(),name:"InternalNotes",label:"Internal Notes"}],claimStatusValues:[],claimStatusValuesData:[],claimStatusTotalItems:0,claimStatusItemsPerPage:10,claimStatusCurrentPage:1,claimStatusRow:{},claimStatusModal:!1,claimStatusList:[],claimStatus:"",csDate:"",csNoteList:[],csNote:0,claimLetterSentList:[],claimLetterSent:0,mailingTypeList:[{id:this.$nano.id(),label:"Word Merged Letter",value:"WordmergedLetter"},{id:this.$nano.id(),label:"Email",value:"Email"}],mailingType:"",lenderLetterList:[],lenderLetter:"",internalOnly:!1,internalNotes:"",dailyDataStatusColumns:[{id:this.$nano.id(),name:"FileDate",label:"File Date"},{id:this.$nano.id(),name:"PolicyNumber",label:"Policy Number"},{id:this.$nano.id(),name:"Province",label:"Province"},{id:this.$nano.id(),name:"FirstName",label:"First Name"},{id:this.$nano.id(),name:"LastName",label:"Last Name"},{id:this.$nano.id(),name:"LoanKey",label:"Loan Key"},{id:this.$nano.id(),name:"PriorLoan",label:"Prior Loan"},{id:this.$nano.id(),name:"EffectiveDate",label:"Effective Date"},{id:this.$nano.id(),name:"CancellationDate",label:"Cancellation Date"},{id:this.$nano.id(),name:"LoanTerm",label:"Loan Term"},{id:this.$nano.id(),name:"PrincipalLent",label:"Principal Lent"},{id:this.$nano.id(),name:"Freq",label:"Freq"},{id:this.$nano.id(),name:"TotalObligation",label:"Total Obligation"},{id:this.$nano.id(),name:"FirstPayment",label:"First Payment"},{id:this.$nano.id(),name:"MinimumPrincipal",label:"Minimum Principal"},{id:this.$nano.id(),name:"MinimumInterest",label:"Minimum Interest"},{id:this.$nano.id(),name:"MinPIDue",label:"Min PI Due"},{id:this.$nano.id(),name:"LPPCharge",label:"LPP Charge"},{id:this.$nano.id(),name:"LPPCollected",label:"LPP Collected"},{id:this.$nano.id(),name:"LastPayment",label:"Last Payment"},{id:this.$nano.id(),name:"DefaultDate",label:"Default Date"},{id:this.$nano.id(),name:"ClearedPayments",label:"Cleared Payments"},{id:this.$nano.id(),name:"MissedPayments",label:"Missed Payments"},{id:this.$nano.id(),name:"PastDueAmount",label:"Past Due Amount"},{id:this.$nano.id(),name:"PastDueInterest",label:"Past Due Interest"},{id:this.$nano.id(),name:"PastDueInsuranceFee",label:"Past Due Insurance Fee"},{id:this.$nano.id(),name:"PastDuePrincipalAmount",label:"Past Due Principal Amount"},{id:this.$nano.id(),name:"PastDueNsfFee",label:"Past Due Nsf Fee"},{id:this.$nano.id(),name:"LoanBalance",label:"Loan Balance"},{id:this.$nano.id(),name:"PrincipalBalance",label:"Principal Balance"},{id:this.$nano.id(),name:"ExpectedMinPayment",label:"Expected Min Payment"}],dailyDataStatusValues:[],dailyDataStatusValuesData:[],dailyDataStatusTotalItems:0,dailyDataStatusItemsPerPage:10,dailyDataStatusCurrentPage:1,paymentHistoryColumns:[{id:this.$nano.id(),name:"StoreLoanNumber",label:"Store Loan Number"},{id:this.$nano.id(),name:"Premium",label:"Premium"},{id:this.$nano.id(),name:"PaymentDate",label:"Payment Date"},{id:this.$nano.id(),name:"TransactionType",label:"Transaction Type"},{id:this.$nano.id(),name:"Taxes",label:"Taxes"},{id:this.$nano.id(),name:"PaymentAmount",label:"Payment Amount"},{id:this.$nano.id(),name:"RemitDate",label:"Remit Date"}],paymentHistoryValues:[],paymentHistoryValuesData:[],paymentHistoryTotalItems:0,paymentHistoryItemsPerPage:10,paymentHistoryCurrentPage:1,clearPayment:!1,hasLifeType:!1,hasCIClaimsType:!1,hasLMUFLClaimsType:!1,hasOtherClaimsType:!1,isChangeBenefitClaimed:!1,hasSicknessClaimsChanged:!1}},computed:{isMaximized(){return"100%"===this.formWidth},fieldVerification(){let e=!1;if(this.dataValidationValues.length){let t=["First Name","Last Name","DOB","Address","City","Province","Postal Code","Phone No.","Email ID"];t.forEach(t=>{let s=this.dataValidationValues.find(e=>e.fieldName==t);s&&"Not Matched"!==s.status&&"Not Verified"!==s.status||(e=!0)})}else e=!0;return e},userInitials(){let e="";return this.$store.state.session.firstName&&(e+=this.$store.state.session.firstName[0].toUpperCase()),this.$store.state.session.lastName?e+=this.$store.state.session.lastName[0].toUpperCase():e+=this.$store.state.session.firstName[1],e},userNames(){let e;return this.$store.state.session.firstName&&(e=this.$store.state.session.firstName),this.$store.state.session.lastName&&(e+=" "+this.$store.state.session.lastName),e},_productList(){let e=this.formFields.find(e=>"Benefit Claimed"===e.label),t="";return e&&(t=this.formModel[e.value]),"Critical Illness"===t||"Sickness or Injury"===t?this.productList.filter(e=>"Critical Illness"===e.label||"Sickness or Injury"===e.label):this.productList},_documentCheckList(){let e=this.formFields.find(e=>"Benefit Claimed"===e.label),t="";return e&&(t=this.formModel[e.value]),this.documentCheckList.filter(e=>e.for.includes(t))},STLOCTypeFormula(){let e=this.formFields.find(e=>"Group Policy"===e.label),t="";e&&(t=this.formModel[e.value]);let s=t.split("-");return!(!s.length||("ST001"!==s[0]||"MM01"===s[1])&&"LOC001"!==s[0])},ENHTypeFormula(){let e=this.formFields.find(e=>"Group Policy"===e.label),t="";e&&(t=this.formModel[e.value]);let s=t.split("-");return!(!s.length||"ENH001"!==s[0])},mobileFinanceFormula(){let e=this.formFields.find(e=>"Group Policy"===e.label),t="";e&&(t=this.formModel[e.value]);let s=t.split("-");return!(!s.length||"CPL001M"!==s[0])},paymentValidationRules(){const e={required:!0,min_value:1};return this.STLOCTypeFormula&&!this.hasLMUFLClaimsType?e.max_value=4e3:this.STLOCTypeFormula&&this.hasLMUFLClaimsType?e.max_value=2e3:this.ENHTypeFormula&&this.hasOtherClaimsType&&"Monthly"===this.getModel("Payment Frequency")?e.max_value=1e3:this.mobileFinanceFormula&&this.hasOtherClaimsType&&"Monthly"===this.getModel("Payment Frequency")?e.max_value=1250:(this.ENHTypeFormula||this.mobileFinanceFormula)&&(e.max_value=1e3),e},moneyMartFormula(){let e=this.formFields.find(e=>"Group Policy"===e.label),t="";e&&(t=this.formModel[e.value]);let s=t.split("-");return!(!s.length||"ST001"!==s[0]||"MM01"!==s[1])}},watch:{saveAction:{immediate:!0,async handler(){if(this.saveAction){if("Save"===this.saveAction||"Force Close"===this.saveAction)return void this.$emit("update:workflowFormModel",this.formModel);if("psyCrYXtKfcs-EJmrYIhv"===this.selectedProcess.activityId&&"Recommend to Approve"==this.saveAction){if(this.fieldVerification||!this.loanInfoVerify||!this.claimInfoVerify)return this.$alert.warning("Verification Required"),void this.$emit("update:saveAction","");this.updateModel(this.$day.newDate(),"Processing Date"),this.updateModel("Recommend to Approve","Claim Decision")}else if("psyCrYXtKfcs-EJmrYIhv"===this.selectedProcess.activityId&&"Recommend to Decline"==this.saveAction){if(!this.getModel("Decline Reason"))return this.declineReasonModal=!0,void this.$emit("update:saveAction","");this.updateModel(this.$day.newDate(),"Processing Date"),this.updateModel("Recommend to Decline","Claim Decision")}else if("k4-junYNP5tico7rUVJY_"===this.selectedProcess.activityId||"pyEp-anz7DIWhvoQLf6oC"===this.selectedProcess.activityId){let e=this.paymentTableValues.filter(e=>e.approval);if(console.log(e),!e.length)return this.$alert.warning("Should be approve payment"),void this.$emit("update:saveAction","")}this.$emit("update:workflowFormModel",this.formModel)}}},dataValidationValues:{deep:!0,immediate:!0,handler(){if(this.loanInfoVerify=!1,this.claimInfoVerify=!1,this.dataValidationValues.length){let e=this.dataValidationValues.find(e=>"Loan Info"===e.fieldName);e&&(this.loanInfoVerify="Verified"===e.status);let t=this.dataValidationValues.find(e=>"Claim Info"===e.fieldName);t&&(this.claimInfoVerify="Verified"===t.status)}}},selectedProcess:{immediate:!0,deep:!0,handler(){this.selectedProcess.processId&&(this.isChangeBenefitClaimed=!1,this.clearPayment=!1,this.getPaymentTable(),this.getClaimStatus(),this.getDailyDataStatus(),this.getPaymentHistory(),this.checkDocument())}},formCheckList:{immediate:!0,deep:!0,handler(){if(this.formCheckList){let e=location.origin;("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://localhost:8080"===e||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&this.checkList.length&&(this.documentValidation(),this.$emit("update:formCheckList",!1))}}},formModel:{immediate:!0,handler(){this.formModel&&(this.cloneFormModel=Object(C["a"])(this.formModel),this.getCalculateValidation(this.getModel("Benefit Claimed")))}},moneyMartFormula:{immediate:!0,handler(){this.moneyMartFormula?this.paymentTableColumns.forEach(e=>{"Claim Amount (20% Increased)"!==e.label||(e.label="Benefit Enhancement")}):this.paymentTableColumns.forEach(e=>{"Benefit Enhancement"!==e.label||(e.label="Claim Amount (20% Increased)")})}},hasSicknessClaimsChanged:{handler(){if(this.isPaymentFound&&this.hasSicknessClaimsChanged){if(this.paymentTableValues.length){let e=this.paymentTableValues[0];this.paymentTableValues=[],e&&this.paymentTableValues.push(e)}let e={paymentId:0,paymentNumber:this.paymentTableValues.length+1,baseAmount:"",claimAmount:0,cumulativeTotal:0,approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType,delete:!0};this.paymentTableValues.push(e)}else if(!this.isPaymentFound&&this.hasSicknessClaimsChanged){let e={paymentId:0,paymentNumber:1,baseAmount:"",claimAmount:0,cumulativeTotal:0,approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType,delete:!0};if(this.paymentTableValues.length){let t=this.paymentTableValues[0];this.paymentTableValues=[],this.paymentTableValues.push(t),this.paymentTableValues.push(e)}else this.paymentTableValues=[],this.paymentTableValues.push(e)}}},hasCIClaimsType:{immediate:!0,handler(){this.hasCIClaimsType&&(this.isPaymentFound||this.getLifeTypePaymentTable())}},hasLifeType:{immediate:!0,handler(){this.hasLifeType&&(this.isPaymentFound||this.getLifeTypePaymentTable())}}},created(){this.getProvinceList(),this.getDeclineReasonList(),this.getClaimStatusMaster(6)},mounted(){this.$watch(e=>[e.claimStatusCurrentPage,e.claimStatusItemsPerPage],()=>this.getClaimStatus(),{deep:!0,immediate:!0}),this.$watch(e=>[e.dailyDataStatusCurrentPage,e.dailyDataStatusItemsPerPage],()=>this.getDailyDataStatus(),{deep:!0,immediate:!0}),this.$watch(e=>[e.paymentHistoryCurrentPage,e.paymentHistoryItemsPerPage],()=>this.getPaymentHistory(),{deep:!0,immediate:!0})},methods:{getCalculateValidation(e){"Life"===e?(this.hasLifeType=!0,this.hasCIClaimsType=!1,this.hasLMUFLClaimsType=!1,this.hasOtherClaimsType=!1):"Critical Illness"===e?(this.hasCIClaimsType=!0,this.hasLifeType=!1,this.hasLMUFLClaimsType=!1,this.hasOtherClaimsType=!1):"Lifetime Milestone"===e||"Unpaid Family Leave"===e?(this.hasLMUFLClaimsType=!0,this.hasCIClaimsType=!1,this.hasLifeType=!1,this.hasOtherClaimsType=!1):(this.hasOtherClaimsType=!0,this.hasLifeType=!1,this.hasCIClaimsType=!1,this.hasLMUFLClaimsType=!1)},getModel(e){let t=this.formFields.find(t=>t.label===e);if(t){if("Benefit Claimed"===e)"Critical Illness"===this.formModel[t.value]||"Sickness or Injury"===this.formModel[t.value]?this.isChangeBenefitClaimed=!0:this.isChangeBenefitClaimed=!1;else if("Current Age"===e){let e=this.formFields.find(e=>"DOB"===e.label);e&&this.formModel[e.value]&&(this.formModel[t.value]=this.calculateAge(this.formModel[e.value]))}return"MULTIPLE_CHOICE"===t.type?this.formModel[t.value]?this.formModel[t.value]:[]:"DATE"===t.type?this.$day.parseDate(this.formModel[t.value]):this.formModel[t.value]}},updateModel(e,t){"Sickness or Injury"===this.getModel(t)?"Critical Illness"===e&&(this.hasSicknessClaimsChanged=!0):"Critical Illness"===this.getModel(t)&&"Sickness or Injury"===e&&(this.isPaymentFound=!1,this.hasSicknessClaimsChanged=!1,this.paymentTableValues=[]);let s=this.formFields.find(e=>e.label===t);if(s&&(this.formModel[s.value]=e),"Claimant Info"===t)"Next of Kin"===e?this.isNameOfDeceasedEditable=!0:(this.isNameOfDeceasedEditable=!1,this.getContractData(e));else if("DOB"===t){let t=this.formFields.find(e=>"Current Age"===e.label);t&&(this.formModel[t.value]=this.calculateAge(e))}else if("Loan Payment Amount"===t)this.totalPayment=e,this.benefitType&&this.paymentCalculation();else if("Claim Date"===t){let t=this.formFields.find(e=>"Age at Doc"===e.label),s=this.formFields.find(e=>"Claim Date"===e.label);t&&this.formModel[s.value]&&(this.formModel[t.value]=this.calculateAgeAtDoc(e,this.$day.parseDate(this.formModel[s.value])))}else"Benefit Claimed"===t&&(this.getCalculateValidation(e),this.checkDocument())},updateLoanPaymentAmount(e){this.updateModel(e,"Loan Payment Amount")},checkHighlight(e){if(this.dataValidationValues.length){var t;let s=null===(t=this.dataValidationValues.find(t=>t.fieldName==e))||void 0===t?void 0:t.status;if("Matched"===s||"Verified"===s)return"green";if(""===s||"Not Verified"===s||"Partially Matched"===s)return"orange";if("Not Matched"===s)return"red"}return""},calculateAge(e){if(!e)return;const t=new Date;if(new Date(e)>t)return"";const s=t-new Date(e),i=Math.floor(s/864e5);return Math.floor(i/365.25)},calculateAgeAtDoc(e,t){if(!e)return;if(new Date(e)>new Date(t))return"";const s=new Date(t)-new Date(e),i=Math.floor(s/864e5);return Math.floor(i/365.25)},checkDocument(){let e=this.checkList.filter(e=>(e.conditions&&e.conditions.length?(e.required=!1,e.conditions.forEach(t=>{var s;if("ANY"===e.groupLogic&&e.required)return;let i=(null===(s=this.formFields.find(e=>e.value===t.name))||void 0===s?void 0:s.type)||"",a=t.value,o=this.formModel[t.name];switch("NUMBER"===i&&(a=Number(a),o=Number(o)),t.logic){case"IS_EQUALS_TO":e.required=o===a;break;case"IS_NOT_EQUALS_TO":e.required=o!==a;break;case"CONTAINS":o.indexOf(a)>-1?e.required=!0:e.required=!1;break;case"IS_GREATER_THAN":e.required=o>a;break;case"IS_GREATER_THAN_OR_EQUALS_TO":e.required=o>=a;break;case"IS_LESSER_THAN":e.required=o<a;break;case"IS_LESSER_THAN_OR_EQUALS_TO":e.required=o<=a;break}}),e.required||e.visible?e.show=!0:e.show=!1):e.show=!0,e));this.$emit("update:checkList",e)},documentValidation(){let e=this.formFields.find(e=>"Required Documents"===e.label);if(e){"string"===typeof this.formModel[e.value]&&(this.formModel[e.value]=[]);let t=this.checkList.filter(e=>e.attach);t.length&&t.forEach(t=>{-1===this.formModel[e.value].indexOf(t.name)&&this.formModel[e.value].push(t.name)}),this.autoSave("Required Documents")}},autoSave(e){let t=location.origin;if(("https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t||"http://localhost:80801"===t)&&!this.saveOnly){let t=this.formFields.find(t=>t.label===e);if(t){let e={[t.value]:this.formModel[t.value]};this.$emit("update:autoSaveModel",e)}console.log(e),this.formModel[t.value]!=this.cloneFormModel[t.value]&&(this.$emit("update:saveOnly",!0),this.$emit("update:saveAction","Save"),this.cloneFormModel=Object(C["a"])(this.formModel))}},async updateDeclineReason(){const e=await this.$refs.declineModal.validate();e&&(this.declineReasonModal=!1,this.updateModel(this.declineReason,"Decline Reason"),this.updateModel("Recommend to Decline","Claim Decision"),this.$emit("update:workflowFormModel",this.formModel),this.$emit("update:saveAction","Recommend to Decline"))},async getCityList(){this.cityList=[];let e=this.formFields.find(e=>"City"===e.label);if(e)try{const t=await y["b"].post(`/form/${this.formId}/uniqueColumnValues`,JSON.stringify({column:e.value,keyword:"",rowFrom:0,rowCount:0})),{status:s,data:i}=t;if(200!==s)throw t;const a=JSON.parse(i);a.length&&(this.cityList=a.map(e=>({id:this.$nano.id(),label:e,value:e})));let o=this.cityList.find(t=>t.label===this.formModel[e.value]);o||this.cityList.push({id:this.$nano.id(),label:this.formModel[e.value],value:this.formModel[e.value]})}catch(t){console.error(t),this.$alert.error("Error fetching options")}},async getProvinceList(){this.provinceList=[];let e=this.formFields.find(e=>"Province"===e.label);if(e)try{const t=await y["b"].post(`/form/${this.formId}/uniqueColumnValues`,JSON.stringify({column:e.value,keyword:"",rowFrom:0,rowCount:0})),{status:s,data:i}=t;if(200!==s)throw t;const a=JSON.parse(i);a.length&&(this.provinceList=a.map(e=>({id:this.$nano.id(),label:e,value:e})));let o=this.provinceList.find(t=>t.label===this.formModel[e.value]);o||this.provinceList.push({id:this.$nano.id(),label:this.formModel[e.value],value:this.formModel[e.value]})}catch(t){console.error(t),this.$alert.error("Error fetching options")}},async getDeclineReasonList(){this.declineReasonList=[];const{error:e,payload:t}=await b["g"].getFormEntries(5,{mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[],itemsPerPage:0,currentPage:0});if(e)return void this.$alert.error(e);const{data:s}=t;this.declineReasonList=s[0].value.map(e=>({id:e.itemid,label:`${e["_siZd2ju1yrpaAcCiiJ8X"]} - ${e["xvC46pmC5uL77kIpjJ2p-"]}`,value:`${e["_siZd2ju1yrpaAcCiiJ8X"]} - ${e["xvC46pmC5uL77kIpjJ2p-"]}`}))},async getDataValidation(){const{error:e,payload:t}=await b["d"].armgroupMLValidation({filterBy:[{filters:[{criteria:"processId",condition:"IS_EQUALS_TO",value:this.selectedProcess.processId}],groupCondition:""}],mode:"BROWSE"});e?this.$alert.error(e):t.length?this.$emit("updateDataValidationValues",t):this.$emit("updateDataValidationValues",[])},async confirmCustomerInfo(){let e=["First Name","Last Name","DOB","Address","City","Province","Postal Code","Phone No.","Email ID"],t=[],s=[];if(e.forEach(e=>{let i=this.dataValidationValues.find(t=>t.fieldName==e);i?(i.formValue=this.getModel(e),i.status="Not Matched"===i.status||"Not Verified"===i.status?"Verified":i.status,s.push(i)):t.push({processId:this.selectedProcess.processId,fieldName:e,formValue:this.getModel(e),status:"Verified"})}),s.length){const{error:e}=await b["d"].updateArmgroupMLValidation(s);if(e)return void this.$alert.error(e)}if(t.length){const{error:e}=await b["d"].insertArmgroupMLValidation(t);if(e)return void this.$alert.error(e)}this.getDataValidation()},async unConfirmCustomerInfo(){let e=["First Name","Last Name","DOB","Address","City","Province","Postal Code","Phone No.","Email ID"];if(this.dataValidationValues.length){e.forEach(e=>{let t=this.dataValidationValues.find(t=>t.fieldName==e);t&&(t.formValue=this.getModel(e),t.status="Verified"===t.status?"Not Verified":t.status)});const{error:t}=await b["d"].updateArmgroupMLValidation(this.dataValidationValues);if(t)return void this.$alert.error(t)}},async confirmLoanInfo(){this.loanInfoVerify=!0;let e=[],t=this.dataValidationValues.find(e=>"Loan Info"==e.fieldName);if(t?(t.formValue="Checked",t.status="Not Matched"===t.status||"Not Verified"===t.status?"Verified":t.status,e.push(t)):e=[{processId:this.selectedProcess.processId,fieldName:"Loan Info",formValue:"Checked",status:"Verified"}],e[0].id){const{error:t}=await b["d"].updateArmgroupMLValidation(e);if(t)return void this.$alert.error(t)}else{const{error:t}=await b["d"].insertArmgroupMLValidation(e);if(t)return void this.$alert.error(t)}this.getDataValidation()},async unConfirmLoanInfo(){this.loanInfoVerify=!1;let e=[],t=this.dataValidationValues.find(e=>"Loan Info"==e.fieldName);t&&(t.formValue="",t.status="Not Verified",e.push(t));const{error:s}=await b["d"].updateArmgroupMLValidation(e);s&&this.$alert.error(s)},async confirmClaimInfo(){this.claimInfoVerify=!0;let e=[],t=this.dataValidationValues.find(e=>"Claim Info"==e.fieldName);if(t?(t.formValue="Checked",t.status="Not Matched"===t.status||"Not Verified"===t.status?"Verified":t.status,e.push(t)):e=[{processId:this.selectedProcess.processId,fieldName:"Claim Info",formValue:"Checked",status:"Verified"}],e[0].id){const{error:t}=await b["d"].updateArmgroupMLValidation(e);if(t)return void this.$alert.error(t)}else{const{error:t}=await b["d"].insertArmgroupMLValidation(e);if(t)return void this.$alert.error(t)}this.getDataValidation()},async unConfirmClaimInfo(){this.claimInfoVerify=!1;let e=[],t=this.dataValidationValues.find(e=>"Claim Info"==e.fieldName);t&&(t.formValue="",t.status="Not Verified",e.push(t));const{error:s}=await b["d"].updateArmgroupMLValidation(e);s&&this.$alert.error(s)},export_Data(){if(this.paymentTableValues.length){let e=[];e=this.paymentTableValues.map(e=>({"Payment Number":e.paymentNumber,"Base Amount":e.baseAmount,"Claim Amount":e.claimAmount,"Cumulative Total":e.cumulativeTotal,Approval:e.approval,"Approved Date":e.approvedDate,"Payment Date":e.paymentDate,"Payment Frequency":e.benefitType})),Object(v["a"])(e)}},paymentApprove(){if(this.numberOfApprovePayment>0)if(this.numberOfApprovePayment>this.paymentTableValues.length)this.$alert.warning("Approved payment should be less than "+this.paymentTableValues.length);else if(this.isPaymentFound){let e=this.paymentTableValues.filter(e=>"Approved"!==e.approval);e.length&&e.forEach((e,t)=>{if(t<this.numberOfApprovePayment){e.approval="Approved";let s=0;e.approvedDate=this.$day.addDate(this.$day.newDate(),t*s),e.paymentDate=this.$day.addDate(this.$day.newDate(),t*s+1),e.approvedBy=this.userInitials}else e.approval="",e.approvedDate="",e.paymentDate="",e.approvedBy=""})}else this.paymentTableValues.forEach((e,t)=>{if(t<this.numberOfApprovePayment){e.approval="Approved";let s=0;e.approvedDate=this.$day.addDate(this.$day.newDate(),t*s),e.paymentDate=this.$day.addDate(this.$day.newDate(),t*s+1),e.approvedBy=this.userInitials}else e.approval="",e.approvedDate="",e.paymentDate="",e.approvedBy=""});else this.$alert.warning("Specify the valid number")},clearPaymentApprove(){this.numberOfApprovePayment=0,this.paymentTableValues.forEach(e=>{e.approval="",e.approvedDate="",e.paymentDate="",e.approvedBy=""})},checkApprovalEdit(e){return!!e.approvedDate&&this.$day.newDate()!==e.approvedDate},updateApprovalDate(e){if("Approved"===this.paymentTableValues[e].approval){this.paymentTableValues[e].approvedDate=this.$day.newDate();let t=new Date;t.setDate(t.getDate()+1);let s=t.getMonth()+1;s<10&&(s="0"+s);let i=t.getDate();i<10&&(i="0"+i),this.paymentTableValues[e].paymentDate=`${t.getFullYear()}-${s}-${i}`,this.paymentTableValues[e].approvedBy=this.userInitials}else this.paymentTableValues[e].approvedDate="",this.paymentTableValues[e].paymentDate="",this.paymentTableValues[e].approvedBy=""},addLumpsumRow(){if(!this.paymentTableValues[this.paymentTableValues.length-1].lumpsumRow){let e=0;4e3===Number(this.paymentTableValues[this.paymentTableValues.length-1].cumulativeTotal)&&(e=4e3.toFixed(2));const t={paymentId:0,paymentNumber:this.paymentTableValues.length+1,baseAmount:"",claimAmount:0,cumulativeTotal:e,approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType,lumpsumRow:!0,delete:!0};this.paymentTableValues.push(t)}},addPaymentRow(){let e=0;if(this.paymentTableValues.length&&(e=Number(this.paymentTableValues[this.paymentTableValues.length-1].cumulativeTotal)),4e3!==e||this.hasCIClaimsType)if(15e3===e&&this.hasCIClaimsType)this.$alert.warning("Already maximum amount 15000 reached");else{const e={paymentId:0,paymentNumber:this.paymentTableValues.length+1,baseAmount:"",claimAmount:0,cumulativeTotal:0,approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType,delete:!0};this.paymentTableValues.push(e)}else this.$alert.warning("Already maximum amount 4000 reached")},removePaymentRow(e){this.paymentTableValues.splice(e,1)},calcOtherColumns(e){let t=0,s=this.paymentTableValues[e].baseAmount;if(this.hasOtherClaimsType){if(this.paymentTableValues[e].lumpsumRow){if(s>2e3)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Lumpsum Amount shouldn't exceed $2000");if(this.paymentTableValues[e].claimAmount=(0).toFixed(2),t=Number(this.paymentTableValues[this.paymentTableValues.length-2].cumulativeTotal),4e3===t&&this.paymentTableValues[e].baseAmount>0)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=4e3.toFixed(2),void this.$alert.warning("Cumulative total shouldn't exceed $4000");if(t+=s,t>4e3)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Cumulative total shouldn't exceed $4000")}else{let i=s+.2*s;if(this.paymentTableValues[e].claimAmount=i.toFixed(2),t=i+Number(this.paymentTableValues[e-1].cumulativeTotal),this.STLOCTypeFormula&&t>4e3)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].claimAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),t=0,void this.$alert.warning("Cumulative total shouldn't exceed $4000")}t>0&&s&&(this.paymentTableValues[e].cumulativeTotal=t.toFixed(2))}else if(this.hasLifeType){if(this.ENHTypeFormula){if(s>5e4)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Base Amount shouldn't exceed $50000")}else if(s>15e3)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Base Amount shouldn't exceed $15000");this.paymentTableValues[e].cumulativeTotal=this.paymentTableValues[e].baseAmount.toFixed(2)}else if(this.hasCIClaimsType){let t=0;if(e&&(t=Number(this.paymentTableValues[e-1].cumulativeTotal)+s),s<=15e3&&e)return void(this.paymentTableValues[e].cumulativeTotal=this.paymentTableValues[e].baseAmount.toFixed(2));if(s>15e3&&!e)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Base Amount shouldn't exceed $15000");if(t>15e3)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Base Amount shouldn't exceed $15000");this.paymentTableValues[e].cumulativeTotal=this.paymentTableValues[e].baseAmount.toFixed(2)}},calcOtherColumns1(e){let t=0,s=this.paymentTableValues[e].baseAmount;if(this.paymentTableValues[e].lumpsumRow){if(s>2e3)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Lumpsum Amount shouldn't exceed $2000");if(this.paymentTableValues[e].claimAmount=(0).toFixed(2),t=Number(this.paymentTableValues[this.paymentTableValues.length-2].cumulativeTotal),4e3===t&&this.paymentTableValues[e].baseAmount>0)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=4e3.toFixed(2),void this.$alert.warning("Cumulative total shouldn't exceed $4000");if(t+=s,t>4e3)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Cumulative total shouldn't exceed $4000")}else{let i=s+.2*s;this.paymentTableValues[e].claimAmount=i.toFixed(2),this.paymentTableValues.forEach(e=>{t+=Number(e.claimAmount)})}this.paymentTableValues[e].cumulativeTotal=t.toFixed(2)},claimStatusSearchRow(e){this.claimStatusValues=e?this.claimStatusValuesData.filter(t=>{for(let s in t){let i=this.claimStatusColumns.findIndex(e=>e.name===s);if(i>=0&&t[s]&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return t}}):this.claimStatusValuesData},loadAllClaimStatus(){this.claimStatusItemsPerPage=this.claimStatusTotalItems,1===this.claimStatusCurrentPage?this.getClaimStatus():this.claimStatusCurrentPage=1},dailyDataStatusSearchRow(e){this.dailyDataStatusValues=e?this.dailyDataStatusValuesData.filter(t=>{for(let s in t){let i=this.dailyDataStatusColumns.findIndex(e=>e.name===s);if(i>=0&&t[s]&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return t}}):this.dailyDataStatusValuesData},loadAllDailyDataStatus(){this.dailyDataStatusItemsPerPage=this.dailyDataStatusTotalItems,1===this.dailyDataStatusCurrentPage?this.getDailyDataStatus():this.dailyDataStatusCurrentPage=1},paymentHistorySearchRow(e){this.paymentHistoryValues=e?this.paymentHistoryValuesData.filter(t=>{for(let s in t){let i=this.paymentHistoryColumns.findIndex(e=>e.name===s);if(i>=0&&t[s]&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return t}}):this.payymentHistoryValuesData},loadAllPaymentHistory(){this.paymentHistoryItemsPerPage=this.paymentHistoryTotalItems,1===this.paymentHistoryCurrentPage?this.getPaymentHistory():this.payemntHistoryCurrentPage=1},addClaimStatus(){this.claimStatusRow={},this.claimStatus="",this.csDate="",this.csNote=0,this.claimLetterSent=0,this.mailingType="",this.lenderLetter="",this.internalOnly=!1,this.internalNotes="",this.claimStatusModal=!0},editClaimStatus(e){this.claimStatusRow=this.claimStatusValues.find(t=>t.ClaimStatusID===e.ClaimStatusID),this.claimStatusRow&&(this.claimStatus=this.claimStatusRow.ClaimStatus,this.csNote=this.claimStatusRow.CSNote,this.claimLetterSent=this.claimStatusRow.ClaimLetterSent,this.mailingType=this.claimStatusRow.MailingType,this.lenderLetter=this.claimStatusRow.lenderLetter,this.internalOnly=Boolean(this.claimStatusRow.InternalOnly),this.internalNotes=this.claimStatusRow.InternalNotes),this.claimStatusModal=!0},async getClaimStatusMaster(e){this.claimStatusList=[],this.$store.commit("showLoadingBar");const{error:t,payload:s}=await b["g"].getFormEntries(e,{mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[],itemsPerPage:0,currentPage:0});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);const{data:i}=s;this.claimStatusList=i[0].value.map(e=>({id:e.itemid,label:e["dKY2zhKPS4-hQy1I6yVSV"],value:e["dKY2zhKPS4-hQy1I6yVSV"]}))},async paymentCalculation(){this.numberOfApprovePayment=0;const e=await this.$refs.form.validate();if(!e)return;this.isPaymentFound&&(this.clearPayment=!0),this.paymentTableValues=[];let t=0,s=0;if(this.benefitType)switch(this.benefitType){case"Monthly":s=6;break;case"BiWeekly":case"SemiMonthly":s=12;break;case"Weekly":s=24;break}for(let i=1;i<=s;i++){if(this.hasLMUFLClaimsType&&i>3)return;let e=this.totalPayment,s=0,a=0;if(this.STLOCTypeFormula?(this.hasOtherClaimsType?a=4e3:this.hasLMUFLClaimsType&&(a=2e3),s=e+.2*e):this.ENHTypeFormula?this.hasOtherClaimsType?a=6e3:this.hasLMUFLClaimsType&&(a=2e3):this.mobileFinanceFormula?this.hasOtherClaimsType?a=7500:this.hasLMUFLClaimsType&&(a=2e3):this.moneyMartFormula&&this.hasLMUFLClaimsType&&(a=2e3),!this.moneyMartFormula&&t+s>a)return void this.paymentTableValues.push({paymentId:0,paymentNumber:i,baseAmount:(a-t).toFixed(2),claimAmount:(0).toFixed(2),cumulativeTotal:a.toFixed(2),approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType});if(this.STLOCTypeFormula)t+=s;else if(this.ENHTypeFormula)t+=e;else if(this.mobileFinanceFormula)t+=e;else if(this.moneyMartFormula){let i=this.getModel("Principal Balance At Doc"),a=0,o=0;if(this.hasOtherClaimsType&&i)if("BiWeekly"===this.benefitType||"SemiMonthly"===this.benefitType){let e=50*i/100;a=e.toFixed(2)}else if("Weekly"===this.benefitType){let e=25*i/100;a=e.toFixed(2)}else"Monthly"===this.benefitType&&(a=i);o=a/24,s=o,t+=o+e}if(this.paymentTableValues.push({paymentId:0,paymentNumber:i,baseAmount:e.toFixed(2),claimAmount:s.toFixed(2),cumulativeTotal:t.toFixed(2),approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType}),t===a)return}},async paymentCalculation1(){this.numberOfApprovePayment=0;const e=await this.$refs.form.validate();if(!e)return;this.isPaymentFound&&(this.clearPayment=!0),this.paymentTableValues=[];let t=0,s=0;if(this.benefitType)switch(this.benefitType){case"Monthly":s=6;break;case"BiWeekly":case"SemiMonthly":s=12;break;case"Weekly":s=24;break}for(let i=1;i<=s;i++){let e=this.totalPayment,s=e+.2*e;if(t+s>4e3)return void this.paymentTableValues.push({paymentId:0,paymentNumber:i,baseAmount:(4e3-t).toFixed(2),claimAmount:(0).toFixed(2),cumulativeTotal:4e3.toFixed(2),approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType});t+=s,this.paymentTableValues.push({paymentId:0,paymentNumber:i,baseAmount:e.toFixed(2),claimAmount:s.toFixed(2),cumulativeTotal:t.toFixed(2),approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType})}},async getPaymentTable1(){this.isPaymentFound=!1;const{error:e,payload:t}=await b["d"].getPaymentTable({filterBy:[{filters:[{criteria:"processId",condition:"IS_EQUALS_TO",value:this.selectedProcess.processId}],groupCondition:""}],mode:"BROWSE"});e?this.$alert.error(e):t.length&&(this.paymentTableValues=t,this.isPaymentFound=!0)},async getPaymentTable(){this.isPaymentFound=!1,this.paymentTableValues=[];let e=this.formFields.find(e=>"Claim No."===e.label),t=this.formFields.find(e=>"Lender Name"===e.label),s={};this.isPaymentFound||(this.hasLifeType||this.hasCIClaimsType)&&this.getLifeTypePaymentTable(),s["CPClaimNumber"]=this.formModel[e.value];let i={hublinkId:8,payloadMapping:JSON.stringify(s),lenderName:this.formModel[t.value],itemsPerPage:50,currentPage:1};const{payload:a,error:o}=await b["d"].getDataSync(i);if(o)return void this.$alert.error(o);const{data:r,meta:n}=a;n.totalItems&&r.length&&r[0].value.length&&(this.paymentTableValues=[],r[0].value.forEach(e=>{this.paymentTableValues.push({paymentId:e.ClaimPaymentID,paymentNumber:e.ClaimPaymentNumber,baseAmount:Number(e.ClaimPaymentAmount).toFixed(2),claimAmount:Number(e.PrincipalPmt).toFixed(2),cumulativeTotal:Number(e.CumulativeTotal).toFixed(2),approval:e.Status,approvedDate:this.$day.parseDate(e.StatusDate),paymentDate:this.$day.parseDate(e.CPaymentDate),approvedBy:e.ApprovedBy,notes:e.CPNotes,goodWill:"True"===e.Goodwill,lppPlus:"True"===e.LPPPlus,preApprovedPmt:"True"===e.PreApprovedPmt,psgCovered:"True"===e.PSGCovered})}),this.isPaymentFound=!0)},async updatePaymentTable1(){this.paymentTableValues.forEach(e=>{e.baseAmount=Number(e.baseAmount).toFixed(2)});let e={workflowId:this.selectedProcess.id,processId:this.selectedProcess.processId,paymentTableList:this.paymentTableValues};if(this.isPaymentFound){const{error:t}=await b["d"].updatePaymentTable(this.selectedProcess.processId,e);if(t)return void this.$alert.error(t);this.$alert.success("Payment entry updated")}else{const{error:t}=await b["d"].savePaymentTable(e);if(t)return void this.$alert.error(t);this.$alert.success("Payment entry added")}this.getPaymentTable()},async updatePaymentTable(){let e=this.formFields.find(e=>"Lender Name"===e.label),t=this.formFields.find(e=>"Claim No."===e.label);this.paymentTableValues.forEach(e=>{e.baseAmount=Number(e.baseAmount).toFixed(2)});let s=[];this.paymentTableValues.forEach(e=>{let i={};i=e.paymentId?{modifiedBy:this.userNames,modifiedDt:this.$day.newDateTime()}:{createdBy:this.userNames,createdDt:this.$day.newDateTime()},s.push({claimPaymentID:e.paymentId,cPClaimNumber:this.formModel[t.value],paymentNumber:e.paymentNumber,paymentBaseAmount:e.baseAmount,claimAmount:e.claimAmount,cumulativeTotal:e.cumulativeTotal,approval:e.approval,paymentDate:e.paymentDate,approvedBy:0,cpNotes:e.notes,goodwill:e.goodWill,lppplus:e.lppPlus,preApprovedPMT:e.preApprovedPmt,psgCovered:e.psgCovered,approvalDate:e.approvedDate,proRated:!1,...i})});let i={lenderName:this.formModel[e.value],claimNumber:this.clearPayment?this.formModel[t.value]:"",paymentList:s};const{error:a}=await b["d"].savePaymentTable(i);a?this.$alert.error(a):(this.$alert.success("Payment entry updated"),this.numberOfApprovePayment=0,this.getPaymentTable())},async getContractData(e){let t=this.formFields.find(e=>"Loan No."===e.label),s=this.formFields.find(e=>"Lender Name"===e.label),i={};if(i["StoreLoanNumber"]=this.formModel[t.value],"Borrower"===e){let e={hublinkId:4,payloadMapping:JSON.stringify(i),lenderName:this.formModel[s.value],itemsPerPage:500,currentPage:1};const{payload:t,error:a}=await b["d"].getDataSync(e);if(this.$store.commit("hideLoadingBar"),a)return void("Connection Interrupted"===a?this.$alert.warning(a):this.$alert.error(a));const{data:o,meta:r}=t;r.totalItems&&o.length&&o[0].value.length&&o[0].value.forEach(e=>{this.updateModel(e.FirstName,"First Name"),this.updateModel(e.LastName,"Last Name"),this.updateModel(e.DOB,"DOB"),this.updateModel(e.Address1,"Address"),this.updateModel(e.City,"City"),this.updateModel(e.Province,"Province"),this.updateModel(e.PostalCode,"Postal Code"),this.updateModel(e.Phone,"Phone No.")})}else if("Co-Borrower"===e){let e={hublinkId:3,payloadMapping:JSON.stringify(i),lenderName:this.formModel[s.value],itemsPerPage:500,currentPage:1};const{payload:t,error:a}=await b["d"].getDataSync(e);if(this.$store.commit("hideLoadingBar"),a)return void("Connection Interrupted"===a?this.$alert.warning(a):this.$alert.error(a));const{data:o,meta:r}=t;r.totalItems&&o.length&&o[0].value.length&&o[0].value.forEach(e=>{this.updateModel(e.CoFirstName,"First Name"),this.updateModel(e.CoLastName,"Last Name"),this.updateModel(e.CoDOB,"DOB"),this.updateModel(e.CoAddress1,"Address"),this.updateModel(e.CoCity,"City"),this.updateModel(e.CoProvince,"Province"),this.updateModel(e.CoPostalCode,"Postal Code"),this.updateModel(e.CoPhone,"Phone No.")})}},async getClaimStatus(){this.claimStatusValues=[],this.claimStatusValuesData=[];let e=this.formFields.find(e=>"Claim No."===e.label),t=this.formFields.find(e=>"Lender Name"===e.label),s={};s["CSClaimNumber"]=this.formModel[e.value];let i={hublinkId:7,payloadMapping:JSON.stringify(s),lenderName:this.formModel[t.value],itemsPerPage:this.claimStatusItemsPerPage,currentPage:this.claimStatusCurrentPage};const{payload:a,error:o}=await b["d"].getDataSync(i);if(o)return void this.$alert.error(o);const{data:r,meta:n}=a;n.totalItems&&(this.claimStatusTotalItems=n.totalItems,r.length&&r[0].value.length&&(this.claimStatusValues=r[0].value,this.claimStatusValuesData=r[0].value))},async saveClaimStatus(){const e=await this.$refs.claimStatusModal.validate();if(!e)return;let t=this.formFields.find(e=>"Claim No."===e.label),s=this.formFields.find(e=>"Lender Name"===e.label),i={};i=Object.keys(this.claimStatusRow).length?{CSClaimNumber:this.claimStatusRow.CSClaimNumber,ClaimStatus:this.claimStatus,CSDate:this.claimStatusRow.CSDate,ClaimLetterSent:0,AuthorizedBy:0,MailingType:this.mailingType,LenderLetter:0,CreatedBy:this.claimStatusRow.CreatedBy,CreatedDt:this.claimStatusRow.CreatedDt,ModifiedBy:this.userNames,ModifiedDt:this.$day.newDateTime(),InternalOnly:this.internalOnly,InternalNotes:this.internalNotes,TransactionId:"",InhouseOnly:0}:{CSClaimNumber:this.formModel[t.value],ClaimStatus:this.claimStatus,CSDate:this.$day.newDate(),ClaimLetterSent:0,AuthorizedBy:0,MailingType:this.mailingType,LenderLetter:0,CreatedBy:this.userNames,CreatedDt:this.$day.newDateTime(),InternalOnly:this.internalOnly,InternalNotes:this.internalNotes,TransactionId:"",InhouseOnly:0};let a={lenderName:this.formModel[s.value],claimStatusID:Object.keys(this.claimStatusRow).length?this.claimStatusRow.ClaimStatusID:0,fields:JSON.stringify(i)};const{error:o}=await b["d"].saveClaimStatus(a);o?this.$alert.error(o):(Object.keys(this.claimStatusRow).length?this.$alert.success("Claim status entry updated"):this.$alert.success("Claim status entry added"),this.claimStatusRow={},this.claimStatusModal=!1,this.getClaimStatus())},async getDailyDataStatus(){this.dailyDataStatusValues=[],this.dailyDataStatusValuesData=[];let e=this.formFields.find(e=>"Loan No."===e.label),t=this.formFields.find(e=>"Lender Name"===e.label),s={};s["loankey"]=this.formModel[e.value];let i={hublinkId:6,payloadMapping:JSON.stringify(s),lenderName:this.formModel[t.value],itemsPerPage:this.dailyDataStatusItemsPerPage,currentPage:this.dailyDataStatusCurrentPage};const{payload:a,error:o}=await b["d"].getDataSync(i);if(o)return void this.$alert.error(o);const{data:r,meta:n}=a;n.totalItems&&(this.dailyDataStatusTotalItems=n.totalItems,r.length&&r[0].value.length&&(this.dailyDataStatusValues=r[0].value,this.dailyDataStatusValuesData=r[0].value))},async getPaymentHistory(){this.paymentHistoryValues=[],this.paymentHistoryValuesData=[];let e=this.formFields.find(e=>"Loan No."===e.label),t=this.formFields.find(e=>"Lender Name"===e.label),s={};s["StoreLoanNumber"]=this.formModel[e.value];let i={hublinkId:5,payloadMapping:JSON.stringify(s),lenderName:this.formModel[t.value],itemsPerPage:this.paymentHistoryItemsPerPage,currentPage:this.paymentHistoryCurrentPage};this.$store.commit("showLoadingBarSave");const{payload:a,error:o}=await b["d"].getDataSync(i);if(this.$store.commit("hideLoadingBarSave"),o)return void this.$alert.error(o);const{data:r,meta:n}=a;n.totalItems&&(this.paymentHistoryTotalItems=n.totalItems,r.length&&r[0].value.length&&(this.paymentHistoryValues=r[0].value,this.paymentHistoryValuesData=r[0].value))},getLifeTypePaymentTable(){this.paymentTableValues=[],this.paymentTableValues=[{approval:"",approvedBy:"",approvedDate:"",baseAmount:"",claimAmount:0,cumulativeTotal:"0",goodWill:!1,lppPlus:!1,notes:"",paymentDate:"",paymentId:0,paymentNumber:"1",preApprovedPmt:!1,psgCovered:!1,delete:!0}]}}},S=k,_=(s("55ff"),s("cea0"),s("2877")),I=Object(_["a"])(S,i,a,!1,null,"bdce7c08",null);t["a"]=I.exports},c53c:function(e,t,s){e.exports=s.p+"img/workspace-dark.0b8a0460.png"},c559:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"sort",expression:"'sort'",modifiers:{bottom:!0}}],attrs:{"is-flat":"",icon:"mdi-sort","no-border":""}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("BaseScrollbar",{attrs:{height:e.scrollbarHeight,width:"240px"}},[t("div",{staticClass:"title-3 q-pa-md"},[e._v("Sort Criteria")]),e._l(e._columns,(function(s){return t("ListItem",{key:s.id,attrs:{icon:e.criteria===s.name?"eva-radio-button-on":"eva-radio-button-off","is-selected":e.criteria===s.name,label:s.label},on:{click:function(t){return e.updateCriteria(s.name)}}})}))],2),t("div",{staticClass:"title-3 q-pa-md"},[e._v("Sort Order")]),t("ListItem",{attrs:{icon:"ASC"===e.order?"eva-radio-button-on":"eva-radio-button-off","is-selected":"ASC"===e.order,label:"Ascending"},on:{click:function(t){return e.updateOrder("ASC")}}}),t("ListItem",{staticClass:"q-mb-sm",attrs:{icon:"DESC"===e.order?"eva-radio-button-on":"eva-radio-button-off","is-selected":"DESC"===e.order,label:"Descending"},on:{click:function(t){return e.updateOrder("DESC")}}})],1)],1)},a=[],o=s("cade"),r={name:"SortItems",components:{ListItem:o["a"]},props:{columns:{type:Array,required:!0},criteria:{type:String,required:!0},order:{type:String,required:!0}},computed:{_columns(){return[{id:this.$nano.id(),label:"None",name:""},...this.columns.filter(e=>e.isSortable)]},scrollbarHeight(){const e=54*this._columns.length;return e>216?"224px":e+"px"}},methods:{updateCriteria(e){this.$emit("update:criteria",e)},updateOrder(e){this.$emit("update:order",e)}}},n=r,l=s("2877"),c=s("4e73"),d=s("93dc"),u=s.n(d),m=Object(l["a"])(n,i,a,!1,null,"12f6a366",null);t["a"]=m.exports;u()(m,"components",{QMenu:c["a"]})},c589:function(e,t,s){},c5b7:function(e,t,s){"use strict";s("0698")},c721:function(e,t,s){},c794:function(e,t,s){},c925:function(e,t,s){"use strict";s("65c0")},cbc3:function(e,t,s){},cc92:function(e,t,s){},ccc5:function(e,t,s){"use strict";s("b811")},cccc:function(e,t,s){"use strict";s("307a")},cd22:function(e,t,s){e.exports=s.p+"img/name-dark.ebb22601.png"},cd8d:function(e,t,s){"use strict";s("00f0")},cea0:function(e,t,s){"use strict";s("ee16")},cf1a:function(e,t,s){"use strict";s("37b7")},d11f:function(e,t,s){"use strict";s("ad4f")},d2fb:function(e,t,s){"use strict";s("71f4")},d30f:function(e,t,s){},d37d:function(e,t,s){"use strict";s("4f21")},d406:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{class:{"is-selected":e.isSelected||e.file.id===e.fileId,"mini-mode":e.miniMode},attrs:{id:"file-list-item"},on:{click:function(t){return e.$emit("selectFile")},mouseover:function(t){e.fileId=e.file.id},mouseleave:function(t){e.fileId=0}}},[t("div",{staticClass:"avatar"},[t("FileIcon",{attrs:{"mime-type":e.type}})],1),t("div",{staticClass:"q-ml-md"},[t("div",e._g({staticClass:"title",on:{click:e.viewFile}},e.$listeners),[e._v(" "+e._s(e.file.name)+" "),e._t("info")],2),t("div",{staticClass:"meta"},[e.repository?[t("div",[e._v(e._s(e.repository))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}})]:e._e(),t("div",[e._v(e._s(e.createdAt))]),e.file.createdBy&&!e.miniMode?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.file.createdBy))])]:e._e(),e.file.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.size))])]:e._e(),e.file.ocrType?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.file.ocrType))])]:e._e(),e._t("status")],2)]),t("q-space"),e._t("default")],2)},a=[],o=s("fa1f"),r=s("a7d2"),n={name:"FileListItem",components:{FileIcon:o["a"]},props:{file:{type:Object,required:!0},isSelected:{type:Boolean,default:!1},miniMode:{type:Boolean,default:!1}},data(){return{fileId:0}},computed:{type(){return this.file.name.split(".").reverse()[0].slice(0,4)},repository(){if(this.file.repository)return this.file.repository.value},createdAt(){return this.$day.format(this.file.createdAt)},size(){return Object(r["a"])(this.file.size)}},methods:{viewFile(){this.$emit("view",this.file)}}},l=n,c=(s("8b18"),s("2877")),d=s("2c91"),u=s("93dc"),m=s.n(u),h=Object(c["a"])(l,i,a,!1,null,"0b7b1cb3",null);t["a"]=h.exports;m()(h,"components",{QSpace:d["a"]})},d5ea:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"eva-trash-2-outline","icon-color":"orange"},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Restore Form Entry?")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v("Are you sure you want to restore the connection entry.")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"orange"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"orange"},on:{click:e.handleYes}})]},proxy:!0}])})},a=[],o=s("1c54"),r={name:"ConfirmRestoreFormEntry",components:{Confirm:o["a"]},props:{value:{type:Boolean,required:!0},entryId:{type:Number,default:0}},methods:{handleInput(e){this.$emit("input",e)},handleNo(){this.$emit("input",!1)},handleYes(){this.$emit("input",!1),this.$emit("restore",{isDeleted:!1})}}},n=r,l=s("2877"),c=Object(l["a"])(n,i,a,!1,null,"f3e51162",null);t["a"]=c.exports},d9f6:function(e,t,s){},dc7a:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"repository-list"}},[t("div",{staticClass:"title"},[e._v("Folder")]),t("div",{staticClass:"wrapper"},[t("ValidationProvider",{attrs:{name:"repository",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{value:e.value,"is-mandatory":"","is-clearable":!1,options:e.repositories,"is-readonly":"",error:s[0]},on:{input:e.handleInput}})]}}])})],1)])},a=[],o=s("1b0d"),r=s("7bb1"),n=s("12b8"),l={name:"RepositoryList",components:{ValidationProvider:r["b"],SelectField:n["a"]},props:{value:{type:Number,required:!0},workspaceId:{type:Number,required:!0}},data(){return{repositories:[]}},watch:{workspaceId:{immediate:!0,handler:"getRepositories"}},methods:{handleInput(e){this.$emit("input",e)},async getRepositories(){if(this.workspaceId){this.repositories=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await o["p"].getRepositoryList("workspaceId",this.workspaceId);if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);if(!t.length)return;this.repositories=t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))}}}},c=l,d=(s("39cc"),s("2877")),u=Object(d["a"])(c,i,a,!1,null,"11e49f8b",null);t["a"]=u.exports},dccd:function(e,t,s){},e09c:function(e,t,s){},e0b6:function(e,t,s){},e170:function(e,t,s){},e21c:function(e,t,s){"use strict";s("e09c")},e248:function(e,t,s){},e359:function(e,t,s){"use strict";s("14d9");var i=s("a026"),a=s("3980"),o=s("87e8"),r=s("e277"),n=s("d882"),l=s("d54d");t["a"]=i["default"].extend({name:"QHeader",mixins:[o["a"]],inject:{layout:{default(){console.error("QHeader needs to be child of QLayout")}}},props:{value:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},data(){return{size:parseInt(this.heightHint,10),revealed:!0}},watch:{value(e){this.__update("space",e),this.__updateLocal("revealed",!0),this.layout.__animate()},offset(e){this.__update("offset",e)},reveal(e){!1===e&&this.__updateLocal("revealed",this.value)},revealed(e){this.layout.__animate(),this.$emit("reveal",e)},"layout.scroll"(e){!0===this.reveal&&this.__updateLocal("revealed","up"===e.direction||e.position<=this.revealOffset||e.position-e.inflexionPosition<100)}},computed:{fixed(){return!0===this.reveal||this.layout.view.indexOf("H")>-1||this.$q.platform.is.ios&&!0===this.layout.container},offset(){if(!0!==this.value)return 0;if(!0===this.fixed)return!0===this.revealed?this.size:0;const e=this.size-this.layout.scroll.position;return e>0?e:0},hidden(){return!0!==this.value||!0===this.fixed&&!0!==this.revealed},revealOnFocus(){return!0===this.value&&!0===this.hidden&&!0===this.reveal},classes(){return(!0===this.fixed?"fixed":"absolute")+"-top"+(!0===this.bordered?" q-header--bordered":"")+(!0===this.hidden?" q-header--hidden":"")+(!0!==this.value?" q-layout--prevent-focus":"")},style(){const e=this.layout.rows.top,t={};return"l"===e[0]&&!0===this.layout.left.space&&(t[!0===this.$q.lang.rtl?"right":"left"]=this.layout.left.size+"px"),"r"===e[2]&&!0===this.layout.right.space&&(t[!0===this.$q.lang.rtl?"left":"right"]=this.layout.right.size+"px"),t},onEvents(){return{...this.qListeners,focusin:this.__onFocusin,input:n["k"]}}},render(e){const t=Object(r["d"])(this,"default",[]);return!0===this.elevated&&t.push(e("div",{staticClass:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(e(a["a"],{props:{debounce:0},on:Object(l["b"])(this,"resize",{resize:this.__onResize})})),e("header",{staticClass:"q-header q-layout__section--marginal",class:this.classes,style:this.style,on:this.onEvents},t)},created(){this.layout.instances.header=this,!0===this.value&&this.__update("size",this.size),this.__update("space",this.value),this.__update("offset",this.offset)},beforeDestroy(){this.layout.instances.header===this&&(this.layout.instances.header=void 0,this.__update("size",0),this.__update("offset",0),this.__update("space",!1))},methods:{__onResize({height:e}){this.__updateLocal("size",e),this.__update("size",e)},__update(e,t){this.layout.header[e]!==t&&(this.layout.header[e]=t)},__updateLocal(e,t){this[e]!==t&&(this[e]=t)},__onFocusin(e){!0===this.revealOnFocus&&this.__updateLocal("revealed",!0),this.$emit("focusin",e)}}})},e4f7:function(e,t,s){"use strict";s("5005")},e5e9:function(e,t,s){},e864:function(e,t,s){"use strict";s("1137")},e887:function(e,t,s){},e953:function(e,t,s){"use strict";s("8fbb")},e98d:function(e,t,s){"use strict";s("50ff")},ea0d:function(e,t,s){"use strict";s("8749")},ea98:function(e,t,s){"use strict";s("1bfa")},eb85:function(e,t,s){"use strict";var i=s("a026"),a=s("b7fa"),o=s("87e8");const r={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},n={xs:2,sm:4,md:8,lg:16,xl:24};t["a"]=i["default"].extend({name:"QSeparator",mixins:[a["a"],o["a"]],props:{spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},computed:{orientation(){return!0===this.vertical?"vertical":"horizontal"},classPrefix(){return" q-separator--"+this.orientation},insetClass(){return!1!==this.inset?`${this.classPrefix}-${r[this.inset]}`:""},classes(){return`q-separator${this.classPrefix}${this.insetClass}`+(void 0!==this.color?" bg-"+this.color:"")+(!0===this.isDark?" q-separator--dark":"")},style(){const e={};if(void 0!==this.size&&(e[!0===this.vertical?"width":"height"]=this.size),!1!==this.spaced){const t=!0===this.spaced?n.md+"px":this.spaced in n?n[this.spaced]+"px":this.spaced,s=!0===this.vertical?["Left","Right"]:["Top","Bottom"];e["margin"+s[0]]=e["margin"+s[1]]=t}return e},attrs(){return{"aria-orientation":this.orientation}}},render(e){return e("hr",{staticClass:"q-separator",class:this.classes,style:this.style,attrs:this.attrs,on:{...this.qListeners}})}})},ec15:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("Sheet",{attrs:{width:"30vw","sub-actions":!(!e.selectedProcess.processId||!e.attachmentList.length),upload:"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess||e.isPortal,"no-padding":""},on:{input:e.closeAttachmentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 15 seconds ")]):e._e(),e.selectedProcess.processId?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getAttachments()}}}):e._e()]},proxy:!0},"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess||e.isPortal?{key:"upload",fn:function(){return[t("div",{staticClass:"hint",on:{click:function(t){e.rowIndex=null,e.$refs.attachments.click()}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),t("div",{staticClass:"title text-blue"},[e._v("UPLOAD FILES")]),t("div",{staticClass:"description"},[e._v("Click here to choose files and upload")])],1)]},proxy:!0}:null,e.selectedProcess.processId&&e.attachmentList.length?{key:"subActions",fn:function(){return[t("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:e.fileSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}}),e._v(" Select All "),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!e.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentShare}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"merge documents (only PDF)",expression:"'merge documents (only PDF)'",modifiers:{top:!0}}],attrs:{"is-disabled":!(e.selectedFileCount>1&&e.isSelectedPDF),icon:"mdi-file-document-multiple-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentMerge}})]},proxy:!0}:null],null,!0),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess||e.isPortal?"calc(100vh - 200px)":""}},[t("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:e.uploadWflowAttachments}}),e._l(e.checkList,(function(s){return[!s.name||s.hasOwnProperty("visible")&&!s.show?e._e():[s.attach?t("div",{key:s.uid},[e._l(e.attachmentFilterCheckList(s.name),(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})]],2):t("div",[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e()],2),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),[("inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode)&&s.createdBy===e.$store.state.session.id||e.initiateProcess?[t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Re-Upload",expression:"'Re-Upload'",modifiers:{top:!0}}],attrs:{icon:"mdi-file-upload",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){t.stopPropagation(),e.reuploadFile=s,e.reupload(s.name)}}})],1)]:e._e()]],2)])]}))],2):t("div",{key:s.uid,staticClass:"checkList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),t("div",{staticClass:"col q-ml-sm"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[e._v(" "+e._s(s.name)+" ")]),s.required?t("div",{staticClass:"col-12 q-mt-sm"},[t("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[e._v(" Required ")])],1):e._e()])]),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"col-12",on:{click:function(t){return e.attachTemplate(s.uid)}}},[t("q-chip",{staticClass:"chips primary-hover medium",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-upload-outline",color:"primary","text-color":"white"}}),e._v(" Upload ")],1)],1),s.template?t("div",{staticClass:"col-12",on:{click:function(t){return e.download(s.id)}}},[t("q-chip",{staticClass:"chips secondary-hover medium",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-download-outline",color:"secondary","text-color":"white"}}),e._v(" Download ")],1)],1):e._e()])])])]]})),e._l(e.attachmentList,(function(s){return[e.isCheckList(s.name)?[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e(),e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})],1):e._e(),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)],2),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),("inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode)&&s.createdBy===e.$store.state.session.id||e.initiateProcess?t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1):e._e()])])]:e._e()]}))],2)],1)]),t("EmailSharing",{attrs:{"repository-id":e.workflow.repositoryId,"file-list":e.selectedFileList},on:{"update:fileList":function(t){e.selectedFileList=t},"update:file-list":function(t){e.selectedFileList=t}},model:{value:e.emailSharingSheet,callback:function(t){e.emailSharingSheet=t},expression:"emailSharingSheet"}}),t("FileDetails",{attrs:{"file-data":e.fileData},model:{value:e.fileDetailsSheet,callback:function(t){e.fileDetailsSheet=t},expression:"fileDetailsSheet"}}),t("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(t){e.mailAttachmentSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Mail Attachments ")]},proxy:!0}]),model:{value:e.mailAttachmentSheet,callback:function(t){e.mailAttachmentSheet=t},expression:"mailAttachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 200px)"}},[e._l(e.mailAttachmentList,(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openAttachmentFile(s)}}},[e._v(" "+e._s(s.name)+" ")])]),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])]}))],2)],1)]),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[e.selectedFile.formJsonId?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:e.getLabel(e.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:e._e(),t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])],2)]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.documentActionList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.documentAction(s.id)}}})})),1)],1)],1)]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myAttachmentFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])]),t("MetaDataEdit",{attrs:{value:e.showMetaDataEditModal,file:e.workflow,"repository-field":e.repositoryField,"file-data":e.fileData,title:e.metaDataTitle||"Index",columns:e.columns,"modal-value":e.workflowModel,"upload-filename":e.uploadFilename,"meta-data-fields":e.metaDataModal},on:{close:e.closeMetaDataEditModal,save:e.saveMetaData}})],1)},a=[],o=(s("14d9"),s("13d5"),s("381e")),r=s("5e23"),n=s("1b0d"),l=s("fa1f"),c=s("a7d2"),d=s("dd90"),u=s("abe1"),m=s("bc3a"),h=s.n(m),p=s("ee54"),f=s("9996"),v=s("869e"),y=s("cade"),b={name:"Attachments",components:{Sheet:o["a"],EmailSharing:r["a"],FileIcon:l["a"],FileDetails:u["a"],MetaDataEdit:p["a"],CheckboxField:v["a"],ListItem:y["a"]},props:{value:{type:Boolean,default:!1},selectedProcess:{type:Object,default:()=>{}},workflow:{type:Object,default:()=>{}},selectedNode:{type:String,required:!0},initiateProcess:{type:Boolean,default:!1},formCheckList:{type:Boolean,default:!1},checkList:{type:Array,default:()=>[]},wform:{type:Object,default:()=>{}},repositoryDetails:{type:Object,default:()=>{}},workflowModel:{type:Object,default:()=>{}},formUploadFiles:{type:Array,default:()=>[]},formFields:{type:Array,default:()=>[]},repositoryField:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},attachments:{type:Array,default:()=>[]},workflowId:{type:Number,required:!0},isPortal:{type:Boolean,default:!1}},data(){return{attachmentSheet:!1,attachmentList:[],selectAll:!1,emailSharingSheet:!1,selectedFileList:[],fileDetailsSheet:!1,fileData:[],checkListRowIndex:0,selectedFile:{},mailTransactionList:[],mailAttachmentSheet:!1,mailAttachmentList:[],fileSheet:!1,watchViewerClose:null,reuploadFile:{},documentActionList:[{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline"},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline"}],uploadFilename:"",showMetaDataEditModal:!1,selectedUploadFile:{},documentLoad:null,documentLoadList:[],metaDataModal:{},metaDataTitle:"",selectedCheckListName:""}},computed:{selectedFileCount(){this.clearAttach();let e=this.attachmentList.filter(e=>e.checked).length;return e},isSelectedPDF(){let e=!0;return this.attachmentList.forEach(t=>{let s=t.name.split(".").pop();t.checked&&"pdf"!==s.toLowerCase()&&(e=!1)}),e}},watch:{value:{immediate:!0,handler(){if(this.value)if(this.attachmentSheet=!0,this.attachmentList=this.attachments,this.attachmentSheet&&this.selectedProcess.processId){if(this.getAttachments(),this.attachmentList.length){let e=this.attachmentList.length-1;this.getFileData(this.attachmentList[e],"file")}this.attachmentLoad=setInterval(()=>{this.getAttachments()},15e3)}else clearInterval(this.attachmentLoad)}}},methods:{async getAttachments(e=0,t=0){let s=this.attachmentList.length;e||t||(e=this.workflowId,t=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:i,payload:a}=await n["t"].getAttachments(e,t);if(this.$store.commit("hideLoadingBar"),i)this.$alert.error(i);else if(a.length?(s!==a.length&&(this.attachmentList=a.map(e=>({...e,checked:!1}))),this.$emit("attachmentCount",this.attachmentList.length)):this.attachmentList=[],this.checkList.length){this.checkList.forEach(e=>{let t=this.attachmentList.filter(t=>{let s=t.name.substr(0,t.name.lastIndexOf("."));if(e.name===s||e.name===s.split("_")[0])return t});t.length?e.attach=!0:e.attach=!1});let e=location.origin;(this.isTenantArmgroup()||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&this.selectedProcess.attachmentCount!==this.attachmentList.length&&this.$emit("update:formCheckList",!0)}},isTenantArmgroup(){let e=location.origin;return("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://localhost:8080"===e)&&3===this.$store.state.session.tenantId},fileSelectAll(){this.attachmentList=this.attachmentList.map(e=>({...e,checked:this.selectAll}))},async documentMerge(){let e=[];this.attachmentList.forEach(t=>{let s=t.name.split(".").pop();t.checked&&"pdf"===s.toLowerCase()&&e.push(t.id)});let t={ids:e};const{error:s}=await n["t"].documentMerge(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,this.workflow.repositoryId,t);s?this.$alert.error(s):this.$alert.success("Document merge process initiated")},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(e=>{e.checked&&this.selectedFileList.push({id:e.id,name:e.name})}),this.emailSharingSheet=!0},clearAttach(){console.log("clear")},attachTemplate(e){this.checkListRowIndex=e,this.$refs.attachments.click(),this.selectedCheckListName=this.checkList.find(t=>e==t.uid).name},reupload(e){var t;e=e.substr(0,e.lastIndexOf(".")).split("_")[0],this.checkListRowIndex=null===(t=this.checkList.find(t=>t.name===e))||void 0===t?void 0:t.uid,this.$refs.attachments.click()},attachmentFilterCheckList(e){return this.attachmentList.filter(t=>t.name.substring(0,t.name.lastIndexOf("."))===e||t.name.substring(0,t.name.lastIndexOf(".")).split("_")[0]===e)},isCheckList(e){let t=this.checkList.filter(t=>t.name===e.substring(0,e.lastIndexOf("."))||t.name===e.substring(0,e.lastIndexOf(".")).split("_")[0]);return!t.length},showMailAttachments(e){this.mailAttachmentList=[];let t=e.attachmentJson.split(",");t.forEach(t=>{let s=t.split("\\").pop();this.mailAttachmentList.push({id:this.$nano.id(),mailId:e.id,name:s,createdAt:e.createdAt})}),this.mailAttachmentSheet=!0},openAttachmentFile(e){let t=`https://appuat.ezofis.com/ezofisapi/api/client/viewAttachment/${this.$store.state.session.tenantId}/${e.mailId}/${e.name}`;window.open(t,"_blank")},getLabel(e){let t="",s=this.wform.formJson?JSON.parse(this.wform.formJson):this.wform;const i=[...s.panels,...s.secondaryPanels];if(!i.length)return;let a=[];for(const o of i)a.push(...o.fields);return a.forEach(s=>{const i=s.settings.specific.tableColumns.find(t=>t.id===e);if(i)t=i.label;else if(s.id===e)return void(t=s.label)}),t},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},fileSize(e){return Object(c["a"])(e)},openFile(e){e.loading?this.$alert.info("Please wait to complete the uploading"):(this.selectedFile=e,this.isTenantArmgroup()?window.open(this.fileLink()):this.fileSheet=!0)},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let s=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(s=2);let i="";if(Object(d["d"])(t))i=this.isTenantArmgroup()?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":this.isTenantGOTO()?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html";else{if("http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${s}`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`}{let s="",i="";if("inbox"!==this.selectedNode&&"common"!==this.selectedNode&&"payment"!==this.selectedNode||(i="&action=all"),Object(d["d"])(t))this.isTenantArmgroup()?(i="",s="https://ag-appsvc04.azurewebsites.net/web/viewer.html"):"https://trial.ezofis.com"!==e||Object(d["c"])(t)?s=this.isTenantGOTO()?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html":(localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),s="https://trial.ezofis.com/docsviewer/index.html");else{if(Object(d["b"])(t)||"http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),s="http://52.172.32.88/DocsViewer/index.html"}return`${s}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${i}`}}},fileMenuAction(e,t){this.selectedFile=e,this.documentAction(t,!0)},documentAction(e,t){if("Email_Sharing"===e);else if("Print"===e){if(this.selectedFile.name)if(t){let e="";if(this.selectedFile.initiate){let t=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(t=2),e=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${t}/1`}else e=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(e,"_blank")}else{let e=this.selectedFile.name.split(".").pop();Object(d["d"])(e)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myAttachmentFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===e){let e="";if(this.selectedFile.initiate){let t=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(t=2),e=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${t}/2`}else e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(e,"_blank")}},async filePrintSession(){const{error:e}=await n["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});e&&this.$alert.error(e)},async getFileData(e,t){const{error:s,payload:i}=await n["p"].getFileData({repositoryId:e.repositoryId,itemId:e.id});s?this.$alert.error(s):i&&(e.fileData?this.fileData=e.fileData:this.fileData=i,"file"!==t&&(this.fileDetailsSheet=!0))},async attachmentDelete(e){if(e.fileControl){let t=this.workflowModel[e.fieldId];if(t.length){let s=t.findIndex(t=>t.fileId===e.id);console.log(s),s>=0&&this.workflowModel[e.fieldId].splice(s,1);let i=this.formUploadFiles.findIndex(t=>t.fileId===e.id&&t.fileId===e.fileId);console.log(i),i>=0&&this.formUploadFiles.splice(s,1),e.control.length&&e.control.forEach(e=>{this.workflowModel[e]=""})}let s=this.attachmentList.findIndex(e=>e.fileControl);console.log(s),s>=0&&(this.$emit("attachmentCount",this.attachmentList.length-1),this.attachmentList.splice(s,1))}else if(e.initiate){const{error:t}=await n["r"].deleteUploadedFiles([e.id]);if(t)return void this.$alert.error(t);this.attachmentList=this.attachmentList.filter(t=>t.id!==e.id),this.checkList.forEach(t=>{t.uid===e.uid&&(t.attach=!1)})}else{const{error:t}=await n["p"].fileDelete(this.workflow.repositoryId,e.id);if(t)return void this.$alert.error(t);this.getAttachments()}},checkViewerClose(){localStorage.getItem("viewerClose")&&"true"===localStorage.getItem("viewerClose")&&(this.fileSheet=!1,localStorage.removeItem("viewerClose"),clearInterval(this.watchViewerClose),this.workflow.initiatedBy)},isTenantGOTO(){let e=location.origin;return("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e)&&2===this.$store.state.session.tenantId},customCheckUpload(){let e=location.origin;return"https://edmsuat.sobhaapps.com"===e&&(55===this.workflowId||2092===this.workflowId)&&0===this.attachmentList.length},async uploadWflowAttachments(e){if("STATIC"===this.repositoryDetails.fieldsType){if(this.selectedUploadFile=e,this.customCheckUpload()){let t=this.formFields.find(e=>"Document No"===e.label);this.uploadFilename=t?this.workflowModel[t.value]+".pdf":e.target.files[0].name}else this.uploadFilename=e.target.files[0].name;const t=this.repositoryField.reduce((e,t)=>t.level>e.level?t:e,this.repositoryField[0]),s=t.id,i=this.fileData.find(e=>s==e.id);if(!this.selectedCheckListName){const e={id:t.id,name:t.name,value:this.selectedCheckListName,type:t.dataType};this.fileData.length?i&&(i.value=""):(this.fileData.push(e),console.log(this.fileData,"selectedCheckListName")),this.showMetaDataEditModal=!0}if(this.selectedCheckListName){i&&(i.value=this.selectedCheckListName);const e={id:t.id,name:t.name,value:this.selectedCheckListName,type:t.dataType};this.fileData.length||(this.fileData.push(e),console.log(this.fileData,"selectedCheckListName"));const s=this.repositoryField.filter(e=>!0===e.isMandatory).map(e=>e.id),a=s.every(e=>{const t=this.fileData.find(t=>t.id===e);return t&&""!==t.value});if(this.showMetaDataEditModal=!a,a){const e={};this.fileData.forEach(t=>{e[t.name]=""!==t.value?t.value:""}),console.log(e,"New Object"),this.saveMetaData(e)}else this.showMetaDataEditModal=!0;this.selectedCheckListName=""}}else this.uploadAttachments(e)},async uploadAttachments(e,t){if(this.selectedProcess.processId){const i=e.target.files[0],a=new FormData;a.append("workflowId",this.workflowId),a.append("repositoryId",this.workflow.repositoryId),a.append("processId",this.selectedProcess.processId),a.append("transactionId",this.selectedProcess.transactionId),t?a.append("fields",t):a.append("fields",""),a.append("file",i);let o=e.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);a.append("filename",e[0].name+"."+r),o=e[0].name+"."+r}if(!Object(d["a"])(r))return void this.$alert.info("This file format is not supported");this.$store.commit("showLoadingBar");try{const e=await h()({url:"https://appuat.ezofis.com/ezofisapi/api/workflow/attachmentWithProcessId",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:t,data:s}=e;if(200!==t||!s)throw e;this.$alert.success("Document attached"),this.documentLoad=setInterval(()=>{this.getAttachments(),clearInterval(this.documentLoad)},15e3)}catch(s){this.$alert.error("Error uploading file"),console.error(s)}this.$store.commit("hideLoadingBar"),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value="",Object.keys(this.reuploadFile).length&&(await this.attachmentDelete(this.reuploadFile),this.reuploadFile={})}else{const i=e.target.files[0],a=new FormData;a.append("file",i),a.append("repositoryId",this.workflow.repositoryId),t&&(this.fileData=JSON.parse(t),a.append("fields",t));let o=e.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);a.append("filename",e[0].name+"."+r),o=e[0].name+"."+r}else a.append("filename",o);if(!Object(d["a"])(r))return void this.$alert.info("This file format is not supported");this.$store.commit("showLoadingBar");try{const s=await h()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}});this.$store.commit("hideLoadingBar");const{status:n,data:l}=s;if(200!==n)throw"Invalid response";let c=JSON.parse(l);this.$alert.success("Document attached");let d=this.repositoryField.reduce((e,t)=>e.level>t.level?e:t),u=this.fileData.find(e=>e.name===d.name),m=!1;"pdf"!==r.toLowerCase()&&(m=!0,this.documentLoadList.push(Number(c.fileId)),this.documentLoad=setInterval(()=>{let e=this.attachmentList.find(e=>this.documentLoadList.indexOf(e.id)>-1);e&&(this.documentLoadList.splice(this.documentLoadList.indexOf(e.id),1),e.loading=!1),0===this.documentLoadList.length&&clearInterval(this.documentLoad)},1e4)),this.attachmentList.push({id:Number(c.fileId),name:t?u.value+"."+r:o,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:i.size,initiate:!0,uid:this.checkListRowIndex,createdBy:this.$store.state.session.id,fileData:this.fileData,repositoryId:this.workflow.repositoryId,loading:m}),this.$emit("attachmentCount",this.attachmentList.length),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value=""}catch(s){console.error(s),this.$alert.error("error attaching file")}}},closeMetaDataEditModal(){this.showMetaDataEditModal=!1,this.$refs.attachments&&(this.$refs.attachments.value=null)},saveMetaData(e){let t=[];this.repositoryField.forEach(s=>{t.push({name:s.name,value:e[s.name],type:s.dataType})}),t.forEach(e=>{let t=this.formFields.find(t=>Object(f["a"])(t.label)===Object(f["a"])(e.name));t&&e.value&&(this.workflowModel[t.value]=e.value)}),this.uploadAttachments(this.selectedUploadFile,JSON.stringify(t))},closeAttachmentsSheet(){this.attachmentSheet=!1,this.$emit("update:attachments",this.attachmentList),this.$emit("attachmentCount",this.attachmentList.length),this.$emit("update:value",!1)}}},g=b,w=(s("11f5"),s("2877")),C=s("b047"),k=s("cb32"),S=s("4e73"),_=s("93dc"),I=s.n(_),x=Object(w["a"])(g,i,a,!1,null,"dc5d287e",null);t["a"]=x.exports;I()(x,"components",{QChip:C["a"],QAvatar:k["a"],QMenu:S["a"]})},ee16:function(e,t,s){},ee26:function(e,t,s){"use strict";s("cbc3")},ee54:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("Modal",{attrs:{value:e.value,"has-footer":"",width:"540px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.title))]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"form"},[e.editFromFileSheet?e._e():e._l(e._repositoryField,(function(s){return t("div",{key:s.id,staticClass:"field-wrapper"},[[[t("RepositoryField",{staticClass:"col",attrs:{field:s,"repository-id":e.file.repositoryId,"read-only":e.readOnly},model:{value:e.fieldsModel[s.name],callback:function(t){e.$set(e.fieldsModel,s.name,t)},expression:"fieldsModel[field.name]"}})]]],2)})),e.editFromFileSheet?e._l(e.fieldsModalData,(function(s){return t("div",{key:s.id,staticClass:"field-wrapper"},[[[t("RepositoryField",{staticClass:"col",attrs:{field:e.getField(s.fieldId),"repository-id":e.file.repositoryId,"read-only":e.readOnly},model:{value:s.newValue,callback:function(t){e.$set(s,"newValue",t)},expression:"field.newValue"}})]]],2)})):e._e()],2)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.save}})]},proxy:!0}])})},a=[],o=(s("14d9"),s("7bb1")),r=s("6a70"),n=s("7794"),l=s("9996"),c=s("7ee8"),d={name:"MetaDataEdit",components:{Modal:r["a"],ValidationObserver:o["a"],RepositoryField:n["a"]},props:{value:{type:Boolean,default:!1},file:{type:Object,required:!0},repositoryField:{type:Array,required:!0},fileData:{type:Array,required:!0},title:{type:String,default:"Metadata Edit"},columns:{type:Array,default:()=>[]},modalValue:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1},uploadFilename:{type:String,default:""},editFromFileSheet:{type:Boolean,default:!1},metaDataFields:{type:Object,default:()=>{}}},data(){return{fieldsModel:{},fieldsModalData:[]}},computed:{_repositoryField(){return this.repositoryField.map(e=>({...e,options:e.options?JSON.parse(e.options):[]}))}},watch:{fileData:{immediate:!0,deep:!0,async handler(){this.editFromFileSheet?(this.fieldsModalData=[],this.fileData.length&&this.fileData.forEach(e=>{this.fieldsModalData.push({fieldId:e.id,oldValue:e.value,newValue:e.value})})):this.processFieldsModel()}},value(){this.value&&this.processFieldsModel()}},methods:{processFieldsModel(){if(this.fieldsModel={},this.fileData.length?this.fileData.forEach(e=>{this.$set(this.fieldsModel,e.name,e.value)}):this._repositoryField.forEach(e=>{let t=this.columns.find(t=>Object(l["a"])(t.label)===Object(l["a"])(e.name));t?this.modalValue.formData?this.$set(this.fieldsModel,e.name,this.modalValue.formData.fields[t.id]):this.modalValue[t.name]?this.$set(this.fieldsModel,e.name,this.modalValue[t.name]):this.modalValue[t.id]&&this.$set(this.fieldsModel,e.name,this.modalValue[t.id]):Object(c["a"])(this.metaDataFields)?this.$set(this.fieldsModel,e.name,""):this.$set(this.fieldsModel,e.name,this.metaDataFields[e.name])}),this.uploadFilename){let e=this.uploadFilename.substring(0,this.uploadFilename.lastIndexOf(".")),t=this._repositoryField.find(e=>"filename"==e.name.toLowerCase());t&&this.$set(this.fieldsModel,t.name,e)}},closeModal(){this.$emit("close",!1)},async save(){const e=await this.$refs.form.validate();e&&(this.$emit("save",this.editFromFileSheet?this.fieldsModalData:this.fieldsModel),this.$emit("close",!1))},getField(e){let t=this._repositoryField.find(t=>e===t.id);if(t)return t}}},u=d,m=(s("4697"),s("2877")),h=Object(m["a"])(u,i,a,!1,null,"059cbd7c",null);t["a"]=h.exports},ee74:function(e,t,s){},ee7b:function(e,t,s){},eed3:function(e,t,s){"use strict";s("e170")},ef04:function(e,t,s){},f00a:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"eva-trash-2-outline","icon-color":"red"},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Delete Connection?")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" Are you sure you want to delete the "+e._s(e.appName)+" connection entry? ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"red"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"red"},on:{click:e.handleYes}})]},proxy:!0}])})},a=[],o=s("1c54"),r={name:"ConfirmDeleteFormEntry",components:{Confirm:o["a"]},props:{value:{type:Boolean,required:!0},appName:{type:String,default:""}},methods:{handleInput(e){this.$emit("input",e)},handleNo(){this.$emit("input",!1)},handleYes(){this.$emit("input",!1),this.$emit("delete",{isDeleted:!0})}}},n=r,l=s("2877"),c=Object(l["a"])(n,i,a,!1,null,"939297ac",null);t["a"]=c.exports},f042:function(e,t,s){"use strict";s("c721")},f39e:function(e,t,s){"use strict";s("1870")},f458:function(e,t,s){},f6de:function(e,t,s){},f92f:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"item-list"}},[e.selectedDummyData?e._t("default"):e._e(),t("BaseScrollbar",{attrs:{height:e.breadcrumbs||e.report?"calc(100vh - 310px)":"calc(100vh - 260px)"}},[t("table",[e.tableHeader?t("thead",[t("tr",{staticStyle:{"background-color":"var(--body-bg-color)"}},[t("th",{staticClass:"sticky icon",staticStyle:{left:"0"}},[e.checkbox?t("div",{staticClass:"row items-center justify-center"},[t("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:e.handleSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}})],1):e._e()]),e.repository&&e.checkbox?[t("th",{staticClass:"sticky file-mark-icon",staticStyle:{left:"44px"}}),e.title?t("th",{staticClass:"sticky",staticStyle:{left:"80px"}},[e._t("titleHead",(function(){return[e._v(" "+e._s(e.title.label)+" ")]}),{title:e.title.label})],2):e._e()]:[e.title?t("th",{staticClass:"sticky",staticStyle:{left:"36px"}},[e._t("titleHead",(function(){return[e._v(" "+e._s(e.title.label)+" ")]}),{title:e.title.label})],2):e._e()],e._l(e._columns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),e.noActions?e._e():t("th",{staticClass:"sticky action",staticStyle:{right:"0"}})],2)]):e._e(),t("tbody",[e._l(e.items,(function({key:s,value:i,data:a}){return[s?t("tr",{key:i},[t("td",{staticClass:"group-by",attrs:{colspan:"2"}},[t("span",{staticClass:"key"},[e._v(e._s(s)+": ")]),t("span",[e._v(e._s(i)+" ")]),t("span",[e._v("("+e._s(a.length)+")")])])]):e._e(),e._l(a,(function(s,i){return[t("tr",{key:s.id,class:{"no-border":0===i,background:!e.noBackground,checkout:2===s.checkinStatus},on:{click:function(t){return e.toggleLink(s,a)}}},[e.repository&&e.checkbox?[t("td",{staticClass:"sticky icon",staticStyle:{left:"0"}},[e.checkbox?t("div",{staticClass:"row items-center justify-center"},[t("CheckboxField",{on:{input:function(t){return e.handleCheckboxChange(s.id)}},model:{value:s.selected,callback:function(t){e.$set(s,"selected",t)},expression:"item.selected"}})],1):e._e()]),t("td",{staticClass:"sticky file-mark-icon",staticStyle:{left:"44px"}},[t("div",{staticClass:"row items-center justify-center",staticStyle:{width:"20px"}},[e._t("avatar",null,{item:s})],2)])]:[t("td",{staticClass:"sticky icon",staticStyle:{left:"0",width:"36px"}},[e.checkbox?t("div",{staticClass:"col items-center justify-center"},[t("CheckboxField",{on:{input:function(t){return e.handleCheckboxChange(s.id)}},model:{value:s.selected,callback:function(t){e.$set(s,"selected",t)},expression:"item.selected"}}),s.subWorkflow?[s.subWorkflow.length?t("BaseIcon",{staticClass:"cursor-pointer q-ml-sm",attrs:{name:s.expandSubworkflow?"mdi-chevron-down":"mdi-chevron-up"}}):e._e()]:e._e()],2):t("div",{staticClass:"col items-center justify-center"},[e._t("avatar",(function(){return[s.buttonAction?["Closed"!==s.status?[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Mark Completed",expression:"'Mark Completed'",modifiers:{top:!0}}],attrs:{name:e.selectedRowIndex===i?"mdi-check":s.icon,color:e.selectedRowIndex===i?"primary":s.color},on:{mouseover:function(t){e.selectedRowIndex=i},mouseout:function(t){e.selectedRowIndex=-1},click:function(t){return e.$emit("complete",s.id)}}})]:[t("BaseIcon",{attrs:{name:s.icon,color:s.color}})]]:[s.iconTooltip?[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.iconTooltip,expression:"item.iconTooltip",modifiers:{top:!0}}],attrs:{name:s.icon,color:s.color||"secondary"}})]:[t("BaseIcon",{attrs:{name:s.icon,color:s.color||"secondary"}})]]]}),{item:s}),s.subWorkflow?[s.subWorkflow.length?t("BaseIcon",{staticClass:"cursor-pointer q-ml-sm",attrs:{name:s.expandSubworkflow?"mdi-chevron-down":"mdi-chevron-up"}}):e._e()]:e._e()],2)])],e.title?t("td",{staticClass:"sticky",style:"left:"+e.leftcount,on:{click:function(t){s.link&&e.$emit("select",s.id,a)}}},[e._t("title",(function(){return[t("div",{staticClass:"font-medium ellipsis",class:s.link?"text-underline":"",staticStyle:{"max-width":"250px"}},[t("span",{on:{mouseover:function(t){return e.$emit("showThumbnail",s,t)},mouseleave:function(t){return e.$emit("hideThumbnail",s)}}},[e._v(e._s(s[e.title.name])+" ")])])]}),{item:s,title:s[e.title.name]}),e._t("thumbnail",null,{item:s})],2):e._e(),e._l(e._columns,(function(i){return t("td",{key:i.id},[e._t(i.name,(function(){return["TABLE"===i.dataType?[s[i.name]?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Table Data",expression:"'Table Data'",modifiers:{top:!0}}],attrs:{icon:"mdi-table","is-flat":"","no-border":""},on:{click:function(t){return t.stopPropagation(),e.showTable(i.name,s[i.name])}}})]:[t("BaseActionButton",{attrs:{icon:"mdi-table","is-flat":"","no-border":"","is-disabled":""}})]]:"ICON"===i.type?[s[i.name]?[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.iconTooltip[i.name],expression:"item.iconTooltip[column.name]",modifiers:{top:!0}}],attrs:{name:s[i.name],color:s.iconColor[i.name]}})]:[e._v(" "+e._s("-")+" ")]]:"FILE_UPLOAD"===i.dataType?[s[i.name]?["string"===typeof s[i.name]?t("div",{staticClass:"ellipsis medium"},e._l(JSON.parse(s[i.name]),(function(i,a){return t("div",{key:a,staticClass:"row"},[t("FileIcon",{staticClass:"mini-avatar col-auto q-mr-sm",attrs:{"mime-type":e.fileType(i.fileName)}}),t("span",{staticClass:"text-secondary file-underline col",on:{click:function(t){return e.viewFile(i,s)}}},[e._v(e._s(i.fileName))])],1)})),0):t("div",{staticClass:"ellipsis medium"},e._l(s[i.name],(function(i,a){return t("div",{key:a,staticClass:"row"},[t("FileIcon",{staticClass:"mini-avatar col-auto q-mr-sm",attrs:{"mime-type":e.fileType(i.fileName)}}),t("span",{staticClass:"text-secondary file-underline col",on:{click:function(t){return e.viewFile(i,s)}}},[e._v(e._s(i.fileName))])],1)})),0)]:e._e()]:[t("div",{class:{"data-change":e.hasMetaDataEdit},on:{click:function(t){return e.handleOpenInput(s,i)}}},[e._v(" "+e._s(s[i.name]||"-")+" ")])]]}),{value:s[i.name],item:s})],2)})),e.noActions?e._e():t("td",{staticClass:"sticky action",staticStyle:{right:"0",width:"50px"}},[e._t("actions",(function(){return["BROWSE"===e.mode?[s.actionAccess?e._e():[t("div",{staticClass:"row justify-end no-wrap"},[e.security||e.visibility(s)?[s.actionButton?[s.infoIcon?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.infoIconTooltip,expression:"item.infoIconTooltip",modifiers:{top:!0}}],attrs:{icon:s.infoIcon,color:s.infoIconColor?s.infoIconColor:"primary","is-flat":"","no-border":""},on:{click:function(t){return t.stopPropagation(),e.$emit("info",s.id)}}}):e._e(),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"mdi-check-all",color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit",s.id)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"mdi-bell-outline",color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit",s.id)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-edit-outline",color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit",s.id)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-shield-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("secure",s.id)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline",color:"red"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete",s.id)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-more-vertical"},on:{click:function(t){return t.stopPropagation(),e.$emit("more",s.id)}}},[e._t("extraMenu")],2)]:[s.infoIcon?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.infoIconTooltip,expression:"item.infoIconTooltip",modifiers:{top:!0}}],attrs:{icon:s.infoIcon,color:s.infoIconColor?s.infoIconColor:"primary","is-flat":"","no-border":""},on:{click:function(t){return t.stopPropagation(),e.$emit("info",s.id)}}}):e._e(),1===s.emailStatus?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"send invite",expression:"'send invite'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-email-check-outline",color:"green"},on:{click:function(t){return t.stopPropagation(),e.$emit("resend",s.id)}}}):0===s.emailStatus?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"send invite",expression:"'send invite'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-email-sync-outline",color:"orange"},on:{click:function(t){return t.stopPropagation(),e.$emit("resend",s.id)}}}):e.resend?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"send invite",expression:"'send invite'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-email-outline",color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.$emit("resend",s.id)}}}):e._e(),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-edit-outline",color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit",s.id)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline",color:"red"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete",s.id)}}}),e.showExport?t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-download-outline",color:"orange"},on:{click:function(t){return t.stopPropagation(),e.$emit("export",s.id)}}}):e._e(),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-more-vertical"},on:{click:function(t){return t.stopPropagation(),e.$emit("more",s.id)}}},[e._t("extraMenu")],2)]]:e._e()],2)]]:e._e(),"TRASH"===e.mode?[t("div",{staticClass:"row justify-end"},[t("BaseActionButton",{attrs:{"is-flat":"",color:"secondary",icon:"mdi-history","no-border":""},on:{click:function(t){return t.stopPropagation(),e.$emit("restore",s.id)}}})],1)]:e._e()]}),{item:s})],2)],2),s.subWorkflow?[s.subWorkflow.length?[s.expandSubworkflow?t("tr",{key:s.id,staticClass:"sub-background"},[t("td",{attrs:{colspan:e._columns.length+3}},[t("table",{key:"subtable"+s.id,staticStyle:{"margin-left":"20px",border:"1px solid var(--divider-color)","table-layout":"fixed","max-width":"70%","min-width":"calc(70% - 1px)","border-collapse":"collapse","white-space":"nowrap"}},[t("thead",[t("tr",[t("th",{staticClass:"sticky icon",staticStyle:{left:"0","background-color":"rgb(222 217 247)",width:"2%"},attrs:{name:"icon"}}),e.title?t("th",{staticClass:"sticky",staticStyle:{left:"36px","background-color":"rgb(222 217 247)",width:"2%"},attrs:{name:"title"}},[t("div",{staticClass:"font-medium ellipsis",staticStyle:{"max-width":"250px"}},[e._v(" "+e._s(e.title.label)+" ")])]):e._e(),e._l(e._subWorkflowColumns,(function(s){return t("th",{key:s.id,staticStyle:{"background-color":"rgb(222 217 247)",width:"2%"}},[e._v(" "+e._s(s.label)+" ")])})),t("th",{staticClass:"sticky",staticStyle:{"background-color":"rgb(222 217 247)"}})],2)]),t("tbody",[e._l(s.subWorkflow,(function(s){return[t("tr",{key:s.requestNo},[t("td",{staticClass:"sticky icon sub-background",staticStyle:{left:"0"},attrs:{name:"avatar"}},[t("div",{staticClass:"row items-center sticky justify-center"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.iconTooltip,expression:"subItem.iconTooltip",modifiers:{top:!0}}],attrs:{name:s.icon,color:s.color}})],1)]),t("td",{staticClass:"sticky sub-background",staticStyle:{left:"0",width:"20%",color:"#007bff",cursor:"pointer"},attrs:{name:"title"}},[t("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.requestNo,expression:"subItem.requestNo",modifiers:{top:!0}}],staticClass:"row items-center text-underline",staticStyle:{overflow:"hidden !important","white-space":"unset !important",width:"220px"},on:{click:function(t){return e.openSubProcess(s)}}},[e._v(" "+e._s(s.requestNo||"-")+" ")])]),t("td",{staticClass:"sub-background",staticStyle:{width:"20%"}},[e._v(" "+e._s(s.stage)+" ")]),t("td",{staticClass:"sub-background",staticStyle:{width:"20%"}},[e._v(" "+e._s(s.raisedBy)+" ")]),t("td",{staticClass:"sub-background",staticStyle:{width:"20%"}},[e._v(" "+e._s(s.raisedAt)+" ")]),t("td",{staticClass:"sticky sub-background",staticStyle:{right:"0px",width:"20%"}},[e._t("subactions",null,{item:s})],2)])]}))],2)])])]):e._e()]:e._e()]:e._e()]}))]}))],2)])]),t("Modal",{attrs:{width:"60vw",height:"80vh"},on:{input:function(t){e.expandTableModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.tableTitle))]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"tableData"}},[e.tableData.cellvalues?[t("table",e._l(e.tableData.cellvalues,(function(s,i){return t("tr",{key:i},e._l(s,(function(s){return t("NoHeader"===s.kind?"td":"th",{key:`r${i}_c${s.columnindex}`,tag:"th"},[e._v(" "+e._s(s.cellvalue)+" ")])})),1)})),0)]:[t("table",[t("thead",[t("tr",e._l(e.tableData[0],(function(s,i){return t("th",{key:i},[e._v(" "+e._s(i)+" ")])})),0)]),t("tbody",e._l(e.tableData,(function(s,i){return t("tr",{key:i},e._l(s,(function(s,i){return t("td",{key:i},[e._v(" "+e._s(s)+" ")])})),0)})),0)])]],2)]},proxy:!0}]),model:{value:e.expandTableModal,callback:function(t){e.expandTableModal=t},expression:"expandTableModal"}})],2)},a=[],o=(s("caad"),s("869e")),r=s("6a70"),n=s("fa1f"),l={name:"ItemList",components:{CheckboxField:o["a"],Modal:r["a"],FileIcon:n["a"]},props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},mode:{type:String,required:!0},noBackground:{type:Boolean,default:!1},noActions:{type:Boolean,default:!1},tableHeader:{type:Boolean,default:!0},security:{type:Boolean,default:!0},checkbox:{type:Boolean,default:!1},hasMetaDataEdit:{type:Boolean,required:!1},breadcrumbs:{type:Boolean,default:!1},report:{type:Boolean,default:!1},resend:{type:Boolean,default:!1},selectAll:{type:Boolean,default:!1},repository:{type:Boolean,default:!1},showExport:{type:Boolean,default:!1}},data(){return{selectedRowIndex:-1,userId:this.$store.state.session.id,email:this.$store.state.session.email,selectedDummyData:!1,expandTableModal:!1,tableTitle:"",tableData:[]}},computed:{_columns(){return this.columns.filter(e=>"TITLE"!==e.type&&e.isVisible)},title(){return this.columns.find(e=>"TITLE"===e.type)},leftcount(){return this.repository&&this.checkbox?"80px":"36px"},_subWorkflowColumns(){let e=[{id:this.$nano.id(),name:"stage",label:"Stage",type:"SINGLE_SELECT",isVisible:!0,isSortable:!0,isGroupable:!1},{id:this.$nano.id(),name:"raisedBy",label:"Raised By",type:"SINGLE_SELECT",isVisible:!0,isSortable:!0,isGroupable:!1},{id:this.$nano.id(),name:"raisedAt",label:"Raised On",type:"DATE",isVisible:!0,isSortable:!0,isGroupable:!1}];return e}},created(){this.items.forEach(e=>{e.data.forEach(e=>{this.$set(e,"selected",!1)})})},methods:{visibility(e){const t=Number(this.userId),s=this.email;let i=!1;const a=e.owner?e.owner.map(e=>e.id):[0],o=e.coordinator?e.coordinator.map(e=>e.id):[0];return(e.createdBy===s||a.includes(t)||o.includes(t)||1===t)&&(i=!0),i},handleCheckboxChange(e){this.selectAll=!1,this.selectedDummyData=!this.selectedDummyData;const t=this.items.flatMap(e=>e.data).find(t=>t.id===e);t&&this.$set(t,"selected",t.selected),this.$emit("update-selected-all",this.selectAll)},handleSelectAll(){!0===this.selectAll&&this.items.forEach(e=>{e.data.forEach(e=>{this.$set(e,"selected",!0)})}),!1===this.selectAll&&this.items.forEach(e=>{e.data.forEach(e=>{this.$set(e,"selected",!1)})}),this.$emit("update-selected-all",this.selectAll)},showTable(e,t){t&&(this.report?this.$emit("showTable",e,t):(this.tableTitle=e,this.tableData=JSON.parse(t),this.expandTableModal=!0))},handleOpenInput(e,t){this.$emit("openMetaDataEdit",e,t)},viewFile(e,t){e.createdBy=t.createdBy,e.createdAt=t.createdAt,e.name||(e.name=e.fileName),e.id||(e.id=e.itemId),this.$emit("viewFile",e)},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},toggleLink(e,t){e.expandSubworkflow=!e.expandSubworkflow,!e.link&&this.$emit("select",e.id,t),this.selectedDummyData=!this.selectedDummyData},openSubProcess(e){this.$emit("openSubWorkflow",e)}}},c=l,d=(s("d37d"),s("2877")),u=Object(d["a"])(c,i,a,!1,null,"00be4c3f",null);t["a"]=u.exports},f98d:function(e,t,s){},fa79:function(e,t,s){"use strict";s("3002")},fabd:function(e,t,s){},fad0:function(e,t,s){},fbb4:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,"has-footer":"","no-padding":"",width:"100vw"},on:{input:e.colseConnection},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("API Connection")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-pa-md"},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"col"},[t("div",{attrs:{id:"api-input"}},[e._e(),t("div",{staticClass:"item-list"},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"label"},[e._v(e._s(e.method))]),t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-chevron-down","inherit-color":""}})],1),t("q-menu",{attrs:{fit:"","auto-close":"","transition-show":"scale","transition-hide":"scale"}},e._l(e.methodList,(function(s){return t("ListItem",{key:s.id,staticClass:"text-capitalize",attrs:{"is-selected":e.method===s.value,label:s.label},on:{click:function(t){e.method=s.value}}})})),1)],1),t("BaseSeparator",{staticClass:"q-mx-sm",attrs:{"is-vertical":""}}),t("div",{staticClass:"api-url"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.apiUrl,expression:"apiUrl"}],attrs:{placeholder:"URL"},domProps:{value:e.apiUrl},on:{input:function(t){t.target.composing||(e.apiUrl=t.target.value)}}})])],1)]),t("div",{staticClass:"col-auto q-ml-sm"},[t("BaseButton",{staticClass:"q-pa-xs",attrs:{label:"send",color:"secondary"},on:{click:e.testApiConnection}})],1)]),t("Tabs",{staticClass:"tabs",attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),t("div",{staticClass:"q-mb-md input"},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:"calc(100vh - 456px)"}},["params"===e.tab?t("Parameter",{attrs:{parameter:e.parameter},on:{add:e.addRow,delete:e.deleteRow}}):e._e(),"authorization"===e.tab?t("Authorization",{attrs:{auth2:e.auth2,type:e.authorizationType},on:{"update:type":function(t){e.authorizationType=t}}}):e._e(),"headers"===e.tab?t("Headers"):e._e(),"body"===e.tab?t("Body"):e._e()],1)],1),t("div",{staticClass:"q-mb-md"},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:"calc(100vh - 456px)"}},[t("div",{staticClass:"responseTitle"},[e._v("Response")]),e.response||e.apiFunctionResponse?e._e():t("div",{staticClass:"row items-center justify-center"},[t("div",{staticClass:"empty description"},[e._v(" Enter the URL and click Send to get a response ")])]),e.response?t("div",{staticClass:"response"},[e._v(" "+e._s(e.response)+" ")]):e._e(),e.apiFunctionResponse?t("div",{staticClass:"response"},[e._v(" "+e._s(e.apiFunctionResponse)+" ")]):e._e()])],1),t("AddName",{attrs:{name:e.name},on:{"update:name":function(t){e.name=t},close:function(t){e.showNameModal=!1,e.name=""},save:e.saveApi},model:{value:e.showNameModal,callback:function(t){e.showNameModal=t},expression:"showNameModal"}})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{label:"cancel","is-flat":""},on:{click:e.colseConnection}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.save}})]},proxy:!0}])})},a=[],o=(s("14d9"),s("381e")),r=s("12b8"),n=s("cade"),l=s("b94d"),c=function(){var e=this,t=e._self._c;return t("div",{staticClass:"q-my-md",attrs:{id:"table-field"}},[t("FormFieldLabel",{attrs:{label:"Query Params"}}),t("BaseScrollbar",{staticClass:"q-pb-sm"},[t("table",[t("thead",[t("tr",[e._l(e.tableColumns,(function(s){return t("th",{key:s.id,staticClass:"medium"},[e._v(" "+e._s(s.label)+" ")])})),t("th",{staticClass:"actions"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"add row",expression:"'add row'",arg:"top"}],attrs:{"is-flat":"",color:"primary",icon:"eva-plus","no-border":""},on:{click:function(t){return e.$emit("add")}}})],1)],2)]),t("tbody",e._l(e.parameter,(function(s,i){return t("tr",{key:s.id},[e._l(e.tableColumns,(function(i){return t("td",{key:i.id},[t("ValidationProvider",{attrs:{name:i.label,rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("TextField",{attrs:{"is-mandatory":"",error:a[0]},model:{value:s[i.value],callback:function(t){e.$set(s,i.value,t)},expression:"row[column.value]"}})]}}],null,!0)})],1)})),t("td",{staticClass:"actions"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"delete row",expression:"'delete row'"}],attrs:{"is-flat":"",color:"red",icon:"eva-trash-outline","no-border":""},on:{click:function(t){return e.$emit("delete",i)}}})],1)],2)})),0)])]),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e()],1)},d=[],u=s("7bb1"),m=s("3445"),h=s("e683"),p=s("b3d1"),f={name:"Parameter",components:{ValidationProvider:u["b"],FormFieldLabel:m["a"],FormFieldError:h["a"],TextField:p["a"]},props:{parameter:{type:Array,default:()=>[]}},data(){return{tableColumns:[{id:this.$nano.id(),label:"Key",value:"key"},{id:this.$nano.id(),label:"Value",value:"value"},{id:this.$nano.id(),label:"Description",value:"description"}],rows:[{id:this.$nano.id(),Key:"",Value:"",Description:""}],error:""}},methods:{}},v=f,y=(s("cf1a"),s("2877")),b=Object(y["a"])(v,c,d,!1,null,null,null),g=b.exports,w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"q-my-sm authorization"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-4 authorization-header"},[t("div",{staticClass:"q-pa-sm"},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"col"},[t("FormFieldLabel",{attrs:{label:"Type"}})],1),t("div",{staticClass:"col-5"},[t("ValidationProvider",{attrs:{name:"type",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{value:e.type,"is-mandatory":"",options:e.typeList,error:s[0]},on:{input:e.updateType}})]}}])})],1)]),"No Auth"!==e.type?[t("div",{staticClass:"description q-mt-sm row items-center justify-center"},[e._v(" The authorization data will be automatically generated when you send the request. ")]),"Inherit auth from parent"!==e.type&&"API Key"!==e.type&&"Bearer Token"!==e.type&&"Basic Auth"!==e.type?t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col"},[t("FormFieldLabel",{attrs:{label:"Add authorization data to"}})],1),t("div",{staticClass:"col-5"},[t("ValidationProvider",{attrs:{name:"Add authorization data to",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{"is-mandatory":"",options:e.addAuthorizationList,error:s[0]},model:{value:e.addAuthorization,callback:function(t){e.addAuthorization=t},expression:"addAuthorization"}})]}}],null,!1,1595139295)})],1)]):e._e(),"Digest Auth"===e.type?t("div",{staticClass:"description q-mt-sm"},[e._v(" By default, Postman will extract values from the received response, add it to the request, and retry it. Do you want to disable this?By default, Postman will extract values from the received response, add it to the request, and retry it. Do you want to disable this? "),t("CheckboxField",{staticClass:"q-mt-sm",attrs:{label:"Yes, disable retring the request",description:""},model:{value:e.digestAuth.disableRequest,callback:function(t){e.$set(e.digestAuth,"disableRequest",t)},expression:"digestAuth.disableRequest"}})],1):e._e()]:e._e()],2)]),t("div",{staticClass:"col-7 q-ml-md"},["API Key"===e.type?[t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Key"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Key",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.apiKey.key,callback:function(t){e.$set(e.apiKey,"key",t)},expression:"apiKey.key"}})]}}],null,!1,4032441324)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Value"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Value",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.apiKey.value,callback:function(t){e.$set(e.apiKey,"value",t)},expression:"apiKey.value"}})]}}],null,!1,3126034192)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Add to"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Add to",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{"is-mandatory":"",options:e.addToList,error:s[0]},model:{value:e.apiKey.addTo,callback:function(t){e.$set(e.apiKey,"addTo",t)},expression:"apiKey.addTo"}})]}}],null,!1,3981724746)})],1)])]:e._e(),"Bearer Token"===e.type?[t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Token"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Token",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.bearerToken.token,callback:function(t){e.$set(e.bearerToken,"token",t)},expression:"bearerToken.token"}})]}}],null,!1,1538679159)})],1)])]:e._e(),"No Auth"===e.type?[t("div",{staticClass:"row items-center justify-center description"},[e._v(" This request does not use any authorization ")])]:e._e(),"Inherit auth from parent"===e.type?[t("div",{staticClass:"row items-center justify-center description"},[e._v(" This request is not inheriting any authorization helper at the moment. Save it in a collection to use the parent's authorization helper. ")])]:e._e(),"JWT Bearer"===e.type?[t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Algorithm",tooltip:"Algorithm used to generate the JWT signature"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Algorithm",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{"is-mandatory":"",options:e.algorithmList,error:s[0]},model:{value:e.jwtBearer.algorithm,callback:function(t){e.$set(e.jwtBearer,"algorithm",t)},expression:"jwtBearer.algorithm"}})]}}],null,!1,2234882319)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Secret",tooltip:"Secret used to generate the JWT signature"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Secret",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.jwtBearer.secret,callback:function(t){e.$set(e.jwtBearer,"secret",t)},expression:"jwtBearer.secret"}}),t("CheckboxField",{staticClass:"q-mt-sm",attrs:{label:"Secret Base64 encoded",description:""},model:{value:e.jwtBearer.secretBase64,callback:function(t){e.$set(e.jwtBearer,"secretBase64",t)},expression:"jwtBearer.secretBase64"}})]}}],null,!1,1644358458)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Payload",tooltip:"A JSON object that contains the claims conveyed by the JWT"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Payload",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextAreaField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.jwtBearer.payload,callback:function(t){e.$set(e.jwtBearer,"payload",t)},expression:"jwtBearer.payload"}})]}}],null,!1,810357671)})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"group-by col-auto q-mb-sm",on:{click:function(t){e.jwtBearer.advancedSettings=!e.jwtBearer.advancedSettings}}},[e._m(0),t("BaseIcon",{staticClass:"cursor-pointer q-ml-sm",attrs:{name:e.jwtBearer.advancedSettings?"mdi-chevron-down":"mdi-chevron-up"},on:{click:function(t){e.jwtBearer.advancedSettings=!e.jwtBearer.advancedSettings}}})],1)]),e.jwtBearer.advancedSettings?[t("div",{staticClass:"row items-center q-mb-sm description"},[e._v(" This request does not use any authorization ")]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Request header prefix",tooltip:"The prefix added to the authorization header in the request"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Request header prefix",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.jwtBearer.advanced.reqHeaderPrefix,callback:function(t){e.$set(e.jwtBearer.advanced,"reqHeaderPrefix",t)},expression:"jwtBearer.advanced.reqHeaderPrefix"}})]}}],null,!1,3558127367)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"JWT headers",tooltip:"These values will be appended to the JWT headers"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"JWT headers",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextAreaField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.jwtBearer.advanced.JWTHeaders,callback:function(t){e.$set(e.jwtBearer.advanced,"JWTHeaders",t)},expression:"jwtBearer.advanced.JWTHeaders"}})]}}],null,!1,2626698428)}),t("div",{staticClass:"description"},[e._v(" Headers specific to the algorithm are added automatically. ")])],1)])]:e._e()]:e._e(),"Basic Auth"===e.type?[t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Username"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Username",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.basicAuth.username,callback:function(t){e.$set(e.basicAuth,"username",t)},expression:"basicAuth.username"}})]}}],null,!1,490451888)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Password"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Password",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.basicAuth.password,callback:function(t){e.$set(e.basicAuth,"password",t)},expression:"basicAuth.password"}})]}}],null,!1,3586585593)})],1)])]:e._e(),"Digest Auth"===e.type?[t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Username"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Username",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.digestAuth.username,callback:function(t){e.$set(e.digestAuth,"username",t)},expression:"digestAuth.username"}})]}}],null,!1,2960907298)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Password"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Password",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.digestAuth.password,callback:function(t){e.$set(e.digestAuth,"password",t)},expression:"digestAuth.password"}})]}}],null,!1,1690178027)})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"group-by col-auto q-mb-sm",on:{click:function(t){e.digestAuth.advancedSettings=!e.digestAuth.advancedSettings}}},[e._m(1),t("BaseIcon",{staticClass:"cursor-pointer q-ml-sm",attrs:{name:e.digestAuth.advancedSettings?"mdi-chevron-down":"mdi-chevron-up"},on:{click:function(t){e.digestAuth.advancedSettings=!e.digestAuth.advancedSettings}}})],1)]),e.digestAuth.advancedSettings?[t("div",{staticClass:"row items-center q-mb-sm description"},[e._v(" Postman auto-generates default values for some of these fields unless a value is specified. ")]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Realm"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Realm",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.digestAuth.advanced.realm,callback:function(t){e.$set(e.digestAuth.advanced,"realm",t)},expression:"digestAuth.advanced.realm"}})]}}],null,!1,2313701331)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Nonce"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Nonce",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.digestAuth.advanced.nonce,callback:function(t){e.$set(e.digestAuth.advanced,"nonce",t)},expression:"digestAuth.advanced.nonce"}})]}}],null,!1,125490605)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Algorithm"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Algorithm",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{"is-mandatory":"",options:e.digestAuthAlgorithmList,error:s[0]},model:{value:e.digestAuth.advanced.algorithm,callback:function(t){e.$set(e.digestAuth.advanced,"algorithm",t)},expression:"digestAuth.advanced.algorithm"}})]}}],null,!1,1919091765)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"qop"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"qop",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.digestAuth.advanced.qop,callback:function(t){e.$set(e.digestAuth.advanced,"qop",t)},expression:"digestAuth.advanced.qop"}})]}}],null,!1,4028447914)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Nonce Count"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Nonce Count",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.digestAuth.advanced.nonceCount,callback:function(t){e.$set(e.digestAuth.advanced,"nonceCount",t)},expression:"digestAuth.advanced.nonceCount"}})]}}],null,!1,3732887726)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Client Nonce"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Client Nonce",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.digestAuth.advanced.clientNonce,callback:function(t){e.$set(e.digestAuth.advanced,"clientNonce",t)},expression:"digestAuth.advanced.clientNonce"}})]}}],null,!1,1666650068)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Opaque"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Opaque",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.digestAuth.advanced.opaque,callback:function(t){e.$set(e.digestAuth.advanced,"opaque",t)},expression:"digestAuth.advanced.opaque"}})]}}],null,!1,2893382171)})],1)])]:e._e()]:e._e(),"OAuth 1.0"===e.type?[t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Signature Method"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Signature Method",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{"is-mandatory":"",options:e.signatureMethodList,error:s[0]},model:{value:e.auth1.signatureMethod,callback:function(t){e.$set(e.auth1,"signatureMethod",t)},expression:"auth1.signatureMethod"}})]}}],null,!1,553056220)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Consumer Key"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Consumer Key",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.consumerKey,callback:function(t){e.$set(e.auth1,"consumerKey",t)},expression:"auth1.consumerKey"}})]}}],null,!1,1301959556)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Consumer Secret"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Consumer Secret",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.consumerSecret,callback:function(t){e.$set(e.auth1,"consumerSecret",t)},expression:"auth1.consumerSecret"}})]}}],null,!1,3889332229)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Access Token"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Access Token",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.accessToken,callback:function(t){e.$set(e.auth1,"accessToken",t)},expression:"auth1.accessToken"}})]}}],null,!1,3603381298)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Token Secret"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Token Secret",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.tokenSecret,callback:function(t){e.$set(e.auth1,"tokenSecret",t)},expression:"auth1.tokenSecret"}})]}}],null,!1,3009011360)})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"group-by col-auto q-mb-sm",on:{click:function(t){e.auth1.advancedSettings=!e.auth1.advancedSettings}}},[e._m(2),t("BaseIcon",{staticClass:"cursor-pointer q-ml-sm",attrs:{name:e.auth1.advancedSettings?"mdi-chevron-down":"mdi-chevron-up"},on:{click:function(t){e.auth1.advancedSettings=!e.auth1.advancedSettings}}})],1)]),e.auth1.advancedSettings?[t("div",{staticClass:"row items-center q-mb-sm description"},[e._v(" Postman auto-generates default values for some of these fields unless a value is specified. ")]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Callback URL"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Callback URL",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.advanced.callbackURL,callback:function(t){e.$set(e.auth1.advanced,"callbackURL",t)},expression:"auth1.advanced.callbackURL"}})]}}],null,!1,3502676095)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Verifier"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Verifier",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.advanced.verifier,callback:function(t){e.$set(e.auth1.advanced,"verifier",t)},expression:"auth1.advanced.verifier"}})]}}],null,!1,4124159981)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Timestamp"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Timestamp",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.advanced.timestamp,callback:function(t){e.$set(e.auth1.advanced,"timestamp",t)},expression:"auth1.advanced.timestamp"}})]}}],null,!1,1418307731)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Nonce"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Nonce",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.advanced.nonce,callback:function(t){e.$set(e.auth1.advanced,"nonce",t)},expression:"auth1.advanced.nonce"}})]}}],null,!1,2517604244)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Version"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Version",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.advanced.version,callback:function(t){e.$set(e.auth1.advanced,"version",t)},expression:"auth1.advanced.version"}})]}}],null,!1,164457927)})],1)]),t("div",{staticClass:"row items-center q-mb-sm border-bottom"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Realm"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Realm",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.advanced.Realm,callback:function(t){e.$set(e.auth1.advanced,"Realm",t)},expression:"auth1.advanced.Realm"}})]}}],null,!1,1579644938)})],1)]),t("BaseSeparator",{staticClass:"q-my-sm"}),t("div",{staticClass:"q-mb-sm"},[t("CheckboxField",{staticClass:"q-mt-sm",attrs:{label:"Include body hash",description:""},model:{value:e.auth1.advanced.bodyHash,callback:function(t){e.$set(e.auth1.advanced,"bodyHash",t)},expression:"auth1.advanced.bodyHash"}}),t("CheckboxField",{staticClass:"q-mt-md",attrs:{label:"Add empty parameters to signature",description:""},model:{value:e.auth1.advanced.emptyParams,callback:function(t){e.$set(e.auth1.advanced,"emptyParams",t)},expression:"auth1.advanced.emptyParams"}})],1)]:e._e()]:e._e(),"oauth2"===e.type?[t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Token Name"}})],1),t("div",{staticClass:"col-4"},[t("TextField",{model:{value:e.auth2.tokenName,callback:function(t){e.$set(e.auth2,"tokenName",t)},expression:"auth2.tokenName"}})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Grant Type"}})],1),t("div",{staticClass:"col-4"},[t("SelectField",{attrs:{options:e.grantTypes},model:{value:e.auth2.grantType,callback:function(t){e.$set(e.auth2,"grantType",t)},expression:"auth2.grantType"}})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Access Token URL"}})],1),t("div",{staticClass:"col-4"},[t("TextField",{model:{value:e.auth2.accessTokenURL,callback:function(t){e.$set(e.auth2,"accessTokenURL",t)},expression:"auth2.accessTokenURL"}})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Client ID"}})],1),t("div",{staticClass:"col-4"},[t("TextField",{model:{value:e.auth2.clientId,callback:function(t){e.$set(e.auth2,"clientId",t)},expression:"auth2.clientId"}})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Client Secret"}})],1),t("div",{staticClass:"col-4"},[t("TextField",{model:{value:e.auth2.clientSecret,callback:function(t){e.$set(e.auth2,"clientSecret",t)},expression:"auth2.clientSecret"}})],1)]),"password"===e.auth2.grantType?[t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Username"}})],1),t("div",{staticClass:"col-4"},[t("TextField",{model:{value:e.auth2.username,callback:function(t){e.$set(e.auth2,"username",t)},expression:"auth2.username"}})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Password"}})],1),t("div",{staticClass:"col-4"},[t("PasswordField",{model:{value:e.auth2.password,callback:function(t){e.$set(e.auth2,"password",t)},expression:"auth2.password"}})],1)])]:e._e(),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Scope"}})],1),t("div",{staticClass:"col-4"},[t("TextField",{model:{value:e.auth2.scope,callback:function(t){e.$set(e.auth2,"scope",t)},expression:"auth2.scope"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"group-by col-auto q-mb-sm",on:{click:function(t){e.auth1.advancedSettings=!e.auth1.advancedSettings}}},[e._m(3),t("BaseIcon",{staticClass:"cursor-pointer q-ml-sm",attrs:{name:e.auth1.advancedSettings?"mdi-chevron-down":"mdi-chevron-up"},on:{click:function(t){e.auth1.advancedSettings=!e.auth1.advancedSettings}}})],1)]),e.auth1.advancedSettings?[t("div",{staticClass:"row items-center q-mb-sm description"},[e._v(" Postman auto-generates default values for some of these fields unless a value is specified. ")]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Callback URL"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Callback URL",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.advanced.callbackURL,callback:function(t){e.$set(e.auth1.advanced,"callbackURL",t)},expression:"auth1.advanced.callbackURL"}})]}}],null,!1,3502676095)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Verifier"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Verifier",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.advanced.verifier,callback:function(t){e.$set(e.auth1.advanced,"verifier",t)},expression:"auth1.advanced.verifier"}})]}}],null,!1,4124159981)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Timestamp"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Timestamp",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.advanced.timestamp,callback:function(t){e.$set(e.auth1.advanced,"timestamp",t)},expression:"auth1.advanced.timestamp"}})]}}],null,!1,1418307731)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Nonce"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Nonce",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.advanced.nonce,callback:function(t){e.$set(e.auth1.advanced,"nonce",t)},expression:"auth1.advanced.nonce"}})]}}],null,!1,2517604244)})],1)]),t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Version"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Version",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.advanced.version,callback:function(t){e.$set(e.auth1.advanced,"version",t)},expression:"auth1.advanced.version"}})]}}],null,!1,164457927)})],1)]),t("div",{staticClass:"row items-center q-mb-sm border-bottom"},[t("div",{staticClass:"col-3"},[t("FormFieldLabel",{attrs:{label:"Realm"}})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Realm",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"",error:s[0]},model:{value:e.auth1.advanced.Realm,callback:function(t){e.$set(e.auth1.advanced,"Realm",t)},expression:"auth1.advanced.Realm"}})]}}],null,!1,1579644938)})],1)]),t("BaseSeparator",{staticClass:"q-my-sm"}),t("div",{staticClass:"q-mb-sm"},[t("CheckboxField",{staticClass:"q-mt-sm",attrs:{label:"Include body hash",description:""},model:{value:e.auth1.advanced.bodyHash,callback:function(t){e.$set(e.auth1.advanced,"bodyHash",t)},expression:"auth1.advanced.bodyHash"}}),t("CheckboxField",{staticClass:"q-mt-md",attrs:{label:"Add empty parameters to signature",description:""},model:{value:e.auth1.advanced.emptyParams,callback:function(t){e.$set(e.auth1.advanced,"emptyParams",t)},expression:"auth1.advanced.emptyParams"}})],1)]:e._e()]:e._e()],2)]),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e()],1)},C=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-auto"},[t("div",{staticClass:"groupLabel"},[e._v("Advanced configuration")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-auto"},[t("div",{staticClass:"groupLabel"},[e._v("Advanced configuration")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-auto"},[t("div",{staticClass:"groupLabel"},[e._v("Advanced configuration")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-auto"},[t("div",{staticClass:"groupLabel"},[e._v("Advanced configuration")])])}],k=s("869e"),S=s("6df3"),_=s("8bc3"),I={name:"Authorization",components:{FormFieldLabel:m["a"],FormFieldError:h["a"],ValidationProvider:u["b"],SelectField:r["a"],TextField:p["a"],CheckboxField:k["a"],TextAreaField:S["a"],PasswordField:_["a"]},props:{auth2:{type:Object,default:()=>{}},type:{type:String,default:"Inherit auth from parent"}},data(){return{typeList:[{id:this.$nano.id(),label:"Inherit auth from parent",value:"Inherit auth from parent"},{id:this.$nano.id(),label:"No Auth",value:"No Auth"},{id:this.$nano.id(),label:"Basic Auth",value:"Basic Auth"},{id:this.$nano.id(),label:"Bearer Token",value:"Bearer Token"},{id:this.$nano.id(),label:"JWT Bearer",value:"JWT Bearer"},{id:this.$nano.id(),label:"Digest Auth",value:"Digest Auth"},{id:this.$nano.id(),label:"OAuth 1.0",value:"OAuth 1.0"},{id:this.$nano.id(),label:"OAuth 2.0",value:"oauth2"},{id:this.$nano.id(),label:"API Key",value:"API Key"}],addAuthorization:"Request Header",addAuthorizationList:[{id:this.$nano.id(),label:"Request Header",value:"Request Header"},{id:this.$nano.id(),label:"Query Params",value:"Query Params"}],error:"",apiKey:{addTo:"Header",value:"",key:""},addToList:[{id:this.$nano.id(),label:"Header",value:"Header"},{id:this.$nano.id(),label:"Query Params",value:"Query Params"}],bearerToken:{token:""},jwtBearer:{algorithm:"",secret:"",secretBase64:!1,payload:"",advanced:{reqHeaderPrefix:"",JWTHeaders:""},advancedSettings:!1},algorithmList:[{id:this.$nano.id(),label:"HS256",value:"HS256"},{id:this.$nano.id(),label:"HS384",value:"HS384"},{id:this.$nano.id(),label:"HS512",value:"HS512"},{id:this.$nano.id(),label:"RS256",value:"RS256"},{id:this.$nano.id(),label:"RS512",value:"RS512"},{id:this.$nano.id(),label:"PS256",value:"PS256"},{id:this.$nano.id(),label:"PS384",value:"PS384"},{id:this.$nano.id(),label:"PS512",value:"PS512"},{id:this.$nano.id(),label:"ES384",value:"ES384"},{id:this.$nano.id(),label:"ES512",value:"ES512"}],basicAuth:{username:"",Password:""},digestAuth:{username:"",Password:"",advanced:{realm:"",nonce:"",algorithm:"",qop:"",nonceCount:"",clientNonce:"",opaque:""},advancedSettings:!1,disableRequest:!1},digestAuthAlgorithmList:[{id:this.$nano.id(),label:"MD5",value:"MD5"},{id:this.$nano.id(),label:"MD5-sess",value:"MD5-sess"},{id:this.$nano.id(),label:"SHA-256",value:"SHA-256"},{id:this.$nano.id(),label:"SHA-256-sess",value:"SHA-256-sess"},{id:this.$nano.id(),label:"SHA-512-256",value:"SHA-512-256"},{id:this.$nano.id(),label:"SHA-512-256-sess",value:"SHA-512-256-sess"}],auth1:{signatureMethod:"",consumerKey:"",consumerSecret:"",accessToken:"",tokenSecret:"",advanced:{callbackURL:"",verifier:"",timestamp:"",nonce:"",version:"",realm:"",bodyHash:!1,emptyParams:!1},advancedSettings:!1},signatureMethodList:[],grantTypes:[{id:this.$nano.id(),label:"Password credentials",value:"password"},{id:this.$nano.id(),label:"Client credentials",value:"client"}]}},computed:{showInheritType(){return"Inherit auth from parent"===this.type},hideNoAuth(){return"No Auth"===this.type}},methods:{updateType(e){this.$emit("update:type",e)}}},x=I,T=(s("239f"),Object(y["a"])(x,w,C,!1,null,null,null)),$=T.exports,A=function(){var e=this,t=e._self._c;return t("div",{staticClass:"q-my-md",attrs:{id:"table-field"}},[t("div",{staticClass:"row items-center q-mb-sm"},[t("FormFieldLabel",{attrs:{label:"Headers"}}),t("div",{staticClass:"hide-headers",on:{click:function(t){e.showHeader=!e.showHeader}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:e.showHeader?"eva-eye-off-outline":"eva-eye-outline","inherit-color":"",size:"16px"}}),t("FormFieldLabel",{attrs:{label:e.showHeader?"Hide auto-generated headers":"5 Hidden"}})],1)],1),t("BaseScrollbar",{staticClass:"q-pb-sm"},[t("table",[t("thead",[t("tr",[t("th",{staticClass:"extra-small"}),e._l(e.tableColumns,(function(s){return t("th",{key:s.id,staticClass:"medium"},[e._v(" "+e._s(s.label)+" ")])}))],2)]),t("tbody",e._l(e.rows,(function(s){return t("tr",{key:s.id},[t("td",[s.showCheckBox?t("CheckboxField",{staticClass:"q-ml-md",attrs:{label:"",description:""},model:{value:s.hasHeader,callback:function(t){e.$set(s,"hasHeader",t)},expression:"row.hasHeader"}}):e._e()],1),e._l(e.tableColumns,(function(i){return t("td",{key:i.id},[t("ValidationProvider",{attrs:{name:i.label,rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("TextField",{attrs:{"is-mandatory":"",error:a[0]},model:{value:s[i.value],callback:function(t){e.$set(s,i.value,t)},expression:"row[column.value]"}})]}}],null,!0)})],1)}))],2)})),0)])]),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e()],1)},F=[],L={name:"Headers",components:{ValidationProvider:u["b"],FormFieldLabel:m["a"],FormFieldError:h["a"],TextField:p["a"],CheckboxField:k["a"]},data(){return{tableColumns:[{id:this.$nano.id(),label:"Key",value:"Key"},{id:this.$nano.id(),label:"Value",value:"Value"},{id:this.$nano.id(),label:"Description",value:"Description"}],rows:[{id:this.$nano.id(),Key:"",Value:"",Description:""}],error:"",showHeader:!1}},watch:{showHeader(){this.showHeader?this.rows=[{id:this.$nano.id(),Key:"Host",Value:"<calculated when request is sent>",Description:"",showCheckBox:!0,hasHeader:!0},{id:this.$nano.id(),Key:"User-Agent",Value:"PostmanRuntime/7.34.0",Description:"",showCheckBox:!0,hasHeader:!0},{id:this.$nano.id(),Key:"Accept",Value:"*/*",Description:"",showCheckBox:!0,hasHeader:!0},{id:this.$nano.id(),Key:"Accept-Encoding",Value:"gzip, deflate, br",Description:"",showCheckBox:!0,hasHeader:!0},{id:this.$nano.id(),Key:"Connection",Value:"keep-alive>",Description:"",showCheckBox:!0,hasHeader:!0},{id:this.$nano.id(),Key:"",Value:"",Description:"",showCheckBox:!1,hasHeader:!1}]:this.rows=[{id:this.$nano.id(),Key:"",Value:"",Description:""}]}},methods:{}},B=L,P=(s("6f0e"),Object(y["a"])(B,A,F,!1,null,null,null)),D=P.exports,M=function(){var e=this,t=e._self._c;return t("div",{staticClass:"body q-my-md"},[t("div",{staticClass:"row items-center q-mb-md"},[t("div",{staticClass:"col-11"},[t("SingleChoiceField",{attrs:{"is-mandatory":"",options:e.bodyTypes,"options-per-line":6},model:{value:e.bodyType,callback:function(t){e.bodyType=t},expression:"bodyType"}})],1),e.showAdvance?t("div",{staticClass:"col-1 q-mt-md"},[t("div",{staticClass:"item-list"},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"label"},[e._v(e._s(e.method))]),t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-chevron-down","inherit-color":""}})],1),t("q-menu",{attrs:{fit:"","auto-close":"","transition-show":"scale","transition-hide":"scale"}},e._l(e.methodList,(function(s){return t("ListItem",{key:s.id,staticClass:"text-capitalize",attrs:{"is-selected":e.method===s.value,label:s.label},on:{click:function(t){e.method=s.value}}})})),1)],1)]):e._e()]),"none"===e.bodyType?t("div",{staticClass:"row items-center justify-center description"},[e._v(" This request does not have a body ")]):e._e(),"form-data"===e.bodyType?t("div",{staticClass:"row items-center"},[t("BaseScrollbar",{staticClass:"q-pb-sm"},[t("table",[t("thead",[t("tr",[t("th",{staticClass:"extra-small"}),e._l(e.tableColumns,(function(s){return t("th",{key:s.id,staticClass:"medium"},[e._v(" "+e._s(s.label)+" ")])}))],2)]),t("tbody",e._l(e.rows,(function(s){return t("tr",{key:s.id},[t("td",[s.showCheckBox?t("CheckboxField",{staticClass:"q-ml-md",attrs:{label:"",description:""},model:{value:s.hasChecked,callback:function(t){e.$set(s,"hasChecked",t)},expression:"row.hasChecked"}}):e._e()],1),e._l(e.tableColumns,(function(i){return t("td",{key:i.id},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"col"},["Key"===i.value?[t("SelectField",{attrs:{"is-mandatory":"",options:e.valueTypes},model:{value:s[i.value],callback:function(t){e.$set(s,i.value,t)},expression:"row[column.value]"}})]:[t("ValidationProvider",{attrs:{name:i.label,rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("TextField",{attrs:{"is-mandatory":"",error:a[0]},model:{value:s[i.value],callback:function(t){e.$set(s,i.value,t)},expression:"row[column.value]"}})]}}],null,!0)})]],2),s.Key||s.Value||s.Description?t("div",{staticClass:"col-auto"},["Description"===i.value?[t("BaseActionButton",{staticClass:"q-mx-sm",attrs:{"is-flat":"",color:"red",icon:"eva-trash-2-outline","no-border":""}})]:e._e()],2):e._e()])])}))],2)})),0)])])],1):e._e(),"form-urlencoded"===e.bodyType?t("div",{staticClass:"row items-center"},[t("BaseScrollbar",{staticClass:"q-pb-sm"},[t("table",[t("thead",[t("tr",[t("th",{staticClass:"extra-small"}),e._l(e.tableColumns,(function(s){return t("th",{key:s.id,staticClass:"medium"},[e._v(" "+e._s(s.label)+" ")])}))],2)]),t("tbody",e._l(e.rows,(function(s){return t("tr",{key:s.id},[t("td",[s.showCheckBox?t("CheckboxField",{staticClass:"q-ml-md",attrs:{label:"",description:""},model:{value:s.hasChecked,callback:function(t){e.$set(s,"hasChecked",t)},expression:"row.hasChecked"}}):e._e()],1),e._l(e.tableColumns,(function(i){return t("td",{key:i.id},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"col"},[t("ValidationProvider",{attrs:{name:i.label,rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("TextField",{attrs:{"is-mandatory":"",error:a[0]},model:{value:s[i.value],callback:function(t){e.$set(s,i.value,t)},expression:"row[column.value]"}})]}}],null,!0)})],1),s.Key||s.Value||s.Description?t("div",{staticClass:"col-auto"},["Description"===i.value?[t("BaseActionButton",{staticClass:"q-mx-sm",attrs:{"is-flat":"",color:"red",icon:"eva-trash-2-outline","no-border":""}})]:e._e()],2):e._e()])])}))],2)})),0)])])],1):e._e(),"raw"===e.bodyType?t("div",{staticClass:"row items-center full-width"},[t("div",{staticClass:"col-12"},[t("TextAreaField",{attrs:{"is-mandatory":""},model:{value:e.raw,callback:function(t){e.raw=t},expression:"raw"}})],1)]):e._e(),"binary"===e.bodyType?t("div",{staticClass:"row items-center q-mb-md"},[t("BaseButton",{attrs:{label:"Select File"},on:{click:function(t){return e.$refs.dropzone.click()}}}),t("input",{ref:"dropzone",staticClass:"file",attrs:{type:"file"}})],1):e._e(),"GraphQL"===e.bodyType?t("div",{staticClass:"row items-center"},[t("div",{staticClass:"col-6 q-mr-md"},[t("FormFieldLabel",{attrs:{label:"QUERY"}}),t("TextAreaField",{attrs:{"is-mandatory":""},model:{value:e.raw,callback:function(t){e.raw=t},expression:"raw"}})],1),t("div",{staticClass:"col-5"},[t("FormFieldLabel",{attrs:{label:"GRAPHQL VARIABLES",tooltip:"Define variables in JSON format to use in the query"}}),t("TextAreaField",{attrs:{"is-mandatory":""},model:{value:e.raw,callback:function(t){e.raw=t},expression:"raw"}})],1)]):e._e()])},q=[],N=s("9234"),O={name:"Body",components:{ValidationProvider:u["b"],SingleChoiceField:N["a"],FormFieldLabel:m["a"],TextField:p["a"],CheckboxField:k["a"],SelectField:r["a"],TextAreaField:S["a"],ListItem:n["a"]},data(){return{bodyType:"none",bodyTypes:[{id:this.$nano.id(),label:"none",value:"none"},{id:this.$nano.id(),label:"form-data",value:"form-data"},{id:this.$nano.id(),label:"x-www-form-urlencoded",value:"form-urlencoded"},{id:this.$nano.id(),label:"raw",value:"raw"},{id:this.$nano.id(),label:"binary",value:"binary"},{id:this.$nano.id(),label:"GraphQL",value:"GraphQL"}],tableColumns:[{id:this.$nano.id(),label:"Key",value:"Key"},{id:this.$nano.id(),label:"Value",value:"Value"},{id:this.$nano.id(),label:"Description",value:"Description"}],rows:[{id:this.$nano.id(),Key:"",Value:"",Description:"",showCheckBox:!1,hasChecked:!1}],formData:[{id:this.$nano.id(),Key:"",Value:"",valueType:"",Description:"",showCheckBox:!1,hasChecked:!1}],error:"",raw:"",methodList:[{id:this.$nano.id(),label:"Auto Fetch",value:"Auto Fetch"},{id:this.$nano.id(),label:"No Schema",value:"No Schema"}],method:"Auto Fetch",valueTypes:[{id:this.$nano.id(),label:"Text",value:"Text"},{id:this.$nano.id(),label:"File",value:"File"}]}},computed:{showAdvance(){return"GraphQL"===this.bodyType||"raw"===this.bodyType}},watch:{bodyType(){"GraphQL"===this.bodyType?(this.methodList=[{id:this.$nano.id(),label:"Auto Fetch",value:"Auto Fetch"},{id:this.$nano.id(),label:"No Schema",value:"No Schema"}],this.method="Auto Fetch"):"raw"===this.bodyType&&(this.methodList=[{id:this.$nano.id(),label:"JavaScript",value:"JavaScript"},{id:this.$nano.id(),label:"Text",value:"Text"},{id:this.$nano.id(),label:"JSON",value:"JSON"},{id:this.$nano.id(),label:"HTML",value:"HTML"},{id:this.$nano.id(),label:"XML",value:"XML"}],this.method="Text")},rows:{deep:!0,handler(){this.rows.length&&(this.rows[this.rows.length-1].Key||this.rows[this.rows.length-1].Value||this.rows[this.rows.length-1].Description)&&(this.rows[this.rows.length-1].showCheckBox=!0,this.rows[this.rows.length-1].hasChecked=!0,this.rows.push({id:this.$nano.id(),Key:"",Value:"",Description:"",showCheckBox:!1,hasChecked:!1}))}}},methods:{}},E=O,V=(s("e4f7"),s("4e73")),R=s("93dc"),z=s.n(R),j=Object(y["a"])(E,M,q,!1,null,null,null),H=j.exports;z()(j,"components",{QMenu:V["a"]});var U=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"mdi-note-outline","icon-color":"warning"},on:{input:e.handleCancel},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Name")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("ValidationObserver",{ref:"form"},[t("ValidationProvider",{attrs:{name:"Name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{value:e.name,"is-mandatory":"",label:"Name",error:s[0]},on:{input:e.updateName}})]}}])})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.handleCancel}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.handleSave}})]},proxy:!0}])})},W=[],J=s("1c54"),G={name:"AddName",components:{Confirm:J["a"],ValidationProvider:u["b"],TextField:p["a"],ValidationObserver:u["a"]},props:{value:{type:Boolean,required:!0},name:{type:String,default:""}},methods:{updateName(e){this.$emit("update:name",e)},handleCancel(){this.$emit("close",!1)},async handleSave(){const e=await this.$refs.form.validate();e&&this.$emit("save")}}},Q=G,Y=Object(y["a"])(Q,U,W,!1,null,"2fc85728",null),K=Y.exports,X=s("1b0d"),Z={name:"APIConnection",components:{Sheet:o["a"],SelectField:r["a"],ListItem:n["a"],Tabs:l["a"],Parameter:g,Authorization:$,Headers:D,Body:H,AddName:K},props:{value:{type:Boolean,default:!1},entry:{type:Object,default:()=>{}},connectorId:{type:[String,Number],default:""}},data(){return{apiUrl:"",method:"POST",methodList:[{id:this.$nano.id(),label:"post",value:"POST"},{id:this.$nano.id(),label:"get",value:"GET"},{id:this.$nano.id(),label:"put",value:"PUT"},{id:this.$nano.id(),label:"patch",value:"PATCH"},{id:this.$nano.id(),label:"delete",value:"DELETE"}],tab:"params",tabs:[{id:this.$nano.id(),label:"Params",value:"params"},{id:this.$nano.id(),label:"Authorization",value:"authorization"},{id:this.$nano.id(),label:"Headers",value:"headers"},{id:this.$nano.id(),label:"Body",value:"body"}],auth2:{tokenName:"",grantType:"",accessTokenURL:"",clientId:"",clientSecret:"",username:"",password:"",scope:""},response:"",input:"",showNameModal:!1,name:"",authorizationType:"",apiInputFunction:"",apiFunctionResponse:"",parameter:[{id:this.$nano.id(),key:"",value:"",description:""}]}},watch:{entry:{immediate:!0,handler(){if(this.entry.id&&(this.name=this.entry.name,this.authorizationType=this.entry.connectorType,"oauth2"===this.authorizationType)){this.tab="authorization";let e=JSON.parse(this.entry.connectionString);this.auth2.grantType=e.grantType,this.auth2.clientId=e.clientId,this.auth2.clientSecret=e.clientSecret,this.auth2.username=e.username,this.auth2.password=e.password,this.apiUrl=e.baseUrl}}}},methods:{colseConnection(){this.$emit("close"),this.showNameModal=!1,this.name="",this.authorizationType="",this.auth2={tokenName:"",grantType:"",accessTokenURL:"",clientId:"",clientSecret:"",username:"",password:"",scope:""},this.apiUrl="",this.tab="params"},async testApiConnection(){this.connectorId?this.testApiFunction():this.testConnection()},async testConnection(){let e={clientId:this.auth2.clientId,clientSecret:this.auth2.clientSecret,refreshToken:"",username:this.auth2.username,password:this.auth2.password,accessToken:"",baseUrl:this.apiUrl,code:"",redirect_uri:"",assertion:"",grantType:this.auth2.grantType};this.input=e,this.$store.commit("showLoadingBar");const{error:t,payload:s}=await X["c"].testoauth2Connection(e);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):(this.$alert.success("Connection tested successfully"),s&&(this.response=s))},async testApiFunction(){let e={};this.parameter.forEach(t=>{this.$set(e,t.key,t.value)});let t={connectorId:this.connectorId,endPoint:this.apiUrl,payloadMapping:JSON.stringify(e),type:this.method};this.apiInputFunction=t,this.$store.commit("showLoadingBar");const{error:s,payload:i}=await X["c"].testApiFunction(t);this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):(this.$alert.success("Function tested successfully"),i&&(this.apiFunctionResponse=i,console.log(this.apiFunctionResponse[Object.keys(this.apiFunctionResponse)[3]])))},save(){this.connectorId?this.saveApiFunction():this.saveConnection()},saveConnection(){this.entry.id?this.createConnection():this.showNameModal=!0},saveApi(){this.connectorId?this.addApiFunction():this.createConnection()},async createConnection(){this.$store.commit("showLoadingBar");let e={name:this.name,connectorType:this.authorizationType,credentialJson:JSON.stringify(this.input),dynamicCredentialJson:"",responseStatus:"",responseStatusCode:"",responseBody:""};if(this.connectorId)this.connectLookUp();else{if(this.entry.id){const{error:t}=await X["c"].updateConnector(this.entry.id,e);if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t)}else{const{error:t}=await X["c"].addConnector(e);if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t)}this.entry.id?this.$alert.success("Connection updated"):this.$alert.success("Connection created")}this.colseConnection()},async connectLookUp(){this.$store.commit("showLoadingBar");let e={name:this.name,connectorId:this.connectorId,hubPoint:this.apiUrl,inDataPoint:JSON.stringify(this.input),outDataPoint:JSON.stringify(this.response),conditionDataPoint:"",executionType:this.method};if(this.entry.id){const{error:t}=await X["c"].updateLookUp(this.entry.id,e);if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t)}else{const{error:t,payload:s}=await X["c"].connectLookUp(e);if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);console.log(s)}this.entry.id?this.$alert.success("Lookup edited successfully"):this.$alert.success("Lookup connected successfully")},addRow(){this.parameter.push({id:this.$nano.id(),key:"",value:"",description:""})},deleteRow(e){this.parameter.splice(e,1)},saveApiFunction(){this.entry.id?this.addApiFunction():this.showNameModal=!0},async addApiFunction(){this.$store.commit("showLoadingBar");let e=[],t=JSON.parse(this.apiInputFunction.payloadMapping);for(let n in t)e.push(n);let s=[];console.log(this.apiFunctionResponse[Object.keys(this.apiFunctionResponse)[3]]);let i=this.apiFunctionResponse[Object.keys(this.apiFunctionResponse)[3]];for(let n in i)s.push(n);let a={name:this.name,connectorId:this.connectorId,hubPoint:this.apiUrl,inDataPoint:JSON.stringify(e),outDataPoint:JSON.stringify(s),conditionDataPoint:"",executionType:this.method};const{error:o,payload:r}=await X["c"].connectLookUp(a);this.$store.commit("hideLoadingBar"),o?this.$alert.error(o):(console.log(r),this.$alert.success("Lookup added successfully"),this.colseConnection())}}},ee=Z,te=(s("5194"),Object(y["a"])(ee,i,a,!1,null,"5c2e2d78",null));t["a"]=te.exports;z()(te,"components",{QMenu:V["a"]})},fd26:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("BaseActionButton",{attrs:{"is-flat":"","no-border":e.noBorder,icon:e.darkTheme?"eva-moon-outline":"eva-sun-outline"},on:{click:e.toggleDarkTheme}})},a=[],o=s("2f62"),r={name:"ThemeSwitcher",props:{noBorder:{type:Boolean,default:!0}},computed:{...Object(o["c"])(["darkTheme"])},methods:{...Object(o["b"])(["toggleDarkTheme"])}},n=r,l=s("2877"),c=Object(l["a"])(n,i,a,!1,null,"b3ced1f0",null);t["a"]=c.exports},fdd5:function(e,t,s){"use strict";s("4d38")},ff59:function(e,t,s){},ff71:function(e,t,s){"use strict";s("d9f6")}}]);
//# sourceMappingURL=api-browse.d903b91b.js.map