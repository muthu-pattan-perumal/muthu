(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["repository-builder"],{"0628":function(e,t,i){},1549:function(e,t,i){"use strict";var a=i("2250"),o=i("a809"),n=i("5132"),s=i("e621");function r(e,t){return t.length<2?e:Object(n["a"])(e,Object(s["a"])(t,0,-1))}var l=r,d=i("4dc8");function u(e,t){return t=Object(a["a"])(t,e),e=l(e,t),null==e||delete e[Object(d["a"])(Object(o["a"])(t))]}t["a"]=u},"17c4":function(e,t,i){e.exports=i.p+"img/azure-drive-dark.f9d60042.png"},"1afd":function(e,t,i){"use strict";i("2a65")},"1fc7":function(e,t,i){"use strict";i("c24a")},2250:function(e,t,i){"use strict";var a=i("ff51"),o=i("bd8f"),n=i("0e59"),s="Expected a function";function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(s);var i=function(){var a=arguments,o=t?t.apply(this,a):a[0],n=i.cache;if(n.has(o))return n.get(o);var s=e.apply(this,a);return i.cache=n.set(o,s)||n,s};return i.cache=new(r.Cache||n["a"]),i}r.Cache=n["a"];var l=r,d=500;function u(e){var t=l(e,(function(e){return i.size===d&&i.clear(),e})),i=t.cache;return t}var c=u,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,m=/\\(\\)?/g,h=c((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(p,(function(e,i,a,o){t.push(a?o.replace(m,"$1"):i||e)})),t})),f=h,y=i("79f6");function v(e,t){return Object(a["a"])(e)?e:Object(o["a"])(e,t)?[e]:f(Object(y["a"])(e))}t["a"]=v},"228d":function(e,t,i){"use strict";i("99b7")},"23a8":function(e,t,i){},2470:function(e,t,i){e.exports=i.p+"img/ezofis-drive-dark.8365cb30.png"},2731:function(e,t,i){},"2a65":function(e,t,i){},"362e":function(e,t,i){"use strict";var a=i("2250"),o=i("f5fe"),n=i("ff51"),s=i("7129"),r=i("26ce"),l=i("4dc8");function d(e,t,i){t=Object(a["a"])(t,e);var d=-1,u=t.length,c=!1;while(++d<u){var p=Object(l["a"])(t[d]);if(!(c=null!=e&&i(e,p)))break;e=e[p]}return c||++d!=u?c:(u=null==e?0:e.length,!!u&&Object(r["a"])(u)&&Object(s["a"])(p,u)&&(Object(n["a"])(e)||Object(o["a"])(e)))}t["a"]=d},"381b":function(e,t,i){"use strict";const a={SHORT_TEXT:"SHORT_TEXT",NUMBER:"NUMBER",BOOLEAN:"BOOLEAN",DATE:"DATE",TIME:"TIME",DATE_TIME:"DATE_TIME",SINGLE_SELECT:"SINGLE_SELECT",TABLE:"TABLE",BARCODE:"BARCODE",OMR:"OMR",AUTO_GENERATED:"AUTO_GENERATED"};Object.freeze(a),t["a"]=a},"393b":function(e,t,i){"use strict";i("9e9e")},4235:function(e,t,i){"use strict";i("e933")},4771:function(e,t,i){var a={"./azure-drive-dark.png":"17c4","./azure-drive-light.png":"6e2f","./ezofis-drive-dark.png":"2470","./ezofis-drive-light.png":"f68e","./google-drive-dark.png":"80ec","./google-drive-light.png":"64ce","./one-drive-dark.png":"8818","./one-drive-light.png":"6b53"};function o(e){var t=n(e);return i(t)}function n(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=n,e.exports=o,o.id="4771"},"4dc8":function(e,t,i){"use strict";var a=i("1bc6"),o=1/0;function n(e){if("string"==typeof e||Object(a["a"])(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}t["a"]=n},5132:function(e,t,i){"use strict";var a=i("2250"),o=i("4dc8");function n(e,t){t=Object(a["a"])(t,e);var i=0,n=t.length;while(null!=e&&i<n)e=e[Object(o["a"])(t[i++])];return i&&i==n?e:void 0}t["a"]=n},"5dbf":function(e,t,i){"use strict";i("2731")},"64ce":function(e,t,i){e.exports=i.p+"img/google-drive-light.25e8561a.png"},"6b53":function(e,t,i){e.exports=i.p+"img/one-drive-light.e1b92b99.png"},"6c886":function(e,t,i){},"6e2f":function(e,t,i){e.exports=i.p+"img/azure-drive-light.944f7843.png"},"7e3a":function(e,t,i){"use strict";i("23a8")},"80ec":function(e,t,i){e.exports=i.p+"img/google-drive-dark.330678ac.png"},"869e":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{class:{disabled:e.isDisabled},attrs:{id:"checkbox-field"}},[t("div",{staticClass:"option",class:{"is-focused":e.isFocused,"no-pointer-events":e.isDisabled,"is-selected":e.value},attrs:{tabindex:0},on:{focus:function(t){e.isFocused=!0},blur:function(t){e.isFocused=!1},click:e.handleInput,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.stopPropagation(),e.handleInput.apply(null,arguments))}}},[t("BaseIcon",{staticClass:"icon",class:[e.description?"q-mr-md":"q-mr-sm"],attrs:{name:e.value?"mdi-checkbox-marked":"mdi-checkbox-blank-outline","inherit-color":""}}),t("div",[t("div",{staticClass:"label"},[e._v(e._s(e.label))]),e.description?t("div",{staticClass:"description"},[e._v(e._s(e.description))]):e._e()])],1),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e()],1)},o=[],n=i("e683"),s={name:"CheckboxField",components:{FormFieldError:n["a"]},props:{value:{type:Boolean,default:!1},label:{type:String,default:""},description:{type:String,default:""},isDisabled:{type:Boolean,default:!1},error:{type:String,default:""}},data(){return{isFocused:!1}},methods:{handleInput(){this.isDisabled||this.$emit("input",!this.value)}}},r=s,l=(i("5dbf"),i("2877")),d=Object(l["a"])(r,a,o,!1,null,"658eb834",null);t["a"]=d.exports},"874f":function(e,t,i){"use strict";var a=i("7c4a"),o=i("0e40"),n=Object(a["a"])((function(e,t,i){return e+(i?" ":"")+Object(o["a"])(t)}));t["a"]=n},8818:function(e,t,i){e.exports=i.p+"img/one-drive-dark.d3a6db82.png"},"96c9":function(e,t,i){"use strict";i("ca29")},"99b7":function(e,t,i){},"9e9e":function(e,t,i){},a809:function(e,t,i){"use strict";function a(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}t["a"]=a},ba9c:function(e,t,i){"use strict";i("f902")},bd8f:function(e,t,i){"use strict";var a=i("ff51"),o=i("1bc6"),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function r(e,t){if(Object(a["a"])(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!Object(o["a"])(e))||(s.test(e)||!n.test(e)||null!=t&&e in Object(t))}t["a"]=r},bf44:function(e,t,i){},c24a:function(e,t,i){},c276:function(e,t,i){"use strict";i("0628")},c65bb:function(e,t,i){"use strict";i("6c886")},ca29:function(e,t,i){},cc7c:function(e,t,i){"use strict";i("e28b")},cd69:function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"check-bg",class:e._color}),t("q-icon",{staticClass:"check-icon",attrs:{name:"mdi-check",color:"white",size:"20px"}})],1)},o=[],n=i("2f62"),s=i("b263"),r={name:"Check",props:{color:{type:String,default:"secondary",validator:s["a"]}},computed:{...Object(n["c"])(["darkTheme"]),_color(){return this.darkTheme?`bg-${this.color}-5`:"bg-"+this.color}}},l=r,d=(i("1afd"),i("2877")),u=i("0016"),c=i("93dc"),p=i.n(c),m=Object(d["a"])(l,a,o,!1,null,"7cd7a6f0",null);t["a"]=m.exports;p()(m,"components",{QIcon:u["a"]})},e28b:function(e,t,i){},e738:function(e,t,i){"use strict";i("e806")},e806:function(e,t,i){},e933:function(e,t,i){},f070:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"repository-builder"}},[t("ItemBuilder",{on:{close:e.closeBuilder},scopedSlots:e._u([{key:"title",fn:function(){return["NEW"===e.mode?[e._v("Create Folder")]:e._e(),"EDIT"===e.mode?[e._v("Edit Folder")]:e._e()]},proxy:!0},{key:"description",fn:function(){return["NEW"===e.mode?[e._v(" Feel free to skip the optional fields and fill them later ")]:e._e(),"EDIT"===e.mode?[e._v(" Some of the fields or non-editable ")]:e._e()]},proxy:!0}])},[t("ActionBar",{attrs:{tabs:e._tabs,"is-loading":e.isLoading},on:{save:function(t){"EDIT"===e.mode?e.updateRepository():e.createRepository()}},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),t("BaseScrollbar",{attrs:{height:"calc(100vh - 126px)"}},[t("div",{staticClass:"row q-pb-xl"},[t("ValidationObserver",{ref:"form"},[t("WorkspaceDetails",{ref:"WORKSPACE_DETAILS",attrs:{mode:e.mode,"workspace-id":e.workspaceId,"is-active":"WORKSPACE_DETAILS"===e.tab},on:{"update:workspaceId":function(t){e.workspaceId=t},"update:workspace-id":function(t){e.workspaceId=t},click:function(t){e.tab="WORKSPACE_DETAILS"}}}),t("BaseSeparator",{attrs:{"has-left-inset":""}}),t("RepositoryDetails",{ref:"REPOSITORY_DETAILS",attrs:{mode:e.mode,name:e.name,description:e.description,"is-active":"REPOSITORY_DETAILS"===e.tab},on:{"update:name":function(t){e.name=t},"update:description":function(t){e.description=t},click:function(t){e.tab="REPOSITORY_DETAILS"}}}),t("BaseSeparator",{attrs:{"has-left-inset":""}}),t("StorageDetails",{ref:"STORAGE_DETAILS",attrs:{mode:e.mode,"is-active":"STORAGE_DETAILS"===e.tab,"cloud-file-server":e.cloudFileServer,"local-file-server-path":e.localFileServerPath},on:{"update:cloudFileServer":function(t){e.cloudFileServer=t},"update:cloud-file-server":function(t){e.cloudFileServer=t},"update:localFileServerPath":function(t){e.localFileServerPath=t},"update:local-file-server-path":function(t){e.localFileServerPath=t},click:function(t){return e.switchTab("STORAGE_DETAILS")}}}),t("BaseSeparator",{attrs:{"has-left-inset":""}}),t("FieldsDetails",{ref:"FIELDS_DETAILS",attrs:{mode:e.mode,fields:e.fields,"dynamic-fields":e.dynamicFields,"fields-type":e.fieldsType,"is-active":"FIELDS_DETAILS"===e.tab},on:{"update:fields":function(t){e.fields=t},"update:fieldsType":function(t){e.fieldsType=t},"update:fields-type":function(t){e.fieldsType=t},click:function(t){return e.switchTab("FIELDS_DETAILS")}}}),t("BaseSeparator",{attrs:{"has-left-inset":""}}),t("AutoIndexingDetails",{ref:"AUTO_INDEXING_DETAILS",attrs:{mode:e.mode,"indexing-type":e.indexingType,"credit-limit":e.creditLimit,"constant-credit":e.constantCredit,"fields-type":e.fieldsType,"is-active":"AUTO_INDEXING_DETAILS"===e.tab},on:{"update:indexingType":function(t){e.indexingType=t},"update:indexing-type":function(t){e.indexingType=t},"update:creditLimit":function(t){e.creditLimit=t},"update:credit-limit":function(t){e.creditLimit=t},click:function(t){return e.switchTab("AUTO_INDEXING_DETAILS")}}}),t("BaseSeparator",{attrs:{"has-left-inset":""}}),t("SecurityDetails",{ref:"SECURITY_DETAILS",attrs:{mode:e.mode,owner:e.owner,"expiry-date":e.expiryDate,coordinator:e.coordinator,"is-active":"SECURITY_DETAILS"===e.tab},on:{"update:owner":function(t){e.owner=t},"update:expiryDate":function(t){e.expiryDate=t},"update:expiry-date":function(t){e.expiryDate=t},"update:coordinator":function(t){e.coordinator=t},click:function(t){return e.switchTab("SECURITY_DETAILS")}}}),t("BaseSeparator",{attrs:{"has-left-inset":""}}),t("VersionDetails",{ref:"VERSION_DETAILS",attrs:{mode:e.mode,"version-type":e.versionType,"versioned-documents":e.versionedDocuments,"is-active":"VERSION_DETAILS"===e.tab},on:{"update:versionType":function(t){e.versionType=t},"update:version-type":function(t){e.versionType=t},"update:versionedDocuments":function(t){e.versionedDocuments=t},"update:versioned-documents":function(t){e.versionedDocuments=t},click:function(t){return e.switchTab("VERSION_DETAILS")}}}),"STATIC"===e.fieldsType?t("BaseSeparator",{attrs:{"has-left-inset":""}}):e._e(),"STATIC"===e.fieldsType?t("MetadataDetails",e._b({ref:"METADATA_DETAILS",attrs:{mode:e.mode,fields:e.fields,"is-active":"METADATA_DETAILS"===e.tab},on:{click:function(t){return e.switchTab("METADATA_DETAILS")}}},"MetadataDetails",e.metaData,!1,!0)):e._e(),t("LookupDetails",{ref:"CONNECTOR_DETAILS",attrs:{mode:e.mode,connection:e.connection,"connection-id":e.connectionId,"hub-name":e.hubName,fields:e.repositoryfields,"value-mapping":e.valueMapping,"condition-mapping":e.conditionMapping,"out-data-columns":e.outDataColumns,"is-active":"CONNECTOR_DETAILS"===e.tab},on:{"update:connection":function(t){e.connection=t},"update:connectionId":function(t){e.connectionId=t},"update:connection-id":function(t){e.connectionId=t},"update:hubName":function(t){e.hubName=t},"update:hub-name":function(t){e.hubName=t},connectorHub:e.getConnectorHub}})],1),t("q-space"),"EDIT"===e.mode?t("QuickAccess"):e._e()],1)])],1)],1)},o=[],n=(i("caad"),i("14d9"),i("8287")),s=i("4d94"),r=i("7bb1"),l=function(){var e=this,t=e._self._c;return t("FormSection",e._g({attrs:{icon:e.isActive?"mdi-briefcase":"mdi-briefcase-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Workspace Details")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Select the digital workspace of your choice to create a new root folder and associate it with. ")]},proxy:!0}])},e.$listeners),[t("ValidationProvider",{attrs:{name:"workspace",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{staticClass:"q-mb-lg",attrs:{value:e.workspaceId,label:"workspace","is-mandatory":"",options:e.workspaces,"is-readonly":"EDIT"===e.mode,error:i[0]},on:{input:e.updateWorkspace}})]}}])})],1)},d=[],u=i("e47f"),c=i("12b8"),p=i("1b0d"),m={name:"WorkspaceDetails",components:{FormSection:u["a"],ValidationProvider:r["b"],SelectField:c["a"]},props:{workspaceId:{type:[String,Number],required:!0},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"}},data(){return{workspaces:[]}},created(){this.getWorkspaces()},methods:{updateWorkspace(e){this.$emit("update:workspaceId",e)},async getWorkspaces(){const{error:e,payload:t}=await p["u"].getWorkspaceList();e?this.$alert.error("Error fetching workspaces"):this.workspaces=t&&t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))}}},h=m,f=i("2877"),y=Object(f["a"])(h,l,d,!1,null,"ce907cda",null),v=y.exports,b=function(){var e=this,t=e._self._c;return t("FormSection",e._g({attrs:{icon:e.isActive?"eva-archive":"eva-archive-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Folder Details")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Enter the desired name of the folder you'd like to create as a root folder to organize your documents. ")]},proxy:!0}])},e.$listeners),[t("ValidationProvider",{attrs:{name:"name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-mb-lg",attrs:{value:e.name,label:"name","is-mandatory":"","is-readonly":"EDIT"===e.mode,error:i[0]},on:{input:e.updateName}})]}}])}),t("TextAreaField",{attrs:{value:e.description,label:"description"},on:{input:e.updateDescription}})],1)},g=[],T=i("b3d1"),S=i("6df3"),F={name:"RepositoryDetails",components:{FormSection:u["a"],ValidationProvider:r["b"],TextField:T["a"],TextAreaField:S["a"]},props:{name:{type:String,required:!0},description:{type:String,required:!0},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"}},methods:{updateName(e){this.$emit("update:name",e)},updateDescription(e){this.$emit("update:description",e)}}},C=F,_=Object(f["a"])(C,b,g,!1,null,"c9501f88",null),$=_.exports,D=function(){var e=this,t=e._self._c;return t("FormSection",e._g({attrs:{icon:e.isActive?"mdi-database":"mdi-database-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Storage Details")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Choose the storage location where you want to save all documents and files associated with your selected digital workspace ")]},proxy:!0}])},e.$listeners),[t("CloudFileServers",{staticClass:"q-mb-lg",attrs:{value:e.cloudFileServer},on:{input:e.updateCloudFileServer}}),"ON_PREMISE1"===e.appMode?t("ValidationProvider",{attrs:{name:"local file server path",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{attrs:{value:e.localFileServerPath,label:"local file server path",tooltip:"File location for storing the documents","is-mandatory":"","is-readonly":"EDIT"===e.mode,error:i[0]},on:{input:e.updateLocalFileServerPath}})]}}],null,!1,2264288569)}):e._e()],1)},M=[],O=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"cloud-file-servers"}},[t("FormFieldLabel",{attrs:{label:"File Server","is-mandatory":""}}),t("div",{staticClass:"row q-col-gutter-md"},["CLOUD"===e.appMode?e._l(e.cloudFileServers,(function(i){return t("div",{key:i.id,staticClass:"col relative-position",class:{"no-pointer-events":i.comingSoon},on:{click:function(t){return e.$emit("input",i.value)}}},[t("div",{staticClass:"service",class:{disabled:i.comingSoon,"font-medium":e.value===i.value}},[i.comingSoon?t("div",{staticClass:"coming-soon"},[e._v("coming soon")]):e._e(),e.value===i.value?t("Check"):e._e(),t("img",{attrs:{src:e._logo(i.logo),alt:i.label}}),t("div",{staticClass:"label"},[e._v(e._s(i.label))])],1)])})):"ON_PREMISE"===e.appMode?e._l(e.localFileServers,(function(i){return t("div",{key:i.id,staticClass:"col-3 relative-position",class:{"no-pointer-events":i.comingSoon},on:{click:function(t){return e.$emit("input",i.value)}}},[t("div",{staticClass:"service",class:{disabled:i.comingSoon,"font-medium":e.value===i.value}},[i.comingSoon?t("div",{staticClass:"coming-soon"},[e._v("coming soon")]):e._e(),e.value===i.value?t("Check"):e._e(),t("img",{attrs:{src:e._logo(i.logo),alt:i.label}}),t("div",{staticClass:"label"},[e._v(e._s(i.label))])],1)])})):e._e()],2)],1)},k=[],A=i("2f62"),I=i("3445"),w=i("cd69"),E={name:"CloudFileServers",components:{FormFieldLabel:I["a"],Check:w["a"]},props:{value:{type:String,required:!0}},data(){return{cloudFileServers:[{id:this.$nano.id(),label:"ezofis Drive",value:"EZOFIS",logo:"ezofis",comingSoon:!1},{id:this.$nano.id(),label:"Azure Drive",value:"AZURE",logo:"azure",comingSoon:!0},{id:this.$nano.id(),label:"Goolge Drive",value:"GOOGLE_DRIVE",logo:"google",comingSoon:!0},{id:this.$nano.id(),label:"One Drive",value:"ONE_DRIVE",logo:"one",comingSoon:!0}],localFileServers:[{id:this.$nano.id(),label:"EZOFIS Local",value:"LOCAL",logo:"ezofis",comingSoon:!1}]}},computed:{...Object(A["c"])(["darkTheme"]),appMode(){return this.$store.state.session.appMode||"CLOUD"}},methods:{_logo(e){return i("4771")(`./${e}-drive-${this.darkTheme?"dark":"light"}.png`)}}},x=E,N=(i("ff82"),Object(f["a"])(x,O,k,!1,null,"627e4ff6",null)),L=N.exports,B={name:"StorageDetails",components:{FormSection:u["a"],ValidationProvider:r["b"],TextField:T["a"],CloudFileServers:L},props:{cloudFileServer:{type:String,required:!0},localFileServerPath:{type:String,required:!0},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"}},computed:{appMode(){return this.$store.state.session.appMode||"CLOUD"}},methods:{updateCloudFileServer(e){this.$emit("update:cloudFileServer",e)},updateLocalFileServerPath(e){this.$emit("update:localFileServerPath",e)}}},q=B,P=Object(f["a"])(q,D,M,!1,null,"56d6f221",null),V=P.exports,R=function(){var e=this,t=e._self._c;return t("FormSection",e._g({attrs:{icon:e.isActive?"mdi-folder":"mdi-folder-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Fields Details")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Configure the fields / tags that you would like to use for indexing documents, making it easier to save and search them in the future ")]},proxy:!0}])},e.$listeners),[t("SingleChoiceField",{staticClass:"q-mb-lg",attrs:{value:e.fieldsType,"is-mandatory":"",label:"fields type",tooltip:"Organize the content within the repository, making it easier to manage and search for specific information",options:e.fieldTypes,"options-per-line":4,"is-readonly":"EDIT"===e.mode},on:{input:e.updateType}}),t("ValidationProvider",{attrs:{name:"fields",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("FieldsBuilder",{staticClass:"q-mb-lg",attrs:{value:e.fields,"fields-type":e.fieldsType,error:i[0]},on:{input:e.updateFields}})]}}])})],1)},j=[],Y=i("9234"),G=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"fields-builder"}},[t("FormFieldLabel",{attrs:{label:"fields","is-mandatory":""}}),t("FieldsHeader",{attrs:{"fields-type":e.fieldsType},on:{add:e.showFieldSheet,clear:e.clearAllFields}}),t("FolderFields",{attrs:{"folder-fields":e.folderFields,"fields-type":e.fieldsType},on:{edit:e.editField,delete:e.deleteField,reorder:e.reorderFields}}),e.folderFields.length&&e.otherFields.length?t("BaseSeparator",{staticClass:"q-my-md"}):e._e(),"STATIC"===e.fieldsType?t("OtherFields",{attrs:{"other-fields":e.otherFields},on:{edit:e.editField,delete:e.deleteField}}):e._e(),e.value.length&&"STATIC"===e.fieldsType?t("FieldsHeader",{attrs:{"fields-type":e.fieldsType,position:"BOTTOM"},on:{add:e.showFieldSheet,clear:e.clearAllFields}}):e._e(),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e(),t("FieldDetails",{attrs:{field:e.field,fields:e.value},on:{add:e.addField,save:e.saveField},model:{value:e.isFieldDetailsVisible,callback:function(t){e.isFieldDetailsVisible=t},expression:"isFieldDetailsVisible"}})],1)},U=[],H=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"fields-header"}},[t("div",{staticClass:"row items-center",class:["TOP"===e.position?"header-top":"header-bottom"]},[t("div",{staticClass:"label col"},[e._v("Name")]),t("div",{staticClass:"label",staticStyle:{width:"140px"}},[e._v("Data Type")]),t("div",{staticClass:"label",staticStyle:{width:"100px"}},[e._v("Is Mandatory")]),"STATIC"===e.fieldsType?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:secondary.left",value:"add field",expression:"'add field'",arg:"secondary",modifiers:{left:!0}}],attrs:{"is-flat":"",color:"secondary",icon:"eva-plus","no-border":""},on:{click:function(t){return e.$emit("add")}}}):e._e(),"STATIC"===e.fieldsType?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.right",value:"clear all fields",expression:"'clear all fields'",arg:"red",modifiers:{right:!0}}],attrs:{"is-flat":"",color:"red","no-border":"",icon:"eva-trash-2-outline"},on:{click:function(t){return e.$emit("clear")}}}):e._e()],1)])},W=[],z={name:"FieldsHeader",props:{position:{type:String,default:"TOP"},fieldsType:{type:String,required:!0}}},J=z,X=(i("cc7c"),Object(f["a"])(J,H,W,!1,null,"061adf15",null)),Q=X.exports,K=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"folder-fields"}},["STATIC"===e.fieldsType?[t("Draggable",{model:{value:e.fields,callback:function(t){e.fields=t},expression:"fields"}},e._l(e.fields,(function(i,a){return t("div",{key:i._id,staticClass:"field row items-center"},[t("BaseIcon",{staticClass:"drag-indicator",attrs:{name:"drag_indicator",size:"16px"}}),t("div",{staticClass:"col row"},[t("BaseIcon",{attrs:{name:a===e.fields.length-1?"eva-file-text-outline":"mdi-folder",color:a===e.fields.length-1?"secondary":"amber"}}),t("div",{staticClass:"q-ml-md"},[e._v(e._s(i.name))])],1),t("div",{staticStyle:{width:"140px"}},[e._v(e._s(i.dataType))]),t("div",{staticStyle:{width:"100px"}},[e._v(e._s(i.isMandatory?"Yes":"No"))]),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:secondary.left",value:"edit field",expression:"'edit field'",arg:"secondary",modifiers:{left:!0}}],attrs:{"is-flat":"",color:"secondary",icon:"eva-edit-outline","no-border":""},on:{click:function(t){return e.handleEdit(i._id)}}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.right",value:"delete field",expression:"'delete field'",arg:"red",modifiers:{right:!0}}],attrs:{"is-flat":"",color:"red",icon:"eva-close-outline","no-border":""},on:{click:function(t){return e.handleDelete(i._id)}}})],1)})),0)]:e._l(e.fields,(function(i,a){return t("div",{key:i._id,staticClass:"field row items-center dynamic"},[t("BaseIcon",{staticClass:"drag-indicator",attrs:{name:"drag_indicator",size:"16px"}}),t("div",{staticClass:"col row"},[t("BaseIcon",{attrs:{name:a===e.fields.length-1?"eva-file-text-outline":"mdi-folder",color:a===e.fields.length-1?"secondary":"amber"}}),t("div",{staticClass:"q-ml-md"},[e._v(e._s(i.name))])],1),t("div",{staticStyle:{width:"120px"}},[e._v(e._s(i.dataType))]),t("div",{staticStyle:{width:"120px"}},[e._v(e._s(i.isMandatory?"Yes":"No"))])],1)}))],2)},Z=[],ee=i("eef3"),te=i("32e8"),ie=i("5c8a"),ae={name:"FolderFields",components:{Draggable:ee["a"]},props:{folderFields:{type:Array,required:!0},fieldsType:{type:String,required:!0}},data(){return{fields:[]}},watch:{folderFields:{immediate:!0,deep:!0,handler(){Object(te["a"])(this.folderFields,this.fields)||(this.fields=Object(ie["a"])(this.folderFields))}},fields:{deep:!0,handler(){Object(te["a"])(this.folderFields,this.fields)||this.$emit("reorder",this.fields)}}},methods:{handleEdit(e){this.$emit("edit",e)},handleDelete(e){this.$emit("delete",e)}}},oe=ae,ne=(i("4235"),Object(f["a"])(oe,K,Z,!1,null,"2f3a3352",null)),se=ne.exports,re=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"other-fields"}},e._l(e.otherFields,(function(i){return t("div",{key:i._id,staticClass:"field row items-center"},[t("div",{staticClass:"col row"},[t("BaseIcon",{attrs:{name:"mdi-label-outline"}}),t("div",{staticClass:"q-ml-md"},[e._v(e._s(i.name))])],1),t("div",{staticStyle:{width:"140px"}},[e._v(e._s(i.dataType))]),t("div",{staticStyle:{width:"100px"}},[e._v(e._s(i.isMandatory?"Yes":"No"))]),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:secondary.left",value:"edit field",expression:"'edit field'",arg:"secondary",modifiers:{left:!0}}],attrs:{"is-flat":"",color:"secondary",icon:"eva-edit-outline","no-border":""},on:{click:function(t){return e.handleEdit(i._id)}}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.right",value:"delete field",expression:"'delete field'",arg:"red",modifiers:{right:!0}}],attrs:{"is-flat":"",color:"red",icon:"eva-close-outline","no-border":""},on:{click:function(t){return e.handleDelete(i._id)}}})],1)})),0)},le=[],de={name:"OtherFields",props:{otherFields:{type:Array,required:!0}},methods:{handleEdit(e){this.$emit("edit",e)},handleDelete(e){this.$emit("delete",e)}}},ue=de,ce=(i("393b"),Object(f["a"])(ue,re,le,!1,null,"3c5242f2",null)),pe=ce.exports,me=i("e683"),he=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,width:"540px","has-footer":""},on:{input:e.closeSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.field?"Edit":"Add")+" Field")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-pa-md"},[t("ValidationObserver",{ref:"form"},[t("ValidationProvider",{attrs:{name:"name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-mb-lg",attrs:{label:"name","is-mandatory":"",error:i[0]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})]}}])}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{label:"Mark this field as required","is-disabled":e.disableIsMandatory},model:{value:e.isMandatory,callback:function(t){e.isMandatory=t},expression:"isMandatory"}}),t("CheckboxField",{staticClass:"q-mb-lg",attrs:{label:"Include this field in the folder structure","is-disabled":e.disableIncludeInFolderStructure},model:{value:e.includeInFolderStructure,callback:function(t){e.includeInFolderStructure=t},expression:"includeInFolderStructure"}}),t("SelectField",{staticClass:"q-mb-lg",attrs:{label:"data type","is-mandatory":"","is-clearable":!1,options:e.dataTypes},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}}),"NUMBER"===e.dataType?t("NumberFieldOptions",{attrs:{"allow-decimals":e.options.allowDecimals},on:{"update:allowDecimals":function(t){return e.$set(e.options,"allowDecimals",t)},"update:allow-decimals":function(t){return e.$set(e.options,"allowDecimals",t)}}}):e._e(),"BOOLEAN"===e.dataType?t("BooleanFieldOptions",{attrs:{"truthy-value":e.options.truthyValue,"falsy-value":e.options.falsyValue},on:{"update:truthyValue":function(t){return e.$set(e.options,"truthyValue",t)},"update:truthy-value":function(t){return e.$set(e.options,"truthyValue",t)},"update:falsyValue":function(t){return e.$set(e.options,"falsyValue",t)},"update:falsy-value":function(t){return e.$set(e.options,"falsyValue",t)}}}):e._e(),"SINGLE_SELECT"===e.dataType||"MULTI_SELECT"===e.dataType?t("SelectFieldOptions",{attrs:{"options-type":e.options.optionsType,"master-form-id":e.options.masterFormId,"predefined-options":e.options.predefinedOptions,"master-table-column":e.options.masterTableColumn,"allow-to-add-new-options":e.options.allowToAddNewOptions,"master-form-parent-column":e.options.masterFormParentColumn,"mandatory-settings":e.options.mandatorySettings,fields:e._fields,"non-mandatory-fields":e.nonMandatoryFields},on:{"update:optionsType":function(t){return e.$set(e.options,"optionsType",t)},"update:options-type":function(t){return e.$set(e.options,"optionsType",t)},"update:masterFormId":function(t){return e.$set(e.options,"masterFormId",t)},"update:master-form-id":function(t){return e.$set(e.options,"masterFormId",t)},"update:predefinedOptions":function(t){return e.$set(e.options,"predefinedOptions",t)},"update:predefined-options":function(t){return e.$set(e.options,"predefinedOptions",t)},"update:masterTableColumn":function(t){return e.$set(e.options,"masterTableColumn",t)},"update:master-table-column":function(t){return e.$set(e.options,"masterTableColumn",t)},"update:allowToAddNewOptions":function(t){return e.$set(e.options,"allowToAddNewOptions",t)},"update:allow-to-add-new-options":function(t){return e.$set(e.options,"allowToAddNewOptions",t)},"update:masterFormParentColumn":function(t){return e.$set(e.options,"masterFormParentColumn",t)},"update:master-form-parent-column":function(t){return e.$set(e.options,"masterFormParentColumn",t)},"update:mandatorySettings":function(t){return e.$set(e.options,"mandatorySettings",t)},"update:mandatory-settings":function(t){return e.$set(e.options,"mandatorySettings",t)}}}):e._e(),"TABLE"===e.dataType?t("TableFieldOptions",{attrs:{columns:e.options.columns},on:{"update:columns":function(t){return e.$set(e.options,"columns",t)}}}):e._e(),"BARCODE"===e.dataType?t("BarcodeFieldOptions",{attrs:{"barcode-type":e.options.barcodeType,"barcode-prefix":e.options.barcodePrefix,"barcode-length":e.options.barcodeLength},on:{"update:barcodeType":function(t){return e.$set(e.options,"barcodeType",t)},"update:barcode-type":function(t){return e.$set(e.options,"barcodeType",t)},"update:barcodePrefix":function(t){return e.$set(e.options,"barcodePrefix",t)},"update:barcode-prefix":function(t){return e.$set(e.options,"barcodePrefix",t)},"update:barcodeLength":function(t){return e.$set(e.options,"barcodeLength",t)},"update:barcode-length":function(t){return e.$set(e.options,"barcodeLength",t)}}}):e._e(),"AUTO_GENERATED"===e.dataType?t("AutoGeneratedOptions",{attrs:{"field-columns":e.fieldsColumns,"auto-generated-options":e.options.autoGeneratedOptions},on:{"update:autoGeneratedOptions":function(t){return e.$set(e.options,"autoGeneratedOptions",t)},"update:auto-generated-options":function(t){return e.$set(e.options,"autoGeneratedOptions",t)}}}):e._e()],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:function(t){return e.closeSheet(!1)}}}),t("BaseButton",{attrs:{label:e.field?"save":"add"},on:{click:function(t){e.field?e.saveField():e.addField()}}})]},proxy:!0}])})},fe=[],ye=i("381e"),ve=i("869e"),be=function(){var e=this,t=e._self._c;return t("div",[t("CheckboxField",{staticClass:"q-mb-lg",attrs:{value:e.allowDecimals,label:"Allow decimals"},on:{input:e.updateAllowDecimals}})],1)},ge=[],Te={name:"NumberFieldOptions",components:{CheckboxField:ve["a"]},props:{allowDecimals:{type:Boolean,required:!0}},methods:{updateAllowDecimals(e){this.$emit("update:allowDecimals",e)}}},Se=Te,Fe=Object(f["a"])(Se,be,ge,!1,null,"004526c4",null),Ce=Fe.exports,_e=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"boolean-field-options"}},[t("div",{staticClass:"row q-col-gutter-md"},[t("ValidationProvider",{staticClass:"col",attrs:{name:"truthy value",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-mb-lg",attrs:{value:e.truthyValue,label:"truthy value","is-mandatory":"",error:i[0]},on:{input:e.updateTruthyValue}})]}}])}),t("ValidationProvider",{staticClass:"col",attrs:{name:"falsy value",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-mb-lg",attrs:{value:e.falsyValue,label:"falsy value","is-mandatory":"",error:i[0]},on:{input:e.updateFalsyValue}})]}}])})],1)])},$e=[],De={name:"BooleanFieldOptions",components:{ValidationProvider:r["b"],TextField:T["a"]},props:{truthyValue:{type:String,required:!0},falsyValue:{type:String,required:!0}},methods:{updateTruthyValue(e){this.$emit("update:truthyValue",e)},updateFalsyValue(e){this.$emit("update:falsyValue",e)}}},Me=De,Oe=Object(f["a"])(Me,_e,$e,!1,null,"24bbcf5a",null),ke=Oe.exports,Ae=function(){var e=this,t=e._self._c;return t("div",[t("SingleChoiceField",{staticClass:"q-mb-lg",attrs:{"is-mandatory":"",label:"Options type",value:e.optionsType,"options-per-line":1,options:e.optionsTypes},on:{input:e.updateOptionsType}}),"MASTER"===e.optionsType?[t("ValidationProvider",{attrs:{name:"master table",rules:{required:"MASTER"===e.optionsType}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{staticClass:"q-mb-lg",attrs:{"is-mandatory":"",label:"master table",error:i[0],value:e.masterFormId,"is-clearable":!1,options:e.masterForms},on:{input:e.updateMasterFormId}})]}}],null,!1,3070680177)}),t("ValidationProvider",{attrs:{name:"master table column",rules:{required:"MASTER"===e.optionsType}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{staticClass:"q-mb-lg",attrs:{"is-mandatory":"",label:"master table column",error:i[0],"is-clearable":!1,value:e.masterTableColumn,options:e.masterTableColumns},on:{input:e.updateMasterColumn}})]}}],null,!1,2112006727)}),t("SelectField",{staticClass:"q-mb-lg",attrs:{label:"Parent Field (Filter based on parent field value selection)",placeholder:"Parent Field",value:e.masterFormParentColumn,"is-clearable":!0,options:e.fields},on:{input:e.updateMasterFormParentColumn}})]:e._e(),"PREDEFINED"===e.optionsType?t("ValidationProvider",{attrs:{name:"predefined options",rules:{required:"PREDEFINED"===e.optionsType}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("OptionsCreatorField",{staticClass:"q-mb-lg",attrs:{"is-mandatory":"",label:"predefined options",error:i[0],value:e.predefinedOptions},on:{input:e.updatePredefinedOptions}})]}}],null,!1,60511249)}):e._e(),e._e(),e.showMandatorySettings?t("div",[t("FormFieldLabel",{staticClass:"field-label",attrs:{label:"Enable mandatory fields based on the selected value","is-mandatory":""}}),t("BaseScrollbar",[t("div",[t("table",[t("thead",[t("tr",[t("th",{staticClass:"medium"},[e._v("Value")]),t("th",{staticClass:"large"},[e._v("Fields")]),t("th",{staticClass:"action"},[t("BaseActionButton",{staticClass:"q-ml-xs",attrs:{"is-flat":"",color:"secondary",icon:"eva-plus-outline","no-border":""},on:{click:e.addRow}})],1)])]),t("tbody",e._l(e.mandatorySettings,(function(i,a){return t("tr",{key:a},[t("td",[t("div",{staticClass:"row"},[t("SelectField",{staticClass:"col",attrs:{options:e.options,"is-clearable":!1,"new-option":"EXISTING"===e.optionsType},model:{value:e.mandatorySettings[a]["value"],callback:function(t){e.$set(e.mandatorySettings[a],"value",t)},expression:"mandatorySettings[index]['value']"}})],1)]),t("td",[t("MultiSelectField",{attrs:{options:e.nonMandatoryFields,"is-clearable":!1},model:{value:e.mandatorySettings[a]["fields"],callback:function(t){e.$set(e.mandatorySettings[a],"fields",t)},expression:"mandatorySettings[index]['fields']"}})],1),t("td",{staticClass:"action"},[t("BaseActionButton",{attrs:{"is-flat":"",color:"red",icon:"eva-close-outline","no-border":""},on:{click:function(t){return e.removeRow(a)}}})],1)])})),0)])])])],1):e._e()],2)},Ie=[],we=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"options-creator"}},[t("FormFieldLabel",{attrs:{label:e.label,"is-mandatory":e.isMandatory,tooltip:e.tooltip}}),t("FormFieldWrapper",{ref:"wrapper",attrs:{"is-focused":e.isFocused,"is-readonly":e.isReadonly,"is-disabled":e.isDisabled,"has-error":!!e.error}},[t("div",{staticClass:"add-option"},[t("div",{staticClass:"col"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.option,expression:"option"}],attrs:{type:"text",placeholder:"Type and press enter to add options"},domProps:{value:e.option},on:{focus:function(t){e.isFocused=!0},blur:function(t){e.isFocused=!1},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addOption.apply(null,arguments)},input:function(t){t.target.composing||(e.option=t.target.value)}}})]),t("BaseIcon",{staticClass:"cursor-pointer",attrs:{name:"eva-plus",color:e.option?"secondary":"gray"},on:{click:e.addOption}})],1),e.value.length?t("div",{staticClass:"options"},e._l(e.value,(function(i,a){return t("div",{key:i,staticClass:"chip"},[t("div",{staticClass:"q-mr-sm"},[e._v(e._s(a+1)+". "+e._s(i))]),t("BaseIcon",{staticClass:"cursor-pointer",attrs:{name:"eva-close"},on:{click:function(t){return e.removeOption(a)}}})],1)})),0):e._e()]),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e()],1)},Ee=[],xe=i("9996"),Ne=i("0f01"),Le={name:"OptionsCreatorField",components:{FormFieldLabel:I["a"],FormFieldWrapper:Ne["a"],FormFieldError:me["a"]},props:{value:{type:Array,required:!0},label:{type:String,default:""},isMandatory:{type:Boolean,default:!1},tooltip:{type:String,default:""},isDisabled:{type:Boolean,default:!1},isReadonly:{type:Boolean,default:!1},error:{type:String,default:""}},data(){return{isFocused:!1,option:""}},methods:{addOption(){if(!this.option)return;const e=this.value.find(e=>Object(xe["a"])(e)===Object(xe["a"])(this.option));e?this.$alert.error("Option already exists"):(this.$emit("input",[...this.value,this.option]),this.option="")},removeOption(e){const t=this.value;t.splice(e,1),this.$emit("input",t)}}},Be=Le,qe=(i("7e3a"),Object(f["a"])(Be,we,Ee,!1,null,"7e1d614a",null)),Pe=qe.exports,Ve=i("c3d2"),Re=i("0d5e"),je={name:"SelectFieldOptions",components:{ValidationProvider:r["b"],OptionsCreatorField:Pe,SelectField:c["a"],SingleChoiceField:Y["a"],CheckboxField:ve["a"],FormFieldLabel:I["a"],MultiSelectField:Ve["a"]},props:{optionsType:{type:String,required:!0},masterFormId:{type:Number,required:!0},masterTableColumn:{type:String,required:!0},predefinedOptions:{type:Array,required:!0},allowToAddNewOptions:{type:Boolean,default:!1},masterFormParentColumn:{type:String,default:""},fields:{type:Array,default:()=>[]},field:{type:Object,default:()=>{}},mandatorySettings:{type:Array,default:()=>[]},nonMandatoryFields:{type:Array,default:()=>[]}},data(){return{optionsTypes:[{id:this.$nano.id(),label:"Use unique column values as options",value:"EXISTING"},{id:this.$nano.id(),label:"Use values from a master table as options",value:"MASTER"},{id:this.$nano.id(),label:"Use predefined values as options",value:"PREDEFINED"}],masterForms:[],masterTableColumns:[],masterTableData:[]}},computed:{showMandatorySettings(){return!("MASTER"!==this.optionsType||!this.masterFormId||!this.masterTableColumn)||(!("PREDEFINED"!==this.optionsType||!this.predefinedOptions.length)||"EXISTING"===this.optionsType)},options(){return"MASTER"===this.optionsType&&this.masterFormId?this.masterTableData:"PREDEFINED"===this.optionsType&&this.predefinedOptions.length?this.predefinedOptions.map(e=>({id:this.$nano.id(),label:e,value:e})):[]}},watch:{optionsType:{immediate:!0,handler(){switch(this.optionsType){case"EXISTING":this.updateMasterFormId(0),this.updateMasterColumn(""),this.updatePredefinedOptions([]),this.updateAllowToAddNewOptions(!0),this.updateMasterFormParentColumn("");break;case"MASTER":this.updatePredefinedOptions([]),this.updateAllowToAddNewOptions(!1);break;case"PREDEFINED":this.updateMasterFormId(0),this.updateMasterColumn(""),this.updateAllowToAddNewOptions(!1),this.updateMasterFormParentColumn("");break}}},masterFormId:{immediate:!0,handler(){this.masterFormId&&this.getFormFields(this.masterFormId)}},mandatorySettings:{immediate:!0,deep:!0,handler:function(){this.$emit("update:mandatorySettings",this.mandatorySettings)}},masterTableColumn:{immediate:!0,handler(){this.masterTableColumn&&this.getMasterEntries(this.masterFormId,this.masterTableColumn)}}},created(){this.getMasterForms()},mounted(){0===this.mandatorySettings.length&&this.addRow()},methods:{updateOptionsType(e){this.$emit("update:optionsType",e)},updateMasterFormId(e){this.$emit("update:masterFormId",e)},updateMasterColumn(e){this.$emit("update:masterTableColumn",e)},updatePredefinedOptions(e){this.$emit("update:predefinedOptions",e)},updateAllowToAddNewOptions(e){this.$emit("update:allowToAddNewOptions",e)},async getMasterForms(){const{error:e,payload:t}=await p["g"].getForms({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"type",condition:"IS_EQUALS_TO",value:"MASTER",dataType:""},{criteria:"publishOption",condition:"IS_EQUALS_TO",value:"PUBLISHED",dataType:""}],groupCondition:""}],itemsPerPage:500,currentPage:1,hasSecurity:!1});if(e)return void this.$alert.error("Error fetching master form list");this.masterForms=[];const{data:i}=t;console.log(i),i.length&&(this.masterForms=i[0].value.map(e=>({id:this.$nano.id(),label:e.name,value:e.id})))},async getFormFields(e){this.masterTableColumns=[];const{error:t,payload:i}=await p["g"].getForm(e);if(t)this.$alert.error(t);else if(i){let e=JSON.parse(i.formJson),t=[];const a=[...e.panels,...e.secondaryPanels];if(!a.length)return;for(const i of a)t.push(...i.fields);t.forEach(e=>{"DIVIDER"!==e.type&&this.masterTableColumns.push({id:e.id,label:e.label,value:e.id})})}},updateMasterFormParentColumn(e){this.$emit("update:masterFormParentColumn",e)},addRow(){const e={id:this.$nano.id(),value:"",fields:[]};this.mandatorySettings.push(e)},removeRow(e){this.mandatorySettings.splice(e,1)},async getMasterEntries(e,t){try{const i=await Re["b"].post(`/form/${e}/uniqueColumnValues`,JSON.stringify({column:t,keyword:"",rowFrom:0,rowCount:0})),{status:a,data:o}=i;if(200!==a)throw i;const n=JSON.parse(o);n.length&&(this.masterTableData=n.map(e=>({id:this.$nano.id(),label:e,value:e})))}catch(i){console.error(i),this.$alert.error("Error fetching options")}}}},Ye=je,Ge=(i("228d"),Object(f["a"])(Ye,Ae,Ie,!1,null,"e1e0c598",null)),Ue=Ge.exports,He=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"table-field-options"}},[t("ValidationProvider",{attrs:{name:"columns",mode:"lazy",rules:{required:!1}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("ColumnBuilder",{attrs:{value:e.columns,error:i[0]},on:{input:e.updateColumn}})]}}])}),e.columns.length?t("TablePreview",{attrs:{columns:e.columns}}):e._e()],1)},We=[],ze=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"column-builder"}},[t("FormFieldLabel",{attrs:{label:"columns","is-mandatory":""}}),t("div",{staticClass:"header"},[t("div",{staticClass:"label col"},[e._v("Name")]),t("div",{staticClass:"label",staticStyle:{width:"120px"}},[e._v("Data Type")]),t("div",{staticClass:"label",staticStyle:{width:"120px"}},[e._v("Is Mandatory")]),t("div",{staticStyle:{width:"80px"}},[t("BaseActionButton",{attrs:{"is-flat":"",color:"secondary",icon:"eva-plus","no-border":""},on:{click:function(t){e.isColumnDetailsVisible=!0}}})],1)]),t("Draggable",{attrs:{value:e.value},on:{input:e.handleChange}},e._l(e.value,(function(i,a){return t("div",{key:i._id,staticClass:"_column row items-center"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"drag_indicator",size:"16px"}}),t("div",{staticClass:"col"},[e._v(e._s(i.name))]),t("div",{staticStyle:{width:"120px"}},[e._v(e._s(i.dataType))]),t("div",{staticStyle:{width:"120px"}},[e._v(e._s(i.isMandatory?"Yes":"No"))]),t("div",{staticClass:"row",staticStyle:{width:"80px"}},[t("BaseActionButton",{staticClass:"col-auto",attrs:{"is-flat":"",color:"secondary",icon:"eva-edit-outline","no-border":""},on:{click:function(t){return e.editColumn(i)}}}),t("BaseActionButton",{staticClass:"col-auto",attrs:{"is-flat":"",color:"red",icon:"eva-close-outline","no-border":""},on:{click:function(t){return e.removeColumn(a)}}})],1)],1)})),0),e.value.length?t("BaseSeparator"):e._e(),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e(),t("ColumnDetails",{attrs:{column:e.column},on:{add:e.addColumn,save:e.saveColumn},model:{value:e.isColumnDetailsVisible,callback:function(t){e.isColumnDetailsVisible=t},expression:"isColumnDetailsVisible"}})],1)},Je=[],Xe=function(){var e=this,t=e._self._c;return t("Modal",{attrs:{value:e.value,width:"540px","has-footer":""},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.column?"Edit":"Add")+" Column")]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"form"},[t("ValidationProvider",{attrs:{name:"name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-mb-lg",attrs:{label:"name","is-mandatory":"",error:i[0]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})]}}])}),t("CheckboxField",{staticClass:"q-mb-lg",attrs:{label:"This is a mandatory field"},model:{value:e.isMandatory,callback:function(t){e.isMandatory=t},expression:"isMandatory"}}),t("SelectField",{staticClass:"q-mb-lg",attrs:{label:"data type","is-mandatory":"","is-clearable":!1,options:e.dataTypes},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}}),"NUMBER"===e.dataType?[t("CheckboxField",{staticClass:"q-mb-md",attrs:{label:"Show column sum"},model:{value:e.options.showColumnSum,callback:function(t){e.$set(e.options,"showColumnSum",t)},expression:"options.showColumnSum"}}),t("NumberFieldOptions",{attrs:{"allow-decimals":e.options.allowDecimals},on:{"update:allowDecimals":function(t){return e.$set(e.options,"allowDecimals",t)},"update:allow-decimals":function(t){return e.$set(e.options,"allowDecimals",t)}}})]:e._e(),"BOOLEAN"===e.dataType?t("BooleanFieldOptions",{attrs:{"truthy-value":e.options.truthyValue,"falsy-value":e.options.falsyValue},on:{"update:truthyValue":function(t){return e.$set(e.options,"truthyValue",t)},"update:truthy-value":function(t){return e.$set(e.options,"truthyValue",t)},"update:falsyValue":function(t){return e.$set(e.options,"falsyValue",t)},"update:falsy-value":function(t){return e.$set(e.options,"falsyValue",t)}}}):e._e(),"SELECT"===e.dataType?t("SelectFieldOptions",{attrs:{"options-type":e.options.optionsType,"master-table":e.options.masterTable,"predefined-options":e.options.predefinedOptions,"master-table-column":e.options.masterTableColumn,"allow-to-add-new-options":e.options.allowToAddNewOptions},on:{"update:optionsType":function(t){return e.$set(e.options,"optionsType",t)},"update:options-type":function(t){return e.$set(e.options,"optionsType",t)},"update:masterTable":function(t){return e.$set(e.options,"masterTable",t)},"update:master-table":function(t){return e.$set(e.options,"masterTable",t)},"update:predefinedOptions":function(t){return e.$set(e.options,"predefinedOptions",t)},"update:predefined-options":function(t){return e.$set(e.options,"predefinedOptions",t)},"update:masterTableColumn":function(t){return e.$set(e.options,"masterTableColumn",t)},"update:master-table-column":function(t){return e.$set(e.options,"masterTableColumn",t)},"update:allowToAddNewOptions":function(t){return e.$set(e.options,"allowToAddNewOptions",t)},"update:allow-to-add-new-options":function(t){return e.$set(e.options,"allowToAddNewOptions",t)}}}):e._e(),"BARCODE"===e.dataType?t("BarcodeFieldOptions",{attrs:{"barcode-type":e.options.barcodeType,"barcode-prefix":e.options.barcodePrefix,"barcode-length":e.options.barcodeLength},on:{"update:barcodeType":function(t){return e.$set(e.options,"barcodeType",t)},"update:barcode-type":function(t){return e.$set(e.options,"barcodeType",t)},"update:barcodePrefix":function(t){return e.$set(e.options,"barcodePrefix",t)},"update:barcode-prefix":function(t){return e.$set(e.options,"barcodePrefix",t)},"update:barcodeLength":function(t){return e.$set(e.options,"barcodeLength",t)},"update:barcode-length":function(t){return e.$set(e.options,"barcodeLength",t)}}}):e._e()],2)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:e.column?"save":"add"},on:{click:function(t){e.column?e.saveColumn():e.addColumn()}}})]},proxy:!0}])})},Qe=[],Ke=i("6a70"),Ze=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"barcode-field-options"}},[t("ValidationProvider",{attrs:{name:"barcode type",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{staticClass:"q-mb-lg",attrs:{"is-mandatory":"",label:"barcode type",error:i[0],value:e.barcodeType,"is-clearable":!1,options:e.barcodeTypes},on:{input:e.updateBarcodeType}})]}}])}),t("ValidationProvider",{attrs:{name:"barcode prefix",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-mb-lg",attrs:{"is-mandatory":"",label:"barcode prefix",error:i[0],value:e.barcodePrefix},on:{input:e.updateBarcodePrefix}})]}}])}),t("ValidationProvider",{attrs:{name:"barcode length",rules:{required:!0,integer:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("NumberField",{staticClass:"q-mb-lg",attrs:{"is-mandatory":"",label:"barcode length",error:i[0],value:e.barcodeLength},on:{input:e.updateBarcodeLength}})]}}])})],1)},et=[],tt=i("ad54"),it={name:"BarcodeFieldOptions",components:{ValidationProvider:r["b"],SelectField:c["a"],TextField:T["a"],NumberField:tt["a"]},props:{barcodeType:{type:String,required:!0},barcodePrefix:{type:String,required:!0},barcodeLength:{type:[String,Number],required:!0}},data(){return{barcodeTypes:[{id:this.$nano.id(),label:"Quick Response (QR) Codes",value:"Quick Response (QR) Codes"},{id:this.$nano.id(),label:"Universal Product Codes (UPC)",value:"Universal Product Codes (UPC)"},{id:this.$nano.id(),label:"Data Matrix",value:"Data Matrix"}]}},methods:{updateBarcodeType(e){this.$emit("update:barcodeType",e)},updateBarcodePrefix(e){this.$emit("update:barcodePrefix",e)},updateBarcodeLength(e){this.$emit("update:barcodeLength",e)}}},at=it,ot=Object(f["a"])(at,Ze,et,!1,null,"f96aa60e",null),nt=ot.exports,st=i("874f"),rt={name:"TableColumnDetails",components:{Modal:Ke["a"],ValidationObserver:r["a"],ValidationProvider:r["b"],TextField:T["a"],CheckboxField:ve["a"],SelectField:c["a"],NumberFieldOptions:Ce,BooleanFieldOptions:ke,SelectFieldOptions:Ue,BarcodeFieldOptions:nt},props:{value:{type:Boolean,default:!1},column:{type:Object,default:null}},data(){return{isColumnDetailsVisible:!1,name:"",dataType:"TEXT",isMandatory:!1,options:{allowDecimals:!0,showColumnSum:"",truthyValue:"true",falsyValue:"false",optionsType:"EXISTING",masterTable:"",masterTableColumn:"",predefinedOptions:[],allowToAddNewOptions:!0,barcodeType:"",barcodePrefix:"",barcodeLength:""}}},computed:{dataTypes(){return["SHORT_TEXT","NUMBER","BOOLEAN","DATE","TIME","DATE_TIME","SINGLE_SELECT","BARCODE"].map(e=>({id:this.$nano.id(),label:Object(st["a"])(Object(xe["a"])(e)),value:e}))}},watch:{column:{immediate:!0,handler(){this.column?(this.name=this.column.name,this.isMandatory=this.column.isMandatory,this.dataType=this.column.dataType,this.options=this.column.options):this.reset()}}},methods:{reset(){this.name="",this.dataType="TEXT",this.isMandatory=!1,this.options={allowDecimals:!0,showColumnSum:!1,truthyValue:"true",falsyValue:"false",optionsType:"EXISTING",masterTable:"",masterTableColumn:"",predefinedOptions:[],allowToAddNewOptions:!0,barcodeType:"",barcodePrefix:"",barcodeLength:""}},closeModal(){this.$emit("input",!1),this.reset()},async addColumn(){const e=await this.$refs.form.validate();e&&(this.$emit("add",{_id:this.$nano.id(),name:this.name,dataType:this.dataType,isMandatory:this.isMandatory,options:this.options}),this.closeModal())},async saveColumn(){const e=await this.$refs.form.validate();e&&(this.$emit("save",{_id:this.column._id,name:this.name,dataType:this.dataType,isMandatory:this.isMandatory,options:this.options}),this.closeModal())}}},lt=rt,dt=Object(f["a"])(lt,Xe,Qe,!1,null,"d16aa78a",null),ut=dt.exports,ct={name:"ColumnBuilder",components:{FormFieldLabel:I["a"],FormFieldError:me["a"],Draggable:ee["a"],ColumnDetails:ut},props:{value:{type:Array,required:!0},error:{type:String,default:""}},data(){return{column:null,isColumnDetailsVisible:!1}},watch:{isColumnDetailsVisible(){this.isColumnDetailsVisible||(this.column=null)}},methods:{handleChange(e){this.$emit("input",e)},clearColumns(){this.handleChange([])},addColumn(e){this.handleChange([...this.value,e])},editColumn(e){this.column=e,this.isColumnDetailsVisible=!0},saveColumn(e){const t=this.value,i=this.value.findIndex(t=>t._id===e._id);t[i]=e,this.handleChange(t)},removeColumn(e){const t=this.value;t.splice(e,1),this.handleChange(t)}}},pt=ct,mt=(i("96c9"),Object(f["a"])(pt,ze,Je,!1,null,"6058816f",null)),ht=mt.exports,ft=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"table-preview"}},[t("FormFieldLabel",{attrs:{label:"preview","is-mandatory":""}}),t("BaseScrollbar",[t("table",[t("thead",[t("tr",e._l(e.columns,(function(i){return t("th",{key:i._id},[e._v(" "+e._s(i.name)+" ")])})),0)]),t("tbody",[t("tr",e._l(e.columns,(function(e){return t("td",{key:e._id})})),0),t("tr",e._l(e.columns,(function(i){return t("td",{key:i._id},[i.options.showColumnSum?t("div",{staticClass:"q-ml-sm font-medium"},[e._v(" Total: 0 ")]):e._e()])})),0)])])])],1)},yt=[],vt={name:"TablePreview",components:{FormFieldLabel:I["a"]},props:{columns:{type:Array,required:!0}}},bt=vt,gt=(i("c276"),Object(f["a"])(bt,ft,yt,!1,null,"2da33c40",null)),Tt=gt.exports,St={name:"TableFieldOptions",components:{ValidationProvider:r["b"],ColumnBuilder:ht,TablePreview:Tt},props:{columns:{type:Array,required:!0}},methods:{updateColumn(e){this.$emit("update:columns",e)}}},Ft=St,Ct=Object(f["a"])(Ft,He,We,!1,null,"876102c2",null),_t=Ct.exports,$t=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"auto_generated"}},[t("FormFieldLabel",{attrs:{label:"Format","is-mandatory":""}}),t("ValidationObserver",{ref:"autoGenerated"},[t("table",{staticClass:"q-mt-md"},[t("thead",[t("tr",[t("th",{staticClass:"medium"},[e._v("Type")]),t("th",{staticClass:"large"},[e._v("Value")]),t("th",{staticClass:"action"},[t("BaseActionButton",{staticClass:"q-ml-xs",attrs:{"is-flat":"",color:"secondary",icon:"eva-plus-outline","no-border":""},on:{click:e.addRow}})],1)])]),t("tbody",e._l(e.autoGeneratedOptions,(function(i,a){return t("tr",{key:a},[t("td",["seperator"===i.key?[t("TextField",{staticClass:"col text-capitalize",attrs:{"is-clearable":!0,"is-readonly":"seperator"===i.key},model:{value:i.key,callback:function(t){e.$set(i,"key",t)},expression:"row.key"}})]:e._e(),"seperator"!==i.key?[t("ValidationProvider",{staticClass:"col-12",attrs:{name:i.key,rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("SelectField",{staticClass:"col",attrs:{options:e.prefixList,"is-searchable":"",error:a[0]},on:{input:e.selectedKey},model:{value:i.key,callback:function(t){e.$set(i,"key",t)},expression:"row.key"}})]}}],null,!0)})]:e._e()],2),t("td",["prefix"===i.key?[t("ValidationProvider",{attrs:{name:i.key,rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("TextField",{staticClass:"col",attrs:{"is-clearable":!0,error:a[0],placeholder:"enter the prefix"},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"row.value"}})]}}],null,!0)})]:e._e(),"version"===i.key?[t("TextField",{staticClass:"col",attrs:{value:"1","is-clearable":!0,"is-readonly":!0},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"row.value"}})]:e._e(),"autoIncrement"===i.key?[t("ValidationProvider",{attrs:{name:i.key,rules:e.validationRules},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("CounterField",{staticClass:"col",attrs:{"is-clearable":!1,placeholder:"enter no.of digit",error:a[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"row.value"}})]}}],null,!0)})]:e._e(),"fieldColumn"===i.key?[t("ValidationProvider",{attrs:{name:i.key,rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("SelectField",{attrs:{options:e.fieldColumns,"is-searchable":"",error:a[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"row.value"}})]}}],null,!0)})]:e._e(),"seperator"===i.key?[t("SelectField",{staticClass:"col",attrs:{options:e.seperator,"is-searchable":""},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"row.value"}})]:e._e(),"currentDate"===i.key?[t("div",{staticClass:"col-12"},[t("ValidationProvider",{attrs:{name:i.key,rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("SelectField",{staticClass:"col-12",attrs:{options:e.currentDates,"is-searchable":"",error:a[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"row.value"}})]}}],null,!0)})],1)]:e._e()],2),t("td",{staticClass:"action"},["seperator"!==i.key?t("BaseActionButton",{attrs:{"is-flat":"",color:"red",icon:"eva-close-outline","no-border":""},on:{click:function(t){return e.removeRow(a)}}}):e._e()],1)])})),0)])]),t("div",{staticClass:"format row"},[t("div",{staticClass:"col-auto q-mr-sm"},[e._v("Format :")]),e._l(e.autoGeneratedOptions,(function(i,a){return t("div",{key:a,staticClass:"row"},[e._v(" "+e._s(e.getFormat(i,a))+" ")])}))],2)],1)},Dt=[],Mt=i("cc77"),Ot={name:"AutoGeneratedOptions",components:{ValidationProvider:r["b"],TextField:T["a"],SelectField:c["a"],FormFieldLabel:I["a"],CounterField:Mt["a"],ValidationObserver:r["a"]},props:{fieldColumns:{type:Array,default:()=>[]},autoGeneratedOptions:{type:Array,default:()=>[]}},data(){return{prefix:[{id:this.$nano.id(),key:"seperator",value:""},{id:this.$nano.id(),key:"",value:[]}],prefixList:[{id:this.$nano.id(),label:"Prefix",value:"prefix"},{id:this.$nano.id(),label:"Field Column",value:"fieldColumn"},{id:this.$nano.id(),label:"Auto Increment",value:"autoIncrement"},{id:this.$nano.id(),label:"Version",value:"version"},{id:this.$nano.id(),label:"Current Date",value:"currentDate"}],seperator:[{id:this.$nano.id(),label:"-",value:"-"},{id:this.$nano.id(),label:"#",value:"#"},{id:this.$nano.id(),label:"_",value:"_"}],currentDates:[{id:this.$nano.id(),label:"DDMMYY",value:"ddMMyy"},{id:this.$nano.id(),label:"DDMMYYYY",value:"ddMMyyyy"},{id:this.$nano.id(),label:"DDMMMYY",value:"ddMMMyy"},{id:this.$nano.id(),label:"DDMMMYYYY",value:"ddMMMyyyy"},{id:this.$nano.id(),label:"DDMMMMYY",value:"ddMMMMyy"},{id:this.$nano.id(),label:"DDMMMMYYYY",value:"ddMMMMyyyy"},{id:this.$nano.id(),label:"MMDDYY",value:"MMddyy"},{id:this.$nano.id(),label:"MMDDYYYY",value:"MMddyyyy"},{id:this.$nano.id(),label:"MMMDDYY",value:"MMMddyy"},{id:this.$nano.id(),label:"MMMDDYYYY",value:"MMMddyyyy"},{id:this.$nano.id(),label:"MMMMDDYY",value:"MMMMddyy"},{id:this.$nano.id(),label:"MMMMDDYYYY",value:"MMMMddyyyy"},{id:this.$nano.id(),label:"YYMMDD",value:"yyMMdd"},{id:this.$nano.id(),label:"YYYYMMDD",value:"yyyyMMdd"},{id:this.$nano.id(),label:"YYMMMDD",value:"yyMMMdd"},{id:this.$nano.id(),label:"YYYYMMMDD",value:"yyyyMMMdd"},{id:this.$nano.id(),label:"YYMMMMDD",value:"yyMMMMdd"},{id:this.$nano.id(),label:"YYYYMMMMDD",value:"yyyyMMMMdd"}],currentIndex:0}},computed:{validationRules(){const e={integer:!0,required:!0,min_value:1,max_value:7};return e}},watch:{autoGeneratedOptions:{deep:!0,async handler(){this.$emit("update:autoIncrement",this.autoGeneratedOptions)}}},methods:{removeRow(e){this.autoGeneratedOptions.splice(e,1)},addRow(){this.autoGeneratedOptions.push({id:this.$nano.id(),key:"",value:[]}),this.currentIndex=this.autoGeneratedOptions.length-1},selectedKey(){"version"===this.autoGeneratedOptions[this.currentIndex].key&&(this.autoGeneratedOptions[this.currentIndex].value="1"),"prefix"===this.autoGeneratedOptions[this.currentIndex].key&&(this.autoGeneratedOptions[this.currentIndex].value="DOC")},getFormat(e,t){let i="";const a=["January","February","March","April","May","June","July","August","September","October","November","December"];var o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=new Date;if("prefix"===e.key)e.value&&(i+=`${e.value}${this.autoGeneratedOptions[0].value}`);else if("fieldColumn"===e.key)e.value&&(i+=`${e.value}${this.autoGeneratedOptions[0].value}`);else if("autoIncrement"===e.key){if(e.value&&Number(e.value)<=7){var s="";for(let t=1;t<e.value;t++)s+="0";s+="1",i+=`${s}${this.autoGeneratedOptions[0].value}`}}else if("version"===e.key)i+=`${e.value}${this.autoGeneratedOptions[0].value}`;else if("currentDate"===e.key){let t=(n.getDate()>9?"":"0")+n.getDate(),s=(n.getMonth()+1>9?"":"0")+(n.getMonth()+1),r=n.getFullYear();switch(e.value){case"ddMMyy":i+=`${t}${s}${r.toString().substring(2)}`;break;case"ddMMyyyy":i+=`${t}${s}${r}`;break;case"ddMMMyy":i+=`${t}${o[n.getMonth()]}${r.toString().substring(2)}`;break;case"ddMMMyyyy":i+=`${t}${o[n.getMonth()]}${r}`;break;case"ddMMMMyy":i+=`${t}${a[n.getMonth()]}${r.toString().substring(2)}`;break;case"ddMMMMyyyy":i+=`${t}${a[n.getMonth()]}${r}`;break;case"MMddyy":i+=`${s}${t}${r.toString().substring(2)}`;break;case"MMddyyyy":i+=`${s}${t}${r}`;break;case"MMMddyy":i+=`${o[n.getMonth()]}${t}${r.toString().substring(2)}`;break;case"MMMddyyyy":i+=`${o[n.getMonth()]}${t}${r}`;break;case"MMMMddyy":i+=`${a[n.getMonth()]}${t}${r.toString().substring(2)}`;break;case"MMMMddyyyy":i+=`${a[n.getMonth()]}${t}${r}`;break;case"yyMMdd":i+=`${r.toString().substring(2)}${s}${t}`;break;case"yyyyMMdd":i+=`${r}${s}${t}`;break;case"yyMMMdd":i+=`${r.toString().substring(2)}${o[n.getMonth()]}${t}`;break;case"yyyyMMMdd":i+=`${r}${o[n.getMonth()]}${t}`;break;case"yyMMMMdd":i+=`${r.toString().substring(2)}${a[n.getMonth()]}${t}`;break;case"yyyyMMMMdd":i+=`${r}${a[n.getMonth()]}${t}`;break}i+=this.autoGeneratedOptions[0].value}let r=i.slice(-1);var l="";return t+1===this.autoGeneratedOptions.length?r===this.autoGeneratedOptions[0].value&&(l=i.substring(0,i.length-1)):l+=i,""+l}}},kt=Ot,At=(i("1fc7"),Object(f["a"])(kt,$t,Dt,!1,null,"15c82bdc",null)),It=At.exports,wt=i("381b"),Et={name:"FieldDetails",components:{Sheet:ye["a"],ValidationObserver:r["a"],ValidationProvider:r["b"],TextField:T["a"],CheckboxField:ve["a"],SelectField:c["a"],NumberFieldOptions:Ce,BooleanFieldOptions:ke,SelectFieldOptions:Ue,TableFieldOptions:_t,BarcodeFieldOptions:nt,AutoGeneratedOptions:It},props:{value:{type:Boolean,default:!1},field:{type:Object,default:null},fields:{type:Array,default:()=>[]}},data(){return{name:"",isMandatory:!1,includeInFolderStructure:!1,dataType:"",options:{allowDecimals:!0,truthyValue:"true",falsyValue:"false",optionsType:"EXISTING",masterFormId:0,masterTableColumn:"",predefinedOptions:[],allowToAddNewOptions:!0,columns:[],barcodeType:"",barcodePrefix:"",barcodeLength:"",autoGeneratedOptions:[{id:this.$nano.id(),key:"seperator",value:"-"},{id:this.$nano.id(),key:"autoIncrement",value:1}],masterFormParentColumn:"",mandatorySettings:[]},fieldsColumns:[],autoGeneratedOptions:[{id:this.$nano.id(),key:"seperator",value:"-"},{id:this.$nano.id(),key:"autoIncrement",value:1}]}},computed:{dataTypes(){const e=Object.keys(wt["a"]);return e.map(e=>({id:this.$nano.id(),label:"OMR"===e?e:Object(st["a"])(Object(xe["a"])(e)),value:e}))},disableIsMandatory(){return this.includeInFolderStructure||"TABLE"===this.dataType},disableIncludeInFolderStructure(){return"TABLE"===this.dataType},_fields(){let e=[];return this.fields.forEach(t=>{var i;if(t.name!==(null===(i=this.field)||void 0===i?void 0:i.name)){let i=JSON.parse(t.options);i.masterFormId===this.options.masterFormId&&e.push({id:this.$nano.id(),label:t.name,value:t.name})}}),e},nonMandatoryFields(){let e=[];return this.fields.forEach(t=>{var i;t.name!==(null===(i=this.field)||void 0===i?void 0:i.name)&&(t.isMandatory||e.push({id:this.$nano.id(),label:t.name,value:t.name}))}),e}},watch:{field:{immediate:!0,handler(){this.field?(this.name=this.field.name,this.isMandatory=this.field.isMandatory,this.includeInFolderStructure=this.field.includeInFolderStructure,this.dataType=this.field.dataType,this.options=JSON.parse(this.field.options),this.options.autoGeneratedOptions.length||(this.options.autoGeneratedOptions=[{id:this.$nano.id(),key:"seperator",value:"-"},{id:this.$nano.id(),key:"autoIncrement",value:1}])):this.reset()}},includeInFolderStructure(){this.includeInFolderStructure&&(this.isMandatory=!0)},dataType(){"TABLE"===this.dataType&&(this.isMandatory=!1,this.includeInFolderStructure=!1)},fields:{deep:!0,immediate:!0,handler(){this.fields.length&&(this.fieldsColumns=[],this.fields.forEach(e=>{"AUTO_GENERATED"!==e.dataType&&this.fieldsColumns.push({id:this.$nano.id(),label:e.name,value:e.name})}))}},"options.optionsType":{immediate:!0,handler(){"EXISTING"===this.options.optionsType?this.options.allowToAddNewOptions=!0:console.log(this.options.allowToAddNewOptions)}}},methods:{reset(){this.name="",this.isMandatory=!1,this.includeInFolderStructure=!1,this.dataType="",this.options={allowDecimals:!0,truthyValue:"true",falsyValue:"false",optionsType:"EXISTING",masterFormId:0,masterTableColumn:"",predefinedOptions:[],allowToAddNewOptions:!0,columns:[],barcodeType:"",barcodePrefix:"",barcodeLength:"",autoGeneratedOptions:[{id:this.$nano.id(),key:"seperator",value:"-"},{id:this.$nano.id(),key:"autoIncrement",value:1}],masterFormParentColumn:""}},closeSheet(){this.$emit("input",!1),this.reset()},async addField(){const e=await this.$refs.form.validate();this.dataType,e&&(this.$emit("add",{_id:this.$nano.id(),name:this.name,dataType:this.dataType,isMandatory:this.isMandatory,includeInFolderStructure:this.includeInFolderStructure,level:0,options:JSON.stringify(this.options)}),this.closeSheet())},async saveField(){const e=await this.$refs.form.validate();e&&(this.$emit("save",{_id:this.field._id,id:this.field.id,name:this.name,dataType:this.dataType,isMandatory:this.isMandatory,includeInFolderStructure:this.includeInFolderStructure,level:0,options:JSON.stringify(this.options)}),this.closeSheet())}}},xt=Et,Nt=Object(f["a"])(xt,he,fe,!1,null,"301df2c8",null),Lt=Nt.exports,Bt={name:"FieldsBuilder",components:{FormFieldLabel:I["a"],FieldsHeader:Q,FieldDetails:Lt,FolderFields:se,OtherFields:pe,FormFieldError:me["a"]},props:{value:{type:Array,required:!0},fieldsType:{type:String,required:!0},error:{type:String,default:""}},data(){return{isFieldDetailsVisible:!1,field:null}},computed:{folderFields:{cache:!1,get(){return this.value.filter(e=>e.includeInFolderStructure).sort((e,t)=>e.level<t.level?-1:e.level>t.level?1:0)}},otherFields:{cache:!1,get(){return this.value.filter(e=>!e.includeInFolderStructure)}}},watch:{isFieldDetailsVisible(){this.isFieldDetailsVisible||(this.field=null)}},methods:{showFieldSheet(){this.isFieldDetailsVisible=!0},addField(e){const t=this.value.find(t=>Object(xe["a"])(t.name)===Object(xe["a"])(e.name));t?this.$alert.error("Field with the given name already exists"):this.$emit("input",[...this.value,e])},clearAllFields(){this.$emit("input",[])},editField(e){this.field=this.value.find(t=>t._id===e),this.showFieldSheet()},saveField(e){const t=this.value.findIndex(t=>t._id===e._id),i=this.value;i[t]=e,this.$emit("input",i)},deleteField(e){const t=this.value.findIndex(t=>t._id===e),i=this.value;i.splice(t,1),this.$emit("input",i)},reorderFields(e){this.$emit("input",[...e,...this.otherFields])}}},qt=Bt,Pt=Object(f["a"])(qt,G,U,!1,null,"a7e7f1c8",null),Vt=Pt.exports,Rt={name:"FieldsDetails",components:{FormSection:u["a"],SingleChoiceField:Y["a"],ValidationProvider:r["b"],FieldsBuilder:Vt},props:{fieldsType:{type:String,required:!0},fields:{type:Array,required:!0},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"},dynamicFields:{type:Array,required:!0}},data(){return{fieldTypes:[{id:this.$nano.id(),label:"Dynamic",value:"DYNAMIC"},{id:this.$nano.id(),label:"Static",value:"STATIC"}]}},watch:{fieldsType(){"DYNAMIC"===this.fieldsType?this.updateFields(this.dynamicFields):this.updateFields([])}},methods:{updateType(e){this.$emit("update:fieldsType",e)},updateFields(e){let t=0;for(let i=0;i<e.length;i++)e[i].includeInFolderStructure&&(t+=1,e[i].level=t);this.$emit("update:fields",e)}}},jt=Rt,Yt=Object(f["a"])(jt,R,j,!1,null,"48edb49c",null),Gt=Yt.exports,Ut=function(){var e=this,t=e._self._c;return t("FormSection",e._g({attrs:{icon:e.isActive?"eva-shield":"eva-shield-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Security Details")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Designate users and owners who have access and management privileges for the files and documents under this root folder. ")]},proxy:!0}])},e.$listeners),[t("MultiSelectField",{staticClass:"q-mb-lg",attrs:{label:"owner",value:e.owner,options:e.users},on:{input:e.updateOwner}}),t("MultiSelectField",{staticClass:"q-mb-lg",attrs:{label:"coordinator",value:e.coordinator,options:e.users},on:{input:e.updateCoordinator}}),e._e()],1)},Ht=[],Wt=i("53c1"),zt={name:"SecurityDetails",components:{FormSection:u["a"],MultiSelectField:Ve["a"],DateField:Wt["a"]},props:{owner:{type:Array,required:!0},coordinator:{type:Array,required:!0},expiryDate:{type:String,required:!0},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"}},data(){return{users:[]}},mounted(){this.getUsers()},methods:{updateOwner(e){this.$emit("update:owner",e||[])},updateCoordinator(e){this.$emit("update:coordinator",e||[])},updateExpiryDate(e){this.$emit("update:expiryDate",e)},async getUsers(){const{error:e,payload:t}=await p["s"].getUserList();e?this.$alert.error("Error fetching users"):this.users=t&&t.map(e=>({id:this.$nano.id(),label:e.value,value:Number(e.id)}))}}},Jt=zt,Xt=Object(f["a"])(Jt,Ut,Ht,!1,null,"612c089f",null),Qt=Xt.exports,Kt=function(){var e=this,t=e._self._c;return t("FormSection",e._g({attrs:{icon:e.isActive?"mdi-file-replace":"mdi-file-replace-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Document Version Details")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Choose a naming convention suffix that suits your preference to identify and manage multiple versions of files. ")]},proxy:!0}])},e.$listeners),[t("SingleChoiceField",{staticClass:"q-mb-lg",attrs:{"is-mandatory":"",label:"version type",tooltip:"By selecting a suffix, the system will automatically assign the same suffix to each new version of the file. This enables you to conveniently track revisions and maintain proper version control for your documents.",value:e.versionType,"options-per-line":1,options:e.versionTypes},on:{input:e.updateVersionType}}),t("SingleChoiceField",{attrs:{"is-mandatory":"",label:"versioned documents",tooltip:"By selecting this option, you can choose whether to display all versions of a document or only the latest version in the digital workspace.","options-per-line":1,value:e.versionedDocuments,options:e.versionedDocumentOptions},on:{input:e.updateVersionedDocuments}})],1)},Zt=[],ei={name:"VersionDetails",components:{FormSection:u["a"],SingleChoiceField:Y["a"]},props:{versionType:{type:String,required:!0},versionedDocuments:{type:String,required:!0},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"}},data(){return{versionTypes:[{id:this.$nano.id(),label:"Replace",value:"REPLACE",description:"eg. file_name"},{id:this.$nano.id(),label:"Timestamp",value:"TIMESTAMP",description:"eg. file_name_YYYY-MM-DD HH:MM:SS"},{id:this.$nano.id(),label:"Number",value:"NUMBER",description:"eg. file_name_1"}],versionedDocumentOptions:[{id:this.$nano.id(),label:"Show all the versioned documents",value:"SHOW"},{id:this.$nano.id(),label:"Show only the latest document",value:"HIDE"}]}},methods:{updateVersionType(e){this.$emit("update:versionType",e)},updateVersionedDocuments(e){this.$emit("update:versionedDocuments",e)}}},ti=ei,ii=Object(f["a"])(ti,Kt,Zt,!1,null,"05e0dbae",null),ai=ii.exports,oi=function(){var e=this,t=e._self._c;return t("FormSection",e._g({attrs:{icon:e.isActive?"mdi-file-code":"mdi-file-code-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Document Properties")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Tagging the document properties with index fields allows easy identification your documents even after downloading them from the application ")]},proxy:!0}])},e.$listeners),[t("MultiSelectField",{staticClass:"q-mb-lg",attrs:{value:e.title,label:"title",options:e._fields},on:{input:e.updateTitle}}),t("MultiSelectField",{staticClass:"q-mb-lg",attrs:{value:e.subject,label:"subject",options:e._fields},on:{input:e.updateSubject}}),t("MultiSelectField",{staticClass:"q-mb-lg",attrs:{value:e.author,label:"author",options:e._fields},on:{input:e.updateAuthor}}),t("MultiSelectField",{staticClass:"q-mb-lg",attrs:{value:e.keywords,label:"keywords",options:e._fields},on:{input:e.updateKeywords}}),t("TextField",{attrs:{value:e.signature,label:"signature"},on:{input:e.updateSignature}})],1)},ni=[],si={name:"MetadataDetails",components:{FormSection:u["a"],MultiSelectField:Ve["a"],TextField:T["a"]},props:{title:{type:Array,required:!0},subject:{type:Array,required:!0},author:{type:Array,required:!0},keywords:{type:Array,required:!0},signature:{type:String,required:!0},fields:{type:Array,required:!0},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"}},computed:{_fields(){return this.fields.filter(e=>e.isMandatory).map(e=>({id:e._id,label:e.name,value:e.name}))}},methods:{updateTitle(e){this.$emit("update:title",e)},updateSubject(e){this.$emit("update:subject",e)},updateAuthor(e){this.$emit("update:author",e)},updateKeywords(e){this.$emit("update:keywords",e)},updateSignature(e){this.$emit("update:signature",e)}}},ri=si,li=Object(f["a"])(ri,oi,ni,!1,null,"33dbc8d2",null),di=li.exports,ui=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"quick-access"}},[t("div",{staticClass:"title-3 q-mx-md q-mb-md"},[e._v("Quick access")]),e._l(e.quickAccess,(function(i){return t("ListItem",{key:i.id,attrs:{icon:i.icon,label:i.label},on:{click:function(t){return e.handleClick(i.value)}}})}))],2)},ci=[],pi=i("cade"),mi={name:"QuickAccess",components:{ListItem:pi["a"]},data(){return{quickAccess:[{id:this.$nano.id(),label:"Change Description",value:"REPOSITORY_DETAILS",icon:"eva-lock-outline"},{id:this.$nano.id(),label:"Add user to a Repository",value:"REPOSITORY_DETAILS",icon:"eva-people-outline"}]}},methods:{handleClick(e){this.$emit("click",e)}}},hi=mi,fi=(i("ba9c"),Object(f["a"])(hi,ui,ci,!1,null,"50e8b26e",null)),yi=fi.exports,vi=function(){var e=this,t=e._self._c;return t("FormSection",e._g({attrs:{icon:e.isActive?"mdi-robot":"mdi-robot-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Auto Indexing Details")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Choose your preferred OCR indexing option to use as the default for your documents in this folder. ")]},proxy:!0}])},e.$listeners),[t("SingleChoiceField",{staticClass:"q-mb-lg",attrs:{value:e.indexingType,"is-mandatory":"",label:"indexing type",tooltip:"Standard OCR engines recognize content by zones and patterns, while advanced OCR engines use machine learning, natural language processing, and document classification for more accurate indexing of your documents",options:e.filterIndexingTypes,"options-per-line":4},on:{input:e.updateType}}),"ADVANCED"===e.indexingType||"ANY"===e.indexingType?t("div",["ADVANCED"===e.indexingType||"ANY"===e.indexingType?t("FormFieldLabel",{attrs:{"is-mandatory":!0,label:"Credits",tooltip:"Free Credits: The available credits offer you a certain amount of advanced OCR processing without any additional cost. Each credit allows you to perform advanced indexing on a document within this folder. As you assign credits, you'll be able to utilize the advanced features of our OCR engine for more accurate document indexing."}}):e._e(),t("BaseSeparator"),t("div",{staticClass:"text-red q-mt-md"},[e._v(" Available Credits: "+e._s(e.indicator?e.availableCredits:e.credits)+" ")]),t("div",{staticClass:"row"},["ADVANCED"===e.indexingType||"ANY"===e.indexingType?t("ValidationProvider",{attrs:{name:"Credits",rules:{min_value:0,max_value:e.overallCredits}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return["ADVANCED"===e.indexingType||"ANY"===e.indexingType?t("CounterField",{staticClass:"col-5 q-mt-md",attrs:{"is-mandatory":!0,label:"Assign credits for this folder",placeholder:"Credits of Advance indexing",error:i[0]},on:{input:e.updateCreditLimit},model:{value:e.creditValue,callback:function(t){e.creditValue=t},expression:"creditValue"}}):e._e()]}}],null,!1,278736527)}):e._e()],1)],1):e._e()],1)},bi=[],gi={name:"AutoIndexingDetails",components:{FormSection:u["a"],SingleChoiceField:Y["a"],ValidationProvider:r["b"],CounterField:Mt["a"],FormFieldLabel:I["a"]},props:{creditLimit:{type:Number,default:0},constantCredit:{type:Number,default:0},indexingType:{type:String,required:!0},mode:{type:String,default:"NEW"},isActive:{type:Boolean,default:!1},fieldsType:{type:String,required:!0}},data(){return{indexingTypes:[{id:this.$nano.id(),label:"Manual",value:"MANUAL",disable:!1},{id:this.$nano.id(),label:"Standard",value:"STANDARD",disable:!1},{id:this.$nano.id(),label:"Advanced",value:"ADVANCED",disable:!1},{id:this.$nano.id(),label:"Any",value:"ANY",disable:!1}],indicator:!1,credits:0,overallCredits:0,availableCredits:0,creditValue:0}},computed:{filterIndexingTypes(){return"DYNAMIC"===this.fieldsType?this.indexingTypes.filter(e=>"MANUAL"!==e.value):this.indexingTypes}},watch:{indexingType:{deep:!0,immediate:!0,handler(){"ADVANCED"!==this.indexingType&&"ANY"!==this.indexingType||this.getOcrCredit()}},constantCredit:{deep:!0,immediate:!0,handler(){this.creditValue=this.constantCredit}},creditValue:{deep:!0,immediate:!0,handler(){this.updateAvailableCredits()}}},created(){},methods:{updateType(e){"STANDARD"===e&&(this.creditValue=0,this.$emit("update:creditLimit",this.creditValue)),this.$emit("update:indexingType",e)},updateCreditLimit(){this.$emit("update:creditLimit",this.creditValue)},updateAvailableCredits(){if(this.creditValue>this.constantCredit){const e=this.creditValue,t=this.constantCredit,i=e-t,a=this.credits,o=a-i;this.indicator=!0,this.availableCredits=Math.max(o,0)}else if(this.creditValue<this.constantCredit){const e=this.creditValue,t=this.constantCredit,i=t-e,a=this.credits,o=a+i;this.indicator=!0,this.availableCredits=Math.max(o,0)}else this.indicator=!1},async getOcrCredit(){const e=0,{error:t,payload:i}=await p["p"].getOcrCredit(e);if(t)return void this.$alert.error(t);const a=parseFloat(i);this.credits=a,this.overallCredits=0===this.creditLimit?a:a+this.creditLimit}}},Ti=gi,Si=Object(f["a"])(Ti,vi,bi,!1,null,"212e1564",null),Fi=Si.exports,Ci=function(){var e=this,t=e._self._c;return t("FormSection",e._g({attrs:{icon:e.isActive?"mdi-database":"mdi-database-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Lookup Details")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Enter the desired name of the folder you'd like to create as a root folder to organize your documents. ")]},proxy:!0}])},e.$listeners),[t("ValidationProvider",{attrs:{name:"Connection"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{staticClass:"q-mb-lg",attrs:{value:e.connection,label:"Connection","is-mandatory":"",options:e.connections,error:i[0]},on:{input:e.updateConnection}})]}}])}),e.connection?t("ValidationProvider",{attrs:{name:"Connection name",rules:{required:!!e.connection}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{staticClass:"q-mb-lg",attrs:{value:e.connectionId,label:"Connection Name","is-mandatory":"",options:e.connectionNameList,error:i[0]},on:{input:e.updateConnectionId}})]}}],null,!1,3101874951)}):e._e(),e.connectionId?t("ValidationProvider",{attrs:{name:"Function name",rules:{required:!!e.connectionId}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{staticClass:"q-mb-lg",attrs:{value:e.hubName,label:"Function Name","is-mandatory":"",options:e.husList,error:i[0]},on:{input:e.updateHubName}})]}}],null,!1,1146596108)}):e._e(),t("div",{attrs:{id:"lookup-field"}},[e.hubName?t("div",{staticClass:"q-pb-sm"},[t("FormFieldLabel",{attrs:{label:"Name Condition"}}),t("table",[t("thead",[t("tr",[t("th",{staticClass:"medium"},[e._v("Column")]),t("th",{staticClass:"medium"},[e._v("Field")])])]),t("tbody",e._l(e.conditionMapping,(function(i,a){return t("tr",{key:a},[t("td",[e._v(" "+e._s(i.name)+" ")]),t("td",[t("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("SelectField",{attrs:{"is-mandatory":"",error:a[0],options:e.fields},model:{value:i.field,callback:function(t){e.$set(i,"field",t)},expression:"value.field"}})]}}],null,!0)})],1)])})),0)])],1):e._e(),e.hubName?t("div",{staticClass:"q-pb-sm"},[t("FormFieldLabel",{attrs:{label:"Value Condition"}}),t("table",[t("thead",[t("tr",[t("th",{staticClass:"medium"},[e._v("Column")]),t("th",{staticClass:"medium"},[e._v("Field")])])]),t("tbody",e._l(e.valueMapping,(function(i,a){return t("tr",{key:a},[t("td",[e._v(" "+e._s(i.name)+" ")]),t("td",[t("SelectField",{attrs:{"is-mandatory":"",options:e.outDataColumns},model:{value:i.field,callback:function(t){e.$set(i,"field",t)},expression:"value.field"}})],1)])})),0)])],1):e._e()])],1)},_i=[],$i={name:"LookupDetails",components:{FormSection:u["a"],ValidationProvider:r["b"],SelectField:c["a"],FormFieldLabel:I["a"]},props:{connection:{type:String,required:!0},connectionId:{type:[Number,String],required:!0},hubName:{type:Number,required:!0},fields:{type:Array,required:!0},conditionMapping:{type:Array,required:!0},valueMapping:{type:Array,required:!0},outDataColumns:{type:Array,required:!0},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"}},data(){return{connections:[],sqlConnections:[],apiConnections:[],oracleConnections:[],husList:[],connectorHub:[],inData:[],outData:[],field:[],name:""}},computed:{connectionNameList(){return"sql"===this.connection?this.sqlConnections:"api"===this.connection?this.apiConnections:"oracle"===this.connection?this.oracleConnections:[]}},watch:{connectionId(){this.connectionId&&this.getLookUp()}},created(){this.getConnection()},methods:{updateName(e){this.$emit("update:name",e)},updateConnection(e){this.$emit("update:connection",e),this.connectionId=0},updateConnectionId(e){this.$emit("update:connectionId",e)},updateHubName(e){this.$emit("update:hubName",e)},async getConnection(){const{error:e,payload:t}=await p["c"].getConnection({filterBy:[],mode:"BROWSE"});if(e)this.$alert.error(e);else if(t.length){let e=t.filter(e=>e.createdBy===this.$store.state.session.id&&"SQL"===e.connectorType);e.length&&(this.connections.push({id:this.$nano.id(),label:"SQL",value:"sql"}),e.forEach(e=>{this.sqlConnections.push({id:this.$nano.id(),label:e.name,value:e.id})}));let i=t.filter(e=>e.createdBy===this.$store.state.session.id&&"oauth2"===e.connectorType);i.length&&(this.connections.push({id:this.$nano.id(),label:"API",value:"api"}),i.forEach(e=>{this.apiConnections.push({id:this.$nano.id(),label:e.name,value:e.id})}));let a=t.filter(e=>e.createdBy===this.$store.state.session.id&&"ORACLE"===e.connectorType);a.length&&(this.connections.push({id:this.$nano.id(),label:"Oracle",value:"oracle"}),a.forEach(e=>{this.oracleConnections.push({id:this.$nano.id(),label:e.name,value:e.id})}))}},async getLookUp(){this.husList=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await p["c"].getLookUp({filterBy:[],mode:"BROWSE"});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);let i=[];t.forEach(e=>{i.push(e.connectorHub)});const a=i.filter(e=>e.createdBy===this.$store.state.session.id&&e.connectorId===this.connectionId);a.forEach(e=>{this.husList.push({id:this.$nano.id(),label:e.name,value:e.id})}),this.connectorHub=a,this.$emit("connectorHub",this.connectorHub)}}},Di=$i,Mi=(i("e738"),Object(f["a"])(Di,Ci,_i,!1,null,"2210fd08",null)),Oi=Mi.exports,ki=i("a12c"),Ai=i("12a1"),Ii=1,wi=2;function Ei(e,t,i,a){var o=i.length,n=o,s=!a;if(null==e)return!n;e=Object(e);while(o--){var r=i[o];if(s&&r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}while(++o<n){r=i[o];var l=r[0],d=e[l],u=r[1];if(s&&r[2]){if(void 0===d&&!(l in e))return!1}else{var c=new ki["a"];if(a)var p=a(d,u,l,e,t,c);if(!(void 0===p?Object(Ai["a"])(u,d,Ii|wi,a,c):p))return!1}}return!0}var xi=Ei,Ni=i("2332");function Li(e){return e===e&&!Object(Ni["a"])(e)}var Bi=Li,qi=i("9a4b");function Pi(e){var t=Object(qi["a"])(e),i=t.length;while(i--){var a=t[i],o=e[a];t[i]=[a,o,Bi(o)]}return t}var Vi=Pi;function Ri(e,t){return function(i){return null!=i&&(i[e]===t&&(void 0!==t||e in Object(i)))}}var ji=Ri;function Yi(e){var t=Vi(e);return 1==t.length&&t[0][2]?ji(t[0][0],t[0][1]):function(i){return i===e||xi(i,e,t)}}var Gi=Yi,Ui=i("5132");function Hi(e,t,i){var a=null==e?void 0:Object(Ui["a"])(e,t);return void 0===a?i:a}var Wi=Hi;function zi(e,t){return null!=e&&t in Object(e)}var Ji=zi,Xi=i("362e");function Qi(e,t){return null!=e&&Object(Xi["a"])(e,t,Ji)}var Ki=Qi,Zi=i("bd8f"),ea=i("4dc8"),ta=1,ia=2;function aa(e,t){return Object(Zi["a"])(e)&&Bi(t)?ji(Object(ea["a"])(e),t):function(i){var a=Wi(i,e);return void 0===a&&a===t?Ki(i,e):Object(Ai["a"])(t,a,ta|ia)}}var oa=aa,na=i("f976"),sa=i("ff51");function ra(e){return function(t){return null==t?void 0:t[e]}}var la=ra;function da(e){return function(t){return Object(Ui["a"])(t,e)}}var ua=da;function ca(e){return Object(Zi["a"])(e)?la(Object(ea["a"])(e)):ua(e)}var pa=ca;function ma(e){return"function"==typeof e?e:null==e?na["a"]:"object"==typeof e?Object(sa["a"])(e)?oa(e[0],e[1]):Gi(e):pa(e)}var ha=ma,fa=i("1549"),ya=i("7129"),va=Array.prototype,ba=va.splice;function ga(e,t){var i=e?t.length:0,a=i-1;while(i--){var o=t[i];if(i==a||o!==n){var n=o;Object(ya["a"])(o)?ba.call(e,o,1):Object(fa["a"])(e,o)}}return e}var Ta=ga;function Sa(e,t){var i=[];if(!e||!e.length)return i;var a=-1,o=[],n=e.length;t=ha(t,3);while(++a<n){var s=e[a];t(s,a,e)&&(i.push(s),o.push(a))}return Ta(e,o),i}var Fa=Sa,Ca={name:"RepositoryBuilder",components:{ItemBuilder:n["a"],ValidationObserver:r["a"],ActionBar:s["a"],QuickAccess:yi,WorkspaceDetails:v,RepositoryDetails:$,StorageDetails:V,FieldsDetails:Gt,SecurityDetails:Qt,VersionDetails:ai,MetadataDetails:di,AutoIndexingDetails:Fi,LookupDetails:Oi},props:{repositoryId:{type:String,default:""}},data(){return{mode:"NEW",tab:"WORKSPACE_DETAILS",tabs:[{id:this.$nano.id(),label:"workspace",value:"WORKSPACE_DETAILS",for:["STATIC","DYNAMIC"]},{id:this.$nano.id(),label:"folder",value:"REPOSITORY_DETAILS",for:["STATIC","DYNAMIC"]},{id:this.$nano.id(),label:"storage",value:"STORAGE_DETAILS",for:["STATIC","DYNAMIC"]},{id:this.$nano.id(),label:"fields",value:"FIELDS_DETAILS",for:["STATIC","DYNAMIC"]},{id:this.$nano.id(),label:"Auto Indexing",value:"AUTO_INDEXING_DETAILS",for:["STATIC","DYNAMIC"]},{id:this.$nano.id(),label:"security",value:"SECURITY_DETAILS",for:["STATIC","DYNAMIC"]},{id:this.$nano.id(),label:"version",value:"VERSION_DETAILS",for:["STATIC","DYNAMIC"]},{id:this.$nano.id(),label:"metadata",value:"METADATA_DETAILS",for:["STATIC"]},{id:this.$nano.id(),label:"connector",value:"CONNECTOR_DETAILS",for:["STATIC"]}],isLoading:!1,workspaceId:"",name:"",description:"",cloudFileServer:"EZOFIS",localFileServerPath:"",fieldsType:"STATIC",fields:[],indexingType:"MANUAL",owner:[],coordinator:[],expiryDate:"",versionType:"TIMESTAMP",versionedDocuments:"HIDE",metaData:{title:[],subject:[],author:[],keywords:[],signature:""},dynamicFields:[],creditLimit:0,constantCredit:0,connection:"",connectionId:0,hubName:0,repositoryfields:[],valueMapping:[],conditionMapping:[],outDataColumns:[],connectorHub:[],hubLinkId:0}},computed:{_tabs(){return this.tabs.filter(e=>e.for.includes(this.fieldsType))}},watch:{tab(){this.$refs[this.tab].$el.scrollIntoView({behavior:"smooth"})},repositoryId:{immediate:!0,handler(){this.repositoryId?(this.mode="EDIT",this.getRepository()):this.getDynamicFields()}},fields:{deep:!0,handler(){const e=this.fields.filter(e=>e.isMandatory).map(e=>e.name);Fa(this.metaData.title,t=>!e.includes(t)),Fa(this.metaData.subject,t=>!e.includes(t)),Fa(this.metaData.author,t=>!e.includes(t)),Fa(this.metaData.keywords,t=>!e.includes(t)),this.fields.length&&(this.repositoryfields=[],this.valueMapping=[],this.fields.forEach(e=>{this.repositoryfields.push({id:this.$nano.id(),label:e.name,value:e.name}),this.valueMapping.push({id:this.$nano.id(),name:e.name,field:""})}))}},connection(){this.connection&&(this.repositoryId||(this.connectionId=0))},hubName(){if(this.hubName){let e=this.connectorHub.find(e=>e.id===this.hubName);if(e){this.conditionMapping=[],this.outDataColumns=[];let t=JSON.parse(e.inDataPoint);t.forEach(e=>{this.conditionMapping.push({id:this.$nano.id(),name:e.key,field:""})});let i=e.outDataPoint?JSON.parse(e.outDataPoint):[];i.forEach(e=>{this.outDataColumns.push({id:this.$nano.id(),label:e,value:e})})}}}},created(){"ON_PREMISE"===this.$store.state.session.appMode&&(this.cloudFileServer="LOCAL")},methods:{closeBuilder(){this.$router.back()},switchTab(e){this.tab=e},async createRepository(){const e=await this.$refs.form.validate();if(!e)return;if("STATIC"===this.fieldsType){let e=this.fields.filter(e=>e.level>0);if(e.length<2)return void this.$alert.warning("Folder structure requires 2 fields")}this.isLoading=!0;const t={workspaceId:this.workspaceId,name:this.name,description:this.description,cloudFileServer:this.cloudFileServer,localFileServerPath:this.localFileServerPath,fieldsType:this.fieldsType,fields:this.fields,owner:this.owner,coordinator:this.coordinator,indexingType:this.indexingType,expiryDate:this.expiryDate,versionType:this.versionType,versionedDocuments:this.versionedDocuments,metaData:JSON.stringify(this.metaData)},{error:i,payload:a}=await p["p"].createRepository(t);if(i)return"error creating repository"!=i?this.$alert.warning(i):this.$alert.error(i),void(this.isLoading=!1);this.closeBuilder(),this.$alert.success("New repository created succesfully"),console.log(a);let o=a.split("rId: "),n=o.length?o[1].split(" "):[];console.log(n),this.hubName&&n.length&&this.addHubLink(n[0])},async getRepository(){var e;this.$store.commit("showLoadingBar");const{error:t,payload:i}=await p["p"].getRepository(this.repositoryId);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):(this.indexingType=i.indexingType||"STANDARD",this.workspaceId=(null===(e=i.workspace)||void 0===e?void 0:e.id)||0,this.name=i.name,this.description=i.description,this.cloudFileServer=i.cloudFileServer,this.localFileServerPath=i.localFileServerPath,this.fieldsType=i.fieldsType,this.fields=i.fields.map(e=>({_id:this.$nano.id(),...e})),"DYNAMIC"===this.fieldsType&&(this.dynamicFields=this.fields),i.ownerlist&&i.ownerlist.forEach(e=>this.owner.push(e.id)),i.coordinatorlist&&i.coordinatorlist.forEach(e=>this.coordinator.push(e.id)),this.expiryDate=i.expiryDate,this.versionType=i.versionType,this.versionedDocuments=i.versionedDocuments,this.creditLimit=i.creditLimit,this.constantCredit=i.creditLimit,i.metaData?this.metaData=JSON.parse(i.metaData):this.metaData={title:[],subject:[],author:[],keywords:[],signature:""},this.getHubLink())},async updateRepository(){const e=await this.$refs.form.validate();if(!e)return;if("STATIC"===this.fieldsType){let e=this.fields.filter(e=>e.level>0);if(e.length<2)return void this.$alert.warning("Folder structure requires 2 fields")}this.isLoading=!0;const t={id:this.repositoryId,workspaceId:this.workspaceId,name:this.name,description:this.description,cloudFileServer:this.cloudFileServer,localFileServerPath:this.localFileServerPath,fieldsType:this.fieldsType,fields:this.fields,owner:this.owner,coordinator:this.coordinator,indexingType:this.indexingType,expiryDate:this.expiryDate,versionType:this.versionType,versionedDocuments:this.versionedDocuments,metaData:JSON.stringify(this.metaData),creditLimit:this.creditLimit},{error:i}=await p["p"].updateRepository(this.repositoryId,t);this.isLoading=!1,i?"error updating repository"!=i?this.$alert.warning(i):this.$alert.error(i):(this.closeBuilder(),this.$alert.success("Repository updated successfully"),this.hubName&&this.addHubLink(this.repositoryId))},async getDynamicFields(){const{error:e,payload:t}=await p["p"].getDynamicFields();e?this.$alert.error(e):this.dynamicFields=t.map(e=>({_id:this.$nano.id(),name:e.name,dataType:e.dataType,isMandatory:e.levelId>0,level:e.levelId,includeInFolderStructure:e.levelId>0}))},getConnectorHub(e){this.connectorHub=e,this.hubName},async addHubLink(e){console.log(e);let t={};this.conditionMapping.forEach(e=>{this.$set(t,""+e.name,""+e.field)});let i={};this.valueMapping.forEach(e=>{this.$set(i,""+e.name,""+e.field)});const a={name:this.name,hubId:this.hubName,repositoryId:Number(e),formId:0,payloadMapping:JSON.stringify(t),responseMapping:JSON.stringify(i)};if(this.hubLinkId){const{error:e}=await p["c"].updateHubLink(this.hubLinkId,a);if(e)return void this.$alert.error(e)}else{const{error:e}=await p["c"].addHubLink(a);if(e)return void this.$alert.error(e)}},async getHubLink(){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await p["c"].getHubLink({filterBy:[],mode:"BROWSE"});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);let i=t.filter(e=>e.createdBy===this.$store.state.session.id&&e.repositoryId===Number(this.repositoryId));i.length&&(this.hubLinkId=i[0].id,this.getHubLinkDetails(i[0].id))},async getHubLinkDetails(e){this.$store.commit("showLoadingBar");const{error:t,payload:i}=await p["c"].getHubLinkDetails(e);if(this.$store.commit("hideLoadingBar"),t)this.$alert.error(t);else if(console.log(i),i){this.connection=Object(xe["a"])(i.connection.connectorType),this.connectionId=i.connection.id,this.connectorHub=[i.connectorHub],this.hubName=i.connectorHub.id;let e=i.hubLink,t=i.connectorHub;console.log(t);let a=t.outDataPoint?JSON.parse(t.outDataPoint):[];console.log(a),a.forEach(e=>{this.outDataColumns.push({id:this.$nano.id(),label:e,value:e})});let o=JSON.parse(e.responseMapping),n=JSON.parse(e.payloadMapping);this.valueMapping=[];for(let i in o)this.valueMapping.push({id:this.$nano.id(),name:i,field:o[i]});for(let i in n)this.conditionMapping.push({id:this.$nano.id(),name:i,field:n[i]})}}}},_a=Ca,$a=(i("c65bb"),i("2c91")),Da=i("93dc"),Ma=i.n(Da),Oa=Object(f["a"])(_a,a,o,!1,null,"37a5feda",null);t["default"]=Oa.exports;Ma()(Oa,"components",{QSpace:$a["a"]})},f68e:function(e,t,i){e.exports=i.p+"img/ezofis-drive-light.160ac9d3.png"},f902:function(e,t,i){},ff82:function(e,t,i){"use strict";i("bf44")}}]);
//# sourceMappingURL=repository-builder.ee54b2d3.js.map