(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["workflows-inbox","form-builder~forms-trash~groups-trash~integration-browse~leave-trash~portals-trash~repositories-over~fc714461","form-builder~forms-trash~groups-trash~integration-browse~leave-trash~portals-trash~repositories-over~b968ab97","custom-form~external-request~portal-accesss-custom","integration-browse~repositories-reports-overview"],{"00c2":function(e,t,s){e.exports=s.p+"img/name-light.137e40b6.png"},"00f0":function(e,t,s){},"01b4":function(e,t,s){"use strict";s("addf")},"064c":function(e,t,s){"use strict";s("caad");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row items-center",attrs:{id:"item-actions"}},[(e.customProcessForm,e._e()),e.sendInvite?[t("div",{attrs:{classs:"cursor-pointer"},on:{click:function(t){return e.$emit("invite")}}},[t("q-chip",{staticClass:"cursor-pointer primary-hover q-mr-sm",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-account-plus",color:"primary","text-color":"white"}}),e._v(" Send Invite ")],1)],1)]:e._e(),e.processForward?[t("div",{attrs:{classs:"cursor-pointer"},on:{click:function(t){return e.$emit("forward")}}},[t("q-chip",{staticClass:"cursor-pointer orange-hover",attrs:{outline:"",color:"orange"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-arrow-right",color:"orange","text-color":"white"}}),e._v(" Assign ")],1)],1)]:e._e(),e.workflowInitiate?[e.initiateAccess?[t("div",{attrs:{classs:"cursor-pointer "},on:{click:function(t){return e.$emit("initiate")}}},[t("q-chip",{staticClass:"cursor-pointer secondary-hover q-mr-sm",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-plus-thick",color:"secondary","text-color":"white"}}),e._v(" Initiate ")],1)],1)]:[t("q-chip",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Choose document to initiate",expression:"'Choose document to initiate'",modifiers:{top:!0}}],staticClass:"cursor-pointer secondary-hover",attrs:{outline:"",disable:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-plus-thick",color:"secondary","text-color":"white"}}),e._v(" Initiate ")],1)]]:e._e(),e.gotoInbox?t("div",{staticClass:"cursor-pointer q-mr-xs",on:{click:function(t){return e.$emit("inbox")}}},[t("q-chip",{staticClass:"cursor-pointer primary-hover",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-email",color:"primary","text-color":"white"}}),e._v(" My Inbox ")],1)],1):e._e(),e.workflowImport?t("ImportPopup",{attrs:{"chip-button":!0,"data-imported":e.dataImported,"form-id":e.formId},on:{upload:e.upload,close:e.closeImport}}):e._e(),e.downloadAll?t("div",{staticClass:"row q-pr-xs",class:{download:e.checkIconCount}},[e.visibleDownload?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"download",expression:"'download'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-ml-xs q-mr-xs",attrs:{icon:"mdi-download-outline","is-flat":"","no-border":""},on:{click:function(t){return e.$emit("downloadAll",e.item.id)}}}):e._e(),e.visiblePrint?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"print",expression:"'print'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-ml-xs q-mr-xs",attrs:{"is-flat":"","no-border":"",icon:"eva-printer-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("printAll",e.item.id)}}}):e._e(),e.visibleEmail?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Email Sharing",expression:"'Email Sharing'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-ml-xs q-mr-xs",attrs:{"is-flat":"","no-border":"",icon:"mdi-email-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("emailAll",e.item)}}}):e._e(),e.visibleDelete?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Delete",expression:"'Delete'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-pa-sm",attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline"},on:{click:function(t){return e.$emit("deleteFileAction",e.item.id)}}}):e._e()],1):e._e(),e._t("filterSearchIcon"),e.simpleSearchFilter?t("div",[e.hideActions.includes("search")?e._e():t("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:e.searchTable}})],1):t("div",{staticClass:"q-mr-xs"},[t("SimpleSearchWithFilter",{attrs:{columns:e.columns,"filter-by":e.filterBy},on:{keyup:e.searchTable,update:e.updateSimpletSearchFilterBy}})],1),e.id?t("SelectField",{staticClass:"fieldList q-mr-sm",attrs:{"is-mandatory":"",placeholder:"Select day","is-searchable":!0,options:e.dateFilter},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}):e._e(),e.refresh||e.id?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"eva-refresh"},on:{click:function(t){return e.$emit("refresh")}}}):e._e(),e.jiraConnect?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"JIRA - Create Issue",expression:"'JIRA - Create Issue'",modifiers:{top:!0}}],attrs:{icon:"mdi-jira","no-border":"","is-flat":""},on:{click:function(t){return e.$emit("jira")}}}):e._e(),"TRASH"===e.mode?t("div",{staticClass:"row justify-end"},[e.deleteBtn?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Restore Selected Items",expression:"'Restore Selected Items'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-history"},on:{click:function(t){return t.stopPropagation(),e.$emit("restore")}}}):e._e()],1):e._e(),e.deleteBtn?t("div",[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Delete Selected Items",expression:"'Delete Selected Items'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete")}}})],1):e._e(),e.hideActions.includes("toggle")?e._e():t("ToggleColumns",{attrs:{columns:e.repositoryFields?"LIST"===e.activeView?e.columns:[]:e.columns,"repository-fields":e.repositoryFields,"toggle-id":e.toggleId},on:{"update:columns":e.updateColumns,viewColumns:e.viewColumns}}),e.hideActions.includes("sort")?e._e():t("SortItems",{attrs:{columns:e.columns,order:e.order,criteria:e.criteria},on:{"update:order":e.updateOrder,"update:criteria":e.updateCriteria}}),e.hideActions.includes("group")?e._e():t("GroupItems",{attrs:{columns:e.columns,"group-by":e.groupBy},on:{"update:groupBy":e.updateGroupBy}}),e.hideActions.includes("filter")?e._e():t("FilterItems",{attrs:{item:e.item,columns:e._columns,"filter-by":e.filterBy,"selected-filter":e.selectedFilter,"search-content":e.searchContent,"content-search":e.contentSearch,module:e.module,"module-id":e.moduleId},on:{update:e.updateFilterBy,updateContentSearch:e.updateContentSearch}}),e.importData?t("ImportPopup",{attrs:{"data-imported":e.dataImported,"form-id":e.formId},on:{upload:e.upload,close:e.closeImport,downloadTemplate:e.downloadTemplate}}):e._e(),e.importJson?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"import",expression:"'import'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-import"},on:{click:function(t){return e.$emit("import")}}}):e._e(),!e.hideActions.includes("export")&&e.exportData?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Export",expression:"'Export'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-table-arrow-right"},on:{click:function(t){return e.$emit("export")}}}):e._e(),e.hideActions.includes("activeView")?e._e():t("BaseSeparator",{staticClass:"q-mx-sm",attrs:{"is-vertical":"","has-inset":""}}),e.hideActions.includes("activeView")?e._e():t("ViewToggle",{attrs:{"active-view":e.activeView,"thumbnail-view":e.thumbnailView,"grid-view":e.gridView,module:e.module},on:{"update:activeView":e.updateActiveView}}),t("KanbanView",{attrs:{"kanban-view":e.kanbanView,"active-view":e.activeKanbanView,"kanban-list":e.kanbanList},on:{"update:activeKanbanView":e.updateActiveKanbanView,clickKanban:function(t){return e.$emit("clickKanban")}}}),e.dashboardView?t("BaseSeparator",{staticClass:"q-mx-sm",attrs:{"is-vertical":"","has-inset":""}}):e._e(),e.dashboardView?t("DashboardView",{attrs:{"dashboard-view":e.dashboardView,"chart-view":e.chartView,"table-view":e.tableView,page:e.page},on:{"update:activeDashboardView":e.updateActiveDashboardView}}):e._e(),e._t("extraIcon")],2)},a=[],o=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"columns",expression:"'columns'",modifiers:{bottom:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-table-column-plus-after"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("div",{staticClass:"row border"},[t("div",{staticClass:"title-3 q-pa-xs col-auto"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchColumns,expression:"searchColumns"}],ref:"searchQuery",staticClass:"q-pa-md",attrs:{type:"text",placeholder:"Show/Hide Columns",autofocus:""},domProps:{value:e.searchColumns},on:{keyup:function(t){return e.searchColumnList(e.searchColumns)},input:function(t){t.target.composing||(e.searchColumns=t.target.value)}}})]),e.repositoryFields&&e.columns.length?t("div",{staticClass:"col-auto q-pa-xs"},[t("BaseButton",{attrs:{label:"Apply",color:"primary"},on:{click:e.apply}})],1):e._e()]),t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight}},e._l(e._columns,(function(s){return t("ListItem",{key:s.id,class:s.display,attrs:{icon:s.isVisible?"mdi-checkbox-marked":"mdi-checkbox-blank-outline","is-selected":s.isVisible,label:s.label},on:{click:function(t){return e.updateColumns(s)}}})})),1)],1)],1)},r=[],n=(s("14d9"),s("cade")),l=s("1b0d"),c={name:"ToggleColumns",components:{ListItem:n["a"]},props:{columns:{type:Array,required:!0},repositoryFields:{type:Boolean,default:!1},toggleId:{type:Number,default:0}},data(){return{filterColumns:[],columnList:"",searchColumns:""}},computed:{_columns(){return this.columns.filter(e=>"NORMAL"===e.type)},scrollbarHeight(){const e=36*this._columns.length;return e>216?"276px":e+58+"px"}},methods:{updateColumns1(e){const t=this.columns,s=t.findIndex(t=>t.id===e);t[s].isVisible=!t[s].isVisible,this.$emit("update:columns",t)},apply(){this.filterColumns=[],console.log(this.columns),this.columns.forEach(e=>{!1===e.isVisible&&this.filterColumns.push({Fieldid:e.fieldId,value:e.isVisible})}),console.log(this.filterColumns),this.$emit("viewColumns",this.filterColumns),this.filterColumns=[]},searchColumnList(e){this.columns.forEach(t=>{t.display="",e&&(t.label.toLowerCase().includes(e.toLowerCase())||(t.display="hide"))})},async updateColumns(e){if(this.toggleId){const t=this.columns.findIndex(t=>t.id===e.id);this.columns[t].isVisible=!this.columns[t].isVisible;let s={id:e.hideId||0,columnName:e.id};const{error:i,payload:a}=await l["k"].updateHideColumns(this.toggleId,s);if(i)return void this.$alert.error(i);let o=[];e.hideId?o=this.columns.filter(t=>t.id!=e.hideId):(o=this.columns,o.push({id:a,columnName:e.id})),this.columns[t].hideId=e.hideId?0:a,this.$emit("update:columns",o)}else{const t=this.columns,s=t.findIndex(t=>t.id===e.id);t[s].isVisible=!t[s].isVisible,this.$emit("update:columns",t)}}}},d=c,m=(s("ee26"),s("2877")),h=s("4e73"),u=s("93dc"),p=s.n(u),f=Object(m["a"])(d,o,r,!1,null,"251c6f56",null),v=f.exports;p()(f,"components",{QMenu:h["a"]});var y=s("c559"),b=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"group",expression:"'group'",modifiers:{bottom:!0}}],attrs:{"is-flat":"",icon:"eva-copy-outline","no-border":""}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight,width:"240px"}},[t("div",{staticClass:"title-3 q-pa-md"},[e._v("Group By")]),e._l(e._columns,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.name===e.groupBy?"eva-radio-button-on":"eva-radio-button-off","is-selected":s.name===e.groupBy,label:s.label},on:{click:function(t){return e.updateGroupBy(s.name)}}})}))],2)],1)],1)},w=[],g={name:"GroupItems",components:{ListItem:n["a"]},props:{columns:{type:Array,required:!0},groupBy:{type:String,required:!0}},computed:{_columns(){return[{id:this.$nano.id(),label:"None",name:""},...this.columns.filter(e=>e.isGroupable)]},scrollbarHeight(){const e=36*this._columns.length;return e>216?"276px":e+58+"px"}},methods:{updateGroupBy(e){this.$emit("update:groupBy",e)}}},C=g,k=Object(m["a"])(C,b,w,!1,null,"72f07afc",null),I=k.exports;p()(k,"components",{QMenu:h["a"]});var S=s("27bd"),_=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"view-toggle"}},[e._l(e._views,(function(s){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.label,expression:"view.label",modifiers:{top:!0}}],key:s.id,attrs:{"is-flat":"","no-border":"",icon:e.activeView===s.value?s.activeIcon:s.icon,color:e.activeView===s.value?"secondary":"gray"},on:{click:function(t){return e.updateActiveView(s.value)}}})]})),t("DefaultView",{attrs:{value:e.showDefaultView,view:e.defaultView},on:{handleYes:e.handleYes,handleNo:e.handleNo,hideSheet:function(t){e.showDefaultView=!1}}})],2)},A=[],T=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"eva-info-outline","icon-color":"orange"},on:{input:e.hideSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Default view?")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" Do you want to make this "),t("b",[e._v('"('+e._s(e.view)+')"')]),e._v(" view is default? . ")]),t("p",[e._v("You can always change this view.")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"orange"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"orange"},on:{click:e.handleYes}})]},proxy:!0}])})},x=[],F=s("1c54"),L={name:"DefaultView",components:{Confirm:F["a"]},props:{value:{type:Boolean,required:!0},view:{type:String,required:!0}},methods:{handleNo(){this.$emit("handleNo",!1)},hideSheet(){this.$emit("hideSheet",!1)},handleYes(){this.$emit("handleYes",!1)}}},P=L,$=Object(m["a"])(P,T,x,!1,null,"38f8db3d",null),B=$.exports,N=s("4360"),M={name:"ViewToggle",components:{DefaultView:B},props:{activeView:{type:String,default:"GRID",validator(e){return["GRID","LIST","THUMBNAIL"].includes(e)}},thumbnailView:{type:Boolean,default:!1},gridView:{type:Boolean,default:!0},module:{type:String,default:""}},data(){return{views:[{id:this.$nano.id(),label:"Grid View",value:"GRID",icon:"mdi-view-grid-outline",activeIcon:"mdi-view-grid"},{id:this.$nano.id(),label:"List View",value:"LIST",icon:"mdi-format-list-checkbox",activeIcon:"mdi-view-list"},{id:this.$nano.id(),label:"Thumbnail View",value:"THUMBNAIL",icon:"eva-image-outline",activeIcon:"eva-image"}],showDefaultView:!1,defaultView:"",userId:this.$store.state.session.id,viewAlreadyAdded:!0,options:{}}},computed:{_views(){return this.thumbnailView?this.views:this.gridView?this.views.slice(0,2):this.views.slice(1,2)}},created(){this.getDefaultView()},methods:{updateActiveView(e){this.defaultView=e,this.showDefaultView=!0},handleYes(){this.showDefaultView=!1,this.viewAlreadyAdded?this.updateDefaultView():this.addDefaultView()},handleNo(){this.$emit("update:activeView",this.defaultView),this.showDefaultView=!1},async addDefaultView(){this.$store.commit("showLoadingBar");let e=this.$route.meta.menu,t={},s=this.$route.query.repositoryId,i="";s&&(i="files"),t=i?{preference:{[this.$route.meta.subMenu]:[{menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView}]}}:{preference:{[e]:[{menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView}]}};const{error:a,payload:o}=await l["n"].addProfilePreference(t);this.$store.commit("hideLoadingBar"),a?this.$alert.error("Error fetching changing view"):(N["a"].commit("setDefaultView",t.preference),N["a"].commit("setPreferenceId",o),this.viewAlreadyAdded=!0,this.options=t,this.$emit("update:activeView",this.defaultView))},async updateDefaultView(){this.$store.commit("showLoadingBar");let e=this.$route.meta.menu,t=this.$route.meta.breadcrumb,s=this.$route.query.repositoryId,i="";s&&(i="files");let a={};if(i)if(this.options[i])if(this.options[i].length){let e=this.options[i].findIndex(e=>e.subMenu===t);console.log(e),e>=0?this.options[i][e].view=this.defaultView:this.options[i].push({menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView})}else this.options[i]=[],this.options[i].push({menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});else this.options[i]=[],this.options[i].push({menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});else if(this.options[e])if(this.options[e].length){let s=this.options[e].findIndex(e=>e.subMenu===t);s>=0?this.options[e][s].view=this.defaultView:this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView})}else this.options[e]=[],this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});else this.options[e]=[],this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});let o=JSON.stringify(this.options);a={preference:JSON.parse(o)};const{error:r}=await l["n"].updateProfilePreference(this.$store.state.preferenceId,a);this.$store.commit("hideLoadingBar"),r?this.$alert.error("Error fetching changing view"):(N["a"].commit("setDefaultView",a.preference),this.$emit("update:activeView",this.defaultView))},async getDefaultView(){const{error:e,payload:t}=await l["n"].getProfilePreference(this.userId);e?this.$alert.error("Error fetching get default view"):t?(this.options=JSON.parse(t.options),N["a"].commit("setDefaultView",this.options),N["a"].commit("setPreferenceId",t.id)):this.viewAlreadyAdded=!1}}},D=M,q=(s("cd8d"),Object(m["a"])(D,_,A,!1,null,"75627166",null)),O=q.exports,E=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"kanban-view"}},[e.kanbanView?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Kanban View",expression:"'Kanban View'",modifiers:{bottom:!0}}],attrs:{"is-flat":"",icon:(e.activeKanban,"mdi-grid"),color:e.activeKanban?"secondary":"gray","no-border":""},on:{click:function(t){return e.$emit("clickKanban")}}},[e.kanbanList.length?t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight,width:"240px"}},e._l(e.kanbanList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.name===e.activeView?"eva-radio-button-on":"eva-radio-button-off","is-selected":s.name===e.activeView,label:s.label},on:{click:function(t){return e.selectKanban(s.name)}}})})),1)],1):e._e()],1):e._e(),t("DefaultView",{attrs:{value:e.showDefaultView,view:e.defaultView},on:{handleYes:e.handleYes,handleNo:e.handleNo,hideSheet:function(t){e.showDefaultView=!1}}})],1)},R=[],V={name:"KanbanView",components:{ListItem:n["a"],DefaultView:B},props:{activeView:{type:String,default:""},kanbanView:{type:Boolean,default:!1},kanbanList:{type:Array,default:()=>[]}},data(){return{showDefaultView:!1,defaultView:"",userId:this.$store.state.session.id,viewAlreadyAdded:!0,options:{},defaultViewId:""}},computed:{scrollbarHeight(){const e=36*this.kanbanList.length;return e>216?"276px":e+58+"px"},activeKanban(){return"LIST"!==this.activeView&&"GRID"!==this.activeView&&"CHART"!==this.activeView&&"TABLE"!==this.activeView}},created(){this.getDefaultView()},methods:{selectKanban(e){let t=this.kanbanList.find(t=>t.name===e);console.log(t),t&&(this.defaultView=t.label),this.defaultViewId=e,this.showDefaultView=!0},handleYes(){this.showDefaultView=!1,this.viewAlreadyAdded?this.updateDefaultView():this.addDefaultView()},handleNo(){this.$emit("update:activeKanbanView",this.defaultViewId),this.showDefaultView=!1},async addDefaultView(){this.$store.commit("showLoadingBar");let e=this.$route.meta.menu,t={preference:{[e]:[{menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId}]}};const{error:s,payload:i}=await l["n"].addProfilePreference(t);this.$store.commit("hideLoadingBar"),s?this.$alert.error("Error fetching changing view"):(N["a"].commit("setDefaultView",t.preference),N["a"].commit("setPreferenceId",i),this.viewAlreadyAdded=!0,this.options=t,this.$emit("update:activeKanbanView",this.defaultViewId))},async updateDefaultView(){this.$store.commit("showLoadingBar");let e=this.$route.meta.menu,t=this.$route.meta.breadcrumb,s={};if(this.options[e])if(this.options[e].length){let s=this.options[e].findIndex(e=>e.subMenu===t);s>=0?this.options[e][s].view=this.defaultViewId:this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId})}else this.options[e]=[],this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId});else this.options[e]=[],this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId});s={preference:this.options};const{error:i}=await l["n"].updateProfilePreference(this.$store.state.preferenceId,s);this.$store.commit("hideLoadingBar"),i?this.$alert.error("Error fetching changing view"):(N["a"].commit("setDefaultView",s.preference),this.$emit("update:activeKanbanView",this.defaultViewId))},async getDefaultView(){const{error:e,payload:t}=await l["n"].getProfilePreference(this.userId);e?this.$alert.error("Error fetching get default view"):t?(this.options=JSON.parse(t.options),N["a"].commit("setDefaultView",this.options),N["a"].commit("setPreferenceId",t.id)):this.viewAlreadyAdded=!1}}},z=V,j=(s("6c88"),Object(m["a"])(z,E,R,!1,null,"6f4b2704",null)),U=j.exports;p()(j,"components",{QMenu:h["a"]});var W=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"dashboard-view"}},e._l(e._views,(function(s){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.label,expression:"view.label",modifiers:{top:!0}}],key:s.id,attrs:{"is-flat":"","no-border":"",icon:e.dashboardView===s.value?s.activeIcon:s.icon,color:e.dashboardView===s.value?"secondary":"gray"},on:{click:function(t){return e.updateDashboardView(s.value)}}})})),1)},J=[],H={name:"DashboardView",props:{dashboardView:{type:String,default:"CHART",validator(e){return["CHART","TABLE","SANKEY","KANBAN"].includes(e)}},chartView:{type:Boolean,default:!1},tableView:{type:Boolean,default:!0},page:{type:String,default:""}},data(){return{views:[{id:this.$nano.id(),label:"Table View",value:"TABLE",icon:"mdi-table",activeIcon:"mdi-table"},{id:this.$nano.id(),label:"Chart View",value:"CHART",icon:"eva-image",activeIcon:"eva-image"},{id:this.$nano.id(),label:"Sankey View",value:"SANKEY",icon:"mdi-chart-sankey-variant",activeIcon:"mdi-chart-sankey-variant"}]}},computed:{_views(){if("REPORT"===this.page)return this.views.slice(0,2);let e=location.origin;return"https://edmsuat.sobhaapps.com"===e||"https://edms.sobhaapps.com"===e?this.views.slice(1,2):this.views.slice(1,3)}},methods:{updateDashboardView(e){this.$emit("update:activeDashboardView",e)}}},G=H,K=(s("8180"),Object(m["a"])(G,W,J,!1,null,"1da74fbd",null)),Y=K.exports,Q=s("be3f"),X=s("0cdc"),Z=s("12b8"),ee=function(){var e=this,t=e._self._c;return t("div",{staticClass:"col",attrs:{id:"search-items"}},[t("div",{attrs:{id:"Simple-search"}},[t("div",{staticClass:"label",staticStyle:{"margin-left":"0px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Search By",expression:"'Search By'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-filter-plus-outline",color:e.activeFilter?"secondary":"gray","no-border":""}},[e.filter?t("div"):e._e(),t("q-menu",{attrs:{"auto-close":"","transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top left"}},[t("div",{staticClass:"title-3 q-pa-xs border"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchColumns,expression:"searchColumns"}],ref:"searchQuery",staticClass:"q-pa-md",attrs:{type:"text",placeholder:"Type here to search"},domProps:{value:e.searchColumns},on:{click:function(e){e.stopPropagation()},keyup:function(t){return e.searchColumnList(e.searchColumns)},input:function(t){t.target.composing||(e.searchColumns=t.target.value)}}})]),t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight,width:"240px"}},[e._l(e.columnList,(function(s){return[s.display&&!1!==s.isFilter?t("ListItem",{key:s.id,attrs:{icon:s.selected?"eva-radio-button-on":"eva-radio-button-off","is-selected":s.selected,label:s.label},on:{click:function(t){return e.updateFilterBy(s.id)}}}):e._e()]}))],2)],1)],1),e.activeFilter?t("div",{staticClass:"selectedLabel"},[t("span",{staticClass:"text-bold"},[e._v(e._s(e.selectedLabel)+" :")])]):e._e(),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],ref:"searchQuery",staticClass:"q-px-xs",class:{"text-input-small":e.activeFilter,"text-input-big":!e.activeFilter},attrs:{type:"text",placeholder:e.isdataTypeIsDate?"YYYY-MM-DD":"Search"},domProps:{value:e.searchInput},on:{keyup:e.emitKeyUp,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateSimpleSearch.apply(null,arguments)},input:function(t){t.target.composing||(e.searchInput=t.target.value)}}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Search",expression:"'Search'",modifiers:{top:!0}}],attrs:{icon:"eva-search","no-border":"","is-flat":""},on:{click:e.updateSimpleSearch}}),e.activeFilter?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"clear",expression:"'clear'",modifiers:{top:!0}}],attrs:{icon:"mdi-close-circle","no-border":"","is-flat":""},on:{click:e.clearSimpleSearch}}):e._e()],1)])])},te=[],se={name:"SimpleSearchWithFilter",components:{ListItem:n["a"]},props:{columns:{type:Array,default:()=>[]},filterBy:{type:Array,required:!0}},data(){return{filter:!1,activeFilter:!1,searchColumns:"",columnList:[],filterArray:[],searchInput:"",selectedLabel:"",FilterValue:"",isdataTypeIsDate:!1,isSingleSelect:!1}},computed:{scrollbarHeight(){const e=36*this.columns.length;return e>216?"276px":e+58+"px"}},watch:{$route:{deep:!0,handler(){this.$route.query.repositoryId||(this.activeFilter=!1,this.filterArray=[],this.searchInput="",this.FilterValue="")}},filterBy:{deep:!0,immediate:!0,handler(){0===this.filterBy.length&&(this.activeFilter=!1)}},columns:{deep:!0,immediate:!0,handler(){this.columnList=[],this.columns.forEach(e=>{this.columnList.push({...e,selected:!1,display:"show"})})}}},methods:{emitKeyUp(){this.FilterValue=this.searchInput,this.$emit("keyup",this.searchInput)},updateSimpleSearch(){if(this.activeFilter)if(0===this.filterArray.length){let e=[];this.$emit("update",e)}else if(this.isSingleSelect){let e=[];e[0]=this.FilterValue,this.filterArray[0].filters[0].value=JSON.stringify(e),this.filterArray[0].filters[0].arrayValue=e,this.$emit("click",this.filterArray),this.$emit("update",this.filterArray)}else this.filterArray[0].filters[0].value=this.FilterValue,this.$emit("click",this.filterArray),this.$emit("update",this.filterArray)},searchColumnList(e){this.columnList.forEach(t=>{t.display="show",t.label.toLowerCase().includes(e.toLowerCase())||(t.display="")})},updateFilterBy(e){this.filter=!this.filter,this.columnList.forEach(e=>{e.selected=!1});let t=this.columnList.find(t=>t.id===e);if(t){t.selected=!0,this.activeFilter=!0,this.selectedLabel=t.label;let e=[];if("None"==t.value)this.activeFilter=!1;else{let s="CONTAINS";"DATE"===t.dataType&&(s="IS_EQUALS_TO",this.isdataTypeIsDate=!0,this.isSingleSelect=!1),"SINGLE_SELECT"===t.dataType?(this.isSingleSelect=!0,e=[{filters:[{criteria:t.name,criteriaArray:[t.name],condition:s,value:"",arrayValue:"",dataType:"SINGLE_SELECT"}],groupCondition:""}],this.filterArray=e):(this.isSingleSelect=!1,e=[{filters:[{criteria:t.name,condition:s,value:"",dataType:t.dataType}],groupCondition:""}]),this.filterArray=e}}},clearSimpleSearch(){this.columnList.forEach(e=>{e.selected=!1}),this.isdataTypeIsDate=!1,this.filterArray=[],this.searchInput="",this.FilterValue="",this.activeFilter=!1,this.filter=!this.filter,this.$emit("update",this.filterArray)}}},ie=se,ae=(s("ba5a"),Object(m["a"])(ie,ee,te,!1,null,"a32bb6e0",null)),oe=ae.exports;p()(ae,"components",{QMenu:h["a"]});var re={name:"ItemActions",components:{ToggleColumns:v,ViewToggle:O,SortItems:y["a"],GroupItems:I,FilterItems:S["a"],ExpandableSearch:Q["a"],KanbanView:U,DashboardView:Y,ImportPopup:X["a"],SelectField:Z["a"],SimpleSearchWithFilter:oe},props:{item:{type:String,default:"item"},columns:{type:Array,required:!0},criteria:{type:String,required:!0},order:{type:String,required:!0},groupBy:{type:String,required:!0},filterBy:{type:Array,required:!0},activeView:{type:String,required:!0},thumbnailView:{type:Boolean,default:!1},filterColumns:{type:Array,default:()=>[]},selectedFilter:{type:Array,default:()=>[]},gridView:{type:Boolean,default:!0},kanbanView:{type:Boolean,default:!1},activeKanbanView:{type:String,default:""},kanbanList:{type:Array,default:()=>[]},jiraConnect:{type:Boolean,default:!1},importData:{type:Boolean,default:!1},dataImported:{type:Boolean,default:!1},hideActions:{type:Array,default:()=>[]},workflowInitiate:{type:Boolean,default:!1},initiateAccess:{type:Boolean,default:!1},gotoInbox:{type:Boolean,default:!1},workflowImport:{type:Boolean,default:!1},formId:{type:String,default:"0"},dashboardView:{type:String,default:""},chartView:{type:Boolean,default:!1},tableView:{type:Boolean,default:!1},searchContent:{type:Boolean,default:!1},contentSearch:{type:Object,default:()=>({contentSearchValue:"",fuzzy:0,searchType:1})},repositoryFields:{type:Boolean,default:!1},id:{type:Number,default:0},module:{type:String,default:""},moduleId:{type:[String,Number],default:0},deleteBtn:{type:Boolean,default:!1},mode:{type:String,default:""},page:{type:String,default:""},toggleId:{type:Number,default:0},simpleSearchFilter:{type:Boolean,default:!1},simpleSearchApplyed:{type:Boolean,default:!1},customProcessForm:{type:Boolean,default:!1},refresh:{type:Boolean,default:!0},exportData:{type:Boolean,default:!0},sendInvite:{type:Boolean,default:!1},downloadAll:{type:Boolean,default:!1},visibleDownload:{type:Boolean,default:!1},visiblePrint:{type:Boolean,default:!1},visibleEmail:{type:Boolean,default:!1},visibleDelete:{type:Boolean,default:!1},processForward:{type:Boolean,default:!1},importJson:{type:Boolean,default:!1}},data(){return{dateFilter:[{id:this.$nano.id(),label:"Today",value:"today"},{id:this.$nano.id(),label:"Yesterday",value:"yesterday"},{id:this.$nano.id(),label:"This Week",value:"7days"},{id:this.$nano.id(),label:"Last week",value:"week"},{id:this.$nano.id(),label:"This Month ",value:"Currentmonth"},{id:this.$nano.id(),label:"Last Month",value:"month"},{id:this.$nano.id(),label:"Last Quarter",value:"quarter"},{id:this.$nano.id(),label:"This Year",value:"currentyear"},{id:this.$nano.id(),label:"Last Year",value:"year"}],dateValue:""}},computed:{_columns(){return this.filterColumns.length?this.filterColumns:this.columns},checkIconCount(){let e,t=0;return this.visibleDownload&&(t+=1),this.visibleEmail&&(t+=1),this.visiblePrint&&(t+=1),this.visibleDelete&&(t+=1),2===t&&(e=!0),3===t&&(e=!0),4===t&&(e=!0),e}},watch:{dateValue:{deep:!0,immediate:!0,handler(){if(this.dateValue)if("today"===this.dateValue){let e=this.dateValue;const t=new Date;t.setDate(t.getDate());const s=t.toISOString().split("T")[0];this.$emit("filter",s,s,e)}else if("yesterday"===this.dateValue){let e=this.dateValue;const t=new Date;t.setDate(t.getDate()-1);const s=t.toISOString().split("T")[0];this.$emit("filter",s,s,e)}else if("week"===this.dateValue){let e=this.dateValue,t=new Date,s=t.getDay(),i=new Date(t);i.setDate(t.getDate()-s);let a=new Date(i);a.setDate(i.getDate()-7);let o=new Date(a);o.setDate(a.getDate()+6);let r=a.toISOString().split("T")[0],n=o.toISOString().split("T")[0];this.$emit("filter",r,n,e)}else if("7days"===this.dateValue){let e=this.dateValue,t=new Date,s=t.getDay(),i=new Date(t);i.setDate(t.getDate()-s);let a=new Date(i);a.setDate(i.getDate()+6);let o=i.toISOString().split("T")[0],r=a.toISOString().split("T")[0];this.$emit("filter",o,r,e)}else if("month"===this.dateValue){let e=this.dateValue,t=new Date,s=new Date(t.getFullYear(),t.getMonth()-1,2),i=new Date(t.getFullYear(),t.getMonth()),a=s.toISOString().split("T")[0],o=i.toISOString().split("T")[0];this.$emit("filter",a,o,e)}else if("quarter"===this.dateValue){let e=this.dateValue,t=new Date,s=t.getMonth(),i=(s-3+12)%12,a=new Date(t.getFullYear(),i,2),o=s-1,r=new Date(t.getFullYear(),o+1,1),n=a.toISOString().slice(0,10),l=r.toISOString().slice(0,10);this.$emit("filter",n,l,e)}else if("year"===this.dateValue){let e=this.dateValue,t=new Date,s=new Date(t.getFullYear()-1,0,2),i=new Date(t.getFullYear()-1,11,32),a=s.toISOString().split("T")[0],o=i.toISOString().split("T")[0];this.$emit("filter",a,o,e)}else if("Currentmonth"===this.dateValue){let e=this.dateValue,t=new Date,s=new Date(t.getFullYear(),t.getMonth(),1),i=`${s.getFullYear()}-${(s.getMonth()+1).toString().padStart(2,"0")}-${s.getDate().toString().padStart(2,"0")}`,a=`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`;this.$emit("filter",i,a,e)}else if("currentyear"===this.dateValue){let e=this.dateValue,t=new Date,s=new Date(t.getFullYear(),0,2),i=s.toISOString().split("T")[0],a=t.toISOString().split("T")[0];this.$emit("filter",i,a,e)}}}},methods:{updateColumns(e){this.$emit("update:columns",e)},updateCriteria(e){this.$emit("update:criteria",e)},updateOrder(e){this.$emit("update:order",e)},updateGroupBy(e){this.$emit("update:groupBy",e)},updateFilterBy(e,t){this.$emit("update:simpleSearchApplyed",!1),this.$emit("update:filterBy",e),this.$emit("update",e,t)},updateContentSearch(e){this.$emit("update:contentSearch",e)},updateActiveView(e){this.$emit("update:activeView",e)},searchTable(e){this.$emit("search",e)},updateActiveKanbanView(e){this.$emit("update:activeKanbanView",e)},updateActiveDashboardView(e){this.$emit("update:dashboardView",e)},upload(){this.$emit("upload")},closeImport(){this.$emit("close")},viewColumns(e){this.$emit("viewColumns",e)},updateSimpletSearchFilterBy(e){this.$emit("update:simpleSearchApplyed",!0),this.$emit("update:filterBy",e),this.$emit("update",e)},downloadTemplate(){this.$emit("downloadTemplate")}}},ne=re,le=(s("c925"),s("7225"),s("b047")),ce=s("cb32"),de=Object(m["a"])(ne,i,a,!1,null,"53ff3a83",null);t["a"]=de.exports;p()(de,"components",{QChip:le["a"],QAvatar:ce["a"]})},"0698":function(e,t,s){},"0c04":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"addTask"}},[t("Sheet",{attrs:{value:e.value,width:e.taskWidth,"no-padding":""},on:{input:e.closeSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("title",(function(){return[e._v(e._s(e.title))]}))]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:e.isMaximized?"eva-collapse":"eva-expand"},on:{click:e.toggleWidth}})]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t("div",{staticClass:"col",attrs:{id:"task-form-view"}},[t("BaseScrollbar",{staticClass:"q-pa-md",attrs:{height:"calc(100vh - 60px)"}},[t("RenderForm",{attrs:{"no-padding":"",panels:e.panels,"secondary-panels":e.secondaryPanels,"form-settings":e.formSettings,"form-model":e.taskModel,"is-readonly":"VIEW"===e.mode},on:{save:e.saveTask}})],1)],1),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(s){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()])})),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"workflows",expression:"'workflows'",modifiers:{left:!0}}],staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:"o_account_tree",color:"primary"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.taskWorkflowList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:"mdi-sitemap",label:s.label},on:{click:function(t){return e.getForm(s)}}})})),1)],1)],1)],2)])]},proxy:!0}],null,!0)}),t("Sheet",{attrs:{width:e.taskWidth,"has-footer":""},on:{input:e.closeAddTaskSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("title",(function(){return[e._v(e._s(e.headerTitle))]}))]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:e.isMaximized?"eva-collapse":"eva-expand"},on:{click:e.toggleWidth}})]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t("div",{staticClass:"col",attrs:{id:"form-view"}},[t("BaseScrollbar",{staticClass:"q-pa-md",attrs:{height:"calc(100vh - 145px)"}},[t("RenderForm",{attrs:{"no-padding":"","workflow-id":e.workflowFormId,panels:e.addWorkflowForm.panels,"secondary-panels":e.addWorkflowForm.secondaryPanels,"form-settings":e.addWorkflowForm.settings,"workflow-form-model":e.workflowFormModel,"save-action":e.saveAction},on:{"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t},"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t}}})],1)],1),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},e._l(e.tabs,(function(s){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()])})),1)])]},proxy:!0},{key:"footer",fn:function(){return[e.actions?t("div",{staticClass:"footer row"},[e._l(e.actions,(function(s){return[t("BaseButton","Approve"===s||"Complete"===s||"Rightsize"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"positive"},on:{click:function(t){return e.validateRequest(s)}}}:"Reject"===s||"Terminate"===s||"Force Close"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"red"},on:{click:function(t){return e.validateRequest(s)}}}:"Forward"===s||"Reply"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"orange"},on:{click:function(t){return e.validateRequest(s)}}}:{key:s,staticClass:"q-ml-md",attrs:{label:s},on:{click:function(t){return e.validateRequest(s)}}})]}))],2):e._e()]},proxy:!0}],null,!0),model:{value:e.addTaskSheet,callback:function(t){e.addTaskSheet=t},expression:"addTaskSheet"}}),t("Sheet",{attrs:{width:"30vw","sub-actions":!!e.attachmentList.length,upload:!0},on:{input:e.closeAttachmentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:e.getAttachments}})]},proxy:!0},{key:"upload",fn:function(){return[t("div",{staticClass:"hint",on:{click:function(t){return e.$refs.attachments.click()}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),t("div",{staticClass:"title text-blue"},[e._v("UPLOAD FILES")]),t("div",{staticClass:"description"},[e._v("Click here to choose files and upload")])],1)]},proxy:!0},{key:"subActions",fn:function(){return[[t("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:e.fileSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}}),e._v(" Select All ")],t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!e.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentShare}}),(e.selectedFileCount,e._e())]},proxy:!0}]),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:e.uploadAttachments}}),e._l(e.attachmentList,(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})],1),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1)]),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])]}))],2)]),t("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"30"},on:{input:e.closeCommentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 155px)"}},[e._l(e.commentsList,(function(s,i){return[t("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===e.$store.state.session.id?"me":s.createdByEmail,text:[s.comments],"text-html":"",sent:s.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(s),"bg-color":s.createdBy===e.$store.state.session.id?"primary-1":"secondary-1"}})]}))],2)],1),t("div",{staticClass:"col q-pa-sm borderTop"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])])]),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])])]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])]),t("Sheet",{attrs:{width:"30vw"},on:{input:e.closeTaskSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Workflows ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Add Workflows",expression:"'Add Workflows'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-plus",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getworkflowForm(e.workflowFormId)}}})]},proxy:!0}]),model:{value:e.taskSheet,callback:function(t){e.taskSheet=t},expression:"taskSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[e._l(e.processInfo,(function(s){return[t("div",{key:s.id,staticClass:"taskEntries"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto q-mr-md",staticStyle:{"margin-top":"3px"},on:{click:function(t){return e.getWorkflowAudit(s.requestNo)}}},[e._v(" Request No: "+e._s(s.requestNo)+" ")]),s.actionUser?[t("q-chip",{attrs:{size:"10px",color:"yellow","text-color":"white"}},[e._v(" "+e._s(s.actionUser)+" ")])]:e._e(),t("q-chip",{attrs:{size:"10px",color:e.getColor(s.flowStatus),"text-color":"white"}},[e._v(" "+e._s("0"===s.flowStatus?"Open":"Completed")+" ")])],2)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col-12"},[e._v(" Raised By: "+e._s(s.raisedBy)+" "),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" Raised At: "+e._s(e.$day.format(s.raisedAt))+" ")],1)])])]}))],2)]),t("Sheet",{attrs:{width:"100vw","has-footer":"","no-padding":""},on:{input:function(t){e.processSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.headerTitle)+" ")]},proxy:!0}]),model:{value:e.processSheet,callback:function(t){e.processSheet=t},expression:"processSheet"}},[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t("div",{staticClass:"col",attrs:{id:"form-view"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 145px)"}},[t("RenderForm",{attrs:{"form-id":e.formIdName,panels:e.addWorkflowForm.panels,"secondary-panels":e.addWorkflowForm.secondaryPanels,"form-settings":e.addWorkflowForm.settings,"form-model":e.formModel,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t}}})],1)],1),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(s){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()])]}))],2)])]),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}}),t("EmailSharing",{attrs:{"repository-id":e.repositoryId,"file-list":e.selectedFileList},on:{"update:fileList":function(t){e.selectedFileList=t},"update:file-list":function(t){e.selectedFileList=t}},model:{value:e.emailSharingSheet,callback:function(t){e.emailSharingSheet=t},expression:"emailSharingSheet"}})],1)},a=[],o=(s("14d9"),s("caad"),s("381e")),r=s("4bc4"),n=s("869e"),l=s("6df3"),c=s("1b0d"),d=s("9bc4"),m=s("fa1f"),h=s("a7d2"),u=s("dd90"),p=s("bc3a"),f=s.n(p),v=s("cade"),y=s("695e"),b=s("6a70"),w=s("2f62"),g=s("5e23"),C={name:"AddTask",components:{Sheet:o["a"],RenderForm:r["a"],FileIcon:m["a"],CheckboxField:n["a"],TextAreaField:l["a"],ListItem:v["a"],TextBuilderField:y["a"],Modal:b["a"],EmailSharing:g["a"]},props:{value:{type:Boolean,default:!1},formSettings:{type:Object,required:!0},panels:{type:Array,required:!0},secondaryPanels:{type:Array,default:()=>[]},formId:{type:Number,default:0},taskModel:{type:Object,default:()=>{}},mode:{type:String,default:""},taskName:{type:String,default:""},repositoryId:{type:Number,default:0},workflowTask:{type:Boolean,default:!1},taskWorkflowList:{type:Array,default:()=>[]},selectedTask:{type:Object,default:()=>{}},documentTask:{type:Boolean,default:!1},repositoryFile:{type:Object,default:()=>{}}},data(){return{taskWidth:"720px",tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0}],attachmentSheet:!1,addTaskSheet:!1,taskSheet:!1,commentsSheet:!1,commentText:"",commentsList:[],selectAll:!1,attachmentLoad:null,attachmentList:[],fileSheet:!1,selectedFile:{},actions:[],workflowsSheet:!0,workflowList:[],saveAction:"",workflowId:0,addWorkflowForm:[],workflowPanels:[],form:[],workflowName:"",workflowDescription:"",workflowFormId:0,workflowFormModel:{},processId:0,transactionId:0,workflowDetails:[],countWorkflow:0,processInfo:[],workflowFormTaskList:{},formList:{},formStage:{},processSheet:!1,formDetails:{},formIdName:"",formModel:{},headerTitle:"",advancedCommentsSheet:!1,advancedCommentText:"",emailSharingSheet:!1,selectedFileList:[]}},computed:{...Object(w["c"])(["LoadingBarPage"]),isMaximized(){return"100vw"===this.taskWidth},title(){return"VIEW"===this.mode?"View Task":"EDIT"===this.mode?"Edit Task":"FORWARD"===this.mode?"Forward Task":"COPY"===this.mode?"Copy Task":"Add Task"},formName(){return this.formSettings.general.name},formDescription(){return this.formSettings.general.description},selectedFileCount(){let e=this.attachmentList.filter(e=>e.checked).length;return e},scrollbarHeight(){const e=36*this.columns.length;return e>216?"276px":e+58+"px"}},watch:{taskModel:{immediate:!0,handler(){this.taskModel.id&&(this.attachmentList=[],this.getComments(),this.getAttachments())}},workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&this.initiateRequest()}},attachmentSheet:{immediate:!0,handler(){this.attachmentSheet&&this.taskModel.id||clearInterval(this.attachmentLoad)}}},methods:{toggleWidth(){this.taskWidth="100vw"===this.taskWidth?"720px":"100vw"},closeSheet(){this.$emit("close",!1)},closeAttachmentsSheet(){this.attachmentSheet=!1},closeAddTaskSheet(){this.addTaskSheet=!1},closeTaskSheet(){this.taskSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},getColor(e){return"0"===e?"orange":"1"===e||"Medium"===e?"green":"primary"},showLinks(e){"ATTACHMENTS"===e?this.attachmentSheet=!0:"COMMENTS"===e?this.commentsSheet=!0:"HISTORY"===e?this.$emit("history",this.formList[0].value[0].processId,this.formList[0].workflowId,this.formList[0].value[0].requestNo):"PRINT"===e&&window.print()},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},fileSelectAll(){this.attachmentList=this.attachmentList.map(e=>({...e,checked:this.selectAll}))},showHistory(){},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},fileSize(e){return Object(h["a"])(e)},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let s="";if(Object(u["d"])(t))s="https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":"https://app.ezofis.com"===e?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html";else{if("http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/1`;s="http://52.172.32.88/DocsViewer/index.html"}return`${s}?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`}{let s="";if(Object(u["d"])(t))s="https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":"https://app.ezofis.com"===e?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html";else{if(Object(u["b"])(t)||"http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;s="http://52.172.32.88/DocsViewer/index.html"}return`${s}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}`}}},openFile(e){this.selectedFile=e,this.fileSheet=!0},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(e=>{e.checked&&this.selectedFileList.push({id:e.id,name:e.name})}),this.emailSharingSheet=!0},async saveTask(e){const t=["itemid","createdBy","createdAt","modifiedBy","modifiedAt","icon","buttonAction","formId","status","color","link","selected","isDeleted","createdByEmail","modifiedByEmail","emailStatus","expandSubworkflow"],s=Object(d["a"])(e,t);try{this.$store.commit("showLoadingBarPage");const{id:e,...t}=s;let i=0;i="COPY"===this.mode?0:e||0;let a={};if(i)a={fields:t};else{let e=[];this.attachmentList.length&&this.attachmentList.forEach(t=>{e.push(t.id)}),a={fields:t,task:{comments:this.commentsList,fileIds:e}}}const{data:o,error:r}=await c["g"].saveFormEntry(this.formId,i,a);if(this.workflowDetails.length&&this.linkTaskWorkflowProcess(o.output),r)return void this.$alert.error(r);e?this.$alert.success(this.taskName+" edited successfully"):(this.documentTask&&this.linkTaskDocument(o.output),this.$alert.success("New task added successfully")),this.getUsers(a.fields),this.closeSheet(),this.workflowTask||this.documentTask?this.$emit("addEntry",this.formId,o.output):this.$emit("refresh",this.workflowId)}catch(i){console.log(i)}finally{this.$store.commit("hideLoadingBarPage")}},async linkTaskDocument(e){let t={wFormId:this.formId,formEntryId:e,fileInfo:{repositoryId:this.repositoryFile.repositoryId,itemId:this.repositoryFile.id}};const{error:s}=await c["g"].linkTaskDocument(t);s&&this.$alert.error(s)},async getComments(){this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=0)}),this.commentsList=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await c["g"].getFormComments(this.formId,this.taskModel.id);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t.length&&(this.commentsList=t,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}))},async saveComment(){if(this.commentText)if(this.taskModel.id){this.$store.commit("showLoadingBar");const{error:e}=await c["g"].insertFormComment(this.formId,this.taskModel.id,{comments:this.commentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.commentText="",this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.commentText=""},async saveAdvancedComment(){if(this.advancedCommentText)if(this.taskModel.id){this.$store.commit("showLoadingBar");const{error:e}=await c["g"].insertFormComment(this.formId,this.taskModel.id,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.advancedCommentText="",this.advancedCommentsSheet=!1},async uploadAttachments(e){if(this.taskModel.id){const s=e.target.files[0];this.$store.commit("showLoadingBar");const i=new FormData;i.append("formId",this.formId),i.append("repositoryId",this.repositoryId),i.append("entryId",this.taskModel.id),i.append("file",s);let a=e.target.files[0].name;const o=a.split(".").pop();if(!Object(u["a"])(o))return void this.$alert.info("This file format is not supported");try{const t=await f()({url:"https://appuat.ezofis.com/ezofisapi/api/form/taskAttachmentWithEntryId",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:s,data:a}=t;if(this.$store.commit("hideLoadingBar"),e.target.value="",200!==s||!a)throw t;this.$alert.success("Document attached")}catch(t){this.$store.commit("hideLoadingBar"),this.$alert.error("Error uploading file"),console.error(t)}this.attachmentLoad=setInterval(()=>this.getAttachments(),5e3)}else{this.$store.commit("showLoadingBar");const s=e.target.files[0],i=new FormData;i.append("file",s),i.append("formId",this.formId),i.append("repositoryId",this.repositoryId);let a=e.target.files[0].name;const o=a.split(".").pop();if(!Object(u["a"])(o))return void this.$alert.info("This file format is not supported");try{const t=await f()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:a,data:o}=t;if(this.$store.commit("hideLoadingBar"),e.target.value="",200!==a)throw"Invalid response";let r=JSON.parse(o);this.attachmentList.push({id:Number(r.fileId),name:s.name,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:s.size,initiate:!0,checked:!1})}catch(t){this.$store.commit("hideLoadingBar"),console.error(t),this.$alert.error("error attaching file")}}},async getAttachments(){this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=0)});let e=this.attachmentList.length;this.$store.commit("showLoadingBar");const{error:t,payload:s}=await c["g"].getFormAttachments(this.formId,this.taskModel.id);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):s.length?(e!==s.length&&(this.attachmentList=s.map(e=>({...e,checked:!1})),clearInterval(this.attachmentLoad)),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)})):this.attachmentList=[]},async attachmentDelete(e){if(this.$store.commit("showLoadingBar"),e.initiate){const{error:t}=await c["r"].deleteUploadedFiles([e.id]);if(t)return void this.$alert.error(t);this.$store.commit("hideLoadingBar"),this.attachmentList=this.attachmentList.filter(t=>t.id!==e.id)}else{const{error:t}=await c["p"].fileDelete(e.repositoryId,e.id);if(t)return void this.$alert.error(t);this.$store.commit("hideLoadingBar"),this.getAttachments()}},validateRequest(e){this.saveAction=e},async initiateRequest(){let e={};e={workflowId:this.workflowId,transactionId:0,review:this.saveAction,formData:{formId:this.workflowFormId,formEntryId:this.form.entryCount,fields:this.workflowFormModel}},this.$store.commit("showLoadingBarSave");const{error:t,payload:s}=await c["t"].processTransaction(e);this.$store.commit("hideLoadingBarSave"),this.saveAction="",t?this.$alert.error(t):(this.$alert.success(s.requestNo+" Request Initiated"),this.workflowDetails.push({workflowId:this.workflowId,processId:s.processId,transactionId:s.transactionId}),this.selectedTask.id&&this.linkTaskWorkflowProcess(this.selectedTask.id),this.closeAddTaskSheet(),this.$emit("refresh",this.workflowId))},async getForm(e){if(this.workflowId=e.id,this.headerTitle=e.stage,this.actions=e.actions,this.selectedTask.formId&&this.selectedTask.id&&await this.getWorkflowList(this.workflowId),e.formId)if(this.workflowFormId=e.formId,this.processInfo.length)this.countWorkflow=this.processInfo.length,this.taskSheet=!0;else{const{error:e,payload:t}=await c["g"].getForm(this.workflowFormId);if(e)return void this.$alert.error(e);t&&(this.form=t,this.workflowName=this.form.name,this.workflowDescription=this.form.description,this.addWorkflowForm=JSON.parse(t.formJson),this.workflowPanels=this.addWorkflowForm.panels,this.addTaskSheet=!0)}},async getworkflowForm(e){this.closeTaskSheet();const{error:t,payload:s}=await c["g"].getForm(e);this.workflowFormId=e,t?this.$alert.error(t):s&&(this.form=s,this.workflowName=this.form.name,this.workflowDescription=this.form.description,this.addWorkflowForm=JSON.parse(s.formJson),this.workflowPanels=this.addWorkflowForm.panels,this.addTaskSheet=!0)},async getworkflowDetailsForm(e){const{error:t,payload:s}=await c["g"].getForm(e);t?this.$alert.error(t):s&&(this.form=s,this.workflowName=this.form.name,this.workflowDescription=this.form.description,this.addWorkflowForm=JSON.parse(s.formJson),this.workflowPanels=this.addWorkflowForm.panels,this.processSheet=!0,this.$store.commit("hideLoadingBarPage"))},async linkTaskWorkflowProcess(e){let t={};t={wFormId:this.formId,formEntryId:e,workflow:this.workflowDetails};const{error:s}=await c["g"].linkTaskWorkflowProcess(t);s&&this.$alert.error(s)},async getWorkflowList(e){let t={};t={wId:e,fId:this.selectedTask.formId,entryId:this.selectedTask.id};const{error:s,payload:i}=await c["g"].getWorkflowTaskList(e,this.selectedTask.formId,this.selectedTask.id,t);this.workflowFormTaskList=i,i.processInfo&&(this.processInfo=i.processInfo),s&&this.$alert.error(s)},async getWorkflowAudit(e){this.$store.commit("showLoadingBarPage");const{error:t,payload:s}=await c["o"].getWorkflowData(this.workflowId,{filterBy:[{groupCondition:"",filters:[{criteria:"requestNo",condition:"IS_EQUALS_TO",value:e}]}],currentPage:1,itemsPerPage:10,mode:""}),{data:i,meta:a}=s;if(this.formList=i||{},this.formStage=a,this.formList[0].value[0].formData){let e=Object.keys(this.formList[0].value[0].formData.fields),t={};e.forEach(e=>{t[e]=this.validateTypeValue(this.formList[0].value[0].formData.fields[e])}),this.formModel=t}this.headerTitle=""+this.formList[0].value[0].name,this.formIdName=String(this.formList[0].value[0].formData.formId),this.getworkflowDetailsForm(this.formIdName),t&&this.$alert.error(t)},validateTypeValue(e){if(e)try{var t=JSON.parse(e);if("object"===typeof t)return t}catch(s){return e}return e},async getUsers(e){const{error:t,payload:s}=await c["s"].getUserList();if(t)return void this.$alert.error("Error fetching users");let i={id:0,title:e["e_NFnW0JxrLpZxqPeJS7K"],status:e["11m7YRT-7kdLx-g6iGojc"],remarks:e["2XOJMCR_DVb-5TwVPVdEX"],category:"TASK",createdBy:e["pM6Vly-JRlfroRrziE1jr"],lastActionBy:this.$store.state.session.email};const a=i.createdBy,o=s.filter(e=>a.includes(e.value)),r=o.map(e=>e.id);r.forEach(e=>{const t={...i,createdBy:e};this.insertNotification(t)}),console.log("email",o,r)},async insertNotification(e){const{error:t}=await c["b"].insertNotification(e);t&&this.$alert.error(t)}}},k=C,I=(s("a4c9"),s("2877")),S=s("4e73"),_=s("8169"),A=s("cb32"),T=s("b047"),x=s("93dc"),F=s.n(x),L=Object(I["a"])(k,i,a,!1,null,"0b56d901",null);t["a"]=L.exports;F()(L,"components",{QMenu:S["a"],QChatMessage:_["a"],QAvatar:A["a"],QChip:T["a"]})},"0ce8":function(e,t,s){},1137:function(e,t,s){},"11f5":function(e,t,s){"use strict";s("4759")},"130a":function(e,t,s){"use strict";s("ff80")},1549:function(e,t,s){"use strict";var i=s("2250"),a=s("a809"),o=s("5132"),r=s("e621");function n(e,t){return t.length<2?e:Object(o["a"])(e,Object(r["a"])(t,0,-1))}var l=n,c=s("4dc8");function d(e,t){return t=Object(i["a"])(t,e),e=l(e,t),null==e||delete e[Object(c["a"])(Object(a["a"])(t))]}t["a"]=d},"15ce":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tree",attrs:{id:"divWorkflowTree"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 225px)"}},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"q-pa-xs"},[t("q-tree",{ref:"tree",attrs:{nodes:e.treeNodes,"node-key":"id","no-connectors":"",expanded:e.expanded,"selected-color":"white",selected:e.selectedNode},on:{"update:expanded":function(t){e.expanded=t},"update:selected":function(t){e.selectedNode=t}},scopedSlots:e._u([{key:"default-header",fn:function(s){return[t("div",{staticClass:"row items-center"},[s.node.icon?t("q-icon",{staticClass:"q-mr-sm",attrs:{name:e.selectedNode===s.node.id?s.node.fillIcon:s.node.icon,color:s.node.color,size:"20px"}}):e._e(),t("div",{class:[e.selectedNode===s.node.id?"text-weight-bold":"text-weight-normal"]},[e._v(" "+e._s(s.node.label)+" ")])],1)]}}])})],1)])])],1)},a=[],o=(s("14d9"),{name:"WorkflowTree",props:{workflowList:{type:Array,default:()=>[]},myInboxCount:{type:Number,default:0},refresh:{type:Boolean,default:!0},loadInitial:{type:Boolean,default:!1}},data(){return{initial:!0,expanded:["Shared Inbox"],selectedNode:"",treeNodes:[{id:this.$nano.id(),label:"My Inbox",children:[{id:"inbox",label:"Inbox (0)",icon:"eva-email-outline",fillIcon:"eva-email"}]}]}},watch:{workflowList:{deep:!0,immediate:!0,handler(){let e=location.origin;if(this.workflowList.length&&this.refresh){this.myInboxCount&&"https://ag-appsvc01.azurewebsites.net"!==e?(this.expanded=["My Inbox"],this.selectedNode="inbox"):(this.expanded=["Shared Inbox"],this.selectedNode="Shared Inbox",this.workflowList.length&&(this.expanded.push("workflow-"+this.workflowList[0].id),this.selectedNode="inbox-"+this.workflowList[0].id)),this.treeNodes=[];let t={id:"Shared Inbox",label:"Shared Inbox",children:[]};this.workflowList.forEach(s=>{let i=[],a={};s.completedInfo?s.completedInfo.length>1?(s.completedInfo.forEach(e=>{i.push({id:`completed-${s.id}-${e.value}`,label:`${e.value} (${e.totalCount})`,icon:"eva-arrow-circle-right-outline",fillIcon:"eva-arrow-circle-right"})}),a={id:"completed-"+s.id,label:`Completed (${s.completedCount})`,icon:"",fillIcon:"",children:i}):s.completedInfo.length&&(a={id:"completed-"+s.id,label:`${s.completedInfo[0].value} (${s.completedCount})`,icon:"eva-checkmark-circle-2-outline",fillIcon:"eva-checkmark-circle-2",children:i}):a={id:"completed-"+s.id,label:`Completed (${s.completedCount})`,icon:"eva-checkmark-circle-2-outline",fillIcon:"eva-checkmark-circle-2",children:i},"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://localhost:8080"===e?t.children.push({id:"workflow-"+s.id,label:s.inboxCount?`${s.name} (${s.inboxCount})`:s.name,children:[{id:"common-"+s.id,label:`All Inbox (${s.runningCount})`,icon:"mdi-inbox-outline",fillIcon:"mdi-inbox"},{id:"inbox-"+s.id,label:`Inbox (${s.inboxCount})`,icon:"eva-email-outline",fillIcon:"eva-email"},{id:"sent-"+s.id,label:`Sent (${s.processCount})`,icon:"eva-person-done-outline",fillIcon:"eva-person-done"},{id:"payment-"+s.id,label:`Payment (${s.paymentProcessCount})`,icon:"mdi-account-cash-outline",fillIcon:"mdi-account-cash"},a]}):t.children.push({id:"workflow-"+s.id,label:s.inboxCount?`${s.name} (${s.inboxCount})`:s.name,children:[{id:"inbox-"+s.id,label:`Inbox (${s.inboxCount})`,icon:"eva-email-outline",fillIcon:"eva-email"},{id:"sent-"+s.id,label:`Sent (${s.processCount})`,icon:"eva-person-done-outline",fillIcon:"eva-person-done"},a]})});let s={id:"My Inbox",label:"My Inbox",children:[{id:"inbox",label:`Inbox (${this.myInboxCount})`,icon:"eva-email-outline",fillIcon:"eva-email"}]};this.treeNodes.push(s),this.treeNodes.push(t)}else if(this.workflowList.length){let t=this.treeNodes.findIndex(e=>"Shared Inbox"===e.label);this.workflowList.forEach(s=>{let i=this.treeNodes[t].children.findIndex(e=>e.id==="workflow-"+s.id);"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://localhost:8080"===e?(this.treeNodes[t].children[i].children[0].label=`All Inbox (${s.runningCount})`,this.treeNodes[t].children[i].children[1].label=`Inbox (${s.inboxCount})`,this.treeNodes[t].children[i].children[2].label=`Sent (${s.processCount})`,this.treeNodes[t].children[i].children[3].label=`Payment (${s.paymentProcessCount})`,this.treeNodes[t].children[i].children[4].label=`Completed (${s.completedCount})`):(this.treeNodes[t].children[i].children[0].label=`Inbox (${s.inboxCount})`,this.treeNodes[t].children[i].children[1].label=`Sent (${s.processCount})`,this.treeNodes[t].children[i].children[2].label=`Completed (${s.completedCount})`)})}}},selectedNode:{immediate:!0,handler(){if(this.selectedNode&&!this.initial){this.initial=!1;const e=this.selectedNode.split("-")[0];"My Inbox"===e?(2===this.expanded.length&&(this.expanded.pop(),this.expanded.pop()),this.$refs.tree.setExpanded(this.selectedNode,!0)):"Shared Inbox"===e?(this.expanded.pop(),this.$refs.tree.setExpanded(this.selectedNode,!0)):"workflow"===e?(this.expanded.indexOf("My Inbox")>-1?this.expanded.length>2&&this.expanded.pop():this.expanded.length>1&&this.expanded.pop(),this.$refs.tree.setExpanded(this.selectedNode,!0),this.selectedNode="inbox-"+this.selectedNode.split("-")[1]):this.loadInitial?(this.$emit("update:loadInitial",!1),this.$emit("selectedNode",this.selectedNode,!1)):this.$emit("selectedNode",this.selectedNode,!0)}this.initial&&(this.initial=!1)}}},methods:{}}),r=o,n=(s("a1da"),s("2877")),l=(s("caad"),s("13d5"),s("a026")),c=s("0016"),d=s("85fc"),m=l["default"].extend({name:"QCheckbox",mixins:[d["a"]],computed:{computedIcon(){return!0===this.isTrue?this.checkedIcon:!0===this.isIndeterminate?this.indeterminateIcon:this.uncheckedIcon}},methods:{__getInner(e){return void 0!==this.computedIcon?[e("div",{key:"icon",staticClass:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[e(c["a"],{staticClass:"q-checkbox__icon",props:{name:this.computedIcon}})])]:[e("div",{key:"svg",staticClass:"q-checkbox__bg absolute"},[e("svg",{staticClass:"q-checkbox__svg fit absolute-full",attrs:{focusable:"false",viewBox:"0 0 24 24"}},[e("path",{staticClass:"q-checkbox__truthy",attrs:{fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}}),e("path",{staticClass:"q-checkbox__indet",attrs:{d:"M4,14H20V10H4"}})])])]}},created(){this.type="checkbox"}}),h=s("e9c1"),u=s("0d59"),p=s("b7fa"),f=s("d882"),v=s("dc8a"),y=s("d54d"),b=s("9e47");const w=["none","strict","leaf","leaf-filtered"];var g=l["default"].extend({name:"QTree",mixins:[p["a"]],props:{nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>w.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:{type:Function,default(e,t){const s=t.toLowerCase();return e[this.labelKey]&&e[this.labelKey].toLowerCase().indexOf(s)>-1}},duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},computed:{classes(){return"q-tree q-tree--"+(!0===this.dense?"dense":"standard")+(!0===this.noConnectors?" q-tree--no-connectors":"")+(!0===this.isDark?" q-tree--dark":"")+(void 0!==this.color?" text-"+this.color:"")},hasSelection(){return void 0!==this.selected},computedIcon(){return this.icon||this.$q.iconSet.tree.icon},computedControlColor(){return this.controlColor||this.color},textColorClass(){if(void 0!==this.textColor)return"text-"+this.textColor},selectedColorClass(){const e=this.selectedColor||this.color;if(e)return"text-"+e},meta(){const e={},t=(s,i)=>{const a=s.tickStrategy||(i?i.tickStrategy:this.tickStrategy),o=s[this.nodeKey],r=s[this.childrenKey]&&s[this.childrenKey].length>0,n=!0!==s.disabled&&!0===this.hasSelection&&!1!==s.selectable,l=!0!==s.disabled&&!1!==s.expandable,c="none"!==a,d="strict"===a,m="leaf-filtered"===a,h="leaf"===a||"leaf-filtered"===a;let u=!0!==s.disabled&&!1!==s.tickable;!0===h&&!0===u&&i&&!0!==i.tickable&&(u=!1);let p=s.lazy;!0===p&&void 0!==this.lazy[o]&&!0===Array.isArray(s[this.childrenKey])&&(p=this.lazy[o]);const f={key:o,parent:i,isParent:r,lazy:p,disabled:s.disabled,link:!0!==s.disabled&&(!0===n||!0===l&&(!0===r||!0===p)),children:[],matchesFilter:!this.filter||this.filterMethod(s,this.filter),selected:o===this.selected&&!0===n,selectable:n,expanded:!0===r&&this.innerExpanded.includes(o),expandable:l,noTick:!0===s.noTick||!0!==d&&p&&"loaded"!==p,tickable:u,tickStrategy:a,hasTicking:c,strictTicking:d,leafFilteredTicking:m,leafTicking:h,ticked:(!0===d||!0!==r)&&this.innerTicked.includes(o)};if(e[o]=f,!0===r&&(f.children=s[this.childrenKey].map(e=>t(e,f)),this.filter&&(!0!==f.matchesFilter?f.matchesFilter=f.children.some(e=>e.matchesFilter):!0!==f.noTick&&!0!==f.disabled&&!0===f.tickable&&!0===m&&!0===f.children.every(e=>!0!==e.matchesFilter||!0===e.noTick||!0!==e.tickable)&&(f.tickable=!1)),!0===f.matchesFilter&&(!0!==f.noTick&&!0!==d&&!0===f.children.every(e=>e.noTick)&&(f.noTick=!0),h))){if(f.ticked=!1,f.indeterminate=f.children.some(e=>!0===e.indeterminate),f.tickable=!0===f.tickable&&f.children.some(e=>e.tickable),!0!==f.indeterminate){const e=f.children.reduce((e,t)=>!0===t.ticked?e+1:e,0);e===f.children.length?f.ticked=!0:e>0&&(f.indeterminate=!0)}!0===f.indeterminate&&(f.indeterminateNextState=f.children.every(e=>!0!==e.tickable||!0!==e.ticked))}return f};return this.nodes.forEach(e=>t(e,null)),e}},data(){return{lazy:{},innerTicked:this.ticked||[],innerExpanded:this.expanded||[]}},watch:{ticked(e){this.innerTicked=e},expanded(e){this.innerExpanded=e}},methods:{getNodeByKey(e){const t=[].reduce,s=(i,a)=>i||!a?i:!0===Array.isArray(a)?t.call(Object(a),s,i):a[this.nodeKey]===e?a:a[this.childrenKey]?s(null,a[this.childrenKey]):void 0;return s(null,this.nodes)},getTickedNodes(){return this.innerTicked.map(e=>this.getNodeByKey(e))},getExpandedNodes(){return this.innerExpanded.map(e=>this.getNodeByKey(e))},isExpanded(e){return!(!e||!this.meta[e])&&this.meta[e].expanded},collapseAll(){void 0!==this.expanded?this.$emit("update:expanded",[]):this.innerExpanded=[]},expandAll(){const e=this.innerExpanded,t=s=>{s[this.childrenKey]&&s[this.childrenKey].length>0&&!1!==s.expandable&&!0!==s.disabled&&(e.push(s[this.nodeKey]),s[this.childrenKey].forEach(t))};this.nodes.forEach(t),void 0!==this.expanded?this.$emit("update:expanded",e):this.innerExpanded=e},setExpanded(e,t,s=this.getNodeByKey(e),i=this.meta[e]){if(i.lazy&&"loaded"!==i.lazy){if("loading"===i.lazy)return;this.$set(this.lazy,e,"loading"),!0!==Array.isArray(s[this.childrenKey])&&this.$set(s,this.childrenKey,[]),this.$emit("lazy-load",{node:s,key:e,done:t=>{this.lazy[e]="loaded",this.$set(s,this.childrenKey,!0===Array.isArray(t)?t:[]),this.$nextTick(()=>{const t=this.meta[e];t&&!0===t.isParent&&this.__setExpanded(e,!0)})},fail:()=>{this.$delete(this.lazy,e),0===s[this.childrenKey].length&&this.$delete(s,this.childrenKey)}})}else!0===i.isParent&&!0===i.expandable&&this.__setExpanded(e,t)},__setExpanded(e,t){let s=this.innerExpanded;const i=void 0!==this.expanded;if(!0===i&&(s=s.slice()),t){if(this.accordion&&this.meta[e]){const t=[];this.meta[e].parent?this.meta[e].parent.children.forEach(s=>{s.key!==e&&!0===s.expandable&&t.push(s.key)}):this.nodes.forEach(s=>{const i=s[this.nodeKey];i!==e&&t.push(i)}),t.length>0&&(s=s.filter(e=>!1===t.includes(e)))}s=s.concat([e]).filter((e,t,s)=>s.indexOf(e)===t)}else s=s.filter(t=>t!==e);!0===i?this.$emit("update:expanded",s):this.innerExpanded=s},isTicked(e){return!(!e||!this.meta[e])&&this.meta[e].ticked},setTicked(e,t){let s=this.innerTicked;const i=void 0!==this.ticked;!0===i&&(s=s.slice()),s=t?s.concat(e).filter((e,t,s)=>s.indexOf(e)===t):s.filter(t=>!1===e.includes(t)),!0===i&&this.$emit("update:ticked",s)},__getSlotScope(e,t,s){const i={tree:this,node:e,key:s,color:this.color,dark:this.isDark};return Object(b["a"])(i,"expanded",()=>t.expanded,e=>{e!==t.expanded&&this.setExpanded(s,e)}),Object(b["a"])(i,"ticked",()=>t.ticked,e=>{e!==t.ticked&&this.setTicked([s],e)}),i},__getChildren(e,t){return(this.filter?t.filter(e=>this.meta[e[this.nodeKey]].matchesFilter):t).map(t=>this.__getNode(e,t))},__getNodeMedia(e,t){if(void 0!==t.icon)return e(c["a"],{staticClass:"q-tree__icon q-mr-sm",props:{name:t.icon,color:t.iconColor}});const s=t.img||t.avatar;return s?e("img",{staticClass:`q-tree__${t.img?"img":"avatar"} q-mr-sm`,attrs:{src:s}}):void 0},__getNode(e,t){const s=t[this.nodeKey],i=this.meta[s],a=t.header&&this.$scopedSlots["header-"+t.header]||this.$scopedSlots["default-header"],o=!0===i.isParent?this.__getChildren(e,t[this.childrenKey]):[],r=o.length>0||i.lazy&&"loaded"!==i.lazy;let n=t.body&&this.$scopedSlots["body-"+t.body]||this.$scopedSlots["default-body"];const l=void 0!==a||void 0!==n?this.__getSlotScope(t,i,s):null;return void 0!==n&&(n=e("div",{staticClass:"q-tree__node-body relative-position"},[e("div",{class:this.textColorClass},[n(l)])])),e("div",{key:s,staticClass:"q-tree__node relative-position",class:{"q-tree__node--parent":r,"q-tree__node--child":!r}},[e("div",{staticClass:"q-tree__node-header relative-position row no-wrap items-center",class:{"q-tree__node--link q-hoverable q-focusable":i.link,"q-tree__node--selected":i.selected,"q-tree__node--disabled":i.disabled},attrs:{tabindex:i.link?0:-1},on:{click:e=>{this.__onClick(t,i,e)},keypress:e=>{!0!==Object(v["c"])(e)&&(13===e.keyCode?this.__onClick(t,i,e,!0):32===e.keyCode&&this.__onExpandClick(t,i,e,!0))}}},[e("div",{staticClass:"q-focus-helper",attrs:{tabindex:-1},ref:"blurTarget_"+i.key}),"loading"===i.lazy?e(u["a"],{staticClass:"q-tree__spinner",props:{color:this.computedControlColor}}):!0===r?e(c["a"],{staticClass:"q-tree__arrow",class:{"q-tree__arrow--rotate":i.expanded},props:{name:this.computedIcon},on:{click:e=>{this.__onExpandClick(t,i,e)}}}):null,!0===i.hasTicking&&!0!==i.noTick?e(m,{staticClass:"q-tree__tickbox",props:{value:!0===i.indeterminate?null:i.ticked,color:this.computedControlColor,dark:this.isDark,dense:!0,keepColor:!0,disable:!0!==i.tickable},on:{keydown:f["l"],input:e=>{this.__onTickedClick(i,e)}}}):null,e("div",{staticClass:"q-tree__node-header-content col row no-wrap items-center",class:i.selected?this.selectedColorClass:this.textColorClass},[a?a(l):[this.__getNodeMedia(e,t),e("div",t[this.labelKey])]])]),!0===r?!0===this.noTransition?e("div",{staticClass:"q-tree__node-collapsible",class:this.textColorClass,directives:[{name:"show",value:i.expanded}]},[n,e("div",{staticClass:"q-tree__children",class:{"q-tree__node--disabled":i.disabled}},o)]):e(h["a"],{props:{duration:this.duration},on:Object(y["b"])(this,"slide",{show:()=>{this.$emit("after-show")},hide:()=>{this.$emit("after-hide")}})},[e("div",{staticClass:"q-tree__node-collapsible",class:this.textColorClass,directives:[{name:"show",value:i.expanded}]},[n,e("div",{staticClass:"q-tree__children",class:{"q-tree__node--disabled":i.disabled}},o)])]):n])},__blur(e){const t=this.$refs["blurTarget_"+e];void 0!==t&&t.focus()},__onClick(e,t,s,i){!0!==i&&this.__blur(t.key),this.hasSelection&&t.selectable?!1===this.noSelectionUnset?this.$emit("update:selected",t.key!==this.selected?t.key:null):t.key!==this.selected&&this.$emit("update:selected",void 0===t.key?null:t.key):this.__onExpandClick(e,t,s,i),"function"===typeof e.handler&&e.handler(e)},__onExpandClick(e,t,s,i){void 0!==s&&Object(f["l"])(s),!0!==i&&this.__blur(t.key),this.setExpanded(t.key,!t.expanded,e,t)},__onTickedClick(e,t){if(!0===e.indeterminate&&(t=e.indeterminateNextState),e.strictTicking)this.setTicked([e.key],t);else if(e.leafTicking){const s=[],i=e=>{e.isParent?(!0!==t&&!0!==e.noTick&&!0===e.tickable&&s.push(e.key),!0===e.leafTicking&&e.children.forEach(i)):!0===e.noTick||!0!==e.tickable||!0===e.leafFilteredTicking&&!0!==e.matchesFilter||s.push(e.key)};i(e),this.setTicked(s,t)}}},render(e){const t=this.__getChildren(e,this.nodes);return e("div",{class:this.classes},0===t.length?this.filter?this.noResultsLabel||this.$q.lang.tree.noResults:this.noNodesLabel||this.$q.lang.tree.noNodes:t)},created(){!0===this.defaultExpandAll&&this.expandAll()}}),C=s("93dc"),k=s.n(C),I=Object(n["a"])(r,i,a,!1,null,null,null);t["a"]=I.exports;k()(I,"components",{QTree:g,QIcon:c["a"]})},"19b0":function(e,t,s){"use strict";s("f9d3")},"1a1b":function(e,t,s){},"1fa9":function(e,t,s){"use strict";s("3103")},"27bd":function(e,t,s){"use strict";s("caad");var i=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"filter",expression:"'filter'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"eva-funnel-outline",color:e.activeFilter?"secondary":"gray"},on:{click:function(t){e.model=!0}}},[t("Sheet",{attrs:{width:"50vw","has-footer":""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Filter "+e._s(e.item)+"s ")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-pa-md",attrs:{id:"filters"}},[e.searchContent?[t("div",{staticClass:"description"},[e._v(" To search by content, type any text to search the entire folder ")]),t("TextField",{staticClass:"q-mb-md",attrs:{placeholder:"Search the document by content"},model:{value:e.contentSearch.contentSearchValue,callback:function(t){e.$set(e.contentSearch,"contentSearchValue",t)},expression:"contentSearch.contentSearchValue"}}),t("div",{staticClass:"q-mb-md",staticStyle:{"border-bottom":"1px solid var(--divider-color)"}},[e.showAdvanceOptions?t("div",{staticClass:"q-my-md"},[t("SingleChoiceField",{staticClass:"col q-mb-md",attrs:{options:e.searchOptions,"options-per-line":2,label:"Advanced Search Options"},model:{value:e.contentSearch.searchType,callback:function(t){e.$set(e.contentSearch,"searchType",t)},expression:"contentSearch.searchType"}}),t("FormFieldLabel",{attrs:{label:"Search similarity"}}),t("q-slider",{attrs:{color:"secondary",markers:"","marker-labels":"",min:0,max:10,label:""},model:{value:e.contentSearch.fuzzy,callback:function(t){e.$set(e.contentSearch,"fuzzy",t)},expression:"contentSearch.fuzzy"}})],1):e._e(),t("div",{staticClass:"row items-center q-mb-md"},[t("div",{staticClass:"col"},[e.showAdvanceOptions?t("div",{staticClass:"row items-center cursor-pointer",on:{click:function(t){e.showAdvanceOptions=!1}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-minus",color:"secondary"}}),t("div",{staticClass:"options"},[e._v("Hide Advanced Options")])],1):t("div",{staticClass:"row items-center cursor-pointer",on:{click:function(t){e.showAdvanceOptions=!0}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-plus",color:"secondary"}}),t("div",{staticClass:"options"},[e._v("Advanced Options")])],1)]),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"actions"},[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:e.clearContentSearch}}),t("BaseButton",{attrs:{label:"search"},on:{click:e.apply}})],1)])])])]:e._e(),e.filterGroups.length?[e._l(e.filterGroups,(function(s,i){return[t("div",{key:s.id,staticClass:"filter-group"},[t("div",{staticClass:"header"},[t("div",{staticClass:"label q-mr-md"},[e._v("Criteria")]),t("div",{staticClass:"label q-mr-md"},[e._v("Condition")]),t("div",{staticClass:"label q-mr-sm"},[e._v("Value")]),t("BaseActionButton",{attrs:{"is-flat":"",color:"secondary",icon:"eva-plus","no-border":""},on:{click:function(t){return e.addFilter(i)}}})],1),t("BaseSeparator",{staticClass:"q-mb-md",attrs:{"has-inset":""}}),e._l(s.filters,(function(s,a){return t("ValidationObserver",{key:s.id,ref:"form",refInFor:!0,staticClass:"filter row"},[t("ValidationProvider",{key:s.id,staticClass:"col q-mr-md",attrs:{name:"criteria",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:o}){return[t("MultiSelectField",{attrs:{"is-mandatory":"","is-searchable":!0,options:e._columns,error:o[0]},on:{input:function(t){return e.applyDataType(i,a,s.criteriaArray)}},model:{value:s.criteriaArray,callback:function(t){e.$set(s,"criteriaArray",t)},expression:"filter.criteriaArray"}})]}}],null,!0)}),t("ValidationProvider",{staticClass:"col-3 q-mr-md",attrs:{name:"condition",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{attrs:{"is-mandatory":"","is-searchable":!0,options:e.conditions(s.criteriaArray),error:i[0]},model:{value:s.condition,callback:function(t){e.$set(s,"condition",t)},expression:"filter.condition"}})]}}],null,!0)}),"SHORT_TEXT"===s.dataType||"BARCODE"===s.dataType?t("ValidationProvider",{staticClass:"col-3 q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition),error:i[0]},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"NUMBER"===s.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("NumberField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition),error:i[0]},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"DATE"===s.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("DateField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition),error:i[0]},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"TIME"===s.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TimeField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition),error:i[0]},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"SINGLE_SELECT"===s.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[e.checkOptions(s.criteriaArray)?[t("AsyncMultiSelectField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition),error:i[0],"api-path":e.apiPath,"column-name":s.criteriaArray},model:{value:s.arrayValue,callback:function(t){e.$set(s,"arrayValue",t)},expression:"filter.arrayValue"}}),e._e()]:[e._e(),t("MultiSelectField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition),"is-searchable":!0,options:e.getOptions(s.criteriaArray),error:i[0]},model:{value:s.arrayValue,callback:function(t){e.$set(s,"arrayValue",t)},expression:"filter.arrayValue"}})]]}}],null,!0)}):t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(s.condition),error:i[0]},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"filter.value"}})]}}],null,!0)}),t("div",{staticClass:"remove-filter"},[t("BaseActionButton",{attrs:{"is-flat":"",color:"red","no-border":"",icon:"eva-close-outline"},on:{click:function(t){return e.removeFilter(i,a)}}})],1)],1)})),t("BaseSeparator",{attrs:{"has-inset":""}}),t("div",{staticClass:"row"},[t("Action",{staticClass:"col",attrs:{icon:"eva-plus-outline",label:"Add Filter Group"},on:{click:function(t){return e.addFilterGroup(i+1)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),t("Action",{staticClass:"col",attrs:{icon:"eva-trash-2-outline",label:"Delete Group"},on:{click:function(t){return e.removeFilterGroup(i)}}})],1)],2),i!==e.filterGroups.length-1?t("div",{key:i,staticClass:"row justify-center"},[t("Toggle",{staticClass:"q-my-md",attrs:{options:e.groupConditions},on:{input:e.groupCondition},model:{value:s.groupCondition,callback:function(t){e.$set(s,"groupCondition",t)},expression:"group.groupCondition"}})],1):e._e()]}))]:[t("div",{staticClass:"add-filter",on:{click:e.addFilterGroup}},[t("BaseIcon",{attrs:{name:"eva-plus","inherit-color":""}}),t("div",{staticClass:"q-ml-sm"},[e._v("Add Filter")])],1)]],2)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:e.clearFilter}}),t("BaseButton",{attrs:{label:"apply"},on:{click:e.apply}})]},proxy:!0}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)},a=[],o=(s("13d5"),s("14d9"),s("874f")),r=s("9996"),n=s("7bb1"),l=s("381e"),c=s("b3d1"),d=s("12b8"),m=s("94f5"),h=s("670a"),u=s("970a"),p=s("ad54"),f=s("53c1"),v=s("cedb"),y=s("70a9"),b=s("0c21"),w=s("c3d2"),g=s("1b0d"),C=s("0d5e"),k=s("3445"),I=s("9234"),S={name:"FilterItems",components:{ValidationObserver:n["a"],ValidationProvider:n["b"],Sheet:l["a"],TextField:c["a"],SelectField:d["a"],Action:m["a"],Toggle:h["a"],NumberField:p["a"],DateField:f["a"],TimeField:v["a"],AsyncMultiSelectField:y["a"],MultiSelectField:w["a"],AsyncSelectField:b["a"],FormFieldLabel:k["a"],SingleChoiceField:I["a"]},props:{item:{type:String,default:"item"},columns:{type:Array,required:!0},filterBy:{type:Array,required:!0},isBordered:{type:Boolean,default:!1},selectedFilter:{type:Array,default:()=>[]},searchContent:{type:Boolean,default:!1},contentSearch:{type:Object,default:()=>({contentSearchValue:"",fuzzy:0,searchType:1})},module:{type:String,default:""},moduleId:{type:[String,Number],default:0}},data(){return{model:!1,groupConditions:["AND","OR"],filterGroups:[],activeFilter:!1,userList:[],options:[],showAdvanceOptions:!1,searchOptions:[{id:this.$nano.id(),label:"Any of the Words",value:1},{id:this.$nano.id(),label:"All of the Words",value:2}]}},computed:{_columns(){var e=this.columns.reduce((e,t)=>("isFilter"in t?t.isFilter&&e.push({id:t.id,label:t.label,value:t.name,dataType:t.dataType}):e.push({id:t.id,label:t.label,value:t.name,dataType:t.dataType}),e),[]);return e},apiPath(){if("repository"===this.module){if(this.$route.query.repositoryId)return`/repository/${this.moduleId}/uniqueColumnValues`}else if("form"===this.module)return`/form/${this.moduleId}/uniqueColumnValues`;return""}},watch:{model:{deep:!0,handler(){this.model}},$route:{deep:!0,handler(){this.$route.query.repositoryId||(this.filterGroups=[],this.activeFilter=!1)}},filterBy:{deep:!0,immediate:!0,handler(){0===this.filterBy.length&&""===this.contentSearch.contentSearchValue&&(this.activeFilter=!1)}},contentSearch:{deep:!0,immediate:!0,handler(){0===this.filterBy.length&&""===this.contentSearch.contentSearchValue&&(this.activeFilter=!1)}}},created(){this.getUsers()},methods:{conditions(e){if(!e)return[];if(1!==e.length)return Object(u["a"])("SHORT_TEXT").map(e=>({id:this.$nano.id(),label:`${Object(o["a"])(Object(r["a"])(e.split(" ")[0]))} ${e.split(" ")[1]?e.split(" ")[1]:""}`,value:e.split(" ")[0]}));{const t=this.columns.find(t=>t.name===e[0]);if(t)return Object(u["a"])(t.dataType).map(e=>({id:this.$nano.id(),label:`${Object(o["a"])(Object(r["a"])(e.split(" ")[0]))} ${e.split(" ")[1]?e.split(" ")[1]:""}`,value:e.split(" ")[0]}))}},addFilterGroup(e=0){this.filterGroups.splice(e,0,{id:this.$nano.id(),filters:[{id:this.$nano.id(),criteria:"",criteriaArray:[],condition:"",value:"",arrayValue:[]}],groupCondition:(this.filterGroups.length,"")}),this.filterGroups.length&&this.selectedFilter.length&&this.selectedFilter[1]&&1===this.selectedFilter[1].level&&(this.filterGroups[0].filters=[],this.selectedFilter.forEach((e,t)=>{0!=t&&this.filterGroups[0].filters.push({id:this.$nano.id(),criteria:e.fieldName,condition:"IS_EQUALS_TO",value:e.label,arrayValue:e.arrayValue||[]})}))},removeFilterGroup(e){this.filterGroups.splice(e,1)},addFilter(e){this.filterGroups[e].filters.push({id:this.$nano.id(),criteria:"",criteriaArray:[],condition:"CONTAINS",value:"",arrayValue:[]})},removeFilter(e,t){this.filterGroups[e].filters.splice(t,1)},async apply(){let e=0,t={};if(!this.$refs.form)return void(this.searchContent&&(this.$emit("update",this.filterGroups,t),this.model=!1,this.activeFilter=!0));for(const i of this.$refs.form){const t=await i.validate();t||e++}if(e)return;let s=!1;if(this.filterGroups.length&&(this.filterGroups[0].groupCondition="",this.filterGroups[0].filters.length||(this.filterGroups=[]),this.filterGroups.forEach(e=>{e.filters.length&&e.filters.forEach(e=>{e.criteriaArray.length>1?s=!0:e.criteria=e.criteriaArray[0],"SINGLE_SELECT"===e.dataType&&(e.value=JSON.stringify(e.arrayValue))})})),s){let e=[];this.filterGroups.forEach(t=>{t.filters.length&&t.filters.forEach(t=>{t.criteriaArray.forEach((s,i)=>{e.push({filters:[{criteria:s,condition:t.condition,value:t.value,dataType:t.dataType}],groupCondition:i?"OR":""})})})}),this.$emit("update",e,t)}else this.$emit("update",this.filterGroups,t);this.model=!1,this.activeFilter=!0},applyDataType(e,t,s){if(this.filterGroups[e].filters[t].condition="",1===s.length){this.filterGroups[e].filters[t].dataType="";let i=this._columns.find(e=>e.label===s[0]||e.value===s[0]);i&&(this.filterGroups[e].filters[t].dataType=i.dataType,"SHORT_TEXT"===i.dataType?this.filterGroups[e].filters[t].condition="CONTAINS":"SINGLE_SELECT"===i.dataType&&(this.filterGroups[e].filters[t].condition="IS_EQUALS_TO"));let a=this.filterGroups[e].filters[t];"SINGLE_SELECT"===a.dataType?this.filterGroups[e].filters[t].value=[]:this.filterGroups[e].filters[t].value=""}else this.filterGroups[e].filters[t].condition="CONTAINS",this.filterGroups[e].filters[t].dataType="SHORT_TEXT",this.filterGroups[e].filters[t].value=""},clearFilter(){this.filterGroups=[],this.activeFilter=!1,this.clearContentSearch(),this.$emit("update",this.filterGroups,"")},clearContentSearch(){this.showAdvanceOptions=!1,this.contentSearch.contentSearchValue="",this.contentSearch.searchType=1,this.contentSearch.fuzzy=0,this.$emit("updateContentSearch",this.contentSearch)},groupCondition(e){this.filterGroups[this.filterGroups.length-1].groupCondition=e},checkOptions(e){if(1===e.length){let t=this.columns.find(t=>t.name===e[0]);if(t&&t.apiLoad)return!0}return!1},getOptions(e){var t;return 1===e.length?"createdBy"===e[0]||"modifiedBy"===e[0]||"owner"===e[0]||"coordinator"===e[0]?this.userList:null===(t=this.columns.find(t=>t.name===e[0]))||void 0===t?void 0:t.options:[]},async getUsers(){this.userList=[];const{error:e,payload:t}=await g["s"].getUserList();e?this.$alert.error("Error fetching users"):t&&t.map(e=>{this.userList.push({id:this.$nano.id(),label:e.value,value:String(e.id)})})},async getUniqueOptions(e){try{const t=await C["b"].post(this.apiPath,JSON.stringify({column:e,keyword:"",rowFrom:0,rowCount:10})),{status:s,data:i}=t;if(200!==s)throw t;const a=JSON.parse(i);return this.options=[],a.forEach(e=>{let t=this.userList.find(t=>t.value===e);t&&this.options.push({id:this.$nano.id(),label:t.label,value:t.value})}),this.options}catch(t){console.error(t),this.$alert.error("Error fetching options")}}}},_=S,A=(s("ae23"),s("2877")),T=s("a026"),x=s("75c3"),F=s("b7fa"),L=s("f89c"),P=s("7937"),$=s("d882"),B=s("5ff7");const N="q-slider__marker-labels",M=e=>({value:e}),D=[34,37,40,33,39,38],q={mixins:[F["a"],L["b"]],directives:{TouchPan:x["a"]},props:{min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},data(){return{active:!1,preventFocus:!1,focus:!1,dragging:!1}},computed:{axis(){return!0===this.vertical?"--v":"--h"},labelSide(){return"-"+(!0===this.switchLabelSide?"switched":"standard")},isReversed(){return!0===this.vertical?!0===this.reverse:this.reverse!==(!0===this.$q.lang.rtl)},computedInnerMin(){return this.__getInnerMin(this.innerMin)},computedInnerMax(){return this.__getInnerMax(this.innerMax)},editable(){return!0!==this.disable&&!0!==this.readonly&&this.computedInnerMin<this.computedInnerMax},computedDecimals(){return(String(this.step).trim("0").split(".")[1]||"").length},computedStep(){return 0===this.step?1:this.step},computedTabindex(){return!0===this.editable?this.tabindex||0:-1},trackLen(){return this.max-this.min},innerBarLen(){return this.computedInnerMax-this.computedInnerMin},innerMinRatio(){return this.__convertModelToRatio(this.computedInnerMin)},innerMaxRatio(){return this.__convertModelToRatio(this.computedInnerMax)},positionProp(){return!0===this.vertical?!0===this.isReversed?"bottom":"top":!0===this.isReversed?"right":"left"},sizeProp(){return!0===this.vertical?"height":"width"},thicknessProp(){return!0===this.vertical?"width":"height"},orientation(){return!0===this.vertical?"vertical":"horizontal"},attributes(){const e={role:"slider","aria-valuemin":this.computedInnerMin,"aria-valuemax":this.computedInnerMax,"aria-orientation":this.orientation,"data-step":this.step};return!0===this.disable?e["aria-disabled"]="true":!0===this.readonly&&(e["aria-readonly"]="true"),e},classes(){return`q-slider q-slider${this.axis} q-slider--${!0===this.active?"":"in"}active inline no-wrap `+(!0===this.vertical?"row":"column")+(!0===this.disable?" disabled":" q-slider--enabled"+(!0===this.editable?" q-slider--editable":""))+("both"===this.focus?" q-slider--focus":"")+(this.label||!0===this.labelAlways?" q-slider--label":"")+(!0===this.labelAlways?" q-slider--label-always":"")+(!0===this.isDark?" q-slider--dark":"")+(!0===this.dense?" q-slider--dense q-slider--dense"+this.axis:"")},selectionBarClass(){const e=this.selectionColor||this.color;return"q-slider__selection absolute"+(void 0!==e?" text-"+e:"")},markerClass(){return this.__getAxisClass("markers")+" absolute overflow-hidden"},trackContainerClass(){return this.__getAxisClass("track-container")},pinClass(){return this.__getPositionClass("pin")},labelClass(){return this.__getPositionClass("label")},textContainerClass(){return this.__getPositionClass("text-container")},markerLabelsContainerClass(){return this.__getPositionClass("marker-labels-container")+(void 0!==this.markerLabelsClass?" "+this.markerLabelsClass:"")},trackClass(){return"q-slider__track relative-position no-outline"+(void 0!==this.trackColor?" bg-"+this.trackColor:"")},trackStyle(){const e={[this.thicknessProp]:this.trackSize};return void 0!==this.trackImg&&(e.backgroundImage=`url(${this.trackImg}) !important`),e},innerBarClass(){return"q-slider__inner absolute"+(void 0!==this.innerTrackColor?" bg-"+this.innerTrackColor:"")},innerBarStyle(){const e={[this.positionProp]:100*this.innerMinRatio+"%",[this.sizeProp]:100*(this.innerMaxRatio-this.innerMinRatio)+"%"};return void 0!==this.innerTrackImg&&(e.backgroundImage=`url(${this.innerTrackImg}) !important`),e},markerStep(){return!0===Object(B["c"])(this.markers)?this.markers:this.computedStep},markerTicks(){const e=[],t=this.markerStep;let s=this.min;do{e.push(s),s+=t}while(s<this.max);return e.push(this.max),e},markerLabelClass(){const e=` ${N}${this.axis}-`;return N+`${e}${!0===this.switchMarkerLabelsSide?"switched":"standard"}`+`${e}${!0===this.isReversed?"rtl":"ltr"}`},markerLabelsList(){return!1===this.markerLabels?null:this.__getMarkerList(this.markerLabels).map((e,t)=>({index:t,value:e.value,label:e.label||e.value,classes:this.markerLabelClass+(void 0!==e.classes?" "+e.classes:""),style:{...this.__getMarkerLabelStyle(e.value),...e.style||{}}}))},markerScope(){return{markerList:this.markerLabelsList,markerMap:this.markerLabelsMap,classes:this.markerLabelClass,getStyle:this.__getMarkerLabelStyle}},markerStyle(){if(0!==this.innerBarLen){const e=100*this.markerStep/this.innerBarLen;return{...this.innerBarStyle,backgroundSize:!0===this.vertical?`2px ${e}%`:e+"% 2px"}}return null},markerLabelsMap(){if(!1===this.markerLabels)return null;const e={};return this.markerLabelsList.forEach(t=>{e[t.value]=t}),e},panDirectives(){return!0===this.editable?[{name:"touch-pan",value:this.__onPan,modifiers:{[this.orientation]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}}]:null}},methods:{__getInnerMin(e){return!0===isNaN(e)||this.innerMin<this.min?this.min:this.innerMin},__getInnerMax(e){return!0===isNaN(e)||e>this.max?this.max:this.innerMax},__getPositionClass(e){const t="q-slider__"+e;return`${t} ${t}${this.axis} ${t}${this.axis}${this.labelSide}`},__getAxisClass(e){const t="q-slider__"+e;return`${t} ${t}${this.axis}`},__convertRatioToModel(e){let t=this.min+e*(this.max-this.min);if(this.step>0){const e=(t-this.min)%this.step;t+=(Math.abs(e)>=this.step/2?(e<0?-1:1)*this.step:0)-e}return this.computedDecimals>0&&(t=parseFloat(t.toFixed(this.computedDecimals))),Object(P["a"])(t,this.computedInnerMin,this.computedInnerMax)},__convertModelToRatio(e){return 0===this.trackLen?0:(e-this.min)/this.trackLen},__getDraggingRatio(e,t){const s=Object($["h"])(e),i=!0===this.vertical?Object(P["a"])((s.top-t.top)/t.height,0,1):Object(P["a"])((s.left-t.left)/t.width,0,1);return Object(P["a"])(!0===this.isReversed?1-i:i,this.innerMinRatio,this.innerMaxRatio)},__getMarkerList(e){if(!1===e)return null;if(!0===e)return this.markerTicks.map(M);if("function"===typeof e)return this.markerTicks.map(t=>{const s=e(t);return!0===Object(B["d"])(s)?{...s,value:t}:{value:t,label:s}});const t=({value:e})=>e>=this.min&&e<=this.max;return!0===Array.isArray(e)?e.map(e=>!0===Object(B["d"])(e)?e:{value:e}).filter(t):Object.keys(e).map(t=>{const s=e[t],i=Number(t);return!0===Object(B["d"])(s)?{...s,value:i}:{value:i,label:s}}).filter(t)},__getMarkerLabelStyle(e){return{[this.positionProp]:100*(e-this.min)/this.trackLen+"%"}},__getMarkerLabelsContent(e){if(void 0!==this.$scopedSlots["marker-label-group"])return this.$scopedSlots["marker-label-group"](this.markerScope);const t=this.$scopedSlots["marker-label"];return void 0!==t?this.markerLabelsList.map(e=>t({marker:e,...this.markerScope})):this.markerLabelsList.map(t=>e("div",{key:t.value,style:t.style,class:t.classes},t.label))},__onPan(e){!0===e.isFinal?(void 0!==this.dragging&&(this.__updatePosition(e.evt),!0===e.touch&&this.__updateValue(!0),this.dragging=void 0,this.$emit("pan","end")),this.active=!1,this.focus=!1):!0===e.isFirst?(this.dragging=this.__getDragging(e.evt),this.__updatePosition(e.evt),this.__updateValue(),this.active=!0,this.$emit("pan","start")):(this.__updatePosition(e.evt),this.__updateValue())},__onBlur(){this.focus=!1},__onActivate(e){this.__updatePosition(e,this.__getDragging(e)),this.__updateValue(),this.preventFocus=!0,this.active=!0,document.addEventListener("mouseup",this.__onDeactivate,!0)},__onDeactivate(){this.preventFocus=!1,this.active=!1,this.__updateValue(!0),this.__onBlur(),document.removeEventListener("mouseup",this.__onDeactivate,!0)},__onMobileClick(e){this.__updatePosition(e,this.__getDragging(e)),this.__updateValue(!0)},__onKeyup(e){D.includes(e.keyCode)&&this.__updateValue(!0)},__getTextContainerStyle(e){if(!0===this.vertical)return null;const t=this.$q.lang.rtl!==this.reverse?1-e:e;return{transform:`translateX(calc(${2*t-1} * ${this.thumbSize} / 2 + ${50-100*t}%))`}},__getThumb(e,t){const s=[e("svg",{class:"q-slider__thumb-shape absolute-full",attrs:{viewBox:"0 0 20 20","aria-hidden":"true"}},[e("path",{attrs:{d:this.thumbPath}})]),e("div",{class:"q-slider__focus-ring fit"})];return!0!==this.label&&!0!==this.labelAlways||(s.push(e("div",{class:this.pinClass+" absolute fit no-pointer-events"+t.pinColor},[e("div",{class:this.labelClass,style:{minWidth:this.thumbSize}},[e("div",{class:this.textContainerClass,style:t.textContainerStyle},[e("span",{class:t.textClass},t.label)])])])),void 0!==this.name&&!0!==this.disable&&this.__injectFormInput(s,"push")),e("div",{class:t.classes,style:t.style,...t.nodeData},s)},__getContent(e,t){const s=[];"transparent"!==this.innerTrackColor&&s.push(e("div",{key:"inner",class:this.innerBarClass,style:this.innerBarStyle})),"transparent"!==this.selectionColor&&s.push(e("div",{key:"selection",class:this.selectionBarClass,style:this.selectionBarStyle})),!1!==this.markers&&s.push(e("div",{key:"marker",class:this.markerClass,style:this.markerStyle})),t(s);const i=[e("div",{key:"trackC",class:this.trackContainerClass,attrs:this.trackContainerAttrs,on:this.trackContainerEvents,directives:this.panDirectives},[e("div",{class:this.trackClass,style:this.trackStyle},s)])];if(!1!==this.markerLabels){const t=!0===this.switchMarkerLabelsSide?"unshift":"push";i[t](e("div",{key:"markerL",class:this.markerLabelsContainerClass},this.__getMarkerLabelsContent(e)))}return i}},beforeDestroy(){document.removeEventListener("mouseup",this.__onDeactivate,!0)}};var O=T["default"].extend({name:"QSlider",mixins:[q],props:{value:{required:!0,default:null,validator:e=>"number"===typeof e||null===e},labelValue:[String,Number]},data(){const e=this.__getInnerMin(this.innerMin),t=this.__getInnerMax(this.innerMax);return{model:null===this.value?e:Object(P["a"])(this.value,e,t),curRatio:0}},computed:{modelRatio(){return this.__convertModelToRatio(this.model)},ratio(){return!0===this.active?this.curRatio:this.modelRatio},selectionBarStyle(){const e={[this.positionProp]:100*this.innerMinRatio+"%",[this.sizeProp]:100*(this.ratio-this.innerMinRatio)+"%"};return void 0!==this.selectionImg&&(e.backgroundImage=`url(${this.selectionImg}) !important`),e},thumbLabel(){return void 0!==this.labelValue?this.labelValue:this.model},thumbClasses(){const e=this.thumbColor||this.color;return`q-slider__thumb q-slider__thumb${this.axis} q-slider__thumb${this.axis}-${!0===this.isReversed?"rtl":"ltr"} absolute non-selectable`+(!1===this.preventFocus&&!0===this.focus?" q-slider--focus":"")+(void 0!==e?" text-"+e:"")},thumbStyle(){return{width:this.thumbSize,height:this.thumbSize,[this.positionProp]:100*this.ratio+"%"}},thumbPinColor(){return void 0!==this.labelColor?" text-"+this.labelColor:""},thumbTextContainerStyle(){return this.__getTextContainerStyle(this.ratio)},thumbTextClass(){return"q-slider__text"+(void 0!==this.labelTextColor?" text-"+this.labelTextColor:"")},trackContainerEvents(){return!0!==this.editable?{}:!0===this.$q.platform.is.mobile?{click:this.__onMobileClick}:{mousedown:this.__onActivate,focus:this.__onFocus,blur:this.__onBlur,keydown:this.__onKeydown,keyup:this.__onKeyup}},trackContainerAttrs(){return{tabindex:!0!==this.$q.platform.is.mobile?this.computedTabindex:null}},modelUpdate(){return`${this.value}|${this.computedInnerMin}|${this.computedInnerMax}`}},watch:{modelUpdate(){this.model=null===this.value?this.computedInnerMin:Object(P["a"])(this.value,this.computedInnerMin,this.computedInnerMax)}},methods:{__updateValue(e){this.model!==this.value&&this.$emit("input",this.model),!0===e&&this.$emit("change",this.model)},__getDragging(){return this.$el.getBoundingClientRect()},__updatePosition(e,t=this.dragging){const s=this.__getDraggingRatio(e,t);this.model=this.__convertRatioToModel(s),this.curRatio=!0!==this.snap||0===this.computedStep?s:this.__convertModelToRatio(this.model)},__onFocus(){this.focus=!0},__onKeydown(e){if(!D.includes(e.keyCode))return;Object($["l"])(e);const t=([34,33].includes(e.keyCode)?10:1)*this.computedStep,s=([34,37,40].includes(e.keyCode)?-1:1)*(!0===this.isReversed?-1:1)*(!0===this.vertical?-1:1)*t;this.model=Object(P["a"])(parseFloat((this.model+s).toFixed(this.computedDecimals)),this.computedInnerMin,this.computedInnerMax),this.__updateValue()}},render(e){const t=this.__getContent(e,t=>{t.push(this.__getThumb(e,{pinColor:this.thumbPinColor,textContainerStyle:this.thumbTextContainerStyle,textClass:this.thumbTextClass,label:this.thumbLabel,classes:this.thumbClasses,style:this.thumbStyle,nodeData:{}}))});return e("div",{class:this.classes+(null===this.value?" q-slider--no-value":""),attrs:{...this.attributes,"aria-valuenow":this.value}},t)}}),E=s("93dc"),R=s.n(E),V=Object(A["a"])(_,i,a,!1,null,"2eff0750",null);t["a"]=V.exports;R()(V,"components",{QSlider:O})},"2a80":function(e,t,s){},"2ac6":function(e,t,s){"use strict";s("0ce8")},"2b88":function(e,t,s){"use strict";
/*! 
  * portal-vue © Thorsten Lünborg, 2019 
  * 
  * Version: 2.1.7
  * 
  * LICENCE: MIT 
  * 
  * https://github.com/linusborg/portal-vue
  * 
 */function i(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}Object.defineProperty(t,"__esModule",{value:!0});var a=i(s("a026"));function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e){return n(e)||l(e)||c()}function n(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var d="undefined"!==typeof window;function m(e){return Array.isArray(e)||"object"===o(e)?Object.freeze(e):e}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.reduce((function(e,s){var i=s.passengers[0],a="function"===typeof i?i(t):s.passengers;return e.concat(a)}),[])}function u(e,t){return e.map((function(e,t){return[t,e]})).sort((function(e,s){return t(e[1],s[1])||e[0]-s[0]})).map((function(e){return e[1]}))}function p(e,t){return t.reduce((function(t,s){return e.hasOwnProperty(s)&&(t[s]=e[s]),t}),{})}var f={},v={},y={},b=a.extend({data:function(){return{transports:f,targets:v,sources:y,trackInstances:d}},methods:{open:function(e){if(d){var t=e.to,s=e.from,i=e.passengers,o=e.order,r=void 0===o?1/0:o;if(t&&s&&i){var n={to:t,from:s,passengers:m(i),order:r},l=Object.keys(this.transports);-1===l.indexOf(t)&&a.set(this.transports,t,[]);var c=this.$_getTransportIndex(n),h=this.transports[t].slice(0);-1===c?h.push(n):h[c]=n,this.transports[t]=u(h,(function(e,t){return e.order-t.order}))}}},close:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=e.to,i=e.from;if(s&&(i||!1!==t)&&this.transports[s])if(t)this.transports[s]=[];else{var a=this.$_getTransportIndex(e);if(a>=0){var o=this.transports[s].slice(0);o.splice(a,1),this.transports[s]=o}}},registerTarget:function(e,t,s){d&&(this.trackInstances&&!s&&this.targets[e]&&console.warn("[portal-vue]: Target ".concat(e," already exists")),this.$set(this.targets,e,Object.freeze([t])))},unregisterTarget:function(e){this.$delete(this.targets,e)},registerSource:function(e,t,s){d&&(this.trackInstances&&!s&&this.sources[e]&&console.warn("[portal-vue]: source ".concat(e," already exists")),this.$set(this.sources,e,Object.freeze([t])))},unregisterSource:function(e){this.$delete(this.sources,e)},hasTarget:function(e){return!(!this.targets[e]||!this.targets[e][0])},hasSource:function(e){return!(!this.sources[e]||!this.sources[e][0])},hasContentFor:function(e){return!!this.transports[e]&&!!this.transports[e].length},$_getTransportIndex:function(e){var t=e.to,s=e.from;for(var i in this.transports[t])if(this.transports[t][i].from===s)return+i;return-1}}}),w=new b(f),g=1,C=a.extend({name:"portal",props:{disabled:{type:Boolean},name:{type:String,default:function(){return String(g++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}}},created:function(){var e=this;this.$nextTick((function(){w.registerSource(e.name,e)}))},mounted:function(){this.disabled||this.sendUpdate()},updated:function(){this.disabled?this.clear():this.sendUpdate()},beforeDestroy:function(){w.unregisterSource(this.name),this.clear()},watch:{to:function(e,t){t&&t!==e&&this.clear(t),this.sendUpdate()}},methods:{clear:function(e){var t={from:this.name,to:e||this.to};w.close(t)},normalizeSlots:function(){return this.$scopedSlots.default?[this.$scopedSlots.default]:this.$slots.default},normalizeOwnChildren:function(e){return"function"===typeof e?e(this.slotProps):e},sendUpdate:function(){var e=this.normalizeSlots();if(e){var t={from:this.name,to:this.to,passengers:r(e),order:this.order};w.open(t)}else this.clear()}},render:function(e){var t=this.$slots.default||this.$scopedSlots.default||[],s=this.tag;return t&&this.disabled?t.length<=1&&this.slim?this.normalizeOwnChildren(t)[0]:e(s,[this.normalizeOwnChildren(t)]):this.slim?e():e(s,{class:{"v-portal":!0},style:{display:"none"},key:"v-portal-placeholder"})}}),k=a.extend({name:"portalTarget",props:{multiple:{type:Boolean,default:!1},name:{type:String,required:!0},slim:{type:Boolean,default:!1},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},data:function(){return{transports:w.transports,firstRender:!0}},created:function(){var e=this;this.$nextTick((function(){w.registerTarget(e.name,e)}))},watch:{ownTransports:function(){this.$emit("change",this.children().length>0)},name:function(e,t){w.unregisterTarget(t),w.registerTarget(e,this)}},mounted:function(){var e=this;this.transition&&this.$nextTick((function(){e.firstRender=!1}))},beforeDestroy:function(){w.unregisterTarget(this.name)},computed:{ownTransports:function(){var e=this.transports[this.name]||[];return this.multiple?e:0===e.length?[]:[e[e.length-1]]},passengers:function(){return h(this.ownTransports,this.slotProps)}},methods:{children:function(){return 0!==this.passengers.length?this.passengers:this.$scopedSlots.default?this.$scopedSlots.default(this.slotProps):this.$slots.default||[]},noWrapper:function(){var e=this.slim&&!this.transition;return e&&this.children().length>1&&console.warn("[portal-vue]: PortalTarget with `slim` option received more than one child element."),e}},render:function(e){var t=this.noWrapper(),s=this.children(),i=this.transition||this.tag;return t?s[0]:this.slim&&!i?e():e(i,{props:{tag:this.transition&&this.tag?this.tag:void 0},class:{"vue-portal-target":!0}},s)}}),I=0,S=["disabled","name","order","slim","slotProps","tag","to"],_=["multiple","transition"],A=a.extend({name:"MountingPortal",inheritAttrs:!1,props:{append:{type:[Boolean,String]},bail:{type:Boolean},mountTo:{type:String,required:!0},disabled:{type:Boolean},name:{type:String,default:function(){return"mounted_"+String(I++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}},multiple:{type:Boolean,default:!1},targetSlim:{type:Boolean},targetSlotProps:{type:Object,default:function(){return{}}},targetTag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},created:function(){if("undefined"!==typeof document){var e=document.querySelector(this.mountTo);if(e){var t=this.$props;if(w.targets[t.name])t.bail?console.warn("[portal-vue]: Target ".concat(t.name," is already mounted.\n        Aborting because 'bail: true' is set")):this.portalTarget=w.targets[t.name];else{var s=t.append;if(s){var i="string"===typeof s?s:"DIV",a=document.createElement(i);e.appendChild(a),e=a}var o=p(this.$props,_);o.slim=this.targetSlim,o.tag=this.targetTag,o.slotProps=this.targetSlotProps,o.name=this.to,this.portalTarget=new k({el:e,parent:this.$parent||this,propsData:o})}}else console.error("[portal-vue]: Mount Point '".concat(this.mountTo,"' not found in document"))}},beforeDestroy:function(){var e=this.portalTarget;if(this.append){var t=e.$el;t.parentNode.removeChild(t)}e.$destroy()},render:function(e){if(!this.portalTarget)return console.warn("[portal-vue] Target wasn't mounted"),e();if(!this.$scopedSlots.manual){var t=p(this.$props,S);return e(C,{props:t,attrs:this.$attrs,on:this.$listeners,scopedSlots:this.$scopedSlots},this.$slots.default)}var s=this.$scopedSlots.manual({to:this.to});return Array.isArray(s)&&(s=s[0]),s||e()}});function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component(t.portalName||"Portal",C),e.component(t.portalTargetName||"PortalTarget",k),e.component(t.MountingPortalName||"MountingPortal",A)}var x={install:T};t.default=x,t.Portal=C,t.PortalTarget=k,t.MountingPortal=A,t.Wormhole=w},3002:function(e,t,s){},3103:function(e,t,s){},3595:function(e,t,s){"use strict";s("ee74")},"381b":function(e,t,s){"use strict";const i={SHORT_TEXT:"SHORT_TEXT",NUMBER:"NUMBER",BOOLEAN:"BOOLEAN",DATE:"DATE",TIME:"TIME",DATE_TIME:"DATE_TIME",SINGLE_SELECT:"SINGLE_SELECT",TABLE:"TABLE",BARCODE:"BARCODE",OMR:"OMR",AUTO_GENERATED:"AUTO_GENERATED"};Object.freeze(i),t["a"]=i},4045:function(e,t,s){"use strict";s("1a1b")},"40f9":function(e,t,s){"use strict";s("c589")},"42fc":function(e,t,s){"use strict";s.d(t,"a",(function(){return B}));s("d9e2");function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e,t){if(!e)throw new Error(t)}function o(e){return Object.keys(e)}function r(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function n(e,t,s){var i="."+t,a=new RegExp("(\\".concat(t,")?$"));return s(e).replace(a,i)}function l(e){return"555xmlHello .  world!".trim().replace(/^([0-9,;]|(xml))+/,""),e.replace(/[^_a-zA-Z 0-9:\-\.]/g,"").replace(/^([ 0-9-:\-\.]|(xml))+/i,"").replace(/ +/g,"-")}function c(e){return Array(e+1).join(" ")}function d(e){return e.replace(/([<>&])/g,(function(e,t){switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return""}}))}function m(e,t,s){switch(t){case"txt":var i="text/plain;charset=utf-8";return s?URL.createObjectURL(new Blob([e],{type:i})):"data:,".concat(i)+encodeURIComponent(e);case"css":i="text/css;charset=utf-8";return s?URL.createObjectURL(new Blob([e],{type:i})):"data:,".concat(i)+encodeURIComponent(e);case"html":i="text/html;charset=utf-8";return s?URL.createObjectURL(new Blob([e],{type:i})):"data:,".concat(i)+encodeURIComponent(e);case"json":i="text/json;charset=utf-8";return s?URL.createObjectURL(new Blob([e],{type:i})):"data:,".concat(i)+encodeURIComponent(e);case"csv":i="text/csv;charset=utf-8";return s?URL.createObjectURL(new Blob([e],{type:i})):"data:,".concat(i)+encodeURIComponent(e);case"xls":i="text/application/vnd.ms-excel;charset=utf-8";return s?URL.createObjectURL(new Blob([e],{type:i})):"data:,".concat(i)+encodeURIComponent(e);case"xml":i="text/application/xml;charset=utf-8";return s?URL.createObjectURL(new Blob([e],{type:i})):"data:,".concat(i)+encodeURIComponent(e);default:return""}}function h(e,t,s,i){void 0===s&&(s="download"),void 0===i&&(i=!0);var a=m(e,t,i),o=document.createElement("a");o.href=a,o.download=s,o.setAttribute("style","visibility:hidden"),document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!1,view:window})),document.body.removeChild(o)}var u=function(){return u=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++)for(var a in t=arguments[s],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},u.apply(this,arguments)},p=function(e,t){var s="function"===typeof Symbol&&e[Symbol.iterator];if(!s)return e;var i,a,o=s.call(e),r=[];try{while((void 0===t||t-- >0)&&!(i=o.next()).done)r.push(i.value)}catch(n){a={error:n}}finally{try{i&&!i.done&&(s=o["return"])&&s.call(o)}finally{if(a)throw a.error}}return r};function f(e){if(!e||i(e)&&!e.length||!i(e)&&!o(e).length)return function(e){return e};var t=i(e)?e.reduce((function(e,t){var s;return u(u({},e),(s={},s[t]=t,s))}),Object.create(null)):e;return function(e){return i(e)?e.map((function(e){return r(e).reduce((function(e,s){var i=p(s,2),a=i[0],o=i[1];return a in t&&(e[t[a]]=o),e}),Object.create(null))})).filter((function(e){return o(e).length})):r(e).reduce((function(e,s){var i=p(s,2),a=i[0],o=i[1];return a in t&&(e[t[a]]=o),e}),Object.create(null))}}function v(e){var t="Invalid export data. Please provide a valid JSON";try{return"string"===typeof e?JSON.parse(e):e}catch(s){throw new Error(t)}}function y(e,t,s){void 0===t&&(t=null);var i="Invalid export data. Please provide valid JSON object";try{return JSON.stringify(e,t,s)}catch(a){throw new Error(i)}}function b(e){return e.map(r).reduce((function(t,s,i){return s.reduce((function(t,s){var a=p(s,2),o=a[0],r=a[1],n=t[o]||Array.from({length:e.length}).map((function(e){return""}));return n[i]=("string"!==typeof r?JSON.stringify(r):r)||"",t[o]=n,t}),t)}),Object.create(null))}function w(e,t){return void 0===t&&(t=function(e){return e}),t(r(e).map((function(e){var t=p(e,2),s=t[0],i=t[1];return{fieldName:s,fieldValues:i}})))}function g(e){var t=/,|"|\n/.test(e)?'"':"",s=e.replace(/"/g,'""');return"".concat(t).concat(s).concat(t)}var C={beforeTableEncode:function(e){return e},delimiter:","};function k(e,t){void 0===t&&(t={});var s=u(u({},C),t),i=s.beforeTableEncode,a=s.delimiter;if(!e.length)return"";var o=b(e),r=w(o,i),n=r.map((function(e){var t=e.fieldName;return t})).join(a)+"\r\n",l=r.map((function(e){var t=e.fieldValues;return t})).map((function(e){return e.map(g)})),c=l.reduce((function(e,t){return e.map((function(e,s){return"".concat(e).concat(a).concat(t[s])}))}));return n+c.join("\r\n")}function I(e,t){a(e.length>0);var s=b(e),i=w(s,t),o=i.map((function(e){var t=e.fieldName;return t})).join("</b></th><th><b>"),r=i.map((function(e){var t=e.fieldValues;return t})).map((function(e){return e.map((function(e){return"<td>".concat(e,"</td>")}))})),n=r.reduce((function(e,t){return e.map((function(e,s){return"".concat(e).concat(t[s])}))}));return"\n    <table>\n      <thead>\n        <tr><th><b>".concat(o,"</b></th></tr>\n      </thead>\n      <tbody>\n        <tr>").concat(n.join("</tr>\n        <tr>"),"</tr>\n      </tbody>\n    </table>\n  ")}var S={beforeTableEncode:function(e){return e}};function _(e,t){var s=u(u({},S),t).beforeTableEncode;if(!e.length)return"";var i='<html>\n  <head>\n    <meta charset="UTF-8" />\n  </head >\n  <body>\n    '.concat(I(e,s),"\n  </body>\n</html >\n");return i}function A(e){var t='<?xml version="1.0" encoding="utf-8"?><!DOCTYPE base>\n'.concat(T(e,"base"),"\n");return t}function T(e,t,s,a){void 0===s&&(s="element"),void 0===a&&(a=0);var o=l(t),n=c(a);if(null===e||void 0===e)return"".concat(n,"<").concat(o," />");var m=i(e)?e.map((function(e){return T(e,s,s,a+2)})).join("\n"):"object"===typeof e?r(e).map((function(e){var t=p(e,2),i=t[0],o=t[1];return T(o,i,s,a+2)})).join("\n"):n+"  "+d(String(e)),h="".concat(n,"<").concat(o,">\n").concat(m,"\n").concat(n,"</").concat(o,">");return h}var x={txt:"txt",css:"css",html:"html",json:"json",csv:"csv",xls:"xls",xml:"xml"};function F(e){var t=e.data,s=e.fileName,o=void 0===s?"download":s,r=e.extension,l=e.fileNameFormatter,c=void 0===l?function(e){return e.replace(/\s+/,"_")}:l,d=e.fields,m=e.exportType,u=void 0===m?"txt":m,p=e.replacer,b=void 0===p?null:p,w=e.space,g=void 0===w?4:w,C=e.processor,I=void 0===C?h:C,S=e.withBOM,T=void 0!==S&&S,x=e.beforeTableEncode,F=void 0===x?function(e){return e}:x,L=e.delimiter,P=void 0===L?",":L,$="Invalid export data. Please provide an array of objects",B="Can't export unknown data type ".concat(u,"."),N="Can't export string data to ".concat(u,".");if("string"===typeof t)switch(u){case"txt":case"css":case"html":return I(t,u,n(o,null!==r&&void 0!==r?r:u,c));default:throw new Error(N)}var M=f(d),D=M(v(t)),q=y(D,b,g);switch(u){case"txt":case"css":case"html":return I(q,u,n(o,null!==r&&void 0!==r?r:u,c));case"json":return I(q,u,n(o,null!==r&&void 0!==r?r:"json",c));case"csv":a(i(D),$);var O="\ufeff",E=k(D,{beforeTableEncode:F,delimiter:P}),R=T?O+E:E;return I(R,u,n(o,null!==r&&void 0!==r?r:"csv",c));case"xls":a(i(D),$);R=_(D,{beforeTableEncode:F});return I(R,u,n(o,null!==r&&void 0!==r?r:"xls",c));case"xml":R=A(D);return I(R,u,n(o,null!==r&&void 0!==r?r:"xml",c));default:throw new Error(B)}}F.types=x,F.processors={downloadFile:h};var L=F,P=L;const $=()=>{function e(e,t,s){if(e)try{const i=t||"exported-data",a=P.types[s||"xls"];P({data:e,fileName:i,exportType:a})}catch(i){throw new Error("Parsing failed!")}}return{exportDataFromJSON:e}};function B(e,t){if(!e)return this.$alert.info("Data not found");let s=new Date;return t||(t=`${s.getFullYear()}${s.getMonth()+1}${s.getDate()}${s.getHours()}${s.getMinutes()}${s.getSeconds()}`),$().exportDataFromJSON(e,t,null)}},4488:function(e,t,s){},"467fa":function(e,t,s){},4697:function(e,t,s){"use strict";s("d30f")},"46ab":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"progress-bar-container",style:e.containerStyle},e._l(e.progressBars,(function(e,s){return t("div",{key:s,staticClass:"progress-bar",style:{width:e.width,marginTop:0===s?"10px":"5px",marginLeft:"10px"}})})),0)},a=[],o={props:{containerHeight:{type:String,default:""},containerColor:{type:String,default:""},progressBars:{type:Array,default:()=>[]}},computed:{containerStyle(){return{height:this.containerHeight,backgroundColor:this.containerColor}}}},r=o,n=(s("f47c"),s("2877")),l=Object(n["a"])(r,i,a,!1,null,"282d0abc",null);t["a"]=l.exports},"470f":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"process-sheet"}},[t("Sheet",{attrs:{width:e.formWidth,"has-footer":!e.isCustomizedWorkflow||!e.initiateProcess,"no-padding":""},on:{input:e.closeProcessSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.headerTitle)+" ")]},proxy:!0},{key:"actions",fn:function(){return[e.isCustomizedWorkflow||"DOCUMENT"===e.workflow.initiatedBy?e._e():[e.mandatory.filledValue||e.mandatory.nonFilledValue?[t("q-circular-progress",{staticClass:"q-mr-sm",attrs:{"show-value":"","font-size":"12px",value:e.mandatoryFilling,size:"lg",thickness:.22,color:"primary","track-color":"grey-3"}},[e._v(" "+e._s(e.mandatoryFilling)+"% ")])]:e._e(),e.mandatory.filledValue?t("div",{staticClass:"chip-success q-mr-sm"},[t("div",{},[e._v(e._s(e.mandatory.filledValue)+" ready")])]):e._e(),e.mandatory.nonFilledValue?t("div",{staticClass:"chip-warning",on:{click:e.checkFormValidation}},[t("div",{},[e._v(e._s(e.mandatory.nonFilledValue)+" need to work")])]):e._e()],e.mandatoryDocument.length?[t("div",{staticClass:"chip-warning cursor-pointer",on:{click:function(t){e.attachmentSheet=!0}}},[t("div",{},[e._v(e._s(e.mandatoryDocument.length)+" document required")])])]:e._e(),e.itemModel.itemId?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.documentActionList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.processDocumentAction(s.id)}}})})),1)],1)],1):e._e(),e.formView||e.initiateProcess||0!==e.actions.length?e.initiateProcess||0!==e.actions.length?e._e():t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Details View",expression:"'Details View'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-table-column"},on:{click:function(t){e.formView=!1}}}):t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Form View",expression:"'Form View'",modifiers:{top:!0}}],staticClass:"q q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select"},on:{click:function(t){e.formView=!0}}}),e.isCustomizedWorkflow?e._e():t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:e.isMaximized?"eva-collapse":"eva-expand"},on:{click:e.toggleWidth}})]},proxy:!0},{key:"footer",fn:function(){return[e.actions.length?t("div",{staticClass:"footer row"},["inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess?t("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Save",color:"secondary"},on:{click:function(t){return e.validateRequest("Save")}}}):e._e(),e._l(e.actions,(function(s){return["Approve"===s||"Complete"===s||"Rightsize"===s?t("BaseButton",{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"positive"},on:{click:function(t){return e.validateRequest(s)}}}):"Reject"===s||"Terminate"===s||"Force Close"===s||"Decline"===s?t("BaseButton",{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"red"},on:{click:function(t){return e.validateRequest(s)}}}):"Forward"===s||s.indexOf("Reply")>-1||"Rollback"===s||"Assign"===s?t("BaseButton",{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"orange"},on:{click:function(t){return e.validateRequest(s)}}}):t("BaseButton","To Requester"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"pink"},on:{click:function(t){return e.validateRequest(s)}}}:{key:s,staticClass:"q-ml-md",attrs:{label:s},on:{click:function(t){return e.validateRequest(s)}}})]}))],2):e._e()]},proxy:!0}]),model:{value:e.processSheet,callback:function(t){e.processSheet=t},expression:"processSheet"}},[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[e.formId?t("div",{staticClass:"col"},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 115px)"}},[e.formView?t("div",{attrs:{id:"form-view"}},[e.formId&&Object.keys(e.form).length?t("RenderForm",{attrs:{"form-id":e.formId,panels:e.panels,"secondary-panels":e.secondaryPanels,"form-settings":e.formSettings,"form-model":e.formModel,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel,"workflow-model":e.workflowModel,"is-readonly":e.formEditAccess,"form-edit-controls":e.formEditControls,"readonly-controls":e.readonlyControls,"form-visibility-access":e.formVisibilityAccess,"form-secure-controls":e.formSecureControls,"enable-controls":e._enableControls,"check-list":e.checkList,"form-fields":e.formFields,"data-validation-values":e.dataValidationValues,"form-check-list":e.formCheckList,"form-upload-files":e.formUploadFiles,"has-check-form-validate":e.hasCheckFormValidate},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t},"update:workflowModel":function(t){e.workflowModel=t},"update:workflow-model":function(t){e.workflowModel=t},"update:checkList":function(t){e.checkList=t},"update:check-list":function(t){e.checkList=t},"update:formCheckList":function(t){e.formCheckList=t},"update:form-check-list":function(t){e.formCheckList=t},"update:hasCheckFormValidate":function(t){e.hasCheckFormValidate=t},"update:has-check-form-validate":function(t){e.hasCheckFormValidate=t},uploadFiles:e.getOCRResult,mandatoryControlsList:e.mandatoryControlsList,deletedFiles:e.deletedFiles}}):e._e(),e.signList.length?t("div",{staticClass:"q-pa-md",attrs:{id:"approvalSignature"}},[t("div",{staticClass:"title q-mb-sm"},[e._v("Approval Signature")]),t("BaseSeparator",{staticClass:"q-my-sm"}),t("div",{staticClass:"row"},[e._l(e.signList,(function(s){return[t("div",{key:s.id,staticClass:"col-3 q-mb-sm"},[t("img",{staticClass:"imgCenter col",attrs:{src:e.signLink(s.id)}}),t("div",{staticClass:"text row"},[t("span",{staticClass:"col-12 text-bold"},[e._v(e._s(s.stage))]),t("span",{staticClass:"col-12"},[e._v(e._s(s.createdByEmail))]),t("span",{staticClass:"col-12"},[e._v(e._s(e.$day.format(s.createdAt)))])])])]}))],2)],1):e._e(),e.userSignature?t("SignatureField",{staticClass:"q-pa-md",attrs:{label:"Signature"},model:{value:e.signImg,callback:function(t){e.signImg=t},expression:"signImg"}}):e._e()],1):t("div",{staticClass:"q-pa-md"},[e.requestFormData.length?t("div",{staticClass:"col-12",attrs:{id:"requestDetails"}},[t("div",{staticClass:"row justify-center"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row items-center"},[t("table",{staticClass:"submittedData q-mb-sm"},[t("tbody",[e.requestFormData[0].value[0].createdByName?t("tr",[t("td",{attrs:{colspan:"4"}},[e._v(" Requested By: "+e._s(e.requestFormData[0].value[0].createdByName)+" ")])]):e._e(),t("tr",[e.requestFormData[0].value[0].raisedBy?t("th",[e._v(" Requested User Email ")]):e._e(),t("th",[e._v("Requested Date")]),t("th",[e._v("Last Acted By")]),t("th",[e._v("Last Acted On")])]),t("tr",[e.requestFormData[0].value[0].raisedBy?t("td",[e._v(" "+e._s(e.requestFormData[0].value[0].raisedBy)+" ")]):e._e(),t("td",[e._v(" "+e._s(e.$day.format(e.requestFormData[0].value[0].raisedAt))+" ")]),t("td",[e._v(" "+e._s(e.requestFormData[0].value[0].transaction_createdByEmail)+" ")]),t("td",[e._v(" "+e._s(e.$day.format(e.requestFormData[0].value[0].transaction_createdAt))+" ")])])])]),t("BaseScrollbar",{attrs:{height:"calc(100vh - 275px)"}},[[t("table",{staticClass:"mainData col-12"},[e._l(e.requestFormData[0].value[0].formData.fields,(function(s,i){return[s&&"[]"!=s?["TABLE"!==e.validateType(i)?[t("tr",{key:`${i}-${s}`},[t("td",{staticClass:"tblHeader ellipsis small"},[e._v(" "+e._s(e.getLabel(i))+" ")]),t("td",{staticClass:"ellipsis"},["FILE_UPLOAD"===e.validateType(i)?[JSON.parse(s).length?t("div",e._l(JSON.parse(s),(function(i){return t("div",{key:i.fileName,staticClass:"q-mb-xs"},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"col row items-center",on:{click:function(t){return e.viewFile(i,s)}}},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(i.fileName)}}),t("span",{staticClass:"cursor-pointer text-underline text-secondary"},[e._v(e._s(i.fileName))])],1)])])})),0):e._e()]:"DATE"===e.validateType(i)?[e._v(" "+e._s(e.$day.format(s,!1))+" ")]:e.validateValue(s)?[e._v(" "+e._s(e.removeTags(s)||"-")+" ")]:[t("a",{attrs:{href:s,target:"_blank"}},[e._v(" "+e._s(s||"-")+" ")])]],2)])]:JSON.parse(s).length?[e.getLabel(i)?t("tr",{key:"trlabel-"+i},[t("td",{staticClass:"tblHeader ellipsis small",attrs:{colspan:"2"}},[t("FormFieldLabel",{key:"label-"+i,staticClass:"q-mt-sm",attrs:{label:e.getLabel(i)}})],1)]):e._e(),t("tr",{key:"trtable1-"+i},[t("td",{attrs:{colspan:"2"}},[t("BaseScrollbar",{key:"scroll-"+i,staticStyle:{"max-height":"200px"}},[t("table",{key:"table-"+i,staticClass:"sub-table q-mt-sm q-mb-sm"},[t("thead",[t("tr",e._l(e.tableValue(s)[0],(function(s,i){return t("th",{key:i},[e._v(" "+e._s(e.getLabel(i,"table"))+" ")])})),0)]),t("tbody",e._l(e.tableValue(s),(function(s,i){return t("tr",{key:i},e._l(s,(function(s,i){return t("td",{key:i},[e._v(" "+e._s(s)+" ")])})),0)})),0)])])],1)])]:e._e()]:e._e()]}))],2)]],2)],1)])])]):e._e()])])],1):e._e(),e.itemModel.itemId?t("div",{staticClass:"col"},[t("div",{staticClass:"fileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myProcessFiles",attrs:{id:"file-frame",src:e.itemLink(),frameborder:"0"}})])])]):e._e(),e.formId||e.itemModel.itemId?t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(s){return[e.checkTabAccess?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()]):e._e()]}))],2):e._e()])]),t("Sheet",{attrs:{width:"30vw","sub-actions":!(!e.selectedProcess.processId||!e.attachmentList.length),upload:"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess,"no-padding":""},on:{input:e.closeAttachmentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 15 seconds ")]):e._e(),e.selectedProcess.processId?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getAttachments()}}}):e._e()]},proxy:!0},"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess?{key:"upload",fn:function(){return[t("div",{staticClass:"hint",on:{click:function(t){e.rowIndex=null,e.$refs.attachments.click()}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),t("div",{staticClass:"title text-blue"},[e._v("UPLOAD FILES")]),t("div",{staticClass:"description"},[e._v("Click here to choose files and upload")])],1)]},proxy:!0}:null,e.selectedProcess.processId&&e.attachmentList.length?{key:"subActions",fn:function(){return[t("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:e.fileSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}}),e._v(" Select All "),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!e.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentShare}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"merge documents (only PDF)",expression:"'merge documents (only PDF)'",modifiers:{top:!0}}],attrs:{"is-disabled":!(e.selectedFileCount>1&&e.isSelectedPDF),icon:"mdi-file-document-multiple-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentMerge}})]},proxy:!0}:null],null,!0),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode?"calc(100vh - 200px)":""}},[t("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:e.uploadWflowAttachments}}),e._l(e.checkList,(function(s){return[s.name?[s.attach?t("div",{key:s.uid},[e._l(e.attachmentFilterCheckList(s.name),(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})]],2):t("div",[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e()],2),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),s.formJsonId?t("div",{staticClass:"col-auto"},[t("q-chip",{staticClass:"cursor-pointer green-hover",attrs:{outline:"",color:"green"}},[e._v(" "+e._s(e.getLabel(s.formJsonId))+" ")])],1):e._e(),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),[("inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode)&&s.createdBy===e.$store.state.session.id||e.initiateProcess?[t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Re-Upload",expression:"'Re-Upload'",modifiers:{top:!0}}],attrs:{icon:"mdi-file-upload",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){t.stopPropagation(),e.reuploadFile=s,e.reupload(s.name)}}})],1)]:e._e()]],2)])]}))],2):t("div",{key:s.uid,staticClass:"checkList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),t("div",{staticClass:"col q-ml-sm"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[e._v(" "+e._s(s.name)+" ")]),s.required?t("div",{staticClass:"col-12 q-mt-sm"},[t("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[e._v(" Required ")])],1):e._e()])]),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"col-12",on:{click:function(t){return e.attachTemplate(s.uid)}}},[t("q-chip",{staticClass:"chips primary-hover medium",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-upload-outline",color:"primary","text-color":"white"}}),e._v(" Upload ")],1)],1),s.template?t("div",{staticClass:"col-12",on:{click:function(t){return e.download(s.id)}}},[t("q-chip",{staticClass:"chips secondary-hover medium",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-download-outline",color:"secondary","text-color":"white"}}),e._v(" Download ")],1)],1):e._e()])])])]:e._e()]})),e._l(e.attachmentList,(function(s){return[e.isCheckList(s.name)?[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e(),e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)],2),s.formJsonId?t("div",{staticClass:"row q-mb-xs"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto ellipsis attachment-label"},[e._v(" "+e._s(e.getLabel(s.formJsonId))+" ")])])]),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),("inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode)&&s.createdBy===e.$store.state.session.id||e.initiateProcess?t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1):e._e()]):e._e(),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2),s.formJsonId?e._e():[t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),("inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode)&&s.createdBy===e.$store.state.session.id||e.initiateProcess?t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1):e._e()]],2)])]:e._e()]}))],2)],1)]),t("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode?"30":"0","no-padding":""},on:{input:e.closeCommentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 30 seconds ")]):e._e(),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getComments(0)}}})]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:e.commentsSheetHeight}},[e._l(e.commentsList,(function(s,i){return[t("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===e.$store.state.session.id?"me":s.createdByEmail||s.externalCommentsby,text:[s.comments],"text-html":"",sent:s.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(s),"bg-color":s.createdBy===e.$store.state.session.id?"primary-1":"secondary-1"},scopedSlots:e._u([{key:"avatar",fn:function(){return[s.embedFileList&&s.embedFileList.length?t("div",{staticClass:"file-icons"},[t("FileIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.embedFileList[0].fileName,expression:"row.embedFileList[0].fileName",modifiers:{top:!0}}],key:"Icon-"+i,staticClass:"file-icon q-mr-sm",attrs:{"mime-type":e.fileType(s.embedFileList[0].fileName)}})],1):e._e()]},proxy:!0}],null,!0)})]}))],2)],1),"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode?t("div",{staticClass:"col borderTop"},[t("div",{staticClass:"row"},[e.checkTenant()&&!e.portal?[t("div",{staticClass:"col actions"},[e.attachmentList.length&&e.fileNames.length?t("div",{staticClass:"row select-action q-pa-sm action-container"},[t("CheckboxField",{staticClass:"col-auto q-pr-sm",attrs:{label:"Add Comment to PDF"},model:{value:e.attachComment,callback:function(t){e.attachComment=t},expression:"attachComment"}}),e.attachComment?t("SelectField",{staticClass:"col field comment-attach attach-cmd",attrs:{"is-searchable":!0,options:e.fileNames},model:{value:e.selectedFileForAttach,callback:function(t){e.selectedFileForAttach=t},expression:"selectedFileForAttach"}}):e._e()],1):e._e(),e.displayInternalPublic?t("SingleChoiceField",{staticClass:"action-container",class:{"internal-public":e.attachmentList.length>0,"col q-pa-sm":!0,"internal-public-margin":e.attachComment},attrs:{options:e.commentActions,"show-options-wrapper":!1,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e()],1)]:e._e(),e.isTenantGOTOComments()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.jiraCommentActions,"options-per-line":2},model:{value:e.jiraCommentAction,callback:function(t){e.jiraCommentAction=t},expression:"jiraCommentAction"}})]:e._e()],2),t("div",{staticClass:"row text-area-action q-ml-sm q-mr-sm"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto","margin-right":"8px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm comment-actions",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm comment-actions",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])]):e._e()]),t("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(t){e.mailTransactionSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Mail Transactions ")]},proxy:!0},{key:"actions",fn:function(){return[t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 30 seconds ")]),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getMailTransactions()}}})]},proxy:!0}]),model:{value:e.mailTransactionSheet,callback:function(t){e.mailTransactionSheet=t},expression:"mailTransactionSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("div",{staticClass:"q-pl-sm"},[t("Tabs",{attrs:{tabs:e.mailTabs},model:{value:e.mailTab,callback:function(t){e.mailTab=t},expression:"mailTab"}})],1),"OUTGOING"===e.mailTab?[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[e._l(e.outgoingMails,(function(s){return[t("div",{key:"outgoing"+s.id,staticClass:"mailTransactionList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(s.subject)+" ")])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),t("div",{staticClass:"col-auto"},[e._v(e._s(s.email))])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(e.$day.format(s.createdAt,!0))+" ")])])]),t("div",{staticClass:"col-auto q-mr-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.showMailAttachments(s)}}},[s.attachmentCount?t("span",{staticClass:"badge"},[e._v(e._s(s.attachmentCount)+" ")]):e._e()]),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"resend",expression:"'resend'",modifiers:{top:!0}}],attrs:{icon:"mdi-send",color:"secondary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.resendMail(s.ezMailId)}}})],1)])])]}))],2)]:e._e(),"INCOMING"===e.mailTab?[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[e._l(e.incomingMails,(function(s){return[t("div",{key:"incoming"+s.id,staticClass:"mailTransactionList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(s.subject)+" ")])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),t("div",{staticClass:"col-auto"},[e._v(e._s(s.email))])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(e.$day.format(s.createdAt,!0))+" ")])])]),t("div",{staticClass:"col-auto q-mr-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.showMailAttachments(s)}}},[s.attachmentCount?t("span",{staticClass:"badge"},[e._v(e._s(s.attachmentCount)+" ")]):e._e()])],1)])])]}))],2)]:e._e()],2)]),t("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(t){e.mailAttachmentSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Mail Attachments ")]},proxy:!0}]),model:{value:e.mailAttachmentSheet,callback:function(t){e.mailAttachmentSheet=t},expression:"mailAttachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 200px)"}},[e._l(e.mailAttachmentList,(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openAttachmentFile(s)}}},[e._v(" "+e._s(s.name)+" ")])]),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])]}))],2)],1)]),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[e.selectedFile.formJsonId?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:e.getLabel(e.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:e._e(),t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])],2)]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.documentActionList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.documentAction(s.id)}}})})),1)],1)],1)]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myAttachmentFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])]),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.saveAction="",e.workflowFormModel={},e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[e.checkTenant()&&!e.portal?[t("div",{staticClass:"row actions advance-cmd"},[e.attachmentList.length&&e.fileNames.length?[t("CheckboxField",{staticClass:"col-auto q-pr-sm",staticStyle:{margin:"auto"},attrs:{label:"Add Comment to PDF"},model:{value:e.attachComment,callback:function(t){e.attachComment=t},expression:"attachComment"}}),e.attachComment?t("SelectField",{staticClass:"field comment-attach",attrs:{"is-searchable":!0,options:e.fileNames},on:{input:e.handleAttachComment},model:{value:e.selectedFileForAttach,callback:function(t){e.selectedFileForAttach=t},expression:"selectedFileForAttach"}}):e._e()]:e._e()],2),e.checkTenant()&&e.displayInternalPublic?t("SingleChoiceField",{staticClass:"actions q-mr-sm noborder",attrs:{options:e.commentActions,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e()]:e._e(),e.isTenantGOTOComments()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.jiraCommentActions,"options-per-line":2},model:{value:e.jiraCommentAction,callback:function(t){e.jiraCommentAction=t},expression:"jiraCommentAction"}})]:e._e(),t("BaseButton",{attrs:{label:"Post Comments",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}}),t("Modal",{attrs:{width:"40vw",height:"60vh","has-footer":""},on:{input:function(t){e.saveAction="",e.workflowFormModel={},e.processForwardModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e.processForwardGroupAction?e._e():t("span",[e._v('"'+e._s(e.selectedProcess.requestNo)+'"')]),e._v(" Process Forward")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"processForward"}},[t("MultiSelectField",{staticClass:"field",attrs:{label:"users",options:e.userList},model:{value:e.forwardUsers,callback:function(t){e.forwardUsers=t},expression:"forwardUsers"}}),t("MultiSelectField",{staticClass:"field",attrs:{label:"group",options:e.groupList},model:{value:e.forwardGroups,callback:function(t){e.forwardGroups=t},expression:"forwardGroups"}}),e.processForwardGroupAction?t("TextAreaField",{staticClass:"field q-mt-md",attrs:{placeholder:"Type a comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}}):e._e()],1)]},proxy:!0},{key:"footer",fn:function(){return[e.isTenantGOTO()?[t("BaseButton",{attrs:{label:"Assign",color:"orange"},on:{click:function(t){e.processForwardModal=!1,e.processForwardGroupAction?e.groupProcessRequest():e.processRequest(!1,!1)}}})]:[t("BaseButton",{attrs:{label:"Forward",color:"orange"},on:{click:function(t){e.processForwardModal=!1,e.processForwardGroupAction?e.groupProcessRequest():e.processRequest(!1,!1)}}})]]},proxy:!0}]),model:{value:e.processForwardModal,callback:function(t){e.processForwardModal=t},expression:"processForwardModal"}}),t("Sheet",{attrs:{width:"40vw","has-footer":""},on:{input:e.closeJiraIssueSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" JIRA - Create Issue ")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"jiraIssue",attrs:{id:"content-wrapper"}},[t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"field-wrapper"},[t("ValidationProvider",{attrs:{name:"Issue Name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{staticClass:"field",attrs:{label:"Issue Name","is-mandatory":"",error:s[0]},model:{value:e.issueName,callback:function(t){e.issueName=t},expression:"issueName"}})]}}])}),e._e(),e._e(),t("ValidationProvider",{attrs:{name:"Description",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextAreaField",{staticClass:"field",attrs:{label:"Description","is-mandatory":"",error:s[0]},model:{value:e.issueDescription,callback:function(t){e.issueDescription=t},expression:"issueDescription"}})]}}])}),e._e(),e._e(),e._e()],1)])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Create Issue",color:"primary"},on:{click:e.createJiraIssue}})]},proxy:!0}]),model:{value:e.jiraIssueSheet,callback:function(t){e.jiraIssueSheet=t},expression:"jiraIssueSheet"}}),t("MetaDataEdit",{attrs:{value:e.showMetaDataEditModal,file:e.workflow,"repository-field":e.repositoryField,"file-data":e.fileData,title:e.metaDataTitle||"Index",columns:e.columns,"modal-value":e.workflowModel,"read-only":!0,"upload-filename":e.uploadFilename,"meta-data-fields":e.metaDataModal},on:{close:e.closeMetaDataEditModal,save:e.saveMetaData}}),t("Sheet",{attrs:{width:"30vw"},on:{input:e.closeTaskSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Tasks ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Add Task",expression:"'Add Task'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-plus",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.addTask()}}})]},proxy:!0}]),model:{value:e.taskSheet,callback:function(t){e.taskSheet=t},expression:"taskSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[e._l(e.taskEntries,(function(s){return[t("div",{key:s.id,staticClass:"taskEntries"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto q-mr-md",staticStyle:{"margin-top":"3px"},on:{click:function(t){return e.viewTask(s.id)}}},[e._v(" "+e._s(s.name)+" ")]),t("q-chip",{attrs:{size:"10px",color:e.getColor(s.priority),"text-color":"white"}},[e._v(" "+e._s(s.priority)+" ")]),t("q-chip",{attrs:{size:"10px",color:e.getColor(s.status),"text-color":"white"}},[e._v(" "+e._s(s.status)+" ")])],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col-12"},[e._v("Assigned To: "+e._s(s.assigned))]),t("div",{staticClass:"col-12"},[e._v(" Start Date: "+e._s(e.$day.format(s.startDate,!1))+" "),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" End Date: "+e._s(e.$day.format(s.endDate,!1))+" ")],1)])])]}))],2)]),e.taskFormId?t("AddTask",{attrs:{value:e.addTaskSheet,"form-settings":e.addTaskForm.settings,panels:e.addTaskForm.panels,"secondary-panels":e.addTaskForm.secondaryPanels,"form-id":e.taskFormId,"repository-id":e.taskRepositoryId,"task-model":e.selectedTask,"workflow-task":!0,mode:e.taskMode},on:{close:function(t){e.addTaskSheet=!1},addEntry:e.addTaskEntry}}):e._e(),e.importExcel?t("ImportPopup",{staticClass:"row items-center q-mr-xs",attrs:{"chip-button":!0,"data-imported":e.dataImported,"form-id":String(e.masterFormId)},on:{upload:function(t){return e.$refs.input.click()},close:function(t){e.dataImported=!1}}}):e._e(),t("input",{ref:"input",staticClass:"hidden",attrs:{type:"file",accept:".csv,.xls,.xlsx"},on:{change:e.uploadFile}}),t("Confirm",{attrs:{icon:"mdi-file-alert","icon-color":"red"},on:{input:e.closeAlertModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Documents Required!")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md text-md"},[t("p",[e._v(" Are you sure you want to submit the request without attaching the required documents. ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no"},on:{click:e.closeAlertModal}}),t("BaseButton",{attrs:{label:"yes",color:"primary"},on:{click:e.proceedSubmission}})]},proxy:!0}]),model:{value:e.alertModal,callback:function(t){e.alertModal=t},expression:"alertModal"}}),t("EmailSharing",{attrs:{"repository-id":e.workflow.repositoryId,"file-list":e.selectedFileList},on:{"update:fileList":function(t){e.selectedFileList=t},"update:file-list":function(t){e.selectedFileList=t}},model:{value:e.emailSharingSheet,callback:function(t){e.emailSharingSheet=t},expression:"emailSharingSheet"}}),t("FileDetails",{attrs:{"file-data":e.fileData},model:{value:e.fileDetailsSheet,callback:function(t){e.fileDetailsSheet=t},expression:"fileDetailsSheet"}}),e.historyProcessId?t("ProcessHistory",{attrs:{"process-id":e.historyProcessId,"selected-process":e.selectedProcess},on:{close:function(t){e.historyProcessId=0}}}):e._e(),e.showFormEntryHistoryModal?t("FormEntryHistory",{attrs:{value:e.showFormEntryHistoryModal,"workflow-id":e.workflow.id,"process-id":e.selectedProcess.processId},on:{"update:value":function(t){e.showFormEntryHistoryModal=t}}}):e._e(),e.showAttachmentSheet?t("Attachments",{attrs:{value:e.showAttachmentSheet,"selected-process":e.selectedProcess,workflow:e.workflow,"selected-node":e.selectedNode,"initiate-process":e.initiateProcess,"form-check-list":e.formCheckList,"check-list":e.checkList,wform:e.wform,"repository-details":e.repositoryDetails,"workflow-model":e.workflowModel,"form-upload-files":e.formUploadFiles,"repository-field":e.repositoryField,columns:e.columns,attachments:e.attachmentList,"workflow-id":e.workflow.id},on:{"update:value":function(t){e.showAttachmentSheet=t},"update:attachments":function(t){e.attachmentList=t},attachmentCount:e.attachmentCount}}):e._e(),e.showCommentsSheet?t("Comments",{attrs:{value:e.showCommentsSheet,"selected-process":e.selectedProcess,workflow:e.workflow,"selected-node":e.selectedNode,"initiate-process":e.initiateProcess,"attachment-list":e.attachmentList,"workflow-id":e.workflow.id,"file-names":e.fileNames,comments:e.commentsList,"display-internal-public":e.displayInternalPublic},on:{"update:value":function(t){e.showCommentsSheet=t},"update:comments":function(t){e.commentsList=t},commentsCount:e.commentsCount}}):e._e()],1)},a=[],o=(s("14d9"),s("13d5"),s("7bb1")),r=s("381e"),n=s("4bc4"),l=s("1b0d"),c=s("0cdc"),d=s("eff0"),m=s("bc3a"),h=s.n(m),u=s("dd90"),p=s("a7d2"),f=s("6a70"),v=s("cade"),y=s("c3d2"),b=s("fa1f"),w=s("ee54"),g=s("869e"),C=s("6df3"),k=s("b3d1"),I=s("9234"),S=s("695e"),_=s("b94d"),A=s("0c04"),T=s("1c54"),x=s("5e23"),F=s("abe1"),L=s("8505"),P=s("98cf"),$=s("909a"),B=s("9996"),N=s("3445"),M=s("b0ba"),D=s("ec15"),q=s("bb36"),O={name:"SubWorkflowProcess",components:{ValidationObserver:o["a"],ValidationProvider:o["b"],MultiSelectField:y["a"],FileIcon:b["a"],ListItem:v["a"],Sheet:r["a"],RenderForm:n["a"],Confirm:T["a"],SignatureField:d["a"],Modal:f["a"],MetaDataEdit:w["a"],CheckboxField:g["a"],TextAreaField:C["a"],TextField:k["a"],SingleChoiceField:I["a"],TextBuilderField:S["a"],Tabs:_["a"],AddTask:A["a"],ImportPopup:c["a"],EmailSharing:x["a"],FileDetails:F["a"],ProcessHistory:L["a"],FormFieldLabel:N["a"],FormEntryHistory:M["a"],Attachments:D["a"],Comments:q["a"]},props:{workflowId:{type:Number,default:0},initiateSubWorkflowProcess:{type:Boolean,default:!1},mainWorkflowId:{type:Number,default:0},mainProcessId:{type:Number,default:0},subProcessLink:{type:String,default:""},selectedProcess:{type:Object,default:()=>{}},openSubProcess:{type:Boolean,default:!1},mainFormFields:{type:Array,default:()=>[]},mainFormModel:{type:Object,default:()=>{}},portal:{type:Boolean,default:!1},subProcessId:{type:Number,default:0}},data(){return{workflow:{},workflowList:[],initiate:!1,processSheet:!1,headerTitle:"",formModel:{},form:{},formId:"",formData:"",actions:[],processActionsAddOn:[],workflowFormModel:{},saveAction:"",commentsList:[],attachmentList:[],initiateProcess:!1,signList:[],formEditAccess:!1,formEditControls:[],readonlyControls:[],formVisibilityAccess:!0,formSecureControls:[],repositoryDetails:{},repositoryField:[],formWidth:"100vw",checkList:[],stageLevel:[],currentStep:0,commentActions:[{id:this.$nano.id(),label:"Internal",value:2},{id:this.$nano.id(),label:"Public",value:1}],commentAction:2,jiraCommentActions:[{id:this.$nano.id(),label:"This resource",value:1},{id:this.$nano.id(),label:"All resource",value:2}],jiraCommentAction:1,formFields:[],checkListRowIndex:null,requestPrefix:"",mlPrediction:"",advancedCommentsSheet:!1,advancedCommentText:"",docWarning:!1,alertModal:!1,actionRemarks:!1,actionPassword:!1,actionPasswordConfirm:!1,actionUserPassword:"",actionComments:!1,actionConfirm:!1,actionConfirmAlert:!1,showMetaDataEditModal:!1,selectedUploadFile:{},workflowModel:{},customVerify:!1,formCheckList:!1,reuploadFile:{},documentActionList:[{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline"},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline"}],scrollPosition:0,commentsLoad:null,mailTransactionLoad:null,documentLoad:null,documentLoadList:[],uploadFilename:"",filterSearchColumn:{},selectedFilterColumn:"",watchViewerClose:null,saveOnly:!1,wform:[],userSignature:!1,dataValidationValues:[],processForwardModal:!1,forwardUsers:[],forwardGroups:[],processForwardGroupAction:!1,selectedFilter:[],filterBy:[],attachmentLoad:null,signImg:"",selectAll:!1,emailSharingSheet:!1,selectedFileList:[],fileDetailsSheet:!1,fileData:[],jiraConnect:!1,jiraAccounts:[],jiraIssueSheet:!1,issueName:"",projectKey:"",issueType:"",issueDescription:"",issueEpicValue:"",issueAssignee:"",issueAssigneeUsers:[],issueDescriptionTable:!1,issueDescriptionFields:[],jiraConfirmModal:!1,issueRef:{},taskSheet:!1,itemModel:{},errorMessage:"",errorModal:!1,successModal:!1,selectedNode:"",attachmentSheet:!1,commentsSheet:!1,processId:0,tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"mail transaction",value:"MAIL",icon:"mdi-email-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0},{id:this.$nano.id(),label:"task",value:"TASK",icon:"eva-cube-outline",count:0},{id:this.$nano.id(),label:"Form Entry History",value:"FORM_ENTRY_HISTORY",icon:"mdi-file-document",count:0}],taskEntries:[],addTaskEnabled:!1,mailTab:"OUTGOING",mailTransactionSheet:!1,commentText:"",mailTransactionList:[],mailAttachmentSheet:!1,mailAttachmentList:[],fileSheet:!1,selectedFile:{},mailTabs:[{id:this.$nano.id(),label:"outgoing",value:"OUTGOING",count:0},{id:this.$nano.id(),label:"incoming",value:"INCOMING",count:0}],userList:[],groupList:[],refreshTree:!0,loadInitial:!0,customReply:!1,userReply:!1,toRequester:!1,customCloseProcessSheet:!1,approvalTypes:[{id:this.$nano.id(),label:"Approve",value:"Approved"},{id:this.$nano.id(),label:"Cancel",value:"Cancelled"}],activeViewLoad:null,hideColumns:[],columns:[],generatePDF:0,documentRequired:!1,hasSelectedProcess:0,hasSelectedWorkflow:0,taskFormId:0,taskRepositoryId:0,addTaskForm:{},addTaskSheet:!1,taskEntryId:[],taskEntryList:[],taskMode:"",selectedTask:{},importExcel:!1,masterFormId:0,dataImported:!1,sameFormFields:[],historyProcessId:0,attachComment:!1,fileNames:[],selectedFileForAttach:0,displayInternalPublic:!1,formUploadFiles:[],mandatory:{},fileControlDeleteFile:[],hasCheckFormValidate:!1,fileUploadForControl:!1,fileUploadInput:{},metaDataUpdate:!1,metaDataModal:{},metaDataTitle:"",requestFormData:[],formView:!0,showFormEntryHistoryModal:!1,showAttachmentSheet:!1,showCommentsSheet:!1}},computed:{formName(){return this.formId?this.form.settings.general.name:""},formDescription(){return this.formId?this.form.settings.general.description:""},panels(){return this.formId?this.form.panels:[]},secondaryPanels(){return this.formId?this.form.secondaryPanels:[]},formSettings(){return this.formId?this.form.settings:{}},selectedFileCount(){let e=this.attachmentList.filter(e=>e.checked).length;return e},isSelectedPDF(){let e=!0;return this.attachmentList.forEach(t=>{let s=t.name.split(".").pop();t.checked&&"pdf"!==s.toLowerCase()&&(e=!1)}),e},isMaximized(){return"100vw"===this.formWidth},_enableControls(){let e=[],t=[];return this.panels&&this.panels.forEach(s=>{if(s.fields.length){let i=s.fields.filter(e=>"SINGLE_SELECT"===e.type||"SINGLE_CHOICE"===e.type||"MULTIPLE_CHOICE"===e.type||"MULTI_SELECT"===e.type);i.length&&i.forEach(s=>{if(s.settings.validation.enableSettings&&s.settings.validation.enableSettings.length){let i=[];s.settings.validation.enableSettings.forEach(e=>{e.controls.length&&(i.push({value:e.value,childControls:e.controls}),e.controls.forEach(e=>{i.indexOf(e)<0&&t.push(e)}))}),i.length&&e.push({id:s.id,parentControls:i})}})}}),{listControls:t,controls:e}},isCustomizedWorkflow(){let e=location.origin;if("https://demo.ezofis.com"===e||"http://52.172.32.88"===e){if(1014===this.workflow.id)return!0}else if(("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&1===this.workflow.id)return!0;return!1},outgoingMails(){return this.mailTransactionList.filter(e=>"Outgoing"===e.emailType)},incomingMails(){return this.mailTransactionList.filter(e=>"Incoming"===e.emailType)},commentsSheetHeight(){return"inbox"===this.selectedNode||"payment"===this.selectedNode||"common"===this.selectedNode?this.checkCommentsOption()?this.attachmentList.length&&this.fileNames.length?this.attachComment&&this.displayInternalPublic?"calc(100vh - 240px)":this.attachComment&&!this.displayInternalPublic?"calc(100vh - 200px)":!this.attachComment&&this.displayInternalPublic?"calc(100vh - 225px)":"calc(100vh - 190px)":this.displayInternalPublic?"calc(100vh - 190px)":"calc(100vh - 150px)":"calc(100vh - 150px)":""},mandatoryDocument(){return this.checkList.filter(e=>e.required&&!e.attach)},mandatoryFilling(){return this.mandatory.filledValue&&this.mandatory.nonFilledValue?Math.floor(this.mandatory.filledValue/(this.mandatory.filledValue+this.mandatory.nonFilledValue)*100):this.mandatory.filledValue?100:0},request(){return this.selectedProcess}},watch:{workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&(this.initiateProcess,this.checkRequiredDocument())}},attachmentSheet:{immediate:!0,handler(){if(this.attachmentSheet&&this.selectedProcess.processId){if(this.attachmentList.length){let e=this.attachmentList.length-1;this.getFileData(this.attachmentList[e],"file")}this.attachmentLoad=setInterval(()=>{this.getAttachments()},15e3)}else clearInterval(this.attachmentLoad)}},commentsSheet:{immediate:!0,handler(){this.commentsSheet&&this.selectedProcess.processId?this.commentsLoad=setInterval(()=>{this.getComments(this.workflowId,this.selectedProcess.processId)},3e4):clearInterval(this.commentsLoad)}},mailTransactionSheet:{immediate:!0,handler(){this.mailTransactionSheet&&this.selectedProcess.processId?this.mailTransactionLoad=setInterval(()=>{this.getMailTransactions()},3e4):clearInterval(this.mailTransactionLoad)}},taskEntries:{immediate:!0,handler(){this.tabs.find(e=>{"TASK"===e.value&&(e.count=this.taskEntries.length)})}},workflowId:{immediate:!0,handler(){}},initiateSubWorkflowProcess:{immediate:!0,handler(){this.initiateSubWorkflowProcess&&this.getWorkflow()}},processSheet(){this.fileData=[],this.workflowModel={}},dataValidationValues:{immediate:!0,deep:!0,handler(){if(this.customVerify=!1,this.dataValidationValues.length){let e=this.dataValidationValues.filter(e=>"Matched"!==e.status&&"Verified"!==e.status);e.length&&(this.customVerify=!0)}}},customCloseProcessSheet:{deep:!0,immediate:!0,handler(){}},subProcessLink(){this.subProcessLink&&(this.selectedNode="sent",this.showLinks(this.subProcessLink))},openSubProcess:{immediate:!0,handler(){this.openSubProcess&&(this.formId="",this.formView=!1,this.selectedProcess.inbox?(this.formView=!0,this.getWorkflow()):this.getWorkflow("process"))}},selectedProcess:{deep:!0,handler(){this.selectedProcess.processId&&(this.getAttachments(this.workflowId,this.selectedProcess.processId),this.getComments(this.workflowId,this.selectedProcess.processId))}},workflowModel:{deep:!0,handler(){this.sameFormFields.forEach(e=>{e.value&&(this.workflowModel[e.name]=e.value)})}}},created(){this.getTaskForm()},methods:{isTenantArmgroup(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e||(this.commentAction=2,!1)},checkTabAccess(e){return this.portal?"ATTACHMENTS"===e||"COMMENTS"===e:"TASK"===e?this.addTaskEnabled:"VALIDATION"===e?!!this.isTenantArmgroup():"FORM_ENTRY_HISTORY"!==e||!!this.formId},reset(){this.headerTitle="",this.mandatory={},this.actions=[],this.processActionsAddOn=[],this.form={},this.formId="",this.formFields=[],this.tabs.find(e=>{e.count=0}),this.taskEntries=[],this.commentsList=[],this.attachmentList=[],this.initiateProcess=!0,this.formModel={},this.signList=[],this.formEditAccess=!1,this.formEditControls=[],this.readonlyControls=[],this.formVisibilityAccess=!0,this.formSecureControls=[],this.importExcel=!1},async getWorkflow(e){this.reset(),this.processSheet=!0,this.$store.commit("showLoadingBarSave");const{error:t,payload:s}=await l["t"].getWorkflow(this.workflowId);t?this.$alert.error(t):(this.workflow=s,this.selectedNode=e?"sent":"inbox",this.selectedProcess.inbox?await this.openProcess(!1):await this.openProcess(!e),this.$store.commit("hideLoadingBarSave"))},closeProcessSheet(){this.processSheet=!1,this.saveAction="",this.workflowFormModel={},this.requestFormData=[],this.formView=!0,this.$emit("closeProcessSheet")},getLabel(e){let t="";return Object.keys(this.form).length&&this.form.panels.forEach(s=>{if(!s.fields.length)return;let i=s.fields.find(t=>t.id===e);i&&(t=i.label?i.label:i.type)}),t},async openProcess(e=!1){if(this.getRepository(),e){let e=JSON.parse(this.workflow.flowJson),t=e.blocks.find(e=>"START"===e.type);if(console.log(t.settings.fileSettings),t.settings.fileSettings&&t.settings.fileSettings.fileCheckList.length&&(this.checkList=t.settings.fileSettings.fileCheckList,this.checkList.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1})),t){if("MANUAL"===t.settings.initiateMode){this.headerTitle=""+t.settings.label;let s=e.rules.find(e=>e.fromBlockId===t.id);s&&this.actions.push(s.proceedAction)}else"MANUAL_AUTOMATIC"===t.settings.initiateMode&&(t.settings.users.indexOf(this.$store.state.session.id)>-1||t.settings.users.indexOf("0")>-1)&&t.settings.initiateBy.indexOf("MASTER_FORM")>-1&&(this.importExcel=!0,this.masterFormId=t.settings.masterFormId);if(this.generatePDF=t.settings.generatePDF?1:0,this.documentRequired=t.settings.documentRequired||!1,t.settings.formEditAccess&&(""===t.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===t.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===t.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=t.settings.formEditControls)),t.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=t.settings.formSecureControls),t.settings.fileSettings){if(t.settings.fileSettings.fileCheckList.length){let e=t.settings.fileSettings.fileCheckList;e.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1}),this.docWarning=t.settings.fileSettings.partial,this.checkList=e}}else this.checkList=[]}}else{if(this.getFormDetails(),"inbox"===this.selectedNode||"common"===this.selectedNode||"payment"===this.selectedNode){this.formEditAccess=!1;let e=JSON.parse(this.workflow.flowJson),t=e.blocks.find(e=>e.id===this.selectedProcess.activityId);if(t){if(""===t.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===t.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===t.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=t.settings.formEditControls),t.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=t.settings.formSecureControls),e.settings.general.processNumberPrefix.indexOf("[")>-1){let t=JSON.parse(e.settings.general.processNumberPrefix);this.readonlyControls=[];let s=t.filter(e=>"formColumn"===e.key);s.length&&s.forEach(e=>{this.readonlyControls.push(e.value),this.formEditControls.indexOf(e.value)>-1&&this.formEditControls.splice(this.formEditControls.indexOf(e.value),1)})}if(t.settings.fileSettings){if(t.settings.fileSettings.fileCheckList.length){let e=t.settings.fileSettings.fileCheckList;e.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1}),this.docWarning=t.settings.fileSettings.partial,this.checkList=e}e.rules.forEach(e=>{e.fromBlockId===this.selectedProcess.activityId&&this.actions.indexOf(e.proceedAction)<0&&(this.actions.push(e.proceedAction),this.processActionsAddOn.push({action:e.proceedAction,remarks:e.remarks||!1,passwordAccess:e.passwordAccess||!1,confirm:e.confirm||!1}))})}else this.checkList=[]}}else this.formEditAccess=!0;this.initiateProcess=!1,this.getModel(this.selectedProcess.processId);let e=location.origin;("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&this.dataValidation(this.selectedProcess.processId,!1),"https://edmsuat.sobhaapps.com"===e&&55===this.workflow.id&&(this.formEditAccess=!0),this.loadProcessLinks()}this.workflow.wFormId&&(this.formId=String(this.workflow.wFormId),await this.getForm(e,this.workflow.wFormId))},async getFormDetails(){this.$store.commit("showLoadingBarPage");let e=this.selectedProcess.requestNo;const{error:t,payload:s}=await l["o"].getWorkflowData(this.selectedProcess.id,{filterBy:[{groupCondition:"",filters:[{criteria:"requestNo",condition:"IS_EQUALS_TO",value:e}]}],currentPage:1,itemsPerPage:10,mode:""}),{data:i}=s;this.$store.commit("hideLoadingBarPage");let a=i||[];if(a[0].value[0].formData){let e=Object.keys(a[0].value[0].formData.fields),t={};e.forEach(e=>{t[e]=this.validateTypeValue(a[0].value[0].formData.fields[e])}),this.requestFormData=a,this.formModel=a[0].value[0].formData.fields}t&&this.$alert.error(t)},async getRepository(){const{error:e,payload:t}=await l["p"].getRepository(this.workflow.repositoryId);e?this.$alert.error(e):(this.repositoryDetails=t,this.repositoryField=t.fields)},async getAttachments(e=0,t=0){this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=0)});let s=this.attachmentList.length;e||t||(e=this.workflow.id,t=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:i,payload:a}=await l["t"].getAttachments(e,t);if(this.$store.commit("hideLoadingBar"),i)this.$alert.error(i);else{if(a.length?(s!==a.length&&(this.attachmentList=a.map(e=>({...e,checked:!1}))),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)})):this.attachmentList=[],this.checkList.length){this.checkList.forEach(e=>{let t=this.attachmentList.filter(t=>{let s=t.name.substr(0,t.name.lastIndexOf("."));if(e.name===s||e.name===s.split("_")[0])return t});t.length?e.attach=!0:e.attach=!1});let e=location.origin;("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&(this.formCheckList=!0)}this.$emit("attachmentLength",this.attachmentList.length)}},async getForm(e){const{error:t,payload:s}=await l["g"].getForm(this.formId);if(t)this.$alert.error(t);else if(s){this.wform=s,this.form=JSON.parse(this.wform.formJson),e||"CARD"===this.form.settings.general.layout&&(this.form.settings.general.layout="TAB");let t=JSON.parse(this.wform.formJson);const i=[...t.panels,...t.secondaryPanels];if(!i.length)return;let a=[];for(const e of i)a.push(...e.fields);a.forEach(e=>{"DIVIDER"===e.type||"LABEL"===e.type||"PARAGRAPH"===e.type||!e.label&&"TABLE"!==e.type||"DISABLE"===e.settings.general.visibility||this.formFields.push({id:this.$nano.id(),label:e.label||e.type,value:e.id,type:e.type,settings:e.settings})}),this.sameFormFields=[],this.mainFormFields.forEach(e=>{let t=this.formFields.findIndex(t=>e.label===t.label);t>-1&&this.sameFormFields.push({id:this.$nano.id(),index:t,label:e.label,name:this.formFields[t].value,value:this.mainFormModel[e.value]})})}},signLink(e){return`https://appuat.ezofis.com/ezofisapi/api/workflow/signView/${this.$store.state.session.tenantId}/${this.workflow.id}/${e}`},itemLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");return"inbox"===this.selectedNode||"common"===this.selectedNode||"payment"===this.selectedNode?"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}`:"https://trial.ezofis.com"===e?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}&action=all`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&wId=${this.workflow.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.itemModel.name}&action=all`:"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}`:"https://trial.ezofis.com"===e?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}&action=download,print`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}&action=download,print`},openFile(e){if(e.loading)this.$alert.info("Please wait to complete the uploading");else{this.selectedFile=e;let t=location.origin;"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?window.open(this.fileLink()):this.fileSheet=!0}},closeAttachmentsSheet(){this.attachmentSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},closeMetaDataEditModal(){this.showMetaDataEditModal=!1,this.$refs.attachments.value=null},async showLinks(e){if("ATTACHMENTS"===e)this.showAttachmentSheet=!0;else if("COMMENTS"===e){if(this.displayInternalPublic=!1,!this.portal){let e=JSON.parse(this.workflow.flowJson),t=e.blocks.find(e=>"START"===e.type);t&&t.settings.initiateBy.indexOf("PORTAL")>-1&&(this.displayInternalPublic=!0),this.fileNames=[],this.fileNames=this.attachmentList.filter(e=>{let t=e.name.split(".").pop().toUpperCase();return"pdf"===t.toLowerCase()}).map(e=>({id:this.$nano.id(),label:e.name,value:e.id}))}this.showCommentsSheet=!0}else"HISTORY"===e&&this.selectedProcess.processId?this.historyProcessId=this.selectedProcess.processId:"PRINT"===e?this.selectedProcess.formData?window.open(`https://appuat.ezofis.com/ezofisapi/api/form/generatePdfPrint/${this.$store.state.session.tenantId}/${this.workflow.id}/${this.selectedProcess.processId}/${this.formId}/${this.selectedProcess.formData.formEntryId}/1`):this.selectedProcess.itemData&&window.open(`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedProcess.itemData.repositoryId}/${this.selectedProcess.itemData.itemId}/2`):"TASK"===e?this.taskEntries.length?this.taskSheet=!0:this.addTask():"MAIL"===e?(this.getMailTransactions(),this.mailTransactionSheet=!0):"FORM_ENTRY_HISTORY"===e&&(this.showFormEntryHistoryModal=!0)},lastActionDuration(e){const t=e.transaction_createdAt instanceof Date?e.transaction_createdAt:new Date(e.transaction_createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},validateTypeValue(e){if(e)try{var t=JSON.parse(e);if("object"===typeof t)return t}catch(s){return e}return e},validateType(e){let t="";return this.panels&&this.panels.length&&this.panels.forEach(s=>{if(!s.fields.length)return;let i=s.fields.find(t=>t.id===e);i&&(t=i.type)}),t},validateValue(e){let t=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;return!t.test(e)},async getFileData(e,t){const{error:s,payload:i}=await l["p"].getFileData({repositoryId:e.repositoryId,itemId:e.id});s?this.$alert.error(s):i&&(e.fileData?this.fileData=e.fileData:this.fileData=i,"file"!==t&&(this.fileDetailsSheet=!0))},async sendCommentsToJira(e,t,s){if(this.$store.commit("showLoadingBar"),1===this.jiraCommentAction){var i;let t=null===(i=this.formFields.find(e=>"Resource ID"===e.label))||void 0===i?void 0:i.value;e=this.selectedProcess.formData.fields[t]+","+e}e=`${this.$store.state.session.firstName} ${this.$store.state.session.lastName}: ${e}`;let a={cloudIntegrationId:this.jiraAccounts[0].id,url:this.selectedProcess.jiraIssueInfo.self,data_onpremise:{body:e},issueId:t,ezCommentId:s};const{error:o,payload:r}=await l["j"].insertJiraIssueComments(a);if(this.$store.commit("hideLoadingBar"),o){this.$alert.error("error posting comments to jira");let e=JSON.parse(o);return this.errorMessage=e.errorMessages,void(this.errorModal=!0)}console.log(r),this.jiraCommentAction=1},async uploadAttachments(e,t){if(this.selectedProcess.processId){const i=e.target.files[0],a=new FormData;a.append("workflowId",this.workflow.id),a.append("repositoryId",this.workflow.repositoryId),a.append("processId",this.selectedProcess.processId),a.append("transactionId",this.selectedProcess.transactionId),this.formData=a,t?(a.append("fields",t),this.formData=t):a.append("fields",""),a.append("file",i);let o=e.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);a.append("filename",e[0].name+"."+r),o=e[0].name+"."+r}if(!Object(u["a"])(r))return void this.$alert.info("This file format is not supported");this.$store.commit("showLoadingBar");try{const e=await h()({url:"https://appuat.ezofis.com/ezofisapi/api/workflow/attachmentWithProcessId",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:t,data:s}=e;if(200!==t||!s)throw e;this.$alert.success("Document attached"),this.documentLoad=setInterval(()=>{this.getAttachments(),clearInterval(this.documentLoad)},15e3)}catch(s){this.$alert.error("Error uploading file"),console.error(s)}this.$store.commit("hideLoadingBar"),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value="",Object.keys(this.reuploadFile).length&&(await this.attachmentDelete(this.reuploadFile),this.reuploadFile={})}else{const i=e.target.files[0],a=new FormData;a.append("file",i),a.append("repositoryId",this.workflow.repositoryId),t&&(this.fileData=JSON.parse(t),a.append("fields",t));let o=e.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);a.append("filename",e[0].name+"."+r),o=e[0].name+"."+r}else a.append("filename",o);if(!Object(u["a"])(r))return void this.$alert.info("This file format is not supported");try{const s=await h()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:n,data:l}=s;if(200!==n)throw"Invalid response";let c=JSON.parse(l);this.$alert.success("Document attached");let d=this.repositoryField.reduce((e,t)=>e.level>t.level?e:t),m=this.fileData.find(e=>e.name===d.name),u=!1;"pdf"!==r.toLowerCase()&&(u=!0,this.documentLoadList.push(Number(c.fileId)),this.documentLoad=setInterval(()=>{let e=this.attachmentList.find(e=>this.documentLoadList.indexOf(e.id)>-1);e&&(this.documentLoadList.splice(this.documentLoadList.indexOf(e.id),1),e.loading=!1),0===this.documentLoadList.length&&clearInterval(this.documentLoad)},1e4)),this.attachmentList.push({id:Number(c.fileId),name:t?m.value+"."+r:o,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:i.size,initiate:!0,uid:this.checkListRowIndex,createdBy:this.$store.state.session.id,fileData:this.fileData,repositoryId:this.workflow.repositoryId,loading:u}),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value=""}catch(s){console.error(s),this.$alert.error("error attaching file")}}},async getMailTransactions(){this.mailTransactionList=[],this.tabs.find(e=>{"MAIL"===e.value&&(e.count=0)});let e={filterBy:[]};const{error:t,payload:s}=await l["t"].getMailTransactions(this.workflow.id,this.selectedProcess.processId,e);t?this.$alert.error(t):s.length&&(this.mailTransactionList=s,this.tabs.find(e=>{"MAIL"===e.value&&(e.count=this.mailTransactionList.length)}))},checkCommentsOption(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e&&("https://app.ezofis.com"!==e&&"https://appuat.ezofis.com"!==e||2!==this.$store.state.session.tenantId||!(!Object.keys(this.selectedProcess).length||!this.selectedProcess.jiraIssueInfo.id))},async uploadWflowAttachments(e){if(this.fileUploadForControl=!1,"STATIC"===this.repositoryDetails.fieldsType){if(this.selectedUploadFile=e,this.customCheckUpload()){let t=this.formFields.find(e=>"Document No"===e.label);this.uploadFilename=t?this.workflowModel[t.value]+".pdf":e.target.files[0].name}else this.uploadFilename=e.target.files[0].name;this.showMetaDataEditModal=!0}else this.uploadAttachments(e)},customCheckUpload(){let e=location.origin;return"https://edmsuat.sobhaapps.com"===e&&(55===this.workflow.id||2092===this.workflow.id)&&0===this.attachmentList.length},checkTenant(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e||(this.commentAction=2,!1)},isTenantGOTO(){let e=location.origin;return("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e)&&2===this.$store.state.session.tenantId},isTenantGOTOComments(){if(Object.keys(this.selectedProcess).length){let e=location.origin;if(("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e)&&2===this.$store.state.session.tenantId&&this.selectedProcess.jiraIssueInfo.id)return!0}return!1},toggleWidth(){this.formWidth="100vw"===this.formWidth?"50vw":"100vw"},clearAttach(){this.selectedFileForAttach=0,this.attachComment=!1},async getComments(e=0,t=0){this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=0)}),this.commentsList=[],e||t||(e=this.workflow.id,t=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:s,payload:i}=await l["t"].getProcessComments(e,t);this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):(i.length&&(this.commentsList=i,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)})),this.$emit("commentsLength",this.commentsList.length))},async saveComment(){if(this.commentText)if(this.selectedProcess.processId){if("https://app.ezofis.com"!==origin&&"https://appuat.ezofis.com"!==origin||2!==this.$store.state.session.tenantId||!this.selectedProcess.jiraIssueInfo.id||2!==this.jiraCommentAction){const{error:e,payload:t}=await l["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:this.portal?1:this.commentAction,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,[t])}else{const{error:e,payload:t}=await l["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.commentText});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,t)}this.commentText="",this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.commentText=""},async saveAdvancedComment(){if(this.advancedCommentText){if(this.attachComment&&!this.selectedFileForAttach)return void this.$alert.warning("Select File To Attach");if(this.selectedProcess.processId){if("https://app.ezofis.com"!==origin&&"https://appuat.ezofis.com"!==origin||2!==this.$store.state.session.tenantId||!this.selectedProcess.jiraIssueInfo.id||2!==this.jiraCommentAction){const{error:e,payload:t}=await l["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:this.portal?1:this.commentAction,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t)}else{this.$store.commit("showLoadingBar");const{error:e,payload:t}=await l["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t)}this.advancedCommentText="",this.advancedCommentsSheet=!1,this.clearAttach(),this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.advancedCommentText="",this.advancedCommentsSheet=!1,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)});this.actionComments&&this.processRequest(!1,!1)}},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},fileSize(e){return Object(p["a"])(e)},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let s=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(s=2);let i="";if(Object(u["d"])(t))i="https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":e+"/PDFViewer/web/viewer.html";else{if("http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${s}`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`}{let s="";"inbox"!==this.selectedNode&&"common"!==this.selectedNode&&"payment"!==this.selectedNode||(s="&action=all");let i="";if(Object(u["d"])(t))"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?(s="",i="https://ag-appsvc04.azurewebsites.net/web/viewer.html"):i="https://trial.ezofis.com"!==e||Object(u["c"])(t)?e+"/PDFViewer/web/viewer.html":"https://trial.ezofis.com/docsviewer/index.html";else{if(Object(u["b"])(t)||"http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflow.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${s}`}}},closeTaskSheet(){this.taskSheet=!1},closeJiraIssueSheet(){this.issueName="",this.projectKey="",this.issueType="",this.issueDescription="",this.issueEpicValue="",this.issueAssignee="",this.issueDescriptionTable=!1,this.issueDescriptionFields=[],this.jiraIssueSheet=!1},loadProcessLinks(){this.getComments(),this.getAttachments(),this.getProcessSignature(),this.getMailTransactions()},async getProcessSignature(){this.signList=[];const{error:e,payload:t}=await l["t"].getProcessSignature(this.workflow.id,this.selectedProcess.processId);e?this.$alert.error(e):this.signList=t},async attachmentDelete(e){if(e.fileControl){let t=this.workflowModel[e.fieldId];if(t.length){let s=t.findIndex(t=>t.fileId===e.id);console.log(s),s>=0&&this.workflowModel[e.fieldId].splice(s,1);let i=this.formUploadFiles.findIndex(t=>t.fileId===e.id&&t.fileId===e.fileId);console.log(i),i>=0&&this.formUploadFiles.splice(s,1),e.control.length&&e.control.forEach(e=>{this.workflowModel[e]=""})}let s=this.attachmentList.findIndex(e=>e.fileControl);console.log(s),s>=0&&(this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length-1)}),this.attachmentList.splice(s,1))}else if(e.initiate){const{error:t}=await l["r"].deleteUploadedFiles([e.id]);if(t)return void this.$alert.error(t);this.attachmentList=this.attachmentList.filter(t=>t.id!==e.id),this.checkList.forEach(t=>{t.uid===e.uid&&(t.attach=!1)})}else{const{error:t}=await l["p"].fileDelete(this.workflow.repositoryId,e.id);if(t)return void this.$alert.error(t);this.getAttachments()}},async saveProcessSignature(e){let t={signBinary:this.signImg.split(",")[1],fileType:"png"};const{error:s}=await l["t"].saveProcessSignature(this.workflow.id,e.processId,e.transactionId,t);s?this.$alert.error(s):this.signImg=""},async getAppConnection(){this.jiraConnect=!1;const{error:e,payload:t}=await l["j"].getJiraConnection({filterBy:[]});e?this.$alert.error(e):t.forEach(e=>{"jira"===e.cloudName&&(this.jiraConnect=!0,this.jiraAccounts.push(e))})},async createJiraIssue(){this.issueRef={};const e=await this.$refs.form.validate();if(!e)return;let t=[],s="",i="",a=0;this.groupKey.forEach(e=>{if(e.checked)return t=[],void(s=e.name)}),""===s&&(this.workflowRequestList.forEach(e=>{e.checked&&t.push(e.transactionId)}),this.issueDescriptionTable&&(i="||Action Taken (Mandatory)",this.issueDescriptionFields.forEach(e=>{i+="||"+e}),i+="||\n",this.workflowRequestList.forEach(e=>{e.checked&&(i+="|| ",this.issueDescriptionFields.forEach(t=>{var s;let o=null===(s=this.formFields.find(e=>e.label===t))||void 0===s?void 0:s.value;"Savings"===t?e.formData.fields[o]?(i+="||"+Number(e.formData.fields[o]).toFixed(2),a+=Number(e.formData.fields[o])):i+="|| ":e.formData.fields[o]?i+="||"+e.formData.fields[o]:i+="|| "}),i+="||\n")}),i+="Potential Savings: "+a.toFixed(2)+"\n"));let o={};o=this.jiraAccounts[0].email?{fields_cloud:{fields:{summary:this.issueName,project:{key:this.projectKey},issuetype:{name:this.issueType},description:{content:[{content:[{text:this.issueDescription+i,type:"text"}],type:"paragraph"}],type:"doc",version:1}}},cloudIntegrationId:this.jiraAccounts[0].id}:{fields_onpremise:{fields:{summary:this.issueName,project:{key:this.projectKey},issuetype:{name:this.issueType},description:this.issueDescription+i,customfield_14635:{value:"No"},customfield_15136:{value:"Maintenance"}}},cloudIntegrationId:this.jiraAccounts[0].id,workflowId:this.workflow.id,transactionId:t,mlPrediction:s,assignee:this.issueAssignee?{name:this.issueAssignee}:{},filterBy:this.filterBy},this.$store.commit("showLoadingBar");const{error:r,payload:n}=await l["j"].createJiraIssue(o);if(this.$store.commit("hideLoadingBar"),r){this.$alert.warning("error creating issue in jira");let e=JSON.parse(r);return console.log(e),this.errorMessage=e.errorMessages,void(this.errorModal=!0)}if(s)this.successModal=!0;else{if(!n)return void this.$alert.warning("error creating issue in jira");this.issueRef=JSON.parse(n),this.issueRef.self=this.getJIRALink(this.issueRef),this.$alert.success("Issue Created in JIRA"),this.jiraConfirmModal=!0}this.closeJiraIssueSheet()},async insertJiraIssueComment(){var e,t;let s="",i="";if(s=null===(e=this.formFields.find(e=>"Reference ID"===e.label))||void 0===e?void 0:e.value,i=null===(t=this.formFields.find(e=>"Remarks"===e.label))||void 0===t?void 0:t.value,this.workflowFormModel[s]&&this.workflowFormModel[i]){this.$store.commit("showLoadingBar");let e={};e=this.jiraAccounts[0].email?{cloudIntegrationId:this.jiraAccounts[0].id,url:this.workflowFormModel[s],data_cloud:{body:this.workflowFormModel[i]}}:{cloudIntegrationId:this.jiraAccounts[0].id,url:this.workflowFormModel[s],data_onpremise:{body:this.workflowFormModel[i]}};const{error:t,payload:a}=await l["j"].insertJiraIssueComments(e);if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);console.log(a)}},async getJiraUsers(){this.issueAssigneeUsers=[];const{error:e,payload:t}=await l["j"].getJiraUsers({cloudIntegrationId:this.jiraAccounts[0].id});e?this.$alert.error(e):t.length&&t.forEach(e=>{this.issueAssigneeUsers.push({id:e.key,label:e.displayName,value:e.name})})},validateRequest(e){this.saveAction=e,this.itemModel.itemId&&this.processRequest()},async processRequest(e=!0,t=!0){if(e){let e=location.origin;if(("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e)&&2===this.$store.state.session.tenantId&&"Assign"===this.saveAction&&this.internalForward.proceed)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0);if("Forward"===this.saveAction&&this.internalForward.proceed)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0)}if(t){let e=this.processActionsAddOn.find(e=>e.action===this.saveAction);if(e&&Object.keys(e).length){if(this.actionRemarks=e.remarks,this.actionPassword=e.passwordAccess,this.actionConfirm=e.confirm,this.actionPassword)return void(this.actionPasswordConfirm=!0);if(this.actionRemarks)return this.actionComments=!0,void(this.advancedCommentsSheet=!0);if(this.actionConfirm)return void(this.actionConfirmAlert=!0)}}let s={},i=location.origin;this.userReply&&this.saveAction.indexOf("Reply")>-1?this.saveAction="UserReply":this.toRequester&&"To Requester"===this.saveAction&&(this.saveAction="ToInitiator"),this.customReply&&this.saveAction.indexOf("Reply")>-1&&(this.saveAction="Reply",this.forwardUsers.push(this.selectedProcess.transaction_createdBy));let a=[];this.formFields.forEach(e=>{if("FILE_UPLOAD"===e.type&&this.workflowModel[e.value]){let t=[];this.workflowModel[e.value].forEach(e=>{e.fileId&&t.push(e.fileId)}),t.length&&a.push({jsonId:e.value,fileIds:t}),delete this.workflowFormModel[e.value]}}),this.formId?("https://app.ezofis.com"!==i&&"https://appuat.ezofis.com"!==i||2!==this.$store.state.session.tenantId||"Rollback"!==this.saveAction?"http://demo.ezofis.com"!==i&&"http://52.172.32.88"!==i||6===this.workflow.id&&this.forwardUsers.push(this.selectedProcess.transaction_createdBy):1===this.workflow.id&&this.forwardUsers.push(this.selectedProcess.transaction_createdBy),s={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction||"CustomVerify"===this.saveAction?"":this.saveAction,formData:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,fields:this.workflowFormModel,formUpload:a},userIds:this.forwardUsers,groupIds:this.forwardGroups}):this.itemModel&&(s={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction?"":this.saveAction,formData:{},userIds:this.forwardUsers,groupIds:this.forwardGroups}),this.saveAction="",this.workflowFormModel={},this.saveOnly||this.$store.commit("showLoadingBarSave");const{error:o}=await l["t"].processTransaction(s);this.saveOnly||this.$store.commit("hideLoadingBarSave"),o?this.$alert.error(o):(this.signImg&&await this.saveProcessSignature(this.selectedProcess),this.saveOnly?this.saveOnly=!1:(""===s.review?this.$alert.info(this.selectedProcess.requestNo+" data saved, awaiting your action to submit"):s.review.toLowerCase().indexOf("reject")>-1?this.$alert.danger(this.selectedProcess.requestNo+" Request Rejected Successfully"):this.$alert.success(this.selectedProcess.requestNo+" Request Processed"),this.forwardUsers=[],this.forwardGroups=[],this.customReply=!1,this.userReply=!1,this.toRequester=!1,this.closeProcessSheet()),this.fileControlDeleteFile.length&&(this.fileControlDeleteFile.forEach(e=>{this.fileControlDeletedFile(e)}),this.fileControlDeleteFile=[]))},checkRequiredDocument(){if("Save"===this.saveAction||"Force Close"===this.saveAction)this.proceedSubmission();else{if(this.documentRequired&&0===this.attachmentList.length)return this.$alert.warning("A minimum of one document is required for submission"),this.saveAction="",void(this.workflowFormModel={});let e=this.checkList.filter(e=>e.required&&!e.attach);e.length?this.docWarning?this.alertModal=!0:(this.$alert.warning("Mandatory documents required"),this.saveAction="",this.workflowFormModel={}):this.proceedSubmission()}},proceedSubmission(){this.alertModal=!1,this.initiateProcess?this.initiateRequest():this.processRequest()},closeAlertModal(){this.alertModal=!1,this.saveAction="",this.workflowFormModel={}},getJiraIssueInfo(e){if(e.jiraIssueInfo.id)return{"Ref# Id":e.jiraIssueInfo.id,Key:e.jiraIssueInfo.key,Link:e.jiraIssueInfo.self?this.getJIRALink(e.jiraIssueInfo):"",Assignee:e.jiraIssueInfo.assignee,"Issue Status":e.jiraIssueInfo.issueStatus}},async groupProcessRequest(){let e=[],t="";this.workflowRequestList.forEach(t=>{t.key===this.groupActionKey&&t.checked&&e.push(t.transactionId)}),this.groupKey.forEach(s=>{if(s.checked)return e=[],void(t=s.name)});let s={workflowId:this.workflow.id,transactionId:e,review:"Save"===this.saveAction?"":this.saveAction,fields:this.workflowFormModel,mlPrediction:t,comments:this.commentText,userIds:this.forwardUsers,groupIds:this.forwardGroups,filterBy:this.filterBy};const{error:i}=await l["t"].groupRequestAction(s);this.$store.commit("hideLoadingBar"),i?this.$alert.error(i):(await this.insertJiraIssueComment(),this.saveAction="",this.workflowFormModel={},this.forwardUsers=[],this.forwardGroups=[],this.$alert.success("Group Request Processed"),this.closeRequestActionModal(),this.$emit("refresh",this.workflow.id))},async initiateRequest(){let e=[];this.attachmentList.length&&this.attachmentList.forEach(t=>{e.push(t.id)});let t=[];this.formFields.forEach(e=>{if("FILE_UPLOAD"===e.type&&this.workflowModel[e.value]){let s=[];this.workflowModel[e.value].forEach(e=>{e.fileId&&s.push(e.fileId)}),s.length&&t.push({jsonId:e.value,fileIds:s}),delete this.workflowFormModel[e.value]}});let s={workflowId:this.workflow.id,review:"Save"===this.saveAction?"":this.saveAction,comments:this.commentsList,formData:{formId:this.formId,fields:this.workflowFormModel,formUpload:t},fileIds:e,task:this.taskEntryId,hasFormPDF:this.generatePDF,prefix:this.requestPrefix,mlPrediction:this.mlPrediction};this.$store.commit("showLoadingBarSave");const{error:i,payload:a}=await l["t"].processTransaction(s);this.$store.commit("hideLoadingBarSave"),this.saveAction="",this.workflowFormModel={},this.alertModal=!1,i?this.$alert.error(i):(this.signImg&&await this.saveProcessSignature(a),this.$alert.success(a.requestNo+" Request Initiated"),this.mainProcessId?this.addSubWorkflowProcess(a.processId):this.$emit("update:subProcessId",a.processId),this.closeProcessSheet())},saveMetaData(e){let t=[];if(this.repositoryField.forEach(s=>{t.push({name:s.name,value:e[s.name],type:s.dataType})}),t.forEach(e=>{let t=this.formFields.find(t=>Object(B["a"])(t.label)===Object(B["a"])(e.name));t&&e.value&&(this.workflowModel[t.value]=e.value)}),this.fileUploadForControl){this.metaDataModal=e;let s=this.fileUploadInput;this.uploadFilesFromForm(s.files,s.control,s.fieldId,JSON.stringify(t))}else this.uploadAttachments(this.selectedUploadFile,JSON.stringify(t))},attachTemplate(e){this.checkListRowIndex=e,this.$refs.attachments.click()},attachmentFilterCheckList(e){return this.attachmentList.filter(t=>t.name.substring(0,t.name.lastIndexOf("."))===e||t.name.substring(0,t.name.lastIndexOf(".")).split("_")[0]===e)},isCheckList(e){let t=this.checkList.filter(t=>t.name===e.substring(0,e.lastIndexOf("."))||t.name===e.substring(0,e.lastIndexOf(".")).split("_")[0]);return!t.length},showMailAttachments(e){this.mailAttachmentList=[];let t=e.attachmentJson.split(",");t.forEach(t=>{let s=t.split("\\").pop();this.mailAttachmentList.push({id:this.$nano.id(),mailId:e.id,name:s,createdAt:e.createdAt})}),this.mailAttachmentSheet=!0},openAttachmentFile(e){let t=`https://appuat.ezofis.com/ezofisapi/api/client/viewAttachment/${this.$store.state.session.tenantId}/${e.mailId}/${e.name}`;window.open(t,"_blank")},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},async getTaskForm(){this.taskFormList=[],this.addTaskEnabled=!1;const{error:e,payload:t}=await l["g"].getForms({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"type",condition:"IS_EQUALS_TO",value:"Task",dataType:""}],groupCondition:""}],itemsPerPage:50,currentPage:1});if(e)return void this.$alert.error(e);const{data:s}=t;s.length&&s[0].value.length&&(this.addTaskEnabled=!0,s[0].value.forEach(e=>{this.taskFormList.push({id:e.id,label:e.name,value:e.id,repositoryId:e.repositoryId,formJson:e.formJson})}),this.taskFormList.length&&1===this.taskFormList.length&&(this.taskFormId=this.taskFormList[0].id,this.taskRepositoryId=this.taskFormList[0].repositoryId,this.addTaskForm=JSON.parse(this.taskFormList[0].formJson)))},async getTaskFormEntry(e,t){const{error:s,payload:i}=await l["g"].getFormEntry(e,t);if(s)this.$alert.error(s);else if(i.length){const e=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let t=[];for(const i of e)t.push(...i.fields);let s="",a="",o="",r="",n="",l="";t.forEach(e=>{switch(e.label){case"Task Name":s=i[0][e.id];break;case"Task Assign":a=i[0][e.id];break;case"Start Date":o=i[0][e.id];break;case"End Date":r=i[0][e.id];break;case"Priority":n=i[0][e.id];break;case"Task Status":l=i[0][e.id];break}}),this.taskEntries.push({id:i[0].itemid,name:s,assigned:a,startDate:o,endDate:r,priority:n,status:l})}},async getTaskList(){this.taskEntries=[];const{error:e,payload:t}=await l["t"].getTaskEntries(this.selectedWorkflow.id,this.selectedProcess.processId,{filterBy:[{filters:[{criteria:"createdBy",condition:"IS_EQUALS_TO",value:this.$store.state.session.id}]}]});if(e)this.$alert.error(e);else if(t.length){const e=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let s=[];for(const t of e)s.push(...t.fields);this.taskList=t,t.forEach(e=>{let t="",i="",a="",o="",r="",n="";s.forEach(s=>{switch(s.label){case"Task Name":t=e.entryInfo[0][s.id];break;case"Task Assign":i=e.entryInfo[0][s.id];break;case"Start Date":a=e.entryInfo[0][s.id];break;case"End Date":o=e.entryInfo[0][s.id];break;case"Priority":r=e.entryInfo[0][s.id];break;case"Task Status":n=e.entryInfo[0][s.id];break}}),this.taskEntries.push({id:e.entryInfo[0].itemid,name:t,assigned:i,startDate:a,endDate:o,priority:r,status:n})})}},async insertTaskEntry(e,t){const{error:s}=await l["t"].insertTaskEntry({workflowId:this.selectedWorkflow.id,processId:this.selectedProcess.processId,transactionId:this.selectedProcess.transactionId,wFormId:e,formEntryId:t});s?this.$alert.error(s):this.getTaskList()},addTaskEntry(e,t){this.selectedProcess.processId?this.insertTaskEntry(e,t):(this.taskEntryId.push({formId:e,formEntryId:t}),this.getTaskFormEntry(e,t))},addTask(){this.selectedTask={},this.taskMode="NEW",this.addTaskSheet=!0},viewTask(e){let t=this.taskList.filter(t=>t.formEntryId===e);t.length&&(this.selectedTask=t[0].entryInfo[0],this.selectedTask={id:t[0].formEntryId,...t[0].entryInfo[0]}),this.taskMode="EDIT",this.addTaskSheet=!0},removeTags(e){return e?e.replace(/(<([^>]+)>)/gi,""):""},tableValue(e){return e?JSON.parse(e):[]},async uploadFile(e){const t=e.target.files[0];if("text/csv"===t.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===t.type||"application/vnd.ms-excel"===t.type){const i=new FormData;i.append("formId",this.masterFormId),i.append("file",t);try{this.$store.commit("showLoadingBarSave");const e=await h()({url:"https://appuat.ezofis.com/ezofisapi/api/form/uploadMasterFile",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}});this.$store.commit("hideLoadingBarSave");const{status:t,data:s}=e;if(200!==t||!s)throw e;this.$alert.success("Data imported successfully")}catch(s){this.$alert.error("Error uploading file"),console.error(s)}this.dataImported=!0,e.target.value=""}else this.$alert.error("Please upload a csv/excel file")},async addSubWorkflowProcess(e){let t={mainWorkflowId:this.mainWorkflowId,subWorkflowId:this.workflowId,mainProcessId:this.mainProcessId,subProcessId:e,subProcessStatus:0,review:""};const{error:s}=await l["t"].addSubWorkflow(t);s?this.$alert.error(s):this.updateSubWorkflowProcess()},getModel(e){if(this.formModel={},this.itemModel={},console.log(this.selectedProcess.processId,e,this.selectedProcess.id,this.workflow.id),this.selectedProcess.processId==e&&this.selectedProcess.id==this.workflow.id)if(this.headerTitle=`${this.selectedProcess.requestNo} - ${this.selectedProcess.stageName}`,this.selectedProcess.formData){let e=Object.keys(this.selectedProcess.formData.fields),t={};e.forEach(e=>{t[e]=this.validateTypeValue(this.selectedProcess.formData.fields[e])}),this.formModel=t}else this.selectedProcess.itemData&&(this.itemModel=this.selectedProcess.itemData)},async dataValidation(e,t=!0){const{error:s,payload:i}=await l["d"].armgroupMLValidation({filterBy:[{filters:[{criteria:"processId",condition:"IS_EQUALS_TO",value:e}],groupCondition:""}],mode:"BROWSE"});s?this.$alert.error(s):i.length?(this.dataValidationValues=i,t&&(this.dataValidationModal=!0)):(this.dataValidationValues=[],t&&this.$alert.info("Data not found"))},async documentMerge(){let e=[];this.attachmentList.forEach(t=>{let s=t.name.split(".").pop();t.checked&&"pdf"===s.toLowerCase()&&e.push(t.id)});let t={ids:e};const{error:s}=await l["t"].documentMerge(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,this.workflow.repositoryId,t);s?this.$alert.error(s):this.$alert.success("Document merge process initiated")},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(e=>{e.checked&&this.selectedFileList.push({id:e.id,name:e.name})}),this.emailSharingSheet=!0},fileMenuAction(e,t){this.selectedFile=e,this.documentAction(t,!0)},fileSelectAll(){this.attachmentList=this.attachmentList.map(e=>({...e,checked:this.selectAll}))},documentAction(e,t){if("Email_Sharing"===e);else if("Print"===e){if(this.selectedFile.name)if(t){let e="";if(this.selectedFile.initiate){let t=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(t=2),e=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${t}/1`}else e=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(e,"_blank")}else{let e=this.selectedFile.name.split(".").pop();Object(u["d"])(e)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myAttachmentFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===e){let e="";if(this.selectedFile.initiate){let t=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(t=2),e=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${t}/2`}else e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(e,"_blank")}},async filePrintSession(){const{error:e}=await l["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});e&&this.$alert.error(e)},async updateSubWorkflowProcess(){const{error:e,payload:t}=await l["q"].updateSubWorkflowProcess(this.mainWorkflowId,this.$store.state.session.tenantId,this.workflowId);e?this.$alert.error(e):console.log(t)},async uploadFilesFromForm(e,t,s,i){this.formUploadFiles=[];const a=new FormData;let o=[];if(t&&t.length&&t.forEach(e=>{let t=this.formFields.find(t=>t.value===e);t&&o.push(`${t.label}, ${t.type}`)}),e.length){for(let t of e)if(t.name&&!t.error){a.append("repositoryId",this.workflow.repositoryId),a.append("file",t),a.append("filename",t.name),o.length&&a.append("formFields",JSON.stringify(o)),i?a.append("fields",i):a.append("fields","");try{const e=await h()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"},onUploadProgress:function(e){let i=Math.round(100*e.loaded/e.total),a=this.workflowModel[s].findIndex(e=>e.name===t.name);a>=0&&(this.$set(this.workflowModel[s][a],"uploadedPercentage",0),this.workflowModel[s][a].uploadedPercentage=i)}.bind(this)}),{status:i,data:o}=e;if(200!==i)throw"Invalid response";t.createdAt=this.$day.newDateTime(),t.createdBy=this.$store.state.session.email;let r=JSON.parse(o);t.fileId=r.fileId,t.fieldId=s}catch(r){console.error(r),this.$alert.error("error attaching file")}}let n=Array.from(e);this.formUploadFiles=[];for(let e of n)if(e.name){const t=await Object(P["a"])(e);this.formUploadFiles.push({name:e.name,size:e.size,file:t,fileId:e.fileId,createdBy:e.createdBy,createdAt:e.createdAt,workflowId:this.selectedProcess.id,processId:this.selectedProcess.processId,fieldId:e.fieldId})}t.forEach(e=>{let t=this.readonlyControls.findIndex(t=>t===e);t>=0&&this.readonlyControls.splice(t,1)}),this.$store.commit("hideLoadingBarSave")}},mandatoryControlsList(e){this.mandatory=e},deletedFiles(e){this.fileControlDeleteFile.push(e)},async fileControlDeletedFile(e){this.$store.commit("showLoadingBar");let t=[];e.forEach(e=>{e.id&&t.push(e.id)});let s={ids:t,formInfo:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,jsonId:e[0].jsonId}};const{error:i}=await l["p"].fileControlDeleteFile(this.workflow.repositoryId,s);this.$store.commit("hideLoadingBar"),i&&this.$alert.error(i)},async checkFormValidation(){this.hasCheckFormValidate=!0},async getOCRResult(e,t,s){const i=new FormData;let a=[];if(t&&t.length){if(t.forEach(e=>{this.readonlyControls.push(e)}),t.forEach(e=>{let t=this.formFields.find(t=>t.value===e);t&&a.push(`${t.label}, ${t.type}`)}),e.length){for(let t of e){if(t.name&&!t.error){i.append("repositoryId",this.workflow.repositoryId),i.append("file",t),a.length&&i.append("formFields",JSON.stringify(a));try{const e=await h()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/uploadforStaticMetadata",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"},onUploadProgress:function(e){let i=Math.round(100*e.loaded/e.total),a=this.workflowModel[s].findIndex(e=>e.name===t.name);a>=0&&(this.$set(this.workflowModel[s][a],"uploadedPercentage",0),100!==i&&(this.workflowModel[s][a].uploadedPercentage=i))}.bind(this)}),{status:a,data:o}=e;if(200!==a)throw"Invalid response";let r=Object($["a"])(o,this.$store.state.identity.key,this.$store.state.identity.iv),n=JSON.parse(r),l=JSON.parse(n),c=JSON.parse(l);Array.isArray(c)&&c.forEach(e=>{let t=this.formFields.find(t=>t.label===e.name);t&&e.value&&(this.workflowModel[t.value]=e.value)})}catch(o){console.error(o),this.$alert.error("error on get ocr result")}}this.workflowModel[s].findIndex(e=>e.name===t.name)}this.$store.commit("hideLoadingBarSave"),this.uploadFileForControl(e,t,s)}}else this.uploadFileForControl(e,t,s)},async uploadFileForControl(e,t,s){if(this.fileUploadInput={files:e,control:t,fieldId:s},"STATIC"===this.repositoryDetails.fieldsType){if(this.fileUploadForControl=!1,this.customCheckUpload()){let e=this.formFields.find(e=>"Document No"===e.label);e&&(this.uploadFilename=this.workflowModel[e.value]+".pdf")}this.fileUploadForControl=!0,this.showMetaDataEditModal=!0}else this.uploadFilesFromForm(e,t,s)},async showHistoryStepper(e,t){console.log("called");const{error:s,payload:i}=await l["t"].processHistory(t,e);s?this.$alert.error(s):i.length&&(this.stageLevel=[],this.currentStep=0,i.forEach(e=>{if(2!==e.actionStatus)if(0===this.stageLevel.filter(t=>t.id===e.activityId).length)this.stageLevel.push({id:e.activityId,label:e.stage,status:e.status}),((e.actionUser||e.subWorkflowHistory)&&e.status&&"Forward"!==e.status||null===e.actionUser&&!e.subWorkflowHistory)&&(this.currentStep+=1);else if(e.status)this.stageLevel.filter(t=>t.id===e.activityId&&t.status!==e.status).length?this.currentStep+=1:this.currentStep-=1;else{let t=this.stageLevel.findIndex(t=>t.id===e.activityId);t>-1&&(this.stageLevel.splice(t,this.stageLevel.length-t),this.stageLevel.push({id:e.activityId,label:e.stage,status:e.status}),e.actionUser&&e.status&&"Forward"!==e.status||null===e.actionUser?this.currentStep=t+1:this.currentStep=t)}}))},attachmentCount(e){this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=e)})},commentsCount(e){this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=e)})}}},E=O,R=(s("e98d"),s("5ab0"),s("2877")),V=s("58ea"),z=s("4e73"),j=s("b047"),U=s("cb32"),W=s("8169"),J=s("93dc"),H=s.n(J),G=Object(R["a"])(E,i,a,!1,null,"5b96b9ec",null);t["a"]=G.exports;H()(G,"components",{QCircularProgress:V["a"],QMenu:z["a"],QChip:j["a"],QAvatar:U["a"],QChatMessage:W["a"]})},4759:function(e,t,s){},"4d38":function(e,t,s){},"4ddc":function(e,t,s){},5042:function(e,t,s){},"50ff":function(e,t,s){},5132:function(e,t,s){"use strict";var i=s("2250"),a=s("4dc8");function o(e,t){t=Object(i["a"])(t,e);var s=0,o=t.length;while(null!=e&&s<o)e=e[Object(a["a"])(t[s++])];return s&&s==o?e:void 0}t["a"]=o},"55ff":function(e,t,s){"use strict";s("9db8")},5812:function(e,t,s){"use strict";s("62f0")},"5ab0":function(e,t,s){"use strict";s("a945")},"5b5f":function(e,t,s){"use strict";s("675d")},"5d0b":function(e,t,s){},"5e23":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,"no-padding":!0,"has-footer":"",width:"650px"},on:{input:function(t){return e.$emit("input",!1)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Document Sharing By Email")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"document-sharing-details"}},[t("Tabs",{staticClass:"tabs",attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),t("BaseScrollbar",{attrs:{height:"calc(100vh - 170px)"}},[t("div",{staticClass:"q-pa-md"},[t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"field-wrapper"},[t("ValidationProvider",{attrs:{name:"to",rules:{required:!0,email:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("MultiSelectField",{staticClass:"q-mb-sm",attrs:{label:"to","is-mandatory":"","new-option":"",error:s[0]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})]}}])}),t("ValidationProvider",{attrs:{name:"subject",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{staticClass:"q-mb-sm",attrs:{label:"subject","is-mandatory":"",error:s[0]},model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}})]}}])}),"attach link"===e.tab?[t("div",{staticClass:"row"},[t("div",{staticClass:"col-6 q-pr-sm"},[t("ValidationProvider",{attrs:{name:"Expiry from Date",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateField",{staticClass:"q-mb-sm",attrs:{label:"Expiry from Date","is-mandatory":"",error:s[0],"minimum-validation":!0},model:{value:e.fromDate,callback:function(t){e.fromDate=t},expression:"fromDate"}})]}}],null,!1,714078504)})],1),t("div",{staticClass:"col-6 q-pl-sm"},[t("ValidationProvider",{attrs:{name:"Expiry to Date",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateField",{staticClass:"q-mb-sm",attrs:{label:"Expiry to Date","is-mandatory":"",error:s[0],"minimum-validation":!0},model:{value:e.toDate,callback:function(t){e.toDate=t},expression:"toDate"}})]}}],null,!1,738413864)})],1)])]:e._e(),e._l(e.fileList,(function(s){return[t("q-chip",{key:s.id,staticClass:"chips secondary-hover cursor-pointer",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{attrs:{icon:"mdi-file",color:"secondary","text-color":"white"},on:{click:function(t){return e.remove(s.id)}}}),e._v(" "+e._s(s.name)+" "),t("q-avatar",{staticClass:"close-icon",attrs:{icon:"mdi-close","text-color":"red"},on:{click:function(t){return e.remove(s.id)}}})],1)]})),t("TextBuilderField",{model:{value:e.body,callback:function(t){e.body=t},expression:"body"}})],2)])],1)])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:function(t){return e.$emit("input",!1)}}}),t("BaseButton",{attrs:{label:"send"},on:{click:e.documentShare}})]},proxy:!0}])})},a=[],o=(s("14d9"),s("7bb1")),r=s("381e"),n=s("b94d"),l=s("b3d1"),c=s("53c1"),d=s("c3d2"),m=s("695e"),h=s("1b0d"),u={name:"EmailSharing",components:{Sheet:r["a"],ValidationObserver:o["a"],ValidationProvider:o["b"],TextField:l["a"],Tabs:n["a"],DateField:c["a"],MultiSelectField:d["a"],TextBuilderField:m["a"]},props:{value:{type:Boolean,default:!1},repositoryId:{type:Number,default:0},fileList:{type:Array,default:()=>[]}},data(){return{tab:"attach file",tabs:[{id:this.$nano.id(),label:"attach file",value:"attach file"},{id:this.$nano.id(),label:"attach link",value:"attach link"}],email:[],subject:"",body:"",fromDate:"",toDate:"",minimumFromDate:""}},created(){const e=new Date,t=e.toISOString().split("T")[0];this.minimumFromDate=t},methods:{clearFields(){this.tab="attach file",this.email=[],this.subject="",this.body="",this.fromDate="",this.toDate=""},remove(e){if(this.fileList.length>1){let t=this.fileList.filter(t=>t.id!=e);this.$emit("update:fileList",t)}else this.$alert.warning("Minimum one document is required")},async documentShare(){const e=await this.$refs.form.validate();if(!e)return;let t=[];if(this.fileList.forEach(e=>{t.push(e.id)}),"attach file"===this.tab){let e={repositoryId:this.repositoryId,itemIds:t,toAdd:this.email.toString(),subject:this.subject,body:this.body};const{error:s}=await h["k"].documentShare(e);if(s)return void this.$alert.error(s)}else if("attach link"===this.tab){if(this.toDate<this.fromDate)return void this.$alert.warning("ToDate Is Must Be Greater Than Or Equal To FromDate");let e={toAddress:this.email.toString(),subject:this.subject,body:this.body,expiryFromDate:this.fromDate,expiryTodate:this.toDate,repositoryId:this.repositoryId,itemIdArray:t};const{error:s}=await h["k"].documentShareLink(e);if(s)return void this.$alert.error(s)}this.$alert.success("Initiated Document Sharing by Email"),this.clearFields(),this.$emit("input",!1)}}},p=u,f=(s("5fab"),s("2877")),v=s("b047"),y=s("cb32"),b=s("93dc"),w=s.n(b),g=Object(f["a"])(p,i,a,!1,null,"2c37c0ea",null);t["a"]=g.exports;w()(g,"components",{QChip:v["a"],QAvatar:y["a"]})},"5f3d":function(e,t,s){},"5fab":function(e,t,s){"use strict";s("467fa")},"626d":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("Modal",{attrs:{value:e.value,"is-header":!1,"has-footer":!0,width:"60vw",height:"80vh"},on:{input:function(t){return e.$emit("input")}},scopedSlots:e._u([{key:"default",fn:function(){return[e.summarizeView?[t("div",{staticClass:"footer-modal q-pa-sm"},[t("BaseIcon",{attrs:{name:"mdi-creation",color:"secondary"}}),t("span",{staticClass:"footer-text"},[e._v("Recommended Action:")]),e._v(" "+e._s(e.summarizingData.description)+" ")],1),t("div",{staticClass:"q-pt-md"},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 320px)"}},[t("table",[t("tbody",[e._l(e.summarizingData.data,(function(s,i){return["string"===typeof s?[t("tr",{key:i},[t("td",{staticClass:"tablekey"},[e._v(e._s(i))]),t("td",{staticClass:"tablevalue"},[e._v(e._s(s))])])]:"object"===typeof s?[Array.isArray(s)?[t("tr",{key:i},[t("td",{staticClass:"tablekey",staticStyle:{color:"#643094"},attrs:{colspan:"2"}},[e._v(" "+e._s(i)+" ")])]),t("tr",{key:i},[t("td",{attrs:{colspan:"2"}},[t("table",{staticClass:"sub-table"},[t("thead",[t("tr",e._l(s[0],(function(s,i){return t("th",{key:i,staticClass:"tablevalue",staticStyle:{color:"#00bcd4"}},[e._v(" "+e._s(i)+" ")])})),0)]),t("tbody",e._l(s,(function(s,i){return t("tr",{key:i},e._l(s,(function(s,i){return t("td",{key:i,staticClass:"tablevalue"},[e._v(" "+e._s(s)+" ")])})),0)})),0)])])])]:[t("tr",{key:i},[t("td",{staticClass:"tablekey",staticStyle:{color:"#643094"},attrs:{colspan:"2"}},[e._v(" "+e._s(i)+" ")])]),e._l(s,(function(s,i){return["string"===typeof s?[t("tr",{key:i},[t("td",{staticClass:"tablekey"},[e._v(e._s(i))]),t("td",{staticClass:"tablevalue"},[e._v(e._s(s))])])]:"object"===typeof s?[t("tr",{key:i},[t("td",{staticClass:"tablekey",staticStyle:{color:"#f49d3a"},attrs:{colspan:"2"}},[e._v(" "+e._s(i)+" ")])]),e._l(s,(function(s,i){return["string"===typeof s?[t("tr",{key:i},[t("td",{staticClass:"tablekey"},[e._v(e._s(i))]),t("td",{staticClass:"tablevalue"},[e._v(" "+e._s(s)+" ")])])]:e._e()]}))]:"array"===typeof s?[t("tr",{key:i},[t("td",{attrs:{colspan:"2"}},[e._v(e._s(i))])]),e._l(s,(function(s,i){return["string"===typeof e.objectvalueobject?[t("tr",{key:i},[t("td",{staticClass:"tablekey"},[e._v(e._s(i))]),t("td",{staticClass:"tablevalue"},[e._v(" "+e._s(s)+" ")])])]:e._e()]}))]:e._e()]}))]]:e._e()]}))],2)])])],1)]:[t("div",{staticClass:"htmlElement",domProps:{innerHTML:e._s(e.summarizingData)}})]]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Close"},on:{click:function(t){return e.$emit("input",!1)}}})]},proxy:!0}])})},a=[],o=s("6a70"),r=s("1b0d"),n={name:"Summarize",components:{Modal:o["a"]},props:{value:{type:Boolean,default:!1},repositoryId:{type:Number,default:0},itemid:{type:Number,default:0},transactionId:{type:Number,default:0},workflowId:{type:Number,default:0},processId:{type:Number,default:0},page:{type:String,default:""}},data(){return{summarizingData:"",summarizeView:!1}},watch:{value:{immediate:!0,handler(){this.value&&("REPOSITORY"===this.page?this.documentSummarize():"WORKFLOW"===this.page&&this.workflowRecommendation())}}},methods:{async documentSummarize(){this.$store.commit("showLoadingBarSave");const{error:e,payload:t}=await r["p"].getSummary(this.repositoryId,this.itemid);if(this.$store.commit("hideLoadingBarSave"),e)this.$alert.error(e);else if(t)try{this.summarizingData=JSON.parse(t.output),this.summarizeView=!0}catch(s){console.log(s),this.summarizeView=!1,this.summarizingData=t.output.replace(new RegExp("<title>","g"),'<title class="heading" style="display:block">').replace(new RegExp("<h1>","g"),'<h6 class="heading">').replace(new RegExp("<h2>","g"),'<h6 class="heading2">').replace(new RegExp("<table>","g"),'<table class="custom-table-style">').replace(new RegExp("<p>","g"),'<p style="margin-top:20px">')}},async workflowRecommendation(){this.$store.commit("showLoadingBarSave");const{error:e,payload:t}=await r["t"].getWorkflowRecommendation(this.workflowId,this.processId,this.transactionId);if(this.$store.commit("hideLoadingBarSave"),e)this.$alert.error(e);else if(t)try{this.summarizingData=JSON.parse(t.output),this.summarizeView=!0}catch(s){console.log(s),this.summarizeView=!1,this.summarizingData=t.replace(new RegExp("<title>","g"),'<title class="heading" style="display:block">').replace(new RegExp("<h1>","g"),'<h6 class="heading">').replace(new RegExp("<h2>","g"),'<h6 class="heading2">').replace(new RegExp("<table>","g"),'<table class="custom-table-style">').replace(new RegExp("<p>","g"),'<p style="margin-top:20px">')}}}},l=n,c=(s("3595"),s("e864"),s("2877")),d=Object(c["a"])(l,i,a,!1,null,"85a6110e",null);t["a"]=d.exports},"62f0":function(e,t,s){},"651a":function(e,t,s){e.exports=s.p+"img/psg-logo.20670f47.png"},"65c0":function(e,t,s){},"670a":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"toggle"}},e._l(e.options,(function(s){return t("div",{key:s,staticClass:"option",class:{"is-selected":e.value===s},on:{click:function(t){return e.$emit("input",s)}}},[e._v(" "+e._s(s)+" ")])})),0)},a=[],o={name:"Toggle",props:{value:{type:String,required:!0},options:{type:Array,required:!0}}},r=o,n=(s("fa79"),s("2877")),l=Object(n["a"])(r,i,a,!1,null,"0e83c5c2",null);t["a"]=l.exports},"675d":function(e,t,s){},"686b":function(e,t,s){},"6c88":function(e,t,s){"use strict";s("5d0b")},"6e8c":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"mdi-pin-outline","icon-color":"primary"},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("UnPin")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" Are you sure you want to unpin the "),t("b",[e._v('"'+e._s(e.label)+'"')]),e._v(". If you unpin, you will not be able to use this in the dashboard. ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"primary"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"primary"},on:{click:e.deleteFilter}})]},proxy:!0}])})},a=[],o=s("1c54"),r=s("1b0d"),n={name:"ConfirmDeleteRepository",components:{Confirm:o["a"]},props:{value:{type:Boolean,required:!0},deleteData:{type:Object,required:!0},label:{type:String,default:""}},methods:{handleInput(e){this.$emit("input",e)},handleNo(){this.$emit("input",!1)},async deleteFilter(){const{error:e}=await r["e"].deleteFilter(this.deleteData.id,this.deleteData);e?this.$alert.warning("error"):(this.$emit("input",!1),this.$emit("delete"),this.$alert.success("Unpinned Successfully"))}}},l=n,c=s("2877"),d=Object(c["a"])(l,i,a,!1,null,"88551dfe",null);t["a"]=d.exports},"70a9":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cursor-pointer",attrs:{id:"async-select-field"}},[e.label?t("FormFieldLabel",{attrs:{label:e.label,"is-mandatory":e.isMandatory,tooltip:e.tooltip}}):e._e(),t("FormFieldWrapper",{ref:"wrapper",attrs:{"is-focused":e._isFocused,"is-clearable":e._isClearable,"is-readonly":e.isReadonly,"is-disabled":e.isDisabled,"has-error":!!e.error,"action-icon":"eva-chevron-down"},on:{click:e.showOptionPicker,clear:e.handleClear},scopedSlots:e._u([{key:"default",fn:function(){return[t("div",{staticClass:"async-select"},[e._l(e.value,(function(s,i){return t("div",{key:s,staticClass:"chip"},[t("div",{staticClass:"q-mr-xs"},[e._v(e._s(s))]),t("BaseIcon",{attrs:{name:"eva-close"},on:{click:function(t){return t.stopPropagation(),e.removeOption(i)}}})],1)})),t("div",{staticClass:"col search-query"},[t("input",{ref:"searchQuery",attrs:{type:"text",placeholder:e._placeholder},domProps:{value:e.searchQuery},on:{focus:function(t){e.isFocused=!0},blur:function(t){e.isFocused=!1},input:e.debouncedInput,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleKeypress.apply(null,arguments)}}})])],2),t("q-menu",{attrs:{target:e.$refs.wrapper,fit:"","no-focus":"","no-refocus":"","no-parent-event":"","transition-show":"scale","transition-hide":"scale"},model:{value:e.optionPicker,callback:function(t){e.optionPicker=t},expression:"optionPicker"}},[t("OptionPicker",{attrs:{"is-multiple":"",value:e.value,options:e._options,"new-option":e.newOption},on:{select:e.handleSelect,loadMore:e.getOptions}})],1)]},proxy:!0},{key:"action",fn:function(){return[e.isLoading?t("q-spinner",{staticClass:"q-mr-sm",attrs:{color:"secondary",size:"20px"}}):e._e()]},proxy:!0}])}),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e()],1)},a=[],o=(s("caad"),s("14d9"),s("3445")),r=s("0f01"),n=s("e683"),l=s("29db"),c=s("0d5e"),d=s("9996"),m=s("32e8"),h=s("5c8a"),u=s("85b1"),p={name:"AsyncMultiSelectField",components:{FormFieldLabel:o["a"],FormFieldWrapper:r["a"],FormFieldError:n["a"],OptionPicker:l["a"]},props:{value:{type:Array,default:()=>[]},label:{type:String,default:""},placeholder:{type:String,default:""},isMandatory:{type:Boolean,default:!1},tooltip:{type:String,default:""},isDisabled:{type:Boolean,default:!1},isReadonly:{type:Boolean,default:!1},isClearable:{type:Boolean,default:!0},error:{type:String,default:""},newOption:{type:Boolean,default:!1},apiPath:{type:String,default:""},columnName:{type:String,default:""}},data(){return{isFocused:!1,optionPicker:!1,searchQuery:"",options:[],isLoading:!1,optionsCount:0,optionsClone:[]}},computed:{_placeholder(){if(!this.value.length)return this.placeholder||"Select"},_isFocused(){return this.isFocused||this.optionPicker},_isClearable(){return this.isClearable&&!!this.value.length},_options(){return this.searchQuery?this.optionsClone.filter(e=>Object(d["a"])(e).includes(Object(d["a"])(this.searchQuery))):this.optionsClone}},watch:{options:{immediate:!0,deep:!0,handler(){Object(m["a"])(this.options,this.optionsClone)||(this.optionsClone=Object(h["a"])(this.options))}},optionPicker(){this.optionPicker||(this.searchQuery="")},columnName(){this.columnName&&(this.options=[],this.getOptions())}},created(){this.getOptions()},methods:{showOptionPicker(){this.optionPicker=!0},handleChange(e){this.searchQuery=e.target.value},handleSelect(e){const t=[...this.value],s=t.findIndex(t=>t===e);-1===s?t.push(e):t.splice(s,1),this.$emit("input",t),this.searchQuery=""},removeOption(e){const t=[...this.value];t.splice(e,1),this.$emit("input",t)},handleKeypress(){this.searchQuery&&this.newOption&&(this.handleSelect(this.searchQuery),this.$refs.searchQuery.blur())},handleClear(){this.$emit("input",[])},debouncedInput:Object(u["a"])((function(e){this.searchQuery=e.target.value}),500),async getOptions(){try{let e="";e=this.label?this.label:"object"===typeof this.columnName?this.columnName[0]:this.columnName;const t=await c["b"].post(this.apiPath,JSON.stringify({column:e,keyword:this.searchQuery,rowFrom:this.options.length||0,rowCount:this.options.length+10})),{status:s,data:i}=t;if(200!==s)throw t;const a=JSON.parse(i);this.options.push(...a)}catch(e){console.error(e),this.$alert.error("Error fetching options")}},loadMoreOptions(){}}},f=p,v=(s("c187"),s("2877")),y=s("4e73"),b=s("0d59"),w=s("93dc"),g=s.n(w),C=Object(v["a"])(f,i,a,!1,null,"b0cc9a00",null);t["a"]=C.exports;g()(C,"components",{QMenu:y["a"],QSpinner:b["a"]})},7225:function(e,t,s){"use strict";s("afe7")},"742a":function(e,t,s){"use strict";s("ef04")},"75c3":function(e,t,s){"use strict";var i=s("0967"),a=s("7c86"),o=s("d882"),r=s("f249");function n(e,t,s){const i=Object(o["h"])(e);let a,r=i.left-t.event.x,n=i.top-t.event.y,l=Math.abs(r),c=Math.abs(n);const d=t.direction;!0===d.horizontal&&!0!==d.vertical?a=r<0?"left":"right":!0!==d.horizontal&&!0===d.vertical?a=n<0?"up":"down":!0===d.up&&n<0?(a="up",l>c&&(!0===d.left&&r<0?a="left":!0===d.right&&r>0&&(a="right"))):!0===d.down&&n>0?(a="down",l>c&&(!0===d.left&&r<0?a="left":!0===d.right&&r>0&&(a="right"))):!0===d.left&&r<0?(a="left",l<c&&(!0===d.up&&n<0?a="up":!0===d.down&&n>0&&(a="down"))):!0===d.right&&r>0&&(a="right",l<c&&(!0===d.up&&n<0?a="up":!0===d.down&&n>0&&(a="down")));let m=!1;if(void 0===a&&!1===s){if(!0===t.event.isFirst||void 0===t.event.lastDir)return{};a=t.event.lastDir,m=!0,"left"===a||"right"===a?(i.left-=r,l=0,r=0):(i.top-=n,c=0,n=0)}return{synthetic:m,payload:{evt:e,touch:!0!==t.event.mouse,mouse:!0===t.event.mouse,position:i,direction:a,isFirst:t.event.isFirst,isFinal:!0===s,duration:Date.now()-t.event.time,distance:{x:l,y:c},offset:{x:r,y:n},delta:{x:i.left-t.event.lastX,y:i.top-t.event.lastY}}}}function l(e){const t=e.__qtouchpan;void 0!==t&&(void 0!==t.event&&t.end(),Object(o["b"])(t,"main"),Object(o["b"])(t,"temp"),!0===i["a"].is.firefox&&Object(o["j"])(e,!1),void 0!==t.styleCleanup&&t.styleCleanup(),delete e.__qtouchpan)}let c=0;t["a"]={name:"touch-pan",bind(e,{value:t,modifiers:s}){if(void 0!==e.__qtouchpan&&(l(e),e.__qtouchpan_destroyed=!0),!0!==s.mouse&&!0!==i["a"].has.touch)return;function d(e,t){!0===s.mouse&&!0===t?Object(o["l"])(e):(!0===s.stop&&Object(o["k"])(e),!0===s.prevent&&Object(o["i"])(e))}const m={uid:"qvtp_"+c++,handler:t,modifiers:s,direction:Object(a["a"])(s),noop:o["g"],mouseStart(e){Object(a["b"])(e,m)&&Object(o["e"])(e)&&(Object(o["a"])(m,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),m.start(e,!0))},touchStart(e){if(Object(a["b"])(e,m)){const t=e.target;Object(o["a"])(m,"temp",[[t,"touchmove","move","notPassiveCapture"],[t,"touchcancel","end","passiveCapture"],[t,"touchend","end","passiveCapture"]]),m.start(e)}},start(t,a){!0===i["a"].is.firefox&&Object(o["j"])(e,!0),m.lastEvt=t;const r=Object(o["h"])(t);if(!0===a||!0===s.stop){if(!0!==m.direction.all&&(!0!==a||!0!==m.modifiers.mouseAllDir&&!0!==m.modifiers.mousealldir)){const e=t.type.indexOf("mouse")>-1?new MouseEvent(t.type,t):new TouchEvent(t.type,t);!0===t.defaultPrevented&&Object(o["i"])(e),!0===t.cancelBubble&&Object(o["k"])(e),e.qClonedBy=void 0===t.qClonedBy?[m.uid]:t.qClonedBy.concat(m.uid),e.qKeyEvent=t.qKeyEvent,e.qClickOutside=t.qClickOutside,m.initialEvent={target:t.target,event:e}}Object(o["k"])(t)}m.event={x:r.left,y:r.top,time:Date.now(),mouse:!0===a,detected:!1,isFirst:!0,isFinal:!1,lastX:r.left,lastY:r.top}},move(e){if(void 0===m.event)return;m.lastEvt=e;const t=!0===m.event.mouse,s=()=>{let s;d(e,t),!0!==m.modifiers.preserveCursor&&!0!==m.modifiers.preservecursor&&(s=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),!0===t&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Object(r["a"])(),m.styleCleanup=e=>{if(m.styleCleanup=void 0,void 0!==s&&(document.documentElement.style.cursor=s),document.body.classList.remove("non-selectable"),!0===t){const t=()=>{document.body.classList.remove("no-pointer-events--children")};void 0!==e?setTimeout(()=>{t(),e()},50):t()}else void 0!==e&&e()}};if(!0===m.event.detected){!0!==m.event.isFirst&&d(e,m.event.mouse);const{payload:t,synthetic:i}=n(e,m,!1);return void(void 0!==t&&(!1===m.handler(t)?m.end(e):(void 0===m.styleCleanup&&!0===m.event.isFirst&&s(),m.event.lastX=t.position.left,m.event.lastY=t.position.top,m.event.lastDir=!0===i?void 0:t.direction,m.event.isFirst=!1)))}if(!0===m.direction.all||!0===t&&(!0===m.modifiers.mouseAllDir||!0===m.modifiers.mousealldir))return s(),m.event.detected=!0,void m.move(e);const i=Object(o["h"])(e),a=i.left-m.event.x,l=i.top-m.event.y,c=Math.abs(a),h=Math.abs(l);c!==h&&(!0===m.direction.horizontal&&c>h||!0===m.direction.vertical&&c<h||!0===m.direction.up&&c<h&&l<0||!0===m.direction.down&&c<h&&l>0||!0===m.direction.left&&c>h&&a<0||!0===m.direction.right&&c>h&&a>0?(m.event.detected=!0,m.move(e)):m.end(e,!0))},end(t,s){if(void 0!==m.event){if(Object(o["b"])(m,"temp"),!0===i["a"].is.firefox&&Object(o["j"])(e,!1),!0===s)void 0!==m.styleCleanup&&m.styleCleanup(),!0!==m.event.detected&&void 0!==m.initialEvent&&m.initialEvent.target.dispatchEvent(m.initialEvent.event);else if(!0===m.event.detected){!0===m.event.isFirst&&m.handler(n(void 0===t?m.lastEvt:t,m).payload);const{payload:e}=n(void 0===t?m.lastEvt:t,m,!0),s=()=>{m.handler(e)};void 0!==m.styleCleanup?m.styleCleanup(s):s()}m.event=void 0,m.initialEvent=void 0,m.lastEvt=void 0}}};e.__qtouchpan=m,!0===s.mouse&&Object(o["a"])(m,"main",[[e,"mousedown","mouseStart","passive"+(!0===s.mouseCapture||!0===s.mousecapture?"Capture":"")]]),!0===i["a"].has.touch&&Object(o["a"])(m,"main",[[e,"touchstart","touchStart","passive"+(!0===s.capture?"Capture":"")],[e,"touchmove","noop","notPassiveCapture"]])},update(e,{oldValue:t,value:s}){const i=e.__qtouchpan;void 0!==i&&t!==s&&("function"!==typeof s&&i.end(),i.handler=s)},unbind(e){void 0===e.__qtouchpan_destroyed?l(e):delete e.__qtouchpan_destroyed}}},7794:function(e,t,s){"use strict";s("caad");var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{attrs:{id:"repository-field"}},[e.showFreeze?t("div",{attrs:{id:"checkbox-field"}},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Freeze",expression:"'Freeze'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:e.freezed?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:e.handleFreeze},model:{value:e.freezed,callback:function(t){e.freezed=t},expression:"freezed"}})],1):e._e(),"SHORT_TEXT"===e.field.dataType||"BARCODE"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:s[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,2138129544)}):e._e(),"NUMBER"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory,integer:!e.field.options.allowDecimals}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("NumberField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:s[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,3272965974)}):e._e(),"DATE"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:s[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,2736912833)}):e._e(),"TIME"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TimeField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:s[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,2195704480)}):e._e(),"DATE_TIME"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateTimeField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:s[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,1802324180)}):e._e(),"SINGLE_SELECT"===e.field.dataType&&["EXISTING"].includes(e.field.options.optionsType)?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("AsyncSelectField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,"api-path":e.apiPath,error:s[0],"new-option":e.field.options.allowToAddNewOptions,"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,364407705)}):e._e(),"SINGLE_SELECT"===e.field.dataType&&"PREDEFINED"===e.field.options.optionsType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:s[0],"new-option":e.field.options.allowToAddNewOptions,options:e.predefinedSelectOptions,"is-readonly":e.readOnly,page:"repository"},on:{input:e.handleInput}})]}}],null,!1,3382750843)}):e._e(),"SINGLE_SELECT"===e.field.dataType&&["MASTER"].includes(e.field.options.optionsType)?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:s[0],"new-option":e.field.options.allowToAddNewOptions,options:e.options,"is-readonly":e.readOnly,page:"repository"},on:{input:e.handleInput}})]}}],null,!1,768311157)}):e._e(),"BOOLEAN"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SingleChoiceField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,options:e.booleanOptions,error:s[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,61245750)}):e._e(),"OMR"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SingleChoiceField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,options:e.omrOptions,error:s[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,1875132930)}):e._e()],1),t("div",{staticClass:"row items-center justify-center q-mt-sm"},[e.visiableSyncBtn?t("BaseButton",{attrs:{label:"Sync",color:"secondary"},on:{click:function(t){return e.$emit("saveSync",e.field)}}}):e._e()],1)])},a=[],o=s("7bb1"),r=s("b3d1"),n=s("ad54"),l=s("53c1"),c=s("cedb"),d=s("d1e5"),m=s("12b8"),h=s("0c21"),u=s("9234"),p=s("0d5e"),f={name:"RepositoryField",components:{ValidationProvider:o["b"],TextField:r["a"],NumberField:n["a"],DateField:l["a"],TimeField:c["a"],DateTimeField:d["a"],SelectField:m["a"],AsyncSelectField:h["a"],SingleChoiceField:u["a"]},props:{field:{type:Object,required:!0},repositoryId:{type:[String,Number],required:!0},value:{type:[String,Number],required:!0},readOnly:{type:Boolean,default:!1},label:{type:String,default:""},syncField:{type:Object,default:()=>{}},parentControl:{type:Boolean,default:!1},rowIndex:{type:Number,required:!0},filter:{type:Boolean,default:!1},freezedData:{type:Object,default:()=>{}},showFreeze:{type:Boolean,default:!1}},data(){return{booleanOptions:[{id:this.$nano.id(),label:this.field.options.truthyValue,value:this.field.options.truthyValue},{id:this.$nano.id(),label:this.field.options.falsyValue,value:this.field.options.falsyValue}],omrOptions:[{id:this.$nano.id(),label:"Yes",value:"true"},{id:this.$nano.id(),label:"No",value:"false"}],visiableSyncBtn:!1,options:[],freeze:!1,freezeData:this.freezedData,freezed:!1}},computed:{predefinedSelectOptions(){return this.field.options.predefinedOptions.map(e=>({id:this.$nano.id(),label:e,value:e}))},apiPath(){return`/repository/${this.repositoryId}/uniqueColumnValues`}},watch:{field:{immediate:!0,async handler(){for(let e in this.syncField)this.syncField[e]===this.field.name&&(this.visiableSyncBtn=!0)}},filter:{immediate:!0,deep:!0,handler(){this.field.filterBy&&this.field.options.masterFormId&&this.getMasterEntriesFilter(this.field)}}},created(){this.freezedData&&(this.freezed=this.field.name in this.freezedData),this.field.options.masterFormId&&this.getMasterEntries(this.field.options.masterFormId,this.field.options.masterTableColumn)},methods:{handleInput(e){this.$emit("input",e),this.parentControl&&this.$emit("filterBy",this.field,this.rowIndex),this.freezed&&this.updateOrAddField(this.field.name,e)},handleFreeze(){this.freezed=!this.freezed,this.freezed?(this.updateOrAddField(this.field.name,this.value),this.$emit("update:freezed",this.freeze)):this.$emit("update:removeFreezed",this.field.name)},updateOrAddField(e,t){e in this.freezeData?this.freezeData[e]=t:this.freezeData={...this.freezeData,[e]:t},this.$emit("update:freezedData",this.freezeData)},async getMasterEntries(e,t){try{const s=await p["b"].post(`/form/${e}/uniqueColumnValues`,JSON.stringify({column:t,keyword:"",rowFrom:0,rowCount:0})),{status:i,data:a}=s;if(200!==i)throw s;const o=JSON.parse(a);o.length&&(this.options=o.map(e=>({id:this.$nano.id(),label:e,value:e})))}catch(s){console.error(s),this.$alert.error("Error fetching options")}},async getMasterEntriesFilter(e){try{const t=await p["b"].post(`/form/${e.options.masterFormId}/uniqueColumnValues`,JSON.stringify({column:e.options.masterTableColumn,keyword:"",rowFrom:0,rowCount:0,filters:e.filterBy})),{status:s,data:i}=t;if(200!==s)throw t;const a=JSON.parse(i);a.length?(this.options=a.map(e=>({id:this.$nano.id(),label:e,value:e})),1===this.options.length&&this.handleInput(this.options[0].value)):(this.field.options.masterFormId&&this.getMasterEntries(this.field.options.masterFormId,this.field.options.masterTableColumn),this.handleInput(""))}catch(t){console.error(t),this.$alert.error("Error fetching options")}}}},v=f,y=(s("87dc"),s("2877")),b=Object(y["a"])(v,i,a,!1,null,"174d3602",null);t["a"]=b.exports},"7b7c":function(e,t,s){},8169:function(e,t,s){"use strict";s("14d9");var i=s("a026"),a=s("87e8");t["a"]=i["default"].extend({name:"QChatMessage",mixins:[a["a"]],props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelSanitize:Boolean,nameSanitize:Boolean,textSanitize:Boolean,stampSanitize:Boolean},computed:{textClass(){return"q-message-text-content q-message-text-content--"+this.op+(void 0!==this.textColor?" text-"+this.textColor:"")},messageClass(){return"q-message-text q-message-text--"+this.op+(void 0!==this.bgColor?" text-"+this.bgColor:"")},containerClass(){return"q-message-container row items-end no-wrap"+(!0===this.sent?" reverse":"")},sizeClass(){if(void 0!==this.size)return"col-"+this.size},op(){return!0===this.sent?"sent":"received"}},methods:{__wrapStamp(e,t){if(void 0!==this.$scopedSlots.stamp)return[t,e("div",{staticClass:"q-message-stamp"},this.$scopedSlots.stamp())];if(this.stamp){const s=!0===this.stampSanitize?"textContent":"innerHTML";return[t,e("div",{staticClass:"q-message-stamp",domProps:{[s]:this.stamp}})]}return[t]},__getText(e,t,s){const i=!0===this.textSanitize?"textContent":"innerHTML";if(!0===s&&!0===t.some(e=>void 0===e.tag&&void 0!==e.text))return[e("div",{class:this.messageClass},[e("div",{class:this.textClass},this.__wrapStamp(e,e("div",t)))])];const a=!0!==s?t=>e("div",{domProps:{[i]:t}}):t.length>1?e=>e:t=>e("div",[t]);return t.map((t,s)=>e("div",{key:s,class:this.messageClass},[e("div",{class:this.textClass},this.__wrapStamp(e,a(t)))]))}},render(e){const t=[];void 0!==this.$scopedSlots.avatar?t.push(this.$scopedSlots.avatar()):void 0!==this.avatar&&t.push(e("img",{class:"q-message-avatar q-message-avatar--"+this.op,attrs:{src:this.avatar,"aria-hidden":"true"}}));const s=[];void 0!==this.$scopedSlots.name?s.push(e("div",{class:"q-message-name q-message-name--"+this.op},this.$scopedSlots.name())):void 0!==this.name&&s.push(e("div",{class:"q-message-name q-message-name--"+this.op,domProps:{[!0===this.nameSanitize?"textContent":"innerHTML"]:this.name}})),void 0!==this.text&&s.push(this.__getText(e,this.text)),void 0!==this.$scopedSlots.default&&s.push(this.__getText(e,this.$scopedSlots.default(),!0)),t.push(e("div",{class:this.sizeClass},s));const i=[];return void 0!==this.$scopedSlots.label?i.push(e("div",{staticClass:"q-message-label"},this.$scopedSlots.label())):void 0!==this.label&&i.push(e("div",{staticClass:"q-message-label",domProps:{[!0===this.labelSanitize?"textContent":"innerHTML"]:this.label}})),i.push(e("div",{class:this.containerClass},t)),e("div",{class:"q-message q-message-"+this.op,on:{...this.qListeners}},i)}})},8180:function(e,t,s){"use strict";s("e0b6")},"84ee":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"workflowRequestList"}},["GRID"===e.activeView?t("div",{class:e.dashboardView?"cards":"card"},[t("div",{staticClass:"row items-center q-pa-xs"},[e.initiate&&!e.myInbox?t("div",{staticClass:"row items-center q-mr-xs",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.openProcess(!0)}}},[t("q-chip",{staticClass:"cursor-pointer secondary-hover",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"mdi-plus-thick",color:"secondary","text-color":"white"}}),e._v(" Initiate ")],1)],1):e._e(),e.importExcel&&!e.myInbox?t("ImportPopup",{staticClass:"row items-center q-mr-xs",attrs:{"chip-button":!0,"data-imported":e.dataImported,"form-id":String(e.masterFormId)},on:{upload:function(t){return e.$emit("upload")},close:function(t){return e.$emit("close")}}}):e._e(),t("div",{staticClass:"col ellipsis",attrs:{id:"global-search"}},[t("div",{staticClass:"row col"},[t("SearchItems",{staticClass:"col-auto actions addFilter",attrs:{columns:e.columns,"filter-search-column":e.filterSearchColumn,"selected-filter-column":e.selectedFilterColumn},on:{"update:filterSearchColumn":function(t){e.filterSearchColumn=t},"update:filter-search-column":function(t){e.filterSearchColumn=t},"update:selectedFilterColumn":function(t){e.selectedFilterColumn=t},"update:selected-filter-column":function(t){e.selectedFilterColumn=t},update:e.updateFilterByColumns}}),e.selectedFilterColumn?t("span",{staticClass:"col-auto q-ml-xs q-mt-xs"},[e._v(e._s(e.selectedFilterColumn)+" :")]):e._e(),t("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],ref:"searchQuery",staticClass:"col q-px-xs q-mt-xs",attrs:{type:"text",placeholder:"Search Request..."},domProps:{value:e.search},on:{keyup:function(t){return e.searchRow(e.search)},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateFilterByColumns.apply(null,arguments)},input:function(t){t.target.composing||(e.search=t.target.value)}}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Search",expression:"'Search'",modifiers:{bottom:!0}}],staticClass:"col-auto",attrs:{icon:"eva-search","no-border":"","is-flat":""},on:{click:e.updateFilterByColumns}}),e.selectedFilterColumn?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Clear Filter",expression:"'Clear Filter'",modifiers:{bottom:!0}}],staticClass:"col-auto",attrs:{icon:"eva-close","no-border":"","is-flat":""},on:{click:function(t){return e.clearFilterByColumns(!0)}}}):e._e()],1)]),t("div",{staticClass:"col-auto q-ml-xs"},[!e.jiraConnect||e.selectedFilterColumn||e.search?e._e():t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"JIRA - Create Issue",expression:"'JIRA - Create Issue'",modifiers:{top:!0}}],attrs:{icon:"mdi-jira",color:"gray","no-border":"","is-flat":"",size:"18px"},on:{click:e.checkJiraRequest}})],1),e.selectedFilterColumn||e.search?e._e():t("div",{staticClass:"col-auto q-ml-xs"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Refresh",expression:"'Refresh'",modifiers:{top:!0}}],attrs:{icon:"eva-refresh",color:"gray","no-border":"","is-flat":"",size:"20px"},on:{click:e.getRequest}})],1),e.selectedFilterColumn||e.search?e._e():t("div",{staticClass:"col-auto"},[t("SortItems",{attrs:{columns:e.workflow.id?e.columns:[],order:e.sortBy.order,criteria:e.sortBy.criteria},on:{"update:order":function(t){return e.$set(e.sortBy,"order",t)},"update:criteria":function(t){return e.$set(e.sortBy,"criteria",t)}}})],1),e.selectedFilterColumn||e.search?e._e():t("div",{staticClass:"col-auto"},[t("FilterItems",{attrs:{item:"proces",columns:e.workflow.id?e.columns:[],"filter-by":e.filterBy,module:"form","module-id":e.workflow.wFormId},on:{"update:filterBy":function(t){e.filterBy=t},"update:filter-by":function(t){e.filterBy=t},update:e.updateFilterBy}})],1),e.selectedFilterColumn||e.search?e._e():t("div",{staticClass:"col-auto"},[e.dashboardView?e._e():t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"List View",expression:"'List View'",modifiers:{top:!0}}],attrs:{icon:"mdi-format-list-checkbox",color:"gray","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.$emit("update:activeView","LIST")}}})],1),e.selectedFilterColumn||e.search?e._e():t("div",{staticClass:"col-auto q-ml-xs"},[e.dashboardView?e._e():t("div",[t("BaseActionButton",{attrs:{icon:"mdi-pin",color:e.dashboard?"secondary":"gray","no-border":"","is-flat":"",size:"20px",rotate:"rotate-45"},on:{click:function(t){e.dashboard?e.$emit("isDelete"):e.$emit("issavesheet")}}})],1)])],1),e.dashboardView?[e.loadingBarInbox?t("ProgressBar",{attrs:{"container-height":"50vh","container-color":"white","progress-bars":e.progressBars}}):e._e()]:[e.loadingBarInbox?t("BaseLoadingBarSheet",{staticClass:"card1"}):e._e()],e.selectedNode?[t("BaseScrollbar",{staticClass:"q-pa-xs",attrs:{height:e.dashboardView?"calc(75vh - 285px)":"calc(100vh - 285px)"},on:{scroll:e.loadMore}},[e._l(e.groupKey,(function(s){return[s.name?t("div",{key:s.name,staticClass:"row"},[e.groupRequestListName(s.name)?[t("div",{staticClass:"group-by col-auto q-mb-sm"},[s.checkboxRequired?t("CheckboxField",{staticClass:"col-auto check-group-by",attrs:{value:s.checked},on:{input:function(t){return e.updateSelectionGroup(s)}}}):e._e(),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"groupLabel"},[e._v(" "+e._s(s.name+" ("+s.totalCount+")")+" ")])]),t("BaseIcon",{staticClass:"cursor-pointer q-ml-sm",attrs:{name:s.expand?"mdi-chevron-down":"mdi-chevron-up"},on:{click:function(e){s.expand=!s.expand}}})],1),t("div",{staticClass:"q-ml-sm"},[e.groupSelected(s.name)?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],attrs:{icon:"eva-more-horizontal-outline",size:"16px",color:"primary-5"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},e._l(s.actions,(function(i){return t("ListItem",{key:i.id,attrs:{label:i.name,icon:i.icon,color:i.color},on:{click:function(t){return e.groupRequestAction(i,s)}}})})),1)],1):e._e()],1)]:e._e()],2):e._e(),e._l(e.groupRequestList(s.name),(function(i){return[t("div",{key:s.name+"-"+i.processId},[t("div",{on:{click:function(e){i.expandSubWorkflow=!i.expandSubWorkflow}}},[i.visible&&s.expand?t("div",{staticClass:"list q-mb-xs q-pa-sm",class:i.processId===e.hasSelectedProcess&&i.id===e.hasSelectedWorkflow?"active-list":"",style:{background:e.actionColor(i.lastAction)},on:{click:function(t){return e.showRequestPreview(i.processId,i.id)}}},[t("div",{staticClass:"row"},[("inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode)&&i.checkboxRequired&&i.key?t("CheckboxField",{staticClass:"col-auto",attrs:{value:i.checked},on:{input:function(t){return e.updateSelection(i)}}}):e._e(),t("q-icon",{staticClass:"q-mr-sm col-auto",attrs:{name:i.starred?"mdi-star":"mdi-star-outline",color:e.darkTheme?"secondary":"primary",size:"18px"},on:{click:function(t){return t.stopPropagation(),e.updateStarred(i)}}}),t("span",{staticClass:"col"},[e._v(e._s(i.requestNo))]),i.subworkflowTransaction?[i.subworkflowTransaction.length?t("BaseIcon",{attrs:{name:i.expandSubWorkflow?"mdi-menu-down rotate-180":"mdi-menu-down",color:"secondary"}}):e._e()]:e._e()],2),t("div",{staticClass:"row"},[t("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),t("span",{staticClass:"col ellipsis"},[e._v(e._s(i.stage))]),t("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),t("span",{staticClass:"col-auto"},[e._v(e._s(e.lastActionDuration(i)))])],1),"inbox"!==e.selectedNode&&"common"!==e.selectedNode&&"payment"!==e.selectedNode||!i.mlPrediction?e._e():t("div",{staticClass:"row q-pt-sm"},[i.mlCondition?t("div",{staticClass:"col-auto"},[e._l(i.mlCondition.split(","),(function(s){return[t("q-chip",{key:s,staticClass:"chips gray-hover",attrs:{outline:"",color:"gray"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"mdi-information-variant",color:"gray","text-color":"white"}}),e._v(" "+e._s(s)+" ")],1)]}))],2):e._e()]),!i.mlPrediction&&i.mlCondition?t("div",{staticClass:"row q-pt-sm"},[i.mlCondition.indexOf("[")>-1?e._l(JSON.parse(i.mlCondition),(function(s){return t("div",{key:i.processId+""+s.fieldName,on:{click:function(t){return t.stopPropagation(),e.$emit("validation",i.processId)}}},[t("q-chip",{staticClass:"chips gray-hover",class:"Matched"===s.status?"green-hover":"Not Matched"===s.status?"red-hover":"orange-hover",attrs:{outline:"",color:"Matched"===s.status?"green":"Not Matched"===s.status?"red":"orange"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"mdi-robot",color:"Matched"===s.status?"green":"Not Matched"===s.status?"red":"orange","text-color":"white"}}),e._v(" "+e._s(s.fieldValue)+" ")],1)],1)})):[e._l(i.mlCondition.split(","),(function(s){return[t("q-chip",{key:s,staticClass:"chips pink-hover",attrs:{outline:"",color:"pink"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"mdi-information-variant",color:"pink","text-color":"white"}}),e._v(" "+e._s(s)+" ")],1)]}))]],2):e._e(),i.jiraIssueInfo&&i.jiraIssueInfo.id?t("div",{staticClass:"row q-mt-sm"},[t("a",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"JIRA Issue Link",expression:"'JIRA Issue Link'",modifiers:{top:!0}}],staticClass:"col-auto",staticStyle:{"text-decoration":"none"},attrs:{href:e.getJIRALink(i.jiraIssueInfo),target:"_blank"}},[t("BaseActionButton",{staticClass:"q-mr-xs small",attrs:{icon:"mdi-jira",color:"primary","is-flat":"","no-border":"",size:"16px"}})],1),t("span",{staticClass:"col-auto"},[e._v("REF# ID: "+e._s(i.jiraIssueInfo.id))]),t("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),t("span",{staticClass:"col-auto"},[e._v("KEY: "+e._s(i.jiraIssueInfo.key))]),i.jiraIssueInfo.assignee?[t("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),t("span",{staticClass:"col-auto text-primary text-bold"},[e._v("ASSIGNEE: "+e._s(i.jiraIssueInfo.assignee))])]:e._e(),i.jiraIssueInfo.issueStatus?[t("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),t("span",{staticClass:"col-auto text-primary text-bold"},[e._v("STATUS: "+e._s(i.jiraIssueInfo.issueStatus))])]:e._e()],2):e._e()]):e._e()]),i.subworkflowTransaction&&i.expandSubWorkflow?t("div",[e._l(i.subworkflowTransaction,(function(s){return[t("div",{key:s.requestNo,staticClass:"sub-workflow-details",on:{click:function(t){return e.showSubRequestPreview(s)}}},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:1==s.flowStatus?"Completed":"In-progress",expression:"\n                        item.flowStatus == 1 ? 'Completed' : 'In-progress'\n                      ",modifiers:{top:!0}}],staticClass:"q-mr-sm col-auto",attrs:{name:1==s.flowStatus?"mdi-check-circle-outline":"mdi-progress-clock",size:"18px",color:e.darkTheme?"secondary":"primary"}}),t("span",{staticClass:"col"},[e._v(e._s(s.requestNo))]),t("div",{staticClass:"row"},[t("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),t("span",{staticClass:"col ellipsis"},[e._v(e._s(s.stageName))]),t("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),t("span",{staticClass:"col-auto"},[e._v(e._s(e.sublastActionDuration(s)))])],1),"inbox"!==e.selectedNode&&"common"!==e.selectedNode&&"payment"!==e.selectedNode||!i.mlPrediction?e._e():t("div",{staticClass:"row q-pt-sm"},[i.mlCondition?t("div",{staticClass:"col-auto"},[e._l(i.mlCondition.split(","),(function(s){return[t("q-chip",{key:s,staticClass:"chips gray-hover",attrs:{outline:"",color:"gray"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"mdi-information-variant",color:"gray","text-color":"white"}}),e._v(" "+e._s(s)+" ")],1)]}))],2):e._e()]),!i.mlPrediction&&i.mlCondition?t("div",{staticClass:"row q-pt-sm"},[i.mlCondition.indexOf("[")>-1?e._l(JSON.parse(i.mlCondition),(function(s){return t("div",{key:i.processId+""+s.fieldName,on:{click:function(t){return t.stopPropagation(),e.$emit("validation",i.processId)}}},[t("q-chip",{staticClass:"chips gray-hover",class:"Matched"===s.status?"green-hover":"Not Matched"===s.status?"red-hover":"orange-hover",attrs:{outline:"",color:"Matched"===s.status?"green":"Not Matched"===s.status?"red":"orange"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"mdi-robot",color:"Matched"===s.status?"green":"Not Matched"===s.status?"red":"orange","text-color":"white"}}),e._v(" "+e._s(s.fieldValue)+" ")],1)],1)})):[e._l(i.mlCondition.split(","),(function(s){return[t("q-chip",{key:s,staticClass:"chips pink-hover",attrs:{outline:"",color:"pink"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"mdi-information-variant",color:"pink","text-color":"white"}}),e._v(" "+e._s(s)+" ")],1)]}))]],2):e._e(),i.jiraIssueInfo&&i.jiraIssueInfo.id?t("div",{staticClass:"row q-mt-sm"},[t("a",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"JIRA Issue Link",expression:"'JIRA Issue Link'",modifiers:{top:!0}}],staticClass:"col-auto",staticStyle:{"text-decoration":"none"},attrs:{href:e.getJIRALink(i.jiraIssueInfo),target:"_blank"}},[t("BaseActionButton",{staticClass:"q-mr-xs small",attrs:{icon:"mdi-jira",color:"primary","is-flat":"","no-border":"",size:"16px"}})],1),t("span",{staticClass:"col-auto"},[e._v("REF# ID: "+e._s(i.jiraIssueInfo.id))]),t("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),t("span",{staticClass:"col-auto"},[e._v("KEY: "+e._s(i.jiraIssueInfo.key))]),i.jiraIssueInfo.assignee?[t("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),t("span",{staticClass:"col-auto text-primary text-bold"},[e._v("ASSIGNEE: "+e._s(i.jiraIssueInfo.assignee))])]:e._e(),i.jiraIssueInfo.issueStatus?[t("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),t("span",{staticClass:"col-auto text-primary text-bold"},[e._v("STATUS: "+e._s(i.jiraIssueInfo.issueStatus))])]:e._e()],2):e._e()],1)]}))],2):e._e()])]}))]}))],2),(e.totalItems,e._e()),e.totalItems?t("div",{staticClass:"row items-center q-pa-xs custom-pagination"},[t("div",{staticClass:"q-mr-sm q-ml-sm"},[e._v(" Showing "),t("span",{staticClass:"font-semibold"},[e._v(e._s(e.workflowRequestList.length>=e.totalItems?e.totalItems:e.workflowRequestList.length))]),e._v(" out of "),t("span",{staticClass:"font-semibold"},[e._v(e._s(e.totalItems))]),e._v(" requests ")])]):e._e()]:e._e()],2):e._e(),"LIST"===e.activeView?t("div",[t("Portal",{attrs:{to:"action-bar"}},[e.isLoading?e._e():t("ItemActions",{attrs:{item:"process",columns:e.columns,"toggle-id":e.workflow.id,"group-by":"",order:"","filter-by":e.filterBy,"active-view":e.activeView,criteria:e.sortBy.criteria,"hide-actions":e.hideActions,"workflow-initiate":e.initiate&&!e.myInbox,"initiate-access":!0,"workflow-import":e.importExcel&&!e.myInbox,"data-imported":e.dataImported,"form-id":String(e.masterFormId),"jira-connect":e.jiraConnect,module:"form","module-id":e.workflow.wFormId,"custom-process-form":e.isCustomizedWorkflow,"process-forward":e.groupItemSelected},on:{"update:columns":function(t){e.columns=t},"update:filterBy":function(t){e.filterBy=t},"update:filter-by":function(t){e.filterBy=t},"update:activeView":function(t){e.activeView=t},"update:active-view":function(t){e.activeView=t},"update:criteria":function(t){return e.$set(e.sortBy,"criteria",t)},refresh:e.getRequest,search:e.searchRow,update:e.updateFilterBy,initiate:function(t){return e.openProcess(!0)},upload:function(t){return e.$emit("upload")},close:function(t){return e.$emit("close")},jira:e.checkJiraRequest,export:e.exportRequestData,custom:function(t){e.showCustomProcessForm=!0},forward:function(t){return e.groupRequestAction("Assign",[])}}})],1),e.isLoading?e._e():t("div",{staticClass:"content card"},[e.dashboardView?[e.loadingBarInbox?t("ProgressBar",{attrs:{"container-height":"50vh","container-color":"white","progress-bars":e.progressBars}}):e._e()]:[e.loadingBarInbox?t("BaseLoadingBarSheet",{staticClass:"card1"}):e._e()],t("BaseScrollbar",{attrs:{height:"calc(100vh - 250px)"},on:{scroll:e.loadMore}},["LIST"===e.activeView?t("ProcessList",{attrs:{mode:e.selectedNode,items:e.items,columns:e.columns,"group-key":e.groupKey,"group-item-selected":e.groupItemSelected},on:{"update:groupItemSelected":function(t){e.groupItemSelected=t},"update:group-item-selected":function(t){e.groupItemSelected=t},show:e.showRequest,starred:e.updateStarred,selected:e.updateSelection,group:e.updateSelectionGroup,action:e.groupRequestAction,history:e.showHistory,SubHistory:e.showSubHistory,attachments:e.openAttachments,subAttachments:e.openSubAttachments,comments:e.openComments,subComments:e.openSubComments,validation:function(t){return e.$emit("validation")},openSubWorkflow:e.updateSelectedSubWorkflow}}):e._e()],1),(e.totalItems,e._e()),e.totalItems?t("div",{staticClass:"row items-center q-pa-xs custom-pagination"},[t("div",{staticClass:"q-mr-sm q-ml-sm"},[e._v(" Showing "),t("span",{staticClass:"font-semibold"},[e._v(e._s(e.workflowRequestList.length>=e.totalItems?e.totalItems:e.workflowRequestList.length))]),e._v(" out of "),t("span",{staticClass:"font-semibold"},[e._v(e._s(e.totalItems))]),e._v(" requests ")])]):e._e()],2)],1):e._e(),t("Sheet",{attrs:{width:e.formWidth,"has-footer":!e.isCustomizedWorkflow||!e.initiateProcess,"no-padding":""},on:{input:function(t){return e.closeProcessSheet(!0)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.headerTitle)+" ")]},proxy:!0},{key:"actions",fn:function(){return[e.isCustomizedWorkflow?[e.isRequestLocked?t("div",{staticClass:"cursor-pointer q-mr-sm"},[t("q-chip",{staticClass:"cursor-pointer orange-hover",attrs:{outline:"",color:"orange"}},[e._v(" View Only ")])],1):e._e(),e.selectedProcess.ticketLockedBy===e.$store.state.session.id?t("div",{staticClass:"cursor-pointer q-mr-sm",on:{click:function(t){e.requestReleaseModal=!0}}},[t("q-chip",{staticClass:"cursor-pointer secondary-hover",attrs:{outline:"",color:"secondary"}},[e._v(" Release ")])],1):e._e()]:e._e(),e.isCustomizedWorkflow||"DOCUMENT"===e.workflow.initiatedBy?e._e():[e.mandatory.filledValue||e.mandatory.nonFilledValue?[t("q-circular-progress",{staticClass:"q-mr-sm",attrs:{"show-value":"","font-size":"12px",value:e.mandatoryFilling,size:"lg",thickness:.22,color:"primary","track-color":"grey-3"}},[e._v(" "+e._s(e.mandatoryFilling)+"% ")])]:e._e(),e.mandatory.filledValue?t("div",{staticClass:"chip-success q-mr-sm"},[t("div",{},[e._v(e._s(e.mandatory.filledValue)+" ready")])]):e._e(),e.mandatory.nonFilledValue?t("div",{staticClass:"chip-warning",on:{click:e.checkFormValidation}},[t("div",{},[e._v(e._s(e.mandatory.nonFilledValue)+" need to work")])]):e._e()],e.mandatoryDocument.length?[t("div",{staticClass:"chip-warning cursor-pointer",on:{click:function(t){e.attachmentSheet=!0}}},[t("div",{},[e._v(e._s(e.mandatoryDocument.length)+" document required")])])]:e._e(),e.isCustomizedWorkflow?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh","no-border":"","is-flat":"",size:"20px"},on:{click:e.refreshFormData}})]:e._e(),e.hasWflowInitiator?t("BaseButton",{staticClass:"q-mr-sm",attrs:{label:e.subWorkflowName,color:"secondary"},on:{click:e.initiateSubWorkflow}}):e._e(),e.itemModel.itemId?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.documentActionList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.processDocumentAction(s.id)}}})})),1)],1)],1):e._e(),!e.isCustomizedWorkflow&&Object.keys(e.selectedProcess).length&&0===e.actions.length?[e.formView?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Details View",expression:"'Details View'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-table-column"},on:{click:function(t){e.formView=!1}}}):t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Form View",expression:"'Form View'",modifiers:{top:!0}}],staticClass:"q q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select"},on:{click:function(t){e.formView=!0}}})]:e._e(),e.isCustomizedWorkflow?e._e():t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:e.isMaximized?"eva-collapse":"eva-expand"},on:{click:e.toggleWidth}})]},proxy:!0},e.documentSignProcess||e.isRequestLocked?null:{key:"footer",fn:function(){return[e.isCustomizedWorkflow&&e.initiateProcess?e._e():[e.actions.length?t("div",{staticClass:"footer row"},["inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess?t("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Save",color:"secondary"},on:{click:function(t){return e.validateRequest("Save")}}}):e._e(),e._l(e.actions,(function(s){return["Approve"===s||"Complete"===s||"Rightsize"===s?t("BaseButton",{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"positive"},on:{click:function(t){return e.validateRequest(s)}}}):"Reject"===s||"Terminate"===s||"Force Close"===s||"Decline"===s?t("BaseButton",{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"red"},on:{click:function(t){return e.validateRequest(s)}}}):"Forward"===s||s.indexOf("Reply")>-1||"Rollback"===s||"Assign"===s?t("BaseButton",{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"orange"},on:{click:function(t){return e.validateRequest(s)}}}):t("BaseButton","To Requester"===s?{key:s,staticClass:"q-ml-md",attrs:{label:s,color:"pink"},on:{click:function(t){return e.validateRequest(s)}}}:{key:s,staticClass:"q-ml-md",attrs:{label:s},on:{click:function(t){return e.validateRequest(s)}}})]}))],2):e._e()],"psyCrYXtKfcs-EJmrYIhv1"===e.selectedProcess.activityId?["inbox"===e.selectedNode?t("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Verify",disabled:e.customVerify,color:"primary"},on:{click:function(t){return e.validateRequest("CustomVerify",!1,!1)}}}):e._e()]:e._e()]},proxy:!0}],null,!0),model:{value:e.processSheet,callback:function(t){e.processSheet=t},expression:"processSheet"}},[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[e.isCustomizedWorkflow&&e.initiateProcess?[t("CustomForm",{attrs:{"workflow-id":e.workflow.id,workflow:e.workflow,"form-id":e.formId,panels:e.panels,"secondary-panels":e.secondaryPanels,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel,actions:e.actions,"request-prefix":e.requestPrefix,"ml-prediction":e.mlPrediction,"form-fields":e.formFields,"generate-p-d-f":e.generatePDF},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t},"update:requestPrefix":function(t){e.requestPrefix=t},"update:request-prefix":function(t){e.requestPrefix=t},"update:mlPrediction":function(t){e.mlPrediction=t},"update:ml-prediction":function(t){e.mlPrediction=t},refresh:e.refreshCustomForm}})]:[e.isCustomizedWorkflow&&!e.initiateProcess?[e.formId?t("div",{staticClass:"col"},[t("CustomProcessForm",{attrs:{"form-id":e.formId,panels:e.panels,"secondary-panels":e.secondaryPanels,"form-model":e.formModel,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel,"form-fields":e.formFields,"data-validation-values":e.dataValidationValues,"selected-process":e.selectedProcess,"is-readonly":!!e.isRequestLocked||e.formEditAccess,"check-list":e.checkList,"form-check-list":e.formCheckList,"save-only":e.saveOnly,inbox:("inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode)&&!e.isRequestLocked,"auto-save-model":e.autoSaveModel},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t},"update:dataValidationValues":function(t){e.dataValidationValues=t},"update:data-validation-values":function(t){e.dataValidationValues=t},"update:checkList":function(t){e.checkList=t},"update:check-list":function(t){e.checkList=t},"update:formCheckList":function(t){e.formCheckList=t},"update:form-check-list":function(t){e.formCheckList=t},"update:saveOnly":function(t){e.saveOnly=t},"update:save-only":function(t){e.saveOnly=t},"update:autoSaveModel":function(t){e.autoSaveModel=t},"update:auto-save-model":function(t){e.autoSaveModel=t},updateDataValidationValues:e.updateDataValidationValues}})],1):e._e()]:[e.formId?t("div",{staticClass:"col"},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 115px)"}},[e.initiateProcess||e.formView?t("div",{attrs:{id:"form-view"}},[e.formId?t("RenderForm",{attrs:{"form-id":e.formId,panels:e.panels,"secondary-panels":e.secondaryPanels,"form-settings":e.formSettings,"form-model":e.formModel,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel,"workflow-model":e.workflowModel,"is-readonly":e.formEditAccess,"form-edit-controls":e.formEditControls,"readonly-controls":e.readonlyControls,"form-visibility-access":e.formVisibilityAccess,"form-secure-controls":e.formSecureControls,"enable-controls":e._enableControls,"check-list":e.checkList,"form-fields":e.formFields,"data-validation-values":e.dataValidationValues,"form-check-list":e.formCheckList,"form-upload-files":e.formUploadFiles,"has-check-form-validate":e.hasCheckFormValidate,"ocr-result":e.ocrResult},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t},"update:workflowModel":function(t){e.workflowModel=t},"update:workflow-model":function(t){e.workflowModel=t},"update:checkList":function(t){e.checkList=t},"update:check-list":function(t){e.checkList=t},"update:formCheckList":function(t){e.formCheckList=t},"update:form-check-list":function(t){e.formCheckList=t},"update:hasCheckFormValidate":function(t){e.hasCheckFormValidate=t},"update:has-check-form-validate":function(t){e.hasCheckFormValidate=t},uploadFiles:e.getOCRResult,mandatoryControlsList:e.mandatoryControlsList,deletedFiles:e.deletedFiles,showQr:e.generateQrCode}}):e._e(),e.signList.length?t("div",{staticClass:"q-pa-md",attrs:{id:"approvalSignature"}},[t("div",{staticClass:"title q-mb-sm"},[e._v("Approval Signature")]),t("BaseSeparator",{staticClass:"q-my-sm"}),t("div",{staticClass:"row"},[e._l(e.signList,(function(s){return[t("div",{key:s.id,staticClass:"col-3 q-mb-sm"},[t("img",{staticClass:"imgCenter col",attrs:{src:e.signLink(s.id)}}),t("div",{staticClass:"text row"},[t("span",{staticClass:"col-12 text-bold"},[e._v(e._s(s.stage))]),t("span",{staticClass:"col-12"},[e._v(e._s(s.createdByEmail))]),t("span",{staticClass:"col-12"},[e._v(e._s(e.$day.format(s.createdAt)))])])])]}))],2)],1):e._e(),e.userSignature||e.initUserSignature?t("SignatureField",{staticClass:"q-pa-md",attrs:{label:"Signature"},model:{value:e.signImg,callback:function(t){e.signImg=t},expression:"signImg"}}):e._e()],1):t("div",{staticClass:"q-pa-md"},[t("div",{staticClass:"col-12",attrs:{id:"requestDetails"}},[t("div",{staticClass:"row justify-center"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row items-center"},[t("table",{staticClass:"submittedData q-mb-sm"},[t("tbody",[e.selectedProcess.createdByName?t("tr",[t("td",{attrs:{colspan:"4"}},[e._v(" Requested By: "+e._s(e.selectedProcess.createdByName)+" ")])]):e._e(),t("tr",[e.selectedProcess.raisedBy?t("th",[e._v(" Requested User Email ")]):e._e(),t("th",[e._v("Requested Date")]),t("th",[e._v("Last Acted By")]),t("th",[e._v("Last Acted On")])]),t("tr",[e.selectedProcess.raisedBy?t("td",[e._v(" "+e._s(e.selectedProcess.raisedBy)+" ")]):e._e(),t("td",[e._v(" "+e._s(e.$day.format(e.selectedProcess.raisedAt))+" ")]),t("td",[e._v(" "+e._s(e.selectedProcess.transaction_createdByEmail)+" ")]),t("td",[e._v(" "+e._s(e.$day.format(e.selectedProcess.transaction_createdAt))+" ")])])])]),t("BaseScrollbar",{attrs:{height:"calc(100vh - 275px)"}},[e.selectedProcess.formData.fields?[t("table",{staticClass:"mainData col-12"},[e._l(e.selectedProcess.formData.fields,(function(s,i){return[s&&"[]"!=s?[e.isVisible(i)?["TABLE"!==e.validateType(i)?[t("tr",{key:`${i}-${s}`},[t("td",{staticClass:"tblHeader ellipsis small"},[e._v(" "+e._s(e.getLabel(i))+" ")]),t("td",{staticClass:"ellipsis"},["FILE_UPLOAD"===e.validateType(i)?[JSON.parse(s).length?t("div",e._l(JSON.parse(s),(function(i){return t("div",{key:i.fileName,staticClass:"q-mb-xs"},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"col row items-center",on:{click:function(t){return e.viewFile(i,s)}}},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(i.fileName)}}),t("span",{staticClass:"cursor-pointer text-underline text-secondary"},[e._v(e._s(i.fileName))])],1)])])})),0):e._e()]:"DATE"===e.validateType(i)?[e._v(" "+e._s(e.$day.format(s,!1))+" ")]:e.validateValue(s)?[e._v(" "+e._s(e.removeTags(s)||"-")+" ")]:[t("a",{attrs:{href:s,target:"_blank"}},[e._v(" "+e._s(s||"-")+" ")])]],2)])]:JSON.parse(s).length?[e.getLabel(i)?t("tr",{key:"trlabel-"+i},[t("td",{staticClass:"tblHeader ellipsis small",attrs:{colspan:"2"}},[t("FormFieldLabel",{key:"label-"+i,staticClass:"q-mt-sm",attrs:{label:e.getLabel(i)}})],1)]):e._e(),t("tr",{key:"trtable1-"+i},[t("td",{attrs:{colspan:"2"}},[t("BaseScrollbar",{key:"scroll-"+i,staticStyle:{"max-height":"200px"}},[t("table",{key:"table-"+i,staticClass:"sub-table q-mt-sm q-mb-sm"},[t("thead",[t("tr",e._l(e.tableColumns(s,i),(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0)]),t("tbody",e._l(e.tableValue(s),(function(a,o){return t("tr",{key:o},e._l(e.tableColumns(s,i),(function(s){return t("td",{key:s.id},[e._v(" "+e._s(a[s.id])+" ")])})),0)})),0)])])],1)])]:e._e()]:e._e()]:e._e()]}))],2)]:e._e()],2)],1)])])])])])],1):e._e(),e.itemModel.itemId?t("div",{staticClass:"col"},[t("div",{staticClass:"fileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myProcessFiles",attrs:{id:"file-frame",src:e.itemLink(),frameborder:"0"}})])])]):e._e()],t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(s){return[e.checkTabAccess(s.value)?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()]):e._e()]}))],2)]],2)]),t("Sheet",{attrs:{width:"30vw","sub-actions":!(!e.selectedProcess.processId||!e.attachmentList.length),upload:"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess,"no-padding":""},on:{input:e.closeAttachmentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 15 seconds ")]):e._e(),e.selectedProcess.processId?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getAttachments()}}}):e._e()]},proxy:!0},"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess?{key:"upload",fn:function(){return[t("div",{staticClass:"hint",on:{click:function(t){e.rowIndex=null,e.$refs.attachments.click()}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),t("div",{staticClass:"title text-blue"},[e._v("UPLOAD FILES")]),t("div",{staticClass:"description"},[e._v("Click here to choose files and upload")])],1)]},proxy:!0}:null,e.selectedProcess.processId&&e.attachmentList.length?{key:"subActions",fn:function(){return[t("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:e.fileSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}}),e._v(" Select All "),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!e.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentShare}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"merge documents (only PDF)",expression:"'merge documents (only PDF)'",modifiers:{top:!0}}],attrs:{"is-disabled":!(e.selectedFileCount>1&&e.isSelectedPDF),icon:"mdi-file-document-multiple-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentMerge}})]},proxy:!0}:null],null,!0),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess?"calc(100vh - 200px)":""}},[t("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:e.uploadWflowAttachments}}),e._l(e.checkList,(function(s){return[!s.name||s.hasOwnProperty("visible")&&!s.show?e._e():[s.attach?t("div",{key:s.uid},[e._l(e.attachmentFilterCheckList(s.name),(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})]],2):t("div",[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e()],2),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),[("inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode)&&s.createdBy===e.$store.state.session.id||e.initiateProcess?[t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Re-Upload",expression:"'Re-Upload'",modifiers:{top:!0}}],attrs:{icon:"mdi-file-upload",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){t.stopPropagation(),e.reuploadFile=s,e.reupload(s.name)}}})],1)]:e._e()]],2)])]}))],2):t("div",{key:s.uid,staticClass:"checkList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),t("div",{staticClass:"col q-ml-sm"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[e._v(" "+e._s(s.name)+" ")]),s.required?t("div",{staticClass:"col-12 q-mt-sm"},[t("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[e._v(" Required ")])],1):e._e()])]),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"col-12",on:{click:function(t){return e.attachTemplate(s.uid)}}},[t("q-chip",{staticClass:"chips primary-hover medium",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-upload-outline",color:"primary","text-color":"white"}}),e._v(" Upload ")],1)],1),s.template?t("div",{staticClass:"col-12",on:{click:function(t){return e.download(s.id)}}},[t("q-chip",{staticClass:"chips secondary-hover medium",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-download-outline",color:"secondary","text-color":"white"}}),e._v(" Download ")],1)],1):e._e()])])])]]})),e._l(e.attachmentList,(function(s){return[e.isCheckList(s.name)?[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e(),e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})],1):e._e(),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)],2),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),("inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode)&&s.createdBy===e.$store.state.session.id||e.initiateProcess?t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1):e._e()])])]:e._e()]}))],2)],1)]),t("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess?"30":"0","no-padding":""},on:{input:e.closeCommentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 30 seconds ")]):e._e(),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getComments(0)}}})]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:e.commentsSheetHeight}},[e._l(e.commentsList,(function(s,i){return[t("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===e.$store.state.session.id?"me":s.createdByEmail||s.externalCommentsby,text:[s.comments],"text-html":"",sent:s.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(s),"bg-color":s.createdBy===e.$store.state.session.id?"primary-1":"secondary-1"},scopedSlots:e._u([{key:"avatar",fn:function(){return[s.embedFileList&&s.embedFileList.length?t("div",{staticClass:"file-icons"},[t("FileIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.embedFileList[0].fileName,expression:"row.embedFileList[0].fileName",modifiers:{top:!0}}],key:"Icon-"+i,staticClass:"file-icon q-mr-sm",attrs:{"mime-type":e.fileType(s.embedFileList[0].fileName)}})],1):e._e()]},proxy:!0}],null,!0)})]}))],2)],1),"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess?t("div",{staticClass:"col borderTop"},[t("div",{staticClass:"row"},[e.checkTenant()?[t("div",{staticClass:"col actions"},[e.attachmentList.length&&e.fileNames.length?t("div",{staticClass:"row select-action q-pa-sm action-container"},[t("CheckboxField",{staticClass:"q-pr-sm",class:e.attachComment?"col-auto":"col",attrs:{label:"Add Comment to PDF"},model:{value:e.attachComment,callback:function(t){e.attachComment=t},expression:"attachComment"}}),e.selectedProcess.processId&&"START"!==e.selectedProcess.stageType&&!e.attachComment?t("CheckboxField",{staticClass:"col-auto notify-cmd",attrs:{label:"Notify Initiator/Requester"},model:{value:e.notifyInitiator,callback:function(t){e.notifyInitiator=t},expression:"notifyInitiator"}}):e._e(),e.attachComment?t("SelectField",{staticClass:"col field comment-attach attach-cmd",attrs:{"is-searchable":!0,options:e.fileNames},model:{value:e.selectedFileForAttach,callback:function(t){e.selectedFileForAttach=t},expression:"selectedFileForAttach"}}):e._e()],1):e._e(),!e.selectedProcess.processId||"START"===e.selectedProcess.stageType||!e.attachComment&&e.attachmentList.length&&e.fileNames.length?e._e():t("CheckboxField",{staticClass:"col-12 q-pl-sm q-pb-sm q-pt-sm",class:e.notifyInitiatorClass,attrs:{label:"Notify Initiator/Requester"},model:{value:e.notifyInitiator,callback:function(t){e.notifyInitiator=t},expression:"notifyInitiator"}}),e.displayInternalPublic?t("SingleChoiceField",{staticClass:"action-container",class:{"internal-public":e.attachmentList.length>0,"col q-pa-sm":!0,"internal-public-margin":e.attachComment},attrs:{options:e.commentActions,"show-options-wrapper":!1,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e()],1)]:e._e(),e.isTenantGOTOComments()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.jiraCommentActions,"options-per-line":2},model:{value:e.jiraCommentAction,callback:function(t){e.jiraCommentAction=t},expression:"jiraCommentAction"}})]:e._e()],2),t("div",{staticClass:"row text-area-action q-ml-sm q-mr-sm"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto","margin-right":"8px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm comment-actions",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm comment-actions",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])]):e._e()]),t("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(t){e.mailTransactionSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Mail Transactions ")]},proxy:!0},{key:"actions",fn:function(){return[t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 30 seconds ")]),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getMailTransactions()}}})]},proxy:!0}]),model:{value:e.mailTransactionSheet,callback:function(t){e.mailTransactionSheet=t},expression:"mailTransactionSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("div",{staticClass:"q-pl-sm"},[t("Tabs",{attrs:{tabs:e.mailTabs},model:{value:e.mailTab,callback:function(t){e.mailTab=t},expression:"mailTab"}})],1),"OUTGOING"===e.mailTab?[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[e._l(e.outgoingMails,(function(s){return[t("div",{key:"outgoing"+s.id,staticClass:"mailTransactionList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(s.subject)+" ")])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),t("div",{staticClass:"col-auto"},[e._v(e._s(s.email))])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(e.$day.format(s.createdAt,!0))+" ")])])]),t("div",{staticClass:"col-auto q-mr-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.showMailAttachments(s)}}},[s.attachmentCount?t("span",{staticClass:"badge"},[e._v(e._s(s.attachmentCount)+" ")]):e._e()]),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"resend",expression:"'resend'",modifiers:{top:!0}}],attrs:{icon:"mdi-send",color:"secondary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.resendMail(s.ezMailId)}}})],1)])])]}))],2)]:e._e(),"INCOMING"===e.mailTab?[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[e._l(e.incomingMails,(function(s){return[t("div",{key:"incoming"+s.id,staticClass:"mailTransactionList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(s.subject)+" ")])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),t("div",{staticClass:"col-auto"},[e._v(e._s(s.email))])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(e.$day.format(s.createdAt,!0))+" ")])])]),t("div",{staticClass:"col-auto q-mr-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.showMailAttachments(s)}}},[s.attachmentCount?t("span",{staticClass:"badge"},[e._v(e._s(s.attachmentCount)+" ")]):e._e()])],1)])])]}))],2)]:e._e()],2)]),t("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(t){e.mailAttachmentSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Mail Attachments ")]},proxy:!0}]),model:{value:e.mailAttachmentSheet,callback:function(t){e.mailAttachmentSheet=t},expression:"mailAttachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 200px)"}},[e._l(e.mailAttachmentList,(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openAttachmentFile(s)}}},[e._v(" "+e._s(s.name)+" ")])]),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])]}))],2)],1)]),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[e.selectedFile.formJsonId?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:e.getLabel(e.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:e._e(),t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])],2)]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.documentActionList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.documentAction(s.id)}}})})),1)],1)],1)]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myAttachmentFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])]),t("Modal",{attrs:{width:"70vw","has-footer":""},on:{input:e.closeRequestActionModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Request Action")]},proxy:!0},{key:"default",fn:function(){return[t("RenderForm",{attrs:{"form-id":e.formId,panels:e.panels,"secondary-panels":e.secondaryPanels,"form-settings":e.formSettings,"form-model":e.formModel,"workflow-form-model":e.workflowFormModel,"save-action":e.saveAction},on:{"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t}}}),e.internalForward.proceed&&"Assign"===e.groupActionModalButton.name?t("div",[t("MultiSelectField",{staticClass:"field q-ml-md q-mr-md q-mb-md",attrs:{label:"users","is-mandatory":"",options:e.userList},model:{value:e.forwardUsers,callback:function(t){e.forwardUsers=t},expression:"forwardUsers"}}),t("TextAreaField",{staticClass:"field q-ml-md q-mr-md q-mb-md",attrs:{placeholder:"Type a comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1):e._e()]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:e.groupActionModalButton.name,color:e.groupActionModalButton.color},on:{click:e.submitGroupAction}})]},proxy:!0}]),model:{value:e.requestActionModal,callback:function(t){e.requestActionModal=t},expression:"requestActionModal"}}),t("Modal",{attrs:{width:"40vw",height:"60vh","has-footer":""},on:{input:function(t){e.saveAction="",e.workflowFormModel={},e.processForwardModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e.processForwardGroupAction?e._e():t("span",[e._v('"'+e._s(e.selectedProcess.requestNo)+'"')]),e.isTenantGOTO()||e.isTenantArmgroup()?[e._v(" Process Assign ")]:[e._v(" Process Forward ")]]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"processForward"}},[e.isTenantArmgroup()?[t("SelectField",{staticClass:"field q-mb-md",attrs:{label:"users",options:e.userList},model:{value:e.armgroupForwardUser,callback:function(t){e.armgroupForwardUser=t},expression:"armgroupForwardUser"}})]:[t("MultiSelectField",{staticClass:"field q-mb-md",attrs:{label:"users",options:e.userList},model:{value:e.forwardUsers,callback:function(t){e.forwardUsers=t},expression:"forwardUsers"}}),t("MultiSelectField",{staticClass:"field",attrs:{label:"group",options:e.groupList},model:{value:e.forwardGroups,callback:function(t){e.forwardGroups=t},expression:"forwardGroups"}}),e.processForwardGroupAction?t("TextAreaField",{staticClass:"field q-mt-md",attrs:{placeholder:"Type a comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}}):e._e()]],2)]},proxy:!0},{key:"footer",fn:function(){return[e.isTenantGOTO()||e.isTenantArmgroup()?[t("BaseButton",{attrs:{label:"Assign",color:"orange"},on:{click:function(t){e.processForwardGroupAction?e.groupProcessRequest():e.processRequest(!1,!1)}}})]:[t("BaseButton",{attrs:{label:"Forward",color:"orange"},on:{click:function(t){e.processForwardGroupAction?e.groupProcessRequest():e.processRequest(!1,!1)}}})]]},proxy:!0}]),model:{value:e.processForwardModal,callback:function(t){e.processForwardModal=t},expression:"processForwardModal"}}),t("Sheet",{attrs:{width:"40vw","has-footer":""},on:{input:e.closeJiraIssueSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" JIRA - Create Issue ")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"jiraIssue",attrs:{id:"content-wrapper"}},[t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"field-wrapper"},[t("ValidationProvider",{attrs:{name:"Issue Name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{staticClass:"field",attrs:{label:"Issue Name","is-mandatory":"",error:s[0]},model:{value:e.issueName,callback:function(t){e.issueName=t},expression:"issueName"}})]}}])}),e._e(),e._e(),t("ValidationProvider",{attrs:{name:"Description",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextAreaField",{staticClass:"field",attrs:{label:"Description","is-mandatory":"",error:s[0]},model:{value:e.issueDescription,callback:function(t){e.issueDescription=t},expression:"issueDescription"}})]}}])}),e._e(),e._e(),e._e()],1)])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Create Issue",color:"primary"},on:{click:e.createJiraIssue}})]},proxy:!0}]),model:{value:e.jiraIssueSheet,callback:function(t){e.jiraIssueSheet=t},expression:"jiraIssueSheet"}}),t("Modal",{attrs:{width:"40vw",height:"70vh","has-footer":""},on:{input:e.closeJiraConfirmModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" JIRA - Issue Created Successful ")]},proxy:!0},{key:"default",fn:function(){return[t("div",[t("div",{staticClass:"field-wrapper"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("FormFieldLabel",{attrs:{label:"REF# ID","is-mandatory":""}})],1),t("div",{staticClass:"col-auto q-ml-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Copy Reference Id",expression:"'Copy Reference Id'",modifiers:{top:!0}}],staticClass:"copyActions",attrs:{icon:"mdi-content-copy",color:"secondary","no-border":"",size:"12px"},on:{click:function(t){return e.copyText(e.issueRef.id)}}})],1)]),t("TextField",{staticClass:"q-mb-sm",attrs:{"is-readonly":""},model:{value:e.issueRef.id,callback:function(t){e.$set(e.issueRef,"id",t)},expression:"issueRef.id"}}),t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("FormFieldLabel",{attrs:{label:"KEY","is-mandatory":""}})],1),t("div",{staticClass:"col-auto q-ml-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Copy Reference Key",expression:"'Copy Reference Key'",modifiers:{top:!0}}],staticClass:"copyActions",attrs:{icon:"mdi-content-copy",color:"secondary","no-border":"",size:"12px"},on:{click:function(t){return e.copyText(e.issueRef.key)}}})],1)]),t("TextField",{staticClass:"q-mb-sm",attrs:{"is-readonly":""},model:{value:e.issueRef.key,callback:function(t){e.$set(e.issueRef,"key",t)},expression:"issueRef.key"}}),t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("FormFieldLabel",{attrs:{label:"REF# URL","is-mandatory":""}})],1),t("div",{staticClass:"col-auto q-ml-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Copy Reference URL",expression:"'Copy Reference URL'",modifiers:{top:!0}}],staticClass:"copyActions",attrs:{icon:"mdi-content-copy",color:"secondary","no-border":"",size:"12px"},on:{click:function(t){return e.copyText(e.issueRef.self)}}})],1)]),t("TextField",{staticClass:"q-mb-sm",attrs:{"is-readonly":""},model:{value:e.issueRef.self,callback:function(t){e.$set(e.issueRef,"self",t)},expression:"issueRef.self"}})],1)])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Close",color:"primary"},on:{click:e.closeJiraConfirmModal}})]},proxy:!0}]),model:{value:e.jiraConfirmModal,callback:function(t){e.jiraConfirmModal=t},expression:"jiraConfirmModal"}}),t("Sheet",{attrs:{width:"30vw"},on:{input:e.closeTaskSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Tasks ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Add Task",expression:"'Add Task'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-plus",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.$emit("addTask")}}})]},proxy:!0}]),model:{value:e.taskSheet,callback:function(t){e.taskSheet=t},expression:"taskSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[e._l(e.taskEntries,(function(s){return[t("div",{key:s.id,staticClass:"taskEntries"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto q-mr-md",staticStyle:{"margin-top":"3px"},on:{click:function(t){return e.$emit("viewTask",s.id)}}},[e._v(" "+e._s(s.name)+" ")]),t("q-chip",{attrs:{size:"10px",color:e.getColor(s.priority),"text-color":"white"}},[e._v(" "+e._s(s.priority)+" ")]),t("q-chip",{attrs:{size:"10px",color:e.getColor(s.status),"text-color":"white"}},[e._v(" "+e._s(s.status)+" ")])],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col-12"},[e._v("Assigned To: "+e._s(s.assigned))]),t("div",{staticClass:"col-12"},[e._v(" Start Date: "+e._s(e.$day.format(s.startDate,!1))+" "),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" End Date: "+e._s(e.$day.format(s.endDate,!1))+" ")],1)])])]}))],2)]),t("EmailSharing",{attrs:{"repository-id":e.workflow.repositoryId,"file-list":e.selectedFileList},on:{"update:fileList":function(t){e.selectedFileList=t},"update:file-list":function(t){e.selectedFileList=t}},model:{value:e.emailSharingSheet,callback:function(t){e.emailSharingSheet=t},expression:"emailSharingSheet"}}),t("FileDetails",{attrs:{"file-data":e.fileData},model:{value:e.fileDetailsSheet,callback:function(t){e.fileDetailsSheet=t},expression:"fileDetailsSheet"}}),t("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"red"},on:{input:function(t){e.errorModal=!1,e.errorMessage=""}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Error Message")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" "+e._s(e.errorMessage)+" ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Close",color:"red"},on:{click:function(t){e.errorModal=!1,e.errorMessage=""}}})]},proxy:!0}]),model:{value:e.errorModal,callback:function(t){e.errorModal=t},expression:"errorModal"}}),t("Confirm",{attrs:{icon:"eva-checkmark-circle-2-outline","icon-color":"green"},on:{input:function(t){e.successModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Success")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" Your request for Jira ticket creation has been submitted and the process has been initiated. You will receive notifications once the process is complete. ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Close",color:"primary"},on:{click:function(t){e.successModal=!1}}})]},proxy:!0}]),model:{value:e.successModal,callback:function(t){e.successModal=t},expression:"successModal"}}),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.saveAction="",e.workflowFormModel={},e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[e.checkTenant()?[t("div",{staticClass:"row actions advance-cmd"},[e.attachmentList.length&&e.fileNames.length?[t("CheckboxField",{staticClass:"col-auto q-pr-sm",staticStyle:{margin:"auto"},attrs:{label:"Add Comment to PDF"},model:{value:e.attachComment,callback:function(t){e.attachComment=t},expression:"attachComment"}}),e.attachComment?t("SelectField",{staticClass:"field comment-attach",attrs:{"is-searchable":!0,options:e.fileNames},model:{value:e.selectedFileForAttach,callback:function(t){e.selectedFileForAttach=t},expression:"selectedFileForAttach"}}):e._e()]:e._e(),e.selectedProcess.processId&&"START"!==e.selectedProcess.stageType?t("CheckboxField",{staticClass:"col-auto q-pl-sm adv-notify-cmd",attrs:{label:"Notify Initiator/Requester"},model:{value:e.notifyInitiator,callback:function(t){e.notifyInitiator=t},expression:"notifyInitiator"}}):e._e()],2),e.checkTenant()&&e.displayInternalPublic?t("SingleChoiceField",{staticClass:"actions q-mr-sm noborder",attrs:{options:e.commentActions,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e()]:e._e(),e.isTenantGOTOComments()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.jiraCommentActions,"options-per-line":2},model:{value:e.jiraCommentAction,callback:function(t){e.jiraCommentAction=t},expression:"jiraCommentAction"}})]:e._e(),t("BaseButton",{attrs:{label:"Post Comments",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}}),t("Confirm",{attrs:{icon:"mdi-file-alert","icon-color":"red"},on:{input:e.closeAlertModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Documents Required!")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md text-md"},[t("p",[e._v(" Are you sure you want to submit the request without attaching the required documents. ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no"},on:{click:e.closeAlertModal}}),t("BaseButton",{attrs:{label:"yes",color:"primary"},on:{click:e.proceedSubmission}})]},proxy:!0}]),model:{value:e.alertModal,callback:function(t){e.alertModal=t},expression:"alertModal"}}),t("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"red"},on:{input:function(t){e.saveAction="",e.workflowFormModel="",e.actionPasswordConfirm=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Action Password")]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"passwordForm"},[t("ValidationProvider",{attrs:{name:"password",rules:{required:!0,password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("PasswordField",{staticClass:"q-my-lg",attrs:{"is-mandatory":"","is-readonly":e.isLoading,error:s[0],"auto-focus":!0},on:{enter:e.validatePassword},model:{value:e.actionUserPassword,callback:function(t){e.actionUserPassword=t},expression:"actionUserPassword"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"validate","is-loading":e.isLoading},on:{click:e.validatePassword}})]},proxy:!0}]),model:{value:e.actionPasswordConfirm,callback:function(t){e.actionPasswordConfirm=t},expression:"actionPasswordConfirm"}}),t("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"red"},on:{input:function(t){e.actionConfirmAlert=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Confirmation")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(' Are you sure you want to confirm the action as " '),t("b",[e._v(e._s(e.saveAction))]),e._v('"? ')])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"primary"},on:{click:function(t){e.saveAction="",e.workflowFormModel={},e.actionConfirmAlert=!1}}}),t("BaseButton",{attrs:{label:"yes",color:"primary"},on:{click:function(t){e.actionConfirmAlert=!1,e.processRequest(!1,!1)}}})]},proxy:!0}]),model:{value:e.actionConfirmAlert,callback:function(t){e.actionConfirmAlert=t},expression:"actionConfirmAlert"}}),t("MetaDataEdit",{attrs:{value:e.showMetaDataEditModal,file:e.workflow,"repository-field":e.repositoryField,"file-data":e.fileData,title:e.metaDataTitle||"Index",columns:e.columns,"modal-value":e.workflowModel,"upload-filename":e.uploadFilename,"meta-data-fields":e.metaDataModal},on:{close:e.closeMetaDataEditModal,save:e.saveMetaData}}),t("Sheet",{attrs:{width:e.formWidth,"has-footer":!e.isCustomizedWorkflow,"no-padding":""},on:{input:function(t){e.showCustomProcessForm=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Custom Form ")]},proxy:!0},{key:"footer",fn:function(){},proxy:!0}]),model:{value:e.showCustomProcessForm,callback:function(t){e.showCustomProcessForm=t},expression:"showCustomProcessForm"}},[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t("div",{staticClass:"col"},[e.isCustomizedWorkflow?[t("CustomProcessForm",{attrs:{panels:e.panels,"secondary-panels":e.secondaryPanels,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel,actions:e.actions},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t}}})]:e._e()],2),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(s){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()])]}))],2)])]),e.initiateSubWorkflowProcess||e.openSubProcessSheet?t("SubWorkflowProcess",{attrs:{"workflow-id":e.subWorkflowId||e.subProcessData.id,"initiate-sub-workflow-process":e.initiateSubWorkflowProcess,"main-workflow-id":e.workflow.id,"main-process-id":e.selectedProcess.processId,"sub-process-link":e.subProcessLink,"selected-process":e.subProcessData,"open-sub-process":e.openSubProcessSheet,"main-form-fields":e.formFields,"main-form-model":e.checkFormModel,"sub-process-id":e.subProcessId},on:{"update:subProcessId":function(t){e.subProcessId=t},"update:sub-process-id":function(t){e.subProcessId=t},closeProcessSheet:e.closeSubProcess}}):e._e(),t("Sheet",{attrs:{width:"30vw"},on:{input:e.closeSubProcessSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Linked Request ")]},proxy:!0}]),model:{value:e.subProcessSheet,callback:function(t){e.subProcessSheet=t},expression:"subProcessSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[e._l(e.subProcessTickets,(function(s,i){return[t("div",{key:i,staticClass:"subProcess"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"o_account_tree",color:"primary-4"}})],1),t("div",{staticClass:"col ellipsis text-underline",on:{click:function(t){return e.openSubProcess(s)}}},[e._v(" "+e._s(s.requestNo)+" ")]),"1"===s.flowStatus?t("q-chip",{attrs:{size:"10px",color:"green","text-color":"white"}},[e._v(" Completed ")]):t("q-chip",{attrs:{size:"10px",color:"orange","text-color":"white"}},[e._v(" Running ")])],1),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(s.name))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.stage))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.duration)+" ago")])],1)]),e._e()])]}))],2)]),t("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"orange"},on:{input:function(t){e.requestReleaseModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Request release confirmation")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(' Please confirm the request "'),t("b",[e._v(e._s(e.selectedProcess.requestNo))]),e._v(", has been released by you to be approved by others. ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel",color:"orange"},on:{click:function(t){e.requestReleaseModal=!1}}}),t("BaseButton",{attrs:{label:"Confirm",color:"orange"},on:{click:function(t){e.requestReleaseModal=!1,e.$emit("release",e.selectedProcess),e.closeProcessSheet(!0)}}})]},proxy:!0}]),model:{value:e.requestReleaseModal,callback:function(t){e.requestReleaseModal=t},expression:"requestReleaseModal"}}),t("GenerateQr",{attrs:{value:e.showQr,"repository-id":e.workflow.repositoryId,"field-id":e.selectedFieldId},on:{checkUploadId:e.checkMobileUpload,input:function(t){e.showQr=!1}}}),e.showAttachmentSheet?t("Attachments",{attrs:{value:e.showAttachmentSheet,"selected-process":e.selectedProcess,workflow:e.workflow,"selected-node":e.selectedNode,"initiate-process":e.initiateProcess,"form-check-list":e.formCheckList,"check-list":e.checkList,wform:e.wform,"repository-details":e.repositoryDetails,"workflow-model":e.workflowModel,"form-upload-files":e.formUploadFiles,"repository-field":e.repositoryField,columns:e.columns,attachments:e.attachmentList,"workflow-id":e.workflow.id},on:{"update:value":function(t){e.showAttachmentSheet=t},"update:attachments":function(t){e.attachmentList=t},attachmentCount:e.attachmentCount}}):e._e(),e.showCommentsSheet?t("Comments",{attrs:{value:e.showCommentsSheet,"selected-process":e.selectedProcess,workflow:e.workflow,"selected-node":e.selectedNode,"initiate-process":e.initiateProcess,"attachment-list":e.attachmentList,"workflow-id":e.workflow.id,"file-names":e.fileNames,comments:e.commentsList,"display-internal-public":e.displayInternalPublic},on:{"update:value":function(t){e.showCommentsSheet=t},"update:comments":function(t){e.commentsList=t},commentsCount:e.commentsCount}}):e._e()],1)},a=[],o=(s("14d9"),s("caad"),s("13d5"),s("7bb1")),r=s("381e"),n=s("4bc4"),l=s("1b0d"),c=s("3445"),d=s("869e"),m=s("6df3"),h=s("b3d1"),u=s("2b88"),p=s("064c"),f=s("381b"),v=function(){var e=this,t=e._self._c;return t("ItemList",{attrs:{columns:e.columns,items:e.items,"group-key":e.groupKey},on:{groupItemSelected:e.updateGroupItemSelection,group:e.updateSelectionGroup,action:e.groupRequestAction,openSubWorkflow:e.updateSelectedSubWorkflow},scopedSlots:e._u([{key:"avatar",fn:function({item:s}){return[t("div",{staticClass:"row"},["inbox"===e.mode&&s.key&&s.checkboxRequired?t("CheckboxField",{staticClass:"col q-mr-md",attrs:{value:s.checked},on:{input:function(t){return e.$emit("selected",s)}}}):e._e(),t("BaseIcon",{staticClass:"icon col",attrs:{name:s.starred?"mdi-star":"mdi-star-outline",color:e.darkTheme?"secondary":"primary"},on:{click:function(t){return e.$emit("starred",s)}}})],1)]}},{key:"title",fn:function({item:s}){return[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto ellipsis",style:s.requestNo.length>50?"max-width: 250px":""},[t("span",{staticClass:"stat",class:s.link?"text-underline":"",on:{click:function(t){return t.stopPropagation(),e.$emit("show",s.id,s.workflowId)}}},[e._v(" "+e._s(s.requestNo||"-")+" ")]),s.jiraIssueInfo&&s.jiraIssueInfo.id?[t("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),t("a",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"JIRA Issue Link",expression:"'JIRA Issue Link'",modifiers:{top:!0}}],staticStyle:{color:"inherit"},attrs:{href:e.getJIRALink(s.jiraIssueInfo),target:"_blank"}},[e._v(" REF# ID: "+e._s(s.jiraIssueInfo.id)+" ")]),t("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),t("span",[e._v(" KEY: "+e._s(s.jiraIssueInfo.key)+" ")]),s.jiraIssueInfo.assignee?[t("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),t("span",{staticClass:"text-primary text-bold"},[e._v("ASSIGNEE: "+e._s(s.jiraIssueInfo.assignee))])]:e._e(),s.jiraIssueInfo.issueStatus?[t("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),t("span",{staticClass:"text-primary text-bold"},[e._v("STATUS: "+e._s(s.jiraIssueInfo.issueStatus))])]:e._e()]:e._e()],2)]),!e.isGOTOTenant||"inbox"!==e.mode&&"common"!==e.mode&&"payment"!==e.mode||s.mlPrediction||!s.mlCondition?e._e():t("div",{staticClass:"row q-pt-sm"},[s.mlCondition.indexOf("[")>-1?e._l(JSON.parse(s.mlCondition),(function(i){return t("div",{key:s.processId+""+i.fieldName,on:{click:function(t){return t.stopPropagation(),e.$emit("validation",s.processId)}}},[t("q-chip",{staticClass:"chips gray-hover",class:"Matched"===i.status?"green-hover":"Not Matched"===i.status?"red-hover":"orange-hover",attrs:{outline:"",color:"Matched"===i.status?"green":"Not Matched"===i.status?"red":"orange"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"mdi-robot",color:"Matched"===i.status?"green":"Not Matched"===i.status?"red":"orange","text-color":"white"}}),e._v(" "+e._s(i.fieldValue)+" ")],1)],1)})):[e._l(s.mlCondition.split(","),(function(s){return[t("q-chip",{key:s,staticClass:"chips pink-hover",attrs:{outline:"",color:"pink"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"mdi-information-variant",color:"pink","text-color":"white"}}),e._v(" "+e._s(s)+" ")],1)]}))]],2)]}},{key:"mlcondition",fn:function({item:s}){return["inbox"!==e.mode&&"common"!==e.mode&&"payment"!==e.mode||!s.mlCondition?e._e():t("div",[e._l(s.mlCondition.split(","),(function(s){return[s.indexOf("Extracted")>-1?[t("q-chip",{key:s,staticClass:"chips green-hover",attrs:{outline:"",color:"green"}},[t("q-avatar",{attrs:{icon:"mdi-information-variant",color:"green","text-color":"white"}}),e._v(" "+e._s(s)+" ")],1)]:s.indexOf("Processing")>-1?[t("q-chip",{key:s,staticClass:"chips orange-hover",attrs:{outline:"",color:"orange"}},[t("q-avatar",{attrs:{icon:"mdi-information-variant",color:"orange","text-color":"white"}}),e._v(" "+e._s(s)+" ")],1)]:[t("q-chip",{key:s,staticClass:"chips pink-hover",attrs:{outline:"",color:"pink"}},[t("q-avatar",{attrs:{icon:"mdi-information-variant",color:"pink","text-color":"white"}}),e._v(" "+e._s(s)+" ")],1)]]}))],2)]}},{key:"actions",fn:function({item:s}){return[t("div",{staticClass:"row",staticStyle:{width:"100px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"history",expression:"'history'",modifiers:{top:!0}}],staticClass:"icon",attrs:{icon:"mdi-history",color:"primary","is-flat":"","no-border":""},on:{click:function(t){return e.$emit("history",s.id)}}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"","no-border":"",icon:"mdi-attachment",color:"primary"},on:{click:function(t){return t.stopPropagation(),e.$emit("attachments",s)}}},[s.attachmentCount?t("span",{staticClass:"badge"},[e._v(e._s(s.attachmentCount)+" ")]):e._e()]),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"comments",expression:"'comments'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"","no-border":"",icon:"mdi-comment-text-outline",color:"primary"},on:{click:function(t){return t.stopPropagation(),e.$emit("comments",s)}}},[s.commentsCount?t("span",{staticClass:"badge"},[e._v(e._s(s.commentsCount)+" ")]):e._e()])],1)]}},{key:"subactions",fn:function({item:s}){return[t("div",{staticClass:"row",staticStyle:{width:"100px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"history",expression:"'history'",modifiers:{top:!0}}],staticClass:"icon",staticStyle:{margin:"auto"},attrs:{icon:"mdi-history",color:"primary","is-flat":"","no-border":""},on:{click:function(t){return e.subWorkflowHistory(s)}}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"","no-border":"",icon:"mdi-attachment",color:"primary"},on:{click:function(t){return t.stopPropagation(),e.$emit("subAttachments",s)}}},[s.attachmentCount?t("span",{staticClass:"badge"},[e._v(e._s(s.attachmentCount)+" ")]):e._e()]),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"comments",expression:"'comments'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"","no-border":"",icon:"mdi-comment-text-outline",color:"primary"},on:{click:function(t){return t.stopPropagation(),e.$emit("subComments",s)}}},[s.commentsCount?t("span",{staticClass:"badge"},[e._v(e._s(s.commentsCount)+" ")]):e._e()])],1)]}}])})},y=[],b=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"process-item-list"}},[e.dummydata?e._t("default"):e._e(),e.items.length?t("table",[t("thead",[t("tr",[t("th",{staticClass:"sticky icon",staticStyle:{left:"0"}}),e.title?t("th",{staticClass:"sticky",staticStyle:{left:"36px"}},[e._t("titleHead",(function(){return[e._v(" "+e._s(e.title.label)+" ")]}),{title:e.title.label})],2):e._e(),e.mlCondition?t("th",[e._t("titleHead",(function(){return[e._v(" "+e._s(e.mlCondition.label)+" ")]}),{title:e.mlCondition.label})],2):e._e(),e._l(e._columns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),t("th",{staticStyle:{right:"0"}})],2)]),t("tbody",[e._l(e.groupKey,(function(s){return[s.name&&e.groupRequestListName(s.name)?t("tr",{key:s.name,staticClass:"background"},[t("td",{staticClass:"sticky",staticStyle:{left:"0"},attrs:{colspan:"4"}},[s.name?t("div",{key:s.name,staticClass:"row"},[t("div",{staticClass:"group-by col-auto"},[s.checkboxRequired?t("CheckboxField",{staticClass:"col-auto check-group-by",attrs:{value:s.checked},on:{input:function(t){return e.updateSelectionGroup(s)}}}):e._e(),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"groupLabel"},[e._v(" "+e._s(s.name+" ("+s.totalCount+")")+" ")])]),t("BaseIcon",{staticClass:"cursor-pointer q-ml-sm",attrs:{name:s.expand?"mdi-chevron-down":"mdi-chevron-up"},on:{click:function(e){s.expand=!s.expand}}})],1),t("div",{staticClass:"q-ml-sm"},[e.groupSelected(s.name)&&s.actions.length?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],attrs:{icon:"eva-more-horizontal-outline",size:"16px",color:"primary-5"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},e._l(s.actions,(function(i){return t("ListItem",{key:i.id,attrs:{label:i.name,icon:i.icon,color:i.color},on:{click:function(t){return e.$emit("action",i,s)}}})})),1)],1):e._e()],1)]):e._e()])]):e._e(),e._l(e.groupRequestList(s.name),(function(i){return[i.visible&&s.expand?t("tr",{key:s.name+"-"+i.id,staticClass:"background",on:{click:function(t){return e.expandRow(i)}}},[t("td",{staticClass:"sticky",staticStyle:{left:"0",width:"36px"},style:{background:e.actionColor(i.lastAction)}},[t("div",{staticClass:"items-center justify-center",staticStyle:{display:"flex"}},[e._t("avatar",(function(){return[t("BaseIcon",{attrs:{name:i.icon,color:"secondary"}})]}),{item:i}),i.subWorkflow?[i.subWorkflow.length?t("BaseIcon",{staticClass:"cursor-pointer q-ml-sm",attrs:{name:i.expandSubworkflow?"mdi-chevron-down":"mdi-chevron-up"}}):e._e()]:e._e()],2)]),e.title?t("td",{staticClass:"sticky",staticStyle:{left:"0",width:"20%",color:"#007bff",cursor:"pointer"}},[t("div",[e._t("title",(function(){return[t("div",{staticClass:"font-medium ellipsis",class:i.link?"text-underline":"",staticStyle:{overflow:"hidden !important","white-space":"unset !important","max-width":"250px"}},[e._v(" "+e._s(i[e.title.name])+" ")])]}),{item:i,title:i[e.title.name]})],2)]):e._e(),e.mlCondition?t("td",[e._t("mlcondition",(function(){return[t("div",{staticClass:"font-medium q-mr-xl"},[e._v(" "+e._s(i[e.mlCondition.name])+" ")])]}),{item:i,mlcondition:i[e.mlCondition.name]})],2):e._e(),e._l(e._columns,(function(s){return t("td",{key:s.id},[e._t(s.name,(function(){return[e._v(" "+e._s(i[s.name]||"-")+" ")]}),{value:i[s.name],item:i})],2)})),t("td",{staticClass:"sticky",staticStyle:{right:"0"}},[e._t("actions",null,{item:i})],2)],2):e._e(),i.subWorkflow?[i.subWorkflow.length?[i.expandSubworkflow?t("tr",{key:s.name+"+"+i.id},[t("td",{attrs:{colspan:e._columns.length+3}},[t("table",{key:"subtable"+s.id,staticStyle:{"margin-left":"20px",border:"1px solid var(--divider-color)","table-layout":"fixed","max-width":"63%","min-width":"calc(59% - 1px)","border-collapse":"collapse","white-space":"nowrap"}},[t("thead",[t("tr",[t("th",{staticClass:"sticky icon",staticStyle:{left:"0","background-color":"rgb(222 217 247)",width:"2%"},attrs:{name:"icon"}}),e.title?t("th",{staticClass:"sticky",staticStyle:{left:"36px","background-color":"rgb(222 217 247)",width:"2%"},attrs:{name:"title"}},[t("div",{staticClass:"font-medium ellipsis",staticStyle:{"max-width":"250px"}},[e._v(" "+e._s(e.title.label)+" ")])]):e._e(),e._l(e._subWorkflowColumns,(function(s){return t("th",{key:s.id,staticStyle:{"background-color":"rgb(222 217 247)",width:"2%"}},[e._v(" "+e._s(s.label)+" ")])}))],2)]),t("tbody",[e._l(i.subWorkflow,(function(s){return[t("tr",{key:s.requestNo},[t("td",{staticClass:"sticky icon",staticStyle:{left:"0"},attrs:{name:"avatar"}},[t("div",{staticClass:"row items-center sticky justify-center"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.iconTooltip,expression:"subItem.iconTooltip",modifiers:{top:!0}}],attrs:{name:s.icon,color:s.color}})],1)]),t("td",{staticClass:"sticky",staticStyle:{left:"0",width:"20%",color:"#007bff",cursor:"pointer"},attrs:{name:"title"}},[t("div",{staticClass:"row items-center text-underline",staticStyle:{overflow:"hidden !important","white-space":"unset !important",width:"220px"},on:{click:function(t){return e.openSubProcess(s)}}},[e._v(" "+e._s(s.requestNo||"-")+" ")])]),t("td",{staticClass:"sub-background"},[e._v(" "+e._s(s.stage)+" ")]),t("td",{staticClass:"sub-background"},[e._v(" "+e._s(s.raisedBy)+" ")]),t("td",{staticClass:"sub-background"},[e._v(" "+e._s(s.raisedAt)+" ")]),t("td",[e._v(" "+e._s(s.duration)+" ")]),t("td",{staticClass:"sticky",staticStyle:{right:"0"}},[e._t("subactions",null,{item:s})],2)])]}))],2)])])]):e._e()]:e._e()]:e._e()]}))]}))],2)]):e._e()],2)},w=[],g=s("cade"),C=s("2f62"),k={name:"ItemList",components:{CheckboxField:d["a"],ListItem:g["a"]},props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},groupKey:{type:Array,default:()=>[]},groupItemSelected:{type:Boolean,default:!1}},data(){return{dummydata:!1}},computed:{...Object(C["c"])(["darkTheme"]),_columns(){return this.columns.filter(e=>"TITLE"!==e.type&&"MLCONDITION"!==e.type&&e.isVisible)},title(){return this.columns.find(e=>"TITLE"===e.type)},mlCondition(){return this.columns.find(e=>"MLCONDITION"===e.type)},_subWorkflowColumns(){let e=[{id:this.$nano.id(),name:"stage",label:"Stage",type:"SINGLE_SELECT",isVisible:!0,isSortable:!0,isGroupable:!1},{id:this.$nano.id(),name:"raisedBy",label:"Raised By",type:"SINGLE_SELECT",isVisible:!0,isSortable:!0,isGroupable:!1},{id:this.$nano.id(),name:"raisedAt",label:"Raised On",type:"DATE",isVisible:!0,isSortable:!0,isGroupable:!1},{id:this.$nano.id(),name:"duration",label:"Duration",type:"SINGLE_SELECT",isVisible:!0,isSortable:!0,isGroupable:!1}];return e}},methods:{groupRequestList(e){return this.items.filter(t=>t.key===e)},groupRequestListName(e){const t=this.items.filter(t=>t.key===e);return!!(t.length>0&&t.some(e=>!0===e.visible))},groupSelected(e){let t=this.items.filter(t=>t.key===e),s=0;return t.forEach(e=>{e.checked&&s++}),s>1},updateSelectionGroup(e){this.$emit("group",e)},actionColor(e){return this.darkTheme?e?-1!==e.toLowerCase().indexOf("reply")?"#ca811680":-1!==e.toLowerCase().indexOf("forward")?"#fcf5bc80":-1!==e.toLowerCase().indexOf("approve")?"#d2bc0980":-1!==e.toLowerCase().indexOf("reject")?"#c9141480":"#7f7f7f80":"#7f7f7f80":e?-1!==e.toLowerCase().indexOf("reply")?"#f9e6ca":-1!==e.toLowerCase().indexOf("forward")?"#fcf5bc":-1!==e.toLowerCase().indexOf("approve")?"#bfe2c0":-1!==e.toLowerCase().indexOf("reject")?"#f9c3c3":"#ffffff":"#ffffff"},expandRow(e){e.expandSubworkflow=!e.expandSubworkflow,this.dummydata=!this.dummydata},openSubProcess(e){this.$emit("openSubWorkflow",e)}}},I=k,S=(s("e603"),s("2877")),_=s("4e73"),A=s("93dc"),T=s.n(A),x=Object(S["a"])(I,b,w,!1,null,"f5c99f84",null),F=x.exports;T()(x,"components",{QMenu:_["a"]});var L={name:"ProcessList",components:{ItemList:F,CheckboxField:d["a"]},props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},mode:{type:String,required:!0},groupKey:{type:Array,default:()=>[]},groupItemSelected:{type:Boolean,default:!1}},computed:{...Object(C["c"])(["darkTheme"]),isGOTOTenant(){let e=location.origin;return"https://app.ezofis.com"===e}},methods:{updateSelectionGroup(e){this.$emit("group",e)},groupRequestAction(e,t){this.$emit("action",e,t)},getJIRALink(e){let t=new URL(e.self),s=t.origin.replace("https://jira-external-tools-integration.getgotools.net","https://jira.ops.expertcity.com");return`${s}/browse/${e.key}`},updateSelectedSubWorkflow(e){this.$emit("openSubWorkflow",e)},updateGroupItemSelection(e){this.$emit("update:groupItemSelected",e)},subWorkflowHistory(e){this.$emit("SubHistory",e.processId,e.parentProcessID)}}},P=L,$=(s("b148"),s("b047")),B=s("cb32"),N=Object(S["a"])(P,v,y,!1,null,"5114fc78",null),M=N.exports;T()(N,"components",{QChip:$["a"],QAvatar:B["a"]});var D=s("6a70"),q=s("27bd"),O=s("c559"),E=s("c3d2"),R=s("b6d2"),V=s("0cdc"),z=s("fa1f"),j=s("a7d2"),U=s("dd90"),W=s("bc3a"),J=s.n(W),H=s("eff0"),G=s("5e23"),K=s("abe1"),Y=s("cdde"),Q=s("1c54"),X=s("9234"),Z=s("12b8"),ee=s("a589"),te=s("c52a"),se=s("695e"),ie=s("8bc3"),ae=s("ee54"),oe=s("b94d"),re=s("42fc"),ne=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"search-items"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Search By",expression:"'Search By'",modifiers:{bottom:!0}}],attrs:{"is-flat":"",icon:"mdi-filter-plus-outline",color:e.activeFilter?"secondary":"gray","no-border":""}},[t("q-menu",{attrs:{"auto-close":"","transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top left"}},[t("div",{staticClass:"title-3 q-pa-xs border"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchColumns,expression:"searchColumns"}],ref:"searchQuery",staticClass:"q-pa-md",attrs:{type:"text",placeholder:"Search"},domProps:{value:e.searchColumns},on:{click:function(e){e.stopPropagation()},keyup:function(t){return e.searchColumnList(e.searchColumns)},input:function(t){t.target.composing||(e.searchColumns=t.target.value)}}})]),t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight,width:"240px"}},[e._l(e.columnList,(function(s){return[s.display&&!1!==s.isFilter?t("ListItem",{key:s.id,attrs:{icon:s.selected?"eva-radio-button-on":"eva-radio-button-off","is-selected":s.selected,label:s.label},on:{click:function(t){return e.updateFilterBy(s.id)}}}):e._e()]}))],2)],1)],1)],1)},le=[],ce={name:"SearchItems",components:{ListItem:g["a"]},props:{columns:{type:Array,default:()=>[]},selectedFilterColumn:{type:String,default:""}},data(){return{activeFilter:!1,searchColumns:"",columnList:[]}},computed:{scrollbarHeight(){const e=36*this.columns.length;return e>216?"276px":e+58+"px"}},watch:{columns:{deep:!0,immediate:!0,handler(){this.columns.length&&!this.activeFilter&&(this.columnList=[],this.columns.forEach(e=>{this.columnList.push({...e,selected:!1,display:"show"})}))}},selectedFilterColumn:{deep:!0,immediate:!0,handler(){this.selectedFilterColumn?this.activeFilter=!0:this.activeFilter=!1}}},methods:{searchColumnList(e){this.columnList.forEach(t=>{t.display="show",t.label.toLowerCase().includes(e.toLowerCase())||(t.display="")})},updateFilterBy(e){this.columnList.forEach(e=>{e.selected=!1});let t=this.columnList.find(t=>t.id===e);if(t){t.selected=!0,this.$emit("update:selectedFilterColumn",t.label);let e=[],s="CONTAINS";"DATE"===t.dataType&&(s="IS_EQUALS_TO"),e=[{filters:[{criteria:t.id,condition:s,value:"",dataType:t.dataType}],groupCondition:""}],this.$emit("update:filterSearchColumn",e),0===e.length&&this.$emit("update")}}}},de=ce,me=(s("1fa9"),Object(S["a"])(de,ne,le,!1,null,"4cd3e935",null)),he=me.exports;T()(me,"components",{QMenu:_["a"]});var ue=s("470f"),pe=s("98cf"),fe=s("909a"),ve=s("7ee8"),ye=s("9996"),be=s("ec15"),we=s("bb36"),ge=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"mdi-cellphone-link","icon-color":"secondary"},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Upload files from another device")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md row qr-contnt"},[t("img",{attrs:{src:e.qrImg}}),t("div",{staticClass:"row qr-info"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.tooltip,expression:"tooltip",modifiers:{top:!0}}],staticClass:"info-icon",attrs:{"inherit-color":"",name:"eva-alert-circle-outline"}}),t("p",[e._v("Keep the form open while uploading files.")])],1)])]},proxy:!0}])})},Ce=[],ke={name:"GenerateQr",components:{Confirm:Q["a"]},props:{value:{type:Boolean,required:!0},isReadonly:{type:Boolean,default:!1},repositoryId:{type:Number},fieldId:{type:String}},data(){return{qrImg:""}},watch:{value:{deep:!0,immediate:!0,handler(){this.value&&this.getQr()}}},methods:{handleInput(e){this.$emit("input",e),console.log(this.$store.state.session,"this.$store.state.session")},async getQr(){let e="http://localhost:8080"==location.origin?"http://52.172.32.88/app":location.origin,t={url:e+"/mobileUpload",jsonData:JSON.stringify([{repositoryId:this.repositoryId,fieldId:this.fieldId}]),status:0};console.log(t,"input");const{error:s,payload:i}=await l["p"].getQrcode(t);console.log(s,i,"error, payload"),console.log(JSON.parse(i.data),"url");const{id:a,output:o}=JSON.parse(i.data);this.qrImg="data:image/png;base64,"+o,console.log(this.qrImg,"this.qrImg",a),this.$emit("checkUploadId",a)}}},Ie=ke,Se=(s("9d3d"),Object(S["a"])(Ie,ge,Ce,!1,null,"7f52b105",null)),_e=Se.exports,Ae=s("46ab"),Te={name:"InboxList",components:{ValidationObserver:o["a"],ValidationProvider:o["b"],Sheet:r["a"],RenderForm:n["a"],FormFieldLabel:c["a"],CheckboxField:d["a"],TextAreaField:m["a"],TextField:h["a"],Portal:u["Portal"],ItemActions:p["a"],ProcessList:M,ListItem:g["a"],Modal:D["a"],FilterItems:q["a"],SortItems:O["a"],MultiSelectField:E["a"],Pagination:R["a"],ImportPopup:V["a"],FileIcon:z["a"],SignatureField:H["a"],EmailSharing:G["a"],FileDetails:K["a"],Confirm:Q["a"],SingleChoiceField:X["a"],SelectField:Z["a"],CustomForm:ee["default"],CustomProcessForm:te["a"],TextBuilderField:se["a"],PasswordField:ie["a"],MetaDataEdit:ae["a"],Tabs:oe["a"],SearchItems:he,SubWorkflowProcess:ue["a"],Attachments:be["a"],Comments:we["a"],GenerateQr:_e,ProgressBar:Ae["a"]},props:{selectedNode:{type:String,required:!0,default:"My Inbox"},myInbox:{type:Boolean,required:!0},workflow:{type:Object,required:!0},workflowList:{type:Array,default:()=>[]},workflowRequestList:{type:Array,default:()=>[]},groupKey:{type:Array,default:()=>[]},wform:{type:Object,default:()=>{}},repository:{type:Object,default:()=>{}},processActions:{type:Array,default:()=>[]},processActionsAddOn:{type:Array,default:()=>[]},selectedProcess:{type:Object,default:()=>{}},fullView:{type:Boolean,default:!1},activeView:{type:String,default:""},internalForward:{type:Object,default:()=>{}},userList:{type:Array,default:()=>[]},groupList:{type:Array,default:()=>[]},currentPage:{type:Number,default:1},itemsPerPage:{type:Number,default:50},totalItems:{type:Number,default:0},masterFormId:{type:Number,default:0},dataImported:{type:Boolean,default:!1},userSignature:{type:Boolean,default:!1},taskFormId:{type:Number,default:0},taskEntryId:{type:Array,default:()=>[]},taskEntries:{type:Array,default:()=>[]},checkList:{type:Array,default:()=>[]},customReply:{type:Boolean,default:!1},userReply:{type:Boolean,default:!1},toRequester:{type:Boolean,default:!1},dataValidationValues:{type:Array,default:()=>[]},customCloseProcessSheet:{type:Boolean,required:!1},selectedCompletedNode:{type:String,default:""},hideColumns:{type:Array,default:()=>[]},addTaskEnabled:{type:Boolean,default:!1},loadingBarInbox:{type:Boolean,default:!1},portalAction:{type:Boolean,default:!1},dashboard:{type:Boolean,default:!1},exporting:{type:Boolean,default:!1},dashboardView:{type:Boolean,default:!1},dashboardId:{type:Number,default:0},dashboardName:{type:String,default:""}},data(){return{hideActions:["sort","group"],search:"",initiate:!1,importExcel:!1,processSheet:!1,headerTitle:"",formModel:{},form:{},formId:"",actions:[],workflowFormModel:{},saveAction:"",generatePDF:0,documentRequired:!1,hasSelectedProcess:0,hasSelectedWorkflow:0,initiateProcess:!1,tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"mail transaction",value:"MAIL",icon:"mdi-email-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0},{id:this.$nano.id(),label:"task",value:"TASK",icon:"eva-cube-outline",count:0},{id:this.$nano.id(),label:"Data Validation",value:"VALIDATION",icon:"mdi-file-compare",count:0},{id:this.$nano.id(),label:"Sub Process",value:"SUB_PROCESS",icon:"eva-link-2-outline",count:0},{id:this.$nano.id(),label:"Form Entry History",value:"FORM_ENTRY_HISTORY",icon:"mdi-file-document",count:0}],mailTabs:[{id:this.$nano.id(),label:"outgoing",value:"OUTGOING",count:0},{id:this.$nano.id(),label:"incoming",value:"INCOMING",count:0}],mailTab:"OUTGOING",attachmentSheet:!1,commentsSheet:!1,mailTransactionSheet:!1,commentText:"",commentsList:[],attachmentList:[],mailTransactionList:[],mailAttachmentSheet:!1,mailAttachmentList:[],fileSheet:!1,selectedFile:{},isLoading:!1,sortBy:{criteria:"",order:"DESC"},groupBy:"",columns:[],requestActionModal:!1,groupActionModalButton:{},groupActionKey:"",groupActionFields:[],workflowRequestListData:[],armgroupForwardUser:"",processForwardModal:!1,forwardUsers:[],forwardGroups:[],processForwardGroupAction:!1,selectedFilter:[],filterBy:[],attachmentLoad:null,signImg:"",signList:[],selectAll:!1,emailSharingSheet:!1,selectedFileList:[],fileDetailsSheet:!1,fileData:[],jiraConnect:!1,jiraAccounts:[],jiraIssueSheet:!1,issueName:"",projectKey:"",issueType:"",issueDescription:"",issueEpicValue:"",issueAssignee:"",issueAssigneeUsers:[],issueDescriptionTable:!1,issueDescriptionFields:[],jiraConfirmModal:!1,issueRef:{},taskSheet:!1,itemModel:{},errorMessage:"",errorModal:!1,successModal:!1,formWidth:"100vw",commentActions:[{id:this.$nano.id(),label:"Internal",value:2},{id:this.$nano.id(),label:"Public",value:1}],commentAction:2,jiraCommentActions:[{id:this.$nano.id(),label:"This resource",value:1},{id:this.$nano.id(),label:"All resource",value:2}],jiraCommentAction:1,formFields:[],checkListRowIndex:null,formEditAccess:!1,formEditControls:[],readonlyControls:[],formVisibilityAccess:!0,formSecureControls:[],requestPrefix:"",mlPrediction:"",advancedCommentsSheet:!1,advancedCommentText:"",docWarning:!1,alertModal:!1,actionRemarks:!1,actionPassword:!1,actionPasswordConfirm:!1,actionUserPassword:"",actionComments:!1,actionConfirm:!1,actionConfirmAlert:!1,repositoryDetails:[],repositoryField:[],showMetaDataEditModal:!1,selectedUploadFile:{},workflowModel:{},customVerify:!1,formCheckList:!1,reuploadFile:{},documentActionList:[{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline"},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline"}],scrollPosition:0,commentsLoad:null,mailTransactionLoad:null,documentLoad:null,documentLoadList:[],uploadFilename:"",filterSearchColumn:{},selectedFilterColumn:"",showCustomProcessForm:!1,watchViewerClose:null,saveOnly:!1,hasWflowInitiator:!1,subWorkflowId:0,initiateSubWorkflowProcess:!1,subProcessSheet:!1,subProcessData:{},subTabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0}],subProcessLink:"",openSubProcessSheet:!1,subProcessTickets:[],documentSignProcess:!1,formUploadFiles:[],attachComment:!1,fileNames:[],selectedFileForAttach:0,displayInternalPublic:!1,mandatory:{},fileControlDeleteFile:[],hasCheckFormValidate:!1,subWorkflowName:"",fileUploadForControl:!1,fileUploadInput:{},metaDataModal:{},metaDataTitle:"",requestReleaseModal:!1,notifyInitiator:!1,initUserSignature:!1,isRequestLocked:!1,selectedSubWorkflow:{},groupItemSelected:!1,ocrResult:[],formView:!0,stageLevel:[],currentStep:0,subProcessId:0,btnAction:!1,refreshAction:!1,autoSaveModel:{},showAttachmentSheet:!1,showCommentsSheet:!1,showQr:!1,selectedFieldId:"",uploadInterval:null,pinned:!1,issavesheet:!1,progressBars:[{width:"20%"},{width:"30%"},{width:"50%"},{width:"30%"},{width:"50%"},{width:"70%"},{width:"20%"},{width:"30%"},{width:"50%"},{width:"30%"},{width:"50%"},{width:"70%"},{width:"20%"},{width:"70%"}]}},computed:{...Object(C["c"])(["LoadingBar","darkTheme"]),formName(){return this.formId?this.form.settings.general.name:""},formDescription(){return this.formId?this.form.settings.general.description:""},panels(){if(!this.formId)return[];if(this.groupActionFields.length){let e=[];return this.form.panels.map(t=>{let s=[];t.fields.forEach(e=>{this.groupActionFields.indexOf(e.id)>-1&&s.push(e)}),e.push({id:t.id,fields:s,settings:t.settings})}),e}return this.form.panels},secondaryPanels(){return this.formId?this.groupActionFields.length?[]:this.form.secondaryPanels:[]},formSettings(){return this.formId?this.form.settings:{}},items(){return this.workflowRequestList.map(e=>({id:e.processId,key:e.key,itemLink:!0,processId:e.processId,workflowId:e.id,requestNo:e.requestNo,stage:e.stage,raisedAt:this.$day.format(e.raisedAt),raisedBy:e.raisedBy,actionUser:e.activityUserEmail,lastAction:e.lastAction,lastActionBy:e.transaction_createdByEmail,lastActionOn:this.$day.format(e.transaction_createdAt),duration:this.lastActionDuration(e),checked:e.checked,starred:e.starred,mlPrediction:e.mlPrediction,mlCondition:e.mlCondition,jiraIssueInfo:e.jiraIssueInfo,visible:e.visible,attachmentCount:e.attachmentCount||0,commentsCount:e.commentsCount||0,transactionId:e.transactionId,expandSubworkflow:!1,checkboxRequired:e.checkboxRequired,...this.getProcessData(e),subWorkflow:e.subworkflowTransaction?e.subworkflowTransaction.map(t=>({activityId:t.activityId,userId:t.activityUserId,color:1==t.flowStatus?"green":"orange",iconTooltip:1==t.flowStatus?"Completed":"In-progress",icon:1==t.flowStatus?"mdi-check-circle-outline":"mdi-progress-clock",processId:t.processId,raisedAt:this.$day.format(t.raisedAt),raisedBy:t.raisedBy,raisedByUser:t.raisedByUserId,requestNo:t.requestNo,review:t.review,stageName:t.stageName,id:t.subWorkFlowId,parentProcessID:e.processId,stageType:t.stageType,duration:this.sublastActionDuration(t),stage:t.stageName,subWorkFlowId:t.subWorkFlowId,subWorkflowName:t.subWorkflowName,transactionId:t.transactionId,inbox:String(t.activityUserId)===String(this.$store.state.session.id),attachmentsCount:t.attachmentCount,commentsCount:t.commentsCount,displaySubTable:!1,actionUser:t.activityUserEmail})):[]}))},selectedFileCount(){this.clearAttach();let e=this.attachmentList.filter(e=>e.checked).length;return e},isSelectedPDF(){let e=!0;return this.attachmentList.forEach(t=>{let s=t.name.split(".").pop();t.checked&&"pdf"!==s.toLowerCase()&&(e=!1)}),e},isMaximized(){return"100vw"===this.formWidth},_enableControls(){let e=[],t=[];return this.panels&&this.panels.forEach(s=>{if(s.fields.length){let i=s.fields.filter(e=>"SINGLE_SELECT"===e.type||"SINGLE_CHOICE"===e.type||"MULTIPLE_CHOICE"===e.type||"MULTI_SELECT"===e.type);i.length&&i.forEach(s=>{if(s.settings.validation.enableSettings&&s.settings.validation.enableSettings.length){let i=[];s.settings.validation.enableSettings.forEach(e=>{e.controls.length&&(i.push({value:e.value,childControls:e.controls}),e.controls.forEach(e=>{i.indexOf(e)<0&&t.push(e)}))}),i.length&&e.push({id:s.id,parentControls:i})}})}}),{listControls:t,controls:e}},isCustomizedWorkflow(){let e=location.origin;if("https://demo.ezofis.com"===e||"http://52.172.32.88"===e){if(1014===this.workflow.id)return!0}else if((this.isTenantArmgroup()||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&1===this.workflow.id)return!0;return!1},outgoingMails(){return this.mailTransactionList.filter(e=>"Outgoing"===e.emailType)},incomingMails(){return this.mailTransactionList.filter(e=>"Incoming"===e.emailType)},commentsSheetHeight(){return"inbox"===this.selectedNode||"payment"===this.selectedNode||"common"===this.selectedNode||this.initiateProcess?this.checkCommentsOption()&&!this.isCustomizedWorkflow?this.attachmentList.length&&this.fileNames.length?this.attachComment&&this.displayInternalPublic?"calc(100vh - 270px)":this.attachComment&&!this.displayInternalPublic?"calc(100vh - 230px)":!this.attachComment&&this.displayInternalPublic?"calc(100vh - 225px)":"calc(100vh - 200px)":this.displayInternalPublic?"calc(100vh - 220px)":"START"!==this.selectedProcess.stageType?"calc(100vh - 180px)":"calc(100vh - 150px)":"calc(100vh - 150px)":""},notifyInitiatorClass(){return this.attachmentList.length&&this.fileNames.length?"":"action-container"},mandatoryDocument(){return this.checkList.filter(e=>e.required&&!e.attach)},mandatoryFilling(){return this.mandatory.filledValue&&this.mandatory.nonFilledValue?Math.floor(this.mandatory.filledValue/(this.mandatory.filledValue+this.mandatory.nonFilledValue)*100):this.mandatory.filledValue?100:0},checkFormModel(){return Object(ve["a"])(this.formModel)?Object(ve["a"])(this.workflowModel)?this.formModel:this.workflowModel:this.formModel}},watch:{myInbox:{deep:!0,immediate:!0,handler(){this.myInbox?this.hideActions.push("toggle"):this.hideActions=this.hideActions.filter(e=>"toggle"!=e)}},workflowRequestList:{deep:!0,immediate:!0,handler(){this.getColumns(),this.applyHideColumns(),this.groupItemSelected=!1,this.workflowRequestList.filter(e=>e.checked).length&&(this.groupItemSelected=!0)}},workflow:{deep:!0,immediate:!0,handler(){if(this.initiate=!1,this.importExcel=!1,this.workflow.id){this.myInbox||this.clearFilterByColumns();let e=JSON.parse(this.workflow.flowJson),t=e.blocks.find(e=>"START"===e.type);if(t){if("MANUAL"===t.settings.initiateMode&&"DOCUMENT"!==this.workflow.initiatedBy){if((t.settings.users.indexOf(this.$store.state.session.id)>-1||t.settings.users.indexOf("0")>-1)&&(this.initiate=!0),t.settings.initiateBy.indexOf("DOMAIN_USER")>-1){let e=this.$store.state.session.email.split("@").pop();t.settings.userDomains.indexOf(e)>-1&&(this.initiate=!0)}}else"MANUAL_AUTOMATIC"===t.settings.initiateMode&&(t.settings.users.indexOf(this.$store.state.session.id)>-1||t.settings.users.indexOf("0")>-1)&&t.settings.initiateBy.indexOf("MASTER_FORM")>-1&&(this.importExcel=!0,this.$emit("update:masterFormId",t.settings.masterFormId));this.generatePDF=t.settings.generatePDF?1:0,this.documentRequired=t.settings.documentRequired||!1}let s=location.origin;"https://edmsuat.sobhaapps.com"===s&&55===this.workflow.id&&(this.initiate=!1)}}},wform:{deep:!0,immediate:!0,handler(){this.wform.formJson&&this.getColumns()}},workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&(this.initiateProcess?this.checkRequiredDocument():this.groupActionFields.length?this.groupProcessRequest():this.checkRequiredDocument())}},fullView:{deep:!0,immediate:!0,handler(){this.fullView?(this.openProcess(),this.getSubWorkflow()):this.closeProcessSheet()}},selectedProcess:{immediate:!0,handler(){this.selectedProcess.processId&&(this.attachmentList=[])}},activeView:{deep:!0,immediate:!0,handler(){this.activeView&&this.$emit("update:activeView",this.activeView)}},currentPage:{immediate:!0,deep:!0,handler(){this.$emit("update:currentPage",this.currentPage),this.$emit("refresh",!1)}},attachmentSheet:{immediate:!0,handler(){if(this.attachmentSheet&&this.selectedProcess.processId){if(this.getAttachments(),this.attachmentList.length){let e=this.attachmentList.length-1;this.getFileData(this.attachmentList[e],"file")}this.attachmentLoad=setInterval(()=>{this.getAttachments()},15e3)}else clearInterval(this.attachmentLoad)}},commentsSheet:{immediate:!0,handler(){this.commentsSheet&&this.selectedProcess.processId?this.commentsLoad=setInterval(()=>{this.getComments()},3e4):clearInterval(this.commentsLoad)}},mailTransactionSheet:{immediate:!0,handler(){this.mailTransactionSheet&&this.selectedProcess.processId?this.mailTransactionLoad=setInterval(()=>{this.getMailTransactions()},3e4):clearInterval(this.mailTransactionLoad)}},taskEntries:{immediate:!0,handler(){this.tabs.find(e=>{"TASK"===e.value&&(e.count=this.taskEntries.length)})}},processSheet(){this.fileData=[],this.workflowModel={}},dataValidationValues:{immediate:!0,deep:!0,handler(){if(this.customVerify=!1,this.dataValidationValues.length){let e=this.dataValidationValues.filter(e=>"Matched"!==e.status&&"Verified"!==e.status);e.length&&(this.customVerify=!0)}}},customCloseProcessSheet:{deep:!0,immediate:!0,handler(){this.closeProcessSheet()}},sortBy:{deep:!0,immediate:!0,handler(){this.sortBy.criteria&&this.$emit("sortBy",this.sortBy)}},subWorkflowId(){if(this.hasWflowInitiator=!1,this.subWorkflowId){let e=this.workflowList.find(e=>e.id==this.subWorkflowId);if(e){this.subWorkflowName="Initiate - "+e.name,this.hasWflowInitiator=!1;let t=JSON.parse(e.flowJson),s=t.blocks.find(e=>"START"===e.type);if(s&&"MANUAL"===s.settings.initiateMode&&"DOCUMENT"!==e.initiatedBy&&((s.settings.users.indexOf(this.$store.state.session.id)>-1||s.settings.users.indexOf("0")>-1)&&(this.hasWflowInitiator=!0),s.settings.initiateBy.indexOf("DOMAIN_USER")>-1)){let e=this.$store.state.session.email.split("@").pop();s.settings.userDomains.indexOf(e)>-1&&(this.hasWflowInitiator=!0)}}}},exporting:{immediate:!0,deep:!0,async handler(){this.exporting&&await this.exportRequestData()}}},created(){localStorage.removeItem("viewerClose"),localStorage.removeItem("signItemId"),this.getAppConnection();let e=location.origin;"https://edmsuat.sobhaapps.com"!==e&&"https://edms.sobhaapps.com"!==e||this.hideActions.push("activeView")},methods:{checkMobileUpload(e){console.log(e),this.uploadInterval=setInterval(()=>{this.watchMobileUpload(e)},5e3)},async watchMobileUpload(e){const{error:t,payload:s}=await l["p"].getQrFileUploadById(e);console.log(t,s,"error, payload");let i=JSON.parse(s.jsonData);if(console.log(i,"jsonData","payload.status",s.status),s.status){let e=i[0];console.log(e,"file");let t={name:e.attachmentList[0].name,size:e.attachmentList[0].size,file:"",fileId:e.attachmentList[0].id,id:e.attachmentList[0].id,fileControl:!0,formAttach:!0,createdBy:e.attachmentList[0].createdByEmail,createdAt:new Date(e.attachmentList[0].createdAt).toLocaleString("en-US",{hour12:!0,timeZone:"Asia/Kolkata"}),workflowId:this.workflow.id,processId:this.selectedProcess.processId,fieldId:e.fieldId,fileDataValidate:""};this.attachmentList.push(t);let s={name:e.attachmentList[0].name,size:e.attachmentList[0].size,file:"",fileId:e.attachmentList[0].id,uploadedPercentage:100,createdBy:e.attachmentList[0].createdByEmail,createdAt:new Date(e.attachmentList[0].createdAt).toLocaleString("en-US",{hour12:!0,timeZone:"Asia/Kolkata"})};this.formFields.forEach(t=>{"FILE_UPLOAD"===t.type&&this.workflowModel[t.value]&&t.value==e.fieldId&&this.workflowModel[t.value].push(s)}),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)}),this.showQr=!1,console.log(t,"updatedData"),clearInterval(this.uploadInterval),this.uploadInterval=null}else console.log("Waiting for uploaded"),this.processSheet||(clearInterval(this.uploadInterval),this.uploadInterval=null)},generateQrCode(e){this.selectedFieldId=e,console.log(e,"fieldId"),this.showQr=!0},checkTabAccess(e){return"TASK"===e?this.addTaskEnabled:"VALIDATION"===e?!!this.isCustomizedWorkflow:"FORM_ENTRY_HISTORY"!==e||!!this.formId},clearAttach(){this.selectedFileForAttach=0,this.attachComment=!1,this.notifyInitiator=!1},customCheckUpload(){let e=location.origin;return"https://edmsuat.sobhaapps.com"===e&&(55===this.workflow.id||2092===this.workflow.id)&&0===this.attachmentList.length},checkTenant(){return!this.isTenantArmgroup()||(this.commentAction=2,!1)},isTenantGOTO(){let e=location.origin;return("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e)&&2===this.$store.state.session.tenantId},isTenantArmgroup(){let e=location.origin;return("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://localhost:80801"===e)&&3===this.$store.state.session.tenantId},isTenantGOTOComments(){return!!(Object.keys(this.selectedProcess).length&&this.isTenantGOTO()&&this.selectedProcess.jiraIssueInfo.id)},checkCommentsOption(){return!this.isTenantArmgroup()&&(!this.isTenantGOTO()||!(!Object.keys(this.selectedProcess).length||!this.selectedProcess.jiraIssueInfo.id))},toggleWidth(){this.formWidth="100vw"===this.formWidth?"50vw":"100vw"},closeProcessSheet(e){this.isCustomizedWorkflow&&this.selectedProcess.ticketLockedBy===this.$store.state.session.id&&this.$emit("release",this.selectedProcess),this.processSheet=!1,this.saveAction="",this.workflowFormModel={},this.subProcessData={},this.subProcessTickets=[],this.$emit("update:fullView",!1),(this.isCustomizedWorkflow&&e||this.refreshAction)&&this.$emit("refresh",this.workflow.id)},closeAttachmentsSheet(){this.attachmentSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},closeMetaDataEditModal(){this.showMetaDataEditModal=!1,this.$refs.attachments&&(this.$refs.attachments.value=null)},clearSortBy(){this.sortBy={criteria:"",order:"DESC"}},clearGroupBy(){this.groupBy=""},closeTaskSheet(){this.taskSheet=!1},closeJiraIssueSheet(){this.issueName="",this.projectKey="",this.issueType="",this.issueDescription="",this.issueEpicValue="",this.issueAssignee="",this.issueDescriptionTable=!1,this.issueDescriptionFields=[],this.jiraIssueSheet=!1},async loadProcessLinks(){this.getComments(),await this.getAttachments(),(this.isTenantArmgroup()||"https://trial.ezofis.com"===origin&&12===this.$store.state.session.tenantId)&&(this.formCheckList=!0),this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.selectedProcess.commentsCount)}),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.selectedProcess.attachmentCount)}),this.getProcessSignature(),this.getMailTransactions()},updateDataValidationValues(e){this.$emit("update:dataValidationValues",e)},userInitials(e){let t="";return e.firstName&&(t+=e.firstName[0].toUpperCase()),e.lastName?t+=e.lastName[0].toUpperCase():t+=e.firstName[1],t},async showLinks(e){"ATTACHMENTS"===e?this.showAttachmentSheet=!0:"COMMENTS"===e?(this.fileNames=[],this.fileNames=this.attachmentList.filter(e=>{let t=e.name.split(".").pop().toUpperCase();return"pdf"===t.toLowerCase()}).map(e=>({id:this.$nano.id(),label:e.name,value:e.id})),this.showCommentsSheet=!0):"HISTORY"===e&&this.selectedProcess.processId?this.$emit("history",this.selectedProcess.processId):"PRINT"===e?this.selectedProcess.formData?window.open(`https://appuat.ezofis.com/ezofisapi/api/form/generatePdfPrint/${this.$store.state.session.tenantId}/${this.workflow.id}/${this.selectedProcess.processId}/${this.formId}/${this.selectedProcess.formData.formEntryId}/1`):this.selectedProcess.itemData&&window.open(`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedProcess.itemData.repositoryId}/${this.selectedProcess.itemData.itemId}/2`):"TASK"===e?this.taskEntries.length?this.taskSheet=!0:this.$emit("addTask"):"VALIDATION"===e?this.$emit("validation",this.selectedProcess.processId):"MAIL"===e?(this.getMailTransactions(),this.mailTransactionSheet=!0):"SUB_PROCESS"===e?this.subProcessSheet=!0:"FORM_ENTRY_HISTORY"===e&&this.$emit("showFormEntryHistory")},lastActionDuration(e){const t=e.transaction_createdAt instanceof Date?e.transaction_createdAt:new Date(e.transaction_createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},sublastActionDuration(e){const t=e.raisedAt instanceof Date?e.raisedAt:new Date(e.raisedAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},validateTypeValue(e){if(e)try{var t=JSON.parse(e);if("object"===typeof t)return t}catch(s){return e}return e},validateType(e){let t="";return this.panels.forEach(s=>{if(!s.fields.length)return;let i=s.fields.find(t=>t.id===e);i&&(t=i.type)}),t},validateValue(e){let t=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;return!t.test(e)},removeTags(e){return e?e.replace(/(<([^>]+)>)/gi,""):""},tableValue(e){return e?JSON.parse(e):[]},tableColumns(e,t){let s=this.formFields.find(e=>e.value===t),i=[];s.settings.specific.tableColumns.forEach(e=>{"DISABLE"!==e.settings.general.visibility&&i.push(e)});let a=[],o=[];for(let r in this.tableValue(e)[0])a.push(r);return i.forEach(e=>{a.indexOf(e.id)>-1&&o.push(e)}),o},groupRequestList(e){return this.workflowRequestList.filter(t=>t.key===e)},groupRequestListName(e){const t=this.workflowRequestList.filter(t=>t.key===e);return!!(t.length>0&&t.some(e=>!0===e.visible))},groupSelected(e){let t=this.workflowRequestList.filter(t=>t.key===e),s=0;return t.forEach(e=>{e.checked&&s++}),s>1},showRequestPreview(e,t){this.hasSelectedProcess=e,this.hasSelectedWorkflow=t,this.$emit("show",e,t)},showSubRequestPreview(e){e.id=e.subWorkFlowId,this.hasSelectedProcess=e.processId,this.hasSelectedWorkflow=e.subWorkFlowId,this.selectedSubWorkflow=e,this.subWorkflowId=e.subWorkFlowId,this.openSubProcessSheet=!0,this.subProcessData=e},getJIRALink(e){let t=new URL(e.self),s=t.origin.replace("https://jira-external-tools-integration.getgotools.net","https://jira.ops.expertcity.com");return`${s}/browse/${e.key}`},closeSubProcessSheet(){this.subProcessSheet=!1},async showRequest(e,t){this.hasSelectedProcess=e,this.hasSelectedWorkflow=t,this.$emit("show",e,t,!0)},getModel(e){if(this.formModel={},this.itemModel={},0===Object.keys(this.selectedProcess).length)this.workflowRequestList.forEach(t=>{if(t.processId==e&&t.id==this.workflow.id)if(this.headerTitle=`${t.requestNo} - ${t.stage}`,t.formData){let e=Object.keys(t.formData.fields),s={};e.forEach(e=>{s[e]=this.validateTypeValue(t.formData.fields[e])}),this.formModel=s}else t.itemData&&(this.itemModel=t.itemData)});else{let e=this.selectedProcess;if(this.headerTitle=`${e.requestNo} - ${e.stage}`,e.formData){let t=Object.keys(e.formData.fields),s={};t.forEach(t=>{s[t]=this.validateTypeValue(e.formData.fields[t])}),this.formModel=s}else e.itemData&&(this.itemModel=e.itemData)}},loadMore(e){if(this.totalItems>this.itemsPerPage&&this.workflowRequestList.length>=this.currentPage*this.itemsPerPage){let t=e.srcElement.scrollTop;t>this.scrollPosition&&this.$emit("update:currentPage",this.currentPage+1),this.scrollPosition=t}},async openProcess(e=!1){if(this.btnAction=!1,this.actions=[],this.form={},this.formId="",this.isRequestLocked=!1,this.displayInternalPublic=!1,this.getRepository(),this.ocrResult=[],this.subWorkflowId=0,this.attachmentList=[],this.commentsList=[],e){this.tabs.find(e=>{e.count=0}),this.$emit("update:selectedProcess",{}),this.$emit("update:taskEntries",[]),this.commentsList=[],this.attachmentList=[],this.initUserSignature=!1,this.initiateProcess=!0,this.formModel={},this.signList=[],this.formEditAccess=!1,this.formEditControls=[],this.readonlyControls=[],this.formVisibilityAccess=!0,this.formSecureControls=[];let e=JSON.parse(this.workflow.flowJson),t=e.blocks.find(e=>"START"===e.type);if(t){if("MANUAL"===t.settings.initiateMode){this.headerTitle=""+t.settings.label;let s=e.rules.find(e=>e.fromBlockId===t.id);s&&this.actions.push(s.proceedAction)}if(t.settings.formEditAccess&&(""===t.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===t.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===t.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=t.settings.formEditControls)),t.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=t.settings.formSecureControls),this.initUserSignature=t.settings.userSignature,t.settings.fileSettings){if(t.settings.fileSettings.fileCheckList.length){let e=t.settings.fileSettings.fileCheckList;e.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1}),this.docWarning=t.settings.fileSettings.partial,this.$emit("update:checkList",e)}}else this.$emit("update:checkList",[]);(t.settings.initiateBy.indexOf("PORTAL")>-1||this.portalAction)&&(this.displayInternalPublic=!0),t.settings.workflowInitiator&&(this.subWorkflowId=t.settings.subWorkflowId)}}else{if("inbox"===this.selectedNode||"common"===this.selectedNode||"payment"===this.selectedNode){this.formEditAccess=!1;let e=JSON.parse(this.workflow.flowJson),t=e.blocks.find(e=>e.id===this.selectedProcess.activityId);if(t){if(""===t.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===t.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===t.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=t.settings.formEditControls),t.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=t.settings.formSecureControls),e.settings.general.processNumberPrefix.indexOf("[")>-1){let t=JSON.parse(e.settings.general.processNumberPrefix);this.readonlyControls=[];let s=t.filter(e=>"formColumn"===e.key);s.length&&s.forEach(e=>{this.readonlyControls.push(e.value),this.formEditControls.indexOf(e.value)>-1&&this.formEditControls.splice(this.formEditControls.indexOf(e.value),1)})}if(t.settings.fileSettings){if(t.settings.fileSettings.fileCheckList.length){let e=t.settings.fileSettings.fileCheckList;e.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1}),this.docWarning=t.settings.fileSettings.partial,this.$emit("update:checkList",e)}}else this.$emit("update:checkList",[]);t.settings.workflowInitiator&&(this.subWorkflowId=t.settings.subWorkflowId),this.displayInternalPublic=!1;let s=e.blocks.find(e=>"START"===e.type);s&&(s.settings.initiateBy.indexOf("PORTAL")>-1||this.portalAction)&&(this.displayInternalPublic=!0)}if(this.isCustomizedWorkflow)if("common"===this.selectedNode&&"szS6B-q1x9acpB83rP6jT"===this.selectedProcess.activityId){if(this.$store.state.session.groups){let e=this.$store.state.session.groups;if(e.length){let t=e.find(e=>3===e.id);t&&await this.checkTicketLock()}}}else await this.checkTicketLock()}else this.formEditAccess=!0;this.initiateProcess=!1,this.getModel(this.hasSelectedProcess),this.actions=this.processActions;let e=location.origin;(this.isTenantArmgroup()||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&this.$emit("validation",this.hasSelectedProcess,!1),"https://edmsuat.sobhaapps.com"===e&&55===this.workflow.id&&(this.formEditAccess=!0),this.loadProcessLinks()}this.workflow.wFormId&&(this.formId=String(this.workflow.wFormId),this.form=JSON.parse(this.wform.formJson),e||"CARD"===this.form.settings.general.layout&&(this.form.settings.general.layout="TAB")),this.refreshAction=!1,this.processSheet=!0},validateRequest(e){this.btnAction=!0,this.saveAction=e,this.itemModel.itemId&&this.processRequest()},updateSelection(e){this.workflowRequestList.forEach(t=>{t.processId===e.processId&&(t.checked=!e.checked)}),this.$emit("update:workflowRequestList",this.workflowRequestList)},updateStarred(e){this.workflowRequestList.forEach(t=>{t.processId===e.processId&&(t.starred=!e.starred)}),this.$emit("update:workflowRequestList",this.workflowRequestList)},updateSelectionGroup(e){this.groupKey.forEach(t=>{t.name===e.name&&(t.checked=!e.checked,this.workflowRequestList.forEach(t=>{t.key===e.name&&(t.checked=e.checked)}),this.$emit("update:workflowRequestList",this.workflowRequestList))})},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},groupRequestAction(e,t){t.length?t.actionFields.length?(this.groupActionKey=t.name,this.groupActionFields=t.actionFields,this.groupActionModalButton=e,this.requestActionModal=!0,this.formId=String(this.workflow.wFormId),this.form=JSON.parse(this.wform.formJson)):"Forward"===e.name&&this.internalForward.proceed||this.isTenantGOTO()&&"Assign"===e.name&&this.internalForward.proceed?(this.groupActionKey=t.name,this.saveAction=e.name,this.processForwardGroupAction=!0,this.processForwardModal=!0):this.isTenantArmgroup()&&"Assign"===e.name?(this.saveAction=e.name,this.processForwardGroupAction=!0,this.processForwardModal=!0):(this.saveAction=e.name,this.groupProcessRequest()):this.isTenantArmgroup()&&"Assign"===e&&(this.saveAction=e,this.processForwardGroupAction=!0,this.processForwardModal=!0)},closeRequestActionModal(){this.requestActionModal=!1,this.groupActionKey="",this.groupActionFields=[],this.groupActionModalButton={}},submitGroupAction(){this.saveAction=this.groupActionModalButton.name},searchList(){this.search?this.workflowRequestList.forEach(e=>{e.requestNo.toLowerCase().indexOf(this.search.toLowerCase())>-1||e.name.toLowerCase().indexOf(this.search.toLowerCase())>-1||e.key.toLowerCase().indexOf(this.search.toLowerCase())>-1?e.visible=!0:e.visible=!1}):this.workflowRequestList.forEach(e=>{e.visible=!0})},searchRow(e){e?(this.workflowRequestList.forEach(e=>{e.visible=!1}),this.workflowRequestList.forEach(t=>{for(let s in t){let i=this.columns.findIndex(e=>e.name===s);if(i>=0&&t[s]&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return void(t.visible=!0);if("object"===typeof t[s]){if(JSON.stringify(t[s]).toLowerCase().includes(e.toLowerCase()))return void(t.visible=!0)}else if(String(t[s]).toLowerCase().includes(e.toLowerCase()))return void(t.visible=!0)}})):this.workflowRequestList.forEach(e=>{e.visible=!0})},getRequest(){1===this.currentPage?this.$emit("refresh"):this.$emit("update:currentPage",1)},getColumns(){this.formFields=[];let e=location.origin;this.columns=[{id:"requestNo",name:"requestNo",label:"Request No",type:"TITLE",isVisible:!0,isSortable:!0,dataType:f["a"].SHORT_TEXT}],this.isTenantGOTO()&&this.columns.push({id:"mlCondition",name:"mlCondition",label:"",type:"MLCONDITION",isVisible:!0,dataType:f["a"].SHORT_TEXT,isFilter:!1}),(this.isTenantArmgroup()||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&this.columns.push({id:"mlCondition",name:"mlCondition",label:"",type:"MLCONDITION",isVisible:!0,dataType:f["a"].SHORT_TEXT,isFilter:!1});let t=[{id:"stage",name:"stage",label:"Stage",type:"NORMAL",isVisible:!0,dataType:f["a"].SHORT_TEXT},{id:"actionUser",name:"actionUser",label:"Action User",type:"NORMAL",options:this.userList,isVisible:!0,dataType:f["a"].SINGLE_SELECT},{id:"raisedBy",name:"raisedBy",label:"Raised By",type:"NORMAL",options:this.userList,isVisible:!0,dataType:f["a"].SINGLE_SELECT},{id:"raisedAt",name:"raisedAt",label:"Raised On",type:"NORMAL",isVisible:!0,isSortable:!0,dataType:f["a"].DATE},{id:"lastAction",name:"lastAction",label:"Last Action",type:"NORMAL",isVisible:!0,dataType:f["a"].SHORT_TEXT},{id:"lastActionBy",name:"lastActionBy",label:"Last Action By",type:"NORMAL",options:this.userList,isVisible:!0,dataType:f["a"].SINGLE_SELECT},{id:"lastActionOn",name:"lastActionOn",label:"Last Action On",type:"NORMAL",isVisible:!0,dataType:f["a"].DATE},{id:"duration",name:"duration",label:"Duration",type:"NORMAL",isVisible:!0,dataType:f["a"].SHORT_TEXT}];if(this.isTenantArmgroup()||"http://localhost:80801"===e||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId){if(this.workflow.wFormId&&this.wform.formJson){let e=JSON.parse(this.wform.formJson);const t=[...e.panels,...e.secondaryPanels];if(!t.length)return;let s=[];for(const o of t)s.push(...o.fields);let i=s.find(e=>"Initials"===e.label);i&&this.columns.push({id:i.id,name:i.id,label:i.label,type:"NORMAL",isVisible:!0,dataType:i.type,apiLoad:!0,isFilter:!0});let a=s.find(e=>"Benefit Claimed"===e.label);a&&this.columns.push({id:a.id,name:a.id,label:a.label,type:"NORMAL",isVisible:!0,dataType:a.type,apiLoad:!0,isFilter:!0})}this.columns.push({id:"stage",name:"stage",label:"Stage",type:"NORMAL",isVisible:!0,dataType:f["a"].SHORT_TEXT},{id:"actionUser",name:"actionUser",label:"Action User",type:"NORMAL",options:this.userList,isVisible:!0,dataType:f["a"].SINGLE_SELECT},{id:"lastAction",name:"lastAction",label:"Last Action",type:"NORMAL",isVisible:!0,dataType:f["a"].SHORT_TEXT},{id:"lastActionBy",name:"lastActionBy",label:"Last Action By",type:"NORMAL",options:this.userList,isVisible:!0,dataType:f["a"].SINGLE_SELECT},{id:"lastActionOn",name:"lastActionOn",label:"Last Action On",type:"NORMAL",isVisible:!0,dataType:f["a"].DATE},{id:"duration",name:"duration",label:"Duration",type:"NORMAL",isVisible:!0,dataType:f["a"].SHORT_TEXT},{id:"raisedBy",name:"raisedBy",label:"Raised By",type:"NORMAL",options:this.userList,isVisible:!0,dataType:f["a"].SINGLE_SELECT},{id:"raisedAt",name:"raisedAt",label:"Raised On",type:"NORMAL",isVisible:!0,dataType:f["a"].DATE})}else this.columns.push(...t);if(this.workflow.wFormId&&this.wform.formJson){let e=JSON.parse(this.wform.formJson);const t=[...e.panels,...e.secondaryPanels];if(!t.length)return;let s=[];for(const r of t)s.push(...r.fields);let i=JSON.parse(this.workflow.flowJson),a=[];const o=i.blocks.reduce((e,t)=>(t.settings.formSecureControls&&t.settings.formSecureControls.length&&("string"===typeof t.settings.formSecureControls[0]?t.settings.users.forEach(s=>{e.push({[s]:t.settings.formSecureControls})}):t.settings.formSecureControls.forEach(t=>{t.formFields.length&&e.push({[t.userId]:t.formFields})})),e),[]);o.forEach(e=>{e[this.$store.state.session.id]&&a.push(...e[this.$store.state.session.id])}),s.forEach(e=>{if("DIVIDER"!==e.type&&"LABEL"!==e.type&&"PARAGRAPH"!==e.type&&(e.label||"TABLE"===e.type)&&"DISABLE"!==e.settings.general.visibility)if(a.length)if("object"===typeof a[0]){let t=a.findIndex(e=>e.userId===this.$store.state.session.id);if(t>=0){let s=a[t].formFields,i=s.findIndex(t=>t===e.id);-1===i&&(this.myInbox||this.columns.push({id:e.id,name:e.id,label:e.label,type:"NORMAL",isVisible:!0,dataType:e.type,apiLoad:!0,isFilter:!0}),this.formFields.push({id:this.$nano.id(),label:e.label||e.type,value:e.id,type:e.type,settings:e.settings}))}}else{let t=a.findIndex(t=>t===e.id);-1===t&&(this.myInbox||this.columns.push({id:e.id,name:e.id,label:e.label,type:"NORMAL",isVisible:!0,dataType:e.type,apiLoad:!0,isFilter:!0}),this.formFields.push({id:this.$nano.id(),label:e.label||e.type,value:e.id,type:e.type,settings:e.settings}))}else{if(!this.myInbox){let t=this.columns.findIndex(t=>t.id===e.id);-1===t&&this.columns.push({id:e.id,name:e.id,label:e.label,type:"NORMAL",isVisible:!0,dataType:e.type,apiLoad:!0,isFilter:!0})}this.formFields.push({id:this.$nano.id(),label:e.label||e.type,value:e.id,type:e.type,settings:e.settings})}})}else this.workflow.repositoryId&&this.repository.fields&&this.repository.fields.forEach(e=>{e.name&&"TABLE"!==e.dataType&&(this.myInbox||this.columns.push({id:e.id,name:e.name,label:e.name,type:"NORMAL",isVisible:!0,dataType:e.dataType}))})},async applyHideColumns(){this.hideColumns.forEach(e=>{const t=this.columns.findIndex(t=>t.id===e.columnName);t>-1&&(this.columns[t].isVisible=!1,this.columns[t].hideId=e.id)})},updateFilterBy(e){this.filterBy=e,this.$emit("filter",e)},updateFilterByColumns(){this.search?this.filterSearchColumn.length&&("SINGLE_SELECT"===this.filterSearchColumn[0].filters[0].dataType?this.filterSearchColumn[0].filters[0].value=JSON.stringify([this.search]):this.filterSearchColumn[0].filters[0].value=this.search,this.$emit("filter",this.filterSearchColumn)):0===this.filterSearchColumn.length&&this.$emit("filter",this.filterSearchColumn)},clearFilterByColumns(e){this.selectedFilterColumn="",this.filterSearchColumn=[],this.search="",e&&this.updateFilterByColumns()},showSubHistory(e,t){this.$emit("subHistory",e,t)},showHistory(e){this.$emit("history",e),this.$emit("history",e)},async openSubAttachments(e){const t=this.workflowRequestList.find(t=>t.processId===e.parentProcessID);let s;t&&(s=t.subworkflowTransaction.find(t=>t.processId===e.processId),s&&(s.id=s.subWorkFlowId,this.selectedProcess=s,this.$emit("update:selectedProcess",s),await this.getRepository(),await this.getAttachments(s.subWorkFlowId,s.processId),this.showLinks("ATTACHMENTS")))},async openAttachments(e){let t=this.workflowList.find(t=>t.id==e.workflowId);this.$emit("update:workflow",t),this.$emit("update:selectedProcess",e),await this.getRepository(),await this.getAttachments(e.workflowId,e.processId),this.showLinks("ATTACHMENTS")},async openSubComments(e){const t=this.workflowRequestList.find(t=>t.processId===e.parentProcessID);let s;t&&(s=t.subworkflowTransaction.find(t=>t.processId===e.processId),s&&(s.id=s.subWorkFlowId,this.selectedProcess=s,await this.getComments(s.subWorkFlowId,s.processId),this.showLinks("COMMENTS")))},async openComments(e){let t=this.workflowList.find(t=>t.id==e.workflowId);this.$emit("update:workflow",t),this.$emit("update:selectedProcess",e),await this.getComments(e.workflowId,e.processId),this.showLinks("COMMENTS")},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},fileSize(e){return Object(j["a"])(e)},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let s=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(s=2);let i="";if(Object(U["d"])(t))i=this.isTenantArmgroup()?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":this.isTenantGOTO()?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html";else{if("http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${s}`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`}{let s="",i="";if("inbox"!==this.selectedNode&&"common"!==this.selectedNode&&"payment"!==this.selectedNode||(i="&action=all"),Object(U["d"])(t))this.isTenantArmgroup()?(i="",s="https://ag-appsvc04.azurewebsites.net/web/viewer.html"):"https://trial.ezofis.com"!==e||Object(U["c"])(t)?s=this.isTenantGOTO()?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html":(localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),s="https://trial.ezofis.com/docsviewer/index.html");else{if(Object(U["b"])(t)||"http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),s="http://52.172.32.88/DocsViewer/index.html"}return`${s}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflow.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${i}`}}},itemLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if("inbox"===this.selectedNode||"common"===this.selectedNode||"payment"===this.selectedNode){let t="",s="&action=all";return t=this.isTenantArmgroup()?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":this.isTenantGOTO()?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":"http://52.172.32.88"===e?"http://52.172.32.88/DocsViewer/index.html":e+"/PDFViewer/web/viewer.html","DOCUMENT_SIGN"===this.workflow.initiatedBy?(this.documentSignProcess=!0,localStorage.setItem("signItemId",0),localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),`${t}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&wId=${this.workflow.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.itemModel.name}&signature=true&getSign=true&uniqId=${this.selectedProcess.raisedByUserId}`):`${t}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&wId=${this.workflow.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.itemModel.name}${s}`}{let t="",s="&action=download,print";return this.isTenantArmgroup()?(t="https://ag-appsvc04.azurewebsites.net/web/viewer.html",s=""):t="https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":this.isTenantGOTO()?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":"http://52.172.32.88"===e?"http://52.172.32.88/DocsViewer/index.html":e+"/PDFViewer/web/viewer.html",`${t}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}${s}`}},openFileByCmd(e){const t=e.embedFileList[0],{fileName:s,itemid:i,...a}=t;this.selectedFile={name:s,id:i,...a},this.isTenantArmgroup()?window.open(this.fileLink()):this.fileSheet=!0},openFile(e){e.loading?this.$alert.info("Please wait to complete the uploading"):(this.selectedFile=e,this.isTenantArmgroup()?window.open(this.fileLink()):this.fileSheet=!0)},checkViewerClose(){localStorage.getItem("viewerClose")&&"true"===localStorage.getItem("viewerClose")&&(this.fileSheet=!1,localStorage.removeItem("viewerClose"),clearInterval(this.watchViewerClose),"DOCUMENT_SIGN"===this.workflow.initiatedBy&&this.getSignerSettings())},signLink(e){return`https://appuat.ezofis.com/ezofisapi/api/workflow/signView/${this.$store.state.session.tenantId}/${this.workflow.id}/${e}`},fileSelectAll(){this.attachmentList=this.attachmentList.map(e=>({...e,checked:this.selectAll}))},getColor(e){return"Closed"===e||"High"===e?"red":"In Progress"===e||"Medium"===e?"warning":"Open"===e||"Low"===e?"secondary":"primary"},checkJiraRequest(){var e=this.workflowRequestList.filter(e=>e.checked);if(e.length){var t,s;let i="",a=0,o="",r="",n=0,l="";o=null===(t=this.formFields.find(e=>"Account Name"===e.label))||void 0===t?void 0:t.value,l=null===(s=this.formFields.find(e=>"Recommendation"===e.label))||void 0===s?void 0:s.value,e.forEach(e=>{e.formData.fields[o]!==i&&(i=e.formData.fields[o],a+=1),e.formData.fields[l]!==r&&(r=e.formData.fields[l],n+=1)}),a>1&&(i=""),n>1&&(r="");let c="";1===this.workflow.id?(c="EC2 ",this.issueDescriptionFields=["Resource ID","Resource Name","Availability Zone","Instance Type - Current","Recommendation","Instance Type - Recommended","Savings"]):3===this.workflow.id&&(c="EBS ",this.issueDescriptionFields=["Resource ID","Resource Name","Availability Zone","Volume Type - Current","Recommendation","Volume Type - Recommended","Savings"]),this.issueName=`${c}instances from ${i} marked for ${r}`,this.projectKey="GISDCT",this.issueType="Support-Request",this.jiraIssueSheet=!0,this.issueDescriptionTable=!0}else this.$alert.info("Select the inbox request")},attachTemplate(e){this.checkListRowIndex=e,this.$refs.attachments.click()},actionColor(e){return this.darkTheme?e?-1!==e.toLowerCase().indexOf("reply")?"#ca811680":-1!==e.toLowerCase().indexOf("forward")?"#d2bc0980":-1!==e.toLowerCase().indexOf("approve")?"#418f4380":-1!==e.toLowerCase().indexOf("reject")?"#c9141480":"#27abc580":"#27abc580":e?-1!==e.toLowerCase().indexOf("reply")?"#f9e6ca":-1!==e.toLowerCase().indexOf("forward")?"#fcf5bc":-1!==e.toLowerCase().indexOf("approve")?"#bfe2c0":-1!==e.toLowerCase().indexOf("reject")?"#f9c3c3":"#e1f5f9":"#e1f5f9"},async copyText(e){await Object(Y["a"])(e),this.$alert.success("Text copied")},checkRequiredDocument(){if("Save"===this.saveAction||"Force Close"===this.saveAction)this.proceedSubmission();else{if(this.documentRequired&&0===this.attachmentList.length)return this.$alert.warning("A minimum of one document is required for submission"),this.saveAction="",void(this.workflowFormModel={});let e=this.checkList.filter(e=>e.required&&!e.attach);e.length?this.docWarning?this.alertModal=!0:(this.$alert.warning("Mandatory documents required"),this.saveAction="",this.workflowFormModel={}):this.proceedSubmission()}},proceedSubmission(){this.alertModal=!1,this.initiateProcess?this.initiateRequest():this.processRequest()},closeAlertModal(){this.alertModal=!1,this.saveAction="",this.workflowFormModel={}},getJiraIssueInfo(e){if(e.jiraIssueInfo.id)return{"Ref# Id":e.jiraIssueInfo.id,Key:e.jiraIssueInfo.key,Link:e.jiraIssueInfo.self?this.getJIRALink(e.jiraIssueInfo):"",Assignee:e.jiraIssueInfo.assignee,"Issue Status":e.jiraIssueInfo.issueStatus}},getProcessData(e,t=!1){const s={};if(this.workflow.wFormId&&this.wform.formJson){if(e.formData)for(let i of Object.keys(e.formData.fields))if(t){const t=this.getLabel(i);s[t]=e.formData.fields[i]}else s[i]=e.formData.fields[i]}else if(this.workflow.repositoryId&&e.itemData)for(let i of Object.keys(e.itemData.items))s[i]=e.itemData.items[i];return s},getLabel(e){let t="",s=JSON.parse(this.wform.formJson);const i=[...s.panels,...s.secondaryPanels];if(!i.length)return;let a=[];for(const o of i)a.push(...o.fields);return a.forEach(s=>{const i=s.settings.specific.tableColumns.find(t=>t.id===e);if(i)t=i.label;else if(s.id===e)return void(t=s.label)}),t},isVisible(e){const t=this.columns,s=t.findIndex(t=>t.id===e);return s>-1&&t[s].isVisible},reupload(e){var t;e=e.substr(0,e.lastIndexOf(".")).split("_")[0],this.checkListRowIndex=null===(t=this.checkList.find(t=>t.name===e))||void 0===t?void 0:t.uid,this.$refs.attachments.click()},attachmentFilterCheckList(e){return this.attachmentList.filter(t=>t.name.substring(0,t.name.lastIndexOf("."))===e||t.name.substring(0,t.name.lastIndexOf(".")).split("_")[0]===e)},isCheckList(e){let t=this.checkList.filter(t=>t.name===e.substring(0,e.lastIndexOf("."))||t.name===e.substring(0,e.lastIndexOf(".")).split("_")[0]);return!t.length},showMailAttachments(e){this.mailAttachmentList=[];let t=e.attachmentJson.split(",");t.forEach(t=>{let s=t.split("\\").pop();this.mailAttachmentList.push({id:this.$nano.id(),mailId:e.id,name:s,createdAt:e.createdAt})}),this.mailAttachmentSheet=!0},openAttachmentFile(e){let t=`https://appuat.ezofis.com/ezofisapi/api/client/viewAttachment/${this.$store.state.session.tenantId}/${e.mailId}/${e.name}`;window.open(t,"_blank")},closeJiraConfirmModal(){this.jiraConfirmModal=!1,this.$emit("refresh",this.workflow.id)},updateSelectedSubWorkflow(e){this.subProcessData=e,this.selectedSubWorkflow=e,this.subWorkflowId=e.id,this.openSubProcessSheet=!0},async initiateRequest(){let e=[],t=[];this.formFields.forEach(e=>{if("FILE_UPLOAD"===e.type&&this.workflowModel[e.value]){let s=[];this.workflowModel[e.value].forEach(e=>{e.fileId&&s.push(e.fileId)}),s.length&&t.push({jsonId:e.value,fileIds:s}),delete this.workflowFormModel[e.value]}}),this.attachmentList.length&&this.attachmentList.forEach(s=>{const i=t.some(e=>e.fileIds.includes(s.id));i||e.push(s.id)});let s={workflowId:this.workflow.id,review:"Save"===this.saveAction?"":this.saveAction,comments:this.commentsList,formData:{formId:this.formId,fields:this.workflowFormModel,formUpload:t},fileIds:e,task:this.taskEntryId,hasFormPDF:this.generatePDF,prefix:this.requestPrefix,mlPrediction:this.mlPrediction};this.$store.commit("showLoadingBarSave");const{error:i,payload:a}=await l["t"].processTransaction(s);this.$store.commit("hideLoadingBarSave"),this.saveAction="",this.workflowFormModel={},this.alertModal=!1,i?this.$alert.error(i):(this.signImg&&await this.saveProcessSignature(a),s.review?this.$alert.success(a.requestNo+" Request Initiated"):this.$alert.success(a.requestNo+" Request Initiated and Moved to your inbox"),this.subProcessId&&this.addSubWorkflowProcess(a.processId),this.closeProcessSheet(),this.$emit("refresh",this.workflow.id))},async addSubWorkflowProcess(e){let t={mainWorkflowId:this.workflow.id,subWorkflowId:this.subWorkflowId,mainProcessId:e,subProcessId:this.subProcessId,subProcessStatus:0,review:""};const{error:s}=await l["t"].addSubWorkflow(t);s?this.$alert.error(s):this.updateSubWorkflowProcess()},async updateSubWorkflowProcess(){const{error:e,payload:t}=await l["q"].updateSubWorkflowProcess(this.workflow.id,this.$store.state.session.tenantId,this.subWorkflowId);e?this.$alert.error(e):console.log(t)},async processRequest(e=!0,t=!0){if(e){if(this.isTenantGOTO()&&"Assign"===this.saveAction&&this.internalForward.proceed)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0);if("Forward"===this.saveAction&&this.internalForward.proceed)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0);if(this.isTenantArmgroup()&&"Assign"===this.saveAction)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0)}if(t){let e=this.processActionsAddOn.find(e=>e.action===this.saveAction);if(e&&Object.keys(e).length){if(this.actionRemarks=e.remarks,this.actionPassword=e.passwordAccess,this.actionConfirm=e.confirm,this.actionPassword)return void(this.actionPasswordConfirm=!0);if(this.actionRemarks)return this.actionComments=!0,void(this.advancedCommentsSheet=!0);if(this.actionConfirm)return void(this.actionConfirmAlert=!0)}}let s={},i=location.origin;this.userReply&&this.saveAction.indexOf("Reply")>-1?this.saveAction="UserReply":this.toRequester&&"To Requester"===this.saveAction&&(this.saveAction="ToInitiator"),this.customReply&&this.saveAction.indexOf("Reply")>-1&&(this.saveAction="Reply",this.forwardUsers.push(this.selectedProcess.transaction_createdBy));let a=[];if(this.formFields.forEach(e=>{if("FILE_UPLOAD"===e.type&&this.workflowModel[e.value]){let t=[];this.workflowModel[e.value].forEach(e=>{e.fileId&&t.push(e.fileId)}),t.length&&a.push({jsonId:e.value,fileIds:t}),delete this.workflowFormModel[e.value]}}),this.formId){if(this.isTenantGOTO()&&"Rollback"===this.saveAction)1===this.workflow.id&&this.forwardUsers.push(this.selectedProcess.transaction_createdBy);else if("http://demo.ezofis.com"===i||"http://52.172.32.88"===i)6===this.workflow.id&&this.forwardUsers.push(this.selectedProcess.transaction_createdBy);else if(this.isTenantArmgroup()&&"szS6B-q1x9acpB83rP6jT"===this.selectedProcess.activityId&&"Assign"===this.saveAction){let e=this.formFields.find(e=>"Assigned To"===e.label);if(e){let t=this.userList.find(e=>e.value===this.armgroupForwardUser);if(!t)return void this.$alert.warning("Select any one user to assign");{this.workflowFormModel[e.value]=t.label;let s=this.formFields.find(e=>"Initials"===e.label);this.workflowFormModel[s.value]=this.userInitials(t)}this.armgroupForwardUser=""}}s={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction||"CustomVerify"===this.saveAction?"":this.saveAction,formData:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,fields:this.saveOnly?this.autoSaveModel:this.workflowFormModel,formUpload:a},userIds:this.forwardUsers,groupIds:this.forwardGroups}}else this.itemModel&&(s={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction?"":this.saveAction,formData:{},userIds:this.forwardUsers,groupIds:this.forwardGroups});this.saveAction="",this.workflowFormModel={},this.saveOnly||this.$store.commit("showLoadingBarSave");const{error:o}=await l["t"].processTransaction(s);this.saveOnly||this.$store.commit("hideLoadingBarSave"),o?this.$alert.error(o):(this.signImg&&await this.saveProcessSignature(this.selectedProcess),this.saveOnly?this.saveOnly=!1:(""===s.review?(this.$alert.info(this.selectedProcess.requestNo+" data saved, awaiting your action to submit"),this.refreshAction=!0):s.review.toLowerCase().indexOf("reject")>-1?this.$alert.danger(this.selectedProcess.requestNo+" Request Rejected Successfully"):this.$alert.success(this.selectedProcess.requestNo+" Request Processed"),s.review&&(this.forwardUsers=[],this.forwardGroups=[],this.$emit("update:customReply",!1),this.$emit("update:userReply",!1),this.$emit("update:toRequester",!1),this.$emit("update:selectedProcess",{}),this.closeProcessSheet(),this.processForwardModal=!1,this.$emit("refresh",this.workflow.id))),this.fileControlDeleteFile.length&&(this.fileControlDeleteFile.forEach(e=>{this.fileControlDeletedFile(e)}),this.fileControlDeleteFile=[]))},async groupProcessRequest(){let e=[],t="";if(this.isTenantArmgroup()){this.workflowRequestList.forEach(t=>{t.checked&&e.push(t.transactionId)});let t=this.formFields.find(e=>"Assigned To"===e.label);if(t){let e=this.userList.find(e=>e.value===this.armgroupForwardUser);if(!e)return void this.$alert.warning("Select any one user to assign");{this.workflowFormModel[t.value]=e.label;let s=this.formFields.find(e=>"Initials"===e.label);this.workflowFormModel[s.value]=this.userInitials(e)}this.armgroupForwardUser=""}}else this.workflowRequestList.forEach(t=>{t.key===this.groupActionKey&&t.checked&&e.push(t.transactionId)});this.groupKey.forEach(s=>{if(s.checked)return e=[],void(t=s.name)});let s={workflowId:this.workflow.id,transactionId:e,review:"Save"===this.saveAction?"":this.saveAction,fields:this.workflowFormModel,mlPrediction:t,comments:this.commentText,userIds:this.forwardUsers,groupIds:this.forwardGroups,filterBy:this.filterBy};const{error:i}=await l["t"].groupRequestAction(s);this.$store.commit("hideLoadingBar"),i?this.$alert.error(i):(this.isTenantGOTO()&&await this.insertJiraIssueComment(),this.saveAction="",this.workflowFormModel={},this.forwardUsers=[],this.forwardGroups=[],this.$alert.success("Group Request Processed"),this.processForwardModal=!1,this.closeRequestActionModal(),this.$emit("refresh",this.workflow.id))},async getComments(e=0,t=0){this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=0)}),this.commentsList=[],e||t||(e=this.workflow.id,t=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:s,payload:i}=await l["t"].getProcessComments(e,t);this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):i.length&&(this.commentsList=i,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}))},async saveComment(){if(this.commentText){if(this.attachComment&&!this.selectedFileForAttach)return void this.$alert.warning("Select File To Attach");if(this.selectedProcess.processId){if(this.isTenantGOTO()&&this.selectedProcess.jiraIssueInfo.id&&2===this.jiraCommentAction){const{error:e,payload:t}=await l["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.commentText});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,t)}else{const{error:e,payload:t}=await l["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:this.commentAction,hasNotifytoInitiated:this.notifyInitiator,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,[t])}this.commentText="",this.clearAttach(),this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id,hasNotifytoInitiated:this.notifyInitiator,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]}),showTo:this.commentAction}),this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}),this.commentText="",this.clearAttach()}},async saveAdvancedComment(){if(this.advancedCommentText){if(this.attachComment&&!this.selectedFileForAttach)return void this.$alert.warning("Select File To Attach");if(this.selectedProcess.processId){if(this.isTenantGOTO()&&this.selectedProcess.jiraIssueInfo.id&&2===this.jiraCommentAction){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await l["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t)}else{const{error:e,payload:t}=await l["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:this.commentAction,hasNotifytoInitiated:this.notifyInitiator,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t)}this.advancedCommentText="",this.advancedCommentsSheet=!1,this.clearAttach(),this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id,showTo:this.commentAction}),this.advancedCommentText="",this.advancedCommentsSheet=!1,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)});this.actionComments&&this.processRequest(!1,!1)}},async uploadWflowAttachments(e){if(this.fileUploadForControl=!1,"STATIC"===this.repositoryDetails.fieldsType){if(this.selectedUploadFile=e,this.customCheckUpload()){let t=this.formFields.find(e=>"Document No"===e.label);this.uploadFilename=t?this.workflowModel[t.value]+".pdf":e.target.files[0].name}else this.uploadFilename=e.target.files[0].name;this.showMetaDataEditModal=!0}else this.uploadAttachments(e)},async uploadAttachments(e,t){if(this.selectedProcess.processId){const i=e.target.files[0],a=new FormData;a.append("workflowId",this.workflow.id),a.append("repositoryId",this.workflow.repositoryId),a.append("processId",this.selectedProcess.processId),a.append("transactionId",this.selectedProcess.transactionId),t?a.append("fields",t):a.append("fields",""),a.append("file",i);let o=e.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);a.append("filename",e[0].name+"."+r),o=e[0].name+"."+r}if(!Object(U["a"])(r))return void this.$alert.info("This file format is not supported");this.$store.commit("showLoadingBar");try{const e=await J()({url:"https://appuat.ezofis.com/ezofisapi/api/workflow/attachmentWithProcessId",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:t,data:s}=e;if(200!==t||!s)throw e;this.$alert.success("Document attached"),this.documentLoad=setInterval(()=>{this.getAttachments(),clearInterval(this.documentLoad)},15e3)}catch(s){this.$alert.error("Error uploading file"),console.error(s)}this.$store.commit("hideLoadingBar"),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value="",Object.keys(this.reuploadFile).length&&(await this.attachmentDelete(this.reuploadFile),this.reuploadFile={})}else{const i=e.target.files[0],a=new FormData;a.append("file",i),a.append("repositoryId",this.workflow.repositoryId),t&&(this.fileData=JSON.parse(t),a.append("fields",t));let o=e.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);a.append("filename",e[0].name+"."+r),o=e[0].name+"."+r}else a.append("filename",o);if(!Object(U["a"])(r))return void this.$alert.info("This file format is not supported");this.$store.commit("showLoadingBar");try{const s=await J()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}});this.$store.commit("hideLoadingBar");const{status:n,data:l}=s;if(200!==n)throw"Invalid response";let c=JSON.parse(l);this.$alert.success("Document attached");let d=this.repositoryField.reduce((e,t)=>e.level>t.level?e:t),m=this.fileData.find(e=>e.name===d.name),h=!1;"pdf"!==r.toLowerCase()&&(h=!0,this.documentLoadList.push(Number(c.fileId)),this.documentLoad=setInterval(()=>{let e=this.attachmentList.find(e=>this.documentLoadList.indexOf(e.id)>-1);e&&(this.documentLoadList.splice(this.documentLoadList.indexOf(e.id),1),e.loading=!1),0===this.documentLoadList.length&&clearInterval(this.documentLoad)},1e4)),this.attachmentList.push({id:Number(c.fileId),name:t?m.value+"."+r:o,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:i.size,initiate:!0,uid:this.checkListRowIndex,createdBy:this.$store.state.session.id,fileData:this.fileData,repositoryId:this.workflow.repositoryId,loading:h}),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)}),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value=""}catch(s){console.error(s),this.$alert.error("error attaching file")}}},async getAttachments(e=0,t=0){this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=0)});let s=this.attachmentList.length;e||t||(e=this.workflow.id,t=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:i,payload:a}=await l["t"].getAttachments(e,t);if(this.$store.commit("hideLoadingBar"),i)this.$alert.error(i);else if(a.length?(s!==a.length&&(this.attachmentList=a.map(e=>({...e,checked:!1}))),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)})):this.attachmentList=[],this.checkList.length){this.checkList.forEach(e=>{let t=this.attachmentList.filter(t=>{let s=t.name.substr(0,t.name.lastIndexOf("."));if(e.name===s||e.name===s.split("_")[0])return t});t.length?e.attach=!0:e.attach=!1});let e=location.origin;(this.isTenantArmgroup()||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&this.selectedProcess.attachmentCount!==this.attachmentList.length&&(this.formCheckList=!0)}},async getMailTransactions(){this.mailTransactionList=[],this.tabs.find(e=>{"MAIL"===e.value&&(e.count=0)});let e={filterBy:[]};const{error:t,payload:s}=await l["t"].getMailTransactions(this.workflow.id,this.selectedProcess.processId,e);t?this.$alert.error(t):s.length&&(this.mailTransactionList=s,this.tabs.find(e=>{"MAIL"===e.value&&(e.count=this.mailTransactionList.length)}))},async resendMail(e){if(e){const{error:t}=await l["t"].resendMail(e);if(t)return void this.$alert.error(t);this.$alert.success("Resend Successful!"),this.getMailTransactions()}else this.$alert.info("Unable to resend")},async attachmentDelete(e){if(e.fileControl){let t=this.workflowModel[e.fieldId];if(t.length){let s=t.findIndex(t=>t.fileId===e.id);console.log(s),s>=0&&this.workflowModel[e.fieldId].splice(s,1);let i=this.formUploadFiles.findIndex(t=>t.fileId===e.id&&t.fileId===e.fileId);console.log(i),i>=0&&this.formUploadFiles.splice(s,1),e.control.length&&e.control.forEach(e=>{this.workflowModel[e]=""})}let s=this.attachmentList.findIndex(e=>e.fileControl);console.log(s),s>=0&&(this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length-1)}),this.attachmentList.splice(s,1))}else if(e.initiate){const{error:t}=await l["r"].deleteUploadedFiles([e.id]);if(t)return void this.$alert.error(t);this.attachmentList=this.attachmentList.filter(t=>t.id!==e.id),this.checkList.forEach(t=>{t.uid===e.uid&&(t.attach=!1)})}else{const{error:t}=await l["p"].fileDelete(this.workflow.repositoryId,e.id);if(t)return void this.$alert.error(t);this.getAttachments()}},async saveProcessSignature(e){let t={signBinary:this.signImg.split(",")[1],fileType:"png"};const{error:s}=await l["t"].saveProcessSignature(this.workflow.id,e.processId,e.transactionId,t);s?this.$alert.error(s):this.signImg=""},async getProcessSignature(){this.signList=[];const{error:e,payload:t}=await l["t"].getProcessSignature(this.workflow.id,this.selectedProcess.processId);e?this.$alert.error(e):this.signList=t},async getAppConnection(){this.jiraConnect=!1;const{error:e,payload:t}=await l["j"].getJiraConnection({filterBy:[]});e?this.$alert.error(e):t.forEach(e=>{"jira"===e.cloudName&&(this.jiraConnect=!0,this.jiraAccounts.push(e))})},async createJiraIssue(){this.issueRef={};const e=await this.$refs.form.validate();if(!e)return;let t=[],s="",i="",a=0;this.groupKey.forEach(e=>{if(e.checked)return t=[],void(s=e.name)}),""===s&&(this.workflowRequestList.forEach(e=>{e.checked&&t.push(e.transactionId)}),this.issueDescriptionTable&&(i="||Action Taken (Mandatory)",this.issueDescriptionFields.forEach(e=>{i+="||"+e}),i+="||\n",this.workflowRequestList.forEach(e=>{e.checked&&(i+="|| ",this.issueDescriptionFields.forEach(t=>{var s;let o=null===(s=this.formFields.find(e=>e.label===t))||void 0===s?void 0:s.value;"Savings"===t?e.formData.fields[o]?(i+="||"+Number(e.formData.fields[o]).toFixed(2),a+=Number(e.formData.fields[o])):i+="|| ":e.formData.fields[o]?i+="||"+e.formData.fields[o]:i+="|| "}),i+="||\n")}),i+="Potential Savings: "+a.toFixed(2)+"\n"));let o={};o=this.jiraAccounts[0].email?{fields_cloud:{fields:{summary:this.issueName,project:{key:this.projectKey},issuetype:{name:this.issueType},description:{content:[{content:[{text:this.issueDescription+i,type:"text"}],type:"paragraph"}],type:"doc",version:1}}},cloudIntegrationId:this.jiraAccounts[0].id}:{fields_onpremise:{fields:{summary:this.issueName,project:{key:this.projectKey},issuetype:{name:this.issueType},description:this.issueDescription+i,customfield_14635:{value:"No"},customfield_15136:{value:"Maintenance"}}},cloudIntegrationId:this.jiraAccounts[0].id,workflowId:this.workflow.id,transactionId:t,mlPrediction:s,assignee:this.issueAssignee?{name:this.issueAssignee}:{},filterBy:this.filterBy},this.$store.commit("showLoadingBar");const{error:r,payload:n}=await l["j"].createJiraIssue(o);if(this.$store.commit("hideLoadingBar"),r){this.$alert.warning("error creating issue in jira");let e=JSON.parse(r);return console.log(e),this.errorMessage=e.errorMessages,void(this.errorModal=!0)}if(s)this.successModal=!0;else{if(!n)return void this.$alert.warning("error creating issue in jira");this.issueRef=JSON.parse(n),this.issueRef.self=this.getJIRALink(this.issueRef),this.$alert.success("Issue Created in JIRA"),this.jiraConfirmModal=!0}this.closeJiraIssueSheet()},async insertJiraIssueComment(){var e,t;let s="",i="";if(s=null===(e=this.formFields.find(e=>"Reference ID"===e.label))||void 0===e?void 0:e.value,i=null===(t=this.formFields.find(e=>"Remarks"===e.label))||void 0===t?void 0:t.value,this.workflowFormModel[s]&&this.workflowFormModel[i]){this.$store.commit("showLoadingBar");let e={};e=this.jiraAccounts[0].email?{cloudIntegrationId:this.jiraAccounts[0].id,url:this.workflowFormModel[s],data_cloud:{body:this.workflowFormModel[i]}}:{cloudIntegrationId:this.jiraAccounts[0].id,url:this.workflowFormModel[s],data_onpremise:{body:this.workflowFormModel[i]}};const{error:t,payload:a}=await l["j"].insertJiraIssueComments(e);if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);console.log(a)}},async getJiraUsers(){this.issueAssigneeUsers=[];const{error:e,payload:t}=await l["j"].getJiraUsers({cloudIntegrationId:this.jiraAccounts[0].id});e?this.$alert.error(e):t.length&&t.forEach(e=>{this.issueAssigneeUsers.push({id:e.key,label:e.displayName,value:e.name})})},async getFileData(e,t){const{error:s,payload:i}=await l["p"].getFileData({repositoryId:e.repositoryId,itemId:e.id});s?this.$alert.error(s):i&&(e.fileData?this.fileData=e.fileData:this.fileData=i,"file"!==t&&(this.fileDetailsSheet=!0))},async sendCommentsToJira(e,t,s){if(this.$store.commit("showLoadingBar"),1===this.jiraCommentAction){var i;let t=null===(i=this.formFields.find(e=>"Resource ID"===e.label))||void 0===i?void 0:i.value;e=this.selectedProcess.formData.fields[t]+","+e}e=`${this.$store.state.session.firstName} ${this.$store.state.session.lastName}: ${e}`;let a={cloudIntegrationId:this.jiraAccounts[0].id,url:this.selectedProcess.jiraIssueInfo.self,data_onpremise:{body:e},issueId:t,ezCommentId:s};const{error:o,payload:r}=await l["j"].insertJiraIssueComments(a);if(this.$store.commit("hideLoadingBar"),o){this.$alert.error("error posting comments to jira");let e=JSON.parse(o);return this.errorMessage=e.errorMessages,void(this.errorModal=!0)}console.log(r),this.jiraCommentAction=1},async validatePassword(){const e=await this.$refs.passwordForm.validate();if(!e)return;this.isLoading=!0;const{error:t}=await l["a"].validatePassword({password:this.actionUserPassword});if(this.isLoading=!1,t)return console.log(t),void this.$alert.warning(t);this.actionUserPassword="",this.actionPasswordConfirm=!1,this.actionRemarks?(this.actionComments=!0,this.advancedCommentsSheet=!0):(this.actionRemarks=!1,this.actionPassword=!1,this.processRequest(!1,!1))},async getRepository(){const{error:e,payload:t}=await l["p"].getRepository(this.workflow.repositoryId);e?this.$alert.error(e):(this.repositoryDetails=t,this.repositoryField=t.fields)},saveMetaData(e){let t=[];if(this.repositoryField.forEach(s=>{t.push({name:s.name,value:e[s.name],type:s.dataType})}),t.forEach(e=>{let t=this.formFields.find(t=>Object(ye["a"])(t.label)===Object(ye["a"])(e.name));t&&e.value&&(this.workflowModel[t.value]=e.value)}),this.fileUploadForControl){this.metaDataModal=e;let s=this.fileUploadInput;this.uploadFilesFromForm(s.files,s.control,s.fieldId,JSON.stringify(t),s.aiSettings)}else this.uploadAttachments(this.selectedUploadFile,JSON.stringify(t))},processDocumentAction(e){if("Email_Sharing"===e);else if("Print"===e){if(this.itemModel.name){let e=this.itemModel.name.split(".").pop();Object(U["d"])(e)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.itemModel.itemId)):this.$refs.myProcessFiles.contentWindow.print()}this.processFilePrintSession()}else if("Download"===e){let e="";e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.itemModel.repositoryId}/${this.itemModel.itemId}/2`,window.open(e,"_blank")}},async processFilePrintSession(){const{error:e}=await l["k"].filePrintSession({repositoryId:this.itemModel.repositoryId,itemId:this.itemModel.itemId,activityId:4});e&&this.$alert.error(e)},fileMenuAction(e,t){this.selectedFile=e,this.documentAction(t,!0)},documentAction(e,t){if("Email_Sharing"===e);else if("Print"===e){if(this.selectedFile.name)if(t){let e="";if(this.selectedFile.initiate){let t=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(t=2),e=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${t}/1`}else e=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(e,"_blank")}else{let e=this.selectedFile.name.split(".").pop();Object(U["d"])(e)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myAttachmentFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===e){let e="";if(this.selectedFile.initiate){let t=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(t=2),e=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${t}/2`}else e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(e,"_blank")}},async filePrintSession(){const{error:e}=await l["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});e&&this.$alert.error(e)},async documentMerge(){let e=[];this.attachmentList.forEach(t=>{let s=t.name.split(".").pop();t.checked&&"pdf"===s.toLowerCase()&&e.push(t.id)});let t={ids:e};const{error:s}=await l["t"].documentMerge(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,this.workflow.repositoryId,t);s?this.$alert.error(s):this.$alert.success("Document merge process initiated")},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(e=>{e.checked&&this.selectedFileList.push({id:e.id,name:e.name})}),this.emailSharingSheet=!0},async exportRequestData(){let e=[],t=0,s="";this.workflow.id?(t=this.workflow.id,s=this.workflow.name):(t=this.dashboardId,s=this.dashboardName);let i={filterBy:this.filterBy,itemsPerPage:500,currentPage:1,filterValue:"Completed"===this.selectedNode?this.selectedCompletedNode:""};if("inbox"===this.selectedNode){const{error:s,payload:a}=await l["t"].getInboxList(t,i);this.$store.commit("hideLoadingBarPage");const{meta:o,data:r}=a;if(o.totalItems&&r.length&&(e=r[0].value),s)return void this.$alert.error(s)}else if("common"===this.selectedNode){const{error:s,payload:a}=await l["t"].getCommonList(t,i);this.$store.commit("hideLoadingBarPage");const{meta:o,data:r}=a;if(o.totalItems&&r.length&&(e=r[0].value),s)return void this.$alert.error(s)}else if("sent"===this.selectedNode){const{error:s,payload:a}=await l["t"].getSentList(t,i);this.$store.commit("hideLoadingBarPage");const{meta:o,data:r}=a;if(o.totalItems&&r.length&&(e=r[0].value),s)return void this.$alert.error(s)}else if("completed"===this.selectedNode){const{error:s,payload:a}=await l["t"].getCompletedList(t,i);this.$store.commit("hideLoadingBarPage");const{meta:o,data:r}=a;if(o.totalItems&&r.length&&(e=r[0].value),s)return void this.$alert.error(s)}else if("payment"===this.selectedNode){const{error:s,payload:a}=await l["t"].getPaymentList(t,i);this.$store.commit("hideLoadingBarPage");const{meta:o,data:r}=a;if(o.totalItems&&r.length&&(e=r[0].value),s)return void this.$alert.error(s)}if(e.length){let t=[];e.forEach(e=>{t.push({"Request No":e.requestNo,...this.getJiraIssueInfo(e),Stage:e.stage,"Action User":e.activityUserEmail,"Raised By":e.raisedBy,"Raised On":this.$day.format(e.raisedAt),"Last Action":e.lastAction,"Last Action By":e.transaction_createdByEmail,"Last Action On":this.$day.format(e.transaction_createdAt),Duration:this.lastActionDuration(e),"Attachments Count":e.attachmentCount,"Comments Count":e.commentsCount,...this.getProcessData(e,!0)})}),Object(re["a"])(t,s+"-"+this.selectedNode+" Report"),this.$emit("exported")}},initiateSubWorkflow(){this.initiateSubWorkflowProcess=!0},async getSubWorkflow(){this.tabs.find(e=>{"SUB_PROCESS"===e.value&&(e.count=0)});const{error:e,payload:t}=await l["t"].getSubWorkflow(this.workflow.id,this.selectedProcess.processId);e?this.$alert.error(e):t.length&&this.getSubProcessDetails(t[0].subWorkflowId,t)},async getSubProcessDetails(e,t){this.subProcessTickets=[];const{error:s,payload:i}=await l["o"].getWorkflowData(e,{filterBy:[],itemsPerPage:0,currentPage:0,mode:""});if(s)this.$alert.error(s);else if(i.meta.totalItems){let e=[];t.forEach(t=>{let s=i.data[0].value.find(e=>e.processId===Number(t.subProcessId));s&&e.push(s)}),e.length&&(this.subProcessTickets=e),this.tabs.find(t=>{"SUB_PROCESS"===t.value&&(t.count=e.length)})}},subProcessShowLinks(e,t){this.subProcessLink="",this.subProcessData=t,this.subProcessLink=e},openSubProcess(e){this.subProcessData=e,this.openSubProcessSheet=!0},closeSubProcess(){this.openSubProcessSheet=!1,this.subProcessData={},this.initiateSubWorkflowProcess=!1},async getSignerSettings(){this.forwardUsers=[];let e=this.itemModel.itemId.toString();localStorage.getItem("signItemId")&&"0"!==localStorage.getItem("signItemId")&&(e=localStorage.getItem("signItemId")),localStorage.removeItem("signItemId");let t=[{groupCondition:"",filters:[{criteria:"processId",condition:"IS_EQUALS_TO",value:this.selectedProcess.processId.toString()},{criteria:"repositoryId",condition:"IS_EQUALS_TO",value:this.itemModel.repositoryId.toString()},{criteria:"itemId",condition:"IS_EQUALS_TO",value:e}]}];try{const e=await J()({url:`https://appuat.ezofis.com/ezofisapi/api/annotation/signSettingsList/${this.$store.state.session.tenantId}/${this.selectedProcess.id}`,method:"POST",headers:{Accept:"application/json"},data:t}),{status:s,data:i}=e;if(200!==s)throw"Invalid response";let a=JSON.parse(i),o=JSON.parse(a.settingsJson);if(o.length){let e=o.find(e=>e.signerId===Number(this.$store.state.session.id));if(e&&e.signOrder){let t=e.signOrder+1,s=o.find(e=>e.signOrder===t);s&&("External"==s.signerType?this.forwardUsers.push(s.externalSignerId):this.forwardUsers.push(s.signerId))}}this.saveAction=this.processActions[0],this.processRequest(!1,!1)}catch(s){console.error(s),this.$alert.error("error getting signer details")}},async uploadFilesFromForm(e,t,s,i,a){this.formUploadFiles=[];const o=new FormData;if(e.length){for(let l of e){if(l.name&&!l.error){o.append("repositoryId",this.workflow.repositoryId),o.append("file",l),o.append("filename",l.name),i?o.append("fields",i):o.append("fields",""),Object(ve["a"])(a)||a.formControlValidate&&("MASTER"===a.formControlValidate.optionsType&&(o.append("masterFormId",a.formControlValidate.masterFormId),o.append("masterFormColumn",a.formControlValidate.masterFormColumn)),a.fileDataValidate.length&&o.append("isValidateFile",a.fileDataValidate.includes("EXPIRY_DATE")));try{const e=await J()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:o,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"},onUploadProgress:function(e){let t=Math.round(100*e.loaded/e.total),i=this.workflowModel[s].findIndex(e=>e.name===l.name);i>=0&&(this.$set(this.workflowModel[s][i],"uploadedPercentage",0),this.workflowModel[s][i].uploadedPercentage=t>50&&100!==t?t:98)}.bind(this)}),{status:i,data:a}=e;if(200!==i)throw"Invalid response";l.createdAt=this.$day.newDateTime(),l.createdBy=this.$store.state.session.email;let r=JSON.parse(a);l.fileId=r.fileId,l.fieldId=s,l.fileDataValidate=r.OCRfieldlist,this.attachmentList.push({id:Number(r.fileId),name:l.name,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:l.size,initiate:!0,formAttach:!0,fileControl:!0,fieldId:s,control:t}),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)})}catch(r){console.error(r),this.$alert.error("error attaching file")}}let e=this.workflowModel[s].findIndex(e=>e.name===l.name);e>=0&&(this.workflowModel[s][e].uploadedPercentage=99,this.workflowModel[s][e].uploadedPercentage=100)}let n=Array.from(e);this.formUploadFiles=[];for(let e of n)if(e.name){const t=await Object(pe["a"])(e);this.formUploadFiles.push({name:e.name,size:e.size,file:t,fileId:e.fileId,createdBy:e.createdBy,createdAt:e.createdAt,workflowId:this.selectedProcess.id,processId:this.selectedProcess.processId,fieldId:e.fieldId,fileDataValidate:e.fileDataValidate})}t&&t.length&&t.forEach(e=>{let t=this.readonlyControls.findIndex(t=>t===e);t>=0&&this.readonlyControls.splice(t,1)}),this.$store.commit("hideLoadingBarSave")}},mandatoryControlsList(e){this.mandatory=e},deletedFiles(e,t){if(this.fileControlDeleteFile.push(e),t){t.controls&&t.controls.length&&t.controls.forEach(e=>{console.log(e),this.workflowModel[e]=""});let e=this.attachmentList.findIndex(e=>e.name===t.file.name&&e.id===t.file.fileId&&e.fileControl);this.ocrResult=[],e>=0&&(this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length-1)}),this.attachmentList.splice(e,1))}},async fileControlDeletedFile(e){this.$store.commit("showLoadingBar");let t=[];e.forEach(e=>{e.id&&t.push(e.id)});let s={ids:t,formInfo:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,jsonId:e[0].jsonId}};const{error:i}=await l["p"].fileControlDeleteFile(this.workflow.repositoryId,s);this.$store.commit("hideLoadingBar"),i&&this.$alert.error(i)},async checkFormValidation(){this.hasCheckFormValidate=!0},async refreshFormData(){const{error:e,payload:t}=await l["o"].getWorkflowData(this.selectedProcess.id,{filterBy:[{filters:[{criteria:"requestNo",condition:"IS_EQUALS_TO",value:this.selectedProcess.requestNo}]}],itemsPerPage:10,currentPage:1,mode:""});if(e)this.$alert.error(e);else if(t.data.length&&(this.formModel={},t.data[0].value[0].formData)){let e=Object.keys(t.data[0].value[0].formData.fields),s={};e.forEach(e=>{s[e]=this.validateTypeValue(t.data[0].value[0].formData.fields[e])}),this.formModel=s}},async uploadFileForControl(e,t,s,i){if(this.fileUploadInput={files:e,control:t,fieldId:s,aiSettings:i},"STATIC"===this.repositoryDetails.fieldsType){if(this.fileUploadForControl=!1,this.customCheckUpload()){let e=this.formFields.find(e=>"Document No"===e.label);e&&(this.uploadFilename=this.workflowModel[e.value]+".pdf")}let e=this.getLabel(s);this.uploadFilename=e;const t=this.repositoryField.reduce((e,t)=>t.level>e.level?t:e,this.repositoryField[0]),i=t.id;if(this.attachmentList.length){let e=this.attachmentList.length-1;await this.getFileData(this.attachmentList[e],"file")}const a=this.fileData.find(e=>i==e.id),o={id:t.id,name:t.name,value:e,type:t.dataType};this.fileData.length?a.value=e:this.fileData.push(o);const r=this.repositoryField.filter(e=>!0===e.isMandatory).map(e=>e.id),n=r.every(e=>{const t=this.fileData.find(t=>t.id===e);return t&&""!==t.value});if(this.showMetaDataEditModal=!n,n){const e={};this.fileData.forEach(t=>{e[t.name]=""!==t.value?t.value:""}),this.fileUploadForControl=!0,this.saveMetaData(e)}else this.fileUploadForControl=!0,this.showMetaDataEditModal=!0}else this.uploadFilesFromForm(e,t,s,"",i)},async getOCRResult(e,t,s,i){const a=new FormData;let o=[];if(t&&t.length){if(t.forEach(e=>{this.readonlyControls.push(e)}),t.forEach(e=>{let t=this.formFields.find(t=>t.value===e);t&&o.push(`${t.label}, ${t.type}`)}),e.length){for(let t of e){if(t.name&&!t.error){a.append("repositoryId",this.workflow.repositoryId),a.append("file",t),a.append("formFields",JSON.stringify(o));try{const e=await J()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/uploadforStaticMetadata",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"},onUploadProgress:function(e){let i=Math.round(100*e.loaded/e.total),a=this.workflowModel[s].findIndex(e=>e.name===t.name);a>=0&&(this.$set(this.workflowModel[s][a],"uploadedPercentage",0),this.workflowModel[s][a].uploadedPercentage=i<50?i:49)}.bind(this)}),{status:i,data:o}=e;if(200!==i)throw"Invalid response";let r=Object(fe["a"])(o,this.$store.state.identity.key,this.$store.state.identity.iv),n=JSON.parse(r),l=JSON.parse(n),c=JSON.parse(l);Array.isArray(c)&&(c.forEach(e=>{let t=this.formFields.find(t=>t.label===e.name);t&&e.value&&(this.workflowModel[t.value]=e.value)}),this.ocrResult=c)}catch(r){console.error(r),this.$alert.error("error on get ocr result")}}this.workflowModel[s].findIndex(e=>e.name===t.name)}this.$store.commit("hideLoadingBarSave"),this.uploadFileForControl(e,t,s,i)}}else this.uploadFileForControl(e,t,s,i)},async checkTicketLock(){let e={sortBy:{criteria:"",order:"DESC"},filterBy:[{filters:[{criteria:"requestNo",condition:"IS_EQUALS_TO",value:this.selectedProcess.requestNo,dataType:"SHORT_TEXT"}],groupCondition:""}],itemsPerPage:10,currentPage:1};const{error:t,payload:s}=await l["t"].getCommonList(this.selectedProcess.id,e);t?this.$alert.error(t):(console.log(s),s.meta.totalItems&&s.data.length&&s.data[0].value.length&&(this.$emit("update:selectedProcess",s.data[0].value[0]),s.data[0].value[0].ticketLockedBy===this.$store.state.session.id?this.isRequestLocked=!1:s.data[0].value[0].ticketLockedBy&&"0"!==s.data[0].value[0].ticketLockedBy?this.isRequestLocked=!0:await this.updateRequestReserved()))},async checkTicketLock1(){const{error:e,payload:t}=await l["t"].getProcess(this.selectedProcess.id,this.selectedProcess.processId,this.selectedProcess.transactionId);e?this.$alert.error(e):(console.log(t),t&&(t.ticketLockedBy===this.$store.state.session.id?this.isRequestLocked=!1:t.ticketLockedBy&&"0"!==t.ticketLockedBy?this.isRequestLocked=!0:await this.updateRequestReserved()))},async updateRequestReserved(){let e={workflowId:this.selectedProcess.id,processId:this.selectedProcess.processId,activityId:this.selectedProcess.activityId,isLock:!0};const{error:t}=await l["t"].updateRequestReserved(e);t?this.$alert.error(t):this.selectedProcess.ticketLockedBy=this.$store.state.session.id},async showHistoryStepper(e,t){console.log("called");const{error:s,payload:i}=await l["t"].processHistory(t,e);s?this.$alert.error(s):i.length&&(this.stageLevel=[],this.currentStep=0,i.forEach(e=>{if(2!==e.actionStatus)if(0===this.stageLevel.filter(t=>t.id===e.activityId).length)this.stageLevel.push({id:e.activityId,label:e.stage,status:e.status}),((e.actionUser||e.subWorkflowHistory)&&e.status&&"Forward"!==e.status||null===e.actionUser&&!e.subWorkflowHistory)&&(this.currentStep+=1);else if(e.status)this.stageLevel.filter(t=>t.id===e.activityId&&t.status!==e.status).length?this.currentStep+=1:this.currentStep-=1;else{let t=this.stageLevel.findIndex(t=>t.id===e.activityId);t>-1&&(this.stageLevel.splice(t,this.stageLevel.length-t),this.stageLevel.push({id:e.activityId,label:e.stage,status:e.status}),e.actionUser&&e.status&&"Forward"!==e.status||null===e.actionUser?this.currentStep=t+1:this.currentStep=t)}}))},refreshCustomForm(){this.closeProcessSheet(),this.$emit("refresh",this.workflow.id)},attachmentCount(e){this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=e)})},commentsCount(e){this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=e)})}}},xe=Te,Fe=(s("5812"),s("ddad"),s("19b0"),s("0016")),Le=s("58ea"),Pe=s("8169"),$e=Object(S["a"])(xe,i,a,!1,null,"31bbbe4a",null);t["a"]=$e.exports;T()($e,"components",{QChip:$["a"],QAvatar:B["a"],QMenu:_["a"],QIcon:Fe["a"],QCircularProgress:Le["a"],QChatMessage:Pe["a"]})},8505:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("Modal",{attrs:{width:e.externalAccess?"100vw":"70vw","external-access":e.externalAccess},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v('"'+e._s(e.historyTitle)+'" Process History')]},proxy:!0},{key:"action",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Export",expression:"'Export'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-table-arrow-right"},on:{click:e.export_Data}})]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"processHistory"}},[t("div",{staticClass:"col-12 q-mb-md q-pt-sm"},[t("Stepper",{attrs:{"stage-level":e.stageLevel,"current-step":e.currentStep}})],1),t("table",{attrs:{id:"history"}},[t("thead",[t("tr",e._l(e.columns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0)]),t("tbody",[e._l(e.processHistoryData,(function(s){return[t("tr",{key:s.id},e._l(e.columns,(function(i){return t("td",{key:i.id,staticClass:"ellipsis"},[e._t(i.name,(function(){return["DATE"===i.type?[e._v(" "+e._s(e.$day.format(s[i.name])||"-")+" ")]:"stage"===i.name?[e._v(" "+e._s(s[i.name]||"-")+" "),s.subWorkflowHistory?[s.subWorkflowHistory.length?[t("span",{staticClass:"text-secondary"},[e._v(" [CONNECTOR] ")])]:e._e()]:e._e()]:[e._v(" "+e._s(s[i.name]||"-")+" ")]]}),{value:s[i.name],item:s})],2)})),0),s.comments.length?t("tr",{key:s.id,on:{click:function(e){s.showComments=!s.showComments}}},[t("td",{staticClass:"comments",attrs:{colspan:"6"}},[t("BaseIcon",{attrs:{name:s.showComments?"eva-arrow-downward-outline":"eva-arrow-forward-outline",color:"primary"}}),e._v(" Comments ("+e._s(s.comments.length)+") ")],1)]):e._e(),s.comments.length&&s.showComments?t("tr",{key:s.id},[t("td",{attrs:{colspan:"6"}},[t("table",{attrs:{id:"comments1"}},[t("thead",[t("tr",[t("th",{staticClass:"large"},[e._v("Comments")]),t("th",{staticClass:"medium"},[e._v("Commented By")]),t("th",{staticClass:"medium"},[e._v("Commented On")]),t("th",{staticClass:"medium"},[e._v("Attached In")])])]),t("tbody",[e._l(s.comments,(function(s,i){return[t("tr",{key:i},[t("td",{staticClass:"commentsText ellipsis"},[e._v(" "+e._s(e.removeTags(s.comments)||"-")+" ")]),t("td",{staticClass:"ellipsis"},[e._v(" "+e._s(s.createdByEmail||"-")+" ")]),t("td",{staticClass:"ellipsis"},[e._v(" "+e._s(e.$day.format(s.createdAt)||"-")+" ")]),t("td",[s.embedFileList&&s.embedFileList.length?[t("div",{staticClass:"file-icons",on:{click:function(t){return e.openFileByCmd(s.embedFileList[0])}}},[t("FileIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.embedFileList[0].fileName,expression:"\n                                    comment.embedFileList[0].fileName\n                                  ",modifiers:{top:!0}}],key:"Icon-"+i,staticClass:"file-icon q-mr-sm",attrs:{"mime-type":e.fileType(s.embedFileList[0].fileName)}}),t("a",{staticClass:"file-link",attrs:{href:"javascript:void(0)"},on:{click:function(e){e.preventDefault()}}},[e._v(e._s(s.embedFileList[0].fileName||"-"))])],1)]:[e._v(" "+e._s("-")+" ")]],2)])]}))],2)])])]):e._e(),s.attachments.length?t("tr",{key:s.id},[t("td",{staticClass:"attachments",attrs:{colspan:"6"},on:{click:function(e){s.showAttachments=!s.showAttachments}}},[t("BaseIcon",{attrs:{name:s.showAttachments?"eva-arrow-downward-outline":"eva-arrow-forward-outline",color:"primary"}}),e._v(" Attachments ("+e._s(s.attachments.length)+") ")],1)]):e._e(),s.attachments.length&&s.showAttachments?t("tr",{key:s.id},[t("td",{attrs:{colspan:"6"}},[t("table",{attrs:{id:"attachments"}},[t("thead",[t("tr",[t("th",[e._v("File Name")]),t("th",[e._v("Attached By")]),t("th",[e._v("Attached On")])])]),t("tbody",[e._l(s.attachments,(function(s,i){return[t("tr",{key:i},[t("td",[e._v(e._s(s.name||"-"))]),t("td",[e._v(e._s(s.createdByEmail||"-"))]),t("td",[e._v(" "+e._s(e.$day.format(s.createdAt)||"-")+" ")])])]}))],2)])])]):e._e(),s.subWorkflowHistory?[s.subWorkflowHistory.length?t("tr",{key:s.id},[t("td",{staticClass:"attachments",attrs:{colspan:"6"},on:{click:function(e){s.showSubWorkflowHistory=!s.showSubWorkflowHistory}}},[t("BaseIcon",{attrs:{name:s.showSubWorkflowHistory?"eva-arrow-downward-outline":"eva-arrow-forward-outline",color:"primary"}}),1===s.actionStatus?[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Completed",expression:"'Completed'",modifiers:{top:!0}}],staticClass:"q-ml-xs q-mr-xs",attrs:{name:"mdi-progress-check",color:"green"}})]:0===s.actionStatus?[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"In-progress",expression:"'In-progress'",modifiers:{top:!0}}],staticClass:"q-ml-xs q-mr-xs",attrs:{name:"mdi-progress-clock",color:"orange"}})]:e._e(),e._v(" "+e._s(s.subWorkflowHistory[0].requestNo)+" ")],2)]):e._e(),s.showSubWorkflowHistory?t("tr",{key:s.id},[t("td",{attrs:{colspan:"6"}},[t("table",{attrs:{id:"attachments"}},[t("thead",e._l(e.columns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0),t("tbody",[e._l(s.subWorkflowHistory,(function(s){return[t("tr",{key:s.id},e._l(e.columns,(function(i){return t("td",{key:i.id,staticClass:"ellipsis"},[e._t(i.name,(function(){return["DATE"===i.type?[e._v(" "+e._s(e.$day.format(s[i.name])||"-")+" ")]:[e._v(" "+e._s(s[i.name]||"-")+" ")]]}),{value:s[i.name],item:s})],2)})),0)]}))],2)])])]):e._e()]:e._e()]}))],2)])])]},proxy:!0}],null,!0),model:{value:e.processHistoryModal,callback:function(t){e.processHistoryModal=t},expression:"processHistoryModal"}}),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v(" Archived At: "+e._s(e.$day.format(e.selectedFiles[0].createdAt))+" ")]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFiles[0].createdByEmail))]),e.selectedFiles[0].size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFiles[0].size))+" ")],1):e._e()],1)])])]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myAttachmentFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])])],1)},a=[],o=(s("14d9"),s("1b0d")),r=s("6a70"),n=s("0006"),l=s("fa1f"),c=s("381e"),d=s("dd90"),m=s("a7d2"),h=s("42fc"),u={name:"ProcessHistory",components:{Modal:r["a"],Stepper:n["a"],Sheet:c["a"],FileIcon:l["a"]},props:{processId:{type:Number,required:!0},selectedProcess:{type:Object,default:()=>{}},externalAccess:{type:Boolean,default:!1}},data(){return{historyTitle:"",processHistoryData:[],processHistoryModal:!1,columns:[{id:this.$nano.id(),name:"stage",label:"STAGE",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"actionUser",label:"ACTION USER",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"receivedOn",label:"RECEIVED ON",type:"DATE"},{id:this.$nano.id(),name:"processedBy",label:"PROCESSED BY",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"processedOn",label:"PROCESSED ON",type:"DATE"},{id:this.$nano.id(),name:"status",label:"STATUS",type:"SHORT_TEXT"}],stageLevel:[],currentStep:0,selectedFile:{},fileSheet:!1,selectedFiles:[]}},watch:{processId:{immediate:!0,handler(){this.processId&&this.showHistory(this.processId)}}},methods:{async showHistory(e){this.processHistoryModal=!0,this.processHistoryData=[],this.historyTitle=this.selectedProcess.requestNo,this.$store.commit("showLoadingBarSave");const{error:t,payload:s}=await o["t"].processHistory(this.selectedProcess.id,e);this.$store.commit("hideLoadingBarSave"),t?this.$alert.error(t):s.length&&(s.forEach(e=>{this.processHistoryData.push({...e,showComments:!1,showAttachments:!1,showSubWorkflowHistory:!1})}),this.stageLevel=[],this.currentStep=0,s.forEach(e=>{if(2!==e.actionStatus)if(0===this.stageLevel.filter(t=>t.id===e.activityId).length)this.stageLevel.push({id:e.activityId,label:e.stage,status:e.status}),((e.actionUser||e.subWorkflowHistory)&&e.status&&"Forward"!==e.status||null===e.actionUser&&!e.subWorkflowHistory)&&(this.currentStep+=1);else if(e.status)this.stageLevel.filter(t=>t.id===e.activityId&&t.status!==e.status).length?this.currentStep+=1:this.currentStep-=1;else{let t=this.stageLevel.findIndex(t=>t.id===e.activityId);t>-1&&(this.stageLevel.splice(t,this.stageLevel.length-t),this.stageLevel.push({id:e.activityId,label:e.stage,status:e.status}),e.actionUser&&e.status&&"Forward"!==e.status||null===e.actionUser?this.currentStep=t+1:this.currentStep=t)}}))},openFileByCmd(e){const t=e,{fileName:s,itemid:i,...a}=t;this.selectedFile={name:s,id:i,...a};const o=this.processHistoryData.map(e=>e.attachments).flat();this.selectedFiles=o.filter(e=>e.id==this.selectedFile.id&&e.name==this.selectedFile.name),this.openFile(this.selectedFile)},fileSize(e){return Object(m["a"])(e)},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let s=1;return"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(s=2),Object(d["d"])(t)?"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`:"https://trial.ezofis.com"===e?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`:"https://app.ezofis.com"===e?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`:"http://52.172.32.88"===e?`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`:`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${s}`}return Object(d["d"])(t)?"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:"https://trial.ezofis.com"!==e||Object(d["c"])(t)?"https://app.ezofis.com"===e?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:Object(d["b"])(t)||"http://52.172.32.88"!==e?`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`:`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`}},openFile(e){if(e.loading)this.$alert.info("Please wait to complete the uploading");else{this.selectedFile=e;let t=location.origin;"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?window.open(this.fileLink()):this.fileSheet=!0}},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},closeModal(){this.processHistoryModal=!1,this.$emit("close")},removeTags(e){return e?e.replace(/(<([^>]+)>)/gi,""):""},export_Data1(){let e=[];this.processHistoryData.forEach(t=>{e.push({Stage:t.stage,"Action User":t.actionUser,"Received On":this.$day.format(t.receivedOn),"Processed On":this.$day.format(t.processedOn),"Processed By":t.processedBy,Status:t.status})}),Object(h["a"])(e,this.historyTitle+" - Process History")},export_Data(){let e=[];this.processHistoryData.forEach(t=>{if(e.push({Stage:t.stage,"Action User":t.actionUser||"","Received On":this.$day.format(t.receivedOn)||"","Processed On":this.$day.format(t.processedOn)||"","Processed By":t.processedBy||"",Status:t.status||""}),t.comments&&t.comments.length){let s;e.push({Stage:`<span style="color: #00BCD4;font-weight: bold;">Comments(${t.comments.length})</span>`}),e.push({Stage:"<strong>Comments<strong>","Action User":"<strong>Commented By<strong>","Received On":"<strong>Commented On<strong>","Processed On":"<strong>Attached In<strong>"}),t.comments.forEach(t=>{t.embedFileList&&t.embedFileList.length&&t.embedFileList.forEach(e=>{s=e.fileName}),e.push({Stage:`<span style="color: #00BCD4;">${t.comments||""}</span>`,"Action User":`<span style="color: #00BCD4;">${t.createdByEmail||""}</span>`,"Received On":`<span style="color: #00BCD4;">${this.$day.format(t.createdAt)||""}</span>`,"Processed On":`<span style="color: #00BCD4;">${s||""}</span>`})})}t.attachments&&t.attachments.length&&(e.push({Stage:`<span style="color: #643094;font-weight: bold;">Attachment(${t.attachments.length})</span>`}),e.push({Stage:"<strong>File Name<strong>","Action User":"<strong>\tAttached By<strong>","Received On":"<strong>Attached On<strong>"}),t.attachments.forEach(t=>{e.push({Stage:`<span style="color: #643094; border: 12px solid#50067e;">${t.name||""}</span>`,"Action User":`<span style="color: #643094;">${t.createdByEmail||""}</span>`,"Received On":`<span style="color: #643094;">${this.$day.format(t.createdAt)||""}</span>`})})),t.subWorkflowHistory&&t.subWorkflowHistory.length&&(e.push({Stage:`<span style="color: #e97f06;font-weight: bold;">${t.subWorkflowHistory[0].requestNo}[Connector]<span>`}),e.push({Stage:"<strong>Stage</strong>","Action User":"<strong>Action User</strong>","Received On":"<strong>Received On</strong>","Processed On":"<strong>Processed On</strong>","Processed By":"<strong>Processed By</strong>",Status:"<strong>status</strong>"}),t.subWorkflowHistory.forEach(t=>{e.push({Stage:`<span style="color: #e97f06;">${t.stage}</span>`,"Action User":`<span style="color: #e97f06;border:2px solid black">${t.actionUser||""}</span>`,"Received On":`<span style="color: #e97f06;">${this.$day.format(t.receivedOn)||""}</span>`,"Processed On":`<span style="color: #e97f06;">${this.$day.format(t.processedOn)||""}</span>`,"Processed By":`<span style="color: #e97f06;">${t.processedBy||""}</span>`,Status:`<span style="color: #e97f06;">${t.status||""}</span>`})}))}),Object(h["a"])(e,this.historyTitle+" Report")}}},p=u,f=(s("bf55"),s("2877")),v=s("4e73"),y=s("93dc"),b=s.n(y),w=Object(f["a"])(p,i,a,!1,null,"2443da3d",null);t["a"]=w.exports;b()(w,"components",{QMenu:v["a"]})},"85fc":function(e,t,s){"use strict";s("14d9");var i=s("b7fa"),a=s("d882"),o=s("f89c"),r=s("6642"),n=Object(r["b"])({xs:30,sm:35,md:40,lg:50,xl:60}),l={computed:{__refocusTargetEl(){if(!0!==this.disable)return this.$createElement("span",{ref:"refocusTarget",staticClass:"no-outline",attrs:{tabindex:-1}})}},methods:{__refocusTarget(e){void 0!==e&&0===e.type.indexOf("key")?document.activeElement!==this.$el&&!0===this.$el.contains(document.activeElement)&&this.$el.focus():void 0!==e&&!0!==this.$el.contains(e.target)||void 0===this.$refs.refocusTarget||this.$refs.refocusTarget.focus()}}},c=s("e277"),d=s("d54d");t["a"]={mixins:[i["a"],n,o["b"],l],props:{value:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>"tf"===e||"ft"===e},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},computed:{isTrue(){return!0===this.modelIsArray?this.index>-1:this.value===this.trueValue},isFalse(){return!0===this.modelIsArray?-1===this.index:this.value===this.falseValue},isIndeterminate(){return!1===this.isTrue&&!1===this.isFalse},index(){if(!0===this.modelIsArray)return this.value.indexOf(this.val)},modelIsArray(){return void 0!==this.val&&Array.isArray(this.value)},computedTabindex(){return!0===this.disable?-1:this.tabindex||0},classes(){return`q-${this.type} cursor-pointer no-outline row inline no-wrap items-center`+(!0===this.disable?" disabled":"")+(!0===this.isDark?` q-${this.type}--dark`:"")+(!0===this.dense?` q-${this.type}--dense`:"")+(!0===this.leftLabel?" reverse":"")},innerClass(){const e=!0===this.isTrue?"truthy":!0===this.isFalse?"falsy":"indet",t=void 0===this.color||!0!==this.keepColor&&("toggle"===this.type?!0!==this.isTrue:!0===this.isFalse)?"":" text-"+this.color;return`q-${this.type}__inner--${e}${t}`},formAttrs(){const e={type:"checkbox"};return void 0!==this.name&&Object.assign(e,{checked:this.isTrue,name:this.name,value:!0===this.modelIsArray?this.val:this.trueValue}),e},attrs(){const e={tabindex:this.computedTabindex,role:"toggle"===this.type?"switch":"checkbox","aria-label":this.label,"aria-checked":!0===this.isIndeterminate?"mixed":!0===this.isTrue?"true":"false"};return!0===this.disable&&(e["aria-disabled"]="true"),e}},methods:{toggle(e){void 0!==e&&(Object(a["l"])(e),this.__refocusTarget(e)),!0!==this.disable&&this.$emit("input",this.__getNextValue(),e)},__getNextValue(){if(!0===this.modelIsArray){if(!0===this.isTrue){const e=this.value.slice();return e.splice(this.index,1),e}return this.value.concat([this.val])}if(!0===this.isTrue){if("ft"!==this.toggleOrder||!1===this.toggleIndeterminate)return this.falseValue}else{if(!0!==this.isFalse)return"ft"!==this.toggleOrder?this.trueValue:this.falseValue;if("ft"===this.toggleOrder||!1===this.toggleIndeterminate)return this.trueValue}return this.indeterminateValue},__onKeydown(e){13!==e.keyCode&&32!==e.keyCode||Object(a["l"])(e)},__onKeyup(e){13!==e.keyCode&&32!==e.keyCode||this.toggle(e)}},render(e){const t=this.__getInner(e);!0!==this.disable&&this.__injectFormInput(t,"unshift",`q-${this.type}__native absolute q-ma-none q-pa-none`);const s=[e("div",{staticClass:`q-${this.type}__inner relative-position non-selectable`,class:this.innerClass,style:this.sizeStyle,attrs:{"aria-hidden":"true"}},t)];void 0!==this.__refocusTargetEl&&s.push(this.__refocusTargetEl);const i=void 0!==this.label?Object(c["a"])([this.label],this,"default"):Object(c["c"])(this,"default");return void 0!==i&&s.push(e("div",{staticClass:`q-${this.type}__label q-anchor--skip`},i)),e("div",{class:this.classes,attrs:this.attrs,on:Object(d["b"])(this,"inpExt",{click:this.toggle,keydown:this.__onKeydown,keyup:this.__onKeyup})},s)}}},"86cb":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper",attrs:{id:"workflowInbox"}},[t("div",{staticClass:"row q-col-gutter-sm"},[t("div",{staticClass:"col-2"},[t("WorkflowTree",{attrs:{"workflow-list":e.workflowList,"my-inbox-count":e.myInboxCount,refresh:e.refreshTree,"load-initial":e.loadInitial},on:{"update:loadInitial":function(t){e.loadInitial=t},"update:load-initial":function(t){e.loadInitial=t},selectedNode:e.getSelectedNode}})],1),t("div",{class:"GRID"===e.activeView?"col-4":"col"},[t("InboxList",{attrs:{"selected-node":e.selectedNode,"my-inbox":e.myInboxShow,"workflow-list":e.workflowList,workflow:e.selectedWorkflow,"workflow-request-list":e.workflowRequestList,"group-key":e.groupKey,wform:e.form,repository:e.repository,"process-actions":e.processActions,"process-actions-add-on":e.processActionsAddOn,"selected-process":e.selectedProcess,"full-view":e.fullView,"active-view":e.activeView,"internal-forward":e.internalForward,"user-list":e.internalForward.users.length?e.internalForward.users:e.userList,"group-list":e.internalForward.groups.length?e.internalForward.groups:e.groupList,"current-page":e.currentPage,"items-per-page":e.itemsPerPage,"total-items":e.totalItems,"master-form-id":e.masterFormId,"data-imported":e.dataImported,"user-signature":e.userSignature,"task-form-id":e.taskFormId,"task-entry-id":e.taskEntryId,"task-entries":e.taskEntries,"check-list":e.checkList,"custom-reply":e.customReply,"user-reply":e.userReply,"to-requester":e.toRequester,"data-validation-values":e.dataValidationValues,"custom-close-process-sheet":e.customCloseProcessSheet,"selected-completed-node":e.selectedCompletedNode,"hide-columns":e.hideColumns,"add-task-enabled":e.addTaskEnabled,"loading-bar-inbox":e.loadingBarInbox,"portal-action":e.portalAction,"listed-data":e.listedData,dashboard:e.dashboard},on:{"update:workflow":function(t){e.selectedWorkflow=t},"update:workflowRequestList":function(t){e.workflowRequestList=t},"update:workflow-request-list":function(t){e.workflowRequestList=t},"update:selectedProcess":function(t){e.selectedProcess=t},"update:selected-process":function(t){e.selectedProcess=t},"update:fullView":function(t){e.fullView=t},"update:full-view":function(t){e.fullView=t},"update:activeView":function(t){e.activeView=t},"update:active-view":function(t){e.activeView=t},"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:itemsPerPage":function(t){e.itemsPerPage=t},"update:items-per-page":function(t){e.itemsPerPage=t},"update:totalItems":function(t){e.totalItems=t},"update:total-items":function(t){e.totalItems=t},"update:masterFormId":function(t){e.masterFormId=t},"update:master-form-id":function(t){e.masterFormId=t},"update:taskEntries":function(t){e.taskEntries=t},"update:task-entries":function(t){e.taskEntries=t},"update:checkList":function(t){e.checkList=t},"update:check-list":function(t){e.checkList=t},"update:customReply":function(t){e.customReply=t},"update:custom-reply":function(t){e.customReply=t},"update:userReply":function(t){e.userReply=t},"update:user-reply":function(t){e.userReply=t},"update:toRequester":function(t){e.toRequester=t},"update:to-requester":function(t){e.toRequester=t},"update:dataValidationValues":function(t){e.dataValidationValues=t},"update:data-validation-values":function(t){e.dataValidationValues=t},"update:hideColumns":function(t){e.hideColumns=t},"update:hide-columns":function(t){e.hideColumns=t},show:e.showRequestPreview,refresh:e.refresh,history:e.showHistory,subHistory:e.showSubHistory,filter:e.updateFilter,sortBy:e.updateSortBy,upload:function(t){return e.$refs.input.click()},close:function(t){e.dataImported=!1},addTask:e.addTask,viewTask:e.viewTask,validation:e.dataValidation,paymentTable:e.showPaymentTable,release:e.releaseReservedRequest,showFormEntryHistory:function(t){e.showFormEntryHistoryModal=!0},issavesheet:e.save,isDelete:e.deleteItem}}),t("input",{ref:"input",staticClass:"hidden",attrs:{type:"file",accept:".csv,.xls,.xlsx"},on:{change:e.uploadFile}})],1),"GRID"===e.activeView?t("div",{staticClass:"col"},[t("div",{staticClass:"card q-pa-xs"},[e.selectedRequestCount?t("FormsCard",{attrs:{workflow:e.selectedWorkflow,form:e.form,"selected-process":e.selectedProcess,"process-actions":e.processActions,"task-entries":e.taskEntries,"check-list":e.checkList,"jira-accounts":e.jiraAccounts,"selected-node":e.selectedNode,"hide-columns":e.hideColumns,"portal-action":e.portalAction},on:{"update:checkList":function(t){e.checkList=t},"update:check-list":function(t){e.checkList=t},"update:hideColumns":function(t){e.hideColumns=t},"update:hide-columns":function(t){e.hideColumns=t},proceed:e.requestAction,expand:function(t){e.fullView=!0},history:e.showHistory,addTask:e.addTask,viewTask:e.viewTask,validation:e.dataValidation,paymentTable:e.showPaymentTable}}):e._e()],1)]):e._e()]),t("Modal",{attrs:{width:"40vw",height:"50vh","has-footer":""},on:{input:function(t){e.saveAction="",e.processForwardModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v('"'+e._s(e.selectedProcess.requestNo)+'" '),e.isTenantGOTO()||e.isTenantArmgroup()?[e._v(" Process Assign ")]:[e._v(" Process Forward ")]]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"processForward"}},[e.internalForward.proceed?t("MultiSelectField",{staticClass:"field",attrs:{label:"users","is-mandatory":"",options:e.internalForward.users.length?e.internalForward.users:e.userList},model:{value:e.forwardUsers,callback:function(t){e.forwardUsers=t},expression:"forwardUsers"}}):e._e(),e.internalForward.groups.length?t("MultiSelectField",{staticClass:"field",attrs:{label:"group",options:e.internalForward.groups.length?e.internalForward.groups:e.groupList},model:{value:e.forwardGroups,callback:function(t){e.forwardGroups=t},expression:"forwardGroups"}}):e._e()],1)]},proxy:!0},{key:"footer",fn:function(){return[e.isTenantGOTO()||e.isTenantArmgroup()?[t("BaseButton",{attrs:{label:"Assign",color:"orange"},on:{click:function(t){e.processForwardModal=!1,e.requestAction("Assign",!1,!1)}}})]:[t("BaseButton",{attrs:{label:"Forward",color:"orange"},on:{click:function(t){e.processForwardModal=!1,e.requestAction("Forward",!1,!1)}}})]]},proxy:!0}]),model:{value:e.processForwardModal,callback:function(t){e.processForwardModal=t},expression:"processForwardModal"}}),t("Modal",{attrs:{width:"70vw"},on:{input:function(t){e.dataValidationModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Data Verification")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"dataValidation"}},[t("table",[t("thead",[t("tr",e._l(e.dataValidationColumns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0)]),t("tbody",e._l(e.dataValidationValues,(function(s){return t("tr",{key:s.id},e._l(e.dataValidationColumns,(function(i){return t("td",{key:i.id},[e._t(i.name,(function(){return["STATUS"===i.type?["Matched"===s[i.name]?[t("span",{staticClass:"text-green"},[e._v(" "+e._s(s[i.name]))])]:"Verified"===s[i.name]?[t("span",{staticClass:"text-primary"},[e._v(" "+e._s(s[i.name]))])]:"Not Matched"===s[i.name]?[t("span",{staticClass:"text-red"},[e._v(" "+e._s(s[i.name]))])]:[t("span",{staticClass:"text-orange"},[e._v(" "+e._s(s[i.name]||"-"))])]]:"ocrValue"===i.name?[e.isJsonString(s[i.name])?e._l(JSON.parse(s[i.name]),(function(s,i){return t("div",{key:i,staticClass:"row items-center"},[e._v(" "+e._s(s.name)+" : "+e._s(s.value||"-")+" ")])})):[e._v(" "+e._s(s[i.name]||"-")+" ")]]:[e._v(" "+e._s(s[i.name]||"-")+" ")]]}),{value:s[i.name],item:s})],2)})),0)})),0)])])]},proxy:!0}],null,!0),model:{value:e.dataValidationModal,callback:function(t){e.dataValidationModal=t},expression:"dataValidationModal"}}),t("Modal",{attrs:{width:"70vw","has-footer":"inbox"===e.selectedNode||"payment"===e.selectedNode},on:{input:function(t){e.paymentTableModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Payment Table")]},proxy:!0},{key:"action",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Export",expression:"'Export'",modifiers:{top:!0}}],attrs:{icon:"mdi-table-arrow-right",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:e.export_Data}})]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"paymentTable"}},["inbox"!==e.selectedNode||"psyCrYXtKfcs-EJmrYIhv"!==e.selectedProcess.activityId&&e.isPaymentFound?e._e():[t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-3"},[t("ValidationProvider",{staticClass:"col",attrs:{name:"Total Payment",rules:{required:!0,min_value:1}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("NumberField",{staticClass:"q-pa-sm",attrs:{label:"Total Payment","is-mandatory":"",error:s[0]},model:{value:e.totalPayment,callback:function(t){e.totalPayment=t},expression:"totalPayment"}})]}}],null,!1,2992247998)})],1),t("div",{staticClass:"col-3"},[t("ValidationProvider",{staticClass:"col",attrs:{name:"Lumpsum Amount",rules:{required:!0,min_value:1,max_value:2e3}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("NumberField",{staticClass:"q-pa-sm",attrs:{label:"Lumpsum Amount","is-mandatory":"",max:2e3,error:s[0]},model:{value:e.lumpsumAmount,callback:function(t){e.lumpsumAmount=t},expression:"lumpsumAmount"}})]}}],null,!1,3540089406)})],1),t("div",{staticClass:"col-3"},[t("ValidationProvider",{staticClass:"col",attrs:{name:"Benefit Type",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{staticClass:"q-pa-sm",attrs:{label:"Benefit Type","is-mandatory":"",options:e.benefitTypes,error:s[0]},model:{value:e.benefitType,callback:function(t){e.benefitType=t},expression:"benefitType"}})]}}],null,!1,216517839)})],1),t("div",{staticClass:"col-3"},[t("BaseButton",{staticClass:"calculateBtn col-auto q-ml-md",attrs:{label:"Calculate"},on:{click:e.paymentCalculation}})],1)])]),t("div",{staticClass:"row col",staticStyle:{display:"flex","justify-content":"flex-end"}},[t("FormFieldLabel",{staticClass:"q-mr-sm q-mt-xs",attrs:{label:"Number of payments to approve"}}),t("NumberField",{staticClass:"q-pa-sm",attrs:{min:0,max:e.paymentTableValues.length,"is-clearable":!1,"is-readonly":!e.paymentTableValues.length},model:{value:e.numberOfApprovePayment,callback:function(t){e.numberOfApprovePayment=t},expression:"numberOfApprovePayment"}}),t("BaseButton",{staticClass:"q-ml-sm",staticStyle:{"margin-top":"12px"},attrs:{label:"Payment Approve",color:"secondary",disabled:!e.paymentTableValues.length},on:{click:e.paymentApprove}}),t("BaseButton",{staticClass:"q-ml-sm",staticStyle:{"margin-top":"12px"},attrs:{label:"Clear",color:"red",disabled:!e.paymentTableValues.length},on:{click:e.clearPaymentApprove}})],1)],t("div",{staticClass:"col q-pa-sm"},[t("BaseScrollbar",{attrs:{height:"inbox"!==e.selectedNode||"psyCrYXtKfcs-EJmrYIhv"!==e.selectedProcess.activityId&&e.isPaymentFound?"":"calc(100vh - 510px)"}},[t("table",{staticClass:"q-mt-sm"},[t("thead",[t("tr",[e._l(e.paymentTableColumns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),"90xxPehjko0dNYRjbX5wm"===e.selectedProcess.activityId&&e.isPaymentFound?t("th",{staticClass:"actions"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"add row",expression:"'add row'",arg:"top"}],attrs:{color:"primary",icon:"eva-plus","no-border":""},on:{click:e.addPaymentRow}})],1):e._e()],2)]),t("tbody",e._l(e.paymentTableValues,(function(s,i){return t("tr",{key:"paymentrow"+i},[e._l(e.paymentTableColumns,(function(a){return t("td",{key:a.id},["90xxPehjko0dNYRjbX5wm"===e.selectedProcess.activityId&&e.isPaymentFound&&!s["delete"]?["approval"===a.name?["Approved"===s[a.name]?[t("span",{staticClass:"text-green",attrs:{name:a.name,value:s[a.name],item:s}},[e._v(" "+e._s(s[a.name])+" ")])]:[t("span",{staticClass:"text-red",attrs:{name:a.name,value:s[a.name],item:s}},[e._v(" "+e._s(s[a.name])+" ")])]]:"paymentDate"===a.name?[t("DateField",{model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:[e._t(a.name,(function(){return[e._v(" "+e._s(s[a.name])+" ")]}),{value:s[a.name],item:s})]]:["SINGLE_SELECT"===a.type?[t("SelectField",{attrs:{options:e.approvalTypes},on:{input:function(t){return e.updateApprovalDate(i)}},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"DATE"===a.type?[t("DateField",{model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"baseAmount"===a.name&&s["delete"]?[t("NumberField",{attrs:{placeholder:"0.00"},on:{input:function(t){return e.calcOtherColumns(i)}},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:[e._t(a.name,(function(){return[e._v(" "+e._s(s[a.name])+" ")]}),{value:s[a.name],item:s})]]],2)})),"90xxPehjko0dNYRjbX5wm"===e.selectedProcess.activityId&&e.isPaymentFound?t("td",{staticClass:"actions"},[s["delete"]?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"delete row",expression:"'delete row'"}],attrs:{"is-flat":"",color:"red",icon:"eva-trash-outline","no-border":""},on:{click:function(t){return e.removePaymentRow(i)}}}):e._e()],1):e._e()],2)})),0)])])],1)],2)]},proxy:!0},"inbox"===e.selectedNode||"payment"===e.selectedNode?{key:"footer",fn:function(){return["psyCrYXtKfcs-EJmrYIhv"===e.selectedProcess.activityId?[t("BaseButton",{staticClass:"q-mr-sm",attrs:{label:"Recommend to Approve",color:"green"},on:{click:function(t){e.paymentTableModal=!1,e.customCloseProcessSheet=!e.customCloseProcessSheet,e.updatePaymentTable("Recommend to Approve")}}}),t("BaseButton",{attrs:{label:"Recommend to Reject",color:"red"},on:{click:function(t){e.paymentTableModal=!1,e.customCloseProcessSheet=!e.customCloseProcessSheet,e.updatePaymentTable("Recommend to Reject")}}})]:[t("BaseButton",{attrs:{label:"Update Payments",color:"primary"},on:{click:function(t){e.paymentTableModal=!1,e.updatePaymentTable()}}})]]},proxy:!0}:null],null,!0),model:{value:e.paymentTableModal,callback:function(t){e.paymentTableModal=t},expression:"paymentTableModal"}}),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[e.checkTenant()?t("SingleChoiceField",{staticClass:"actions q-mr-sm noborder",attrs:{options:e.commentActions,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e(),t("BaseButton",{attrs:{label:"Post Comments",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}}),t("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"red"},on:{input:function(t){e.actionPasswordConfirm=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Action Password")]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"passwordForm"},[t("ValidationProvider",{attrs:{name:"password",rules:{required:!0,password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("PasswordField",{staticClass:"q-my-lg",attrs:{"is-mandatory":"","is-readonly":e.isLoading,error:s[0],"auto-focus":!0},on:{enter:e.validatePassword},model:{value:e.actionUserPassword,callback:function(t){e.actionUserPassword=t},expression:"actionUserPassword"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"validate","is-loading":e.isLoading},on:{click:e.validatePassword}})]},proxy:!0}]),model:{value:e.actionPasswordConfirm,callback:function(t){e.actionPasswordConfirm=t},expression:"actionPasswordConfirm"}}),t("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"red"},on:{input:function(t){e.actionConfirmAlert=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Confirmation")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(' Are you sure you want to confirm the action as " '),t("b",[e._v(e._s(e.actionText))]),e._v('"? ')])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"primary"},on:{click:function(t){e.saveAction="",e.workflowFormModel={},e.actionConfirmAlert=!1}}}),t("BaseButton",{attrs:{label:"yes",color:"primary"},on:{click:function(t){e.actionConfirmAlert=!1,e.requestAction(e.actionText,!1,!1)}}})]},proxy:!0}]),model:{value:e.actionConfirmAlert,callback:function(t){e.actionConfirmAlert=t},expression:"actionConfirmAlert"}}),e.taskFormId?t("AddTask",{attrs:{value:e.addTaskSheet,"form-settings":e.addTaskForm.settings,panels:e.addTaskForm.panels,"secondary-panels":e.addTaskForm.secondaryPanels,"form-id":e.taskFormId,"repository-id":e.taskRepositoryId,"task-model":e.selectedTask,"workflow-task":!0,mode:e.taskMode},on:{close:function(t){e.addTaskSheet=!1},addEntry:e.addTaskEntry}}):e._e(),e.historyProcessId?t("ProcessHistory",{attrs:{"process-id":e.historyProcessId,"selected-process":e.selectedProcess},on:{close:function(t){e.historyProcessId=0}}}):e._e(),t("Confirm",{attrs:{icon:"eva-info-outline","icon-color":"secondary","has-footer":!1},on:{input:function(t){e.requestLockedModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Progress: Action unavailable")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" The request "+e._s(e.selectedProcess.requestNo)+' is currently being processed by "'),t("b",[e._v(e._s(e.selectedProcess.ticketLockedByName))]),e._v('", preventing any further actions on it. ')])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"primary"},on:{click:function(t){e.requestLockedModal=!1}}}),t("BaseButton",{attrs:{label:"View",color:"primary"},on:{click:e.updateRequestReserved}})]},proxy:!0}]),model:{value:e.requestLockedModal,callback:function(t){e.requestLockedModal=t},expression:"requestLockedModal"}}),t("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"orange"},on:{input:function(t){e.requestForLockModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Reserved for your action")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(' Would you like to approve the request "'),t("b",[e._v(e._s(e.selectedProcess.requestNo))]),e._v(", it will be assigned to you, others cannot do any action on this request, once you select proceed. ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"primary"},on:{click:function(t){e.requestForLockModal=!1}}}),t("BaseButton",{attrs:{label:"proceed",color:"primary"},on:{click:e.updateRequestReserved}})]},proxy:!0}]),model:{value:e.requestForLockModal,callback:function(t){e.requestForLockModal=t},expression:"requestForLockModal"}}),e.showFormEntryHistoryModal?t("FormEntryHistory",{attrs:{value:e.showFormEntryHistoryModal,"workflow-id":e.selectedWorkflow.id,"process-id":e.selectedProcess.processId},on:{"update:value":function(t){e.showFormEntryHistoryModal=t}}}):e._e(),t("UnpinDashboard",{attrs:{"delete-data":e.deleteData,label:e.selectedWorkflow.name+" "+e.selectedNode},on:{delete:function(t){e.dashboard=!1,e.getFilterList()}},model:{value:e.isDeleteConfirmationVisible,callback:function(t){e.isDeleteConfirmationVisible=t},expression:"isDeleteConfirmationVisible"}})],1)},a=[],o=(s("14d9"),s("7bb1")),r=s("15ce"),n=s("84ee"),l=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"workflowRequestPreview"}},[e.selectedProcess.processId?[t("div",{staticClass:"list q-mb-sm"},[t("div",{staticClass:"row q-pa-xs"},[t("div",{staticClass:"col-auto q-mt-xs"},[t("div",{staticClass:"row"},[e._l(e.tabs,(function(s){return["VALIDATION"!==s.value&&"PAYMENT_TABLE"!==s.value||("VALIDATION"===s.value||"PAYMENT_TABLE"===s.value)&&e.isCustomizedWorkflow?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.label,expression:"tab.label",modifiers:{top:!0}}],key:s.id,staticClass:"q-mr-sm linkActions",attrs:{"is-flat":"",icon:s.icon,size:"16px",color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e(),"TOGGLE"===s.value?t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("div",{staticClass:"title-3 border q-pa-xs"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchColumns,expression:"searchColumns"}],ref:"searchQuery",refInFor:!0,staticClass:"q-pa-md",attrs:{type:"text",placeholder:"Search"},domProps:{value:e.searchColumns},on:{keyup:function(t){return e.searchColumnList(e.searchColumns)},input:function(t){t.target.composing||(e.searchColumns=t.target.value)}}})]),t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight,width:"240px"}},e._l(e.columns,(function(s){return t("ListItem",{key:s.id,class:s.display,attrs:{icon:s.isVisible?"mdi-checkbox-marked":"mdi-checkbox-blank-outline","is-selected":s.isVisible,label:s.label},on:{click:function(t){return e.updateHideColumns(s)}}})})),1)],1):e._e()],1):e._e()]}))],2)]),t("div",{staticClass:"col"},[t("div",{staticClass:"row items-center justify-end"},[e.isPreviewAction?[e.processActions.length&&1===e.$store.state.session.tenantId?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Recommendation",expression:"'Recommendation'",modifiers:{bottom:!0}}],staticClass:"q-ml-xs btnColor",attrs:{icon:"mdi-creation",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){e.summarizeModal=!0}}}):e._e(),e._l(e.processActions,(function(s){return t("div",{key:s,on:{click:function(t){return e.requestAction(s)}}},["Reject"===s||"Terminate"===s||"Force Close"===s?t("q-chip",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s,expression:"action",modifiers:{top:!0}}],staticClass:"cursor-pointer chips red-hover icon-only",attrs:{outline:"",color:"red"}},[t("q-avatar",{staticClass:"rotate-90 q-mr-sm",attrs:{icon:"mdi-close",color:"red","text-color":"white"}})],1):"Approve"===s||"Complete"===s||"Rightsize"===s?t("q-chip",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s,expression:"action",modifiers:{top:!0}}],staticClass:"cursor-pointer chips green-hover icon-only",attrs:{outline:"",color:"green"}},[t("q-avatar",{attrs:{icon:"mdi-check",color:"green","text-color":"white"}})],1):"Forward"===s||"Assign"===s?t("q-chip",{staticClass:"cursor-pointer chips orange-hover",attrs:{outline:"",color:"orange"}},[t("q-avatar",{attrs:{icon:"mdi-arrow-right",color:"orange","text-color":"white"}}),e._v(" "+e._s(s)+" ")],1):s.indexOf("Reply")>-1||"Rollback"===s?t("q-chip",{staticClass:"cursor-pointer chips orange-hover",attrs:{outline:"",color:"orange"}},[t("q-avatar",{attrs:{icon:"mdi-arrow-left",color:"orange","text-color":"white"}}),e._v(" "+e._s(s)+" ")],1):"To Requester"===s?t("q-chip",{staticClass:"cursor-pointer chips pink-hover",attrs:{outline:"",color:"pink"}},[t("q-avatar",{attrs:{icon:"mdi-arrow-left",color:"pink","text-color":"white"}}),e._v(" "+e._s(s)+" ")],1):t("q-chip",{staticClass:"cursor-pointer chips primary-hover",attrs:{outline:"",color:"primary"}},[t("q-avatar",{attrs:{icon:"mdi-arrow-right-thick",color:"primary","text-color":"white"}}),e._v(" "+e._s(s)+" ")],1)],1)})),t("BaseActionButton",{staticClass:"q-ml-xs btnColor",attrs:{icon:"eva-external-link-outline",color:"primary","no-border":"","is-flat":"",size:"16px"},on:{click:function(t){return e.$emit("expand")}}})]:[t("div",{on:{click:function(t){return e.$emit("expand")}}},[t("q-chip",{staticClass:"cursor-pointer chips secondary-hover",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{attrs:{icon:"eva-external-link-outline",color:"secondary","text-color":"white"}}),e._v(" Expand ")],1)],1)]],2)])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("BaseScrollbar",{staticClass:"fullBorder",attrs:{height:"calc(100vh - 270px)"}},[t("div",{staticClass:"row justify-center"},[t("div",{staticClass:"col list q-pa-sm"},[t("div",{staticClass:"row items-center"},[e._e(),t("div",{staticClass:"col-12 q-mb-sm q-pa-sm requestDetails",class:e.checkStatusColor},[t("div",{staticClass:"row items-center justify-between"},[t("div",{staticClass:"col-auto title-2 row items-center"},[t("BaseIcon",{staticClass:"q-mr-xs",attrs:{name:e.checkStatusIcon,color:e.checkStatusColor,size:"22px"}}),e._v(" "+e._s(e.selectedProcess.requestNo)+" ")],1),e.showAnswerIndicator?t("div",{staticClass:"col-auto answer-count"},[t("div",{staticClass:"row items-center justify-center q-ml-sm q-mr-sm"},[t("BaseIcon",{staticClass:"q-mr-xs",attrs:{name:e.answerIndicatorList.filledValue?"eva-checkmark-circle-2-outline":"eva-alert-circle-outline",color:e.answerIndicatorList.filledValue?"positive":"warning",size:"16px"}}),t("span",{staticClass:"label"},[e._v(" "+e._s(e.answerIndicatorList.filledValue)+" of "+e._s(e.answerIndicatorList.filledValue+e.answerIndicatorList.nonFilledValue)+" inputs completed ")])],1)]):e._e(),t("div",{staticClass:"col-auto label"},[t("div",{staticClass:"justify-end"},[t("div",{},[e._v(" Requester: "+e._s(e.selectedProcess.raisedBy)+" ")]),t("div",{},[e._v(" Request On: "+e._s(e.$day.format(e.selectedProcess.raisedAt))+" ")])])])])]),t("div",{staticClass:"col-12 q-mb-sm q-pt-md stepper"},[t("Stepper",{attrs:{"stage-level":e.stageLevel,"current-step":e.currentStep}})],1),e.selectedProcess.jiraIssueInfo.id?t("table",{staticClass:"q-mb-sm jiraDetails"},[t("tbody",[t("tr",[t("th",[e._v("Project Key")]),t("th",[e._v("REF# ID")]),t("th",[e._v("Status")]),t("th",[e._v("Assignee")])]),t("tr",[t("td",[t("span",{staticClass:"cursor-pointer text-underline",on:{click:function(t){return e.getJIRALink(e.selectedProcess.jiraIssueInfo)}}},[e._v(" "+e._s(e.selectedProcess.jiraIssueInfo.key)+" ")])]),t("td",[e._v(" "+e._s(e.selectedProcess.jiraIssueInfo.id)+" ")]),t("td",[e._v(" "+e._s(e.selectedProcess.jiraIssueInfo.issueStatus)+" ")]),t("td",[e._v(" "+e._s(e.selectedProcess.jiraIssueInfo.assignee)+" ")])])])]):e._e(),e.selectedProcess.formData&&Object.keys(e.form.formJson).length?[t("table",{staticClass:"mainData"},[e._l(e.columns,(function(s){return[e.selectedProcess.formData.fields[s.id]&&"[]"!=e.selectedProcess.formData.fields[s.id]?[e.isVisible(s.id)?[e.validateType(s.id)?[t("tr",{key:s.id},[t("td",{staticClass:"tblHeader ellipsis small"},[e._v(" "+e._s(s.label)+" ")]),t("td",{staticClass:"ellipsis"},[e.validateValue(e.selectedProcess.formData.fields[s.id])?[e.validateDateType(s.id)?[e._v(" "+e._s(e.$day.format(e.selectedProcess.formData.fields[s.id],!1))+" ")]:e.validateFileUpload(s.id)?[JSON.parse(e.selectedProcess.formData.fields[s.id]).length?t("div",e._l(JSON.parse(e.selectedProcess.formData.fields[s.id]),(function(s){return t("div",{key:s.fileName,staticClass:"q-mb-xs"},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"col row items-center",on:{click:function(t){return e.openFileInFileControl(s)}}},[t("span",{staticClass:"q-mr-sm fileIcon"},[t("FileIcon",{staticClass:"mini-avatar",attrs:{"mime-type":e.fileType(s.fileName)}})],1),t("span",{staticClass:"cursor-pointer text-underline text-secondary"},[e._v(e._s(s.fileName))])])])])})),0):e._e()]:[e._v(" "+e._s(e.removeTags(e.selectedProcess.formData.fields[s.id])||"-")+" ")]]:[t("a",{attrs:{href:e.selectedProcess.formData.fields[s.id],target:"_blank"}},[e._v(" "+e._s(e.selectedProcess.formData.fields[s.id]||"-")+" ")])]],2)])]:[e.tableValue(e.selectedProcess.formData.fields[s.id]).length?[s.label?t("tr",{key:"trhead"+s.id},[t("td",{attrs:{colspan:"2"}},[e._v(e._s(s.label))])]):e._e(),t("tr",{key:"tr"+s.id},[t("td",{attrs:{colspan:"2"}},[t("BaseScrollbar",[t("table",{key:s.id},[t("thead",[t("tr",e._l(e.tableValue(e.selectedProcess.formData.fields[s.id])[0],(function(s,i){return t("th",{key:i},[e._v(" "+e._s(e.getLabel(i,"table"))+" ")])})),0)]),t("tbody",e._l(e.tableValue(e.selectedProcess.formData.fields[s.id]),(function(s,i){return t("tr",{key:i},e._l(s,(function(s,i){return t("td",{key:i},[e._v(" "+e._s(s)+" ")])})),0)})),0)])])],1)])]:e._e()]]:e._e()]:e._e()]}))],2)]:e._e(),e.selectedProcess.itemData?[t("table",{staticClass:"mainData"},[e._l(e.selectedProcess.itemData.items,(function(s,i){return[e.isVisible(i)?[t("tr",{key:i},[t("td",{staticClass:"tblHeader ellipsis"},[e._v(e._s(i))]),t("td",{staticClass:"ellipsis"},[e.validateValue(s)?[e._v(" "+e._s(e.removeTags(s)||"-")+" ")]:[t("a",{attrs:{href:s,target:"_blank"}},[e._v(" "+e._s(s||"-")+" ")])]],2)])]:e._e()]}))],2)]:e._e()],2)])]),e.signList.length?t("div",{attrs:{id:"approvalSignature"}},[t("div",{staticClass:"header q-mb-sm"},[e._v("Approval Signature")]),t("div",{staticClass:"row fullBorder"},[e._l(e.signList,(function(s){return[t("div",{key:s.id,staticClass:"col-4 q-mb-sm"},[t("img",{staticClass:"imgCenter col",attrs:{src:e.signLink(s.id)}}),t("div",{staticClass:"text row"},[t("span",{staticClass:"col-12 text-bold"},[e._v(e._s(s.stage))]),t("span",{staticClass:"col-12"},[e._v(e._s(s.createdByEmail))]),t("span",{staticClass:"col-12"},[e._v(e._s(e.$day.format(s.createdAt)))])])])]}))],2)]):e._e()])],1)])])]:e._e(),t("Sheet",{attrs:{width:"30vw","sub-actions":!(!e.selectedProcess.processId||!e.attachmentList.length),upload:"inbox"===e.selectedNode||"payment"===e.selectedNode,"no-padding":""},on:{input:e.closeAttachmentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 15 seconds ")]):e._e(),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getAttachments()}}})]},proxy:!0},"inbox"===e.selectedNode||"payment"===e.selectedNode?{key:"upload",fn:function(){return[t("div",{staticClass:"hint",on:{click:function(t){e.rowIndex=null,e.$refs.attachments.click()}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),t("div",{staticClass:"title text-blue"},[e._v("UPLOAD FILES")]),t("div",{staticClass:"description"},[e._v("Click here to choose files and upload")])],1)]},proxy:!0}:null,e.selectedProcess.processId&&e.attachmentList.length?{key:"subActions",fn:function(){return[t("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:e.fileSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}}),e._v(" Select All "),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!e.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentShare}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"merge documents (only PDF)",expression:"'merge documents (only PDF)'",modifiers:{top:!0}}],attrs:{"is-disabled":!(e.selectedFileCount>1&&e.isSelectedPDF),icon:"mdi-file-document-multiple-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentMerge}})]},proxy:!0}:null],null,!0),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"inbox"===e.selectedNode||"payment"===e.selectedNode?"calc(100vh - 200px)":""}},[t("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:e.uploadWflowAttachments}}),e._l(e.checkList,(function(s){return[s.name?[s.attach?t("div",{key:s.uid},[e._l(e.attachmentFilterCheckList(s.name),(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})],1):e._e(),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),"inbox"!==e.selectedNode&&"payment"!==e.selectedNode||s.createdBy!==e.$store.state.session.id?e._e():[t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s.id)}}})],1),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Re-Upload",expression:"'Re-Upload'",modifiers:{top:!0}}],attrs:{icon:"mdi-file-upload",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){t.stopPropagation(),e.reuploadId=s.id,e.reupload(s.name)}}})],1)]],2)])]}))],2):t("div",{key:s.uid,staticClass:"checkList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),t("div",{staticClass:"col q-ml-sm"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[e._v(" "+e._s(s.name)+" ")]),s.required?t("div",{staticClass:"col-12 q-mt-sm"},[t("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[e._v(" Required ")])],1):e._e()])]),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"col-12",on:{click:function(t){return e.attachTemplate(s.uid)}}},[t("q-chip",{staticClass:"chips primary-hover medium",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-upload-outline",color:"primary","text-color":"white"}}),e._v(" Upload ")],1)],1),s.template?t("div",{staticClass:"col-12",on:{click:function(t){return e.download(s.id)}}},[t("q-chip",{staticClass:"chips secondary-hover medium",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-download-outline",color:"secondary","text-color":"white"}}),e._v(" Download ")],1)],1):e._e()])])])]:e._e()]})),e._l(e.attachmentList,(function(s){return[e.isCheckList(s.name)?[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})],1),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),"inbox"!==e.selectedNode&&"payment"!==e.selectedNode||s.createdBy!==e.$store.state.session.id?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s.id)}}})],1)])])]:e._e()]}))],2)],1)]),t("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"inbox"===e.selectedNode||"payment"===e.selectedNode?"30":"0","no-padding":""},on:{input:e.closeCommentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 30 seconds ")]):e._e(),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getComments()}}})]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:e.commentsSheetHeight}},[e._l(e.commentsList,(function(s,i){return[t("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===e.$store.state.session.id?"me":s.createdByEmail||s.externalCommentsby,text:[s.comments],"text-html":"",sent:s.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(s),"bg-color":s.createdBy===e.$store.state.session.id?"primary-1":"secondary-1"},scopedSlots:e._u([{key:"avatar",fn:function(){return[s.embedFileList&&s.embedFileList.length?t("div",{staticClass:"file-icons"},[t("FileIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.embedFileList[0].fileName,expression:"row.embedFileList[0].fileName",modifiers:{top:!0}}],key:"Icon-"+i,staticClass:"file-icon q-mr-sm",attrs:{"mime-type":e.fileType(s.embedFileList[0].fileName)}})],1):e._e()]},proxy:!0}],null,!0)})]}))],2)],1),"inbox"===e.selectedNode||"payment"===e.selectedNode?t("div",{staticClass:"col"},[t("div",{staticClass:"row"},[e.checkTenant()?[t("div",{staticClass:"col actions"},[e.attachmentList.length&&e.fileNames.length?t("div",{staticClass:"row select-action q-pa-sm action-container"},[t("CheckboxField",{staticClass:"q-pr-sm",class:e.attachComment?"col-auto":"col",attrs:{label:"Add Comment to PDF"},model:{value:e.attachComment,callback:function(t){e.attachComment=t},expression:"attachComment"}}),"START"===e.selectedProcess.stageType||e.attachComment?e._e():t("CheckboxField",{staticClass:"col-auto notify-cmd",attrs:{label:"Notify Initiator/Requester"},model:{value:e.notifyInitiator,callback:function(t){e.notifyInitiator=t},expression:"notifyInitiator"}}),e.attachComment?t("SelectField",{staticClass:"col field comment-attach attach-cmd",attrs:{"is-searchable":!0,options:e.fileNames},model:{value:e.selectedFileForAttach,callback:function(t){e.selectedFileForAttach=t},expression:"selectedFileForAttach"}}):e._e()],1):e._e(),"START"===e.selectedProcess.stageType||!e.attachComment&&e.attachmentList.length&&e.fileNames.length?e._e():t("CheckboxField",{staticClass:"col-12 q-pl-sm q-pb-sm q-pt-sm",class:e.notifyInitiatorClass,attrs:{label:"Notify Initiator/Requester"},model:{value:e.notifyInitiator,callback:function(t){e.notifyInitiator=t},expression:"notifyInitiator"}}),e.displayInternalPublic?t("SingleChoiceField",{staticClass:"action-container",class:{"internal-public":e.attachmentList.length>0,"col q-pa-sm":!0,"internal-public-margin":e.attachComment},attrs:{options:e.commentActions,"show-options-wrapper":!1,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e()],1)]:e._e(),e.isTenantGOTOComments()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions q-pa-sm",attrs:{options:e.jiraCommentActions,"options-per-line":2},model:{value:e.jiraCommentAction,callback:function(t){e.jiraCommentAction=t},expression:"jiraCommentAction"}})]:e._e()],2),t("div",{staticClass:"row text-area-action q-ml-sm q-mr-sm"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto","margin-right":"8px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm comment-actions",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm comment-actions",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])]):e._e()]),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[e.selectedFile.formJsonId?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:e.getLabel(e.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:e._e(),t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])],2)]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.documentActionList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.documentAction(s.id)}}})})),1)],1)],1)]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])]),t("Sheet",{attrs:{width:"30vw"},on:{input:e.closeTaskSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Tasks ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Add Task",expression:"'Add Task'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-plus",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.$emit("addTask")}}})]},proxy:!0}]),model:{value:e.taskSheet,callback:function(t){e.taskSheet=t},expression:"taskSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[e._l(e.taskEntries,(function(s){return[t("div",{key:s.id,staticClass:"taskEntries"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto q-mr-md",staticStyle:{"margin-top":"3px"},on:{click:function(t){return e.$emit("viewTask",s.id)}}},[e._v(" "+e._s(s.name)+" ")]),t("q-chip",{attrs:{size:"10px",color:e.getColor(s.priority),"text-color":"white"}},[e._v(" "+e._s(s.priority)+" ")]),t("q-chip",{attrs:{size:"10px",color:e.getColor(s.status),"text-color":"white"}},[e._v(" "+e._s(s.status)+" ")])],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col-12"},[e._v("Assigned To: "+e._s(s.assigned))]),t("div",{staticClass:"col-12"},[e._v(" Start Date: "+e._s(e.$day.format(s.startDate,!1))+" "),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" End Date: "+e._s(e.$day.format(s.endDate,!1))+" ")],1)])])]}))],2)]),t("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"red"},on:{input:function(t){e.errorModal=!1,e.errorMessage=""}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Error Message")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" "+e._s(e.errorMessage)+" ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Close",color:"red"},on:{click:function(t){e.errorModal=!1,e.errorMessage=""}}})]},proxy:!0}]),model:{value:e.errorModal,callback:function(t){e.errorModal=t},expression:"errorModal"}}),t("EmailSharing",{attrs:{"repository-id":e.workflow.repositoryId,"file-list":e.selectedFileList},on:{"update:fileList":function(t){e.selectedFileList=t},"update:file-list":function(t){e.selectedFileList=t}},model:{value:e.emailSharingSheet,callback:function(t){e.emailSharingSheet=t},expression:"emailSharingSheet"}}),t("FileDetails",{attrs:{"file-data":e.fileData},model:{value:e.fileDetailsSheet,callback:function(t){e.fileDetailsSheet=t},expression:"fileDetailsSheet"}}),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[e.checkTenant()?[t("div",{staticClass:"row actions advance-cmd"},[e.attachmentList.length&&e.fileNames.length?[t("CheckboxField",{staticClass:"col-auto q-pr-sm",staticStyle:{margin:"auto"},attrs:{label:"Add Comment to PDF"},model:{value:e.attachComment,callback:function(t){e.attachComment=t},expression:"attachComment"}}),e.attachComment?t("SelectField",{staticClass:"field comment-attach",attrs:{"is-searchable":!0,options:e.fileNames},model:{value:e.selectedFileForAttach,callback:function(t){e.selectedFileForAttach=t},expression:"selectedFileForAttach"}}):e._e()]:e._e(),"START"!==e.selectedProcess.stageType?t("CheckboxField",{staticClass:"col-auto q-pl-sm adv-notify-cmd",attrs:{label:"Notify Initiator/Requester"},model:{value:e.notifyInitiator,callback:function(t){e.notifyInitiator=t},expression:"notifyInitiator"}}):e._e()],2),e.checkTenant()&&e.displayInternalPublic?t("SingleChoiceField",{staticClass:"actions q-mr-sm noborder",attrs:{options:e.commentActions,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e()]:e._e(),e.isTenantGOTOComments()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.jiraCommentActions,"options-per-line":2},model:{value:e.jiraCommentAction,callback:function(t){e.jiraCommentAction=t},expression:"jiraCommentAction"}})]:e._e(),t("BaseButton",{attrs:{label:"Post Comments",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}}),t("MetaDataEdit",{attrs:{value:e.showMetaDataEditModal,mode:"Indexing",file:e.workflow,"repository-field":e.repositoryField,"file-data":e.fileData,title:"Index",columns:e.columns,"modal-value":e.selectedProcess,"upload-filename":e.uploadFilename},on:{close:e.closeMetaDataEditModal,save:e.saveMetaData}}),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheetInFileControl=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e.selectedFileInFileControl?[t("div",{staticClass:"attachmentFileHeader"},[t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFileInFileControl.fileName)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFileInFileControl.fileName)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v(" Archived At: "+e._s(e.$day.format(e.selectedProcess.raisedAt))+" ")]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedProcess.raisedBy))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])])]:e._e()]},proxy:!0}]),model:{value:e.fileSheetInFileControl,callback:function(t){e.fileSheetInFileControl=t},expression:"fileSheetInFileControl"}},[e.selectedFileInFileControl?[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:e.fileControlFileLink(),frameborder:"0"}})])])]:e._e()],2),t("Summarizing",{attrs:{width:"40vw",height:"60vh","workflow-id":e.workflow.id,"transaction-id":e.selectedProcess.transactionId,"process-id":e.selectedProcess.processId,page:"WORKFLOW"},on:{input:e.summarizeModal},model:{value:e.summarizeModal,callback:function(t){e.summarizeModal=t},expression:"summarizeModal"}}),e.showAttachmentSheet?t("Attachments",{attrs:{value:e.showAttachmentSheet,"selected-process":e.selectedProcess,workflow:e.workflow,"selected-node":e.selectedNode,"initiate-process":!1,"form-check-list":!1,"check-list":e.checkList,wform:e.form,"repository-details":e.repositoryDetails,"workflow-model":e.workflowModel,"form-upload-files":[],"repository-field":e.repositoryField,columns:e.columns,attachments:e.attachmentList,"workflow-id":e.workflow.id},on:{"update:value":function(t){e.showAttachmentSheet=t},"update:attachments":function(t){e.attachmentList=t},attachmentCount:e.attachmentCount}}):e._e(),e.showCommentsSheet?t("Comments",{attrs:{value:e.showCommentsSheet,"selected-process":e.selectedProcess,workflow:e.workflow,"selected-node":e.selectedNode,"initiate-process":!1,"attachment-list":e.attachmentList,"workflow-id":e.workflow.id,"file-names":e.fileNames,comments:e.commentsList,"display-internal-public":e.displayInternalPublic},on:{"update:value":function(t){e.showCommentsSheet=t},"update:comments":function(t){e.commentsList=t},commentsCount:e.commentsCount}}):e._e()],2)},c=[],d=(s("13d5"),s("caad"),s("381e")),m=s("6df3"),h=s("869e"),u=s("9234"),p=s("fa1f"),f=s("cade"),v=s("a7d2"),y=s("dd90"),b=s("1b0d"),w=s("1c54"),g=s("bc3a"),C=s.n(g),k=s("5e23"),I=s("abe1"),S=s("695e"),_=s("6a70"),A=s("ee54"),T=s("12b8"),x=s("0006"),F=s("626d"),L=s("ec15"),P=s("bb36"),$={name:"FormsCard",components:{Sheet:d["a"],TextAreaField:m["a"],CheckboxField:h["a"],SingleChoiceField:u["a"],FileIcon:p["a"],ListItem:f["a"],Confirm:w["a"],EmailSharing:k["a"],FileDetails:I["a"],TextBuilderField:S["a"],Modal:_["a"],MetaDataEdit:A["a"],SelectField:T["a"],Stepper:x["a"],Summarizing:F["a"],Attachments:L["a"],Comments:P["a"]},props:{workflow:{type:Object,default:()=>{}},form:{type:Object,default:()=>{}},selectedProcess:{type:Object,required:!0,default:()=>{}},processActions:{type:Array,default:()=>[]},taskEntries:{type:Array,default:()=>[]},checkList:{type:Array,default:()=>[]},jiraAccounts:{type:Array,default:()=>[]},selectedNode:{type:String,default:""},hideColumns:{type:Array,default:()=>[]},portalAction:{type:Boolean,default:!1}},data(){return{search:"",tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0},{id:this.$nano.id(),label:"show/hide columns",value:"TOGGLE",icon:"mdi-table-column-plus-after",count:0},{id:this.$nano.id(),label:"task",value:"TASK",icon:"eva-cube-outline",count:0},{id:this.$nano.id(),label:"Data Validation",value:"VALIDATION",icon:"mdi-file-compare",count:0},{id:this.$nano.id(),label:"Payment Table",value:"PAYMENT_TABLE",icon:"mdi-table",count:0}],attachmentSheet:!1,commentsSheet:!1,commentText:"",commentsList:[],attachmentList:[],fileSheet:!1,selectedFile:{},attachmentLoad:null,commentsLoad:null,columns:[],searchColumns:"",signList:[],selectAll:!1,emailSharingSheet:!1,selectedFileList:[],fileDetailsSheet:!1,fileData:[],taskSheet:!1,taskList:[],commentActions:[{id:this.$nano.id(),label:"Internal",value:2},{id:this.$nano.id(),label:"Public",value:1}],commentAction:2,jiraCommentActions:[{id:this.$nano.id(),label:"This resource",value:1},{id:this.$nano.id(),label:"All resource",value:2}],jiraCommentAction:1,checkListRowIndex:null,errorMessage:"",errorModal:!1,advancedCommentsSheet:!1,advancedCommentText:"",repositoryField:[],showMetaDataEditModal:!1,selectedUploadFile:[],repositoryDetails:{},reuploadId:0,documentActionList:[{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline"},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline"}],documentLoad:null,watchViewerClose:null,uploadFilename:"",fileNames:[],selectedFileForAttach:0,attachComment:!1,displayInternalPublic:!1,fileSheetInFileControl:!1,selectedFileInFileControl:{},answerIndicatorList:{},stageLevel:[],currentStep:0,showAnswerIndicator:!1,notifyInitiator:!1,summarizeModal:!1,showAttachmentSheet:!1,showCommentsSheet:!1,workflowModel:{}}},computed:{isPreviewAction(){location.origin;return!0},scrollbarHeight(){const e=36*this.columns.length;return e>216?"276px":e+58+"px"},selectedFileCount(){this.clearAttach();let e=this.attachmentList.filter(e=>e.checked).length;return e},isSelectedPDF(){let e=!0;return this.attachmentList.forEach(t=>{let s=t.name.split(".").pop();t.checked&&"pdf"!==s.toLowerCase()&&(e=!1)}),e},isCustomizedWorkflow(){let e=location.origin;if("https://demo.ezofis.com"===e||"http://52.172.32.88"===e){if(1014===this.workflow.id)return!0}else if(("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&1===this.workflow.id)return!0;return!1},commentsSheetHeight(){return"inbox"===this.selectedNode||"payment"===this.selectedNode?this.checkCommentsOption()?this.attachmentList.length&&this.fileNames.length?this.attachComment&&this.displayInternalPublic?"calc(100vh - 270px)":this.attachComment&&!this.displayInternalPublic?"calc(100vh - 230px)":!this.attachComment&&this.displayInternalPublic?"calc(100vh - 225px)":"calc(100vh - 200px)":this.displayInternalPublic?"calc(100vh - 220px)":"START"!==this.selectedProcess.stageType?"calc(100vh - 180px)":"calc(100vh - 150px)":"calc(100vh - 150px)":""},checkStatusIcon(){return 1==this.selectedProcess.flowStatus?this.selectedProcess.lastAction.toLowerCase().indexOf("reject")>-1?"eva-close-circle-outline":"eva-checkmark-circle-2-outline":"mdi-progress-clock"},checkStatusColor(){return 1==this.selectedProcess.flowStatus?this.selectedProcess.lastAction.toLowerCase().indexOf("reject")>-1?"red":"positive":"orange"},notifyInitiatorClass(){return this.attachmentList.length&&this.fileNames.length?"":"action-container"}},watch:{selectedProcess:{immediate:!0,async handler(){this.selectedProcess.processId&&(this.attachmentList=[],this.fileData=[],this.getComments(!1),this.getAttachments(!1),this.selectedProcess.formData?await this.getFormColumns():this.selectedProcess.itemData&&this.selectedProcess.itemData.items&&await this.getItemColumns(),this.applyHideColumns(),this.getProcessSignature(),await this.getRepository(),this.showHistoryStepper(this.selectedProcess.processId,this.selectedProcess.id),this.showAnswerIndicatorCount())}},attachmentSheet:{immediate:!0,handler(){if(this.attachmentSheet&&this.selectedProcess.processId){if(this.attachmentList.length){let e=this.attachmentList.length-1;this.getFileData(this.attachmentList[e],"file")}this.attachmentLoad=setInterval(()=>{this.getAttachments(!1)},15e3)}else clearInterval(this.attachmentLoad)}},commentsSheet:{immediate:!0,handler(){this.commentsSheet&&this.selectedProcess.processId?this.commentsLoad=setInterval(()=>{this.getComments(!1)},3e4):clearInterval(this.commentsLoad)}},taskEntries:{immediate:!0,handler(){this.tabs.find(e=>{"TASK"===e.value&&(e.count=this.taskEntries.length)})}}},created(){localStorage.removeItem("viewerClose")},methods:{clearAttach(){this.selectedFileForAttach=0,this.attachComment=!1,this.notifyInitiator=!1},customCheckUpload(){let e=location.origin;return"https://edmsuat.sobhaapps.com"===e&&(55===this.workflow.id||2092===this.workflow.id)&&0===this.attachmentList.length},checkTenant(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e&&"http://localhost:80801"!==e&&("https://app.ezofis.com"!==e&&"https://appuat.ezofis.com"!==e||2!==this.$store.state.session.tenantId)||(this.commentAction=2,!1)},isTenantGOTOComments(){if(Object.keys(this.selectedProcess).length){let e=location.origin;if(("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e)&&2===this.$store.state.session.tenantId&&this.selectedProcess.jiraIssueInfo.id)return!0}return!1},checkCommentsOption(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e&&"http://localhost:80801"!==e&&("https://app.ezofis.com"!==e&&"https://appuat.ezofis.com"!==e||2!==this.$store.state.session.tenantId||!(!Object.keys(this.selectedProcess).length||!this.selectedProcess.jiraIssueInfo.id))},closeAttachmentsSheet(){this.attachmentSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},closeTaskSheet(){this.taskSheet=!1},closeMetaDataEditModal(){this.showMetaDataEditModal=!1,this.$refs.attachments.value=null},showLinks(e){if("ATTACHMENTS"===e)this.showAttachmentSheet=!0;else if("COMMENTS"===e){this.displayInternalPublic=!1;let e=JSON.parse(this.workflow.flowJson),t=e.blocks.find(e=>"START"===e.type);t&&(t.settings.initiateBy.indexOf("PORTAL")>-1||this.portalAction)&&(this.displayInternalPublic=!0),this.fileNames=[],this.fileNames=this.attachmentList.filter(e=>{let t=e.name.split(".").pop().toUpperCase();return"pdf"===t.toLowerCase()}).map(e=>({id:this.$nano.id(),label:e.name,value:e.id})),this.showCommentsSheet=!0}else"HISTORY"===e?this.$emit("history",this.selectedProcess.processId):"TASK"===e?this.taskEntries.length?this.taskSheet=!0:this.$emit("addTask"):"VALIDATION"===e?this.$emit("validation",this.selectedProcess.processId):"PAYMENT_TABLE"===e&&this.$emit("paymentTable")},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},validateType(e){let t=!0;if(this.form.formJson){let s=JSON.parse(this.form.formJson);s.panels.forEach(s=>{if(s.fields.length)for(let i of s.fields)if(i.id===e&&"TABLE"===i.type)return void(t=!1)})}return t},validateValue(e){let t=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;return!t.test(e)},removeTags(e){return e?e.replace(/(<([^>]+)>)/gi,""):""},tableValue(e){return e?JSON.parse(e):[]},requestAction(e){this.$emit("proceed",e)},getLabel(e,t){let s="";if(this.form.formJson){let i=JSON.parse(this.form.formJson);i.panels.forEach(i=>{if(i.fields.length)for(let a of i.fields)if("table"===t){const t=a.settings.specific.tableColumns.find(t=>t.id===e);t&&(s=t.label)}else if(a.id===e)return void(s=a.label)})}return s},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},fileSize(e){return Object(v["a"])(e)},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop(),s="";"inbox"!==this.selectedNode&&"payment"!==this.selectedNode||(s="&action=all");let i="";if(Object(y["d"])(t))"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?(s="",i="https://ag-appsvc04.azurewebsites.net/web/viewer.html"):"https://trial.ezofis.com"!==e||Object(y["c"])(t)?i="https://app.ezofis.com"===e?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html":(localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),i="https://trial.ezofis.com/docsviewer/index.html");else{if(Object(y["b"])(t)||"http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflow.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${s}`}},openFileByCmd(e){const t=e.embedFileList[0],{fileName:s,itemid:i,...a}=t;this.selectedFile={name:s,id:i,...a};let o=location.origin;"https://ag-appsvc01.azurewebsites.net"===o||"https://ag-appsvc05.azurewebsites.net"===o?window.open(this.fileLink()):this.fileSheet=!0},openFile(e){this.selectedFile=e;let t=location.origin;"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?window.open(this.fileLink()):(this.fileSheet=!0,"http://52.172.32.88"!==t&&"http://localhost:8080"!==t||(localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3)))},checkViewerClose(){localStorage.getItem("viewerClose")&&"true"===localStorage.getItem("viewerClose")&&(this.fileSheet=!1,localStorage.removeItem("viewerClose"),clearInterval(this.watchViewerClose))},getFormColumns(){let e=[];if(this.form.formJson){let t=JSON.parse(this.form.formJson);const s=[...t.panels,...t.secondaryPanels];if(!s.length)return;let i=[];for(const e of s)i.push(...e.fields);let a=JSON.parse(this.workflow.flowJson),o=[];const r=a.blocks.reduce((e,t)=>(t.settings.formSecureControls&&t.settings.formSecureControls.length&&("string"===typeof t.settings.formSecureControls[0]?t.settings.users.forEach(s=>{e.push({[s]:t.settings.formSecureControls})}):t.settings.formSecureControls.forEach(t=>{t.formFields.length&&e.push({[t.userId]:t.formFields})})),e),[]);r.forEach(e=>{e[this.$store.state.session.id]&&o.push(...e[this.$store.state.session.id])}),i.forEach(t=>{if("DIVIDER"!==t.type&&"LABEL"!==t.type&&"PARAGRAPH"!==t.type&&(t.label||"TABLE"===t.type)&&"DISABLE"!==t.settings.general.visibility)if(o.length)if("object"===typeof o[0]){let s=o.findIndex(e=>e.userId===this.$store.state.session.id);if(s>=0){let i=o[s].formFields,a=i.findIndex(e=>e===t.id);-1===a&&e.push({id:t.id,label:t.label,isVisible:!0,display:""})}}else{let s=o.findIndex(e=>e===t.id);-1===s&&e.push({id:t.id,label:t.label,isVisible:!0,display:""})}else e.push({id:t.id,label:t.label,isVisible:!0,display:""})})}this.columns=e},getItemColumns(){let e=[];for(var t=Object.keys(this.selectedProcess.itemData.items),s=0;s<t.length;s++)e.push({id:t[s],label:t[s],isVisible:!0,display:""});this.columns=e},isVisible(e){const t=this.columns,s=t.findIndex(t=>t.id===e);return!(s>-1)||t[s].isVisible},async searchColumnList(e){this.columns.forEach(t=>{t.display="",t.label.toLowerCase().includes(e.toLowerCase())||(t.display="hide")})},signLink(e){return`https://appuat.ezofis.com/ezofisapi/api/workflow/signView/${this.$store.state.session.tenantId}/${this.workflow.id}/${e}`},fileSelectAll(){this.attachmentList=this.attachmentList.map(e=>({...e,checked:this.selectAll}))},getColor(e){return"Closed"===e||"High"===e?"red":"In Progress"===e||"Medium"===e?"warning":"Open"===e||"Low"===e?"secondary":"primary"},attachTemplate(e){this.checkListRowIndex=e,this.$refs.attachments.click()},reupload(e){var t;e=e.substr(0,e.lastIndexOf(".")).split("_")[0],this.checkListRowIndex=null===(t=this.checkList.find(t=>t.name===e))||void 0===t?void 0:t.uid,this.$refs.attachments.click()},attachmentFilterCheckList(e){return this.attachmentList.filter(t=>t.name.substring(0,t.name.lastIndexOf("."))===e||t.name.substring(0,t.name.lastIndexOf(".")).split("_")[0]===e)},isCheckList(e){let t=this.checkList.filter(t=>t.name===e.substring(0,e.lastIndexOf("."))||t.name===e.substring(0,e.lastIndexOf(".")).split("_")[0]);return!t.length},getJIRALink(e){let t=new URL(e.self),s=t.origin.replace("https://jira-external-tools-integration.getgotools.net","https://jira.ops.expertcity.com");window.open(`${s}/browse/${e.key}`,"_blank")},async getComments(e=!0){this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=0)}),this.commentsList=[],e&&this.$store.commit("showLoadingBar");const{error:t,payload:s}=await b["t"].getProcessComments(this.workflow.id,this.selectedProcess.processId);e&&this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):(this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=0)}),this.commentsList=[],s.length&&(this.commentsList=s,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)})))},async saveComment(){let e=location.origin;if(this.commentText){if(this.attachComment&&!this.selectedFileForAttach)return void this.$alert.warning("Select File To Attach");if(this.selectedProcess.processId){if("https://app.ezofis.com"!==e&&"https://appuat.ezofis.com"!==e||2!==this.$store.state.session.tenantId||!this.selectedProcess.jiraIssueInfo.id||2!==this.jiraCommentAction){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await b["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:this.commentAction,hasNotifytoInitiated:this.notifyInitiator,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,[t])}else{this.$store.commit("showLoadingBar");const{error:e,payload:t}=await b["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.commentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,t)}this.commentText="",this.commentAction=1,this.clearAttach(),this.getComments()}}},async saveAdvancedComment(){if(this.advancedCommentText){if(this.attachComment&&!this.selectedFileForAttach)return void this.$alert.warning("Select File To Attach");if(this.selectedProcess.processId){if("https://app.ezofis.com"!==origin&&"https://appuat.ezofis.com"!==origin||2!==this.$store.state.session.tenantId||!this.selectedProcess.jiraIssueInfo.id||2!==this.jiraCommentAction){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await b["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:this.commentAction,hasNotifytoInitiated:this.notifyInitiator,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t)}else{this.$store.commit("showLoadingBar");const{error:e,payload:t}=await b["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t)}this.advancedCommentText="",this.advancedCommentsSheet=!1,this.clearAttach(),this.getComments()}}},async uploadWflowAttachments(e){if("STATIC"===this.repositoryDetails.fieldsType){if(this.selectedUploadFile=e,this.customCheckUpload()){let t=this.formFields.find(e=>"Document No"===e.label);this.uploadFilename=t?this.workflowModel[t.value]+".pdf":e.target.files[0].name}else this.uploadFilename=e.target.files[0].name;this.showMetaDataEditModal=!0}else this.uploadAttachments(e)},async uploadAttachments(e,t){const s=e.target.files[0],i=new FormData;i.append("workflowId",this.workflow.id),i.append("repositoryId",this.workflow.repositoryId),i.append("processId",this.selectedProcess.processId),i.append("transactionId",this.selectedProcess.transactionId),t?i.append("fields",t):i.append("fields",""),i.append("file",s);let a=e.target.files[0].name;const o=a.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);i.append("filename",e[0].name+"."+o),a=e[0].name+"."+o}if(Object(y["a"])(o)){this.$store.commit("showLoadingBar");try{const e=await C()({url:"https://appuat.ezofis.com/ezofisapi/api/workflow/attachmentWithProcessId",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:t,data:s}=e;if(200!==t||!s)throw e;this.$alert.success("Document attached"),this.documentLoad=setInterval(()=>{this.getAttachments(!1),clearInterval(this.documentLoad)},15e3)}catch(r){this.$alert.error("Error uploading file"),console.error(r)}this.$store.commit("hideLoadingBar"),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value="",this.reuploadId&&(await this.attachmentDelete(this.reuploadId),this.reuploadId=0),this.attachmentLoad=setInterval(()=>this.getAttachments(!1),5e3)}else this.$alert.info("This file format is not supported")},async getAttachments(e=!0){this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=0)});let t=this.attachmentList.length;e&&this.$store.commit("showLoadingBar");const{error:s,payload:i}=await b["t"].getAttachments(this.workflow.id,this.selectedProcess.processId);e&&this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):(this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=0)}),i.length?(t!==i.length&&(this.attachmentList=i.map(e=>({...e,checked:!1})),clearInterval(this.attachmentLoad)),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)})):this.attachmentList=[],this.checkList.length&&this.checkList.forEach(e=>{let t=this.attachmentList.filter(t=>{let s=t.name.substr(0,t.name.lastIndexOf("."));if(e.name===s||e.name===s.split("_")[0])return t});t.length?e.attach=!0:e.attach=!1}))},async attachmentDelete(e){this.$store.commit("showLoadingBar");const{error:t}=await b["p"].fileDelete(this.workflow.repositoryId,e);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):this.getAttachments()},async getProcessSignature(){const{error:e,payload:t}=await b["t"].getProcessSignature(this.workflow.id,this.selectedProcess.processId);e?this.$alert.error(e):this.signList=t},async getFileData(e,t){const{error:s,payload:i}=await b["p"].getFileData({repositoryId:e.repositoryId,itemId:e.id});s?this.$alert.error(s):i&&(this.fileData=i,t||(this.fileDetailsSheet=!0))},async sendCommentsToJira(e,t,s){if(this.$store.commit("showLoadingBar"),1===this.jiraCommentAction){var i;let t=null===(i=this.formFields.find(e=>"Resource ID"===e.label))||void 0===i?void 0:i.value;e=this.selectedProcess.formData.fields[t]+","+e}e=`${this.$store.state.session.firstName} ${this.$store.state.session.lastName}: ${e}`;let a={cloudIntegrationId:this.jiraAccounts[0].id,url:this.selectedProcess.jiraIssueInfo.self,data_onpremise:{body:e},issueId:t,ezCommentId:s};const{error:o,payload:r}=await b["j"].insertJiraIssueComments(a);if(this.$store.commit("hideLoadingBar"),o){this.$alert.error("error posting comments to jira");let e=JSON.parse(o);return this.errorMessage=e.errorMessages,void(this.errorModal=!0)}console.log(r),this.jiraCommentAction=1},async getRepository(){const{error:e,payload:t}=await b["p"].getRepository(this.workflow.repositoryId);e?this.$alert.error(e):(this.repositoryDetails=t,this.repositoryField=t.fields)},saveMetaData(e){let t=[];this.repositoryField.forEach(s=>{t.push({name:s.name,value:e[s.name],type:s.dataType})}),this.uploadAttachments(this.selectedUploadFile,JSON.stringify(t))},validateDateType(e){let t=!1;if(this.form.formJson){let s=JSON.parse(this.form.formJson);s.panels.forEach(s=>{if(s.fields.length)for(let i of s.fields)if(i.id===e&&"DATE"===i.type)return void(t=!0)})}return t},fileMenuAction(e,t){this.selectedFile=e,this.documentAction(t,!0)},documentAction(e,t){if("Email_Sharing"===e);else if("Print"===e){if(this.selectedFile.name)if(t){let e="";e=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`,window.open(e,"_blank")}else{let e=this.selectedFile.name.split(".").pop();Object(y["d"])(e)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===e){let e="";e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`,window.open(e,"_blank")}},async filePrintSession(){const{error:e}=await b["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});e&&this.$alert.error(e)},async documentMerge(){let e=[];this.attachmentList.forEach(t=>{let s=t.name.split(".").pop();t.checked&&"pdf"===s.toLowerCase()&&e.push(t.id)});let t={ids:e};const{error:s}=await b["t"].documentMerge(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,this.workflow.repositoryId,t);s?this.$alert.error(s):this.$alert.success("Document merge process initiated")},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(e=>{e.checked&&this.selectedFileList.push({id:e.id,name:e.name})}),this.emailSharingSheet=!0},async applyHideColumns(){this.hideColumns.forEach(e=>{const t=this.columns.findIndex(t=>t.id===e.columnName);t>-1&&(this.columns[t].isVisible=!1,this.columns[t].hideId=e.id)})},async updateHideColumns(e){const t=this.columns.findIndex(t=>t.id===e.id);this.columns[t].isVisible=!this.columns[t].isVisible;let s={id:e.hideId||0,columnName:e.id};const{error:i,payload:a}=await b["k"].updateHideColumns(this.workflow.id,s);if(i)return void this.$alert.error(i);let o=[];e.hideId?o=this.hideColumns.filter(t=>t.id!=e.hideId):(o=this.hideColumns,o.push({id:a,columnName:e.id})),this.columns[t].hideId=e.hideId?0:a,this.$emit("update:hideColumns",o)},validateFileUpload(e){let t=!1;if(this.form.formJson){let s=JSON.parse(this.form.formJson);s.panels.forEach(s=>{if(s.fields.length)for(let i of s.fields)if(i.id===e&&"FILE_UPLOAD"===i.type)return void(t=!0)})}return t},openFileInFileControl(e){this.selectedFileInFileControl=e;let t=location.origin;"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?window.open(this.fileControlFileLink()):(this.fileSheetInFileControl=!0,"http://52.172.32.88"!==t&&"http://localhost:8080"!==t||(localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3)))},fileControlFileLink(){let e=this.selectedFileInFileControl,t=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(e.fileName){let s=e.fileName.split(".").pop(),i="";if(Object(y["d"])(s))i="https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"!==t||Object(y["c"])(s)?"https://app.ezofis.com"===t?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":t+"/PDFViewer/web/viewer.html":"https://trial.ezofis.com/docsviewer/index.html";else{if(Object(y["b"])(s)||"http://52.172.32.88"!==t)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${e.repositoryId}/${e.itemId}/2`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${e.repositoryId}&itemId=${e.itemId}&wId=${this.workflow.id}&pId=${this.selectedProcess.processId}&type=2&filename=${e.fileName}`}},showAnswerIndicatorCount(){if(this.showAnswerIndicator=!1,this.form.formJson){let e=[],t=JSON.parse(this.form.formJson);t.panels.forEach(t=>{e.push(...t.fields)});let s=0,i=0,a=this.selectedProcess.formData.fields;e.forEach(e=>{this.isVisible(e.id)&&"REQUIRED"===e.settings.validation.fieldRule&&"NORMAL"===e.settings.general.visibility&&"YES"===e.settings.validation.answerIndicator&&(this.showAnswerIndicator=!0,Array.isArray(a[e.id])?a[e.id].length?s+=1:i+=1:"<p></p>"===a[e.id]?this.removeTags(a[e.id])?s+=1:i+=1:a[e.id]?s+=1:i+=1)}),this.answerIndicatorList={filledValue:s,nonFilledValue:i},console.log(this.answerIndicatorList)}},async showHistoryStepper(e,t){const{error:s,payload:i}=await b["t"].processHistory(t,e);s?this.$alert.error(s):i.length&&(this.stageLevel=[],this.currentStep=0,i.forEach(e=>{if(2!==e.actionStatus)if(0===this.stageLevel.filter(t=>t.id===e.activityId).length)this.stageLevel.push({id:e.activityId,label:e.stage,status:e.status}),((e.actionUser||e.subWorkflowHistory)&&e.status&&"Forward"!==e.status||null===e.actionUser&&!e.subWorkflowHistory)&&(this.currentStep+=1);else if(e.status)this.stageLevel.filter(t=>t.id===e.activityId&&t.status!==e.status).length?this.currentStep+=1:this.currentStep-=1;else{let t=this.stageLevel.findIndex(t=>t.id===e.activityId);t>-1&&(this.stageLevel.splice(t,this.stageLevel.length-t),this.stageLevel.push({id:e.activityId,label:e.stage,status:e.status}),e.actionUser&&e.status&&"Forward"!==e.status||null===e.actionUser?this.currentStep=t+1:this.currentStep=t)}}))},attachmentCount(e){this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=e)})},commentsCount(e){this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=e)})}}},B=$,N=(s("130a"),s("01b4"),s("94da"),s("2877")),M=s("4e73"),D=s("b047"),q=s("cb32"),O=s("8169"),E=s("f531"),R=s("93dc"),V=s.n(R),z=Object(N["a"])(B,l,c,!1,null,"19201fbd",null),j=z.exports;V()(z,"components",{QMenu:M["a"],QChip:D["a"],QAvatar:q["a"],QChatMessage:O["a"],QStepper:E["a"]});var U=s("c3d2"),W=s("0c04"),J=s("ad54"),H=s("8bc3"),G=s("53c1"),K=s("3445"),Y=s("42fc"),Q=s("2f62"),X=s("8505"),Z=s("b0ba"),ee=s("6e8c"),te={name:"WorkflowInbox",components:{ValidationObserver:o["a"],ValidationProvider:o["b"],WorkflowTree:r["a"],InboxList:n["a"],FormsCard:j,Modal:_["a"],Confirm:w["a"],MultiSelectField:U["a"],AddTask:W["a"],SelectField:T["a"],NumberField:J["a"],TextBuilderField:S["a"],SingleChoiceField:u["a"],PasswordField:H["a"],DateField:G["a"],FormFieldLabel:K["a"],ProcessHistory:X["a"],FormEntryHistory:Z["a"],UnpinDashboard:ee["a"]},data(){return{selectedNode:"",selectedCompletedNode:"",myInboxCount:0,myInboxShow:!1,workflowList:[],selectedWorkflow:{},workflowRequestList:[],selectedProcess:{},form:{},repository:{},processActions:[],processActionsAddOn:[],fullView:!1,activeView:"GRID",groupKey:[],processForwardModal:!1,internalForward:{proceed:!1,users:[],groups:[]},userList:[],groupList:[],forwardUsers:[],forwardGroups:[],filterBy:[],sortBy:{criteria:"",order:"DESC"},historyTitle:"",totalItems:0,itemsPerPage:50,currentPage:1,masterFormId:0,dataImported:!1,userSignature:!1,taskFormId:0,taskRepositoryId:0,addTaskForm:{},addTaskSheet:!1,taskEntryId:[],taskEntries:[],taskEntryList:[],taskMode:"",selectedTask:{},checkList:[],dataValidationValues:[],dataValidationModal:!1,dataValidationColumns:[{id:this.$nano.id(),name:"fieldName",label:"FIELD",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"formValue",label:"FORM DATA",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"ocrValue",label:"PDF DATA",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"status",label:"STATUS",type:"STATUS"}],paymentTableModal:!1,totalPayment:0,lumpsumAmount:0,benefitType:"",benefitTypes:[{id:this.$nano.id(),label:"Monthly",value:"Monthly"},{id:this.$nano.id(),label:"Bi-weekly",value:"BiWeekly"},{id:this.$nano.id(),label:"Semi-monthly",value:"SemiMonthly"},{id:this.$nano.id(),label:"Weekly",value:"Weekly"}],numberOfApprovePayment:0,paymentTableColumns:[{id:this.$nano.id(),name:"paymentNumber",label:"Payment Number",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"baseAmount",label:"Payment Base Amount",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"claimAmount",label:"Claim Amount (20% Increased)",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"cumulativeTotal",label:"Cumulative Total",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"approval",label:"Approval",type:"SINGLE_SELECT"},{id:this.$nano.id(),name:"approvedDate",label:"Approved Date",type:"DATE"},{id:this.$nano.id(),name:"paymentDate",label:"Payment Date",type:"DATE"}],paymentTableValues:[],isPaymentFound:!1,jiraAccounts:[],advancedCommentsSheet:!1,commentActions:[{id:this.$nano.id(),label:"Internal",value:2},{id:this.$nano.id(),label:"Public",value:1}],commentAction:1,advancedCommentText:"",actionText:"",actionRemarks:!1,actionPassword:!1,actionPasswordConfirm:!1,actionUserPassword:"",isLoading:!1,refreshTree:!0,loadInitial:!0,actionConfirm:!1,actionConfirmAlert:!1,customReply:!1,userReply:!1,toRequester:!1,customCloseProcessSheet:!1,approvalTypes:[{id:this.$nano.id(),label:"Approve",value:"Approved"},{id:this.$nano.id(),label:"Cancel",value:"Cancelled"}],activeViewLoad:null,hideColumns:[],addTaskEnabled:!1,loadingBarInbox:!1,historyProcessId:0,requestLockedModal:!1,requestForLockModal:!1,showFormEntryHistoryModal:!1,portalAction:!1,issavesheet:!1,nodeType:"",refreshCount:!1,listedData:[],uId:0,jsonFilters:[],node:"",dashboard:!1,Jsonfiltering:"",filtersArray:"",isDeleteConfirmationVisible:!1,deleteData:{},success:!1}},computed:{...Object(Q["c"])(["loadingBarPage","loadingBar"]),selectedRequestCount(){let e=this.workflowRequestList.filter(e=>!0===e.checked).length;return e<2}},watch:{success:{deep:!0,immediate:!0,async handler(){this.success&&(await this.getFilterList(),this.refresh())}}},created(){this.getAppConnection(),this.isTestServer()?this.getUserWorkflowTest():(this.getUserMyInbox(),this.getUserWorkflow()),this.getUsers(),this.getGroups(),this.getTaskForm(),(this.isTenantSobha()||this.isTenantArmgroup())&&(this.activeViewLoad=setInterval(()=>{this.activeView="LIST",clearInterval(this.activeViewLoad)},1e3)),this.getFilterList()},methods:{checkTenant(){return!this.isTenantArmgroup()||(this.commentAction=2,!1)},isTenantGOTO(){let e=location.origin;return("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e)&&2===this.$store.state.session.tenantId},isTenantArmgroup(){let e=location.origin;return("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://localhost:80801"===e)&&3===this.$store.state.session.tenantId},isTenantSobha(){let e=location.origin;return"https://edmsuat.sobhaapps.com"===e||"https://edms.sobhaapps.com"===e},isTestServer(){let e=location.origin;return"https://ag-appsvc05.azurewebsites.net"===e||"https://appuat.ezofis.com"===e&&3===this.$store.state.session.tenantId||"http://52.172.32.881"===e||"http://localhost:80801"===e},addPaymentRow(){const e={paymentNumber:this.paymentTableValues.length+1,baseAmount:"",claimAmount:0,cumulativeTotal:0,approval:"",approvedDate:"",paymentDate:"",benefitType:this.benefitType,delete:!0};this.paymentTableValues.push(e)},removePaymentRow(e){this.paymentTableValues.splice(e,1)},calcOtherColumns(e){let t=0,s=this.paymentTableValues[e].baseAmount,i=s+.2*s;this.paymentTableValues[e].claimAmount=i.toFixed(2),this.paymentTableValues.forEach(e=>{t+=Number(e.claimAmount)}),this.paymentTableValues[e].cumulativeTotal=t.toFixed(2)},updateFilter(e){this.currentPage=1,this.filterBy=e,this.refresh()},updateSortBy(e){this.currentPage=1,this.sortBy=e,this.refresh()},addTaskEntry(e,t){this.selectedProcess.processId?this.insertTaskEntry(e,t):(this.taskEntryId.push({formId:e,formEntryId:t}),this.getTaskFormEntry(e,t))},addTask(){this.selectedTask={},this.taskMode="NEW",this.addTaskSheet=!0},viewTask(e){let t=this.taskList.filter(t=>t.formEntryId===e);t.length&&(this.selectedTask=t[0].entryInfo[0],this.selectedTask={id:t[0].formEntryId,...t[0].entryInfo[0]}),this.taskMode="EDIT",this.addTaskSheet=!0},removeTags(e){return e?e.replace(/(<([^>]+)>)/gi,""):""},refresh(e=!0){1===this.currentPage&&(this.workflowRequestList=[],this.groupBy=[],this.totalItems=0,this.selectedProcess={}),this.myInboxShow?(this.getUserMyInbox(),this.getMyInboxData(e)):this.getWorkflowData(e)},async getSelectedNode(e,t){this.nodeType=e,this.refreshCount=t,this.workflowRequestList=[],this.groupBy=[],this.sortBy={criteria:"",order:"DESC"},this.currentPage=1,this.totalItems=0,this.selectedProcess={},this.filterBy=[];const s=e.split("-");this.selectedNode=s[0],this.selectedCompletedNode="",this.portalAction=!1,this.myInboxShow&&(this.selectedWorkflow={}),this.myInboxShow=!1,s.length>1?(this.selectedWorkflow.id!=s[1]&&(this.selectedWorkflow=this.workflowList.find(e=>e.id==s[1]),this.form={},this.repository={},this.selectedWorkflow.wFormId?await this.getForm():this.selectedWorkflow.repositoryId&&await this.getRepository(),this.getHideColumns(),this.getPortal()),3===s.length&&(this.selectedCompletedNode=s[2]),this.getWorkflowData(t)):(this.myInboxShow=!0,this.getMyInboxData(t))},getWorkflowData(e){this.dashboard=!1;let t=this.listedData.map(e=>({id:this.$nano.id(),label:e.name,filterJson:JSON.parse(e.filterJson),dashboard:!1}));t.forEach(e=>{const t=e.filterJson[0].node.split("-");let s=t[0],i="",a="",o=this.filterBy;if(o.length){for(let e=0;e<o.length;e++){let t=o[e];if("id"in t&&delete t["id"],Array.isArray(t.filters))for(let e=0;e<t.filters.length;e++){let s=t.filters[e];"string"===typeof s.value&&(s.value=s.value.toLowerCase()),"id"in s&&delete s["id"]}}i=JSON.stringify(o,null,2)}else o.length||(i=JSON.stringify(o));let r=JSON.parse(e.filterJson[0].filters);if(r.length){for(let e=0;e<r.length;e++){let t=r[e];if("id"in t&&delete t["id"],Array.isArray(t.filters))for(let e=0;e<t.filters.length;e++){let s=t.filters[e];"string"===typeof s.value&&(s.value=s.value.toLowerCase()),"id"in s&&delete s["id"]}}a=JSON.stringify(r,null,2)}else r.length||(a=e.filterJson[0].filters);e.filterJson[0].uId===this.selectedWorkflow.id&&s===this.selectedNode&&a===i&&(this.dashboard=!0)}),"inbox"===this.selectedNode?this.isTestServer()?this.getInboxListTest():this.getInboxList():"sent"===this.selectedNode?this.isTestServer()?this.getSentListTest():this.getSentList():"completed"===this.selectedNode?this.isTestServer()?this.getCompletedListTest():this.getCompletedList():"payment"===this.selectedNode?this.getPaymentList():"common"===this.selectedNode?this.getCommonInbox():(this.groupKey=[],this.totalItems=0),e&&this.refreshProcessCount()},showHistory(e){this.selectedProcess=this.workflowRequestList.find(t=>t.processId===e),this.historyProcessId=e},showSubHistory(e,t){const s=this.workflowRequestList.find(e=>e.processId===t);s&&(this.selectedProcess=s.subworkflowTransaction.find(t=>t.processId===e),this.selectedProcess&&(this.selectedProcess.id=this.selectedProcess.subWorkFlowId,this.historyProcessId=e))},async getMyInboxData(e){"inbox"===this.selectedNode?this.isTenantGOTO()?(this.selectedWorkflow=this.workflowList.find(e=>1==e.id),this.selectedWorkflow.wFormId&&await this.getForm(),this.getMyInboxListGOTO()):this.getMyInboxList():this.groupKey=[],e&&this.refreshProcessCount()},async refreshProcessCount(){if(this.selectedNode&&(this.refreshTree=!1),this.isTestServer()){const{error:e,payload:t}=await b["t"].getUserWorkflowTest();if(e)return void this.$alert.error(e);t.length&&this.workflowList.forEach(e=>{let s=t.findIndex(t=>t.id===e.id);s>-1&&(e.inboxCount=t[s].inboxCount,e.processCount=t[s].processCount,e.completedCount=t[s].completedCount,e.paymentProcessCount=t[s].paymentProcessCount,e.runningCount=t[s].runningCount)})}else{const{error:e,payload:t}=await b["t"].getUserWorkflow();if(e)return void this.$alert.error(e);t.length&&this.workflowList.forEach(e=>{let s=t.findIndex(t=>t.id===e.id);s>-1&&(e.inboxCount=t[s].inboxCount,e.processCount=t[s].processCount,e.completedCount=t[s].completedCount,e.paymentProcessCount=t[s].paymentProcessCount,e.runningCount=t[s].runningCount)})}},async showRequestPreview(e,t,s){this.processActions=[],this.processActionsAddOn=[],this.internalForward={proceed:!1,users:[],groups:[]},this.userSignature=!1;let i=this.workflowRequestList.filter(s=>s.processId===e&&s.id===t);if(this.checkList=[],i.length){if(this.myInboxShow||(this.selectedProcess=i[0]),"inbox"===this.selectedNode||"common"===this.selectedNode||"payment"===this.selectedNode){let e;this.myInboxShow?(this.form={},this.selectedWorkflow=this.workflowList.find(e=>e.id==i[0].id),e=JSON.parse(this.selectedWorkflow.flowJson),this.selectedWorkflow.wFormId&&0===Object.keys(this.form).length&&await this.getForm(),this.getHideColumns(),this.selectedProcess=i[0],this.getPortal()):e=JSON.parse(this.selectedWorkflow.flowJson),this.processActions=[],this.processActionsAddOn=[],this.isTenantArmgroup()&&"psyCrYXtKfcs-EJmrYIhv1"===this.selectedProcess.activityId?e.rules.forEach(e=>{e.fromBlockId===this.selectedProcess.activityId&&"Force Close"===e.proceedAction&&(this.processActions.push(e.proceedAction),this.processActionsAddOn.push({action:e.proceedAction,remarks:e.remarks||!1,passwordAccess:e.passwordAccess||!1,confirm:e.confirm||!1}))}):e.rules.forEach(e=>{if(e.fromBlockId===this.selectedProcess.activityId)if(this.isTenantArmgroup()&&"common"===this.selectedNode&&"szS6B-q1x9acpB83rP6jT"===this.selectedProcess.activityId){if(this.$store.state.session.groups){let t=this.$store.state.session.groups;if(t.length){let s=t.find(e=>3===e.id);s&&(this.processActions.push(e.proceedAction),this.processActionsAddOn.push({action:e.proceedAction,remarks:e.remarks||!1,passwordAccess:e.passwordAccess||!1,confirm:e.confirm||!1}))}}}else this.processActions.indexOf(e.proceedAction)<0&&(this.processActions.push(e.proceedAction),this.processActionsAddOn.push({action:e.proceedAction,remarks:e.remarks||!1,passwordAccess:e.passwordAccess||!1,confirm:e.confirm||!1}))}),e.blocks.forEach(e=>{e.id===this.selectedProcess.activityId&&("Forward"===this.selectedProcess.lastAction&&"REPLY"===e.settings.forwardedUserAction?(this.processActions=[],this.processActionsAddOn=[],this.processActions.push("Reply to "+this.selectedProcess.transaction_createdByEmail),this.processActionsAddOn.push({action:"Reply to "+this.selectedProcess.transaction_createdByEmail,remarks:!0,passwordAccess:!1,confirm:!1}),this.customReply=!0):(e.settings.userReply&&-1===this.processActions.indexOf("Reply")&&(this.processActions.push("Reply to "+this.selectedProcess.lastActionStageName),this.userReply=!0),e.settings.toInitiator&&-1===this.processActions.indexOf("To Requester")&&(this.processActions.push("To Requester"),this.toRequester=!0),e.settings.internalForward&&(this.isTenantGOTO()?this.processActions.push("Assign"):this.processActions.push("Forward"),this.internalForward.proceed=!0,this.internalForward.users=[],this.internalForward.groups=[],e.settings.internalForwardUser&&e.settings.internalForwardUser.length&&e.settings.internalForwardUser.forEach(e=>{let t=this.userList.filter(t=>t.value==e);t.length&&this.internalForward.users.push({id:this.$nano.id(),label:t[0].label,value:e})}),e.settings.internalForwardGroup&&e.settings.internalForwardGroup.length&&e.settings.internalForwardGroup.forEach(e=>{let t=this.groupList.filter(t=>t.value==e);t.length&&this.internalForward.groups.push({id:this.$nano.id(),label:t[0].label,value:e})}))),this.userSignature=e.settings.userSignature,e.settings.fileSettings&&e.settings.fileSettings.fileCheckList.length&&(this.checkList=e.settings.fileSettings.fileCheckList,this.checkList.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1})))}),this.selectedProcess.userType&&"SUPERUSER"===this.selectedProcess.userType&&this.processActions.push("Force Close")}else"sent"===this.selectedNode&&(this.isTenantGOTO()?this.selectedProcess.transaction_createdBy===this.$store.state.session.id&&(this.processActions=[],this.processActions.push("Rollback")):"http://demo.ezofis.com"!==origin&&"http://52.172.32.88"!==origin||6===this.selectedWorkflow.id&&this.selectedProcess.transaction_createdBy===this.$store.state.session.id&&(this.processActions=[],this.processActions.push("Rollback")));this.selectedWorkflow.wFormId&&0===Object.keys(this.form).length&&await this.getForm(),this.getTaskList()}s&&(("inbox"===this.selectedNode||"common"===this.selectedNode||"payment"===this.selectedNode||this.myInboxShow)&&this.selectedProcess.hasTicketMultiUser?(console.log(this.selectedProcess),this.fullView=!0):this.fullView=!0)},async releaseReservedRequest(e){let t={workflowId:e.id,processId:e.processId,activityId:e.activityId,isLock:!1};const{error:s}=await b["t"].updateRequestReserved(t);s&&this.$alert.error(s)},async updateRequestReserved(){let e={workflowId:this.selectedProcess.id,processId:this.selectedProcess.processId,activityId:this.selectedProcess.activityId,isLock:!0};const{error:t}=await b["t"].updateRequestReserved(e);t?this.$alert.error(t):(this.requestForLockModal=!1,this.selectedProcess.ticketLockedBy=this.$store.state.session.id,this.fullView=!0)},async getAppConnection(){this.jiraConnect=!1;const{error:e,payload:t}=await b["j"].getJiraConnection({filterBy:[]});e?this.$alert.error(e):t.forEach(e=>{"jira"===e.cloudName&&this.jiraAccounts.push(e)})},async getUserMyInbox(){const{error:e,payload:t}=await b["t"].getUserMyInbox();e?this.$alert.error(e):t&&(this.myInboxCount=Number(t))},async getUserWorkflowTest(){this.refreshTree=!0,this.$store.commit("showLoadingBarPage");const{error:e,payload:t}=await b["t"].getUserWorkflowTest();this.$store.commit("hideLoadingBarPage"),e?this.$alert.error(e):t.length&&(this.workflowList=t)},async getUserWorkflow(){this.refreshTree=!0,this.$store.commit("showLoadingBarPage");const{error:e,payload:t}=await b["t"].getUserWorkflow();this.$store.commit("hideLoadingBarPage"),e?this.$alert.error(e):t.length&&(this.workflowList=t)},async getMyInboxListGOTO(){1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[],this.loadingBarInbox=!0);let e={sortBy:this.sortBy,filterBy:this.filterBy,itemsPerPage:this.itemsPerPage,currentPage:this.currentPage};const{error:t,payload:s}=await b["t"].getMyInboxList(e,this.selectedWorkflow.id);this.loadingBarInbox=!1,t?this.$alert.error(t):(1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[]),this.totalItems=0,s.data.forEach(e=>{e.key?this.totalItems<e.totalCount&&(this.totalItems=e.totalCount):this.totalItems=s.meta.totalItems;let t=[],i=[];if(e.key&&e.value.length){let s=JSON.parse(this.selectedWorkflow.flowJson);s.rules.forEach(s=>{if(s.fromBlockId===e.value[0].activityId){let e="",i="";switch(s.proceedAction){case"Forward":case"Reply":case"Assign":e="mdi-arrow-right",i="orange";break;case"Approve":case"Complete":case"Rightsize":e="mdi-check",i="positive";break;case"Reject":case"Terminate":e="mdi-close",i="red";break;default:e="mdi-arrow-left",i="primary";break}t.push({id:this.$nano.id(),name:s.proceedAction,icon:e,color:i})}}),s.blocks.forEach(s=>{s.id===e.value[0].activityId&&(s.settings.formEditPartialAccess&&(i=s.settings.formEditControls),s.settings.internalForward&&(this.internalForward.proceed=!0,this.internalForward.users=[],this.internalForward.groups=[],t.push({id:this.$nano.id(),name:"Forward",icon:"mdi-arrow-right",color:"orange"})))})}1===this.currentPage&&this.groupKey.push({name:e.key,checked:!1,expand:!0,actions:t,actionFields:i,totalCount:e.totalCount,checkboxRequired:!0}),e.value.forEach(t=>{this.workflowRequestList.push({key:e.key,...t,checked:!1,starred:!1,visible:!0,checkboxRequired:!0})})}))},removeTimestampFromString(e){return e.replace(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z/,"").trim()},async getMyInboxList(){this.dashboard=!1;let e=this.listedData.map(e=>({id:this.$nano.id(),label:e.name,filterJson:JSON.parse(e.filterJson),dashboard:!1}));e.forEach(e=>{const t=e.filterJson[0].node.split("-");let s=t[0],i="",a="",o=this.filterBy;if(o.length){for(let e=0;e<o.length;e++){let t=o[e];if("id"in t&&delete t["id"],Array.isArray(t.filters))for(let e=0;e<t.filters.length;e++){let s=t.filters[e];"string"===typeof s.value&&(s.value=s.value.toLowerCase()),"id"in s&&delete s["id"]}}i=JSON.stringify(o,null,2)}else o.length||(i=JSON.stringify(o));let r=JSON.parse(e.filterJson[0].filters);if(r.length){for(let e=0;e<r.length;e++){let t=r[e];if("id"in t&&delete t["id"],Array.isArray(t.filters))for(let e=0;e<t.filters.length;e++){let s=t.filters[e];"string"===typeof s.value&&(s.value=s.value.toLowerCase()),"id"in s&&delete s["id"]}}a=JSON.stringify(r,null,2)}else r.length||(a=e.filterJson[0].filters);let n=this.removeTimestampFromString(e.label);const l=n.split(" ");let c=l.slice(0,-1).join(" ").trim();"My Inbox"===c&&s===this.selectedNode&&a===i&&(this.dashboard=!0)}),1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[],this.loadingBarInbox=!0);let t={sortBy:this.sortBy,filterBy:this.filterBy,itemsPerPage:this.itemsPerPage,currentPage:this.currentPage};const{error:s,payload:i}=await b["t"].getMyInboxList(t);this.loadingBarInbox=!1,s?this.$alert.error(s):(1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[]),this.totalItems=i.meta.totalItems,i.data.forEach(e=>{let t=[],s=[];if(e.key&&e.value.length){this.selectedWorkflow=this.workflowList.find(t=>t.id==e.workflowId);let i=JSON.parse(this.selectedWorkflow.flowJson);i.rules.forEach(s=>{if(s.fromBlockId===e.value[0].activityId){let e="",i="";switch(s.proceedAction){case"Forward":case"Reply":e="mdi-arrow-right",i="orange";break;case"Approve":case"Complete":case"Rightsize":e="mdi-check",i="positive";break;case"Reject":case"Terminate":e="mdi-close",i="red";break;default:e="mdi-arrow-left",i="primary";break}t.push({id:this.$nano.id(),name:s.proceedAction,icon:e,color:i})}}),i.blocks.forEach(i=>{i.id===e.value[0].activityId&&(i.settings.formEditPartialAccess&&(s=i.settings.formEditControls),i.settings.internalForward&&(this.internalForward.proceed=!0,this.internalForward.users=[],this.internalForward.groups=[],t.push({id:this.$nano.id(),name:"Forward",icon:"mdi-arrow-right",color:"orange"})))})}let i=!1;this.isTenantGOTO()&&(i=!0),1===this.currentPage&&this.groupKey.push({name:e.key,checked:!1,expand:!0,actions:t,actionFields:s,totalCount:e.totalCount,checkboxRequired:i}),e.value.forEach(t=>{t.value.forEach(t=>{this.workflowRequestList.push({key:e.key,...t,checked:!1,starred:!1,visible:!0,checkboxRequired:i})})})}))},async getCommonInbox(){1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[],this.loadingBarInbox=!0);let e={sortBy:this.sortBy,filterBy:this.filterBy,itemsPerPage:this.itemsPerPage,currentPage:this.currentPage};const{error:t,payload:s}=await b["t"].getCommonList(this.selectedWorkflow.id,e);this.loadingBarInbox=!1,t?this.$alert.error(t):(1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[]),s.meta.totalItems&&(this.totalItems=s.meta.totalItems,s.data.forEach(e=>{1===this.currentPage&&this.groupKey.push({name:e.key,checked:!1,expand:!0,totalCount:e.totalCount}),e.value.forEach(t=>{this.workflowRequestList.push({key:e.key,...t,checked:!1,starred:!1,visible:!0})})})))},async getInboxListTest(){1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[],this.loadingBarInbox=!0);let e={sortBy:this.sortBy,filterBy:this.filterBy,itemsPerPage:this.itemsPerPage,currentPage:this.currentPage};const{error:t,payload:s}=await b["t"].getInboxListTest(this.selectedWorkflow.id,e);this.loadingBarInbox=!1,t?this.$alert.error(t):(1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[]),s.meta.totalItems&&(this.totalItems=0,s.data.forEach(e=>{this.totalItems+=e.totalCount;let t=[],s=[];if(e.key&&e.value.length){let i=JSON.parse(this.selectedWorkflow.flowJson);i.rules.forEach(s=>{if(s.fromBlockId===e.value[0].activityId){let e="",i="";switch(s.proceedAction){case"Forward":case"Reply":e="mdi-arrow-right",i="orange";break;case"Approve":case"Complete":case"Rightsize":e="mdi-check",i="positive";break;case"Reject":case"Terminate":e="mdi-close",i="red";break;default:e="mdi-arrow-left",i="primary";break}t.push({id:this.$nano.id(),name:s.proceedAction,icon:e,color:i})}}),i.blocks.forEach(i=>{i.id===e.value[0].activityId&&(i.settings.formEditPartialAccess&&(s=i.settings.formEditControls),i.settings.internalForward&&(this.internalForward.proceed=!0,this.internalForward.users=[],this.internalForward.groups=[],t.push({id:this.$nano.id(),name:"Assign",icon:"mdi-arrow-right",color:"orange"})))})}let i=!1;this.isTenantGOTO()&&(i=!0),1===this.currentPage&&this.groupKey.push({name:e.key,checked:!1,expand:!0,actions:t,actionFields:s,totalCount:e.totalCount,checkboxRequired:i}),e.value.forEach(t=>{this.workflowRequestList.push({key:e.key,...t,checked:!1,starred:!1,visible:!0,checkboxRequired:i})})})))},async getInboxList(){1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[],this.loadingBarInbox=!0);let e={sortBy:this.sortBy,filterBy:this.filterBy,itemsPerPage:this.itemsPerPage,currentPage:this.currentPage};const{error:t,payload:s}=await b["t"].getInboxList(this.selectedWorkflow.id,e);this.loadingBarInbox=!1,t?this.$alert.error(t):(1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[]),s.meta.totalItems&&(this.totalItems=0,s.data.forEach(e=>{this.totalItems+=e.totalCount;let t=[],s=[];if(e.key&&e.value.length){let i=JSON.parse(this.selectedWorkflow.flowJson);i.rules.forEach(s=>{if(s.fromBlockId===e.value[0].activityId){let e="",i="";switch(s.proceedAction){case"Forward":case"Reply":case"Assign":e="mdi-arrow-right",i="orange";break;case"Approve":case"Complete":case"Rightsize":e="mdi-check",i="positive";break;case"Reject":case"Terminate":e="mdi-close",i="red";break;default:e="mdi-arrow-left",i="primary";break}t.push({id:this.$nano.id(),name:s.proceedAction,icon:e,color:i})}}),i.blocks.forEach(i=>{i.id===e.value[0].activityId&&(i.settings.formEditPartialAccess&&(s=i.settings.formEditControls),i.settings.internalForward&&(this.internalForward.proceed=!0,this.internalForward.users=[],this.internalForward.groups=[],t.push({id:this.$nano.id(),name:"Assign",icon:"mdi-arrow-right",color:"orange"})))})}let i=!1;this.isTenantGOTO()&&(i=!0),1===this.currentPage&&(this.isTenantArmgroup()&&(t=[]),this.groupKey.push({name:e.key,checked:!1,expand:!0,actions:t,actionFields:s,totalCount:e.totalCount,checkboxRequired:i})),e.value.forEach(t=>{i=!1,this.isTenantArmgroup()&&"szS6B-q1x9acpB83rP6jT"===t.activityId&&(i=!0),this.workflowRequestList.push({key:e.key,...t,checked:!1,starred:!1,visible:!0,checkboxRequired:i,expandSubWorkflow:!1})})})))},async getSentListTest(){1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[],this.loadingBarInbox=!0);let e={sortBy:this.sortBy,filterBy:this.filterBy,itemsPerPage:this.itemsPerPage,currentPage:this.currentPage};const{error:t,payload:s}=await b["t"].getSentListTest(this.selectedWorkflow.id,e);this.loadingBarInbox=!1,t?this.$alert.error(t):(1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[]),s&&(1===this.currentPage&&this.groupKey.push({name:"",checked:!1,expand:!0}),this.totalItems=s.meta.totalItems,s.data.length&&s.data[0].value.forEach(e=>{this.workflowRequestList.push({key:"",...e,starred:!1,visible:!0})})))},async getSentList(){1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[],this.loadingBarInbox=!0);let e={sortBy:this.sortBy,filterBy:this.filterBy,itemsPerPage:this.itemsPerPage,currentPage:this.currentPage};const{error:t,payload:s}=await b["t"].getSentList(this.selectedWorkflow.id,e);this.loadingBarInbox=!1,t?this.$alert.error(t):(1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[]),s&&(1===this.currentPage&&this.groupKey.push({name:"",checked:!1,expand:!0}),this.totalItems=s.meta.totalItems,s.data.length&&s.data[0].value.forEach(e=>{this.workflowRequestList.push({key:"",...e,starred:!1,visible:!0,expandSubWorkflow:!1})})))},async getCompletedListTest(){1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[],this.loadingBarInbox=!0);let e={sortBy:this.sortBy,filterBy:this.filterBy,itemsPerPage:this.itemsPerPage,currentPage:this.currentPage,filterValue:this.selectedCompletedNode};const{error:t,payload:s}=await b["t"].getCompletedListTest(this.selectedWorkflow.id,e);if(this.loadingBarInbox=!1,t)this.$alert.error(t);else if(1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[]),s){var i;if(1===this.currentPage&&this.groupKey.push({name:"",checked:!1,expand:!0}),this.totalItems=s.meta.totalItems,this.selectedCompletedNode)this.totalItems=null===(i=this.selectedWorkflow.completedInfo.find(e=>e.value===this.selectedCompletedNode))||void 0===i?void 0:i.totalCount;s.data.length&&s.data[0].value.forEach(e=>{this.workflowRequestList.push({key:"",...e,starred:!1,visible:!0})})}},async getCompletedList(){1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[],this.loadingBarInbox=!0);let e={sortBy:this.sortBy,filterBy:this.filterBy,itemsPerPage:this.itemsPerPage,currentPage:this.currentPage,filterValue:this.selectedCompletedNode};const{error:t,payload:s}=await b["t"].getCompletedList(this.selectedWorkflow.id,e);if(this.loadingBarInbox=!1,t)this.$alert.error(t);else if(1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[]),s){var i;if(1===this.currentPage&&this.groupKey.push({name:"",checked:!1,expand:!0}),this.totalItems=s.meta.totalItems,this.selectedCompletedNode)this.totalItems=null===(i=this.selectedWorkflow.completedInfo.find(e=>e.value===this.selectedCompletedNode))||void 0===i?void 0:i.totalCount;s.data.length&&s.data[0].value.forEach(e=>{this.workflowRequestList.push({key:"",...e,starred:!1,visible:!0,expandSubWorkflow:!1})})}},async getPaymentList(){1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[],this.loadingBarInbox=!0);let e={filterBy:this.filterBy,itemsPerPage:this.itemsPerPage,currentPage:this.currentPage};const{error:t,payload:s}=await b["t"].getPaymentList(this.selectedWorkflow.id,e);this.loadingBarInbox=!1,t?this.$alert.error(t):(1===this.currentPage&&(this.groupKey=[],this.workflowRequestList=[]),s.meta.totalItems&&(this.totalItems=0,s.data.forEach(e=>{this.totalItems+=e.totalCount;let t=[],s=[];if(e.key&&e.value.length){let i=JSON.parse(this.selectedWorkflow.flowJson);i.rules.forEach(s=>{if(s.fromBlockId===e.value[0].activityId){let e="",i="";switch(s.proceedAction){case"Forward":case"Reply":e="mdi-arrow-right",i="orange";break;case"Approve":case"Complete":case"Rightsize":e="mdi-check",i="positive";break;case"Reject":case"Terminate":e="mdi-close",i="red";break;default:e="mdi-arrow-left",i="primary";break}t.push({id:this.$nano.id(),name:s.proceedAction,icon:e,color:i})}}),i.blocks.forEach(i=>{i.id===e.value[0].activityId&&(i.settings.formEditPartialAccess&&(s=i.settings.formEditControls),i.settings.internalForward&&(this.internalForward.proceed=!0,this.internalForward.users=[],this.internalForward.groups=[],t.push({id:this.$nano.id(),name:"Assign",icon:"mdi-arrow-right",color:"orange"})))})}let i=!1;this.isTenantGOTO()&&(i=!0),1===this.currentPage&&this.groupKey.push({name:e.key,checked:!1,expand:!0,actions:t,actionFields:s,totalCount:e.totalCount,checkboxRequired:i}),e.value.forEach(t=>{this.workflowRequestList.push({key:e.key,...t,checked:!1,starred:!1,visible:!0,checkboxRequired:i})})})))},async getForm(){const{error:e,payload:t}=await b["g"].getForm(this.selectedWorkflow.wFormId);e?this.$alert.error(e):t&&(this.form=t)},async getRepository(){const{error:e,payload:t}=await b["p"].getRepository(this.selectedWorkflow.repositoryId);e?this.$alert.error(e):t&&(this.repository=t)},async requestAction(e,t=!0,s=!0){if(t){if(this.isTenantGOTO()&&"Assign"===e&&this.internalForward.proceed)return void(this.processForwardModal=!0);if("Forward"===e&&this.internalForward.proceed)return void(this.processForwardModal=!0);if(this.isTenantArmgroup()&&"Assign"===e)return void(this.processForwardModal=!0)}if(s){let t=this.processActionsAddOn.find(t=>t.action===e);if(t&&Object.keys(t).length){if(this.actionRemarks=t.remarks,this.actionPassword=t.passwordAccess,this.actionConfirm=t.confirm,this.actionPassword)return this.actionText=e,void(this.actionPasswordConfirm=!0);if(this.actionRemarks)return this.actionText=e,void(this.advancedCommentsSheet=!0);if(this.actionConfirm)return this.actionText=e,void(this.actionConfirmAlert=!0)}}let i,a=location.origin;this.isTenantGOTO()&&"Rollback"===e?this.forwardUsers.push(this.selectedProcess.transaction_createdBy):"http://demo.ezofis.com"!==a&&"http://52.172.32.88"!==a||6===this.selectedWorkflow.id&&this.forwardUsers.push(this.selectedProcess.transaction_createdBy),this.customReply&&e.indexOf("Reply")>-1&&(e="Reply",this.forwardUsers.push(this.selectedProcess.transaction_createdBy)),this.userReply&&e.indexOf("Reply")>-1?e="UserReply":this.toRequester&&"To Requester"===e&&(e="ToInitiator"),this.selectedProcess.review=e,i=!(this.isTenantArmgroup()||"https://trial.ezofis.com"===a&&12===this.$store.state.session.tenantId)||1!==this.selectedWorkflow.id||"Recommend to Approve"!==e&&"Recommend to Reject"!==e?{workflowId:this.selectedWorkflow.id,transactionId:this.selectedProcess.transactionId,review:e,formData:this.selectedProcess.formData,userIds:this.forwardUsers,groupIds:this.forwardGroups}:{workflowId:this.selectedWorkflow.id,transactionId:this.selectedProcess.transactionId,review:e,userIds:this.forwardUsers,groupIds:this.forwardGroups},console.log(i),this.$store.commit("showLoadingBarSave");const{error:o,payload:r}=await b["t"].processTransaction(i);this.$store.commit("hideLoadingBarSave"),o?this.$alert.error(o):(console.log(r),""===i.review?this.$alert.info(this.selectedProcess.requestNo+" data saved, awaiting your action to submit"):i.review.toLowerCase().indexOf("reject")>-1?this.$alert.danger(this.selectedProcess.requestNo+" Request Rejected Successfully"):this.$alert.success(this.selectedProcess.requestNo+" Request Processed"),this.selectedProcess={},this.processActions=[],this.processActionsAddOn=[],this.customReply=!1,this.userReply=!1,this.toRequester=!1,this.forwardUsers=[],this.fullView=!1,this.refresh())},async getUsers(){this.userList=[];const{error:e,payload:t}=await b["s"].getUserList();e?this.$alert.error("Error fetching users"):t&&t.map(e=>{this.isTenantArmgroup()?"1"!==e.id&&this.userList.push({id:this.$nano.id(),label:e.value,value:e.id,firstName:e.firstName,lastName:e.lastName||""}):e.id!==this.$store.state.session.id&&this.userList.push({id:this.$nano.id(),label:e.value,value:e.id})})},async getGroups(){const{error:e,payload:t}=await b["i"].getGroupList();e?this.$alert.error("Error fetching groups"):this.groupList=t&&t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))},async uploadFile(e){const t=e.target.files[0];if("text/csv"===t.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===t.type||"application/vnd.ms-excel"===t.type){const i=new FormData;i.append("formId",this.masterFormId),i.append("file",t);try{this.$store.commit("showLoadingBarSave");const e=await C()({url:"https://appuat.ezofis.com/ezofisapi/api/form/uploadMasterFile",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}});this.$store.commit("hideLoadingBarSave");const{status:t,data:s}=e;if(200!==t||!s)throw e;this.$alert.success("Data imported successfully")}catch(s){this.$alert.error("Error uploading file"),console.error(s)}this.dataImported=!0,e.target.value=""}else this.$alert.error("Please upload a csv/excel file")},async getTaskForm(){this.taskFormList=[],this.addTaskEnabled=!1;const{error:e,payload:t}=await b["g"].getForms({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"type",condition:"IS_EQUALS_TO",value:"Task",dataType:""}],groupCondition:""}],itemsPerPage:50,currentPage:1});if(e)return void this.$alert.error(e);const{data:s}=t;s.length&&s[0].value.length&&(this.addTaskEnabled=!0,s[0].value.forEach(e=>{this.taskFormList.push({id:e.id,label:e.name,value:e.id,repositoryId:e.repositoryId,formJson:e.formJson})}),this.taskFormList.length&&1===this.taskFormList.length&&(this.taskFormId=this.taskFormList[0].id,this.taskRepositoryId=this.taskFormList[0].repositoryId,this.addTaskForm=JSON.parse(this.taskFormList[0].formJson)))},async getTaskFormEntry(e,t){const{error:s,payload:i}=await b["g"].getFormEntry(e,t);if(s)this.$alert.error(s);else if(i.length){const e=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let t=[];for(const i of e)t.push(...i.fields);let s="",a="",o="",r="",n="",l="";t.forEach(e=>{switch(e.label){case"Task Name":s=i[0][e.id];break;case"Task Assign":a=i[0][e.id];break;case"Start Date":o=i[0][e.id];break;case"End Date":r=i[0][e.id];break;case"Priority":n=i[0][e.id];break;case"Task Status":l=i[0][e.id];break}}),this.taskEntries.push({id:i[0].itemid,name:s,assigned:a,startDate:o,endDate:r,priority:n,status:l})}},async getTaskList(){this.taskEntries=[];const{error:e,payload:t}=await b["t"].getTaskEntries(this.selectedWorkflow.id,this.selectedProcess.processId,{filterBy:[{filters:[{criteria:"createdBy",condition:"IS_EQUALS_TO",value:this.$store.state.session.id}]}]});if(e)this.$alert.error(e);else if(t.length){const e=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let s=[];for(const t of e)s.push(...t.fields);this.taskList=t,t.forEach(e=>{let t="",i="",a="",o="",r="",n="";s.forEach(s=>{switch(s.label){case"Task Name":t=e.entryInfo[0][s.id];break;case"Task Assign":i=e.entryInfo[0][s.id];break;case"Start Date":a=e.entryInfo[0][s.id];break;case"End Date":o=e.entryInfo[0][s.id];break;case"Priority":r=e.entryInfo[0][s.id];break;case"Task Status":n=e.entryInfo[0][s.id];break}}),this.taskEntries.push({id:e.entryInfo[0].itemid,name:t,assigned:i,startDate:a,endDate:o,priority:r,status:n})})}},async insertTaskEntry(e,t){const{error:s}=await b["t"].insertTaskEntry({workflowId:this.selectedWorkflow.id,processId:this.selectedProcess.processId,transactionId:this.selectedProcess.transactionId,wFormId:e,formEntryId:t});s?this.$alert.error(s):this.getTaskList()},async dataValidation(e,t=!0){const{error:s,payload:i}=await b["d"].armgroupMLValidation({filterBy:[{filters:[{criteria:"processId",condition:"IS_EQUALS_TO",value:e}],groupCondition:""}],mode:"BROWSE"});s?this.$alert.error(s):i.length?(this.dataValidationValues=i,t&&(this.dataValidationModal=!0)):(this.dataValidationValues=[],t&&this.$alert.info("Data not found"))},async showPaymentTable(){this.totalPayment=0,this.lumpsumAmount=0,this.benefitType="",this.numberOfApprovePayment=0,this.paymentTableValues=[],await this.getPaymentTable(),this.paymentTableModal=!0},async getPaymentTable(){this.isPaymentFound=!1;const{error:e,payload:t}=await b["d"].getPaymentTable({filterBy:[{filters:[{criteria:"processId",condition:"IS_EQUALS_TO",value:this.selectedProcess.processId}],groupCondition:""}],mode:"BROWSE"});e?this.$alert.error(e):t.length&&(this.paymentTableValues=t,this.isPaymentFound=!0)},export_Data(){if(this.paymentTableValues.length){let e=[];e=this.paymentTableValues.map(e=>({"Payment Number":e.paymentNumber,"Base Amount":e.baseAmount,"Claim Amount":e.claimAmount,"Cumulative Total":e.cumulativeTotal,Approval:e.approval,"Approved Date":e.approvedDate,"Payment Date":e.paymentDate,"Benefit Type":e.benefitType})),Object(Y["a"])(e)}},paymentApprove(){this.numberOfApprovePayment?this.paymentTableValues.forEach((e,t)=>{if(t<this.numberOfApprovePayment){e.approval="Approved",e.approvedDate=this.$day.newDate();let t=new Date;t.setDate(t.getDate()+1);let s=t.getMonth()+1;t.getMonth()+1<10&&(s="0"+t.getMonth());let i=t.getDate();t.getDate()<10&&(i="0"+t.getDate()),e.paymentDate=`${t.getFullYear()}-${s}-${i}`}else e.approval="",e.approvedDate="",e.paymentDate=""}):this.$alert.warning("Specify the number of payments to approve")},clearPaymentApprove(){this.numberOfApprovePayment=0,this.paymentTableValues.forEach(e=>{e.approval="",e.approvedDate=""})},updateApprovalDate(e){if("Approved"===this.paymentTableValues[e].approval){this.paymentTableValues[e].approvedDate=this.$day.newDate();let t=new Date;t.setDate(t.getDate()+1);let s=t.getMonth()+1;s<10&&(s="0"+s);let i=t.getDate();i<10&&(i="0"+i),this.paymentTableValues[e].paymentDate=`${t.getFullYear()}-${s}-${i}`}else this.paymentTableValues[e].approvedDate="",this.paymentTableValues[e].paymentDate=""},async paymentCalculation(){this.numberOfApprovePayment=0;const e=await this.$refs.form.validate();if(!e)return;this.paymentTableValues=[];let t=0,s=0;if(this.benefitType)switch(this.benefitType){case"Monthly":s=7;break;case"BiWeekly":case"SemiMonthly":s=13;break;case"Weekly":s=25;break}for(let i=1;i<=s;i++){let e=this.totalPayment,s=e+.2*e;if(t+=s,t+this.lumpsumAmount>4e3)return;this.paymentTableValues.push({paymentNumber:i,baseAmount:e.toFixed(2),claimAmount:s.toFixed(2),cumulativeTotal:t.toFixed(2),approval:"",approvedDate:"",paymentDate:"",benefitType:this.benefitType})}},async saveAdvancedComment(){if(this.advancedCommentText&&this.selectedProcess.processId){const{error:e}=await b["t"].insertProcessComment(this.selectedWorkflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:this.commentAction});if(e)return void this.$alert.error(e);this.advancedCommentText="",this.advancedCommentsSheet=!1,this.actionRemarks=!1,this.actionPassword=!1,this.requestAction(this.actionText,!1,!1),this.actionText=""}},async validatePassword(){const e=await this.$refs.passwordForm.validate();if(!e)return;this.isLoading=!0;const{error:t}=await b["a"].validatePassword({password:this.actionUserPassword});if(this.isLoading=!1,t)return console.log(t),void this.$alert.warning(t);this.actionUserPassword="",this.actionPasswordConfirm=!1,this.actionRemarks?this.advancedCommentsSheet=!0:(this.actionRemarks=!1,this.actionPassword=!1,this.requestAction(this.actionText,!1,!1),this.actionText="")},async updatePaymentTable(e){this.paymentTableValues.forEach(e=>{e.baseAmount=Number(e.baseAmount).toFixed(2)});let t={workflowId:this.selectedWorkflow.id,processId:this.selectedProcess.processId,paymentTableList:this.paymentTableValues};if(this.isPaymentFound){const{error:e}=await b["d"].updatePaymentTable(this.selectedProcess.processId,t);if(e)return void this.$alert.error(e)}else{const{error:e}=await b["d"].savePaymentTable(t);if(e)return void this.$alert.error(e)}e&&this.requestAction(e,!1,!1)},async getHideColumns(){this.hideColumns=[];const{error:e,payload:t}=await b["k"].getHideColumns(this.selectedWorkflow.id);e?this.$alert.error(e):t.length&&(this.hideColumns=t)},async getPortal(){const{error:e,payload:t}=await b["m"].getPortalList({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"workflowId",condition:"IS_EQUALS_TO",value:this.selectedWorkflow.id}],groupCondition:""}],hasSecurity:!1,itemsPerPage:50,currentPage:1});if(e)return void this.$alert.error(e);const{data:s,meta:i}=t;i.totalItems&&s.length&&s[0].value.length&&(this.portalAction=!0)},isJsonString(e){try{JSON.parse(e)}catch(t){return!1}return!0},async getFilterList(){this.loadingBarContent=!0;let e=this.$store.state.session.id.toString();const{error:t,payload:s}=await b["e"].getDashboardData({sortBy:this.sortBy,groupBy:"",filterBy:[{groupCondition:"",filters:[{criteria:"filterFrom",condition:"IS_EQUALS_TO",value:"workflowInbox"},{criteria:"createdBy",condition:"IS_EQUALS_TO",value:e}]}],currentPage:this.currentPage,itemsPerPage:this.itemsPerPage});if(this.loadingBarContent=!1,this.$store.commit("hideLoadingBarPage"),t)return void this.$alert.error(t);let i=s.data[0].value;this.listedData=i},deleteItem(){this.listedData.map(e=>{const t=JSON.parse(e.filterJson),s=t[0].node.split("-");let i=s[0];t[0].uId===this.selectedWorkflow.id&&i===this.selectedNode&&(this.isDeleteConfirmationVisible=!0,this.deleteData={id:e.id,name:e.name,description:e.description,filterJson:e.filterJson,filterFrom:e.filterFrom,createdAt:e.createdAt,modifiedAt:e.modifiedAt,createdBy:e.createdBy,modifiedBy:e.modifiedBy,isDeleted:!0})})},async save(){this.success=!1;let e=JSON.stringify(this.filterBy),t=[{uId:this.selectedWorkflow.id,refreshCount:this.refreshCount,node:this.nodeType,filters:e}],s=JSON.stringify(t),i=[this.$store.state.session.id],a=new Date,o=a.toISOString(),r="",n="";"inbox"===this.nodeType?(r="My Inbox  "+this.selectedNode+"  "+o,n="My Inbox"):(r=this.selectedWorkflow.name+"  "+this.selectedNode+"  "+o,n=this.selectedWorkflow.description);let l={name:r,description:n,filterJson:s,filterFrom:"workflowInbox",pinDashboard:!0,assignTo:JSON.stringify(i)};const{error:c}=await b["e"].saveDashboard(l);c?this.$alert.warning("The Name Already Registered "):(this.dashboard=!0,this.getFilterList(),this.$alert.success("Pinned SuccessFully"))}}},se=te,ie=(s("5b5f"),Object(N["a"])(se,i,a,!1,null,"7a62a6ae",null));t["default"]=ie.exports},"874f":function(e,t,s){"use strict";var i=s("7c4a"),a=s("0e40"),o=Object(i["a"])((function(e,t,s){return e+(s?" ":"")+Object(a["a"])(t)}));t["a"]=o},"87dc":function(e,t,s){"use strict";s("5f3d")},"8b55":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",e._g({class:{active:e.isActive,"is-full-width":e.isFullWidth},style:{color:e.isActive?e._color:""},attrs:{id:"tab"}},e.$listeners),[e._v(" "+e._s(e.label)+" ")])},a=[],o={name:"Tab",props:{label:{type:String,required:!0},isActive:{type:Boolean,default:!1},isFullWidth:{type:Boolean,default:!1},color:{type:String,default:"primary"}},computed:{_color(){return`var(--${this.color})`}}},r=o,n=(s("2ac6"),s("2877")),l=Object(n["a"])(r,i,a,!1,null,"f3c4783e",null);t["a"]=l.exports},"8fc9":function(e,t,s){},"91dd":function(e,t,s){},"94da":function(e,t,s){"use strict";s("e311")},"94f5":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",e._g({attrs:{id:"action"}},e.$listeners),[t("BaseIcon",{attrs:{name:e.icon,"inherit-color":""}}),t("div",{staticClass:"label"},[e._v(e._s(e.label))])],1)},a=[],o={name:"Action",props:{icon:{type:String,required:!0},label:{type:String,default:""}}},r=o,n=(s("a116"),s("2877")),l=Object(n["a"])(r,i,a,!1,null,"1619714d",null);t["a"]=l.exports},"970a":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));const i={CONTAINS:"CONTAINS",IS_EQUALS_TO:"IS_EQUALS_TO (=)",IS_NOT_EQUALS_TO:"IS_NOT_EQUALS_TO (!=)",IS_GREATER_THAN:"IS_GREATER_THAN (>)",IS_GREATER_THAN_OR_EQUALS_TO:"IS_GREATER_THAN_OR_EQUALS_TO (>=)",IS_LESSER_THAN:"IS_LESSER_THAN (<)",IS_LESSER_THAN_OR_EQUALS_TO:"IS_LESSER_THAN_OR_EQUALS_TO (<=)",IS_EMPTY:"IS_EMPTY ({})",IS_NOT_EMPTY:"IS_NOT_EMPTY (!{})",IS_ANY_OF:"IS_ANY_OF",IS_NOT_ANY_OF:"IS_NOT_ANY_OF",NOT_CONTAINS:"NOT_CONTAINS",STARTS_WITH:"STARTS_WITH",NOT_STARTS_WITH:"NOT_STARTS_WITH",ENDS_WITH:"ENDS_WITH",NOT_ENDS_WITH:"NOT_ENDS_WITH"};Object.freeze(i);var a=i,o=s("381b");function r(e){switch(e){case o["a"].NUMBER:case o["a"].DATE:case o["a"].TIME:case o["a"].DATE_TIME:case o["a"].COUNTER:case o["a"].CALCULATED:return[a.IS_EQUALS_TO,a.IS_NOT_EQUALS_TO,a.IS_GREATER_THAN,a.IS_GREATER_THAN_OR_EQUALS_TO,a.IS_LESSER_THAN,a.IS_LESSER_THAN_OR_EQUALS_TO,a.IS_EMPTY,a.IS_NOT_EMPTY,a.IS_ANY_OF,a.IS_NOT_ANY_OF,a.STARTS_WITH,a.NOT_STARTS_WITH,a.ENDS_WITH,a.NOT_ENDS_WITH];case o["a"].SHORT_TEXT:case o["a"].LONG_TEXT:case o["a"].TABLE:return[a.CONTAINS,a.IS_EQUALS_TO,a.IS_NOT_EQUALS_TO,a.IS_EMPTY,a.IS_NOT_EMPTY,a.IS_ANY_OF,a.IS_NOT_ANY_OF,a.NOT_CONTAINS,a.STARTS_WITH,a.NOT_STARTS_WITH,a.ENDS_WITH,a.NOT_ENDS_WITH];case o["a"].SINGLE_SELECT:case o["a"].MULTI_SELECT:case o["a"].MULTIPLE_CHOICE:return[a.CONTAINS,a.IS_EMPTY,a.IS_NOT_EMPTY,a.IS_EQUALS_TO,a.IS_NOT_EQUALS_TO,a.IS_ANY_OF,a.IS_NOT_ANY_OF];default:return[a.IS_EMPTY,a.IS_NOT_EMPTY,a.IS_EQUALS_TO,a.IS_NOT_EQUALS_TO]}}},9935:function(e,t,s){},"9bc4":function(e,t,s){"use strict";var i=s("b703"),a=s("09f4"),o=s("1549"),r=s("2250"),n=s("f842"),l=s("e8b2");function c(e){return Object(l["a"])(e)?void 0:e}var d=c,m=s("b4f1"),h=s("ca54"),u=s("f5fe"),p=s("ff51"),f=h["a"]?h["a"].isConcatSpreadable:void 0;function v(e){return Object(p["a"])(e)||Object(u["a"])(e)||!!(f&&e&&e[f])}var y=v;function b(e,t,s,i,a){var o=-1,r=e.length;s||(s=y),a||(a=[]);while(++o<r){var n=e[o];t>0&&s(n)?t>1?b(n,t-1,s,i,a):Object(m["a"])(a,n):i||(a[a.length]=n)}return a}var w=b;function g(e){var t=null==e?0:e.length;return t?w(e,1):[]}var C=g,k=s("500e"),I=s("c619");function S(e){return Object(I["a"])(Object(k["a"])(e,void 0,C),e+"")}var _=S,A=s("4e71"),T=1,x=2,F=4,L=_((function(e,t){var s={};if(null==e)return s;var l=!1;t=Object(i["a"])(t,(function(t){return t=Object(r["a"])(t,e),l||(l=t.length>1),t})),Object(n["a"])(e,Object(A["a"])(e),s),l&&(s=Object(a["a"])(s,T|x|F,d));var c=t.length;while(c--)Object(o["a"])(s,t[c]);return s}));t["a"]=L},"9d3d":function(e,t,s){"use strict";s("2a80")},"9db8":function(e,t,s){},"9e47":function(e,t,s){"use strict";function i(e,t,s,i){return Object.defineProperty(e,t,{get:s,set:i,enumerable:!0}),e}s.d(t,"a",(function(){return i}))},a116:function(e,t,s){"use strict";s("f6de")},a1da:function(e,t,s){"use strict";s("8fc9")},a4c9:function(e,t,s){"use strict";s("91dd")},a589:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{style:{width:e.formWidth},attrs:{id:"custom-form-view"}},[t("div",{staticClass:"header"},[t("div",{staticClass:"col-auto logo"},[t("img",{attrs:{src:e._logo}})]),e._m(0)]),t("div",{staticClass:"content"},[t("FormFieldLabel",{attrs:{label:"Claimant Search"}}),t("div",{staticClass:"content-wrapper"},[e.$q.screen.width>1280?t("div",{staticClass:"row q-mb-md"},[t("MultiSelectField",{staticClass:"col",attrs:{label:"lender",options:e.lenderList},model:{value:e.lender,callback:function(t){e.lender=t},expression:"lender"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"first name"},on:{enter:e.getData},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"last name"},on:{enter:e.getData},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),t("DateField",{staticClass:"col q-ml-md",attrs:{label:"DOB"},on:{enter:e.getData},model:{value:e.dob,callback:function(t){e.dob=t},expression:"dob"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"province"},on:{enter:e.getData},model:{value:e.province,callback:function(t){e.province=t},expression:"province"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"claim number"},on:{enter:e.getData},model:{value:e.claimNumber,callback:function(t){e.claimNumber=t},expression:"claimNumber"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"contract number"},on:{enter:e.getData},model:{value:e.contractNumber,callback:function(t){e.contractNumber=t},expression:"contractNumber"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"Ref. number"},on:{enter:e.getData},model:{value:e.refNumber,callback:function(t){e.refNumber=t},expression:"refNumber"}}),t("BaseButton",{staticClass:"searchBtn col-auto q-ml-md",attrs:{label:"Search",icon:"eva-search-outline"},on:{click:e.getData}})],1):t("div",[t("div",{staticClass:"row q-mb-md"},[t("MultiSelectField",{staticClass:"col",attrs:{label:"lender",options:e.lenderList},model:{value:e.lender,callback:function(t){e.lender=t},expression:"lender"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"first name"},on:{enter:e.getData},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"last name"},on:{enter:e.getData},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),t("DateField",{staticClass:"col q-ml-md",attrs:{label:"DOB"},on:{enter:e.getData},model:{value:e.dob,callback:function(t){e.dob=t},expression:"dob"}})],1),t("div",{staticClass:"row q-mb-md"},[t("TextField",{staticClass:"col",attrs:{label:"province"},on:{enter:e.getData},model:{value:e.province,callback:function(t){e.province=t},expression:"province"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"claim number"},on:{enter:e.getData},model:{value:e.claimNumber,callback:function(t){e.claimNumber=t},expression:"claimNumber"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"contract number"},on:{enter:e.getData},model:{value:e.contractNumber,callback:function(t){e.contractNumber=t},expression:"contractNumber"}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"Ref. number"},on:{enter:e.getData},model:{value:e.refNumber,callback:function(t){e.refNumber=t},expression:"refNumber"}}),t("BaseButton",{staticClass:"searchBtn col-auto q-ml-md",attrs:{label:"Search",icon:"eva-search-outline"},on:{click:e.getData}})],1)])]),t("div",{staticClass:"row q-mb-xs"},[t("div",{staticClass:"col q-mt-sm"},[t("FormFieldLabel",{attrs:{label:"Search Results"}})],1),t("q-space"),t("div",{staticClass:"col-auto"},[t("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:e.searchRow}})],1),t("div",{staticClass:"col-auto"},[t("BaseButton",{attrs:{label:"Add Contract and Send Package",icon:"eva-plus-outline",color:"gray"},on:{click:function(t){e.addContractSheet=!0}}})],1)],1),t("div",{staticClass:"content-wrapper tables"},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 360px)"}},[t("div",{staticClass:"row"},[t("FormFieldLabel",{attrs:{label:e.contractCount}}),t("BaseActionButton",{staticClass:"q-ml-sm small",attrs:{icon:e.contractExpand?"mdi-chevron-down":"mdi-chevron-up","is-flat":"","no-border":""},on:{click:function(t){e.contractExpand=!e.contractExpand}}})],1),e.contractExpand?t("table",[t("thead",[t("tr",[t("th",{staticClass:"sticky",staticStyle:{left:"0",width:"15px"}}),e._l(e.contractColumnsFilter,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),t("th",{staticClass:"sticky"})],2)]),t("tbody",[e._l(e.tableContracts,(function(s){return[t("tr",{key:s.id},[t("td",{staticClass:"sticky",staticStyle:{left:"0",width:"15px"}},[t("div",{staticClass:"row items-center justify-center"},[t("BaseButton",{attrs:{label:"Expand",icon:s.infoVisible?"eva-eye-off":"eva-eye",color:"secondary","is-flat":"","no-border":""},on:{click:function(e){s.infoVisible=!s.infoVisible}}})],1)]),e._l(e.contractColumnsFilter,(function(i){return t("td",{key:i.id},[i.editable?["email"===i.valueType?[t("ValidationProvider",{attrs:{name:i.name,rules:{required:i.required,email:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("TextField",{attrs:{"is-mandatory":"",error:a[0]},model:{value:s[i.name],callback:function(t){e.$set(s,i.name,t)},expression:"item[column.name]"}})]}}],null,!0)})]:"lender"===i.name?[t("ValidationProvider",{attrs:{name:i.name,rules:{required:i.required}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("SelectField",{attrs:{"is-mandatory":"",options:e.lenderList,error:a[0]},model:{value:s[i.name],callback:function(t){e.$set(s,i.name,t)},expression:"item[column.name]"}})]}}],null,!0)})]:[t("TextField",{attrs:{"is-mandatory":""},model:{value:s[i.name],callback:function(t){e.$set(s,i.name,t)},expression:"item[column.name]"}})]]:[e._t(i.name,(function(){return[e._v(" "+e._s(s[i.name])+" ")]}),{value:s[i.name],item:s})]],2)})),t("td",{staticClass:"sticky"},[t("div",{staticClass:"row justify-center"},[t("BaseButton",{staticClass:"col-auto q-ml-md",attrs:{label:"Send Package",icon:"mdi-file-send-outline",color:"secondary"},on:{click:function(t){return e.getProduct(s.id)}}})],1)])],2),s.infoVisible?t("tr",{key:"sub-"+s.id},[t("td",{attrs:{colspan:e.contractColumnsFilter.length+2}},[t("table",{staticClass:"subDetails"},[t("thead",e._l(e.contractColumnsInfo,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0),t("tbody",e._l(e.contractColumnsInfo,(function(i){return t("td",{key:i.id},[e._t(i.name,(function(){return[e._v(" "+e._s(s[i.name])+" ")]}),{value:s[i.name],item:s})],2)})),0)])])]):e._e()]}))],2)]):e._e(),t("div",{staticClass:"row"},[t("FormFieldLabel",{attrs:{label:e.claimCount}}),t("BaseActionButton",{staticClass:"q-ml-sm small",attrs:{icon:e.claimExpand?"mdi-chevron-down":"mdi-chevron-up","is-flat":"","no-border":""},on:{click:function(t){e.claimExpand=!e.claimExpand}}})],1),e.claimExpand?t("table",[t("thead",[t("tr",[t("th",{staticClass:"sticky",staticStyle:{left:"0",width:"15px"}}),e._l(e.claimColumnsFilter,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),t("th",{staticClass:"sticky"})],2)]),t("tbody",[e._l(e.tableClaims,(function(s){return[t("tr",{key:s.id},[t("td",{staticClass:"sticky",staticStyle:{left:"0",width:"15px"}},[t("div",{staticClass:"row items-center justify-center"},[t("BaseButton",{attrs:{label:"Expand",icon:s.infoVisible?"eva-eye-off":"eva-eye",color:"secondary","is-flat":"","no-border":""},on:{click:function(e){s.infoVisible=!s.infoVisible}}})],1)]),e._l(e.claimColumnsFilter,(function(i){return t("td",{key:i.id},["history"===i.name?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Claim History",expression:"'Claim History'",modifiers:{bottom:!0}}],attrs:{icon:"mdi-history",color:"secondary","is-flat":"","no-border":""},on:{click:function(t){return e.claimHistory(s)}}})]:i.editable?["email"===i.valueType?[t("ValidationProvider",{attrs:{name:i.name,rules:{required:i.required,email:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("TextField",{attrs:{"is-mandatory":"",error:a[0]},model:{value:s[i.name],callback:function(t){e.$set(s,i.name,t)},expression:"item[column.name]"}})]}}],null,!0)})]:[t("TextField",{attrs:{"is-mandatory":""},model:{value:s[i.name],callback:function(t){e.$set(s,i.name,t)},expression:"item[column.name]"}})]]:[e._t(i.name,(function(){return[e._v(" "+e._s(s[i.name])+" ")]}),{value:s[i.name],item:s})]],2)})),t("td",{staticClass:"sticky"},[t("div",{staticClass:"row justify-center q-mt-sm"},[e.claimStatus(s)?[t("div",{on:{click:function(t){return e.reopenClaim(s.id)}}},[t("q-chip",{staticClass:"chips pink-hover",attrs:{outline:"",color:"pink"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"mdi-arrow-top-right",color:"pink","text-color":"white"}}),e._v(" Re-open ")],1)],1)]:e._e(),t("div",{on:{click:function(t){return e.viewClaim(s.id)}}},[t("q-chip",{staticClass:"chips orange-hover",attrs:{outline:"",color:"orange"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-eye-outline",color:"orange","text-color":"white"}}),e._v(" View Claim ")],1)],1)],2)])],2),s.infoVisible?t("tr",{key:"sub-"+s.id},[t("td",{attrs:{colspan:e.claimColumnsFilter.length+2}},[t("table",{staticClass:"subDetails"},[t("thead",e._l(e.claimColumnsInfo,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0),t("tbody",e._l(e.claimColumnsInfo,(function(i){return t("td",{key:i.id},[e._t(i.name,(function(){return[e._v(" "+e._s(s[i.name])+" ")]}),{value:s[i.name],item:s})],2)})),0)])])]):e._e()]}))],2)]):e._e()])],1)],1),t("AddContract",{attrs:{value:e.addContractSheet,"lender-list":e.lenderList},on:{initiate:e.processInitiate,close:function(t){e.addContractSheet=!1}}}),t("Modal",{attrs:{width:"40vw",height:"60vh","has-footer":""},on:{input:function(t){e.productModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Choose Product")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"productModal"}},[t("MultiSelectField",{staticClass:"field",attrs:{label:"product","is-mandatory":"",options:e.productList},model:{value:e.products,callback:function(t){e.products=t},expression:"products"}})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Send Package",color:"primary"},on:{click:function(t){return e.processInitiate("")}}})]},proxy:!0}]),model:{value:e.productModal,callback:function(t){e.productModal=t},expression:"productModal"}}),t("Modal",{attrs:{width:"70vw"},on:{input:function(t){e.claimHistoryModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Claim History")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"claimHistory"}},[t("table",[t("thead",[t("tr",e._l(e.historyColumns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0)]),t("tbody",e._l(e.claimHistoryData,(function(s){return t("tr",{key:s.id},e._l(e.historyColumns,(function(i){return t("td",{key:i.id},[e._t(i.name,(function(){return[e._v(" "+e._s(s[i.name]||"-")+" ")]}),{value:s[i.name],item:s})],2)})),0)})),0)])])]},proxy:!0}],null,!0),model:{value:e.claimHistoryModal,callback:function(t){e.claimHistoryModal=t},expression:"claimHistoryModal"}}),t("Sheet",{attrs:{width:"100vw","no-padding":"","has-footer":""},on:{input:function(t){e.processSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.headerTitle)+" ")]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"footer row"},[t("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Update Claim Details",color:"secondary"},on:{click:function(t){return e.updateClaimDetails()}}})],1)]},proxy:!0}]),model:{value:e.processSheet,callback:function(t){e.processSheet=t},expression:"processSheet"}},[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t("div",{staticClass:"col"},[t("CustomProcessForm",{attrs:{"form-id":e.formId,panels:e.panels,"secondary-panels":e.secondaryPanels,"selected-process":e.selectedProcess,"is-readonly":!1,"check-list":e.checkList,"form-model":e.formModel,"form-fields":e.formFields,inbox:!0},on:{"update:checkList":function(t){e.checkList=t},"update:check-list":function(t){e.checkList=t}}})],1),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(s){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:s.label,expression:"tab.label",modifiers:{left:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(t){return e.showLinks(s.value)}}},[s.count?t("span",{staticClass:"badge"},[e._v(e._s(s.count)+" ")]):e._e()])]}))],2)])]),t("Sheet",{attrs:{width:"30vw","sub-actions":!1,"no-padding":""},on:{input:function(t){e.attachmentSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getAttachments()}}}):e._e()]},proxy:!0}]),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",[e._l(e.checkList,(function(s){return[s.name?[s.attach?t("div",{key:s.uid},[e._l(e.attachmentFilterCheckList(s.name),(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})]],2):t("div",[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e()],2),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])])]}))],2):t("div",{key:s.uid,staticClass:"checkList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),t("div",{staticClass:"col q-ml-sm"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[e._v(" "+e._s(s.name)+" ")]),s.required?t("div",{staticClass:"col-12 q-mt-sm"},[t("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[e._v(" Required ")])],1):e._e()])])])])]:e._e()]})),e._l(e.attachmentList,(function(s){return[e.isCheckList(s.name)?[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e(),e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})],1):e._e(),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)],2),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])])]:e._e()]}))],2)],1)]),t("Sheet",{attrs:{width:"30vw",height:"80vh","no-padding":""},on:{input:function(t){e.commentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getComments(0)}}})]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 160px)"}},[e._l(e.commentsList,(function(s,i){return[t("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===e.$store.state.session.id?"me":s.createdByEmail||s.externalCommentsby,text:[s.comments],"text-html":"",sent:s.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(s),"bg-color":s.createdBy===e.$store.state.session.id?"primary-1":"secondary-1"},scopedSlots:e._u([{key:"avatar",fn:function(){return[s.embedFileList&&s.embedFileList.length?t("div",{staticClass:"file-icons"},[t("FileIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.embedFileList[0].fileName,expression:"row.embedFileList[0].fileName",modifiers:{top:!0}}],key:"Icon-"+i,staticClass:"file-icon q-mr-sm",attrs:{"mime-type":e.fileType(s.embedFileList[0].fileName)}})],1):e._e()]},proxy:!0}],null,!0)})]}))],2)],1),t("div",{staticClass:"col borderTop"},[t("div",{staticClass:"row q-ma-sm"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto","margin-right":"8px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm comment-actions",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm comment-actions",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])])]),t("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(t){e.mailTransactionSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Mail Transactions ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getMailTransactions()}}})]},proxy:!0}]),model:{value:e.mailTransactionSheet,callback:function(t){e.mailTransactionSheet=t},expression:"mailTransactionSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("div",{staticClass:"q-pl-sm"},[t("Tabs",{attrs:{tabs:e.mailTabs},model:{value:e.mailTab,callback:function(t){e.mailTab=t},expression:"mailTab"}})],1),"OUTGOING"===e.mailTab?[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[e._l(e.outgoingMails,(function(s){return[t("div",{key:"outgoing"+s.id,staticClass:"mailTransactionList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(s.subject)+" ")])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),t("div",{staticClass:"col-auto"},[e._v(e._s(s.email))])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(e.$day.format(s.createdAt,!0))+" ")])])]),t("div",{staticClass:"col-auto q-mr-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.showMailAttachments(s)}}},[s.attachmentCount?t("span",{staticClass:"badge"},[e._v(e._s(s.attachmentCount)+" ")]):e._e()])],1)])])]}))],2)]:e._e(),"INCOMING"===e.mailTab?[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[e._l(e.incomingMails,(function(s){return[t("div",{key:"incoming"+s.id,staticClass:"mailTransactionList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(s.subject)+" ")])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),t("div",{staticClass:"col-auto"},[e._v(e._s(s.email))])]),t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),t("div",{staticClass:"col-auto"},[e._v(" "+e._s(e.$day.format(s.createdAt,!0))+" ")])])]),t("div",{staticClass:"col-auto q-mr-sm"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(t){return t.stopPropagation(),e.showMailAttachments(s)}}},[s.attachmentCount?t("span",{staticClass:"badge"},[e._v(e._s(s.attachmentCount)+" ")]):e._e()])],1)])])]}))],2)]:e._e()],2)]),t("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(t){e.mailAttachmentSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Mail Attachments ")]},proxy:!0}]),model:{value:e.mailAttachmentSheet,callback:function(t){e.mailAttachmentSheet=t},expression:"mailAttachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 200px)"}},[e._l(e.mailAttachmentList,(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openAttachmentFile(s)}}},[e._v(" "+e._s(s.name)+" ")])]),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])]}))],2)],1)]),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[e.selectedFile.formJsonId?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:e.getLabel(e.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:e._e(),t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])],2)]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myAttachmentFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])]),e.historyProcessId?t("ProcessHistory",{attrs:{"process-id":e.historyProcessId,"selected-process":e.selectedProcess},on:{close:function(t){e.historyProcessId=0}}}):e._e(),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Post Comments",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}})],1)},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"col q-mr-xl text-center"},[t("div",{staticClass:"title-1"},[e._v("Request Submission")]),t("div",{staticClass:"description"},[e._v("To submit the Claim Request")])])}],o=(s("caad"),s("14d9"),s("1b0d")),r=s("7bb1"),n=s("be3f"),l=s("3445"),c=s("b3d1"),d=s("c3d2"),m=s("12b8"),h=s("53c1"),u=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,width:"30vw",height:"70vh","has-footer":""},on:{input:e.closeSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Add Contract")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-pa-md"},[t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"field-wrapper"},[t("ValidationProvider",{attrs:{name:"First Name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{staticClass:"q-mb-sm",attrs:{label:"First Name","is-mandatory":"",error:s[0]},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}})]}}])}),t("ValidationProvider",{attrs:{name:"Last Name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{staticClass:"q-mb-sm",attrs:{label:"Last Name","is-mandatory":"",error:s[0]},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}})]}}])}),t("ValidationProvider",{attrs:{name:"DOB",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateField",{staticClass:"q-mb-sm",attrs:{label:"DOB","is-mandatory":"",error:s[0]},model:{value:e.dob,callback:function(t){e.dob=t},expression:"dob"}})]}}])}),t("NumberField",{staticClass:"q-mb-sm",attrs:{label:"Current Age","is-mandatory":"","is-readonly":""},model:{value:e.currentAge,callback:function(t){e.currentAge=t},expression:"currentAge"}}),t("ValidationProvider",{attrs:{name:"Email",rules:{required:!0,email:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{staticClass:"q-mb-sm",attrs:{label:"Email","is-mandatory":"",error:s[0]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})]}}])}),t("TextField",{staticClass:"q-mb-sm",attrs:{label:"Loan Number"},model:{value:e.loanNumber,callback:function(t){e.loanNumber=t},expression:"loanNumber"}}),t("ValidationProvider",{attrs:{name:"Product",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("MultiSelectField",{staticClass:"q-mb-sm",attrs:{label:"Product","is-mandatory":"",options:e.productList,error:s[0]},model:{value:e.products,callback:function(t){e.products=t},expression:"products"}})]}}])}),t("ValidationProvider",{attrs:{name:"Lender",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{staticClass:"q-mb-sm",attrs:{label:"Lender","is-mandatory":"",options:e.lenderList,error:s[0]},model:{value:e.lender,callback:function(t){e.lender=t},expression:"lender"}})]}}])})],1)])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Save and Send Package",color:"primary"},on:{click:e.createContract}})]},proxy:!0}])})},p=[],f=s("381e"),v=s("ad54"),y={name:"AddContract",components:{ValidationObserver:r["a"],ValidationProvider:r["b"],Sheet:f["a"],TextField:c["a"],DateField:h["a"],NumberField:v["a"],MultiSelectField:d["a"],SelectField:m["a"]},props:{value:{type:Boolean,default:!1},lenderList:{type:Array,default:()=>[]}},data(){return{firstName:"",lastName:"",dob:"",currentAge:0,email:"",loanNumber:"",products:["Involuntary Unemployment"],productList:[{id:this.$nano.id(),label:"Critical Illness",value:"Critical Illness"},{id:this.$nano.id(),label:"Disability",value:"Disability"},{id:this.$nano.id(),label:"Involuntary Unemployment",value:"Involuntary Unemployment"},{id:this.$nano.id(),label:"Life",value:"Life"},{id:this.$nano.id(),label:"Lifetime Milestone",value:"Lifetime Milestone"},{id:this.$nano.id(),label:"Sickness or Injury",value:"Sickness or Injury"},{id:this.$nano.id(),label:"Unpaid Family Leave",value:"Unpaid Family Leave"}],lender:""}},watch:{dob:{deep:!0,immediate:!0,handler(){this.dob?this.currentAge=this.calculateAge(this.dob):this.currentAge=0}}},methods:{closeSheet(){this.$emit("close")},reset(){this.firstName="",this.lastName="",this.dob="",this.currentAge=0,this.email="",this.loanNumber="",this.products=["Involuntary Unemployment"],this.lender=""},calculateAge(e){if(!e)return;const t=new Date;if(new Date(e)>t)return"";const s=t-new Date(e),i=Math.floor(s/864e5);return Math.floor(i/365.25)},async createContract(){const e=await this.$refs.form.validate();if(!e)return;this.$store.commit("showLoadingBar");let t={firstName:this.firstName,lastName:this.lastName,dob:this.dob,loanNumber:this.loanNumber,product:this.products};const{error:s}=await o["d"].createContract(t);this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):(t.lender=this.lender,t.currentAge=this.currentAge,t.email=this.email,this.$emit("initiate",t),this.reset(),this.closeSheet())}}},b=y,w=s("2877"),g=Object(w["a"])(b,u,p,!1,null,null,null),C=g.exports,k=s("6a70"),I=s("b94d"),S=s("fa1f"),_=s("a7d2"),A=s("dd90"),T=s("c52a"),x=s("8505"),F=s("6df3"),L=s("695e"),P={name:"CustomForm",components:{ValidationProvider:r["b"],ExpandableSearch:n["a"],FormFieldLabel:l["a"],TextField:c["a"],MultiSelectField:d["a"],SelectField:m["a"],DateField:h["a"],AddContract:C,Modal:k["a"],Sheet:f["a"],Tabs:I["a"],FileIcon:S["a"],CustomProcessForm:T["a"],ProcessHistory:x["a"],TextAreaField:F["a"],TextBuilderField:L["a"]},props:{workflowId:{type:Number,default:0},workflow:{type:Object,default:()=>{}},formId:{type:[String,Number],default:0},panels:{type:Array,default:()=>[]},secondaryPanels:{type:Array,default:()=>[]},saveAction:{type:String,default:""},workflowFormModel:{type:Object,default:()=>{}},actions:{type:Array,default:()=>[]},requestPrefix:{type:String,default:""},mlPrediction:{type:String,default:""},formFields:{type:Array,default:()=>[]},generatePDF:{type:Number,default:0}},data(){return{form:null,formWidth:"100%",lender:[],firstName:"",lastName:"",dob:"",province:"",claimNumber:"",contractNumber:"",refNumber:"",contractColumns:[{id:this.$nano.id(),name:"firstName",label:"First Name",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"lastName",label:"Last Name",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"loanNumber",label:"Loan Number",subLabel:"Loan No.",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"dob",label:"DOB",subLabel:"",type:"NORMAL",editable:!1,valueType:"date",main:!0,visible:!0},{id:this.$nano.id(),name:"currentAge",label:"Current Age",subLabel:"",type:"NORMAL",editable:!1,valueType:"number",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"policyNumber",label:"Policy Number",subLabel:"Group Policy",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"email",label:"Email",subLabel:"Email ID",type:"NORMAL",editable:!0,valueType:"email",required:!0,main:!0,visible:!0},{id:this.$nano.id(),name:"address1",label:"Address1",subLabel:"Address",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"address2",label:"Address2",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"city",label:"City",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"province",label:"Province",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"postalCode",label:"Postal Code",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"phone",label:"Phone",subLabel:"Phone No.",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"startDate",label:"Start Date",subLabel:"Loan Start Date",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"endDate",label:"End Date",subLabel:"Loan End Date",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"cancelDate",label:"Cancel Date",subLabel:"Cancellation Date",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"contractNumber",label:"Contract Number",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"product",label:"Product",subLabel:"Benefit Claimed",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"loanNumber",label:"Loan No.",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1},{id:this.$nano.id(),name:"paymentFrequency",label:"Payment Freq",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1},{id:this.$nano.id(),name:"term",label:"Term",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1},{id:this.$nano.id(),name:"remitDate",label:"Last Remitted Date",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1},{id:this.$nano.id(),name:"reason",label:"Reason",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1}],claimColumns:[{id:this.$nano.id(),name:"claimsStoreLoanNumber",label:"Claims Store Loan Number",store:"Loan Number",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimNumber",label:"Claim Number",store:"Claim Number",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimantFirstName",label:"Claimant First Name",store:"First Name",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimantLastName",label:"Claimant Last Name",store:"Last Name",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimantDOB",label:"Claimant DOB",store:"DOB",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimantEmail",label:"Claimant Email",store:"Email",type:"NORMAL",editable:!0,main:!0},{id:this.$nano.id(),name:"claimStatus",label:"Claim Status",store:"",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"history",label:"",store:"",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"branchNumber",label:"Branch Number",store:"",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"claimDate",label:"Claim Date",store:"",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"receiveDate",label:"Receive Date",store:"",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"recommendation",label:"Recommendation",store:"",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"product",label:"Product",store:"Product",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"claimantCity",label:"Claimant City",store:"City",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"claimantProv",label:"Claimant Prov",store:"Province",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"currentAge",label:"Current Age",store:"Current Age",type:"NORMAL",editable:!1,main:!1}],tableContracts:[],tableContractsData:[],tableClaims:[],tableClaimsData:[],contractExpand:!0,claimExpand:!0,selectedContract:{},selectedClaim:{},search:"",addContractSheet:!1,productModal:!1,products:[],productList:[{id:this.$nano.id(),label:"Critical Illness",value:"Critical Illness"},{id:this.$nano.id(),label:"Disability",value:"Disability"},{id:this.$nano.id(),label:"Involuntary Unemployment",value:"Involuntary Unemployment"},{id:this.$nano.id(),label:"Life",value:"Life"},{id:this.$nano.id(),label:"Lifetime Milestone",value:"Lifetime Milestone"},{id:this.$nano.id(),label:"Sickness or Injury",value:"Sickness or Injury"},{id:this.$nano.id(),label:"Unpaid Family Leave",value:"Unpaid Family Leave"}],fieldsModel:{},historyColumns:[{id:this.$nano.id(),name:"claimNumber",label:"Claim Number"},{id:this.$nano.id(),name:"status",label:"Status"},{id:this.$nano.id(),name:"date",label:"Date"},{id:this.$nano.id(),name:"note",label:"Note"}],claimHistoryData:[],claimHistoryModal:!1,lenderList:[],totalItems:0,itemsPerPage:500,currentPage:1,contractDataResult:!1,claimDataResult:!1,selectedProcess:{},processSheet:!1,headerTitle:"",tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"mail transaction",value:"MAIL",icon:"mdi-email-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0}],mailTabs:[{id:this.$nano.id(),label:"outgoing",value:"OUTGOING",count:0},{id:this.$nano.id(),label:"incoming",value:"INCOMING",count:0}],mailTab:"OUTGOING",attachmentSheet:!1,commentsSheet:!1,mailTransactionSheet:!1,commentText:"",commentsList:[],attachmentList:[],mailTransactionList:[],mailAttachmentSheet:!1,mailAttachmentList:[],fileSheet:!1,selectedFile:{},formModel:{},historyProcessId:0,checkList:[],advancedCommentsSheet:!1,advancedCommentText:""}},computed:{isMaximized(){return"100%"===this.formWidth},_logo(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?s("651a"):s("bcdf")(`./name-${this.darkTheme?"dark":"light"}.png`)},contractCount(){return`Contracts (${this.tableContracts.length})`},claimCount(){return`Claims (${this.tableClaims.length})`},contractColumnsFilter(){return this.contractColumns.filter(e=>e.main&&e.visible)},contractColumnsInfo(){return this.contractColumns.filter(e=>!e.main&&e.visible)},claimColumnsFilter(){return this.claimColumns.filter(e=>e.main)},claimColumnsInfo(){return this.claimColumns.filter(e=>!e.main)},outgoingMails(){return this.mailTransactionList.filter(e=>"Outgoing"===e.emailType)},incomingMails(){return this.mailTransactionList.filter(e=>"Incoming"===e.emailType)}},watch:{},created(){let e=location.origin;"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId||"http://localhost:8080"===e?this.getLenderMaster(3):this.getLenderMaster(3056)},methods:{toggleWidth(){this.formWidth="100%"===this.formWidth?"720px":"100%"},calculateAge(e){if(!e)return;const t=new Date;if(new Date(e)>t)return"";const s=t-new Date(e),i=Math.floor(s/864e5);return Math.floor(i/365.25)},claimStatus(e){return e.claimStatus.indexOf("Declined")>-1||e.claimStatus.indexOf("Force Close")>-1},isArrayField(e){return["MULTIPLE_CHOICE","FILE_UPLOAD","MULTI_SELECT"].includes(e)},searchRow(e){e?(this.tableContracts=this.tableContractsData.filter(t=>{for(let s in t){let i=this.contractColumns.findIndex(e=>e.name===s);if(i>=0&&t[s]&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return t}}),this.tableClaims=this.tableClaimsData.filter(t=>{for(let s in t){let i=this.claimColumns.findIndex(e=>e.name===s);if(i>=0&&t[s]&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return t}})):(this.tableContracts=this.tableContractsData,this.tableClaims=this.tableClaimsData)},processInitiate(e){let t="",s="",i="";e?this.selectedContract=e:this.selectedContract.product=this.products;let a=[];this.selectedContract.product.length&&this.selectedContract.product.forEach(e=>{if(this.panels.length){if(this.selectedContract.policyNumber){let e=this.selectedContract.policyNumber.split("-");t=isNaN(e[1][2])?e[1].substring(0,3):e[1].substring(0,2)}else this.selectedContract.lender&&(t=this.selectedContract.lender);let a=this.lenderList.filter(e=>e.value===t);a.length&&(s=a[0].email,i=a[0].label),this.fieldsModel={},this.panels.forEach(t=>{if(t.fields.length)for(let a of t.fields)if("Lender Email"===a.label)this.fieldsModel[a.id]=s;else if("Lender Name"===a.label)this.fieldsModel[a.id]=i;else if("Initials1"===a.label){let e="";this.$store.state.session.firstName&&(e+=this.$store.state.session.firstName[0].toUpperCase()),this.$store.state.session.lastName?e+=this.$store.state.session.lastName[0].toUpperCase():e+=this.$store.state.session.firstName[1],this.fieldsModel[a.id]=e}else{let t=this.contractColumns.find(e=>e.label===a.label||e.subLabel===a.label);t&&("product"===t.name?this.fieldsModel[a.id]=e:this.fieldsModel[a.id]=this.selectedContract[t.name]||"")}})}a.push(this.fieldsModel)}),this.actions.length?this.initiateRequest(a,t,i,this.actions[0]):this.$alert.error("Process Configuration Error")},async initiateRequest(e,t,s,i){let a=[];if(e&&e.length)for(let r of e){let e={workflowId:this.workflow.id,review:"Save"===i?"":i,comments:this.commentsList,formData:{formId:this.formId,fields:r,formUpload:[]},fileIds:[],task:[],hasFormPDF:this.generatePDF,prefix:t,mlPrediction:s};this.$store.commit("showLoadingBarSave");const{error:n,payload:l}=await o["t"].processTransaction(e);if(this.$store.commit("hideLoadingBarSave"),this.saveAction="",this.fieldsModel={},n)return void this.$alert.error(n);a.push(l.requestNo)}a.length&&("Save"!==i?this.$alert.success(a.toString()+" Request Initiated"):this.$alert.success(a.toString()+" Request Initiated and Moved to your inbox")),this.$emit("refresh")},newClaim(e){let t="",s="",i="";this.selectedClaim=this.tableClaims.find(t=>t.id===e),this.panels.length&&this.panels.forEach(e=>{if(!e.fields.length)return;if(this.selectedClaim.claimNumber){let e=this.selectedClaim.claimNumber.split("-");t=isNaN(e[1][2])?e[1].substring(0,3):e[1].substring(0,2)}let a=this.lenderList.filter(e=>e.value===t);a.length&&(s=a[0].email,i=a[0].label);for(let o of e.fields)if("Lender Email"===o.label)this.fieldsModel[o.id]=s;else if("Product"===o.label)this.fieldsModel[o.id]=this.selectedClaim.product.split(",")||"";else if("Lender Name"===o.label)this.fieldsModel[o.id]=i;else if("Initials"===o.label)this.fieldsModel[o.id]=t;else{let e=this.claimColumns.find(e=>e.store===o.label);e&&(this.fieldsModel[o.id]=this.selectedClaim[e.name]||"")}}),this.$emit("update:workflowFormModel",this.fieldsModel),this.$emit("update:requestPrefix",t),this.$emit("update:mlPrediction",i),this.actions.length?this.$emit("update:saveAction",this.actions[0]):this.$alert.error("Process Configuration Error")},async viewClaim(e){this.formModel={},this.selectedProcess={},this.selectedClaim=this.tableClaims.find(t=>t.id===e),this.$store.commit("showLoadingBarSave"),this.workflowProcessList=[];const{error:t,payload:s}=await o["o"].getWorkflowData(this.workflowId,{filterBy:[{groupCondition:"",filters:[{criteria:"requestNo",condition:"IS_EQUALS_TO",value:this.selectedClaim.claimNumber}]}],itemsPerPage:10,currentPage:1,mode:""});if(this.$store.commit("hideLoadingBarSave"),t)this.$alert.error(t);else if(s.data.length){if(s.data[0].value.length){this.selectedProcess=s.data[0].value[0],this.headerTitle=`${this.selectedProcess.requestNo} - ${this.selectedProcess.stage}`;let e=Object.keys(this.selectedProcess.formData.fields),t={};e.forEach(e=>{t[e]=this.validateTypeValue(this.selectedProcess.formData.fields[e])}),this.formModel=t,this.tabs.find(e=>{"COMMENTS"===e.value?e.count=this.selectedProcess.commentsCount:"ATTACHMENTS"===e.value&&(e.count=this.selectedProcess.attachmentCount)});let i=JSON.parse(this.workflow.flowJson);i.blocks.forEach(e=>{e.id===this.selectedProcess.activityId&&e.settings.fileSettings&&e.settings.fileSettings.fileCheckList.length&&(this.checkList=e.settings.fileSettings.fileCheckList,this.checkList.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1}))}),this.getComments(),this.getAttachments(),this.getMailTransactions(),this.processSheet=!0}}else this.$alert.info("No Details Found")},async reopenClaim(e){this.selectedClaim=this.tableClaims.find(t=>t.id===e),this.$store.commit("showLoadingBarSave");const{error:t}=await o["t"].reopenRequest(1,0,{requestNumber:this.selectedClaim.claimNumber});if(this.$store.commit("hideLoadingBarSave"),t)return console.log(t),void this.$alert.info(t);this.$alert.success(this.selectedClaim.claimNumber+" request re-initiated")},async getLenderMaster(e){this.$store.commit("showLoadingBar");const{error:t,payload:s}=await o["g"].getFormEntries(e,{mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[],itemsPerPage:0,currentPage:0});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);const{data:i}=s;this.lenderList=i[0].value.map(e=>({id:e.itemid,label:e["xPAsoGQlJ_xrm5f3EAeo6"],value:e["aeyluPk9Q8w6NaUs0HO8r"],email:e["XsPSz3d4dF2VSz1Svmymv"]}))},async getProduct(e){if(this.selectedContract=this.tableContracts.find(t=>t.id===e),Object.keys(this.selectedContract).length){let e="";if(this.selectedContract.policyNumber){let t=this.selectedContract.policyNumber.split("-");e=isNaN(t[1][2])?t[1].substring(0,3):t[1].substring(0,2)}else this.selectedContract.lender&&(e=this.selectedContract.lender);if(!e)return void this.$alert.warning("Policy Number Not Found");if(!this.selectedContract.email)return void this.$alert.warning("Required Claimant Email");this.products=[],this.selectedContract.product&&!this.products.includes(this.selectedContract.product)&&this.products.push(this.selectedContract.product),this.productModal=!0}},async claimHistory(e){this.claimHistoryData=[];let t="",s="";if(e.claimNumber){let s=e.claimNumber.split("-");t=isNaN(s[1][2])?s[1].substring(0,3):s[1].substring(0,2)}let i=this.lenderList.filter(e=>e.value===t);i.length&&(s=i[0].label),this.$store.commit("showLoadingBarSave");let a={claimNumber:e.claimNumber,lenderName:s};const{payload:r,error:n}=await o["d"].getClaimHistory(a);this.$store.commit("hideLoadingBarSave"),n?this.$alert.error(n):r.length?(this.claimHistoryData=r.map(e=>({id:e.ClaimStatusID,claimNumber:e.CSClaimNumber,status:e.ClaimStatus,date:this.$day.format(e.CSDate,!1),note:e.CSNote})),this.claimHistoryModal=!0):this.$alert.info("Claim history records not found")},getData(){this.tableContracts=[],this.tableContractsData=[],this.tableClaims=[],this.tableClaimsData=[],this.contractDataResult=!1,this.claimDataResult=!1,this.getContractData(),this.getClaimData()},async getContractData(){if(this.firstName||this.lastName||this.dob||this.province||this.contractNumber||this.refNumber){let e={};this.firstName&&(e["FirstName"]=this.firstName),this.lastName&&(e["LastName"]=this.lastName),this.dob&&(e["DOB"]=this.dob),this.province&&(e["Province"]=this.province),this.contractNumber&&(e["StoreLoanNumber"]=this.contractNumber),this.refNumber;let t="";if(this.lender.length){let e=this.lenderList.filter(e=>e.value===this.lender[0]);e.length&&(t=e[0].label)}this.$store.commit("showLoadingBarSave");let s={hublinkId:1,lenderName:t,payloadMapping:JSON.stringify(e),itemsPerPage:500,currentPage:1};const{payload:i,error:a}=await o["d"].getDataSync(s);if(this.$store.commit("hideLoadingBarSave"),this.contractDataResult=!0,a)return void("Connection Interrupted"===a?this.$alert.warning(a):this.$alert.error(a));const{data:r,meta:n}=i;n.totalItems?r.length&&r[0].value.length&&(this.tableContracts=r[0].value.map(e=>({id:this.$nano.id(),firstName:e.FirstName,lastName:e.LastName,loanNumber:e.LoanNumber,dob:e.DOB?e.DOB.split(" ")[0]:"",policyNumber:e.PolicyNumber,lender:"",email:e.Email||"",currentAge:e.DOB?this.calculateAge(e.DOB.split(" ")[0]):"",address1:e.Address1,address2:e.Address2,city:e.City,province:e.Province,postalCode:e.PostalCode,phone:e.Phone,startDate:e.StartDate?e.StartDate.split(" ")[0]:"",endDate:e.EndDate?e.EndDate.split(" ")[0]:"",cancelDate:e.CancelDate?e.CancelDate.split(" ")[0]:"",contractNumber:e.StoreLoanNumber,product:e.Product,paymentFrequency:e.PmtFrq,term:e.Term,remitDate:e.RemitDate?e.RemitDate.split(" ")[0]:"",reason:e.Comments,infoVisible:!1})),this.tableContractsData=this.tableContracts):this.claimDataResult&&0===this.tableClaimData.length&&this.$alert.info("No result found")}},async getClaimData(){if(this.firstName||this.lastName||this.dob||this.province||this.claimNumber||this.contractNumber){this.$store.commit("showLoadingBarSave");let e={};this.firstName&&(e["ClaimantFirstName"]=this.firstName),this.lastName&&(e["ClaimantLastName"]=this.lastName),this.dob&&(e["ClaimantDOB"]=this.dob),this.province&&(e["ClaimantProv"]=this.province),this.claimNumber&&(e["ClaimNumber"]=this.claimNumber),this.contractNumber&&(e["ClaimsStoreLoanNumber"]=this.contractNumber);let t="";if(this.lender.length){let e=this.lenderList.filter(e=>e.value===this.lender[0]);e.length&&(t=e[0].label)}let s={hublinkId:2,lenderName:t,payloadMapping:JSON.stringify(e),itemsPerPage:500,currentPage:1};const{payload:i,error:a}=await o["d"].getDataSync(s);if(this.$store.commit("hideLoadingBarSave"),this.claimDataResult=!0,a)return void this.$alert.error(a);const{data:r,meta:n}=i;n.totalItems?r.length&&r[0].value.length&&(this.tableClaims=r[0].value.map(e=>({id:this.$nano.id(),claimsStoreLoanNumber:e.ClaimsStoreLoanNumber,claimNumber:e.ClaimNumber,claimantFirstName:e.ClaimantFirstName,claimantLastName:e.ClaimantLastName,claimantDOB:e.ClaimantDOB?e.ClaimantDOB.split(" ")[0]:"",claimantEmail:e.ClaimantEmail,claimStatus:e.ClaimStatus||e.ClaimDecision||"",branchNumber:e.BranchNumber,claimDate:e.ClaimDate?e.ClaimDate.split(" ")[0]:"",receiveDate:e.ReceiveDate?e.ReceiveDate.split(" ")[0]:"",recommendation:e.Recommendation,product:e.Product,claimantCity:e.ClaimantCIty,claimantProv:e.ClaimantProv,currentAge:e.ClaimantDOB?this.calculateAge(e.ClaimantDOB.split(" ")[0]):"",infoVisible:!1})),this.tableClaimsData=this.tableClaims):this.contractDataResult&&0===this.tableContractsData.length&&this.$alert.info("No result found")}},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},fileSize(e){return Object(_["a"])(e)},openFile(e){e.loading?this.$alert.info("Please wait to complete the uploading"):(this.selectedFile=e,window.open(this.fileLink()))},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();if(Object(A["d"])(t)){let t="";return"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:"https://trial.ezofis.com"===e?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${t}`:"https://app.ezofis.com"===e?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${t}`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${t}`}return Object(A["b"])(t)||"http://52.172.32.88"!==e?`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`:`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`}},async showLinks(e){"ATTACHMENTS"===e?this.attachmentSheet=!0:"COMMENTS"===e?this.commentsSheet=!0:"HISTORY"===e&&this.selectedProcess.processId?this.historyProcessId=this.selectedProcess.processId:"PRINT"===e?this.selectedProcess.formData?window.open(`https://appuat.ezofis.com/ezofisapi/api/form/generatePdfPrint/${this.$store.state.session.tenantId}/${this.workflowId}/${this.selectedProcess.processId}/${this.formId}/${this.selectedProcess.formData.formEntryId}/1`):this.selectedProcess.itemData&&window.open(`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedProcess.itemData.repositoryId}/${this.selectedProcess.itemData.itemId}/2`):"TASK"===e?this.taskEntries.length?this.taskSheet=!0:this.$emit("addTask"):"VALIDATION"===e?this.$emit("validation",this.selectedProcess.processId):"PAYMENT_TABLE"===e?this.$emit("paymentTable"):"MAIL"===e?(this.getMailTransactions(),this.mailTransactionSheet=!0):"SUB_PROCESS"===e&&(this.subProcessSheet=!0)},lastActionDuration(e){const t=e.transaction_createdAt instanceof Date?e.transaction_createdAt:new Date(e.transaction_createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},validateTypeValue(e){if(e)try{var t=JSON.parse(e);if("object"===typeof t)return t}catch(s){return e}return e},attachmentFilterCheckList(e){return this.attachmentList.filter(t=>t.name.substring(0,t.name.lastIndexOf("."))===e||t.name.substring(0,t.name.lastIndexOf(".")).split("_")[0]===e)},isCheckList(e){let t=this.checkList.filter(t=>t.name===e.substring(0,e.lastIndexOf("."))||t.name===e.substring(0,e.lastIndexOf(".")).split("_")[0]);return!t.length},showMailAttachments(e){this.mailAttachmentList=[];let t=e.attachmentJson.split(",");t.forEach(t=>{let s=t.split("\\").pop();this.mailAttachmentList.push({id:this.$nano.id(),mailId:e.id,name:s,createdAt:e.createdAt})}),this.mailAttachmentSheet=!0},openAttachmentFile(e){let t=`https://appuat.ezofis.com/ezofisapi/api/client/viewAttachment/${this.$store.state.session.tenantId}/${e.mailId}/${e.name}`;window.open(t,"_blank")},fileMenuAction(e,t){this.selectedFile=e,this.documentAction(t,!0)},documentAction(e,t){if("Email_Sharing"===e);else if("Print"===e){if(this.selectedFile.name)if(t){let e="";if(this.selectedFile.initiate){let t=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(t=2),e=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${t}/1`}else e=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(e,"_blank")}else{let e=this.selectedFile.name.split(".").pop();Object(A["d"])(e)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myAttachmentFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===e){let e="";e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`,window.open(e,"_blank")}},async filePrintSession(){const{error:e}=await o["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});e&&this.$alert.error(e)},async getMailTransactions(){this.mailTransactionList=[],this.tabs.find(e=>{"MAIL"===e.value&&(e.count=0)});let e={filterBy:[]};const{error:t,payload:s}=await o["t"].getMailTransactions(this.workflowId,this.selectedProcess.processId,e);t?this.$alert.error(t):s.length&&(this.mailTransactionList=s,this.tabs.find(e=>{"MAIL"===e.value&&(e.count=this.mailTransactionList.length)}))},async getComments(e=0,t=0){this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=0)}),this.commentsList=[],e||t||(e=this.workflowId,t=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:s,payload:i}=await o["t"].getProcessComments(e,t);this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):i.length&&(this.commentsList=i,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}))},async getAttachments(e=0,t=0){this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=0)});let s=this.attachmentList.length;e||t||(e=this.workflowId,t=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:i,payload:a}=await o["t"].getAttachments(e,t);if(this.$store.commit("hideLoadingBar"),i)this.$alert.error(i);else if(a.length?(s!==a.length&&(this.attachmentList=a.map(e=>({...e,checked:!1}))),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)})):this.attachmentList=[],this.checkList.length){this.checkList.forEach(e=>{let t=this.attachmentList.filter(t=>{let s=t.name.substr(0,t.name.lastIndexOf("."));if(e.name===s||e.name===s.split("_")[0])return t});t.length?e.attach=!0:e.attach=!1});let e=location.origin;("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://localhost:8080"===e||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&(this.formCheckList=!0)}},async saveComment(){if(this.commentText&&this.selectedProcess.processId){const{error:e}=await o["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:2});if(e)return void this.$alert.error(e);this.commentText="",this.getComments()}},async saveAdvancedComment(){if(this.advancedCommentText){if(this.selectedProcess.processId){const{error:e}=await o["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:2});if(e)return void this.$alert.error(e)}this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}},async updateClaimDetails(){let e={};e={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"",formData:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,fields:this.formModel}};const{error:t}=await o["t"].processTransaction(e);t?this.$alert.error(t):(this.$alert.success("Claim details are updated"),this.processSheet=!1)}}},$=P,B=(s("ccc5"),s("2c91")),N=s("b047"),M=s("cb32"),D=s("8169"),q=s("93dc"),O=s.n(q),E=Object(w["a"])($,i,a,!1,null,"1b34e972",null);t["default"]=E.exports;O()(E,"components",{QSpace:B["a"],QChip:N["a"],QAvatar:M["a"],QChatMessage:D["a"]})},a809:function(e,t,s){"use strict";function i(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}t["a"]=i},a945:function(e,t,s){},abe1:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,width:"40vw"},on:{input:function(t){return e.$emit("input",!1)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Metadata ")]},proxy:!0}])},[t("div",{attrs:{id:"file-details"}},[t("div",{attrs:{id:"item-overview"}},[t("table",[t("tbody",e._l(e.fileData,(function(s){return t("tr",{key:s.name,staticClass:"tableRow"},[t("td",{staticClass:"label"},[e._v(e._s(s.name))]),"TABLE"!==s.type?t("td",{staticClass:"value"},[e._t(s.name,(function(){return[e._v(" "+e._s(s.value||"-")+" ")]}),{value:s.value})],2):t("td",{staticClass:"value",staticStyle:{padding:"8px"}},[e._t(s.name,(function(){return[s.value?[t("BaseActionButton",{attrs:{icon:"mdi-table","is-flat":"","no-border":""},on:{click:function(t){return e.showTable(s.name)}}})]:[t("BaseActionButton",{attrs:{icon:"mdi-table","is-flat":"","no-border":"","is-disabled":""}})]]}))],2)])})),0)])]),t("Modal",{attrs:{width:"60vw",height:"80vh"},on:{input:function(t){e.expandTableModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.tableHeader))]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"tableData"}},[e.tableData.cellvalues?[t("table",e._l(e.tableData.cellvalues,(function(s,i){return t("tr",{key:i},e._l(s,(function(s){return t("NoHeader"===s.kind?"td":"th",{key:`r${i}_c${s.columnindex}`,tag:"th"},[e._v(" "+e._s(s.cellvalue)+" ")])})),1)})),0)]:[t("table",[t("thead",[t("tr",e._l(e.tableData[0],(function(s,i){return t("th",{key:i},[e._v(" "+e._s(i)+" ")])})),0)]),t("tbody",e._l(e.tableData,(function(s,i){return t("tr",{key:i},e._l(s,(function(s,i){return t("td",{key:i},[e._v(" "+e._s(s)+" ")])})),0)})),0)])]],2)]},proxy:!0}]),model:{value:e.expandTableModal,callback:function(t){e.expandTableModal=t},expression:"expandTableModal"}})],1)])},a=[],o=s("381e"),r=s("6a70"),n={name:"FileDetails",components:{Sheet:o["a"],Modal:r["a"]},props:{value:{type:Boolean,required:!0},fileData:{type:Array,required:!0}},data(){return{expandTableModal:!1,tableHeader:"",tableData:[]}},methods:{showTable(e){this.expandTableModal=!0;let t=this.fileData.filter(t=>t.name===e);console.log(t),this.tableHeader=t[0].name,this.tableData=JSON.parse(t[0].value),console.log(this.tableData)}}},l=n,c=(s("4045"),s("2877")),d=Object(c["a"])(l,i,a,!1,null,"65baddda",null);t["a"]=d.exports},acf0:function(e,t,s){},addf:function(e,t,s){},ae23:function(e,t,s){"use strict";s("4ddc")},afe7:function(e,t,s){},b0ba:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("Sheet",{attrs:{width:"50vw","no-padding":""},on:{input:e.closeFormHistorySheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Form Entry History ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getFormHistory()}}})]},proxy:!0}]),model:{value:e.formHistorySheet,callback:function(t){e.formHistorySheet=t},expression:"formHistorySheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"\n          calc(100vh - 200px)\n        "}},[t("div",{attrs:{id:"history"}},[e.history.length?e._l(e.history,(function(s){return t("div",{key:s.id,staticClass:"entry"},[t("div",{staticClass:"header"},[e._v(" "+e._s(s.changes.length)+" "+e._s(s.changes.length>1?"Changes":"Change")+" ")]),t("div",{staticClass:"content"},[t("div",{staticClass:"changes-meta"},[t("div",[e._v(e._s(s.changedBy))]),t("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.changedAt))])],1),e._l(s.changes,(function(s,i){return t("div",{key:i+1,staticClass:"change"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),"isDeleted"===s.name?t("div",[Number(s.newValue)?t("span",{staticClass:"font-semibold"},[e._v(' "Deleted" ')]):t("span",{staticClass:"font-semibold"},[e._v('"Restored"')]),e._v(" the item ")]):s.oldValue?t("div",[e._v(" Modified "+e._s(s.name)+" from "),t("span",{staticClass:"font-semibold"},[e._v('"'+e._s(s.oldValue)+'"')]),e._v(" to "),t("span",{staticClass:"font-semibold"},[e._v('"'+e._s(s.newValue)+'"')])]):t("div",[e._v(" Assigned "),t("span",{staticClass:"font-semibold"},[e._v('"'+e._s(s.newValue)+'"')]),e._v(" as "+e._s(s.name)+" ")])],1)}))],2)])})):t("div",{staticClass:"no-history"},[e._v("No data found")])],2)])],1)])],1)},a=[],o=s("381e"),r=s("1b0d"),n={name:"FormEntryHistory",components:{Sheet:o["a"]},props:{value:{type:Boolean,default:!1},processId:{type:Number,required:!0},workflowId:{type:Number,required:!0}},data(){return{changes:[],history:[],formHistorySheet:!1}},watch:{value:{immediate:!0,handler(){this.value&&this.getFormHistory()}}},methods:{async getFormHistory(){this.formHistorySheet=!0,this.history=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["g"].formHistory(this.workflowId,this.processId);if(this.$store.commit("hideLoadingBar"),e)this.$alert.error(e);else if(t){let e=t;this.history=e.length&&e.map(e=>({id:this.$nano.id(),changedBy:e.modifiedBy,changedAt:this.$day.format(e.modifiedAt),changes:e.fields}))}},closeFormHistorySheet(){this.formHistorySheet=!1,this.$emit("update:value",!1)}}},l=n,c=(s("742a"),s("2877")),d=Object(c["a"])(l,i,a,!1,null,"231e188e",null);t["a"]=d.exports},b148:function(e,t,s){"use strict";s("7b7c")},b811:function(e,t,s){},b94d:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{style:{color:e._color},attrs:{id:"tabs"}},[e._l(e.tabs,(function(s){return t("Tab",{key:s.id,ref:"tab",refInFor:!0,attrs:{label:s.label,color:e.color,"is-full-width":e.isFullWidth,"is-active":s.value===e.value},on:{click:function(t){return e.handleClick(s)}}})})),t("div",{ref:"indicator",staticClass:"indicator"})],2)},a=[],o=s("8b55"),r={name:"Tabs",components:{Tab:o["a"]},props:{tabs:{type:Array,required:!0},value:{type:[String,Number],required:!0},color:{type:String,default:"primary"},isFullWidth:{type:Boolean,default:!1}},computed:{_color(){return`var(--${this.color})`}},watch:{value(){this.setIndicatorPosition()}},mounted(){this.setIndicatorPosition()},methods:{setIndicatorPosition(){const e=this.tabs.findIndex(e=>e.value===this.value),t=this.$refs.tab[e],s=t.$el.offsetLeft;this.$refs.indicator.style.left=s+"px";const i=t.$el.clientWidth;this.$refs.indicator.style.width=i+"px"},handleClick(e){e.value!==this.value&&this.$emit("input",e.value)}}},n=r,l=(s("40f9"),s("2877")),c=Object(l["a"])(n,i,a,!1,null,"48eb7e5e",null);t["a"]=c.exports},ba5a:function(e,t,s){"use strict";s("5042")},bb36:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess||e.isPortal?"30":"0","no-padding":""},on:{input:e.closeCommentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 30 seconds ")]):e._e(),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getComments(0)}}})]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:e.commentsSheetHeight}},[e._l(e.commentsList,(function(s,i){return[t("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===e.$store.state.session.id?"me":s.createdByEmail||s.externalCommentsby,text:[s.comments],"text-html":"",sent:s.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(s),"bg-color":s.createdBy===e.$store.state.session.id?"primary-1":"secondary-1"},scopedSlots:e._u([{key:"avatar",fn:function(){return[s.embedFileList&&s.embedFileList.length?t("div",{staticClass:"file-icons"},[t("FileIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:s.embedFileList[0].fileName,expression:"row.embedFileList[0].fileName",modifiers:{top:!0}}],key:"Icon-"+i,staticClass:"file-icon q-mr-sm",attrs:{"mime-type":e.fileType(s.embedFileList[0].fileName)}})],1):e._e()]},proxy:!0}],null,!0)})]}))],2)],1),"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess||e.isPortal?t("div",{staticClass:"col borderTop"},[t("div",{staticClass:"row"},[e.checkTenant()?[t("div",{staticClass:"col actions"},[e.attachmentList.length&&e.fileNames.length?t("div",{staticClass:"row select-action q-pa-sm action-container"},[t("CheckboxField",{staticClass:"q-pr-sm",class:e.attachComment?"col-auto":"col",attrs:{label:"Add Comment to PDF"},model:{value:e.attachComment,callback:function(t){e.attachComment=t},expression:"attachComment"}}),!e.selectedProcess.processId||"START"===e.selectedProcess.stageType||e.attachComment||e.isPortal?e._e():t("CheckboxField",{staticClass:"col-auto notify-cmd",attrs:{label:"Notify Initiator/Requester"},model:{value:e.notifyInitiator,callback:function(t){e.notifyInitiator=t},expression:"notifyInitiator"}}),e.attachComment?t("SelectField",{staticClass:"col field comment-attach attach-cmd",attrs:{"is-searchable":!0,options:e.fileNames},model:{value:e.selectedFileForAttach,callback:function(t){e.selectedFileForAttach=t},expression:"selectedFileForAttach"}}):e._e()],1):e._e(),!e.selectedProcess.processId||"START"===e.selectedProcess.stageType||!e.attachComment&&e.attachmentList.length&&e.fileNames.length||e.isPortal?e._e():t("CheckboxField",{staticClass:"col-12 q-pl-sm q-pb-sm q-pt-sm",class:e.notifyInitiatorClass,attrs:{label:"Notify Initiator/Requester"},model:{value:e.notifyInitiator,callback:function(t){e.notifyInitiator=t},expression:"notifyInitiator"}}),e.displayInternalPublic?t("SingleChoiceField",{staticClass:"action-container",class:{"internal-public":e.attachmentList.length>0,"col q-pa-sm":!0,"internal-public-margin":e.attachComment},attrs:{options:e.commentActions,"show-options-wrapper":!1,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e()],1)]:e._e(),e.isTenantGOTOComments()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.jiraCommentActions,"options-per-line":2},model:{value:e.jiraCommentAction,callback:function(t){e.jiraCommentAction=t},expression:"jiraCommentAction"}})]:e._e()],2),t("div",{staticClass:"row text-area-action q-ml-sm q-mr-sm"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto","margin-right":"8px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm comment-actions",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm comment-actions",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])]):e._e()]),t("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"red"},on:{input:function(t){e.errorModal=!1,e.errorMessage=""}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Error Message")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" "+e._s(e.errorMessage)+" ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Close",color:"red"},on:{click:function(t){e.errorModal=!1,e.errorMessage=""}}})]},proxy:!0}]),model:{value:e.errorModal,callback:function(t){e.errorModal=t},expression:"errorModal"}}),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.saveAction="",e.workflowFormModel={},e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[e.checkTenant()?[e.attachmentList.length&&e.fileNames.length?t("div",{staticClass:"row actions advance-cmd"},[t("CheckboxField",{staticClass:"col-auto q-pr-sm",staticStyle:{margin:"auto"},attrs:{label:"Add Comment to PDF"},model:{value:e.attachComment,callback:function(t){e.attachComment=t},expression:"attachComment"}}),e.attachComment?t("SelectField",{staticClass:"field comment-attach",attrs:{"is-searchable":!0,options:e.fileNames},model:{value:e.selectedFileForAttach,callback:function(t){e.selectedFileForAttach=t},expression:"selectedFileForAttach"}}):e._e(),e.selectedProcess.processId&&"START"!==e.selectedProcess.stageType&&!e.isPortal?t("CheckboxField",{staticClass:"col-auto q-pl-sm adv-notify-cmd",attrs:{label:"Notify Initiator/Requester"},model:{value:e.notifyInitiator,callback:function(t){e.notifyInitiator=t},expression:"notifyInitiator"}}):e._e()],1):e._e(),e.checkTenant()&&e.displayInternalPublic?t("SingleChoiceField",{staticClass:"actions q-mr-sm noborder",attrs:{options:e.commentActions,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}}):e._e()]:e._e(),e.isTenantGOTOComments()?[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.jiraCommentActions,"options-per-line":2},model:{value:e.jiraCommentAction,callback:function(t){e.jiraCommentAction=t},expression:"jiraCommentAction"}})]:e._e(),t("BaseButton",{attrs:{label:"Post Comments",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}})],1)},a=[],o=(s("14d9"),s("381e")),r=s("1b0d"),n=s("1c54"),l=s("6df3"),c=s("6a70"),d=s("695e"),m=s("869e"),h=s("12b8"),u=s("9234"),p=s("fa1f"),f={name:"Comments",components:{Sheet:o["a"],Confirm:n["a"],TextAreaField:l["a"],Modal:c["a"],TextBuilderField:d["a"],CheckboxField:m["a"],SelectField:h["a"],SingleChoiceField:u["a"],FileIcon:p["a"]},props:{value:{type:Boolean,default:!1},selectedProcess:{type:Object,default:()=>{}},workflow:{type:Object,default:()=>{}},selectedNode:{type:String,required:!0},initiateProcess:{type:Boolean,default:!1},formFields:{type:Array,default:()=>[]},attachmentList:{type:Array,default:()=>[]},workflowId:{type:Number,required:!0},actionComments:{type:Boolean,default:!1},fileNames:{type:Array,default:()=>[]},comments:{type:Array,default:()=>[]},displayInternalPublic:{type:Boolean,default:!1},isPortal:{type:Boolean,default:!1}},data(){return{commentsSheet:!1,commentText:"",commentsList:[],attachComment:!1,selectedFileForAttach:0,advancedCommentsSheet:!1,advancedCommentText:"",commentActions:[{id:this.$nano.id(),label:"Internal",value:2},{id:this.$nano.id(),label:"Public",value:1}],commentAction:2,jiraCommentActions:[{id:this.$nano.id(),label:"This resource",value:1},{id:this.$nano.id(),label:"All resource",value:2}],jiraCommentAction:1,errorMessage:"",errorModal:!1,successModal:!1,notifyInitiator:!1}},computed:{commentsSheetHeight(){return"inbox"===this.selectedNode||"payment"===this.selectedNode||"common"===this.selectedNode||this.initiateProcess||this.isPortal?this.checkCommentsOption()&&!this.isCustomizedWorkflow?this.attachmentList.length&&this.fileNames.length?this.attachComment&&this.displayInternalPublic?"calc(100vh - 270px)":this.attachComment&&!this.displayInternalPublic?"calc(100vh - 230px)":!this.attachComment&&this.displayInternalPublic?"calc(100vh - 225px)":"calc(100vh - 200px)":this.displayInternalPublic?"calc(100vh - 220px)":"START"===this.selectedProcess.stageType||this.isPortal?"calc(100vh - 150px)":"calc(100vh - 180px)":"calc(100vh - 150px)":""},notifyInitiatorClass(){return this.attachmentList.length&&this.fileNames.length?"":"action-container"}},watch:{value:{immediate:!0,handler(){this.commentsSheet=!0,this.commentsList=this.comments,this.commentsSheet&&this.selectedProcess.processId?this.commentsLoad=setInterval(()=>{this.getComments()},3e4):clearInterval(this.commentsLoad)}}},methods:{closeCommentsSheet(){this.commentsSheet=!1,this.$emit("update:comments",this.commentsList),this.$emit("commentsCount",this.commentsList.length),this.$emit("update:value",!1)},async getComments(e=0,t=0){this.commentsList=[],e||t||(e=this.workflowId,t=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:s,payload:i}=await r["t"].getProcessComments(e,t);this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):i.length&&(this.commentsList=i,this.$emit("commentsCount",this.commentsList.length))},async saveComment(){if(this.commentText){if(this.attachComment&&!this.selectedFileForAttach)return void this.$alert.warning("Select File To Attach");if(this.selectedProcess.processId){if(this.isTenantGOTO()&&this.selectedProcess.jiraIssueInfo.id&&2===this.jiraCommentAction){const{error:e,payload:t}=await r["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.commentText});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,t)}else{const{error:e,payload:t}=await r["t"].insertProcessComment(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:this.isPortal?1:this.commentAction,hasNotifytoInitiated:this.notifyInitiator,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,[t])}this.commentText="",this.clearAttach(),this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id,hasNotifytoInitiated:this.notifyInitiator,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})}),this.$emit("commentsCount",this.commentsList.length),this.commentText="",this.clearAttach()}},async saveAdvancedComment(){if(this.advancedCommentText){if(this.attachComment&&!this.selectedFileForAttach)return void this.$alert.warning("Select File To Attach");if(this.selectedProcess.processId){if(this.isTenantGOTO()&&this.selectedProcess.jiraIssueInfo.id&&2===this.jiraCommentAction){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t)}else{const{error:e,payload:t}=await r["t"].insertProcessComment(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:this.isPortal?1:this.commentAction,hasNotifytoInitiated:this.notifyInitiator,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(e)return void this.$alert.error(e);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,t)}this.advancedCommentText="",this.advancedCommentsSheet=!1,this.clearAttach(),this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.advancedCommentText="",this.advancedCommentsSheet=!1,this.$emit("commentsCount",this.commentsList.length);this.actionComments&&this.$emit("processRequest",!1,!1)}},clearAttach(){this.selectedFileForAttach=0,this.attachComment=!1,this.notifyInitiator=!1},async sendCommentsToJira(e,t,s){if(this.$store.commit("showLoadingBar"),1===this.jiraCommentAction){var i;let t=null===(i=this.formFields.find(e=>"Resource ID"===e.label))||void 0===i?void 0:i.value;e=this.selectedProcess.formData.fields[t]+","+e}e=`${this.$store.state.session.firstName} ${this.$store.state.session.lastName}: ${e}`;let a={cloudIntegrationId:this.jiraAccounts[0].id,url:this.selectedProcess.jiraIssueInfo.self,data_onpremise:{body:e},issueId:t,ezCommentId:s};const{error:o,payload:n}=await r["j"].insertJiraIssueComments(a);if(this.$store.commit("hideLoadingBar"),o){this.$alert.error("error posting comments to jira");let e=JSON.parse(o);return this.errorMessage=e.errorMessages,void(this.errorModal=!0)}console.log(n),this.jiraCommentAction=1},isTenantGOTO(){let e=location.origin;return("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e)&&2===this.$store.state.session.tenantId},checkCommentsOption(){return!this.isTenantArmgroup()&&(!this.isTenantGOTO()||!(!Object.keys(this.selectedProcess).length||!this.selectedProcess.jiraIssueInfo.id))},checkTenant(){return!this.isTenantArmgroup()||(this.commentAction=2,!1)},isTenantArmgroup(){let e=location.origin;return("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://localhost:80801"===e)&&3===this.$store.state.session.tenantId},isTenantGOTOComments(){return!!(Object.keys(this.selectedProcess).length&&this.isTenantGOTO()&&this.selectedProcess.jiraIssueInfo.id)},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const e=a/i[o];return s.format(Math.round(e),o)}},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)}}},v=f,y=(s("c5b7"),s("2877")),b=s("8169"),w=s("93dc"),g=s.n(w),C=Object(y["a"])(v,i,a,!1,null,null,null);t["a"]=C.exports;g()(C,"components",{QChatMessage:b["a"]})},bcdf:function(e,t,s){var i={"./name-dark.png":"cd22","./name-light.png":"00c2"};function a(e){var t=o(e);return s(t)}function o(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=o,e.exports=a,a.id="bcdf"},bcff:function(e,t,s){},be3f:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"search",expression:"'search'",modifiers:{top:!0}}],staticClass:"is-expanded",attrs:{id:"expandable-search"},on:{click:e.toggle}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-search"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],ref:"expandableSearch",attrs:{type:"text",placeholder:"Search"},domProps:{value:e.searchQuery},on:{keyup:function(t){return e.$emit("search",e.searchQuery)},blur:e.handleBlur,input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}})],1)},a=[],o={name:"ExpandableSearch",data(){return{isExpanded:!1,searchQuery:""}},methods:{toggle(){this.isExpanded=!this.isExpanded,this.isExpanded&&this.$refs.expandableSearch.focus()},handleBlur(){this.isExpanded=!1}}},r=o,n=(s("fdd5"),s("2877")),l=Object(n["a"])(r,i,a,!1,null,"29b72610",null);t["a"]=l.exports},bf55:function(e,t,s){"use strict";s("686b")},c187:function(e,t,s){"use strict";s("9935")},c52a:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{style:{width:e.formWidth},attrs:{id:"custom-process-form-view"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 130px)"}},[t("div",{staticClass:"content"},[t("div",{staticClass:"row"},[t("div",{staticClass:"q-pr-sm row",class:e.$q.screen.width>1200?"col-lg-6 col-md-6 col-sm-12":"col-lg-6 col-md-12 col-sm-12",style:e.inbox?"":"height:10px;"},[t("div",{staticClass:"col-12 header",class:e.inbox?"":"q-mb-sm"},[e._v(" Customer Information ")]),t("table",{staticClass:"col-12 q-mb-sm"},[t("tbody",[t("tr",[t("td",[e._v("Claimant Info")]),t("td",[t("SelectField",{staticClass:"custom-controls",attrs:{value:e.getModel("Claimant Info"),options:e.claimantInfoList,"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Claimant Info")},onBlur:function(t){return e.autoSave("Claimant Info")}}})],1),t("td",[e._v("First Name")]),t("td",[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("First Name"),highlight:e.checkHighlight("First Name"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"First Name")},onBlur:function(t){return e.autoSave("First Name")}}})],1),t("td",[e._v("Last Name")]),t("td",{attrs:{colspan:"2"}},[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Last Name"),highlight:e.checkHighlight("Last Name"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Last Name")},onBlur:function(t){return e.autoSave("Last Name")}}})],1)]),t("tr",[t("td",[e._v("DOB")]),t("td",[t("DateField",{staticClass:"custom-controls",attrs:{value:e.getModel("DOB"),highlight:e.checkHighlight("DOB"),"is-readonly":e.isReadonly||!e.fieldVerification,"maximum-validation":!0},on:{input:function(t){return e.updateModel(t,"DOB")},onBlur:function(t){return e.autoSave("DOB")}}})],1),t("td",[e._v("Current Age")]),t("td",[t("NumberField",{staticClass:"custom-controls",attrs:{value:e.getModel("Current Age"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Current Age")},onBlur:function(t){return e.autoSave("Current Age")}}})],1),t("td",[e._v("Age at DOC")]),t("td",[t("NumberField",{staticClass:"custom-controls",attrs:{value:e.getModel("Age at Doc"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Age at Doc")},onBlur:function(t){return e.autoSave("Age at Doc")}}})],1)]),t("tr",[t("td",[e._v("Address")]),t("td",{attrs:{colspan:"5"}},[t("TextAreaField",{attrs:{value:e.getModel("Address"),highlight:e.checkHighlight("Address"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Address")},onBlur:function(t){return e.autoSave("Address")}}})],1)]),t("tr",[t("td",[e._v("City")]),t("td",[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("City"),highlight:e.checkHighlight("City"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"City")},onBlur:function(t){return e.autoSave("City")}}})],1),t("td",[e._v("Province")]),t("td",[t("SelectField",{staticClass:"custom-controls",attrs:{value:e.getModel("Province"),options:e.provinceList,highlight:e.checkHighlight("Province"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Province")},onBlur:function(t){return e.autoSave("Province")}}})],1),t("td",[e._v("Postal Code")]),t("td",[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Postal Code"),highlight:e.checkHighlight("Postal Code"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Postal Code")},onBlur:function(t){return e.autoSave("Postal Code")}}})],1)]),t("tr",[t("td",[e._v("Phone No.")]),t("td",[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Phone No."),highlight:e.checkHighlight("Phone No."),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Phone No.")},onBlur:function(t){return e.autoSave("Phone No.")}}})],1),t("td",[e._v("Email ID")]),t("td",[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Email ID"),highlight:e.checkHighlight("Email ID"),"is-readonly":e.isReadonly||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Email ID")},onBlur:function(t){return e.autoSave("Email ID")}}})],1),t("td",[e._v("Name of Deceased")]),t("td",[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Name of Deceased"),"is-readonly":e.isReadonly||!e.isNameOfDeceasedEditable||!e.fieldVerification},on:{input:function(t){return e.updateModel(t,"Name of Deceased")},onBlur:function(t){return e.autoSave("Name of Deceased")}}})],1)])])]),"001f5CdkTDtjCDn3logTT"!==e.selectedProcess.activityId&&"szS6B-q1x9acpB83rP6jT"!==e.selectedProcess.activityId&&!e.isReadonly&&e.inbox?t("div",{staticClass:"col-12"},[e.isReadonly?e.fieldVerification?e._e():[t("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirmed",color:"green"}})]:[e.fieldVerification?[t("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirm",color:"orange"},on:{click:e.confirmCustomerInfo}})]:[t("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirmed",color:"green"}}),t("BaseButton",{staticClass:"custom-button q-mr-sm",staticStyle:{float:"right"},attrs:{label:"Edit",color:"orange"},on:{click:e.unConfirmCustomerInfo}})]]],2):e._e(),t("div",{staticClass:"header col-12",class:e.inbox?"":"q-mb-sm"},[e._v(" Loan Information ")]),t("table",{staticClass:"col-12 q-mb-sm loan-info"},[t("tbody",[t("tr",[t("td",[e._v("Group Policy")]),t("td",[e._v(e._s(e.getModel("Group Policy")||"-"))]),t("td",[e._v("Payment Frequency")]),t("td",[e._v(e._s(e.getModel("Payment Frequency")||"-"))])]),t("tr",[t("td",[e._v("Loan No.")]),t("td",[e._v(e._s(e.getModel("Loan No.")||"-"))]),t("td",[e._v("No. of Loan Payments")]),t("td",[e._v(" "+e._s(e.getModel("No. of Loan Payments")||"-")+" ")])]),t("tr",[t("td",[e._v("Loan Start Date")]),t("td",[e._v(e._s(e.getModel("Loan Start Date")||"-"))]),t("td",[e._v("Last Remitted Date")]),t("td",[e._v(e._s(e.getModel("Last Remitted Date")||"-"))])]),t("tr",[t("td",[e._v("Term")]),t("td",[e._v(e._s(e.getModel("Term")||"-"))]),t("td",[e._v("Cancellation Date")]),t("td",[e._v(e._s(e.getModel("Cancellation Date")||"-"))])]),t("tr",[t("td",[e._v("Loan End Date")]),t("td",[e._v(e._s(e.getModel("Loan End Date")||"-"))]),t("td",[e._v("Cancel Reason")]),t("td",[e._v(e._s(e.getModel("Cancel Reason")||"-"))])])])]),"001f5CdkTDtjCDn3logTT"!==e.selectedProcess.activityId&&"szS6B-q1x9acpB83rP6jT"!==e.selectedProcess.activityId&&!e.isReadonly&&e.inbox?t("div",{staticClass:"col-12"},[e.loanInfoVerify?e.loanInfoVerify?[t("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirmed",color:"green"}}),t("BaseButton",{staticClass:"custom-button q-mr-sm",staticStyle:{float:"right"},attrs:{label:"Edit",color:"orange"},on:{click:e.unConfirmLoanInfo}})]:e._e():[t("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirm",color:"orange"},on:{click:e.confirmLoanInfo}})]],2):e._e()]),t("div",{staticClass:"row",class:e.$q.screen.width>1200?"col-lg-6 col-md-6 col-sm-12":"col-lg-6 col-md-12 col-sm-12"},[t("div",{staticClass:"col-12 header q-mb-sm"},[e._v("Claim Information")]),t("div",{staticClass:"col-12 full-border q-pa-sm"},[t("table",{staticClass:"claim-info q-mb-sm table-content single-border"},[t("thead",[t("tr",[t("th",[e._v("Claim No.")]),t("th",[e._v("Reference No.")]),t("th",[e._v("Claim Date")]),t("th",[e._v("Claim Package Sent")])])]),t("tbody",[t("tr",[t("td",[e._v(e._s(e.getModel("Claim No.")||"-"))]),t("td",[e._v(e._s(e.getModel("Reference No.")||"-"))]),t("td",[t("DateField",{staticClass:"custom-controls",attrs:{value:e.getModel("Claim Date"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"Claim Date")},onBlur:function(t){return e.autoSave("Claim Date")}}})],1),t("td",[e._v(e._s(e.getModel("Claim Package Sent")||"-"))])])])]),t("table",{staticClass:"claim-info q-mb-sm table-content single-border"},[t("thead",[t("tr",[t("th",[e._v("Claim Received Date")]),t("th",[e._v("Processing Date")]),t("th",[e._v("Initials")]),t("th",[e._v("Language")])])]),t("tbody",[t("tr",[t("td",[e._v(e._s(e.getModel("Claim Received Date")||"-"))]),t("td",[e._v(e._s(e.getModel("Processing Date")||"-"))]),t("td",[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Initials"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"Initials")},onBlur:function(t){return e.autoSave("Initials")}}})],1),t("td",[t("SelectField",{staticClass:"custom-controls",attrs:{value:e.getModel("Language"),options:e.languageList,"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"Language")},onBlur:function(t){return e.autoSave("Language")}}})],1)])])]),t("table",{staticClass:"claim-info single-border"},[t("tbody",[t("tr",[t("td",[e._v("Benefit Claimed")]),t("td",{staticClass:"medium"},[t("SelectField",{staticClass:"custom-controls",attrs:{value:e.getModel("Benefit Claimed"),options:e._productList,"is-readonly":e.isReadonly||e.claimInfoVerify||!e.isChangeBenefitClaimed},on:{input:function(t){return e.updateModel(t,"Benefit Claimed")},onBlur:function(t){return e.autoSave("Benefit Claimed")}}})],1),t("td",[e._v("Loan Payment Amount")]),t("td",{staticClass:"medium"},[t("NumberField",{staticClass:"custom-controls",attrs:{value:e.getModel("Loan Payment Amount"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"Loan Payment Amount")},onBlur:function(t){return e.autoSave("Loan Payment Amount")}}})],1)]),t("tr",[t("td",[e._v("Reason/Cause")]),t("td",{staticClass:"medium"},[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Reason/Cause"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"Reason/Cause")},onBlur:function(t){return e.autoSave("Reason/Cause")}}})],1),t("td",[e._v("LPP Premium Amount")]),t("td",{staticClass:"medium"},[t("NumberField",{staticClass:"custom-controls",attrs:{value:e.getModel("LPP Premium Amount"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"LPP Premium Amount")},onBlur:function(t){return e.autoSave("LPP Premium Amount")}}})],1)]),t("tr",[t("td",[e._v("Claim Decision")]),t("td",{staticClass:"medium"},[t("TextField",{staticClass:"custom-controls",attrs:{value:e.getModel("Claim Decision"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"Claim Decision")},onBlur:function(t){return e.autoSave("Claim Decision")}}})],1),t("td",[e._v("Principal Balance at DOC")]),t("td",{staticClass:"medium"},[t("NumberField",{staticClass:"custom-controls",attrs:{value:e.getModel("Principal Balance At Doc"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"Principal Balance At Doc")},onBlur:function(t){return e.autoSave("Principal Balance At Doc")}}})],1)]),t("tr",[t("td",[e._v("Decline Reason")]),t("td",{staticClass:"medium"},[t("SelectField",{staticClass:"custom-controls",attrs:{value:e.getModel("Decline Reason"),options:e.declineReasonList,"is-readonly":!0},on:{input:function(t){return e.updateModel(t,"Decline Reason")},onBlur:function(t){return e.autoSave("Decline Reason")}}})],1),t("td",[e._v("LumpSum Principal Balance")]),t("td",{staticClass:"medium"},[t("NumberField",{staticClass:"custom-controls",attrs:{value:e.getModel("LumpSum Principal Balance"),"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){return e.updateModel(t,"LumpSum Principal Balance")},onBlur:function(t){return e.autoSave("LumpSum Principal Balance")}}})],1)]),t("tr",[t("td",{attrs:{colspan:"3"}},[t("MultipleChoiceField",{staticClass:"custom-controls no-border",attrs:{value:e.getModel("Authorization"),options:e.authorizationTypes,"options-per-line":3,"is-readonly":e.isReadonly||e.claimInfoVerify},on:{input:function(t){e.updateModel(t,"Authorization"),e.autoSave("Authorization")}}})],1),t("td",["001f5CdkTDtjCDn3logTT"!==e.selectedProcess.activityId&&"szS6B-q1x9acpB83rP6jT"!==e.selectedProcess.activityId&&!e.isReadonly&&e.inbox?[e.claimInfoVerify?e.claimInfoVerify?[t("BaseButton",{staticClass:"custom-button",staticStyle:{margin:"auto"},attrs:{label:"Confirmed",color:"green"}}),t("BaseButton",{staticClass:"custom-button",staticStyle:{margin:"auto","margin-top":"10px"},attrs:{label:"Edit",color:"orange"},on:{click:e.unConfirmClaimInfo}})]:e._e():[t("BaseButton",{staticClass:"custom-button",staticStyle:{margin:"auto"},attrs:{label:"Confirm",color:"orange"},on:{click:e.confirmClaimInfo}})]]:e._e()],2)])])])]),t("div",{staticClass:"col-12 q-mt-sm full-border q-pa-sm"},[t("div",{staticClass:"col header"},[e._v("Required Documents")]),t("MultipleChoiceField",{staticClass:"custom-controls q-mt-sm",attrs:{value:e.getModel("Required Documents"),options:e._documentCheckList,"options-per-line":3,"is-readonly":e.isReadonly},on:{input:function(t){e.updateModel(t,"Required Documents"),e.autoSave("Required Documents")}}})],1)])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col q-mt-sm"},[t("div",{staticClass:"q-pl-sm q-mb-sm"},[t("Tabs",{attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}})],1),"Claim Status"===e.tab?[e.claimStatusTotalItems?t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("Pagination",{staticClass:"custom-form-table",attrs:{"total-items":e.claimStatusTotalItems,"current-page":e.claimStatusCurrentPage,"items-per-page":e.claimStatusItemsPerPage},on:{"update:currentPage":function(t){e.claimStatusCurrentPage=t},"update:current-page":function(t){e.claimStatusCurrentPage=t},"update:itemsPerPage":function(t){e.claimStatusItemsPerPage=t},"update:items-per-page":function(t){e.claimStatusItemsPerPage=t},loadAll:e.loadAllClaimStatus}})],1),t("div",{staticClass:"col-auto q-mt-xs q-ml-sm"},[t("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:e.claimStatusSearchRow}})],1)]):e._e(),t("BaseScrollbar",{attrs:{height:"330px"}},[t("table",{staticClass:"tab-table table-content q-mt-sm",class:e.claimStatusTotalItems?"":"empty"},[t("thead",[t("tr",[e.inbox?t("th",{staticClass:"actions"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"add row",expression:"'add row'",arg:"top"}],staticClass:"q-ml-xs small",attrs:{color:"primary",icon:"eva-plus","no-border":"",size:"16px"},on:{click:e.addClaimStatus}})],1):e._e(),e._l(e.claimStatusColumns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])}))],2)]),t("tbody",e._l(e.claimStatusValues,(function(s,i){return t("tr",{key:"claimstatusrow"+i},[e.inbox?t("td",{staticClass:"actions"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"edit",expression:"'edit'",arg:"top"}],staticClass:"q-ml-xs small",attrs:{color:"secondary",icon:"mdi-square-edit-outline",size:"16px","is-flat":"","no-border":""},on:{click:function(t){return e.editClaimStatus(s)}}})],1):e._e(),e._l(e.claimStatusColumns,(function(i){return t("td",{key:i.id},[e._v(" "+e._s(s[i.name])+" ")])}))],2)})),0)])])]:"Daily Data Summary"===e.tab?[e.dailyDataStatusTotalItems?t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("Pagination",{staticClass:"custom-form-table",attrs:{"total-items":e.dailyDataStatusTotalItems,"current-page":e.dailyDataStatusCurrentPage,"items-per-page":e.dailyDataStatusItemsPerPage},on:{"update:currentPage":function(t){e.dailyDataStatusCurrentPage=t},"update:current-page":function(t){e.dailyDataStatusCurrentPage=t},"update:itemsPerPage":function(t){e.dailyDataStatusItemsPerPage=t},"update:items-per-page":function(t){e.dailyDataStatusItemsPerPage=t},loadAll:e.loadAllDailyDataStatus}})],1),t("div",{staticClass:"col-auto q-mt-xs q-ml-sm"},[t("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:e.dailyDataStatusSearchRow}})],1)]):e._e(),t("BaseScrollbar",{attrs:{height:"330px"}},[t("table",{staticClass:"tab-table q-mt-sm",class:e.dailyDataStatusTotalItems?"":"empty"},[t("thead",[t("tr",e._l(e.dailyDataStatusColumns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0)]),t("tbody",e._l(e.dailyDataStatusValues,(function(s,i){return t("tr",{key:"dailydatarow"+i},e._l(e.dailyDataStatusColumns,(function(i){return t("td",{key:i.id},[e._v(" "+e._s(s[i.name])+" ")])})),0)})),0)])])]:"Benefit Payment"===e.tab?[t("div",{attrs:{id:"paymentTable"}},[e.inbox?[e.hasLifeType||e.hasCIClaimsType?e._e():t("div",{staticClass:"row controls"},[t("div",{staticClass:"col"},["psyCrYXtKfcs-EJmrYIhv"===e.selectedProcess.activityId||"psyCrYXtKfcs-EJmrYIhv"===e.selectedProcess.activityId&&!e.isPaymentFound?[t("ValidationObserver",{ref:"form",staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("ValidationProvider",{staticClass:"col",attrs:{name:"Total Payment",rules:e.paymentValidationRules},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("NumberField",{staticClass:"q-pa-sm custom-controls",attrs:{label:"Total Payment","is-mandatory":"",error:s[0]},on:{input:e.updateLoanPaymentAmount},model:{value:e.totalPayment,callback:function(t){e.totalPayment=t},expression:"totalPayment"}})]}}],null,!1,452974274)})],1),e._e(),t("div",{staticClass:"col-auto"},[t("ValidationProvider",{staticClass:"col",attrs:{name:"Payment Frequency",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{staticClass:"q-pa-sm custom-controls",attrs:{label:"Payment Frequency","is-mandatory":"",options:e.benefitTypes,"is-clearable":!1,error:s[0]},model:{value:e.benefitType,callback:function(t){e.benefitType=t},expression:"benefitType"}})]}}],null,!1,4170057051)})],1),t("div",{staticClass:"col-auto"},[t("BaseButton",{staticClass:"payment-action custom-button q-ml-sm",attrs:{label:"Calculate"},on:{click:e.paymentCalculation}})],1)])]:e._e()],2),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"row"},["90xxPehjko0dNYRjbX5wm"===e.selectedProcess.activityId&&e.isPaymentFound&&e.hasOtherClaimsType?t("div",{staticClass:"col-auto"},[t("BaseButton",{staticClass:"payment-action q-mr-sm custom-button",attrs:{label:"Add Lumpsum Payment",color:"primary"},on:{click:e.addLumpsumRow}})],1):e._e(),"001f5CdkTDtjCDn3logTT"!==e.selectedProcess.activityId&&"szS6B-q1x9acpB83rP6jT"!==e.selectedProcess.activityId?[t("div",{staticClass:"col-auto"},[t("FormFieldLabel",{staticClass:"payment-action",attrs:{label:"Number of payments to approve"}})],1),t("div",{staticClass:"col-auto"},[t("ValidationProvider",{staticClass:"col",attrs:{name:"Number of payments",rules:{min_value:0,max_value:e.paymentTableValues.length}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("NumberField",{staticClass:"payment-action q-ml-sm custom-controls",attrs:{"is-clearable":!1,"is-readonly":!e.paymentTableValues.length,error:s[0]},model:{value:e.numberOfApprovePayment,callback:function(t){e.numberOfApprovePayment=t},expression:"numberOfApprovePayment"}})]}}],null,!1,2997542867)})],1),t("div",{staticClass:"col-auto"},[t("BaseButton",{staticClass:"payment-action q-ml-sm custom-button",attrs:{label:"Payment Approve",color:"secondary",disabled:!e.paymentTableValues.length},on:{click:e.paymentApprove}})],1),t("div",{staticClass:"col-auto"},[t("BaseButton",{staticClass:"payment-action q-ml-sm custom-button",attrs:{label:"Clear",color:"red",disabled:!e.paymentTableValues.length},on:{click:e.clearPaymentApprove}})],1)]:e._e()],2)])])]:e._e(),t("div",{staticClass:"col"},[t("BaseScrollbar",[t("table",{staticClass:"tab-table table-content q-mb-sm",class:0===e.paymentTableValues.length?"empty":""},[t("thead",[t("tr",[e._l(e.paymentTableColumns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),e.inbox&&"90xxPehjko0dNYRjbX5wm"===e.selectedProcess.activityId&&e.isPaymentFound&&!e.hasLifeType&&!e.hasCIClaimsType?t("th",{staticClass:"actions"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"add row",expression:"'add row'",arg:"top"}],staticClass:"q-ml-xs small",attrs:{color:"primary",icon:"eva-plus","no-border":"",size:"16px"},on:{click:e.addPaymentRow}})],1):e._e()],2)]),t("tbody",e._l(e.paymentTableValues,(function(s,i){return t("tr",{key:"paymentrow"+i},[e.inbox?[s["edit"]?e._l(e.paymentTableColumns,(function(a){return t("td",{key:a.id},["SINGLE_SELECT"===a.type?[t("SelectField",{attrs:{options:e.approvalTypes,"is-readonly":e.checkApprovalEdit(s)},on:{input:function(t){return e.updateApprovalDate(i)}},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"DATE"===a.type?[t("DateField",{attrs:{"minimum-validation":!0,"is-readonly":!0},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"NUMBER"===a.type?[t("NumberField",{attrs:{placeholder:"0.00"},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"SHORT_TEXT"===a.type?[t("TextField",{attrs:{"is-readonly":e.checkApprovalEdit(s)},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"CHECKBOX"===a.type?[t("CheckboxField",{staticClass:"custom-controls",attrs:{"is-disabled":e.checkApprovalEdit(s)},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:[e._t(a.name,(function(){return[e._v(" "+e._s(s[a.name])+" ")]}),{value:s[a.name],item:s})]],2)})):[e._l(e.paymentTableColumns,(function(a){return t("td",{key:a.id},["90xxPehjko0dNYRjbX5wm"===e.selectedProcess.activityId&&e.isPaymentFound&&""!==s[a.name]&&!s["delete"]?["approval"===a.name?["Approved"===s[a.name]?[t("span",{staticClass:"text-green",attrs:{name:a.name,value:s[a.name],item:s}},[e._v(" "+e._s(s[a.name])+" ")])]:[t("span",{staticClass:"text-red",attrs:{name:a.name,value:s[a.name],item:s}},[e._v(" "+e._s(s[a.name])+" ")])]]:"paymentDate"===a.name?[t("DateField",{attrs:{"minimum-validation":!0},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"CHECKBOX"===a.type?[t("CheckboxField",{staticClass:"custom-controls",attrs:{"is-disabled":e.checkApprovalEdit(s)},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:[e._t(a.name,(function(){return[e._v(" "+e._s(s[a.name])+" ")]}),{value:s[a.name],item:s})]]:["SINGLE_SELECT"===a.type?[t("SelectField",{attrs:{options:e.approvalTypes,"is-readonly":e.checkApprovalEdit(s)},on:{input:function(t){return e.updateApprovalDate(i)}},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"DATE"===a.type?[t("DateField",{attrs:{"minimum-validation":!0,"is-readonly":!0},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"baseAmount"===a.name&&s["delete"]?[t("NumberField",{attrs:{placeholder:"0.00",min:0,max:2e3},on:{input:function(t){return e.calcOtherColumns(i)}},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"SHORT_TEXT"===a.type?[t("TextField",{attrs:{"is-readonly":e.checkApprovalEdit(s)},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:"CHECKBOX"===a.type?[t("CheckboxField",{staticClass:"custom-controls",attrs:{"is-disabled":e.checkApprovalEdit(s)},model:{value:s[a.name],callback:function(t){e.$set(s,a.name,t)},expression:"item[column.name]"}})]:[e._t(a.name,(function(){return[e._v(" "+e._s(s[a.name])+" ")]}),{value:s[a.name],item:s})]]],2)})),e.inbox&&"90xxPehjko0dNYRjbX5wm"===e.selectedProcess.activityId&&e.isPaymentFound?t("td",{staticClass:"actions"},[s["delete"]?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"delete row",expression:"'delete row'"}],staticClass:"q-ml-xs small",attrs:{"is-flat":"",color:"red",icon:"eva-trash-outline","no-border":"",size:"16px"},on:{click:function(t){return e.removePaymentRow(i)}}}):e._e()],1):e._e()]]:e._l(e.paymentTableColumns,(function(i){return t("td",{key:i.id},["approval"===i.name?["Approved"===s[i.name]?[t("span",{staticClass:"text-green",attrs:{name:i.name,value:s[i.name],item:s}},[e._v(" "+e._s(s[i.name])+" ")])]:[t("span",{staticClass:"text-red",attrs:{name:i.name,value:s[i.name],item:s}},[e._v(" "+e._s(s[i.name])+" ")])]]:"paymentDate"===i.name?[t("DateField",{attrs:{"minimum-validation":!0,"is-readonly":""},model:{value:s[i.name],callback:function(t){e.$set(s,i.name,t)},expression:"item[column.name]"}})]:"CHECKBOX"===i.type?[t("CheckboxField",{staticClass:"custom-controls",attrs:{"is-disabled":!0},model:{value:s[i.name],callback:function(t){e.$set(s,i.name,t)},expression:"item[column.name]"}})]:[e._t(i.name,(function(){return[e._v(" "+e._s(s[i.name])+" ")]}),{value:s[i.name],item:s})]],2)}))],2)})),0)]),e.inbox&&e.paymentTableValues.length?t("BaseButton",{staticStyle:{float:"right"},attrs:{label:"Update Payments",color:"primary"},on:{click:e.updatePaymentTable}}):e._e()],1)],1)],2)]:"Payments"===e.tab?[e.paymentHistoryTotalItems?t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("Pagination",{staticClass:"custom-form-table",attrs:{"total-items":e.paymentHistoryTotalItems,"current-page":e.paymentHistoryCurrentPage,"items-per-page":e.paymentHistoryItemsPerPage},on:{"update:currentPage":function(t){e.paymentHistoryCurrentPage=t},"update:current-page":function(t){e.paymentHistoryCurrentPage=t},"update:itemsPerPage":function(t){e.paymentHistoryItemsPerPage=t},"update:items-per-page":function(t){e.paymentHistoryItemsPerPage=t},loadAll:e.loadAllPaymentHistory}})],1),t("div",{staticClass:"col-auto q-mt-xs q-ml-sm"},[t("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:e.paymentHistorySearchRow}})],1)]):e._e(),t("BaseScrollbar",{attrs:{height:"330px"}},[t("table",{staticClass:"tab-table q-mt-sm",class:e.paymentHistoryTotalItems?"":"empty"},[t("thead",[t("tr",e._l(e.paymentHistoryColumns,(function(s){return t("th",{key:s.id},[e._v(" "+e._s(s.label)+" ")])})),0)]),t("tbody",e._l(e.paymentHistoryValues,(function(s,i){return t("tr",{key:"paymenthistoryrow"+i},e._l(e.paymentHistoryColumns,(function(i){return t("td",{key:i.id},[e._v(" "+e._s(s[i.name])+" ")])})),0)})),0)])])]:e._e()],2)])])]),t("Modal",{attrs:{width:"30vw",height:"40vh","has-footer":""},on:{input:function(t){e.declineReasonModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Recommend to Decline")]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"declineModal"},[t("div",[t("ValidationProvider",{staticClass:"col",attrs:{name:"Decline Reason",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{staticClass:"field",attrs:{label:"Decline Reason","is-mandatory":"",options:e.declineReasonList,error:s[0]},model:{value:e.declineReason,callback:function(t){e.declineReason=t},expression:"declineReason"}})]}}])})],1)])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"Cancel"},on:{click:function(t){e.declineReasonModal=!1}}}),t("BaseButton",{attrs:{label:"Recommend to Decline",color:"primary"},on:{click:e.updateDeclineReason}})]},proxy:!0}]),model:{value:e.declineReasonModal,callback:function(t){e.declineReasonModal=t},expression:"declineReasonModal"}}),t("Modal",{attrs:{width:"60vw",height:"70vh","has-footer":""},on:{input:function(t){e.claimStatusModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v('"'+e._s(e.selectedProcess.requestNo)+'" Claim Status Entry')]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"claim-status",attrs:{id:"content-wrapper"}},[t("ValidationObserver",{ref:"claimStatusModal"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-4"},[t("ValidationProvider",{staticClass:"col",attrs:{name:"Claim Status",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{staticClass:"field",attrs:{label:"Claim Status","is-mandatory":"",options:e.claimStatusList,error:s[0]},model:{value:e.claimStatus,callback:function(t){e.claimStatus=t},expression:"claimStatus"}})]}}])})],1),t("div",{staticClass:"col-4"},[t("SelectField",{staticClass:"field",attrs:{label:"Note",options:e.csNoteList,"new-option":"","is-readonly":""},model:{value:e.csNote,callback:function(t){e.csNote=t},expression:"csNote"}})],1),t("div",{staticClass:"col-4"},[t("SelectField",{staticClass:"field",attrs:{label:"Claim Letter Sent",options:e.claimLetterSentList,"new-option":"","is-readonly":""},model:{value:e.claimLetterSent,callback:function(t){e.claimLetterSent=t},expression:"claimLetterSent"}})],1),t("div",{staticClass:"col-4"},[t("SelectField",{staticClass:"field",attrs:{label:"Mailing Type",options:e.mailingTypeList},model:{value:e.mailingType,callback:function(t){e.mailingType=t},expression:"mailingType"}})],1),t("div",{staticClass:"col-4"},[t("SelectField",{staticClass:"field",attrs:{label:"Lender Letter",options:e.lenderLetterList,"new-option":"","is-readonly":""},model:{value:e.lenderLetter,callback:function(t){e.lenderLetter=t},expression:"lenderLetter"}})],1),t("div",{staticClass:"col-4",staticStyle:{margin:"auto"}},[t("CheckboxField",{staticClass:"field",attrs:{label:"Internal Only"},model:{value:e.internalOnly,callback:function(t){e.internalOnly=t},expression:"internalOnly"}})],1),t("div",{staticClass:"col-12"},[t("TextAreaField",{staticClass:"field",attrs:{label:"Internal Notes"},model:{value:e.internalNotes,callback:function(t){e.internalNotes=t},expression:"internalNotes"}})],1)])])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"Cancel"},on:{click:function(t){e.claimStatusModal=!1}}}),t("BaseButton",{attrs:{label:Object.keys(e.claimStatusRow).length?"Update":"Add",color:"primary"},on:{click:e.saveClaimStatus}})]},proxy:!0}]),model:{value:e.claimStatusModal,callback:function(t){e.claimStatusModal=t},expression:"claimStatusModal"}})],1)},a=[],o=(s("caad"),s("14d9"),s("7bb1")),r=s("3445"),n=s("12b8"),l=s("b3d1"),c=s("53c1"),d=s("ad54"),m=s("6df3"),h=s("1e48"),u=s("869e"),p=s("7286"),f=s("6a70"),v=s("42fc"),y=s("0d5e"),b=s("1b0d"),w=s("b6d2"),g=s("be3f"),C=s("5c8a"),k={name:"CustomProcessForm",components:{ValidationObserver:o["a"],ValidationProvider:o["b"],FormFieldLabel:r["a"],SelectField:n["a"],TextField:l["a"],DateField:c["a"],NumberField:d["a"],TextAreaField:m["a"],MultipleChoiceField:h["a"],CheckboxField:u["a"],Tabs:p["a"],Modal:f["a"],Pagination:w["a"],ExpandableSearch:g["a"]},props:{formId:{type:String,default:"0"},panels:{type:Array,default:()=>[]},secondaryPanels:{type:Array,default:()=>[]},formModel:{type:Object,default:()=>{}},saveAction:{type:String,default:""},workflowFormModel:{type:Object,default:()=>{}},formFields:{type:Array,default:()=>[]},dataValidationValues:{type:Array,default:()=>[]},selectedProcess:{type:Object,required:!0},isReadonly:{type:Boolean,default:!1},checkList:{type:Array,default:()=>[]},formCheckList:{type:Boolean,default:!1},saveOnly:{type:Boolean,default:!1},inbox:{type:Boolean,default:!1},autoSaveModel:{type:Object,default:()=>{}}},data(){return{formWidth:"100%",claimantInfoList:[{id:this.$nano.id(),label:"Borrower",value:"Borrower",claimType:""},{id:this.$nano.id(),label:"Co-Borrower",value:"Co-Borrower",claimType:""},{id:this.$nano.id(),label:"Next of Kin",value:"Next of Kin",claimType:"Life"}],authorizationTypes:[{id:this.$nano.id(),label:"Claimant Submitted",value:"Claimant Submitted"},{id:this.$nano.id(),label:"Special Auth",value:"Special Auth"},{id:this.$nano.id(),label:"Goodwill Claim",value:"Goodwill Claim"},{id:this.$nano.id(),label:"Advance Receipt",value:"Advance Receipt"},{id:this.$nano.id(),label:"Lump Sum Eligibility Status",value:"Lump Sum Eligibility Status"},{id:this.$nano.id(),label:"Pandemic",value:"Pandemic"},{id:this.$nano.id(),label:"Return To Work",value:"Return To Work"},{id:this.$nano.id(),label:"Prior Loan Used",value:"Prior Loan Used"}],documentCheckList:[{id:this.$nano.id(),label:"Claimant's Statement",value:"Claimant's Statement",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Application to Enroll",value:"Application to Enroll",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Payment Schedule/History",value:"Payment Schedule or History",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Employer's Statement/ROE",value:"Employer's Statement Or ROE",for:["Critical Illness","Involuntary Unemployment","Sickness or Injury","Unpaid Family Leave","Disability"]},{id:this.$nano.id(),label:"Loan Agreement",value:"Loan Agreement",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Lender Claim Statement",value:"Lender Claim Statement",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Physician's Statement",value:"Physician's Statement",for:["Critical Illness","Life","Sickness or Injury","Disability"]},{id:this.$nano.id(),label:"Section 2B",value:"Section 2B",for:["Lifetime Milestone"]},{id:this.$nano.id(),label:"Supporting Documentation",value:"Supporting Documentation",for:["Lifetime Milestone"]}],tabs:[{id:this.$nano.id(),label:"Claim Status",value:"Claim Status"},{id:this.$nano.id(),label:"Daily Data Summary",value:"Daily Data Summary"},{id:this.$nano.id(),label:"Benefit Payment",value:"Benefit Payment"},{id:this.$nano.id(),label:"Payments",value:"Payments"}],tab:"Claim Status",totalPayment:0,lumpsumAmount:0,benefitType:"",benefitTypes:[{id:this.$nano.id(),label:"Monthly",value:"Monthly"},{id:this.$nano.id(),label:"Bi-weekly",value:"BiWeekly"},{id:this.$nano.id(),label:"Semi-monthly",value:"SemiMonthly"},{id:this.$nano.id(),label:"Weekly",value:"Weekly"}],numberOfApprovePayment:0,paymentTableColumns:[{id:this.$nano.id(),name:"paymentNumber",label:"Payment Number",type:"LABEL"},{id:this.$nano.id(),name:"baseAmount",label:"Payment Base Amount",type:"NUMBER"},{id:this.$nano.id(),name:"claimAmount",label:"Claim Amount (20% Increased)",type:"NUMBER"},{id:this.$nano.id(),name:"cumulativeTotal",label:"Cumulative Total",type:"NUMBER"},{id:this.$nano.id(),name:"approval",label:"Approval",type:"SINGLE_SELECT"},{id:this.$nano.id(),name:"approvedDate",label:"Approved Date",type:"DATE"},{id:this.$nano.id(),name:"paymentDate",label:"Payment Date",type:"DATE"},{id:this.$nano.id(),name:"approvedBy",label:"Approved By",type:"LABEL"},{id:this.$nano.id(),name:"notes",label:"Notes",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"goodWill",label:"Goodwill",type:"CHECKBOX"},{id:this.$nano.id(),name:"lppPlus",label:"LPP Plus",type:"CHECKBOX"},{id:this.$nano.id(),name:"preApprovedPmt",label:"Pre Approved Pmt",type:"CHECKBOX"},{id:this.$nano.id(),name:"psgCovered",label:"PSG Covered",type:"CHECKBOX"}],paymentTableValues:[],isPaymentFound:!1,approvalTypes:[{id:this.$nano.id(),label:"Approve",value:"Approved"},{id:this.$nano.id(),label:"Cancel",value:"Cancelled"}],cityList:[],provinceList:[],productList:[{id:this.$nano.id(),label:"Critical Illness",value:"Critical Illness"},{id:this.$nano.id(),label:"Disability",value:"Disability"},{id:this.$nano.id(),label:"Involuntary Unemployment",value:"Involuntary Unemployment"},{id:this.$nano.id(),label:"Life",value:"Life"},{id:this.$nano.id(),label:"Lifetime Milestone",value:"Lifetime Milestone"},{id:this.$nano.id(),label:"Sickness or Injury",value:"Sickness or Injury"},{id:this.$nano.id(),label:"Unpaid Family Leave",value:"Unpaid Family Leave"}],declineReasonList:[],declineReason:"",declineReasonModal:!1,loanInfoVerify:!1,claimInfoVerify:!1,languageList:[{id:this.$nano.id(),label:"EN",value:"EN"},{id:this.$nano.id(),label:"FR",value:"FR"}],isNameOfDeceasedEditable:!1,claimStatusColumns:[{id:this.$nano.id(),name:"ClaimStatus",label:"Claim Status"},{id:this.$nano.id(),name:"CSDate",label:"Date"},{id:this.$nano.id(),name:"CSNote",label:"Note"},{id:this.$nano.id(),name:"ClaimLetterSent",label:"Claim Letter Sent"},{id:this.$nano.id(),name:"AuthorizedBy",label:"Authorized By"},{id:this.$nano.id(),name:"MailingType",label:"Mailing Type"},{id:this.$nano.id(),name:"ModifiedBy",label:"Modified By"},{id:this.$nano.id(),name:"ModifiedDt",label:"Modified Date"},{id:this.$nano.id(),name:"LenderLetter",label:"Lender Letter"},{id:this.$nano.id(),name:"CreatedBy",label:"Created By"},{id:this.$nano.id(),name:"CreatedDt",label:"Created Date"},{id:this.$nano.id(),name:"InternalOnly",label:"Internal Only"},{id:this.$nano.id(),name:"InternalNotes",label:"Internal Notes"}],claimStatusValues:[],claimStatusValuesData:[],claimStatusTotalItems:0,claimStatusItemsPerPage:10,claimStatusCurrentPage:1,claimStatusRow:{},claimStatusModal:!1,claimStatusList:[],claimStatus:"",csDate:"",csNoteList:[],csNote:0,claimLetterSentList:[],claimLetterSent:0,mailingTypeList:[{id:this.$nano.id(),label:"Word Merged Letter",value:"WordmergedLetter"},{id:this.$nano.id(),label:"Email",value:"Email"}],mailingType:"",lenderLetterList:[],lenderLetter:"",internalOnly:!1,internalNotes:"",dailyDataStatusColumns:[{id:this.$nano.id(),name:"FileDate",label:"File Date"},{id:this.$nano.id(),name:"PolicyNumber",label:"Policy Number"},{id:this.$nano.id(),name:"Province",label:"Province"},{id:this.$nano.id(),name:"FirstName",label:"First Name"},{id:this.$nano.id(),name:"LastName",label:"Last Name"},{id:this.$nano.id(),name:"LoanKey",label:"Loan Key"},{id:this.$nano.id(),name:"PriorLoan",label:"Prior Loan"},{id:this.$nano.id(),name:"EffectiveDate",label:"Effective Date"},{id:this.$nano.id(),name:"CancellationDate",label:"Cancellation Date"},{id:this.$nano.id(),name:"LoanTerm",label:"Loan Term"},{id:this.$nano.id(),name:"PrincipalLent",label:"Principal Lent"},{id:this.$nano.id(),name:"Freq",label:"Freq"},{id:this.$nano.id(),name:"TotalObligation",label:"Total Obligation"},{id:this.$nano.id(),name:"FirstPayment",label:"First Payment"},{id:this.$nano.id(),name:"MinimumPrincipal",label:"Minimum Principal"},{id:this.$nano.id(),name:"MinimumInterest",label:"Minimum Interest"},{id:this.$nano.id(),name:"MinPIDue",label:"Min PI Due"},{id:this.$nano.id(),name:"LPPCharge",label:"LPP Charge"},{id:this.$nano.id(),name:"LPPCollected",label:"LPP Collected"},{id:this.$nano.id(),name:"LastPayment",label:"Last Payment"},{id:this.$nano.id(),name:"DefaultDate",label:"Default Date"},{id:this.$nano.id(),name:"ClearedPayments",label:"Cleared Payments"},{id:this.$nano.id(),name:"MissedPayments",label:"Missed Payments"},{id:this.$nano.id(),name:"PastDueAmount",label:"Past Due Amount"},{id:this.$nano.id(),name:"PastDueInterest",label:"Past Due Interest"},{id:this.$nano.id(),name:"PastDueInsuranceFee",label:"Past Due Insurance Fee"},{id:this.$nano.id(),name:"PastDuePrincipalAmount",label:"Past Due Principal Amount"},{id:this.$nano.id(),name:"PastDueNsfFee",label:"Past Due Nsf Fee"},{id:this.$nano.id(),name:"LoanBalance",label:"Loan Balance"},{id:this.$nano.id(),name:"PrincipalBalance",label:"Principal Balance"},{id:this.$nano.id(),name:"ExpectedMinPayment",label:"Expected Min Payment"}],dailyDataStatusValues:[],dailyDataStatusValuesData:[],dailyDataStatusTotalItems:0,dailyDataStatusItemsPerPage:10,dailyDataStatusCurrentPage:1,paymentHistoryColumns:[{id:this.$nano.id(),name:"StoreLoanNumber",label:"Store Loan Number"},{id:this.$nano.id(),name:"Premium",label:"Premium"},{id:this.$nano.id(),name:"PaymentDate",label:"Payment Date"},{id:this.$nano.id(),name:"TransactionType",label:"Transaction Type"},{id:this.$nano.id(),name:"Taxes",label:"Taxes"},{id:this.$nano.id(),name:"PaymentAmount",label:"Payment Amount"},{id:this.$nano.id(),name:"RemitDate",label:"Remit Date"}],paymentHistoryValues:[],paymentHistoryValuesData:[],paymentHistoryTotalItems:0,paymentHistoryItemsPerPage:10,paymentHistoryCurrentPage:1,clearPayment:!1,hasLifeType:!1,hasCIClaimsType:!1,hasLMUFLClaimsType:!1,hasOtherClaimsType:!1,isChangeBenefitClaimed:!1,hasSicknessClaimsChanged:!1}},computed:{isMaximized(){return"100%"===this.formWidth},fieldVerification(){let e=!1;if(this.dataValidationValues.length){let t=["First Name","Last Name","DOB","Address","City","Province","Postal Code","Phone No.","Email ID"];t.forEach(t=>{let s=this.dataValidationValues.find(e=>e.fieldName==t);s&&"Not Matched"!==s.status&&"Not Verified"!==s.status||(e=!0)})}else e=!0;return e},userInitials(){let e="";return this.$store.state.session.firstName&&(e+=this.$store.state.session.firstName[0].toUpperCase()),this.$store.state.session.lastName?e+=this.$store.state.session.lastName[0].toUpperCase():e+=this.$store.state.session.firstName[1],e},userNames(){let e;return this.$store.state.session.firstName&&(e=this.$store.state.session.firstName),this.$store.state.session.lastName&&(e+=" "+this.$store.state.session.lastName),e},_productList(){let e=this.formFields.find(e=>"Benefit Claimed"===e.label),t="";return e&&(t=this.formModel[e.value]),"Critical Illness"===t||"Sickness or Injury"===t?this.productList.filter(e=>"Critical Illness"===e.label||"Sickness or Injury"===e.label):this.productList},_documentCheckList(){let e=this.formFields.find(e=>"Benefit Claimed"===e.label),t="";return e&&(t=this.formModel[e.value]),this.documentCheckList.filter(e=>e.for.includes(t))},STLOCTypeFormula(){let e=this.formFields.find(e=>"Group Policy"===e.label),t="";e&&(t=this.formModel[e.value]);let s=t.split("-");return!(!s.length||("ST001"!==s[0]||"MM01"===s[1])&&"LOC001"!==s[0])},ENHTypeFormula(){let e=this.formFields.find(e=>"Group Policy"===e.label),t="";e&&(t=this.formModel[e.value]);let s=t.split("-");return!(!s.length||"ENH001"!==s[0])},mobileFinanceFormula(){let e=this.formFields.find(e=>"Group Policy"===e.label),t="";e&&(t=this.formModel[e.value]);let s=t.split("-");return!(!s.length||"CPL001M"!==s[0])},paymentValidationRules(){const e={required:!0,min_value:1};return this.STLOCTypeFormula&&!this.hasLMUFLClaimsType?e.max_value=4e3:this.STLOCTypeFormula&&this.hasLMUFLClaimsType?e.max_value=2e3:this.ENHTypeFormula&&this.hasOtherClaimsType&&"Monthly"===this.getModel("Payment Frequency")?e.max_value=1e3:this.mobileFinanceFormula&&this.hasOtherClaimsType&&"Monthly"===this.getModel("Payment Frequency")?e.max_value=1250:(this.ENHTypeFormula||this.mobileFinanceFormula)&&(e.max_value=1e3),e},moneyMartFormula(){let e=this.formFields.find(e=>"Group Policy"===e.label),t="";e&&(t=this.formModel[e.value]);let s=t.split("-");return!(!s.length||"ST001"!==s[0]||"MM01"!==s[1])}},watch:{saveAction:{immediate:!0,async handler(){if(this.saveAction){if("Save"===this.saveAction||"Force Close"===this.saveAction)return void this.$emit("update:workflowFormModel",this.formModel);if("psyCrYXtKfcs-EJmrYIhv"===this.selectedProcess.activityId&&"Recommend to Approve"==this.saveAction){if(this.fieldVerification||!this.loanInfoVerify||!this.claimInfoVerify)return this.$alert.warning("Verification Required"),void this.$emit("update:saveAction","");this.updateModel(this.$day.newDate(),"Processing Date"),this.updateModel("Recommend to Approve","Claim Decision")}else if("psyCrYXtKfcs-EJmrYIhv"===this.selectedProcess.activityId&&"Recommend to Decline"==this.saveAction){if(!this.getModel("Decline Reason"))return this.declineReasonModal=!0,void this.$emit("update:saveAction","");this.updateModel(this.$day.newDate(),"Processing Date"),this.updateModel("Recommend to Decline","Claim Decision")}else if("k4-junYNP5tico7rUVJY_"===this.selectedProcess.activityId||"pyEp-anz7DIWhvoQLf6oC"===this.selectedProcess.activityId){let e=this.paymentTableValues.filter(e=>e.approval);if(console.log(e),!e.length)return this.$alert.warning("Should be approve payment"),void this.$emit("update:saveAction","")}this.$emit("update:workflowFormModel",this.formModel)}}},dataValidationValues:{deep:!0,immediate:!0,handler(){if(this.loanInfoVerify=!1,this.claimInfoVerify=!1,this.dataValidationValues.length){let e=this.dataValidationValues.find(e=>"Loan Info"===e.fieldName);e&&(this.loanInfoVerify="Verified"===e.status);let t=this.dataValidationValues.find(e=>"Claim Info"===e.fieldName);t&&(this.claimInfoVerify="Verified"===t.status)}}},selectedProcess:{immediate:!0,deep:!0,handler(){this.selectedProcess.processId&&(this.isChangeBenefitClaimed=!1,this.clearPayment=!1,this.getPaymentTable(),this.getClaimStatus(),this.getDailyDataStatus(),this.getPaymentHistory(),this.checkDocument())}},formCheckList:{immediate:!0,deep:!0,handler(){if(this.formCheckList){let e=location.origin;("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://localhost:8080"===e||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&this.checkList.length&&(this.documentValidation(),this.$emit("update:formCheckList",!1))}}},formModel:{immediate:!0,handler(){this.formModel&&(this.cloneFormModel=Object(C["a"])(this.formModel),this.getCalculateValidation(this.getModel("Benefit Claimed")))}},moneyMartFormula:{immediate:!0,handler(){this.moneyMartFormula?this.paymentTableColumns.forEach(e=>{"Claim Amount (20% Increased)"!==e.label||(e.label="Benefit Enhancement")}):this.paymentTableColumns.forEach(e=>{"Benefit Enhancement"!==e.label||(e.label="Claim Amount (20% Increased)")})}},hasSicknessClaimsChanged:{handler(){if(this.isPaymentFound&&this.hasSicknessClaimsChanged){if(this.paymentTableValues.length){let e=this.paymentTableValues[0];this.paymentTableValues=[],e&&this.paymentTableValues.push(e)}let e={paymentId:0,paymentNumber:this.paymentTableValues.length+1,baseAmount:"",claimAmount:0,cumulativeTotal:0,approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType,delete:!0};this.paymentTableValues.push(e)}else if(!this.isPaymentFound&&this.hasSicknessClaimsChanged){let e={paymentId:0,paymentNumber:1,baseAmount:"",claimAmount:0,cumulativeTotal:0,approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType,delete:!0};if(this.paymentTableValues.length){let t=this.paymentTableValues[0];this.paymentTableValues=[],this.paymentTableValues.push(t),this.paymentTableValues.push(e)}else this.paymentTableValues=[],this.paymentTableValues.push(e)}}},hasCIClaimsType:{immediate:!0,handler(){this.hasCIClaimsType&&(this.isPaymentFound||this.getLifeTypePaymentTable())}},hasLifeType:{immediate:!0,handler(){this.hasLifeType&&(this.isPaymentFound||this.getLifeTypePaymentTable())}}},created(){this.getProvinceList(),this.getDeclineReasonList(),this.getClaimStatusMaster(6)},mounted(){this.$watch(e=>[e.claimStatusCurrentPage,e.claimStatusItemsPerPage],()=>this.getClaimStatus(),{deep:!0,immediate:!0}),this.$watch(e=>[e.dailyDataStatusCurrentPage,e.dailyDataStatusItemsPerPage],()=>this.getDailyDataStatus(),{deep:!0,immediate:!0}),this.$watch(e=>[e.paymentHistoryCurrentPage,e.paymentHistoryItemsPerPage],()=>this.getPaymentHistory(),{deep:!0,immediate:!0})},methods:{getCalculateValidation(e){"Life"===e?(this.hasLifeType=!0,this.hasCIClaimsType=!1,this.hasLMUFLClaimsType=!1,this.hasOtherClaimsType=!1):"Critical Illness"===e?(this.hasCIClaimsType=!0,this.hasLifeType=!1,this.hasLMUFLClaimsType=!1,this.hasOtherClaimsType=!1):"Lifetime Milestone"===e||"Unpaid Family Leave"===e?(this.hasLMUFLClaimsType=!0,this.hasCIClaimsType=!1,this.hasLifeType=!1,this.hasOtherClaimsType=!1):(this.hasOtherClaimsType=!0,this.hasLifeType=!1,this.hasCIClaimsType=!1,this.hasLMUFLClaimsType=!1)},getModel(e){let t=this.formFields.find(t=>t.label===e);if(t){if("Benefit Claimed"===e)"Critical Illness"===this.formModel[t.value]||"Sickness or Injury"===this.formModel[t.value]?this.isChangeBenefitClaimed=!0:this.isChangeBenefitClaimed=!1;else if("Current Age"===e){let e=this.formFields.find(e=>"DOB"===e.label);e&&this.formModel[e.value]&&(this.formModel[t.value]=this.calculateAge(this.formModel[e.value]))}return"MULTIPLE_CHOICE"===t.type?this.formModel[t.value]?this.formModel[t.value]:[]:"DATE"===t.type?this.$day.parseDate(this.formModel[t.value]):this.formModel[t.value]}},updateModel(e,t){"Sickness or Injury"===this.getModel(t)?"Critical Illness"===e&&(this.hasSicknessClaimsChanged=!0):"Critical Illness"===this.getModel(t)&&"Sickness or Injury"===e&&(this.isPaymentFound=!1,this.hasSicknessClaimsChanged=!1,this.paymentTableValues=[]);let s=this.formFields.find(e=>e.label===t);if(s&&(this.formModel[s.value]=e),"Claimant Info"===t)"Next of Kin"===e?this.isNameOfDeceasedEditable=!0:(this.isNameOfDeceasedEditable=!1,this.getContractData(e));else if("DOB"===t){let t=this.formFields.find(e=>"Current Age"===e.label);t&&(this.formModel[t.value]=this.calculateAge(e))}else if("Loan Payment Amount"===t)this.totalPayment=e,this.benefitType&&this.paymentCalculation();else if("Claim Date"===t){let t=this.formFields.find(e=>"Age at Doc"===e.label),s=this.formFields.find(e=>"Claim Date"===e.label);t&&this.formModel[s.value]&&(this.formModel[t.value]=this.calculateAgeAtDoc(e,this.$day.parseDate(this.formModel[s.value])))}else"Benefit Claimed"===t&&(this.getCalculateValidation(e),this.checkDocument())},updateLoanPaymentAmount(e){this.updateModel(e,"Loan Payment Amount")},checkHighlight(e){if(this.dataValidationValues.length){var t;let s=null===(t=this.dataValidationValues.find(t=>t.fieldName==e))||void 0===t?void 0:t.status;if("Matched"===s||"Verified"===s)return"green";if(""===s||"Not Verified"===s||"Partially Matched"===s)return"orange";if("Not Matched"===s)return"red"}return""},calculateAge(e){if(!e)return;const t=new Date;if(new Date(e)>t)return"";const s=t-new Date(e),i=Math.floor(s/864e5);return Math.floor(i/365.25)},calculateAgeAtDoc(e,t){if(!e)return;if(new Date(e)>new Date(t))return"";const s=new Date(t)-new Date(e),i=Math.floor(s/864e5);return Math.floor(i/365.25)},checkDocument(){let e=this.checkList.filter(e=>(e.conditions&&e.conditions.length?(e.required=!1,e.conditions.forEach(t=>{var s;if("ANY"===e.groupLogic&&e.required)return;let i=(null===(s=this.formFields.find(e=>e.value===t.name))||void 0===s?void 0:s.type)||"",a=t.value,o=this.formModel[t.name];switch("NUMBER"===i&&(a=Number(a),o=Number(o)),t.logic){case"IS_EQUALS_TO":e.required=o===a;break;case"IS_NOT_EQUALS_TO":e.required=o!==a;break;case"CONTAINS":o.indexOf(a)>-1?e.required=!0:e.required=!1;break;case"IS_GREATER_THAN":e.required=o>a;break;case"IS_GREATER_THAN_OR_EQUALS_TO":e.required=o>=a;break;case"IS_LESSER_THAN":e.required=o<a;break;case"IS_LESSER_THAN_OR_EQUALS_TO":e.required=o<=a;break}}),e.required||e.visible?e.show=!0:e.show=!1):e.show=!0,e));this.$emit("update:checkList",e)},documentValidation(){let e=this.formFields.find(e=>"Required Documents"===e.label);if(e){"string"===typeof this.formModel[e.value]&&(this.formModel[e.value]=[]);let t=this.checkList.filter(e=>e.attach);t.length&&t.forEach(t=>{-1===this.formModel[e.value].indexOf(t.name)&&this.formModel[e.value].push(t.name)}),this.autoSave("Required Documents")}},autoSave(e){let t=location.origin;if(("https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t||"http://localhost:80801"===t)&&!this.saveOnly){let t=this.formFields.find(t=>t.label===e);if(t){let e={[t.value]:this.formModel[t.value]};this.$emit("update:autoSaveModel",e)}console.log(e),this.formModel[t.value]!=this.cloneFormModel[t.value]&&(this.$emit("update:saveOnly",!0),this.$emit("update:saveAction","Save"),this.cloneFormModel=Object(C["a"])(this.formModel))}},async updateDeclineReason(){const e=await this.$refs.declineModal.validate();e&&(this.declineReasonModal=!1,this.updateModel(this.declineReason,"Decline Reason"),this.updateModel("Recommend to Decline","Claim Decision"),this.$emit("update:workflowFormModel",this.formModel),this.$emit("update:saveAction","Recommend to Decline"))},async getCityList(){this.cityList=[];let e=this.formFields.find(e=>"City"===e.label);if(e)try{const t=await y["b"].post(`/form/${this.formId}/uniqueColumnValues`,JSON.stringify({column:e.value,keyword:"",rowFrom:0,rowCount:0})),{status:s,data:i}=t;if(200!==s)throw t;const a=JSON.parse(i);a.length&&(this.cityList=a.map(e=>({id:this.$nano.id(),label:e,value:e})));let o=this.cityList.find(t=>t.label===this.formModel[e.value]);o||this.cityList.push({id:this.$nano.id(),label:this.formModel[e.value],value:this.formModel[e.value]})}catch(t){console.error(t),this.$alert.error("Error fetching options")}},async getProvinceList(){this.provinceList=[];let e=this.formFields.find(e=>"Province"===e.label);if(e)try{const t=await y["b"].post(`/form/${this.formId}/uniqueColumnValues`,JSON.stringify({column:e.value,keyword:"",rowFrom:0,rowCount:0})),{status:s,data:i}=t;if(200!==s)throw t;const a=JSON.parse(i);a.length&&(this.provinceList=a.map(e=>({id:this.$nano.id(),label:e,value:e})));let o=this.provinceList.find(t=>t.label===this.formModel[e.value]);o||this.provinceList.push({id:this.$nano.id(),label:this.formModel[e.value],value:this.formModel[e.value]})}catch(t){console.error(t),this.$alert.error("Error fetching options")}},async getDeclineReasonList(){this.declineReasonList=[];const{error:e,payload:t}=await b["g"].getFormEntries(5,{mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[],itemsPerPage:0,currentPage:0});if(e)return void this.$alert.error(e);const{data:s}=t;this.declineReasonList=s[0].value.map(e=>({id:e.itemid,label:`${e["_siZd2ju1yrpaAcCiiJ8X"]} - ${e["xvC46pmC5uL77kIpjJ2p-"]}`,value:`${e["_siZd2ju1yrpaAcCiiJ8X"]} - ${e["xvC46pmC5uL77kIpjJ2p-"]}`}))},async getDataValidation(){const{error:e,payload:t}=await b["d"].armgroupMLValidation({filterBy:[{filters:[{criteria:"processId",condition:"IS_EQUALS_TO",value:this.selectedProcess.processId}],groupCondition:""}],mode:"BROWSE"});e?this.$alert.error(e):t.length?this.$emit("updateDataValidationValues",t):this.$emit("updateDataValidationValues",[])},async confirmCustomerInfo(){let e=["First Name","Last Name","DOB","Address","City","Province","Postal Code","Phone No.","Email ID"],t=[],s=[];if(e.forEach(e=>{let i=this.dataValidationValues.find(t=>t.fieldName==e);i?(i.formValue=this.getModel(e),i.status="Not Matched"===i.status||"Not Verified"===i.status?"Verified":i.status,s.push(i)):t.push({processId:this.selectedProcess.processId,fieldName:e,formValue:this.getModel(e),status:"Verified"})}),s.length){const{error:e}=await b["d"].updateArmgroupMLValidation(s);if(e)return void this.$alert.error(e)}if(t.length){const{error:e}=await b["d"].insertArmgroupMLValidation(t);if(e)return void this.$alert.error(e)}this.getDataValidation()},async unConfirmCustomerInfo(){let e=["First Name","Last Name","DOB","Address","City","Province","Postal Code","Phone No.","Email ID"];if(this.dataValidationValues.length){e.forEach(e=>{let t=this.dataValidationValues.find(t=>t.fieldName==e);t&&(t.formValue=this.getModel(e),t.status="Verified"===t.status?"Not Verified":t.status)});const{error:t}=await b["d"].updateArmgroupMLValidation(this.dataValidationValues);if(t)return void this.$alert.error(t)}},async confirmLoanInfo(){this.loanInfoVerify=!0;let e=[],t=this.dataValidationValues.find(e=>"Loan Info"==e.fieldName);if(t?(t.formValue="Checked",t.status="Not Matched"===t.status||"Not Verified"===t.status?"Verified":t.status,e.push(t)):e=[{processId:this.selectedProcess.processId,fieldName:"Loan Info",formValue:"Checked",status:"Verified"}],e[0].id){const{error:t}=await b["d"].updateArmgroupMLValidation(e);if(t)return void this.$alert.error(t)}else{const{error:t}=await b["d"].insertArmgroupMLValidation(e);if(t)return void this.$alert.error(t)}this.getDataValidation()},async unConfirmLoanInfo(){this.loanInfoVerify=!1;let e=[],t=this.dataValidationValues.find(e=>"Loan Info"==e.fieldName);t&&(t.formValue="",t.status="Not Verified",e.push(t));const{error:s}=await b["d"].updateArmgroupMLValidation(e);s&&this.$alert.error(s)},async confirmClaimInfo(){this.claimInfoVerify=!0;let e=[],t=this.dataValidationValues.find(e=>"Claim Info"==e.fieldName);if(t?(t.formValue="Checked",t.status="Not Matched"===t.status||"Not Verified"===t.status?"Verified":t.status,e.push(t)):e=[{processId:this.selectedProcess.processId,fieldName:"Claim Info",formValue:"Checked",status:"Verified"}],e[0].id){const{error:t}=await b["d"].updateArmgroupMLValidation(e);if(t)return void this.$alert.error(t)}else{const{error:t}=await b["d"].insertArmgroupMLValidation(e);if(t)return void this.$alert.error(t)}this.getDataValidation()},async unConfirmClaimInfo(){this.claimInfoVerify=!1;let e=[],t=this.dataValidationValues.find(e=>"Claim Info"==e.fieldName);t&&(t.formValue="",t.status="Not Verified",e.push(t));const{error:s}=await b["d"].updateArmgroupMLValidation(e);s&&this.$alert.error(s)},export_Data(){if(this.paymentTableValues.length){let e=[];e=this.paymentTableValues.map(e=>({"Payment Number":e.paymentNumber,"Base Amount":e.baseAmount,"Claim Amount":e.claimAmount,"Cumulative Total":e.cumulativeTotal,Approval:e.approval,"Approved Date":e.approvedDate,"Payment Date":e.paymentDate,"Payment Frequency":e.benefitType})),Object(v["a"])(e)}},paymentApprove(){if(this.numberOfApprovePayment>0)if(this.numberOfApprovePayment>this.paymentTableValues.length)this.$alert.warning("Approved payment should be less than "+this.paymentTableValues.length);else if(this.isPaymentFound){let e=this.paymentTableValues.filter(e=>"Approved"!==e.approval);e.length&&e.forEach((e,t)=>{if(t<this.numberOfApprovePayment){e.approval="Approved";let s=0;e.approvedDate=this.$day.addDate(this.$day.newDate(),t*s),e.paymentDate=this.$day.addDate(this.$day.newDate(),t*s+1),e.approvedBy=this.userInitials}else e.approval="",e.approvedDate="",e.paymentDate="",e.approvedBy=""})}else this.paymentTableValues.forEach((e,t)=>{if(t<this.numberOfApprovePayment){e.approval="Approved";let s=0;e.approvedDate=this.$day.addDate(this.$day.newDate(),t*s),e.paymentDate=this.$day.addDate(this.$day.newDate(),t*s+1),e.approvedBy=this.userInitials}else e.approval="",e.approvedDate="",e.paymentDate="",e.approvedBy=""});else this.$alert.warning("Specify the valid number")},clearPaymentApprove(){this.numberOfApprovePayment=0,this.paymentTableValues.forEach(e=>{e.approval="",e.approvedDate="",e.paymentDate="",e.approvedBy=""})},checkApprovalEdit(e){return!!e.approvedDate&&this.$day.newDate()!==e.approvedDate},updateApprovalDate(e){if("Approved"===this.paymentTableValues[e].approval){this.paymentTableValues[e].approvedDate=this.$day.newDate();let t=new Date;t.setDate(t.getDate()+1);let s=t.getMonth()+1;s<10&&(s="0"+s);let i=t.getDate();i<10&&(i="0"+i),this.paymentTableValues[e].paymentDate=`${t.getFullYear()}-${s}-${i}`,this.paymentTableValues[e].approvedBy=this.userInitials}else this.paymentTableValues[e].approvedDate="",this.paymentTableValues[e].paymentDate="",this.paymentTableValues[e].approvedBy=""},addLumpsumRow(){if(!this.paymentTableValues[this.paymentTableValues.length-1].lumpsumRow){let e=0;4e3===Number(this.paymentTableValues[this.paymentTableValues.length-1].cumulativeTotal)&&(e=4e3.toFixed(2));const t={paymentId:0,paymentNumber:this.paymentTableValues.length+1,baseAmount:"",claimAmount:0,cumulativeTotal:e,approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType,lumpsumRow:!0,delete:!0};this.paymentTableValues.push(t)}},addPaymentRow(){let e=0;if(this.paymentTableValues.length&&(e=Number(this.paymentTableValues[this.paymentTableValues.length-1].cumulativeTotal)),4e3!==e||this.hasCIClaimsType)if(15e3===e&&this.hasCIClaimsType)this.$alert.warning("Already maximum amount 15000 reached");else{const e={paymentId:0,paymentNumber:this.paymentTableValues.length+1,baseAmount:"",claimAmount:0,cumulativeTotal:0,approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType,delete:!0};this.paymentTableValues.push(e)}else this.$alert.warning("Already maximum amount 4000 reached")},removePaymentRow(e){this.paymentTableValues.splice(e,1)},calcOtherColumns(e){let t=0,s=this.paymentTableValues[e].baseAmount;if(this.hasOtherClaimsType){if(this.paymentTableValues[e].lumpsumRow){if(s>2e3)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Lumpsum Amount shouldn't exceed $2000");if(this.paymentTableValues[e].claimAmount=(0).toFixed(2),t=Number(this.paymentTableValues[this.paymentTableValues.length-2].cumulativeTotal),4e3===t&&this.paymentTableValues[e].baseAmount>0)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=4e3.toFixed(2),void this.$alert.warning("Cumulative total shouldn't exceed $4000");if(t+=s,t>4e3)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Cumulative total shouldn't exceed $4000")}else{let i=s+.2*s;if(this.paymentTableValues[e].claimAmount=i.toFixed(2),t=i+Number(this.paymentTableValues[e-1].cumulativeTotal),this.STLOCTypeFormula&&t>4e3)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].claimAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),t=0,void this.$alert.warning("Cumulative total shouldn't exceed $4000")}t>0&&s&&(this.paymentTableValues[e].cumulativeTotal=t.toFixed(2))}else if(this.hasLifeType){if(this.ENHTypeFormula){if(s>5e4)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Base Amount shouldn't exceed $50000")}else if(s>15e3)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Base Amount shouldn't exceed $15000");this.paymentTableValues[e].cumulativeTotal=this.paymentTableValues[e].baseAmount.toFixed(2)}else if(this.hasCIClaimsType){let t=0;if(e&&(t=Number(this.paymentTableValues[e-1].cumulativeTotal)+s),s<=15e3&&e)return void(this.paymentTableValues[e].cumulativeTotal=this.paymentTableValues[e].baseAmount.toFixed(2));if(s>15e3&&!e)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Base Amount shouldn't exceed $15000");if(t>15e3)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Base Amount shouldn't exceed $15000");this.paymentTableValues[e].cumulativeTotal=this.paymentTableValues[e].baseAmount.toFixed(2)}},calcOtherColumns1(e){let t=0,s=this.paymentTableValues[e].baseAmount;if(this.paymentTableValues[e].lumpsumRow){if(s>2e3)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Lumpsum Amount shouldn't exceed $2000");if(this.paymentTableValues[e].claimAmount=(0).toFixed(2),t=Number(this.paymentTableValues[this.paymentTableValues.length-2].cumulativeTotal),4e3===t&&this.paymentTableValues[e].baseAmount>0)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=4e3.toFixed(2),void this.$alert.warning("Cumulative total shouldn't exceed $4000");if(t+=s,t>4e3)return this.paymentTableValues[e].baseAmount=0,this.paymentTableValues[e].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Cumulative total shouldn't exceed $4000")}else{let i=s+.2*s;this.paymentTableValues[e].claimAmount=i.toFixed(2),this.paymentTableValues.forEach(e=>{t+=Number(e.claimAmount)})}this.paymentTableValues[e].cumulativeTotal=t.toFixed(2)},claimStatusSearchRow(e){this.claimStatusValues=e?this.claimStatusValuesData.filter(t=>{for(let s in t){let i=this.claimStatusColumns.findIndex(e=>e.name===s);if(i>=0&&t[s]&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return t}}):this.claimStatusValuesData},loadAllClaimStatus(){this.claimStatusItemsPerPage=this.claimStatusTotalItems,1===this.claimStatusCurrentPage?this.getClaimStatus():this.claimStatusCurrentPage=1},dailyDataStatusSearchRow(e){this.dailyDataStatusValues=e?this.dailyDataStatusValuesData.filter(t=>{for(let s in t){let i=this.dailyDataStatusColumns.findIndex(e=>e.name===s);if(i>=0&&t[s]&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return t}}):this.dailyDataStatusValuesData},loadAllDailyDataStatus(){this.dailyDataStatusItemsPerPage=this.dailyDataStatusTotalItems,1===this.dailyDataStatusCurrentPage?this.getDailyDataStatus():this.dailyDataStatusCurrentPage=1},paymentHistorySearchRow(e){this.paymentHistoryValues=e?this.paymentHistoryValuesData.filter(t=>{for(let s in t){let i=this.paymentHistoryColumns.findIndex(e=>e.name===s);if(i>=0&&t[s]&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return t}}):this.payymentHistoryValuesData},loadAllPaymentHistory(){this.paymentHistoryItemsPerPage=this.paymentHistoryTotalItems,1===this.paymentHistoryCurrentPage?this.getPaymentHistory():this.payemntHistoryCurrentPage=1},addClaimStatus(){this.claimStatusRow={},this.claimStatus="",this.csDate="",this.csNote=0,this.claimLetterSent=0,this.mailingType="",this.lenderLetter="",this.internalOnly=!1,this.internalNotes="",this.claimStatusModal=!0},editClaimStatus(e){this.claimStatusRow=this.claimStatusValues.find(t=>t.ClaimStatusID===e.ClaimStatusID),this.claimStatusRow&&(this.claimStatus=this.claimStatusRow.ClaimStatus,this.csNote=this.claimStatusRow.CSNote,this.claimLetterSent=this.claimStatusRow.ClaimLetterSent,this.mailingType=this.claimStatusRow.MailingType,this.lenderLetter=this.claimStatusRow.lenderLetter,this.internalOnly=Boolean(this.claimStatusRow.InternalOnly),this.internalNotes=this.claimStatusRow.InternalNotes),this.claimStatusModal=!0},async getClaimStatusMaster(e){this.claimStatusList=[],this.$store.commit("showLoadingBar");const{error:t,payload:s}=await b["g"].getFormEntries(e,{mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[],itemsPerPage:0,currentPage:0});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);const{data:i}=s;this.claimStatusList=i[0].value.map(e=>({id:e.itemid,label:e["dKY2zhKPS4-hQy1I6yVSV"],value:e["dKY2zhKPS4-hQy1I6yVSV"]}))},async paymentCalculation(){this.numberOfApprovePayment=0;const e=await this.$refs.form.validate();if(!e)return;this.isPaymentFound&&(this.clearPayment=!0),this.paymentTableValues=[];let t=0,s=0;if(this.benefitType)switch(this.benefitType){case"Monthly":s=6;break;case"BiWeekly":case"SemiMonthly":s=12;break;case"Weekly":s=24;break}for(let i=1;i<=s;i++){if(this.hasLMUFLClaimsType&&i>3)return;let e=this.totalPayment,s=0,a=0;if(this.STLOCTypeFormula?(this.hasOtherClaimsType?a=4e3:this.hasLMUFLClaimsType&&(a=2e3),s=e+.2*e):this.ENHTypeFormula?this.hasOtherClaimsType?a=6e3:this.hasLMUFLClaimsType&&(a=2e3):this.mobileFinanceFormula?this.hasOtherClaimsType?a=7500:this.hasLMUFLClaimsType&&(a=2e3):this.moneyMartFormula&&this.hasLMUFLClaimsType&&(a=2e3),!this.moneyMartFormula&&t+s>a)return void this.paymentTableValues.push({paymentId:0,paymentNumber:i,baseAmount:(a-t).toFixed(2),claimAmount:(0).toFixed(2),cumulativeTotal:a.toFixed(2),approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType});if(this.STLOCTypeFormula)t+=s;else if(this.ENHTypeFormula)t+=e;else if(this.mobileFinanceFormula)t+=e;else if(this.moneyMartFormula){let i=this.getModel("Principal Balance At Doc"),a=0,o=0;if(this.hasOtherClaimsType&&i)if("BiWeekly"===this.benefitType||"SemiMonthly"===this.benefitType){let e=50*i/100;a=e.toFixed(2)}else if("Weekly"===this.benefitType){let e=25*i/100;a=e.toFixed(2)}else"Monthly"===this.benefitType&&(a=i);o=a/24,s=o,t+=o+e}if(this.paymentTableValues.push({paymentId:0,paymentNumber:i,baseAmount:e.toFixed(2),claimAmount:s.toFixed(2),cumulativeTotal:t.toFixed(2),approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType}),t===a)return}},async paymentCalculation1(){this.numberOfApprovePayment=0;const e=await this.$refs.form.validate();if(!e)return;this.isPaymentFound&&(this.clearPayment=!0),this.paymentTableValues=[];let t=0,s=0;if(this.benefitType)switch(this.benefitType){case"Monthly":s=6;break;case"BiWeekly":case"SemiMonthly":s=12;break;case"Weekly":s=24;break}for(let i=1;i<=s;i++){let e=this.totalPayment,s=e+.2*e;if(t+s>4e3)return void this.paymentTableValues.push({paymentId:0,paymentNumber:i,baseAmount:(4e3-t).toFixed(2),claimAmount:(0).toFixed(2),cumulativeTotal:4e3.toFixed(2),approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType});t+=s,this.paymentTableValues.push({paymentId:0,paymentNumber:i,baseAmount:e.toFixed(2),claimAmount:s.toFixed(2),cumulativeTotal:t.toFixed(2),approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType})}},async getPaymentTable1(){this.isPaymentFound=!1;const{error:e,payload:t}=await b["d"].getPaymentTable({filterBy:[{filters:[{criteria:"processId",condition:"IS_EQUALS_TO",value:this.selectedProcess.processId}],groupCondition:""}],mode:"BROWSE"});e?this.$alert.error(e):t.length&&(this.paymentTableValues=t,this.isPaymentFound=!0)},async getPaymentTable(){this.isPaymentFound=!1,this.paymentTableValues=[];let e=this.formFields.find(e=>"Claim No."===e.label),t=this.formFields.find(e=>"Lender Name"===e.label),s={};this.isPaymentFound||(this.hasLifeType||this.hasCIClaimsType)&&this.getLifeTypePaymentTable(),s["CPClaimNumber"]=this.formModel[e.value];let i={hublinkId:8,payloadMapping:JSON.stringify(s),lenderName:this.formModel[t.value],itemsPerPage:50,currentPage:1};const{payload:a,error:o}=await b["d"].getDataSync(i);if(o)return void this.$alert.error(o);const{data:r,meta:n}=a;n.totalItems&&r.length&&r[0].value.length&&(this.paymentTableValues=[],r[0].value.forEach(e=>{this.paymentTableValues.push({paymentId:e.ClaimPaymentID,paymentNumber:e.ClaimPaymentNumber,baseAmount:Number(e.ClaimPaymentAmount).toFixed(2),claimAmount:Number(e.PrincipalPmt).toFixed(2),cumulativeTotal:Number(e.CumulativeTotal).toFixed(2),approval:e.Status,approvedDate:this.$day.parseDate(e.StatusDate),paymentDate:this.$day.parseDate(e.CPaymentDate),approvedBy:e.ApprovedBy,notes:e.CPNotes,goodWill:"True"===e.Goodwill,lppPlus:"True"===e.LPPPlus,preApprovedPmt:"True"===e.PreApprovedPmt,psgCovered:"True"===e.PSGCovered})}),this.isPaymentFound=!0)},async updatePaymentTable1(){this.paymentTableValues.forEach(e=>{e.baseAmount=Number(e.baseAmount).toFixed(2)});let e={workflowId:this.selectedProcess.id,processId:this.selectedProcess.processId,paymentTableList:this.paymentTableValues};if(this.isPaymentFound){const{error:t}=await b["d"].updatePaymentTable(this.selectedProcess.processId,e);if(t)return void this.$alert.error(t);this.$alert.success("Payment entry updated")}else{const{error:t}=await b["d"].savePaymentTable(e);if(t)return void this.$alert.error(t);this.$alert.success("Payment entry added")}this.getPaymentTable()},async updatePaymentTable(){let e=this.formFields.find(e=>"Lender Name"===e.label),t=this.formFields.find(e=>"Claim No."===e.label);this.paymentTableValues.forEach(e=>{e.baseAmount=Number(e.baseAmount).toFixed(2)});let s=[];this.paymentTableValues.forEach(e=>{let i={};i=e.paymentId?{modifiedBy:this.userNames,modifiedDt:this.$day.newDateTime()}:{createdBy:this.userNames,createdDt:this.$day.newDateTime()},s.push({claimPaymentID:e.paymentId,cPClaimNumber:this.formModel[t.value],paymentNumber:e.paymentNumber,paymentBaseAmount:e.baseAmount,claimAmount:e.claimAmount,cumulativeTotal:e.cumulativeTotal,approval:e.approval,paymentDate:e.paymentDate,approvedBy:0,cpNotes:e.notes,goodwill:e.goodWill,lppplus:e.lppPlus,preApprovedPMT:e.preApprovedPmt,psgCovered:e.psgCovered,approvalDate:e.approvedDate,proRated:!1,...i})});let i={lenderName:this.formModel[e.value],claimNumber:this.clearPayment?this.formModel[t.value]:"",paymentList:s};const{error:a}=await b["d"].savePaymentTable(i);a?this.$alert.error(a):(this.$alert.success("Payment entry updated"),this.numberOfApprovePayment=0,this.getPaymentTable())},async getContractData(e){let t=this.formFields.find(e=>"Loan No."===e.label),s=this.formFields.find(e=>"Lender Name"===e.label),i={};if(i["StoreLoanNumber"]=this.formModel[t.value],"Borrower"===e){let e={hublinkId:4,payloadMapping:JSON.stringify(i),lenderName:this.formModel[s.value],itemsPerPage:500,currentPage:1};const{payload:t,error:a}=await b["d"].getDataSync(e);if(this.$store.commit("hideLoadingBar"),a)return void("Connection Interrupted"===a?this.$alert.warning(a):this.$alert.error(a));const{data:o,meta:r}=t;r.totalItems&&o.length&&o[0].value.length&&o[0].value.forEach(e=>{this.updateModel(e.FirstName,"First Name"),this.updateModel(e.LastName,"Last Name"),this.updateModel(e.DOB,"DOB"),this.updateModel(e.Address1,"Address"),this.updateModel(e.City,"City"),this.updateModel(e.Province,"Province"),this.updateModel(e.PostalCode,"Postal Code"),this.updateModel(e.Phone,"Phone No.")})}else if("Co-Borrower"===e){let e={hublinkId:3,payloadMapping:JSON.stringify(i),lenderName:this.formModel[s.value],itemsPerPage:500,currentPage:1};const{payload:t,error:a}=await b["d"].getDataSync(e);if(this.$store.commit("hideLoadingBar"),a)return void("Connection Interrupted"===a?this.$alert.warning(a):this.$alert.error(a));const{data:o,meta:r}=t;r.totalItems&&o.length&&o[0].value.length&&o[0].value.forEach(e=>{this.updateModel(e.CoFirstName,"First Name"),this.updateModel(e.CoLastName,"Last Name"),this.updateModel(e.CoDOB,"DOB"),this.updateModel(e.CoAddress1,"Address"),this.updateModel(e.CoCity,"City"),this.updateModel(e.CoProvince,"Province"),this.updateModel(e.CoPostalCode,"Postal Code"),this.updateModel(e.CoPhone,"Phone No.")})}},async getClaimStatus(){this.claimStatusValues=[],this.claimStatusValuesData=[];let e=this.formFields.find(e=>"Claim No."===e.label),t=this.formFields.find(e=>"Lender Name"===e.label),s={};s["CSClaimNumber"]=this.formModel[e.value];let i={hublinkId:7,payloadMapping:JSON.stringify(s),lenderName:this.formModel[t.value],itemsPerPage:this.claimStatusItemsPerPage,currentPage:this.claimStatusCurrentPage};const{payload:a,error:o}=await b["d"].getDataSync(i);if(o)return void this.$alert.error(o);const{data:r,meta:n}=a;n.totalItems&&(this.claimStatusTotalItems=n.totalItems,r.length&&r[0].value.length&&(this.claimStatusValues=r[0].value,this.claimStatusValuesData=r[0].value))},async saveClaimStatus(){const e=await this.$refs.claimStatusModal.validate();if(!e)return;let t=this.formFields.find(e=>"Claim No."===e.label),s=this.formFields.find(e=>"Lender Name"===e.label),i={};i=Object.keys(this.claimStatusRow).length?{CSClaimNumber:this.claimStatusRow.CSClaimNumber,ClaimStatus:this.claimStatus,CSDate:this.claimStatusRow.CSDate,ClaimLetterSent:0,AuthorizedBy:0,MailingType:this.mailingType,LenderLetter:0,CreatedBy:this.claimStatusRow.CreatedBy,CreatedDt:this.claimStatusRow.CreatedDt,ModifiedBy:this.userNames,ModifiedDt:this.$day.newDateTime(),InternalOnly:this.internalOnly,InternalNotes:this.internalNotes,TransactionId:"",InhouseOnly:0}:{CSClaimNumber:this.formModel[t.value],ClaimStatus:this.claimStatus,CSDate:this.$day.newDate(),ClaimLetterSent:0,AuthorizedBy:0,MailingType:this.mailingType,LenderLetter:0,CreatedBy:this.userNames,CreatedDt:this.$day.newDateTime(),InternalOnly:this.internalOnly,InternalNotes:this.internalNotes,TransactionId:"",InhouseOnly:0};let a={lenderName:this.formModel[s.value],claimStatusID:Object.keys(this.claimStatusRow).length?this.claimStatusRow.ClaimStatusID:0,fields:JSON.stringify(i)};const{error:o}=await b["d"].saveClaimStatus(a);o?this.$alert.error(o):(Object.keys(this.claimStatusRow).length?this.$alert.success("Claim status entry updated"):this.$alert.success("Claim status entry added"),this.claimStatusRow={},this.claimStatusModal=!1,this.getClaimStatus())},async getDailyDataStatus(){this.dailyDataStatusValues=[],this.dailyDataStatusValuesData=[];let e=this.formFields.find(e=>"Loan No."===e.label),t=this.formFields.find(e=>"Lender Name"===e.label),s={};s["loankey"]=this.formModel[e.value];let i={hublinkId:6,payloadMapping:JSON.stringify(s),lenderName:this.formModel[t.value],itemsPerPage:this.dailyDataStatusItemsPerPage,currentPage:this.dailyDataStatusCurrentPage};const{payload:a,error:o}=await b["d"].getDataSync(i);if(o)return void this.$alert.error(o);const{data:r,meta:n}=a;n.totalItems&&(this.dailyDataStatusTotalItems=n.totalItems,r.length&&r[0].value.length&&(this.dailyDataStatusValues=r[0].value,this.dailyDataStatusValuesData=r[0].value))},async getPaymentHistory(){this.paymentHistoryValues=[],this.paymentHistoryValuesData=[];let e=this.formFields.find(e=>"Loan No."===e.label),t=this.formFields.find(e=>"Lender Name"===e.label),s={};s["StoreLoanNumber"]=this.formModel[e.value];let i={hublinkId:5,payloadMapping:JSON.stringify(s),lenderName:this.formModel[t.value],itemsPerPage:this.paymentHistoryItemsPerPage,currentPage:this.paymentHistoryCurrentPage};this.$store.commit("showLoadingBarSave");const{payload:a,error:o}=await b["d"].getDataSync(i);if(this.$store.commit("hideLoadingBarSave"),o)return void this.$alert.error(o);const{data:r,meta:n}=a;n.totalItems&&(this.paymentHistoryTotalItems=n.totalItems,r.length&&r[0].value.length&&(this.paymentHistoryValues=r[0].value,this.paymentHistoryValuesData=r[0].value))},getLifeTypePaymentTable(){this.paymentTableValues=[],this.paymentTableValues=[{approval:"",approvedBy:"",approvedDate:"",baseAmount:"",claimAmount:0,cumulativeTotal:"0",goodWill:!1,lppPlus:!1,notes:"",paymentDate:"",paymentId:0,paymentNumber:"1",preApprovedPmt:!1,psgCovered:!1,delete:!0}]}}},I=k,S=(s("55ff"),s("cea0"),s("2877")),_=Object(S["a"])(I,i,a,!1,null,"bdce7c08",null);t["a"]=_.exports},c559:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"sort",expression:"'sort'",modifiers:{bottom:!0}}],attrs:{"is-flat":"",icon:"mdi-sort","no-border":""}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("BaseScrollbar",{attrs:{height:e.scrollbarHeight,width:"240px"}},[t("div",{staticClass:"title-3 q-pa-md"},[e._v("Sort Criteria")]),e._l(e._columns,(function(s){return t("ListItem",{key:s.id,attrs:{icon:e.criteria===s.name?"eva-radio-button-on":"eva-radio-button-off","is-selected":e.criteria===s.name,label:s.label},on:{click:function(t){return e.updateCriteria(s.name)}}})}))],2),t("div",{staticClass:"title-3 q-pa-md"},[e._v("Sort Order")]),t("ListItem",{attrs:{icon:"ASC"===e.order?"eva-radio-button-on":"eva-radio-button-off","is-selected":"ASC"===e.order,label:"Ascending"},on:{click:function(t){return e.updateOrder("ASC")}}}),t("ListItem",{staticClass:"q-mb-sm",attrs:{icon:"DESC"===e.order?"eva-radio-button-on":"eva-radio-button-off","is-selected":"DESC"===e.order,label:"Descending"},on:{click:function(t){return e.updateOrder("DESC")}}})],1)],1)},a=[],o=s("cade"),r={name:"SortItems",components:{ListItem:o["a"]},props:{columns:{type:Array,required:!0},criteria:{type:String,required:!0},order:{type:String,required:!0}},computed:{_columns(){return[{id:this.$nano.id(),label:"None",name:""},...this.columns.filter(e=>e.isSortable)]},scrollbarHeight(){const e=54*this._columns.length;return e>216?"224px":e+"px"}},methods:{updateCriteria(e){this.$emit("update:criteria",e)},updateOrder(e){this.$emit("update:order",e)}}},n=r,l=s("2877"),c=s("4e73"),d=s("93dc"),m=s.n(d),h=Object(l["a"])(n,i,a,!1,null,"12f6a366",null);t["a"]=h.exports;m()(h,"components",{QMenu:c["a"]})},c589:function(e,t,s){},c5b7:function(e,t,s){"use strict";s("0698")},c925:function(e,t,s){"use strict";s("65c0")},cbc3:function(e,t,s){},ccc5:function(e,t,s){"use strict";s("b811")},cd22:function(e,t,s){e.exports=s.p+"img/name-dark.ebb22601.png"},cd8d:function(e,t,s){"use strict";s("00f0")},cdde:function(e,t,s){"use strict";function i(e){const t=document.createElement("textarea");t.value=e,t.contentEditable=!0,t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();const s=document.execCommand("copy");return t.remove(),s}t["a"]=function(e){return void 0!==navigator.clipboard?navigator.clipboard.writeText(e):new Promise((t,s)=>{const a=i(e);a?t(!0):s(a)})}},cea0:function(e,t,s){"use strict";s("ee16")},d30f:function(e,t,s){},ddad:function(e,t,s){"use strict";s("acf0")},e0b6:function(e,t,s){},e311:function(e,t,s){},e603:function(e,t,s){"use strict";s("4488")},e864:function(e,t,s){"use strict";s("1137")},e98d:function(e,t,s){"use strict";s("50ff")},ec15:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("Sheet",{attrs:{width:"30vw","sub-actions":!(!e.selectedProcess.processId||!e.attachmentList.length),upload:"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess||e.isPortal,"no-padding":""},on:{input:e.closeAttachmentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[e.selectedProcess.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 15 seconds ")]):e._e(),e.selectedProcess.processId?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getAttachments()}}}):e._e()]},proxy:!0},"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess||e.isPortal?{key:"upload",fn:function(){return[t("div",{staticClass:"hint",on:{click:function(t){e.rowIndex=null,e.$refs.attachments.click()}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),t("div",{staticClass:"title text-blue"},[e._v("UPLOAD FILES")]),t("div",{staticClass:"description"},[e._v("Click here to choose files and upload")])],1)]},proxy:!0}:null,e.selectedProcess.processId&&e.attachmentList.length?{key:"subActions",fn:function(){return[t("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:e.fileSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}}),e._v(" Select All "),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!e.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentShare}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"merge documents (only PDF)",expression:"'merge documents (only PDF)'",modifiers:{top:!0}}],attrs:{"is-disabled":!(e.selectedFileCount>1&&e.isSelectedPDF),icon:"mdi-file-document-multiple-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentMerge}})]},proxy:!0}:null],null,!0),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode||e.initiateProcess||e.isPortal?"calc(100vh - 200px)":""}},[t("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:e.uploadWflowAttachments}}),e._l(e.checkList,(function(s){return[!s.name||s.hasOwnProperty("visible")&&!s.show?e._e():[s.attach?t("div",{key:s.uid},[e._l(e.attachmentFilterCheckList(s.name),(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})]],2):t("div",[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e()],2),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),[("inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode)&&s.createdBy===e.$store.state.session.id||e.initiateProcess?[t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Re-Upload",expression:"'Re-Upload'",modifiers:{top:!0}}],attrs:{icon:"mdi-file-upload",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){t.stopPropagation(),e.reuploadFile=s,e.reupload(s.name)}}})],1)]:e._e()]],2)])]}))],2):t("div",{key:s.uid,staticClass:"checkList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),t("div",{staticClass:"col q-ml-sm"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[e._v(" "+e._s(s.name)+" ")]),s.required?t("div",{staticClass:"col-12 q-mt-sm"},[t("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[e._v(" Required ")])],1):e._e()])]),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"col-12",on:{click:function(t){return e.attachTemplate(s.uid)}}},[t("q-chip",{staticClass:"chips primary-hover medium",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-upload-outline",color:"primary","text-color":"white"}}),e._v(" Upload ")],1)],1),s.template?t("div",{staticClass:"col-12",on:{click:function(t){return e.download(s.id)}}},[t("q-chip",{staticClass:"chips secondary-hover medium",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-download-outline",color:"secondary","text-color":"white"}}),e._v(" Download ")],1)],1):e._e()])])])]]})),e._l(e.attachmentList,(function(s){return[e.isCheckList(s.name)?[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[s.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e(),e.selectedProcess.processId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){s.checked=!s.checked}}})],1):e._e(),s.formJsonId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:e.getLabel(s.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(s)}}},[e._v(" "+e._s(s.name)+" ")]),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Download")}}})],1),s.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(s,"Print")}}})],1)],2),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(s.createdByEmail))])]:e._e(),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(s)}}})],1),("inbox"===e.selectedNode||"common"===e.selectedNode||"payment"===e.selectedNode)&&s.createdBy===e.$store.state.session.id||e.initiateProcess?t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(s)}}})],1):e._e()])])]:e._e()]}))],2)],1)]),t("EmailSharing",{attrs:{"repository-id":e.workflow.repositoryId,"file-list":e.selectedFileList},on:{"update:fileList":function(t){e.selectedFileList=t},"update:file-list":function(t){e.selectedFileList=t}},model:{value:e.emailSharingSheet,callback:function(t){e.emailSharingSheet=t},expression:"emailSharingSheet"}}),t("FileDetails",{attrs:{"file-data":e.fileData},model:{value:e.fileDetailsSheet,callback:function(t){e.fileDetailsSheet=t},expression:"fileDetailsSheet"}}),t("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(t){e.mailAttachmentSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Mail Attachments ")]},proxy:!0}]),model:{value:e.mailAttachmentSheet,callback:function(t){e.mailAttachmentSheet=t},expression:"mailAttachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 200px)"}},[e._l(e.mailAttachmentList,(function(s){return[t("div",{key:s.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(s.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openAttachmentFile(s)}}},[e._v(" "+e._s(s.name)+" ")])]),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(s.createdAt)))]),s.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(s.size)))])]:e._e()],2)])]}))],2)],1)]),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[e.selectedFile.formJsonId?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:e.getLabel(e.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:e._e(),t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])],2)]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.documentActionList,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.documentAction(s.id)}}})})),1)],1)],1)]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myAttachmentFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])]),t("MetaDataEdit",{attrs:{value:e.showMetaDataEditModal,file:e.workflow,"repository-field":e.repositoryField,"file-data":e.fileData,title:e.metaDataTitle||"Index",columns:e.columns,"modal-value":e.workflowModel,"upload-filename":e.uploadFilename,"meta-data-fields":e.metaDataModal},on:{close:e.closeMetaDataEditModal,save:e.saveMetaData}})],1)},a=[],o=(s("14d9"),s("13d5"),s("381e")),r=s("5e23"),n=s("1b0d"),l=s("fa1f"),c=s("a7d2"),d=s("dd90"),m=s("abe1"),h=s("bc3a"),u=s.n(h),p=s("ee54"),f=s("9996"),v=s("869e"),y=s("cade"),b={name:"Attachments",components:{Sheet:o["a"],EmailSharing:r["a"],FileIcon:l["a"],FileDetails:m["a"],MetaDataEdit:p["a"],CheckboxField:v["a"],ListItem:y["a"]},props:{value:{type:Boolean,default:!1},selectedProcess:{type:Object,default:()=>{}},workflow:{type:Object,default:()=>{}},selectedNode:{type:String,required:!0},initiateProcess:{type:Boolean,default:!1},formCheckList:{type:Boolean,default:!1},checkList:{type:Array,default:()=>[]},wform:{type:Object,default:()=>{}},repositoryDetails:{type:Object,default:()=>{}},workflowModel:{type:Object,default:()=>{}},formUploadFiles:{type:Array,default:()=>[]},formFields:{type:Array,default:()=>[]},repositoryField:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},attachments:{type:Array,default:()=>[]},workflowId:{type:Number,required:!0},isPortal:{type:Boolean,default:!1}},data(){return{attachmentSheet:!1,attachmentList:[],selectAll:!1,emailSharingSheet:!1,selectedFileList:[],fileDetailsSheet:!1,fileData:[],checkListRowIndex:0,selectedFile:{},mailTransactionList:[],mailAttachmentSheet:!1,mailAttachmentList:[],fileSheet:!1,watchViewerClose:null,reuploadFile:{},documentActionList:[{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline"},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline"}],uploadFilename:"",showMetaDataEditModal:!1,selectedUploadFile:{},documentLoad:null,documentLoadList:[],metaDataModal:{},metaDataTitle:"",selectedCheckListName:""}},computed:{selectedFileCount(){this.clearAttach();let e=this.attachmentList.filter(e=>e.checked).length;return e},isSelectedPDF(){let e=!0;return this.attachmentList.forEach(t=>{let s=t.name.split(".").pop();t.checked&&"pdf"!==s.toLowerCase()&&(e=!1)}),e}},watch:{value:{immediate:!0,handler(){if(this.value)if(this.attachmentSheet=!0,this.attachmentList=this.attachments,this.attachmentSheet&&this.selectedProcess.processId){if(this.getAttachments(),this.attachmentList.length){let e=this.attachmentList.length-1;this.getFileData(this.attachmentList[e],"file")}this.attachmentLoad=setInterval(()=>{this.getAttachments()},15e3)}else clearInterval(this.attachmentLoad)}}},methods:{async getAttachments(e=0,t=0){let s=this.attachmentList.length;e||t||(e=this.workflowId,t=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:i,payload:a}=await n["t"].getAttachments(e,t);if(this.$store.commit("hideLoadingBar"),i)this.$alert.error(i);else if(a.length?(s!==a.length&&(this.attachmentList=a.map(e=>({...e,checked:!1}))),this.$emit("attachmentCount",this.attachmentList.length)):this.attachmentList=[],this.checkList.length){this.checkList.forEach(e=>{let t=this.attachmentList.filter(t=>{let s=t.name.substr(0,t.name.lastIndexOf("."));if(e.name===s||e.name===s.split("_")[0])return t});t.length?e.attach=!0:e.attach=!1});let e=location.origin;(this.isTenantArmgroup()||"https://trial.ezofis.com"===e&&12===this.$store.state.session.tenantId)&&this.selectedProcess.attachmentCount!==this.attachmentList.length&&this.$emit("update:formCheckList",!0)}},isTenantArmgroup(){let e=location.origin;return("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://localhost:8080"===e)&&3===this.$store.state.session.tenantId},fileSelectAll(){this.attachmentList=this.attachmentList.map(e=>({...e,checked:this.selectAll}))},async documentMerge(){let e=[];this.attachmentList.forEach(t=>{let s=t.name.split(".").pop();t.checked&&"pdf"===s.toLowerCase()&&e.push(t.id)});let t={ids:e};const{error:s}=await n["t"].documentMerge(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,this.workflow.repositoryId,t);s?this.$alert.error(s):this.$alert.success("Document merge process initiated")},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(e=>{e.checked&&this.selectedFileList.push({id:e.id,name:e.name})}),this.emailSharingSheet=!0},clearAttach(){console.log("clear")},attachTemplate(e){this.checkListRowIndex=e,this.$refs.attachments.click(),this.selectedCheckListName=this.checkList.find(t=>e==t.uid).name},reupload(e){var t;e=e.substr(0,e.lastIndexOf(".")).split("_")[0],this.checkListRowIndex=null===(t=this.checkList.find(t=>t.name===e))||void 0===t?void 0:t.uid,this.$refs.attachments.click()},attachmentFilterCheckList(e){return this.attachmentList.filter(t=>t.name.substring(0,t.name.lastIndexOf("."))===e||t.name.substring(0,t.name.lastIndexOf(".")).split("_")[0]===e)},isCheckList(e){let t=this.checkList.filter(t=>t.name===e.substring(0,e.lastIndexOf("."))||t.name===e.substring(0,e.lastIndexOf(".")).split("_")[0]);return!t.length},showMailAttachments(e){this.mailAttachmentList=[];let t=e.attachmentJson.split(",");t.forEach(t=>{let s=t.split("\\").pop();this.mailAttachmentList.push({id:this.$nano.id(),mailId:e.id,name:s,createdAt:e.createdAt})}),this.mailAttachmentSheet=!0},openAttachmentFile(e){let t=`https://appuat.ezofis.com/ezofisapi/api/client/viewAttachment/${this.$store.state.session.tenantId}/${e.mailId}/${e.name}`;window.open(t,"_blank")},getLabel(e){let t="",s=this.wform.formJson?JSON.parse(this.wform.formJson):this.wform;const i=[...s.panels,...s.secondaryPanels];if(!i.length)return;let a=[];for(const o of i)a.push(...o.fields);return a.forEach(s=>{const i=s.settings.specific.tableColumns.find(t=>t.id===e);if(i)t=i.label;else if(s.id===e)return void(t=s.label)}),t},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},fileSize(e){return Object(c["a"])(e)},openFile(e){e.loading?this.$alert.info("Please wait to complete the uploading"):(this.selectedFile=e,this.isTenantArmgroup()?window.open(this.fileLink()):this.fileSheet=!0)},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let s=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(s=2);let i="";if(Object(d["d"])(t))i=this.isTenantArmgroup()?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":this.isTenantGOTO()?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html";else{if("http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${s}`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${s}`}{let s="",i="";if("inbox"!==this.selectedNode&&"common"!==this.selectedNode&&"payment"!==this.selectedNode||(i="&action=all"),Object(d["d"])(t))this.isTenantArmgroup()?(i="",s="https://ag-appsvc04.azurewebsites.net/web/viewer.html"):"https://trial.ezofis.com"!==e||Object(d["c"])(t)?s=this.isTenantGOTO()?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html":(localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),s="https://trial.ezofis.com/docsviewer/index.html");else{if(Object(d["b"])(t)||"http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),s="http://52.172.32.88/DocsViewer/index.html"}return`${s}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${i}`}}},fileMenuAction(e,t){this.selectedFile=e,this.documentAction(t,!0)},documentAction(e,t){if("Email_Sharing"===e);else if("Print"===e){if(this.selectedFile.name)if(t){let e="";if(this.selectedFile.initiate){let t=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(t=2),e=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${t}/1`}else e=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(e,"_blank")}else{let e=this.selectedFile.name.split(".").pop();Object(d["d"])(e)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myAttachmentFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===e){let e="";if(this.selectedFile.initiate){let t=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(t=2),e=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${t}/2`}else e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(e,"_blank")}},async filePrintSession(){const{error:e}=await n["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});e&&this.$alert.error(e)},async getFileData(e,t){const{error:s,payload:i}=await n["p"].getFileData({repositoryId:e.repositoryId,itemId:e.id});s?this.$alert.error(s):i&&(e.fileData?this.fileData=e.fileData:this.fileData=i,"file"!==t&&(this.fileDetailsSheet=!0))},async attachmentDelete(e){if(e.fileControl){let t=this.workflowModel[e.fieldId];if(t.length){let s=t.findIndex(t=>t.fileId===e.id);console.log(s),s>=0&&this.workflowModel[e.fieldId].splice(s,1);let i=this.formUploadFiles.findIndex(t=>t.fileId===e.id&&t.fileId===e.fileId);console.log(i),i>=0&&this.formUploadFiles.splice(s,1),e.control.length&&e.control.forEach(e=>{this.workflowModel[e]=""})}let s=this.attachmentList.findIndex(e=>e.fileControl);console.log(s),s>=0&&(this.$emit("attachmentCount",this.attachmentList.length-1),this.attachmentList.splice(s,1))}else if(e.initiate){const{error:t}=await n["r"].deleteUploadedFiles([e.id]);if(t)return void this.$alert.error(t);this.attachmentList=this.attachmentList.filter(t=>t.id!==e.id),this.checkList.forEach(t=>{t.uid===e.uid&&(t.attach=!1)})}else{const{error:t}=await n["p"].fileDelete(this.workflow.repositoryId,e.id);if(t)return void this.$alert.error(t);this.getAttachments()}},checkViewerClose(){localStorage.getItem("viewerClose")&&"true"===localStorage.getItem("viewerClose")&&(this.fileSheet=!1,localStorage.removeItem("viewerClose"),clearInterval(this.watchViewerClose),this.workflow.initiatedBy)},isTenantGOTO(){let e=location.origin;return("https://app.ezofis.com"===e||"https://appuat.ezofis.com"===e)&&2===this.$store.state.session.tenantId},customCheckUpload(){let e=location.origin;return"https://edmsuat.sobhaapps.com"===e&&(55===this.workflowId||2092===this.workflowId)&&0===this.attachmentList.length},async uploadWflowAttachments(e){if("STATIC"===this.repositoryDetails.fieldsType){if(this.selectedUploadFile=e,this.customCheckUpload()){let t=this.formFields.find(e=>"Document No"===e.label);this.uploadFilename=t?this.workflowModel[t.value]+".pdf":e.target.files[0].name}else this.uploadFilename=e.target.files[0].name;const t=this.repositoryField.reduce((e,t)=>t.level>e.level?t:e,this.repositoryField[0]),s=t.id,i=this.fileData.find(e=>s==e.id);if(!this.selectedCheckListName){const e={id:t.id,name:t.name,value:this.selectedCheckListName,type:t.dataType};this.fileData.length?i&&(i.value=""):(this.fileData.push(e),console.log(this.fileData,"selectedCheckListName")),this.showMetaDataEditModal=!0}if(this.selectedCheckListName){i&&(i.value=this.selectedCheckListName);const e={id:t.id,name:t.name,value:this.selectedCheckListName,type:t.dataType};this.fileData.length||(this.fileData.push(e),console.log(this.fileData,"selectedCheckListName"));const s=this.repositoryField.filter(e=>!0===e.isMandatory).map(e=>e.id),a=s.every(e=>{const t=this.fileData.find(t=>t.id===e);return t&&""!==t.value});if(this.showMetaDataEditModal=!a,a){const e={};this.fileData.forEach(t=>{e[t.name]=""!==t.value?t.value:""}),console.log(e,"New Object"),this.saveMetaData(e)}else this.showMetaDataEditModal=!0;this.selectedCheckListName=""}}else this.uploadAttachments(e)},async uploadAttachments(e,t){if(this.selectedProcess.processId){const i=e.target.files[0],a=new FormData;a.append("workflowId",this.workflowId),a.append("repositoryId",this.workflow.repositoryId),a.append("processId",this.selectedProcess.processId),a.append("transactionId",this.selectedProcess.transactionId),t?a.append("fields",t):a.append("fields",""),a.append("file",i);let o=e.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);a.append("filename",e[0].name+"."+r),o=e[0].name+"."+r}if(!Object(d["a"])(r))return void this.$alert.info("This file format is not supported");this.$store.commit("showLoadingBar");try{const e=await u()({url:"https://appuat.ezofis.com/ezofisapi/api/workflow/attachmentWithProcessId",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:t,data:s}=e;if(200!==t||!s)throw e;this.$alert.success("Document attached"),this.documentLoad=setInterval(()=>{this.getAttachments(),clearInterval(this.documentLoad)},15e3)}catch(s){this.$alert.error("Error uploading file"),console.error(s)}this.$store.commit("hideLoadingBar"),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value="",Object.keys(this.reuploadFile).length&&(await this.attachmentDelete(this.reuploadFile),this.reuploadFile={})}else{const i=e.target.files[0],a=new FormData;a.append("file",i),a.append("repositoryId",this.workflow.repositoryId),t&&(this.fileData=JSON.parse(t),a.append("fields",t));let o=e.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);a.append("filename",e[0].name+"."+r),o=e[0].name+"."+r}else a.append("filename",o);if(!Object(d["a"])(r))return void this.$alert.info("This file format is not supported");this.$store.commit("showLoadingBar");try{const s=await u()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}});this.$store.commit("hideLoadingBar");const{status:n,data:l}=s;if(200!==n)throw"Invalid response";let c=JSON.parse(l);this.$alert.success("Document attached");let d=this.repositoryField.reduce((e,t)=>e.level>t.level?e:t),m=this.fileData.find(e=>e.name===d.name),h=!1;"pdf"!==r.toLowerCase()&&(h=!0,this.documentLoadList.push(Number(c.fileId)),this.documentLoad=setInterval(()=>{let e=this.attachmentList.find(e=>this.documentLoadList.indexOf(e.id)>-1);e&&(this.documentLoadList.splice(this.documentLoadList.indexOf(e.id),1),e.loading=!1),0===this.documentLoadList.length&&clearInterval(this.documentLoad)},1e4)),this.attachmentList.push({id:Number(c.fileId),name:t?m.value+"."+r:o,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:i.size,initiate:!0,uid:this.checkListRowIndex,createdBy:this.$store.state.session.id,fileData:this.fileData,repositoryId:this.workflow.repositoryId,loading:h}),this.$emit("attachmentCount",this.attachmentList.length),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value=""}catch(s){console.error(s),this.$alert.error("error attaching file")}}},closeMetaDataEditModal(){this.showMetaDataEditModal=!1,this.$refs.attachments&&(this.$refs.attachments.value=null)},saveMetaData(e){let t=[];this.repositoryField.forEach(s=>{t.push({name:s.name,value:e[s.name],type:s.dataType})}),t.forEach(e=>{let t=this.formFields.find(t=>Object(f["a"])(t.label)===Object(f["a"])(e.name));t&&e.value&&(this.workflowModel[t.value]=e.value)}),this.uploadAttachments(this.selectedUploadFile,JSON.stringify(t))},closeAttachmentsSheet(){this.attachmentSheet=!1,this.$emit("update:attachments",this.attachmentList),this.$emit("attachmentCount",this.attachmentList.length),this.$emit("update:value",!1)}}},w=b,g=(s("11f5"),s("2877")),C=s("b047"),k=s("cb32"),I=s("4e73"),S=s("93dc"),_=s.n(S),A=Object(g["a"])(w,i,a,!1,null,"dc5d287e",null);t["a"]=A.exports;_()(A,"components",{QChip:C["a"],QAvatar:k["a"],QMenu:I["a"]})},ee16:function(e,t,s){},ee26:function(e,t,s){"use strict";s("cbc3")},ee54:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("Modal",{attrs:{value:e.value,"has-footer":"",width:"540px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.title))]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"form"},[e.editFromFileSheet?e._e():e._l(e._repositoryField,(function(s){return t("div",{key:s.id,staticClass:"field-wrapper"},[[[t("RepositoryField",{staticClass:"col",attrs:{field:s,"repository-id":e.file.repositoryId,"read-only":e.readOnly},model:{value:e.fieldsModel[s.name],callback:function(t){e.$set(e.fieldsModel,s.name,t)},expression:"fieldsModel[field.name]"}})]]],2)})),e.editFromFileSheet?e._l(e.fieldsModalData,(function(s){return t("div",{key:s.id,staticClass:"field-wrapper"},[[[t("RepositoryField",{staticClass:"col",attrs:{field:e.getField(s.fieldId),"repository-id":e.file.repositoryId,"read-only":e.readOnly},model:{value:s.newValue,callback:function(t){e.$set(s,"newValue",t)},expression:"field.newValue"}})]]],2)})):e._e()],2)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.save}})]},proxy:!0}])})},a=[],o=(s("14d9"),s("7bb1")),r=s("6a70"),n=s("7794"),l=s("9996"),c=s("7ee8"),d={name:"MetaDataEdit",components:{Modal:r["a"],ValidationObserver:o["a"],RepositoryField:n["a"]},props:{value:{type:Boolean,default:!1},file:{type:Object,required:!0},repositoryField:{type:Array,required:!0},fileData:{type:Array,required:!0},title:{type:String,default:"Metadata Edit"},columns:{type:Array,default:()=>[]},modalValue:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1},uploadFilename:{type:String,default:""},editFromFileSheet:{type:Boolean,default:!1},metaDataFields:{type:Object,default:()=>{}}},data(){return{fieldsModel:{},fieldsModalData:[]}},computed:{_repositoryField(){return this.repositoryField.map(e=>({...e,options:e.options?JSON.parse(e.options):[]}))}},watch:{fileData:{immediate:!0,deep:!0,async handler(){this.editFromFileSheet?(this.fieldsModalData=[],this.fileData.length&&this.fileData.forEach(e=>{this.fieldsModalData.push({fieldId:e.id,oldValue:e.value,newValue:e.value})})):this.processFieldsModel()}},value(){this.value&&this.processFieldsModel()}},methods:{processFieldsModel(){if(this.fieldsModel={},this.fileData.length?this.fileData.forEach(e=>{this.$set(this.fieldsModel,e.name,e.value)}):this._repositoryField.forEach(e=>{let t=this.columns.find(t=>Object(l["a"])(t.label)===Object(l["a"])(e.name));t?this.modalValue.formData?this.$set(this.fieldsModel,e.name,this.modalValue.formData.fields[t.id]):this.modalValue[t.name]?this.$set(this.fieldsModel,e.name,this.modalValue[t.name]):this.modalValue[t.id]&&this.$set(this.fieldsModel,e.name,this.modalValue[t.id]):Object(c["a"])(this.metaDataFields)?this.$set(this.fieldsModel,e.name,""):this.$set(this.fieldsModel,e.name,this.metaDataFields[e.name])}),this.uploadFilename){let e=this.uploadFilename.substring(0,this.uploadFilename.lastIndexOf(".")),t=this._repositoryField.find(e=>"filename"==e.name.toLowerCase());t&&this.$set(this.fieldsModel,t.name,e)}},closeModal(){this.$emit("close",!1)},async save(){const e=await this.$refs.form.validate();e&&(this.$emit("save",this.editFromFileSheet?this.fieldsModalData:this.fieldsModel),this.$emit("close",!1))},getField(e){let t=this._repositoryField.find(t=>e===t.id);if(t)return t}}},m=d,h=(s("4697"),s("2877")),u=Object(h["a"])(m,i,a,!1,null,"059cbd7c",null);t["a"]=u.exports},ee74:function(e,t,s){},ef04:function(e,t,s){},f47c:function(e,t,s){"use strict";s("bcff")},f6de:function(e,t,s){},f9d3:function(e,t,s){},fa79:function(e,t,s){"use strict";s("3002")},fdd5:function(e,t,s){"use strict";s("4d38")},ff80:function(e,t,s){}}]);
//# sourceMappingURL=workflows-inbox.73265f64.js.map