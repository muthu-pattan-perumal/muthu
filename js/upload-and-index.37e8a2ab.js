(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["upload-and-index"],{"0170":function(e,t,i){"use strict";var s=i("a026"),a=i("87e8"),l=i("e277");t["a"]=s["default"].extend({name:"QItemLabel",mixins:[a["a"]],props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},computed:{classes(){return{"q-item__label--overline text-overline":this.overline,"q-item__label--caption text-caption":this.caption,"q-item__label--header":this.header,ellipsis:1===parseInt(this.lines,10)}},style(){if(void 0!==this.lines&&parseInt(this.lines,10)>1)return{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":this.lines}}},render(e){return e("div",{staticClass:"q-item__label",style:this.style,class:this.classes,on:{...this.qListeners}},Object(l["c"])(this,"default"))}})},"09fe":function(e,t,i){"use strict";i("f620")},"0c21":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cursor-pointer",attrs:{id:"async-select-field"}},[e.label?t("FormFieldLabel",{attrs:{label:e.label,"is-mandatory":e.isMandatory,tooltip:e.tooltip}}):e._e(),t("FormFieldWrapper",{ref:"wrapper",attrs:{"is-focused":e._isFocused,"is-clearable":e._isClearable,"is-readonly":e.isReadonly,"is-disabled":e.isDisabled,"has-error":!!e.error,"action-icon":"eva-chevron-down"},on:{click:e.showOptionPicker,clear:e.handleClear},scopedSlots:e._u([{key:"default",fn:function(){return[t("div",{staticClass:"async-select"},[e.value?t("div",{staticClass:"value"},[e._v(" "+e._s(e.value)+" ")]):e._e(),t("input",{ref:"searchQuery",staticClass:"q-px-sm",attrs:{type:"text",placeholder:e._placeholder},domProps:{value:e.searchQuery},on:{focus:function(t){e.isFocused=!0},blur:function(t){e.isFocused=!1},input:e.debouncedInput,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleKeypress.apply(null,arguments)}}})]),t("q-menu",{attrs:{target:e.$refs.wrapper,fit:"","no-focus":"","no-refocus":"","no-parent-event":"","transition-show":"scale","transition-hide":"scale"},model:{value:e.optionPicker,callback:function(t){e.optionPicker=t},expression:"optionPicker"}},[t("OptionPicker",{attrs:{value:e.value,options:e._options,"new-option":e.newOption},on:{select:e.handleSelect,loadMore:e.getOptions}})],1)]},proxy:!0},{key:"action",fn:function(){return[e.isLoading?t("q-spinner",{staticClass:"q-mr-sm",attrs:{color:"secondary",size:"20px"}}):e._e()]},proxy:!0}])}),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e()],1)},a=[],l=(i("caad"),i("14d9"),i("3445")),o=i("0f01"),n=i("e683"),r=i("29db"),d=i("0d5e"),c=i("9996"),u=i("32e8"),h=i("5c8a"),p=i("85b1"),f={name:"AsyncSelectField",components:{FormFieldLabel:l["a"],FormFieldWrapper:o["a"],FormFieldError:n["a"],OptionPicker:r["a"]},props:{value:{type:[String,Number],default:null},label:{type:String,default:""},placeholder:{type:String,default:""},isMandatory:{type:Boolean,default:!1},tooltip:{type:String,default:""},isDisabled:{type:Boolean,default:!1},isReadonly:{type:Boolean,default:!1},isClearable:{type:Boolean,default:!0},error:{type:String,default:""},newOption:{type:Boolean,default:!1},apiPath:{type:String,default:""},columnName:{type:String,default:""}},data(){return{isFocused:!1,optionPicker:!1,searchQuery:"",options:[],isLoading:!1,optionsClone:[]}},computed:{_placeholder(){return""},_isFocused(){return this.isFocused||this.optionPicker},_isClearable(){return this.isClearable&&!!this.value},_options(){return this.searchQuery?this.optionsClone.filter(e=>Object(c["a"])(e).includes(Object(c["a"])(this.searchQuery))):this.optionsClone}},watch:{options:{immediate:!0,deep:!0,handler(){Object(u["a"])(this.options,this.optionsClone)||(this.optionsClone=Object(h["a"])(this.options))}},optionPicker(){this.optionPicker||(this.searchQuery="")},columnName(){this.columnName&&(this.options=[],this.getOptions())}},created(){this.getOptions()},methods:{showOptionPicker(){this.optionPicker=!0},handleChange(e){this.searchQuery=e.target.value},handleSelect(e){this.$emit("input",e),this.optionPicker=!1},handleKeypress(){this.searchQuery&&this.newOption&&(this.handleSelect(this.searchQuery),this.searchQuery="",this.$refs.searchQuery.blur())},handleClear(){this.$emit("input","")},debouncedInput:Object(p["a"])((function(e){this.searchQuery=e.target.value}),1),async getOptions(){try{const e=await d["b"].post(this.apiPath,JSON.stringify({column:this.label||this.columnName,keyword:this.searchQuery,rowFrom:this.options.length||0,rowCount:this.options.length})),{status:t,data:i}=e;if(200!==t)throw e;const s=JSON.parse(i);this.options.push(...s)}catch(e){console.error(e),this.$alert.error("Error fetching options")}}}},m=f,v=(i("da87"),i("2877")),g=i("4e73"),y=i("0d59"),b=i("93dc"),_=i.n(b),F=Object(v["a"])(m,s,a,!1,null,"f4e0ea94",null);t["a"]=F.exports;_()(F,"components",{QMenu:g["a"],QSpinner:y["a"]})},1026:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("FileList",{staticClass:"q-mb-md",attrs:{"has-files":!!e.files.length},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Uploading")]},proxy:!0},e.files.length?{key:"actions-minimized",fn:function(){return[t("Pulse",{staticClass:"q-mr-md",attrs:{color:"light-green"}})]},proxy:!0}:null,{key:"default",fn:function(){return e._l(e.files,(function(i,s){return t("FileListItem",{key:i.id,staticClass:"file",attrs:{file:i}},[e.showProgress?t("q-circular-progress",{staticClass:"font-semibold",attrs:{"show-value":"","font-size":"13px",size:"48px",color:"light-green","track-color":e.trackColor,thickness:.22,value:i.uploadedPercentage,indeterminate:!i.uploadedPercentage}},[e._v(" "+e._s(i.uploadedPercentage)+"% ")]):e._e(),e.showDeleteBtn?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.top",value:"Delete",expression:"'Delete'",arg:"red",modifiers:{top:!0}}],staticClass:"q-mr-md",attrs:{"is-flat":"",color:"red",icon:"eva-trash-2-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete",s)}}}):e._e()],1)}))},proxy:!0}],null,!0)})},a=[],l=i("9ef6"),o=i("d406"),n=i("4e64"),r=i("2f62"),d={name:"UploadingFileList",components:{FileList:l["a"],FileListItem:o["a"],Pulse:n["a"]},props:{files:{type:Array,required:!0},showProgress:{type:Boolean,default:!0},showDeleteBtn:{type:Boolean,default:!1}},computed:{...Object(r["c"])(["darkTheme"]),trackColor(){return this.darkTheme?"gray-8":"gray-3"}}},c=d,u=(i("73e0"),i("2877")),h=i("58ea"),p=i("93dc"),f=i.n(p),m=Object(u["a"])(c,s,a,!1,null,"7aa1b7fe",null);t["a"]=m.exports;f()(m,"components",{QCircularProgress:h["a"]})},"135a":function(e,t,i){},"140f":function(e,t,i){},"18d0":function(e,t,i){},"1a05":function(e,t,i){"use strict";i("6df8")},"1c1c":function(e,t,i){"use strict";var s=i("a026"),a=i("b7fa"),l=i("87e8"),o=i("e277");t["a"]=s["default"].extend({name:"QList",mixins:[l["a"],a["a"]],props:{bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},computed:{classes(){return"q-list"+(!0===this.bordered?" q-list--bordered":"")+(!0===this.dense?" q-list--dense":"")+(!0===this.separator?" q-list--separator":"")+(!0===this.isDark?" q-list--dark":"")+(!0===this.padding?" q-list--padding":"")}},render(e){return e(this.tag,{class:this.classes,on:{...this.qListeners}},Object(o["c"])(this,"default"))}})},"1c54":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("q-dialog",{attrs:{value:e.value},on:{input:e.close}},[t("div",{class:e.cssClass,style:{width:e.width},attrs:{id:"confirm"}},[t("div",{staticClass:"header"},[t("BaseIcon",{staticClass:"q-mr-md",attrs:{name:e.icon,color:e.iconColor,size:e.iconSize}}),t("div",{staticClass:"title-1"},[e._t("title")],2),t("q-space"),t("BaseCloseButton",{on:{click:e.close}})],1),e._t("default"),e.hasFooter?t("div",{staticClass:"footer"},[e._t("footer")],2):e._e()],2)])},a=[],l={name:"Confirm",props:{value:{type:Boolean,required:!0},width:{type:String,default:"480px"},icon:{type:String,required:!0},iconColor:{type:String,default:"secondary"},iconSize:{type:String,default:"20px"},hasFooter:{type:Boolean,default:!0},cssClass:{type:String,default:""}},methods:{close(){this.$emit("input",!1)}}},o=l,n=(i("c7a9"),i("2877")),r=i("24e8"),d=i("2c91"),c=i("93dc"),u=i.n(c),h=Object(n["a"])(o,s,a,!1,null,"3a193cc6",null);t["a"]=h.exports;u()(h,"components",{QDialog:r["a"],QSpace:d["a"]})},"204d":function(e,t,i){},2559:function(e,t,i){"use strict";i("18d0")},2573:function(e,t,i){"use strict";i("b963")},"283a":function(e,t,i){},2852:function(e,t,i){"use strict";i("e5e9")},"28f1":function(e,t,i){},"28f7":function(e,t,i){},"29db":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"options-picker"}},[t("BaseScrollbar",{staticClass:"q-py-sm",attrs:{height:"256px"},on:{scroll:e.handleScroll}},[e.options.length?e._l(e.options,(function(i){return t("div",{key:i,staticClass:"option",class:{"is-selected":e.isSelected(i)},on:{click:function(t){return e.handleClick(i)}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:e.icon(i),"inherit-color":""}}),t("div",{staticClass:"label"},[e._v(e._s(i))])],1)})):t("div",{staticClass:"no-option"},[t("div",{staticClass:"q-mb-sm"},[e._v("No option found")]),e.newOption?t("div",[e._v('Press "Enter" to add new option')]):e._e()])],2)],1)},a=[],l=i("85b1"),o={name:"OptionsPicker",props:{value:{type:[String,Number,Array],required:!0},options:{type:Array,required:!0},isMultiple:{type:Boolean,default:!1},newOption:{type:Boolean,default:!1}},methods:{isSelected(e){return this.isMultiple?!!this.value.find(t=>t===e):this.value===e},icon(e){const t=this.isSelected(e);return this.isMultiple?t?"mdi-checkbox-marked":"mdi-checkbox-blank-outline":t?"eva-radio-button-on":"eva-radio-button-off"},handleClick(e){this.$emit("select",e)},handleScroll:Object(l["a"])((function(e){const t=e.target.scrollHeight,i=e.target.scrollTop,s=e.target.clientHeight,a=t-i===s;a&&this.$emit("loadMore")}),300)}},n=o,r=(i("1a05"),i("2877")),d=Object(r["a"])(n,s,a,!1,null,"12738659",null);t["a"]=d.exports},"2b88":function(e,t,i){"use strict";
/*! 
  * portal-vue © Thorsten Lünborg, 2019 
  * 
  * Version: 2.1.7
  * 
  * LICENCE: MIT 
  * 
  * https://github.com/linusborg/portal-vue
  * 
 */function s(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}Object.defineProperty(t,"__esModule",{value:!0});var a=s(i("a026"));function l(e){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function o(e){return n(e)||r(e)||d()}function n(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var c="undefined"!==typeof window;function u(e){return Array.isArray(e)||"object"===l(e)?Object.freeze(e):e}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.reduce((function(e,i){var s=i.passengers[0],a="function"===typeof s?s(t):i.passengers;return e.concat(a)}),[])}function p(e,t){return e.map((function(e,t){return[t,e]})).sort((function(e,i){return t(e[1],i[1])||e[0]-i[0]})).map((function(e){return e[1]}))}function f(e,t){return t.reduce((function(t,i){return e.hasOwnProperty(i)&&(t[i]=e[i]),t}),{})}var m={},v={},g={},y=a.extend({data:function(){return{transports:m,targets:v,sources:g,trackInstances:c}},methods:{open:function(e){if(c){var t=e.to,i=e.from,s=e.passengers,l=e.order,o=void 0===l?1/0:l;if(t&&i&&s){var n={to:t,from:i,passengers:u(s),order:o},r=Object.keys(this.transports);-1===r.indexOf(t)&&a.set(this.transports,t,[]);var d=this.$_getTransportIndex(n),h=this.transports[t].slice(0);-1===d?h.push(n):h[d]=n,this.transports[t]=p(h,(function(e,t){return e.order-t.order}))}}},close:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.to,s=e.from;if(i&&(s||!1!==t)&&this.transports[i])if(t)this.transports[i]=[];else{var a=this.$_getTransportIndex(e);if(a>=0){var l=this.transports[i].slice(0);l.splice(a,1),this.transports[i]=l}}},registerTarget:function(e,t,i){c&&(this.trackInstances&&!i&&this.targets[e]&&console.warn("[portal-vue]: Target ".concat(e," already exists")),this.$set(this.targets,e,Object.freeze([t])))},unregisterTarget:function(e){this.$delete(this.targets,e)},registerSource:function(e,t,i){c&&(this.trackInstances&&!i&&this.sources[e]&&console.warn("[portal-vue]: source ".concat(e," already exists")),this.$set(this.sources,e,Object.freeze([t])))},unregisterSource:function(e){this.$delete(this.sources,e)},hasTarget:function(e){return!(!this.targets[e]||!this.targets[e][0])},hasSource:function(e){return!(!this.sources[e]||!this.sources[e][0])},hasContentFor:function(e){return!!this.transports[e]&&!!this.transports[e].length},$_getTransportIndex:function(e){var t=e.to,i=e.from;for(var s in this.transports[t])if(this.transports[t][s].from===i)return+s;return-1}}}),b=new y(m),_=1,F=a.extend({name:"portal",props:{disabled:{type:Boolean},name:{type:String,default:function(){return String(_++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}}},created:function(){var e=this;this.$nextTick((function(){b.registerSource(e.name,e)}))},mounted:function(){this.disabled||this.sendUpdate()},updated:function(){this.disabled?this.clear():this.sendUpdate()},beforeDestroy:function(){b.unregisterSource(this.name),this.clear()},watch:{to:function(e,t){t&&t!==e&&this.clear(t),this.sendUpdate()}},methods:{clear:function(e){var t={from:this.name,to:e||this.to};b.close(t)},normalizeSlots:function(){return this.$scopedSlots.default?[this.$scopedSlots.default]:this.$slots.default},normalizeOwnChildren:function(e){return"function"===typeof e?e(this.slotProps):e},sendUpdate:function(){var e=this.normalizeSlots();if(e){var t={from:this.name,to:this.to,passengers:o(e),order:this.order};b.open(t)}else this.clear()}},render:function(e){var t=this.$slots.default||this.$scopedSlots.default||[],i=this.tag;return t&&this.disabled?t.length<=1&&this.slim?this.normalizeOwnChildren(t)[0]:e(i,[this.normalizeOwnChildren(t)]):this.slim?e():e(i,{class:{"v-portal":!0},style:{display:"none"},key:"v-portal-placeholder"})}}),S=a.extend({name:"portalTarget",props:{multiple:{type:Boolean,default:!1},name:{type:String,required:!0},slim:{type:Boolean,default:!1},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},data:function(){return{transports:b.transports,firstRender:!0}},created:function(){var e=this;this.$nextTick((function(){b.registerTarget(e.name,e)}))},watch:{ownTransports:function(){this.$emit("change",this.children().length>0)},name:function(e,t){b.unregisterTarget(t),b.registerTarget(e,this)}},mounted:function(){var e=this;this.transition&&this.$nextTick((function(){e.firstRender=!1}))},beforeDestroy:function(){b.unregisterTarget(this.name)},computed:{ownTransports:function(){var e=this.transports[this.name]||[];return this.multiple?e:0===e.length?[]:[e[e.length-1]]},passengers:function(){return h(this.ownTransports,this.slotProps)}},methods:{children:function(){return 0!==this.passengers.length?this.passengers:this.$scopedSlots.default?this.$scopedSlots.default(this.slotProps):this.$slots.default||[]},noWrapper:function(){var e=this.slim&&!this.transition;return e&&this.children().length>1&&console.warn("[portal-vue]: PortalTarget with `slim` option received more than one child element."),e}},render:function(e){var t=this.noWrapper(),i=this.children(),s=this.transition||this.tag;return t?i[0]:this.slim&&!s?e():e(s,{props:{tag:this.transition&&this.tag?this.tag:void 0},class:{"vue-portal-target":!0}},i)}}),x=0,C=["disabled","name","order","slim","slotProps","tag","to"],w=["multiple","transition"],T=a.extend({name:"MountingPortal",inheritAttrs:!1,props:{append:{type:[Boolean,String]},bail:{type:Boolean},mountTo:{type:String,required:!0},disabled:{type:Boolean},name:{type:String,default:function(){return"mounted_"+String(x++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}},multiple:{type:Boolean,default:!1},targetSlim:{type:Boolean},targetSlotProps:{type:Object,default:function(){return{}}},targetTag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},created:function(){if("undefined"!==typeof document){var e=document.querySelector(this.mountTo);if(e){var t=this.$props;if(b.targets[t.name])t.bail?console.warn("[portal-vue]: Target ".concat(t.name," is already mounted.\n        Aborting because 'bail: true' is set")):this.portalTarget=b.targets[t.name];else{var i=t.append;if(i){var s="string"===typeof i?i:"DIV",a=document.createElement(s);e.appendChild(a),e=a}var l=f(this.$props,w);l.slim=this.targetSlim,l.tag=this.targetTag,l.slotProps=this.targetSlotProps,l.name=this.to,this.portalTarget=new S({el:e,parent:this.$parent||this,propsData:l})}}else console.error("[portal-vue]: Mount Point '".concat(this.mountTo,"' not found in document"))}},beforeDestroy:function(){var e=this.portalTarget;if(this.append){var t=e.$el;t.parentNode.removeChild(t)}e.$destroy()},render:function(e){if(!this.portalTarget)return console.warn("[portal-vue] Target wasn't mounted"),e();if(!this.$scopedSlots.manual){var t=f(this.$props,C);return e(F,{props:t,attrs:this.$attrs,on:this.$listeners,scopedSlots:this.$scopedSlots},this.$slots.default)}var i=this.$scopedSlots.manual({to:this.to});return Array.isArray(i)&&(i=i[0]),i||e()}});function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component(t.portalName||"Portal",F),e.component(t.portalTargetName||"PortalTarget",S),e.component(t.MountingPortalName||"MountingPortal",T)}var I={install:k};t.default=I,t.Portal=F,t.PortalTarget=S,t.MountingPortal=T,t.Wormhole=b},"33aa":function(e,t,i){},3980:function(e,t,i){"use strict";var s=i("a026"),a=i("d882"),l=i("0967"),o={data(){return{canRender:!l["f"]}},mounted(){!1===this.canRender&&(this.canRender=!0)}},n=i("d54d");t["a"]=s["default"].extend({name:"QResizeObserver",mixins:[o],props:{debounce:{type:[String,Number],default:100}},data(){return!0===this.hasObserver?{}:{url:!0===this.$q.platform.is.ie?null:"about:blank"}},methods:{trigger(e){!0===e||0===this.debounce||"0"===this.debounce?this.__emit():null===this.timer&&(this.timer=setTimeout(this.__emit,this.debounce))},__emit(){if(null!==this.timer&&(clearTimeout(this.timer),this.timer=null),!this.$el||!this.$el.parentNode)return;const e=this.$el.parentNode,t={width:e.offsetWidth,height:e.offsetHeight};t.width===this.size.width&&t.height===this.size.height||(this.size=t,this.$emit("resize",this.size))},__cleanup(){void 0!==this.curDocView&&(void 0!==this.curDocView.removeEventListener&&this.curDocView.removeEventListener("resize",this.trigger,a["f"].passive),this.curDocView=void 0)},__onObjLoad(){this.__cleanup(),this.$el.contentDocument&&(this.curDocView=this.$el.contentDocument.defaultView,this.curDocView.addEventListener("resize",this.trigger,a["f"].passive)),this.__emit()}},render(e){if(!1!==this.canRender&&!0!==this.hasObserver)return e("object",{style:this.style,attrs:{tabindex:-1,type:"text/html",data:this.url,"aria-hidden":"true"},on:Object(n["b"])(this,"load",{load:this.__onObjLoad})})},beforeCreate(){this.size={width:-1,height:-1},!0!==l["e"]&&(this.hasObserver="undefined"!==typeof ResizeObserver,!0!==this.hasObserver&&(this.style=(this.$q.platform.is.ie?"visibility:hidden;":"")+"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;"))},mounted(){if(this.timer=null,!0===this.hasObserver)return this.observer=new ResizeObserver(this.trigger),this.observer.observe(this.$el.parentNode),void this.__emit();!0===this.$q.platform.is.ie?(this.url="about:blank",this.__emit()):this.__onObjLoad()},beforeDestroy(){clearTimeout(this.timer),!0!==this.hasObserver?this.__cleanup():void 0!==this.observer&&this.$el.parentNode&&this.observer.unobserve(this.$el.parentNode)}})},"39cc":function(e,t,i){"use strict";i("fad0")},"3b73":function(e,t,i){"use strict";i("3c65"),i("14d9");var s=i("a026"),a=i("66e5"),l=i("4074"),o=i("0170"),n=i("0016"),r=i("e9c1"),d=i("eb85"),c=i("8716"),u=i("463c"),h=i("7ee0"),p=i("b7fa"),f=i("d882"),m=i("e277"),v=i("d54d"),g=i("1732");const y="q:expansion-item:close",b=Object.keys(c["b"]);t["a"]=s["default"].extend({name:"QExpansionItem",mixins:[p["a"],u["a"],h["a"]],props:{...c["b"],icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},data(){return{showing:void 0!==this.value?this.value:this.defaultOpened}},watch:{showing(e){!0===e&&void 0!==this.group&&this.$root.$emit(y,this)},group(e,t){void 0!==e&&void 0===t?this.$root.$on(y,this.__eventHandler):void 0===e&&void 0!==t&&this.$root.$off(y,this.__eventHandler)}},computed:{classes(){return"q-expansion-item--"+(!0===this.showing?"expanded":"collapsed")+" q-expansion-item--"+(!0===this.popup?"popup":"standard")},contentStyle(){if(void 0!==this.contentInsetLevel){const e=!0===this.$q.lang.rtl?"Right":"Left";return{["padding"+e]:56*this.contentInsetLevel+"px"}}},hasLink(){return!0!==this.disable&&(void 0!==this.href||void 0!==this.to&&null!==this.to&&""!==this.to)},linkProps(){const e={};return b.forEach(t=>{e[t]=this[t]}),e},isClickable(){return!0===this.hasLink||!0!==this.expandIconToggle},expansionIcon(){return void 0!==this.expandedIcon&&!0===this.showing?this.expandedIcon:this.expandIcon||this.$q.iconSet.expansionItem[!0===this.denseToggle?"denseIcon":"icon"]},activeToggleIcon(){return!0!==this.disable&&(!0===this.hasLink||!0===this.expandIconToggle)},headerSlotScope(){return{expanded:!0===this.showing,detailsId:this.targetUid,toggle:this.toggle,show:this.show,hide:this.hide}},toggleAriaAttrs(){const e=void 0!==this.toggleAriaLabel?this.toggleAriaLabel:this.$q.lang.label[!0===this.showing?"collapse":"expand"](this.label);return{role:"button","aria-expanded":!0===this.showing?"true":"false","aria-controls":this.targetUid,"aria-label":e}}},methods:{__onHeaderClick(e){!0!==this.hasLink&&this.toggle(e),this.$emit("click",e)},__toggleIconKeyboard(e){13===e.keyCode&&this.__toggleIcon(e,!0)},__toggleIcon(e,t){!0!==t&&void 0!==this.$refs.blurTarget&&this.$refs.blurTarget.focus(),this.toggle(e),Object(f["l"])(e)},__eventHandler(e){this!==e&&this.group===e.group&&this.hide()},__getToggleIcon(e){const t={staticClass:"q-focusable relative-position cursor-pointer"+(!0===this.denseToggle&&!0===this.switchToggleSide?" items-end":""),class:this.expandIconClass,props:{side:!0!==this.switchToggleSide,avatar:this.switchToggleSide}},i=[e(n["a"],{staticClass:"q-expansion-item__toggle-icon",class:void 0===this.expandedIcon&&!0===this.showing?"q-expansion-item__toggle-icon--rotated":void 0,props:{name:this.expansionIcon}})];return!0===this.activeToggleIcon&&(Object.assign(t,{attrs:{tabindex:0,...this.toggleAriaAttrs},on:Object(v["b"])(this,"inpExt",{click:this.__toggleIcon,keyup:this.__toggleIconKeyboard})}),i.unshift(e("div",{ref:"blurTarget",staticClass:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",attrs:{tabindex:-1}}))),e(l["a"],t,i)},__getHeader(e){let t;void 0!==this.$scopedSlots.header?t=[].concat(this.$scopedSlots.header(this.headerSlotScope)):(t=[e(l["a"],[e(o["a"],{props:{lines:this.labelLines}},[this.label||""]),this.caption?e(o["a"],{props:{lines:this.captionLines,caption:!0}},[this.caption]):null])],this.icon&&t[!0===this.switchToggleSide?"push":"unshift"](e(l["a"],{props:{side:!0===this.switchToggleSide,avatar:!0!==this.switchToggleSide}},[e(n["a"],{props:{name:this.icon}})]))),!0!==this.disable&&!0!==this.hideExpandIcon&&t[!0===this.switchToggleSide?"unshift":"push"](this.__getToggleIcon(e));const i={ref:"item",style:this.headerStyle,class:this.headerClass,props:{dark:this.isDark,disable:this.disable,dense:this.dense,insetLevel:this.headerInsetLevel}};return!0===this.isClickable&&(i.props.clickable=!0,!0===this.hasLink?Object.assign(i.props,this.linkProps):i.attrs=this.toggleAriaAttrs,i.on={...this.qListeners,click:this.__onHeaderClick}),e(a["a"],i,t)},__getContent(e){const t=[this.__getHeader(e),e(r["a"],{props:{duration:this.duration},on:Object(v["b"])(this,"slide",{show:()=>{this.$emit("after-show")},hide:()=>{this.$emit("after-hide")}})},[e("div",{staticClass:"q-expansion-item__content relative-position",style:this.contentStyle,attrs:{id:this.targetUid},directives:[{name:"show",value:this.showing}]},Object(m["c"])(this,"default"))])];return this.expandSeparator&&t.push(e(d["a"],{staticClass:"q-expansion-item__border q-expansion-item__border--top absolute-top",props:{dark:this.isDark}}),e(d["a"],{staticClass:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",props:{dark:this.isDark}})),t}},render(e){return e("div",{staticClass:"q-expansion-item q-item-type",class:this.classes},[e("div",{staticClass:"q-expansion-item__container relative-position"},this.__getContent(e))])},created(){void 0!==this.group&&this.$root.$on(y,this.__eventHandler),this.targetUid="e_"+Object(g["a"])()},beforeDestroy(){void 0!==this.group&&this.$root.$off(y,this.__eventHandler)}})},4074:function(e,t,i){"use strict";var s=i("a026"),a=i("87e8"),l=i("e277");t["a"]=s["default"].extend({name:"QItemSection",mixins:[a["a"]],props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},computed:{classes(){const e=this.avatar||this.side||this.thumbnail;return{"q-item__section--top":this.top,"q-item__section--avatar":this.avatar,"q-item__section--thumbnail":this.thumbnail,"q-item__section--side":e,"q-item__section--nowrap":this.noWrap,"q-item__section--main":!e,["justify-"+(this.top?"start":"center")]:!0}}},render(e){return e("div",{staticClass:"q-item__section column",class:this.classes,on:{...this.qListeners}},Object(l["c"])(this,"default"))}})},"42dc":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"workspace-list"}},[t("div",{staticClass:"title"},[e._v("Workspace")]),t("div",{staticClass:"wrapper"},[t("ValidationProvider",{attrs:{name:"workspace",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{attrs:{value:e.value,"is-mandatory":"","is-clearable":!1,options:e.workspaces,"is-readonly":"",error:i[0]},on:{input:e.handleInput}})]}}])})],1)])},a=[],l=i("1b0d"),o=i("7bb1"),n=i("12b8"),r={name:"WorkspaceList",components:{ValidationProvider:o["b"],SelectField:n["a"]},props:{value:{type:Number,required:!0}},data(){return{workspaces:[]}},created(){this.getWorkspaces()},methods:{handleInput(e){this.$emit("input",e)},async getWorkspaces(){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await l["u"].getWorkspaceList();this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t&&(this.workspaces=t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id})))}}},d=r,c=(i("2852"),i("2877")),u=Object(c["a"])(d,s,a,!1,null,"d504442c",null);t["a"]=u.exports},"4d7e":function(e,t,i){"use strict";i("609d")},"4e64":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{style:e._style,attrs:{id:"pulse"}})},a=[],l=i("b263"),o={name:"Pulse",props:{color:{type:String,default:"secondary",validator:l["a"]}},computed:{_style(){return`background-color: var(--${this.color}); color: var(--${this.color})`}}},n=o,r=(i("e953"),i("2877")),d=Object(r["a"])(n,s,a,!1,null,"123d286d",null);t["a"]=d.exports},"5d0d":function(e,t,i){"use strict";i("9341")},"5e5c":function(e,t,i){"use strict";i("204d")},"5f3d":function(e,t,i){},"609d":function(e,t,i){},"61cf":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",[e.showWorkspaceRepository?[t("WorkspaceList",{model:{value:e.workspaceId,callback:function(t){e.workspaceId=t},expression:"workspaceId"}}),t("RepositoryList",{attrs:{"workspace-id":e.workspaceId},model:{value:e.repositoryId,callback:function(t){e.repositoryId=t},expression:"repositoryId"}})]:e._e(),t("div",{class:[{"is-dragging":e.isDragging},{"is-indexing":e.tabIndexing}],attrs:{id:"dropzone"}},[t("div",{staticClass:"hint"},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"128px","inherit-color":""}}),t("div",{staticClass:"title"},[e._v("Drag & Drop your files here to upload")]),t("div",{staticClass:"description"},[e._v(" Simply dragging and dropping them from the user's computer or device onto a designated area on the screen ")]),t("OrDivider",{staticClass:"full-width"}),e.tabIndexing?t("BaseButton",{attrs:{icon:"eva-plus",label:"Add more files"}}):t("BaseButton",{attrs:{label:"browse files"}})],1),t("input",{ref:"dropzone",attrs:{type:"file",multiple:e.hasMultiple},on:{dragenter:function(t){e.isDragging=!0},dragleave:function(t){e.isDragging=!1},drop:function(t){e.isDragging=!1},change:e.handleChange}})])],2)},a=[],l=(i("caad"),i("14d9"),i("42dc")),o=i("dc7a"),n=i("9c79"),r=i("2f62"),d=i("dd90"),c={name:"Dropzone",components:{WorkspaceList:l["a"],RepositoryList:o["a"],OrDivider:n["a"]},props:{workspaceId:{type:Number,required:!0},repositoryId:{type:Number,required:!0},hasMultiple:{type:Boolean,default:!0},showWorkspaceRepository:{type:Boolean,default:!0},tabIndexing:{type:Boolean,default:!1}},data(){return{isDragging:!1}},computed:{...Object(r["c"])(["session"]),fileSizeLimit(){return this.session.license,52428800}},methods:{handleChange(e){const t=e.target.files,i=[],s=["exe"];if(t.length){for(let e of t){if(e.size>this.fileSizeLimit)return void this.$alert.warning(e.name+" - Maximum file size exceeded");const t=e.name.split(".").reverse()[0];if(s.includes(t))return void this.$alert.warning(e.name+" - Invalid file type");if(!Object(d["a"])(t))return void this.$alert.warning(e.name+" - Invalid file type");i.push({id:this.$nano.id(),name:e.name,type:t.slice(0,4),size:e.size,createdAt:"",status:"UPLOADING",file:e,uploadedPercentage:0})}this.$refs.dropzone.value="",this.$emit("upload",i)}}}},u=c,h=(i("9495"),i("2877")),p=Object(h["a"])(u,s,a,!1,null,"dc127c58",null);t["a"]=p.exports},"63d8":function(e,t,i){},"64ed3":function(e,t,i){"use strict";i("7c62")},"66e5":function(e,t,i){"use strict";i("3c65");var s=i("a026"),a=i("b7fa"),l=i("e2fa"),o=i("8716"),n=i("87e8"),r=i("e277"),d=i("d882"),c=i("dc8a");t["a"]=s["default"].extend({name:"QItem",mixins:[a["a"],o["a"],l["a"],n["a"]],props:{active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},computed:{isActionable(){return!0===this.clickable||!0===this.hasLink||"label"===this.tag},isClickable(){return!0!==this.disable&&!0===this.isActionable},classes(){return"q-item q-item-type row no-wrap"+(!0===this.dense?" q-item--dense":"")+(!0===this.isDark?" q-item--dark":"")+(!0===this.hasLink&&null===this.active?this.linkClass:!0===this.active?` q-item--active${void 0!==this.activeClass?" "+this.activeClass:""} `:"")+(!0===this.disable?" disabled":"")+(!0===this.isClickable?" q-item--clickable q-link cursor-pointer "+(!0===this.manualFocus?"q-manual-focusable":"q-focusable q-hoverable")+(!0===this.focused?" q-manual-focusable--focused":""):"")},style(){if(void 0!==this.insetLevel){const e=!0===this.$q.lang.rtl?"Right":"Left";return{["padding"+e]:16+56*this.insetLevel+"px"}}},onEvents(){return{...this.qListeners,click:this.__onClick,keyup:this.__onKeyup}}},methods:{__onClick(e){!0===this.isClickable&&(void 0!==this.$refs.blurTarget&&(!0!==e.qKeyEvent&&document.activeElement===this.$el?this.$refs.blurTarget.focus():document.activeElement===this.$refs.blurTarget&&this.$el.focus()),this.__navigateOnClick(e))},__onKeyup(e){if(!0===this.isClickable&&!0===Object(c["a"])(e,13)){Object(d["l"])(e),e.qKeyEvent=!0;const t=new MouseEvent("click",e);t.qKeyEvent=!0,this.$el.dispatchEvent(t)}this.$emit("keyup",e)},__getContent(e){const t=Object(r["d"])(this,"default",[]);return!0===this.isClickable&&t.unshift(e("div",{staticClass:"q-focus-helper",attrs:{tabindex:-1},ref:"blurTarget"})),t}},render(e){const t={class:this.classes,style:this.style,attrs:{role:"listitem"},on:this.onEvents};return!0===this.isClickable?(t.attrs.tabindex=this.tabindex||"0",Object.assign(t.attrs,this.linkAttrs)):!0===this.isActionable&&(t.attrs["aria-disabled"]="true"),e(this.linkTag,t,this.__getContent(e))}})},"68ae":function(e,t,i){"use strict";i("135a")},"6b50":function(e,t,i){"use strict";i("140f")},"6b83":function(e,t,i){},"6df8":function(e,t,i){},7164:function(e,t,i){"use strict";i("33aa")},"72b7":function(e,t,i){"use strict";i("95e0")},"73e0":function(e,t,i){"use strict";i("8ddd")},"73e8":function(e,t,i){},7794:function(e,t,i){"use strict";i("caad");var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{attrs:{id:"repository-field"}},[e.showFreeze?t("div",{attrs:{id:"checkbox-field"}},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Freeze",expression:"'Freeze'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:e.freezed?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:e.handleFreeze},model:{value:e.freezed,callback:function(t){e.freezed=t},expression:"freezed"}})],1):e._e(),"SHORT_TEXT"===e.field.dataType||"BARCODE"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:i[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,2138129544)}):e._e(),"NUMBER"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory,integer:!e.field.options.allowDecimals}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("NumberField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:i[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,3272965974)}):e._e(),"DATE"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("DateField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:i[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,2736912833)}):e._e(),"TIME"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TimeField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:i[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,2195704480)}):e._e(),"DATE_TIME"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("DateTimeField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:i[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,1802324180)}):e._e(),"SINGLE_SELECT"===e.field.dataType&&["EXISTING"].includes(e.field.options.optionsType)?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("AsyncSelectField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,"api-path":e.apiPath,error:i[0],"new-option":e.field.options.allowToAddNewOptions,"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,364407705)}):e._e(),"SINGLE_SELECT"===e.field.dataType&&"PREDEFINED"===e.field.options.optionsType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:i[0],"new-option":e.field.options.allowToAddNewOptions,options:e.predefinedSelectOptions,"is-readonly":e.readOnly,page:"repository"},on:{input:e.handleInput}})]}}],null,!1,3382750843)}):e._e(),"SINGLE_SELECT"===e.field.dataType&&["MASTER"].includes(e.field.options.optionsType)?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:i[0],"new-option":e.field.options.allowToAddNewOptions,options:e.options,"is-readonly":e.readOnly,page:"repository"},on:{input:e.handleInput}})]}}],null,!1,768311157)}):e._e(),"BOOLEAN"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SingleChoiceField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,options:e.booleanOptions,error:i[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,61245750)}):e._e(),"OMR"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SingleChoiceField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,options:e.omrOptions,error:i[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,1875132930)}):e._e()],1),t("div",{staticClass:"row items-center justify-center q-mt-sm"},[e.visiableSyncBtn?t("BaseButton",{attrs:{label:"Sync",color:"secondary"},on:{click:function(t){return e.$emit("saveSync",e.field)}}}):e._e()],1)])},a=[],l=i("7bb1"),o=i("b3d1"),n=i("ad54"),r=i("53c1"),d=i("cedb"),c=i("d1e5"),u=i("12b8"),h=i("0c21"),p=i("9234"),f=i("0d5e"),m={name:"RepositoryField",components:{ValidationProvider:l["b"],TextField:o["a"],NumberField:n["a"],DateField:r["a"],TimeField:d["a"],DateTimeField:c["a"],SelectField:u["a"],AsyncSelectField:h["a"],SingleChoiceField:p["a"]},props:{field:{type:Object,required:!0},repositoryId:{type:[String,Number],required:!0},value:{type:[String,Number],required:!0},readOnly:{type:Boolean,default:!1},label:{type:String,default:""},syncField:{type:Object,default:()=>{}},parentControl:{type:Boolean,default:!1},rowIndex:{type:Number,required:!0},filter:{type:Boolean,default:!1},freezedData:{type:Object,default:()=>{}},showFreeze:{type:Boolean,default:!1}},data(){return{booleanOptions:[{id:this.$nano.id(),label:this.field.options.truthyValue,value:this.field.options.truthyValue},{id:this.$nano.id(),label:this.field.options.falsyValue,value:this.field.options.falsyValue}],omrOptions:[{id:this.$nano.id(),label:"Yes",value:"true"},{id:this.$nano.id(),label:"No",value:"false"}],visiableSyncBtn:!1,options:[],freeze:!1,freezeData:this.freezedData,freezed:!1}},computed:{predefinedSelectOptions(){return this.field.options.predefinedOptions.map(e=>({id:this.$nano.id(),label:e,value:e}))},apiPath(){return`/repository/${this.repositoryId}/uniqueColumnValues`}},watch:{field:{immediate:!0,async handler(){for(let e in this.syncField)this.syncField[e]===this.field.name&&(this.visiableSyncBtn=!0)}},filter:{immediate:!0,deep:!0,handler(){this.field.filterBy&&this.field.options.masterFormId&&this.getMasterEntriesFilter(this.field)}}},created(){this.freezedData&&(this.freezed=this.field.name in this.freezedData),this.field.options.masterFormId&&this.getMasterEntries(this.field.options.masterFormId,this.field.options.masterTableColumn)},methods:{handleInput(e){this.$emit("input",e),this.parentControl&&this.$emit("filterBy",this.field,this.rowIndex),this.freezed&&this.updateOrAddField(this.field.name,e)},handleFreeze(){this.freezed=!this.freezed,this.freezed?(this.updateOrAddField(this.field.name,this.value),this.$emit("update:freezed",this.freeze)):this.$emit("update:removeFreezed",this.field.name)},updateOrAddField(e,t){e in this.freezeData?this.freezeData[e]=t:this.freezeData={...this.freezeData,[e]:t},this.$emit("update:freezedData",this.freezeData)},async getMasterEntries(e,t){try{const i=await f["b"].post(`/form/${e}/uniqueColumnValues`,JSON.stringify({column:t,keyword:"",rowFrom:0,rowCount:0})),{status:s,data:a}=i;if(200!==s)throw i;const l=JSON.parse(a);l.length&&(this.options=l.map(e=>({id:this.$nano.id(),label:e,value:e})))}catch(i){console.error(i),this.$alert.error("Error fetching options")}},async getMasterEntriesFilter(e){try{const t=await f["b"].post(`/form/${e.options.masterFormId}/uniqueColumnValues`,JSON.stringify({column:e.options.masterTableColumn,keyword:"",rowFrom:0,rowCount:0,filters:e.filterBy})),{status:i,data:s}=t;if(200!==i)throw t;const a=JSON.parse(s);a.length?(this.options=a.map(e=>({id:this.$nano.id(),label:e,value:e})),1===this.options.length&&this.handleInput(this.options[0].value)):(this.field.options.masterFormId&&this.getMasterEntries(this.field.options.masterFormId,this.field.options.masterTableColumn),this.handleInput(""))}catch(t){console.error(t),this.$alert.error("Error fetching options")}}}},v=m,g=(i("87dc"),i("2877")),y=Object(g["a"])(v,s,a,!1,null,"174d3602",null);t["a"]=y.exports},"7c62":function(e,t,i){},"7c86":function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return o}));const s=["left","right","up","down","horizontal","vertical"],a={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0,all:!0};function l(e){const t={};return s.forEach(i=>{e[i]&&(t[i]=!0)}),0===Object.keys(t).length?a:(!0===t.horizontal&&(t.left=t.right=!0),!0===t.vertical&&(t.up=t.down=!0),!0===t.left&&!0===t.right&&(t.horizontal=!0),!0===t.up&&!0===t.down&&(t.vertical=!0),!0===t.horizontal&&!0===t.vertical&&(t.all=!0),t)}function o(e,t){return void 0===t.event&&void 0!==e.target&&!0!==e.target.draggable&&"function"===typeof t.handler&&"INPUT"!==e.target.nodeName.toUpperCase()&&(void 0===e.qClonedBy||-1===e.qClonedBy.indexOf(t.uid))}},"7e44":function(e,t,i){"use strict";i("28f1")},"85b1":function(e,t,i){"use strict";var s=i("2332"),a=i("26ee"),l=function(){return a["a"].Date.now()},o=l,n=/\s/;function r(e){var t=e.length;while(t--&&n.test(e.charAt(t)));return t}var d=r,c=/^\s+/;function u(e){return e?e.slice(0,d(e)+1).replace(c,""):e}var h=u,p=i("1bc6"),f=NaN,m=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,g=/^0o[0-7]+$/i,y=parseInt;function b(e){if("number"==typeof e)return e;if(Object(p["a"])(e))return f;if(Object(s["a"])(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(s["a"])(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=h(e);var i=v.test(e);return i||g.test(e)?y(e.slice(2),i?2:8):m.test(e)?f:+e}var _=b,F="Expected a function",S=Math.max,x=Math.min;function C(e,t,i){var a,l,n,r,d,c,u=0,h=!1,p=!1,f=!0;if("function"!=typeof e)throw new TypeError(F);function m(t){var i=a,s=l;return a=l=void 0,u=t,r=e.apply(s,i),r}function v(e){return u=e,d=setTimeout(b,t),h?m(e):r}function g(e){var i=e-c,s=e-u,a=t-i;return p?x(a,n-s):a}function y(e){var i=e-c,s=e-u;return void 0===c||i>=t||i<0||p&&s>=n}function b(){var e=o();if(y(e))return C(e);d=setTimeout(b,g(e))}function C(e){return d=void 0,f&&a?m(e):(a=l=void 0,r)}function w(){void 0!==d&&clearTimeout(d),u=0,a=c=l=d=void 0}function T(){return void 0===d?r:C(o())}function k(){var e=o(),i=y(e);if(a=arguments,l=this,c=e,i){if(void 0===d)return v(c);if(p)return clearTimeout(d),d=setTimeout(b,t),m(c)}return void 0===d&&(d=setTimeout(b,t)),r}return t=_(t)||0,Object(s["a"])(i)&&(h=!!i.leading,p="maxWait"in i,n=p?S(_(i.maxWait)||0,t):n,f="trailing"in i?!!i.trailing:f),k.cancel=w,k.flush=T,k}t["a"]=C},"87dc":function(e,t,i){"use strict";i("5f3d")},"888a":function(e,t,i){},8900:function(e,t,i){"use strict";i("bbc1")},"8b18":function(e,t,i){"use strict";i("28f7")},"8b7a":function(e,t,i){},"8d98":function(e,t,i){"use strict";i("63d8")},"8ddd":function(e,t,i){},"8fbb":function(e,t,i){},9341:function(e,t,i){},9495:function(e,t,i){"use strict";i("888a")},"95e0":function(e,t,i){},"97e5":function(e,t,i){"use strict";i("283a")},"9e47":function(e,t,i){"use strict";function s(e,t,i,s){return Object.defineProperty(e,t,{get:i,set:s,enumerable:!0}),e}i.d(t,"a",(function(){return s}))},"9ef6":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"file-list"}},[t("div",{staticClass:"header",class:{"has-selected-files":e.hasSelectedFiles},on:{click:e.toggleContent}},[t("div",{staticClass:"label name-and-files"},[e._t("label"),t("span",{staticClass:"q-ml-xs"},[e._v("("+e._s(e.numberOfFiles)+")")])],2),t("q-space"),e.showAutoLoad?t("div",{staticClass:"auto-reload"},[e.isContentMaximized?t("p",{staticClass:"q-ml-sm text-gray ellipsis",staticStyle:{"font-size":"10px","margin-top":"15px"}},[e._v(" auto-refresh every 15 seconds ")]):e._e(),e.isContentMaximized?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.refreshClicked()}}}):e._e()],1):e._e(),e.isContentMaximized?e._t("actions-maximized"):e._t("actions-minimized"),t("BaseIcon",{staticClass:"icon",class:{"rotate-180":e.isContentMaximized},attrs:{name:"mdi-menu-down","inherit-color":""}})],2),t("q-expansion-item",{attrs:{value:e.isContentMaximized,"header-style":e._styles}},[e.hasFiles?t("div",{staticClass:"q-pb-sm"},[e._t("default")],2):t("div",{staticClass:"no-files"},[e._v("No files found")])])],1)},a=[],l={name:"FileList",props:{hasFiles:{type:Boolean,default:!1},hasSelectedFiles:{type:Boolean,default:!1},numberOfFiles:{type:Number,default:0},showAutoLoad:{type:Boolean,default:!1}},data(){return{reloadClicked:!1,isContentMaximized:this.hasFiles}},computed:{_styles(){return{minHeight:"0px",height:"0px",padding:"0px",overflow:"hidden"}}},watch:{hasFiles(e){this.isContentMaximized=e}},mounted(){this.startAutoRefresh()},beforeDestroy(){this.stopAutoRefresh()},methods:{toggleContent(){this.reloadClicked?this.reloadClicked=!1:this.isContentMaximized=!this.isContentMaximized},showContent(){this.isContentMaximized=this.hasFiles},refreshClicked(){this.reloadClicked=!0,this.getdata()},getdata(){this.isContentMaximized&&this.$emit("getFiles")},startAutoRefresh(){this.autoRefreshInterval=setInterval(()=>{this.getdata()},15e3)},stopAutoRefresh(){this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=null)}}},o=l,n=(i("5e5c"),i("2877")),r=i("2c91"),d=i("3b73"),c=i("93dc"),u=i.n(c),h=Object(n["a"])(o,s,a,!1,null,"d1f2acf4",null);t["a"]=h.exports;u()(h,"components",{QSpace:r["a"],QExpansionItem:d["a"]})},"9faa":function(e,t,i){"use strict";i("73e8")},a735:function(e,t,i){},a84f:function(e,t,i){"use strict";i("edfd")},ab96:function(e,t,i){"use strict";i("a735")},b2ec:function(e,t,i){},b5de:function(e,t,i){},b963:function(e,t,i){},bbc1:function(e,t,i){},c138:function(e,t,i){},c7a9:function(e,t,i){"use strict";i("b2ec")},cade:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return e.visible?t("div",e._g({class:{"is-selected":e.isSelected,"is-disabled":!e.subList.length&&"Initiate Workflow"===e.label||e.disabled},style:{padding:e.isSparse?"16px":"8px 16px"},attrs:{id:"list-item"}},e.$listeners),[e.color?[e.icon?t("BaseActionButton",{staticClass:"icon",attrs:{icon:e.icon,color:e.color,size:"14px"}}):e._e()]:[e.icon?t("BaseIcon",{staticClass:"icon",attrs:{name:e.icon,"inherit-color":""}}):e._e()],t("div",{staticClass:"label",style:{color:e.color}},[e._v(e._s(e.label))]),e.subList?[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"top end",self:"top start"}},[t("q-list",e._l(e.subList,(function(i){return t("q-item",{key:i.id,attrs:{clickable:""},on:{click:function(t){return e.$emit("subListAction",i)}}},[t("q-item-section",{attrs:{side:""}},[e.icon?t("BaseIcon",{staticClass:"icon",attrs:{name:e.icon,"inherit-color":""}}):e._e()],1),t("q-item-section",[e._v(e._s(i.name))])],1)})),1)],1)]:e._e()],2):e._e()},a=[],l={name:"ListItem",props:{icon:{type:String,default:""},label:{type:[String,Number],required:!0},isSparse:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},color:{type:String,default:""},subList:{type:Array,default:()=>[]},visible:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}}},o=l,n=(i("2573"),i("2877")),r=i("4e73"),d=i("1c1c"),c=i("66e5"),u=i("4074"),h=i("93dc"),p=i.n(h),f=Object(n["a"])(o,s,a,!1,null,"0b394298",null);t["a"]=f.exports;p()(f,"components",{QMenu:r["a"],QList:d["a"],QItem:c["a"],QItemSection:u["a"]})},d406:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{class:{"is-selected":e.isSelected||e.file.id===e.fileId,"mini-mode":e.miniMode},attrs:{id:"file-list-item"},on:{click:function(t){return e.$emit("selectFile")},mouseover:function(t){e.fileId=e.file.id},mouseleave:function(t){e.fileId=0}}},[t("div",{staticClass:"avatar"},[t("FileIcon",{attrs:{"mime-type":e.type}})],1),t("div",{staticClass:"q-ml-md"},[t("div",e._g({staticClass:"title",on:{click:e.viewFile}},e.$listeners),[e._v(" "+e._s(e.file.name)+" "),e._t("info")],2),t("div",{staticClass:"meta"},[e.repository?[t("div",[e._v(e._s(e.repository))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}})]:e._e(),t("div",[e._v(e._s(e.createdAt))]),e.file.createdBy&&!e.miniMode?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.file.createdBy))])]:e._e(),e.file.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.size))])]:e._e(),e.file.ocrType?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.file.ocrType))])]:e._e(),e._t("status")],2)]),t("q-space"),e._t("default")],2)},a=[],l=i("fa1f"),o=i("a7d2"),n={name:"FileListItem",components:{FileIcon:l["a"]},props:{file:{type:Object,required:!0},isSelected:{type:Boolean,default:!1},miniMode:{type:Boolean,default:!1}},data(){return{fileId:0}},computed:{type(){return this.file.name.split(".").reverse()[0].slice(0,4)},repository(){if(this.file.repository)return this.file.repository.value},createdAt(){return this.$day.format(this.file.createdAt)},size(){return Object(o["a"])(this.file.size)}},methods:{viewFile(){this.$emit("view",this.file)}}},r=n,d=(i("8b18"),i("2877")),c=i("2c91"),u=i("93dc"),h=i.n(u),p=Object(d["a"])(r,s,a,!1,null,"0b7b1cb3",null);t["a"]=p.exports;h()(p,"components",{QSpace:c["a"]})},da87:function(e,t,i){"use strict";i("e10a")},dae0:function(e,t,i){"use strict";i("b5de")},db5c:function(e,t,i){"use strict";i("6b83")},dc7a:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"repository-list"}},[t("div",{staticClass:"title"},[e._v("Folder")]),t("div",{staticClass:"wrapper"},[t("ValidationProvider",{attrs:{name:"repository",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{attrs:{value:e.value,"is-mandatory":"","is-clearable":!1,options:e.repositories,"is-readonly":"",error:i[0]},on:{input:e.handleInput}})]}}])})],1)])},a=[],l=i("1b0d"),o=i("7bb1"),n=i("12b8"),r={name:"RepositoryList",components:{ValidationProvider:o["b"],SelectField:n["a"]},props:{value:{type:Number,required:!0},workspaceId:{type:Number,required:!0}},data(){return{repositories:[]}},watch:{workspaceId:{immediate:!0,handler:"getRepositories"}},methods:{handleInput(e){this.$emit("input",e)},async getRepositories(){if(this.workspaceId){this.repositories=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await l["p"].getRepositoryList("workspaceId",this.workspaceId);if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);if(!t.length)return;this.repositories=t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))}}}},d=r,c=(i("39cc"),i("2877")),u=Object(c["a"])(d,s,a,!1,null,"11e49f8b",null);t["a"]=u.exports},df27:function(e,t,i){"use strict";i("c138")},e10a:function(e,t,i){},e5e9:function(e,t,i){},e769:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"upload-and-index"}},[t("Header",{attrs:{"is-loading":e.isLoading},on:{close:e.closeUploder},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),"UPLOAD"===e.tab?t("Uploader",{attrs:{"workspace-id":e.workspaceId,"repository-id":e.repositoryId,"upload-files":e.uploadFiles},on:{"update:uploadFiles":function(t){e.uploadFiles=t},"update:upload-files":function(t){e.uploadFiles=t},move:function(t){e.tab="INDEX"}}}):e._e(),"INDEX"===e.tab?t("Indexer",{attrs:{"workspace-id":e.workspaceId,"repository-id":e.repositoryId},on:{upload:e.queueFilesForUpload}}):e._e()],1)},a=[],l=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"upload-header"}},[t("div",{staticClass:"header"},[e._m(0),t("q-space"),t("BaseCloseButton",{on:{click:function(t){return e.$emit("close")}}})],1),t("div",{staticClass:"action-bar"},[t("Tabs",{attrs:{value:e.value,tabs:e.tabs},on:{input:e.handleInput}}),t("q-space"),t("PortalTarget",{attrs:{name:"upload-index-action-bar",slim:""}}),t("BaseActionButton",{attrs:{icon:"eva-question-mark",color:"secondary"},on:{click:e.showQuickHelp}})],1),t("QuickHelp",{model:{value:e.quickHelp,callback:function(t){e.quickHelp=t},expression:"quickHelp"}})],1)},o=[function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"title-1"},[e._v("upload files")]),t("div",{staticClass:"description"},[e._v("Uploaded files will be moved to index tab")])])}],n=i("b94d"),r=i("2b88"),d=i("36b4"),c={name:"Header",components:{Tabs:n["a"],PortalTarget:r["PortalTarget"],QuickHelp:d["a"]},props:{value:{type:String,required:!0}},data(){return{quickHelp:!1,tabs:[{id:this.$nano.id(),label:"upload",value:"UPLOAD"},{id:this.$nano.id(),label:"index",value:"INDEX"}]}},methods:{showQuickHelp(){this.quickHelp=!0},handleInput(e){this.$emit("input",e)}}},u=c,h=(i("fb2a"),i("2877")),p=i("2c91"),f=i("93dc"),m=i.n(f),v=Object(h["a"])(u,l,o,!1,null,"72630f90",null),g=v.exports;m()(v,"components",{QSpace:p["a"]});var y=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"uploader"}},[t("Portal",{attrs:{to:"upload-index-action-bar"}},[t("div",{staticClass:"row"},[e._e(),e._e(),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-refresh"},on:{click:e.getUploadedFiles}})],1)]),t("ContentWrapper",{scopedSlots:e._u([{key:"main",fn:function(){return[e.isFileViewerVisible?t("FileViewerWrapper",{attrs:{file:e.selectedFiles[0],type:1},on:{back:e.hideFileViewer,"show-files":e.showFilesSheet,delete:e.showDeleteConfirmation,next:e.showNextFile,previous:e.showPreviousFile},scopedSlots:e._u([{key:"header-right",fn:function(){return[t("BaseActionButton",{directives:[{name:"show",rawName:"v-show",value:e.showAutoProcessBtn,expression:"showAutoProcessBtn"},{name:"tooltip",rawName:"v-tooltip.top",value:"move to autoprocess",expression:"'move to autoprocess'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-robot-outline"},on:{click:function(t){return e.showAutoProcessConfirmation(e.selectedFiles[0])}}}),t("BaseActionButton",{directives:[{name:"show",rawName:"v-show",value:e.showManualIndexBtn,expression:"showManualIndexBtn"},{name:"tooltip",rawName:"v-tooltip.top",value:"move to manual index",expression:"'move to manual index'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-label-multiple-outline"},on:{click:function(t){return e.showManualIndexConfirmation(e.selectedFiles[0])}}})]},proxy:!0}],null,!1,1895702804)}):t("BaseScrollbar",{staticClass:"q-px-md q-mt-md",attrs:{height:"calc(100vh - 219px)"}},[e.loadingBarContent?t("BaseLoadingBarSheet",{staticClass:"loading-content"}):e._e(),t("UploadingFileList",{staticClass:"q-mb-md",attrs:{files:e.filesToUpload}}),t("UploadedFileList",{attrs:{files:e.uploadedFiles,"selected-files":e.selectedFiles,"indexing-type":e.indexingType},on:{select:e.selectFile,view:e.showFileViewer,split:e.showSplitConfirmation,merge:e.showMergeConfirmation,delete:e.showDeleteConfirmation,"manual-index":e.showManualIndexConfirmation,"auto-process":e.showAutoProcessConfirmation,selectedFile:e.selectedOneFile,selectAll:e.selectAllFile}})],1),e.isFileViewerVisible?e._e():t("Pagination",{staticClass:"q-ma-md",attrs:{"total-items":e.totalItems,"current-page":e.currentPage,"items-per-page":e.itemsPerPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:itemsPerPage":function(t){e.itemsPerPage=t},"update:items-per-page":function(t){e.itemsPerPage=t}}})]},proxy:!0},{key:"aside",fn:function(){return[t("BaseScrollbar",{attrs:{height:"calc(100vh - 124px)"}},[t("Dropzone",{attrs:{"workspace-id":e.workspaceId,"repository-id":e.repositoryId},on:{upload:e.queueFilesForUpload}})],1)]},proxy:!0}])}),t("FileSheet",{attrs:{"file-list":e.fileList,"selected-files":e.selectedFiles},on:{select:e.singleSelectFile},model:{value:e.isFilesSheetVisible,callback:function(t){e.isFilesSheetVisible=t},expression:"isFilesSheetVisible"}}),t("ConfirmDeleteFiles",{attrs:{files:e.selectedFiles},on:{delete:e.deleteFiles},model:{value:e.isDeleteConfirmationVisible,callback:function(t){e.isDeleteConfirmationVisible=t},expression:"isDeleteConfirmationVisible"}}),t("ConfirmAutoProcessFiles",{attrs:{"repository-id":e.repositoryId,files:e.selectedFiles,"ocr-pages":e.ocrPages,"ocr-type":e.ocrType,"ocr-pattern":e.ocrPattern},on:{"update:ocrPages":function(t){e.ocrPages=t},"update:ocr-pages":function(t){e.ocrPages=t},"update:ocrType":function(t){e.ocrType=t},"update:ocr-type":function(t){e.ocrType=t},"update:ocrPattern":function(t){e.ocrPattern=t},"update:ocr-pattern":function(t){e.ocrPattern=t},update:e.setStatus},model:{value:e.isAutoProcessConfirmationVisible,callback:function(t){e.isAutoProcessConfirmationVisible=t},expression:"isAutoProcessConfirmationVisible"}}),t("ConfirmManualIndexFiles",{attrs:{files:e.selectedFiles},on:{update:e.setStatus},model:{value:e.isManualIndexConfirmationVisible,callback:function(t){e.isManualIndexConfirmationVisible=t},expression:"isManualIndexConfirmationVisible"}}),t("ConfirmMergeFiles",{attrs:{files:e.selectedFiles},on:{merge:e.mergeFiles},model:{value:e.isMergeConfirmationVisible,callback:function(t){e.isMergeConfirmationVisible=t},expression:"isMergeConfirmationVisible"}}),t("ConfirmSplitFiles",{attrs:{files:e.selectedFiles},on:{split:e.splitFiles},model:{value:e.isSplitConfirmationVisible,callback:function(t){e.isSplitConfirmationVisible=t},expression:"isSplitConfirmationVisible"}})],1)},b=[],_=(i("13d5"),i("caad"),i("14d9"),i("381b")),F=i("be3f"),S=i("27bd"),x=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"content-wrapper"}},[t("div",{staticClass:"file-list"},[e._t("main")],2),t("div",{staticClass:"aside"},[e._t("aside")],2)])},C=[],w={name:"ContentWrapper"},T=w,k=(i("68ae"),Object(h["a"])(T,x,C,!1,null,"bbe4c772",null)),I=k.exports,A=i("1026"),$=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"uploaded-file-list"}},[t("FileList",{staticClass:"q-mb-md",attrs:{"has-files":e.hasFiles,"has-selected-files":e.hasSelectedFiles,"number-of-files":e.files.length},scopedSlots:e._u([{key:"label",fn:function(){return[e.label?t("span",{staticClass:"label"},[e._v(e._s(e.label))]):t("span",[e._v("Uploaded")])]},proxy:!0},{key:"actions-maximized",fn:function(){return[e.hasSelectedFiles?[t("BaseActionButton",{directives:[{name:"show",rawName:"v-show",value:e.showMergeBtn,expression:"showMergeBtn"},{name:"tooltip",rawName:"v-tooltip.top",value:"merge",expression:"'merge'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-text-box-plus-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("merge")}}}),e.showMergeBtn?t("BaseSeparator",{staticClass:"q-mx-md",attrs:{"has-inset":"","is-vertical":""}}):e._e(),t("BaseActionButton",{directives:[{name:"show",rawName:"v-show",value:e.showAutoProcessBtn,expression:"showAutoProcessBtn"},{name:"tooltip",rawName:"v-tooltip.top",value:"move to autoprocess",expression:"'move to autoprocess'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-robot-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("auto-process")}}}),t("BaseActionButton",{directives:[{name:"show",rawName:"v-show",value:e.showManualIndexBtn,expression:"showManualIndexBtn"},{name:"tooltip",rawName:"v-tooltip.top",value:"move to manual index",expression:"'move to manual index'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-label-multiple-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("manual-index")}}}),t("BaseSeparator",{staticClass:"q-mx-md",attrs:{"has-inset":"","is-vertical":""}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.top",value:"Delete",expression:"'Delete'",arg:"red",modifiers:{top:!0}}],staticClass:"q-mr-md",attrs:{"is-flat":"",color:"red",icon:"eva-trash-2-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete")}}})]:e._e(),e.files.length?t("div",{staticClass:"row"},[t("div",{staticClass:"col"}),t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"select all",expression:"'select all'",modifiers:{top:!0}}],staticClass:"q-mx-sm cursor-pointer col-auto",attrs:{name:e.isSelectAll?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:e.isSelectAll?"secondary":"grey"},on:{click:function(t){return t.stopPropagation(),e.selectAllFile.apply(null,arguments)}}})],1):e._e()]},proxy:!0},{key:"default",fn:function(){return e._l(e.files,(function(i){return t("FileListItem",{key:i.id,attrs:{file:i,"is-selected":e.isFileSelected(i)},on:{view:function(t){return e.$emit("view",i)},selectFile:function(t){return e.fileSelect(i)}},scopedSlots:e._u([{key:"info",fn:function(){return[i.isSplitted?t("div",{staticClass:"splitted"},[e._v("splitted")]):e._e(),i.isMerged?t("div",{staticClass:"merged"},[e._v("merged")]):e._e()]},proxy:!0},{key:"status",fn:function(){return[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",{class:e.getStatusColor(i.uploadedFrom)},[e._v(" "+e._s(i.uploadedFrom)+" ")])]},proxy:!0}],null,!0)},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:e.isFileSelected(i)?"eva-checkmark-circle-2":"eva-radio-button-off-outline","is-inactive":!e.isFileSelected(i),color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.$emit("select",i)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-more-vertical"},on:{click:function(e){e.stopPropagation()}}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right","content-class":"q-py-sm"}},e._l(e.getActions(i),(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.$emit(s.value,i)}}})})),1)],1)],1)}))},proxy:!0}])})],1)},P=[],O=i("9ef6"),E=i("d406"),B=i("cade"),L={name:"UploadedFileList",components:{FileList:O["a"],FileListItem:E["a"],ListItem:B["a"]},props:{files:{type:Array,required:!0},selectedFiles:{type:Array,required:!0},indexingType:{type:String,required:!0}},data(){return{actions:[{id:this.$nano.id(),icon:"mdi-text-box-minus-outline",label:"Split",value:"split"},{id:this.$nano.id(),icon:"eva-eye-outline",label:"View",value:"view"},{id:this.$nano.id(),icon:"mdi-robot-outline",label:"Auto Process",value:"auto-process"},{id:this.$nano.id(),icon:"mdi-label-multiple-outline",label:"Manual Index",value:"manual-index"},{id:this.$nano.id(),icon:"eva-trash-2-outline",label:"Delete",value:"delete"}],isSelectAll:!1}},computed:{hasFiles(){return!!this.files.length},hasSelectedFiles(){return!!this.selectedFiles.length},label(){if(!this.selectedFiles.length)return"";const e=1===this.selectedFiles.length?"file":"files";return`${this.selectedFiles.length} ${e} selected`},getFileTypes(){const e=this.selectedFiles.reduce((e,t)=>{const i=this.getFileType(t.name);return e[i]=e[i]+1||1,e},{});return Object.keys(e)},showSplitBtn(){if(0===this.selectedFiles.length)return!1;const e=this.getFileTypes;return e.every(e=>["pdf","doc","docx","ppt","pptx","xls","xlsx"].includes(e))},showMergeBtn(){if(this.selectedFiles.length<=1)return!1;const e=this.getFileTypes;return e.every(e=>["pdf","tiff","tif","doc","docx","ppt","pptx","xls","xlsx"].includes(e))},showManualIndexBtn(){let e=!0;return this.selectedFiles.length&&this.selectedFiles.forEach(t=>{"DYNAMIC"===t.repository.fieldsType&&(e=!1)}),e},showAutoProcessBtn(){if(0===this.selectedFiles.length||"MANUAL"===this.indexingType)return!1;const e=this.getFileTypes;return e.every(e=>["pdf","tif","tiff","png","jpeg","jpg"].includes(e))}},methods:{getStatusColor(e){switch(e){case"Web":return"text-green";case"Mobile":return"text-secondary";case"Capture":return"text-orange";case"Plugin":return"text-light-blue"}},isFileSelected(e){return!!this.selectedFiles.find(t=>t.id===e.id)},getFileType(e){return e.split(".").reverse()[0].slice(0,4).toLowerCase()},getActions(e){if("DYNAMIC"===e.repository.fieldsType)return this.actions.filter(e=>"manual-index"!==e.value);{let t=this.actions;const i=this.getFileType(e.name);let s=["pdf","doc","docx","ppt","pptx","xls","xlsx"].includes(i);s||(t=t.filter(e=>"split"!==e.value));let a=["pdf","tif","tiff","png","jpeg","jpg"].includes(i);return a&&"MANUAL"!==this.indexingType||(t=t.filter(e=>"auto-process"!==e.value)),t}},selectAllFile(){this.isSelectAll=!this.isSelectAll,this.$emit("selectAll",this.isSelectAll,"UPLOADED")},fileSelect(e){this.$emit("selectedFile",e)}}},q=L,D=(i("db5c"),i("4e73")),N=Object(h["a"])(q,$,P,!1,null,"4020f9e5",null),M=N.exports;m()(N,"components",{QMenu:D["a"]});var R=i("b6d2"),V=i("61cf"),z=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"file-viewer-wrapper"}},[t("FileViewer",{attrs:{file:e.file,type:e.type},on:{back:function(t){return e.$emit("back")},next:function(t){return e.$emit("next")},previous:function(t){return e.$emit("previous")}},scopedSlots:e._u([{key:"header-left",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"files",expression:"'files'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-flat":"",icon:"eva-menu-2"},on:{click:function(t){return e.$emit("show-files")}}})]},proxy:!0},{key:"file-name",fn:function(){return[e._v(" "+e._s(e.file.name)+" ")]},proxy:!0},{key:"header-right",fn:function(){return[e._t("header-right"),e.checkViewer?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Free Hand",expression:"'Free Hand'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-text-recognition"},on:{click:function(t){return e.$emit("free-hand",e.file)}}}):e._e(),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.top",value:"delete",expression:"'delete'",arg:"red",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-trash-2-outline"},on:{click:function(t){return e.$emit("delete",e.file)}}}),t("BaseSeparator",{staticClass:"q-mx-md",attrs:{"is-vertical":"","has-inset":""}})]},proxy:!0}],null,!0)})],1)},j=[],U=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"file-viewer"}},[t("div",{staticClass:"header"},[t("div",{staticClass:"file-name"},[e._t("file-name")],2),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"back",expression:"'back'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-arrow-back"},on:{click:function(t){return t.stopPropagation(),e.$emit("back")}}}),e._t("header-left"),t("q-space"),e._t("header-right"),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"previous file",expression:"'previous file'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-arrow-back"},on:{click:function(t){return t.stopPropagation(),e.$emit("previous")}}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"next file",expression:"'next file'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-arrow-forward"},on:{click:function(t){return t.stopPropagation(),e.$emit("next")}}})],2),t("iframe",{attrs:{src:e.fileLink,frameborder:"0"}})])},Q=[],X=i("dd90"),H={name:"FileViewer",props:{file:{type:Object,required:!0},type:{type:Number,required:!0}},computed:{fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.file.name){let t=this.file.name.split(".").pop(),i="";if(Object(X["d"])(t))i="https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"!==e||Object(X["c"])(t)?"https://app.ezofis.com"===e?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html":"https://trial.ezofis.com/docsviewer/index.html";else{if("http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.file.id}/${this.type}`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uploadId=${this.file.id}&type=${this.type}&filename=${this.file.name}`}return""}}},W=H,G=(i("7e44"),Object(h["a"])(W,U,Q,!1,null,"0d3d7060",null)),Y=G.exports;m()(G,"components",{QSpace:p["a"]});var J={name:"FileViewerWrapper",components:{FileViewer:Y},props:{file:{type:Object,required:!0},type:{type:Number,required:!0}},computed:{checkViewer(){let e=location.origin;return"http://52.172.32.88"===e||"http://localhost:8080"===e||"https://trial.ezofis.com"===e}}},K=J,Z=(i("dae0"),Object(h["a"])(K,z,j,!1,null,"7d541189",null)),ee=Z.exports,te=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"eva-trash-2-outline","icon-color":"red"},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Delete "+e._s(e.chunk)+"?")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("div",[e._v(" Are you sure you want to delete the following "+e._s(e.chunk)+"? You cannot undo this action. ")]),t("ol",{staticClass:"q-my-lg"},e._l(e.files,(function(i){return t("li",{key:i.id,staticClass:"font-semibold"},[e._v(" "+e._s(i.name)+" ")])})),0)])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"red"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"red"},on:{click:e.handleYes}})]},proxy:!0}])})},ie=[],se=i("1c54"),ae={name:"ConfirmDeleteFiles",components:{Confirm:se["a"]},props:{value:{type:Boolean,required:!0},files:{type:Array,required:!0}},computed:{chunk(){return this.files.length?1===this.files.length?"file":"files":""}},methods:{handleInput(e){this.$emit("input",e)},handleNo(){this.$emit("input",!1)},handleYes(){this.$emit("input",!1),this.$emit("delete")}}},le=ae,oe=Object(h["a"])(le,te,ie,!1,null,"60563363",null),ne=oe.exports,re=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"mdi-robot-outline","icon-color":"orange"},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Auto Process "+e._s(e.chunk)+"?")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md autoProcess"},[e._v(" Are you sure you want to auto process the following "+e._s(e.chunk)+"? You can view the "+e._s(e.chunk)+" under the Index tab. "),t("SingleChoiceField",{staticClass:"q-mt-md",attrs:{"options-per-line":3,options:e.indexingOption,"is-readonly":"ANY"!==e.ocrValue},model:{value:e.indexingOptionValue,callback:function(t){e.indexingOptionValue=t},expression:"indexingOptionValue"}}),e.alertMsg?t("div",{staticClass:"text-red q-mt-lg"},[e._v(" "+e._s(e.alertMsg)+" ")]):e._e(),"STANDARD"===e.indexingOptionValue?t("CheckboxField",{staticClass:"q-mt-lg",attrs:{label:"Pattern Recognition"},model:{value:e.pattern,callback:function(t){e.pattern=t},expression:"pattern"}}):e._e(),"ADVANCED"===e.indexingOptionValue||""===e.indexingOptionValue?t("div",{staticClass:"text-secondary q-mt-lg"},[e._v(" Credit Balance: "+e._s(e.creditBalance)+" ")]):e._e(),0!==e.creditBalance?[1===e.files.length?[t("SelectField",{staticClass:"q-mt-lg",attrs:{label:"Select pages for Advance Indexing","is-mandatory":"","is-clearable":!1,options:e.pages,"is-readonly":"STANDARD"===e.indexingOptionValue},model:{value:e.selectedPages,callback:function(t){e.selectedPages=t},expression:"selectedPages"}})]:e.files.length>1?[t("SelectField",{staticClass:"q-mt-lg",attrs:{label:"Select pages for Advance Indexing","is-mandatory":"","is-clearable":!1,options:e.secondaryPage,"is-readonly":"STANDARD"===e.indexingOptionValue},model:{value:e.selectedPages,callback:function(t){e.selectedPages=t},expression:"selectedPages"}})]:e._e()]:e._e(),"CUSTOM"===e.selectedPages?t("TextField",{staticClass:"q-mt-lg",attrs:{label:"Pages","is-mandatory":"",placeholder:"enter page number like 2,3,4  or 2-5"},on:{input:e.convertValue},model:{value:e.pageCount,callback:function(t){e.pageCount=t},expression:"pageCount"}}):e._e(),e.msg?t("div",{staticClass:"text-red q-mt-lg"},[e._v(" "+e._s(e.msg)+" ")]):e._e(),t("ol",{staticClass:"q-mt-lg"},e._l(e.files,(function(i){return t("li",{key:i.id,staticClass:"font-semibold"},[e._v(" "+e._s(i.name)+" ")])})),0),"ADVANCED"===e.indexingOptionValue&&e.creditBalance<e.pagesArray.length?t("div",{staticClass:"text-red q-mt-lg"},[e._v(" Plese contact repository owner or administrator to Increase credit value ")]):e._e()],2)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"orange"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"orange",disabled:"ADVANCED"===e.indexingOptionValue&&e.creditBalance<e.pagesArray.length},on:{click:e.handleYes}})]},proxy:!0}])})},de=[],ce=i("9234"),ue=i("12b8"),he=i("b3d1"),pe=i("869e"),fe=i("1b0d"),me={name:"ConfirmAutoProcessFiles",components:{Confirm:se["a"],SingleChoiceField:ce["a"],SelectField:ue["a"],TextField:he["a"],CheckboxField:pe["a"]},props:{value:{type:Boolean,required:!0},files:{type:Array,required:!0},repositoryId:{type:Number,required:!0},ocrPages:{type:Array,default:()=>[]},ocrType:{type:String,default:""},ocrPattern:{type:Boolean,required:!1}},data(){return{indexingOption:[{id:this.$nano.id(),label:"Standard OCR",value:"STANDARD"},{id:this.$nano.id(),label:"Advanced OCR",value:"ADVANCED"}],indexingOptionValue:"",selectedPages:"FIRST",creditBalance:0,pages:[{id:1,label:"First Page",value:"FIRST"},{id:2,label:"All Pages",value:"ALL"},{id:3,label:"Custom Pages",value:"CUSTOM"}],secondaryPage:[{id:1,label:"First Page",value:"FIRST"},{id:2,label:"All Pages",value:"ALL"}],pageCount:"",pagesArray:[],pageLimit:!1,creditLimit:!1,msg:"",alertMsg:"",pattern:!1,ocrValue:""}},computed:{chunk(){return this.files.length?1===this.files.length?"file":"files":""}},watch:{value:{immediate:!0,handler(){this.repositoryId&&(this.getRepository(),this.getOcrCredit())}},selectedPages:{immediate:!0,handler(){this.updateValue()}}},methods:{handleInput(e){this.reset(),this.$emit("input",e)},handleNo(){this.reset(),this.$emit("input",!1)},updateValue(){"FIRST"===this.selectedPages?this.pagesArray=[1]:"ALL"===this.selectedPages&&(this.pagesArray=[])},convertValue(){this.pagesArray=[],this.pagesArray=this.parsePages(this.pageCount,this.files[0].totalPages),this.pagesArray.length&&this.checkLimit(this.pagesArray),this.msg=this.alertText()},parsePages(e,t){const i=[],s=e.split(",");for(const a of s)if(a.includes("-")){const[e,s]=a.split("-").map(Number);if(isNaN(e)||isNaN(s))this.pageLimit=!1;else{this.pageLimit=!(s<=t);for(let t=e;t<=s;t++)i.push(t)}}else{const e=parseInt(a);isNaN(e)?this.pageLimit=!1:(i.push(e),this.pageLimit=!(e<=t))}return i},checkLimit(e){let t=0;t=e.length,t<=this.creditBalance?this.creditLimit=!1:this.creditLimit=!0},alertText(){let e="";return this.pageLimit&&this.creditLimit?e=`Provide valid page number within total pages - ${this.files[0].totalPages} and page count within credit balance - ${this.creditBalance}`:this.pageLimit?e=`Total pages - ${this.files[0].totalPages}, Provide valid page number within total pages`:this.creditLimit?e="Provide page count within credit balance - "+this.creditBalance:this.pageCount&&(e=""),e},handleYes(){if(""!==this.indexingOptionValue){this.alertMsg="";const e=Math.max(...this.pagesArray);e<=this.files[0].totalPages?(this.$emit("input",!1),this.$emit("update:ocrPages",this.pagesArray),this.$emit("update:ocrType",this.indexingOptionValue),this.$emit("update:ocrPattern",this.pattern),this.$emit("update","AUTO_PROCESSING"),this.reset()):this.alertMsg="Provide page number within totalpages - "+this.files[0].totalPages}else this.alertMsg="Select any OCR method to process file"},reset(){this.indexingOptionValue="",this.selectedPages="FIRST",this.creditBalance=0,this.pageCount="",this.pagesArray=[],this.pageLimit=!1,this.creditLimit=!1,this.msg="",this.alertMsg=""},async getRepository(){const{error:e,payload:t}=await fe["p"].getRepository(this.repositoryId);e?this.$alert.error(e):(this.ocrValue=t.indexingType,"ANY"===t.indexingType?"STATIC"===t.fieldsType?(this.indexingOptionValue="STANDARD",this.pattern=!0):this.indexingOptionValue="ADVANCED":"ADVANCED"===t.indexingType?this.indexingOptionValue="ADVANCED":"STANDARD"===t.indexingType&&(this.indexingOptionValue="STANDARD",this.pattern=!0))},async getOcrCredit(){const{error:e,payload:t}=await fe["p"].getOcrCredit(this.repositoryId);e?this.$alert.error(e):this.creditBalance=t}}},ve=me,ge=(i("5d0d"),Object(h["a"])(ve,re,de,!1,null,null,null)),ye=ge.exports,be=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"mdi-label-multiple-outline","icon-color":"orange"},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Manual Index "+e._s(e.chunk)+"?")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[e._v(" Are you sure you want to manually index following "+e._s(e.chunk)+"? "),t("ol",{staticClass:"q-my-lg"},e._l(e.files,(function(i){return t("li",{key:i.id,staticClass:"font-semibold"},[e._v(" "+e._s(i.name)+" ")])})),0)])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"orange"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"orange"},on:{click:e.handleYes}})]},proxy:!0}])})},_e=[],Fe={name:"ConfirmManualIndexFiles",components:{Confirm:se["a"]},props:{value:{type:Boolean,required:!0},files:{type:Array,required:!0}},computed:{chunk(){return this.files.length?1===this.files.length?"file":"files":""}},methods:{handleInput(e){this.$emit("input",e)},handleNo(){this.$emit("input",!1)},handleYes(){this.$emit("input",!1),this.$emit("update","NOT_INDEXED")}}},Se=Fe,xe=Object(h["a"])(Se,be,_e,!1,null,"05c9c99c",null),Ce=xe.exports,we=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"mdi-text-box-plus-outline","icon-color":"orange"},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Merge "+e._s(e.chunk)+"?")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[e._v(" Are you sure you want to merge the following "),t("span",{staticClass:"file-count"},[e._v(" "+e._s(e.files.length)+" "+e._s(e.chunk)+" ")]),e._v("? "),t("ol",{staticClass:"q-my-lg"},e._l(e.files,(function(i){return t("li",{key:i.id,staticClass:"font-semibold"},[e._v(" "+e._s(i.name)+" ")])})),0),t("div",{staticClass:"note"},[e._v(" Note: The "+e._s(e.chunk)+" will be merged and saved as PDF. ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"orange"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"orange"},on:{click:e.handleYes}})]},proxy:!0}])})},Te=[],ke={name:"ConfirmMergeFiles",components:{Confirm:se["a"]},props:{value:{type:Boolean,required:!0},files:{type:Array,required:!0}},computed:{chunk(){return this.files.length?1===this.files.length?"file":"files":""}},methods:{handleInput(e){this.$emit("input",e)},handleNo(){this.$emit("input",!1)},handleYes(){this.$emit("input",!1),this.$emit("merge")}}},Ie=ke,Ae=(i("2559"),Object(h["a"])(Ie,we,Te,!1,null,"76cbbde6",null)),$e=Ae.exports,Pe=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"mdi-text-box-minus-outline","icon-color":"orange"},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Split Files")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-mt-md"},[e._v(" Are you sure you want to split the following "),t("span",{staticClass:"file-count"},[e._v(" "+e._s(e.files.length)+" "+e._s(e.chunk)+" ")]),e._v("? "),t("ol",{staticClass:"q-mb-lg"},e._l(e.files,(function(i){return t("li",{key:i.id,staticClass:"font-semibold"},[e._v(" "+e._s(i.name)+" ")])})),0)]),t("div",{staticClass:"note"},[e._v(" Note: The "+e._s(e.chunk)+" will be splitted and saved as separate PDFs. ")]),t("BaseSeparator",{staticClass:"q-my-md"}),t("SelectField",{staticClass:"q-mb-md",attrs:{"is-mandatory":"",label:"split option","is-clearable":!1,"is-searchable":!1,options:e.splitUsingOptions},model:{value:e.splitUsing,callback:function(t){e.splitUsing=t},expression:"splitUsing"}}),"BARCODE"===e.splitUsing?t("div",{staticClass:"advanced-options",on:{click:function(t){e.advancedSettings=!e.advancedSettings}}},[e._v(" advanced options ")]):e._e(),e.advancedSettings?[t("SelectField",{staticClass:"q-mb-md",attrs:{"is-mandatory":"",label:"barcode type","is-clearable":!1,options:e.barcodeTypes},model:{value:e.barcodeType,callback:function(t){e.barcodeType=t},expression:"barcodeType"}}),t("TextField",{staticClass:"q-mb-md",attrs:{"is-mandatory":"",label:"barcode prefix"},model:{value:e.barcodePrefix,callback:function(t){e.barcodePrefix=t},expression:"barcodePrefix"}}),t("NumberField",{staticClass:"q-mb-lg",attrs:{"is-mandatory":"",label:"barcode length"},model:{value:e.barcodeLength,callback:function(t){e.barcodeLength=t},expression:"barcodeLength"}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{label:"Recognize all the barcodes from the "+e.chunk},model:{value:e.recognizeBarcode,callback:function(t){e.recognizeBarcode=t},expression:"recognizeBarcode"}})]:e._e()]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"orange"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"orange"},on:{click:e.handleYes}})]},proxy:!0}])})},Oe=[],Ee=i("ad54"),Be={name:"ConfirmSplitFiles",components:{Confirm:se["a"],SelectField:ue["a"],TextField:he["a"],NumberField:Ee["a"],CheckboxField:pe["a"]},props:{value:{type:Boolean,default:!1},files:{type:Array,required:!0}},data(){return{splitUsing:"SINGLE_PAGE",splitUsingOptions:[{id:this.$nano.id(),label:"Single Page Split",value:"SINGLE_PAGE"},{id:this.$nano.id(),label:"Blank Page Split",value:"BLANK_PAGE"},{id:this.$nano.id(),label:"Dark Page Split",value:"DARK_PAGE"}],barcodeType:"",barcodeTypes:[{id:this.$nano.id(),label:"Quick Response (QR) Codes",value:"Quick Response (QR) Codes"},{id:this.$nano.id(),label:"Universal Product Codes (UPC)",value:"Universal Product Codes (UPC)"},{id:this.$nano.id(),label:"Data Matrix",value:"Data Matrix"}],barcodePrefix:"",barcodeLength:"",advancedSettings:!1,recognizeBarcode:!1}},computed:{chunk(){return this.files.length?1===this.files.length?"file":"files":""}},methods:{handleInput(){this.$emit("input",!1)},handleNo(){this.$emit("input",!1)},handleYes(){this.$emit("input",!1),this.$emit("split",this.splitUsing)}}},Le=Be,qe=(i("7164"),Object(h["a"])(Le,Pe,Oe,!1,null,"3fff7cc8",null)),De=qe.exports,Ne=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,position:"left",width:"360px"},on:{input:e.closeSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Files ")]},proxy:!0}])},[t("div",{attrs:{id:"file-sheet"}},e._l(e.fileList,(function(i){return t("div",{key:i.status},[t("div",{staticClass:"header",on:{click:e.toggleContent}},[t("div",{staticClass:"label"},[e._v(e._s(i.status))]),t("q-space"),t("BaseIcon",{staticClass:"icon",class:{"rotate-180":e.isContentMaximized},attrs:{name:"mdi-menu-down","inherit-color":""}})],1),t("q-expansion-item",{attrs:{value:e.isContentMaximized,"header-style":e._styles}},[i.files.length?e._l(i.files,(function(i){return t("FileListItem",{key:i.id,staticClass:"q-pb-sm",attrs:{file:i,"mini-mode":"","is-selected":e.isFileSelected(i)},on:{click:function(t){return e.$emit("select",i)}}})})):t("div",{staticClass:"no-files"},[e._v("No files found")])],2)],1)})),0)])},Me=[],Re=i("381e"),Ve={name:"FileSheet",components:{Sheet:Re["a"],FileListItem:E["a"]},props:{value:{type:Boolean,default:!1},fileList:{type:Array,required:!0},selectedFiles:{type:Array,required:!0}},data(){return{isContentMaximized:!0}},computed:{_styles(){return{minHeight:"0px",height:"0px",padding:"0px",overflow:"hidden"}}},methods:{closeSheet(){this.$emit("input",!1)},toggleContent(){this.isContentMaximized=!this.isContentMaximized},isFileSelected(e){return!!this.selectedFiles.find(t=>t.id===e.id)}}},ze=Ve,je=(i("ab96"),i("3b73")),Ue=Object(h["a"])(ze,Ne,Me,!1,null,"964e604a",null),Qe=Ue.exports;m()(Ue,"components",{QSpace:p["a"],QExpansionItem:je["a"]});var Xe=i("bc3a"),He=i.n(Xe),We=i("874f"),Ge=i("52ef"),Ye={name:"Uploader",components:{Portal:r["Portal"],ExpandableSearch:F["a"],FilterItems:S["a"],ContentWrapper:I,UploadingFileList:A["a"],UploadedFileList:M,Pagination:R["a"],Dropzone:V["a"],FileViewerWrapper:ee,ConfirmDeleteFiles:ne,ConfirmAutoProcessFiles:ye,ConfirmManualIndexFiles:Ce,ConfirmMergeFiles:$e,ConfirmSplitFiles:De,FileSheet:Qe},props:{workspaceId:{type:Number,required:!0},repositoryId:{type:Number,required:!0},uploadFiles:{type:Array,default:()=>[]}},data(){return{columns:[{id:this.$nano.id(),name:"repository",label:"Repository",dataType:_["a"].SHORT_TEXT},{id:this.$nano.id(),name:"uploadedFrom",label:"Uploaded From",dataType:_["a"].SHORT_TEXT},{id:this.$nano.id(),name:"lastModifiedBy",label:"Last Modified By",dataType:_["a"].SHORT_TEXT},{id:this.$nano.id(),name:"lastModifiedAt",label:"Last Modified At",dataType:_["a"].DATE_TIME}],filterBy:[{filters:[{criteria:"status",condition:"IS_EQUALS_TO",value:"Uploaded"}]}],filesToUpload:[],uploadedFiles:[],uploadedFilesData:[],totalItems:0,itemsPerPage:50,currentPage:1,selectedFiles:[],ocrPages:[1],ocrType:"",isFileViewerVisible:!1,isFilesSheetVisible:!1,isDeleteConfirmationVisible:!1,isAutoProcessConfirmationVisible:!1,isManualIndexConfirmationVisible:!1,isMergeConfirmationVisible:!1,isSplitConfirmationVisible:!1,ocrPattern:!1,indexingType:"",loadingBarContent:!1}},computed:{fileList(){return[{status:"uploaded",files:this.uploadedFiles}]},getFileTypes(){const e=this.selectedFiles.reduce((e,t)=>{const i=this.getFileType(t.name);return e[i]=e[i]+1||1,e},{});return Object.keys(e)},showAutoProcessBtn(){if(0===this.selectedFiles.length||"MANUAL"===this.indexingType)return!1;const e=this.getFileTypes;return e.every(e=>["pdf","tif","tiff","png","jpeg","jpg"].includes(e))},showManualIndexBtn(){let e=!0;return this.selectedFiles.length&&this.selectedFiles.forEach(t=>{"DYNAMIC"===t.repository.fieldsType&&(e=!1)}),e}},watch:{repositoryId:{immediate:!0,handler(){this.repositoryId&&this.getRepository()}},uploadFiles:{immediate:!0,deep:!0,handler(){this.uploadFiles.length&&(this.queueFilesForUpload(this.uploadFiles),this.$emit("update:uploadFiles",[]))}}},mounted(){this.$watch(e=>[e.currentPage,e.itemsPerPage],()=>this.getUploadedFiles(),{immediate:!0,deep:!0})},methods:{queueFilesForUpload(e){this.filesToUpload.push(...e),this.filesToUpload.forEach(async(e,t)=>{0===e.uploadedPercentage&&await this.uploadFile(e,t)})},selectFile(e){const t=this.selectedFiles.findIndex(t=>t.id===e.id),i=t>-1;i?this.selectedFiles.splice(t,1):this.selectedFiles.push(e)},singleSelectFile(e){this.selectedFiles=[e]},showFileViewer(e){"Web"===e.uploadedFrom&&(this.selectedFiles=[e],this.isFileViewerVisible=!0)},hideFileViewer(){this.isFileViewerVisible=!1,this.selectedFiles=[]},showFilesSheet(){this.isFilesSheetVisible=!0},showDeleteConfirmation(e){e&&this.singleSelectFile(e),this.isDeleteConfirmationVisible=!0},showAutoProcessConfirmation(e){e&&this.singleSelectFile(e),this.setStatus("AUTO_PROCESSING")},showManualIndexConfirmation(e){e&&this.singleSelectFile(e),this.setStatus("NOT_INDEXED")},showMergeConfirmation(e){e&&this.singleSelectFile(e),this.isMergeConfirmationVisible=!0},showSplitConfirmation(e){e&&this.singleSelectFile(e),this.isSplitConfirmationVisible=!0},showPreviousFile(){const e=this.uploadedFiles.findIndex(e=>e.id===this.selectedFiles[0].id);e-1>=0&&(this.selectedFiles=[this.uploadedFiles[e-1]])},showNextFile(){const e=this.uploadedFiles.findIndex(e=>e.id===this.selectedFiles[0].id);e+1<this.uploadedFiles.length&&(this.selectedFiles=[this.uploadedFiles[e+1]])},refreshFileList(){this.filesToUpload=this.filesToUpload.filter(e=>100!==e.uploadedPercentage),this.getUploadedFiles()},showSplitBtn(){if(0===this.selectedFiles.length)return!1;const e=this.selectedFiles[0].name.split(".").reverse()[0].slice(0,4).toLowerCase();return["pdf","doc","docx","ppt","pptx","xls","xlsx"].includes(e)},getFileType(e){return e.split(".").reverse()[0].slice(0,4).toLowerCase()},searchRow(e){this.uploadedFiles=e?this.uploadedFilesData.map(({key:t,value:i})=>({key:t,value:i.filter(t=>{for(let i in t){let s=this.columns.findIndex(e=>e.name===i);if(s>=0&&t[i]&&String(t[i]).toLowerCase().includes(e.toLowerCase()))return t}})})):this.uploadedFilesData},async getRepository(){const{error:e,payload:t}=await fe["p"].getRepository(this.repositoryId);e?this.$alert.error(e):("STATIC"===t.fieldsType?this.ocrType="STANDARD":this.ocrType="ADVANCED",this.indexingType=t.indexingType)},async getUploadedFiles(){this.loadingBarContent=!0,this.uploadedFiles=[],this.selectedFiles=[];const{error:e,payload:t}=await fe["r"].getUploadedFiles({repositoryId:this.repositoryId,mode:"BROWSE",sortBy:{criteria:"createdAt",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"status",condition:"IS_EQUALS_TO",value:"UPLOADED"}]}],itemsPerPage:this.itemsPerPage,currentPage:this.currentPage});if(this.$store.commit("hideLoadingBar"),this.loadingBarContent=!1,e)return void this.$alert.error(e);const{meta:i,data:s}=t;this.totalItems=i.totalItems,s.length&&(this.uploadedFiles=s[0].value.map(e=>({id:e.id,name:e.name,status:e.status,isSplitted:!1,isMerged:!1,uploadedFrom:Object(We["a"])(Object(Ge["a"])(e.uploadedFrom)),repository:e.repository,createdAt:e.createdAt,createdBy:e.createdBy,totalPages:e.totalPage})),this.uploadedFilesData=this.uploadedFiles)},async uploadFile(e,t){const i=new FormData;i.append("file",e.file),i.append("repositoryId",this.repositoryId);let s=e.name;const a=s.split(".").pop();if(Object(X["a"])(a))try{const s=await He()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"},onUploadProgress:function(t){const i=Math.round(100*t.loaded/t.total);e.uploadedPercentage=i}}),{status:a}=s;if(200!==a)throw"Invalid response";this.filesToUpload.splice(t,1),this.refreshFileList()}catch(l){console.error(l),this.$alert.error("error uploading file - "+e.name)}else this.$alert.info("This file format is not supported")},async setStatus(e){let t="";"AUTO_PROCESSING"===e&&this.ocrType&&(t="STANDARD"===this.ocrType?"LEADTOOLS":"SPIRE");const i=this.selectedFiles.map(i=>({id:i.id,status:e,OCRPages:this.ocrPages,OCRType:"AUTO_PROCESSING"===e?this.ocrType:"MANUAL",OCRTool:t,OCRPattern:this.ocrPattern})),{error:s}=await fe["r"].uploadSetStatus(i);s?this.$alert.error(s):this.$emit("move")},async deleteFiles(){const e=this.selectedFiles.map(e=>e.id),{error:t}=await fe["r"].deleteUploadedFiles(e);t?this.$alert.error(t):this.getUploadedFiles()},mergeFiles(){},splitFiles(){},selectedOneFile(e){const t=this.selectedFiles.findIndex(t=>t.id===e.id),i=t>-1;this.selectedFiles=[],i||this.selectedFiles.push(e)},selectAllFile(e,t){e?"UPLOADED"===t&&(this.selectedFiles=this.uploadedFiles):this.selectedFiles=[]}}},Je=Ye,Ke=(i("df27"),Object(h["a"])(Je,y,b,!1,null,"76ecec6a",null)),Ze=Ke.exports,et=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"indexer"}},[t("Portal",{attrs:{to:"upload-index-action-bar"}},[t("div",{staticClass:"row"},[e._e(),e._e(),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-refresh"},on:{click:e.refreshAll}})],1)]),t("ContentWrapper",{scopedSlots:e._u([{key:"main",fn:function(){return[e.isFileViewerVisible?t("FileViewerWrapper",{attrs:{file:e.selectedFiles[0],type:2},on:{back:e.hideFileViewer,"show-files":e.showFilesSheet,delete:e.showDeleteConfirmation,next:e.showNextFile,previous:e.showPreviousFile,"free-hand":e.freeHandIndexing},scopedSlots:e._u([{key:"header-right",fn:function(){return[t("BaseActionButton",{directives:[{name:"show",rawName:"v-show",value:e.showAutoProcessBtn,expression:"showAutoProcessBtn"},{name:"tooltip",rawName:"v-tooltip.top",value:"move to autoprocess",expression:"'move to autoprocess'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-robot-outline"},on:{click:function(t){return e.showAutoProcessConfirmation(e.selectedFiles[0])}}})]},proxy:!0}],null,!1,2983654981)}):[t("BaseScrollbar",{staticClass:"q-px-md q-mt-md",attrs:{height:"calc(100vh - 219px)"}},[e.loadingBarContent?t("BaseLoadingBarSheet",{staticClass:"loading-content"}):e._e(),t("AutoProcessingFileList",{attrs:{files:e.autoProcessingFiles,"selected-files":e.selectedFiles},on:{select:e.selectFile,delete:e.showDeleteConfirmation,"manual-index":e.showManualIndexConfirmation,selectedFile:e.selectedOneFile,selectAll:e.selectAllFile,getFiles:e.getSpecficFiles}}),t("IndexingFileList",{attrs:{files:e.indexingFiles,"selected-files":e.selectedFiles,"indexing-type":e.indexingType,"fields-type":e.fieldsType},on:{select:e.selectFile,view:e.showFileViewer,process:e.showAutoProcessConfirmation,delete:e.showDeleteConfirmation,selectedFile:e.selectedOneFile,selectAll:e.selectAllFile,getFiles:e.getSpecficFiles}}),t("ExportingFileList",{attrs:{files:e.exportingFiles,"selected-files":e.selectedFiles},on:{select:e.selectFile,delete:e.showDeleteConfirmation,selectedFile:e.selectedOneFile,selectAll:e.selectAllFile,getFiles:e.getSpecficFiles}})],1),e.isFileViewerVisible?e._e():t("Pagination",{staticClass:"q-ma-md",attrs:{"total-items":e.totalItems,"current-page":e.currentPage,"items-per-page":e.itemsPerPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:itemsPerPage":function(t){e.itemsPerPage=t},"update:items-per-page":function(t){e.itemsPerPage=t}}})]]},proxy:!0},{key:"aside",fn:function(){return[t("RepositoryFields",{attrs:{"workspace-id":e.workspaceId,"repository-id":e.repositoryId,file:e.selectedFile,"has-select-all-files":e.hasSelectAllFiles,"selected-files":e.selectedFiles,"old-selected-id":e.oldSelectedId,"old-selected-item-id":e.oldSelectedItemId,refreshed:e.isRefreshed},on:{refresh:e.getFiles,updteSavedFile:e.updteSavedFile,upload:e.queueFilesForUpload}})]},proxy:!0}])}),t("FileSheet",{attrs:{"file-list":e.fileList,"selected-files":e.selectedFiles},on:{select:e.singleSelectFile},model:{value:e.isFilesSheetVisible,callback:function(t){e.isFilesSheetVisible=t},expression:"isFilesSheetVisible"}}),t("ConfirmDeleteFiles",{attrs:{files:e.selectedFiles},on:{delete:e.deleteFiles},model:{value:e.isDeleteConfirmationVisible,callback:function(t){e.isDeleteConfirmationVisible=t},expression:"isDeleteConfirmationVisible"}}),t("ConfirmManualIndexFiles",{attrs:{files:e.selectedFiles},on:{update:e.setStatus},model:{value:e.isManualIndexConfirmationVisible,callback:function(t){e.isManualIndexConfirmationVisible=t},expression:"isManualIndexConfirmationVisible"}}),t("ConfirmExportFiles",{attrs:{files:e.selectedFiles},on:{export:e.exportFiles},model:{value:e.isExportConfirmationVisible,callback:function(t){e.isExportConfirmationVisible=t},expression:"isExportConfirmationVisible"}}),t("ConfirmAutoProcessFiles",{attrs:{"repository-id":e.repositoryId,files:e.selectedFiles,"ocr-pages":e.ocrPages,"ocr-type":e.ocrType,"ocr-pattern":e.ocrPattern},on:{"update:ocrPages":function(t){e.ocrPages=t},"update:ocr-pages":function(t){e.ocrPages=t},"update:ocrType":function(t){e.ocrType=t},"update:ocr-type":function(t){e.ocrType=t},"update:ocrPattern":function(t){e.ocrPattern=t},"update:ocr-pattern":function(t){e.ocrPattern=t},update:e.setStatus},model:{value:e.isAutoProcessConfirmationVisible,callback:function(t){e.isAutoProcessConfirmationVisible=t},expression:"isAutoProcessConfirmationVisible"}})],1)},tt=[],it=(i("3c65"),function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"auto-processing-file-list"}},[t("FileList",{staticClass:"q-mb-md",attrs:{"has-files":e.hasFiles,"number-of-files":e.files.length,"has-selected-files":e.hasSelectedFiles,"show-auto-load":e.showAutoLoad},on:{getFiles:function(t){return e.$emit("getFiles","AUTO_PROCESSING")}},scopedSlots:e._u([{key:"label",fn:function(){return[e.label?t("span",{staticClass:"label"},[e._v(e._s(e.label))]):t("span",[e._v("Auto Processing")])]},proxy:!0},{key:"actions-maximized",fn:function(){return[e.hasSelectedFiles?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"move to manual index",expression:"'move to manual index'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-label-multiple-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("manual-index")}}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.top",value:"Delete",expression:"'Delete'",arg:"red",modifiers:{top:!0}}],staticClass:"q-mr-md",attrs:{"is-flat":"",color:"red",icon:"eva-trash-2-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete")}}})]:e._e(),e.files.length?t("div",{staticClass:"row"},[t("div",{staticClass:"col"}),t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"select all",expression:"'select all'",modifiers:{top:!0}}],staticClass:"q-mx-sm cursor-pointer col-auto",attrs:{name:e.isSelectAll?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:e.isSelectAll?"secondary":"grey"},on:{click:function(t){return t.stopPropagation(),e.selectAllFile.apply(null,arguments)}}})],1):e._e()]},proxy:!0},e.hasFiles?{key:"actions-minimized",fn:function(){return[t("Pulse",{staticClass:"q-mr-md"})]},proxy:!0}:null,{key:"default",fn:function(){return e._l(e.files,(function(i){return t("FileListItem",{key:i.id,attrs:{file:i,"is-selected":e.isFileSelected(i)},on:{view:function(t){return e.$emit("view",i)},selectFile:function(t){return e.fileSelect(i)}},scopedSlots:e._u([{key:"status",fn:function(){return[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",{staticClass:"status"},[e._v("Auto Processing")]),t("Pulse",{staticClass:"q-ml-md"})]},proxy:!0}],null,!0)},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:e.isFileSelected(i)?"eva-checkmark-circle-2":"eva-radio-button-off-outline","is-inactive":!e.isFileSelected(i),color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.$emit("select",i)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-more-vertical"},on:{click:function(e){e.stopPropagation()}}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right","content-class":"q-py-sm"}},e._l(e.actions,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.$emit(s.value,i)}}})})),1)],1)],1)}))},proxy:!0}],null,!0)})],1)}),st=[],at=i("4e64"),lt={name:"AutoProcessingFileList",components:{FileList:O["a"],FileListItem:E["a"],Pulse:at["a"],ListItem:B["a"]},props:{files:{type:Array,required:!0},selectedFiles:{type:Array,required:!0}},data(){return{actions:[{id:this.$nano.id(),icon:"mdi-label-multiple-outline",label:"Manual Index",value:"manual-index"},{id:this.$nano.id(),icon:"eva-trash-2-outline",label:"Delete",value:"delete"}],isSelectAll:!1,showAutoLoad:!0}},computed:{hasFiles(){return!!this.files.length},autoProcessingFiles(){return this.selectedFiles.filter(e=>"AUTO_PROCESSING"===e.status).length},hasSelectedFiles(){return!!this.autoProcessingFiles},label(){if(!this.hasSelectedFiles)return"";const e=1===this.autoProcessingFiles?"file":"files";return`${this.autoProcessingFiles} ${e} selected`}},methods:{isFileSelected(e){return!!this.selectedFiles.find(t=>t.id===e.id)},fileSelect(e){this.$emit("selectedFile",e)},selectAllFile(){this.isSelectAll=!this.isSelectAll,this.$emit("selectAll",this.isSelectAll,"AUTO_PROCESSING")}}},ot=lt,nt=(i("8d98"),Object(h["a"])(ot,it,st,!1,null,"af98d938",null)),rt=nt.exports;m()(nt,"components",{QMenu:D["a"]});var dt=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"not-indexed-file-list"}},[t("FileList",{staticClass:"q-mb-md",attrs:{"has-files":e.hasFiles,"has-selected-files":e.hasSelectedFiles,"number-of-files":e.files.length,"show-auto-load":e.showAutoLoad},on:{getFiles:function(t){return e.$emit("getFiles","INDEXING")}},scopedSlots:e._u([{key:"label",fn:function(){return[e.label?t("span",{staticClass:"label"},[e._v(e._s(e.label))]):t("span",[e._v("Indexing")])]},proxy:!0},{key:"actions-maximized",fn:function(){return[e.hasSelectedFiles?[t("BaseActionButton",{directives:[{name:"show",rawName:"v-show",value:e.showAutoProcessBtn,expression:"showAutoProcessBtn"},{name:"tooltip",rawName:"v-tooltip.top",value:"move to autoprocess",expression:"'move to autoprocess'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-robot-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("process")}}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.top",value:"Delete",expression:"'Delete'",arg:"red",modifiers:{top:!0}}],staticClass:"q-mr-md",attrs:{"is-flat":"",color:"red",icon:"eva-trash-2-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete")}}})]:e._e(),e.files.length?t("div",{staticClass:"row"},[t("div",{staticClass:"col"}),t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"select all",expression:"'select all'",modifiers:{top:!0}}],staticClass:"q-mx-sm cursor-pointer col-auto",attrs:{name:e.isSelectAll?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:e.isSelectAll?"secondary":"grey"},on:{click:function(t){return t.stopPropagation(),e.selectAllFile.apply(null,arguments)}}})],1):e._e()]},proxy:!0},{key:"default",fn:function(){return e._l(e.files,(function(i){return t("FileListItem",{key:i.id,attrs:{file:i,"is-selected":e.isFileSelected(i)},on:{view:function(t){return e.$emit("view",i)},selectFile:function(t){return e.fileSelect(i)}},scopedSlots:e._u([{key:"status",fn:function(){return[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",{class:i.status},[e._v(e._s(i.status))])]},proxy:!0}],null,!0)},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:e.isFileSelected(i)?"eva-checkmark-circle-2":"eva-radio-button-off-outline","is-inactive":!e.isFileSelected(i),color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.$emit("select",i)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-more-vertical"},on:{click:function(e){e.stopPropagation()}}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right","content-class":"q-py-sm"}},e._l(e.getActions(i),(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.$emit(s.value,i)}}})})),1)],1)],1)}))},proxy:!0}])})],1)},ct=[],ut={name:"IndexingFileList",components:{FileList:O["a"],FileListItem:E["a"],ListItem:B["a"]},props:{files:{type:Array,required:!0},selectedFiles:{type:Array,required:!0},indexingType:{type:String,required:!0},fieldsType:{type:String,required:!0}},data(){return{actions:[{id:this.$nano.id(),icon:"eva-eye-outline",label:"View",value:"view"},{id:this.$nano.id(),icon:"mdi-robot-outline",label:"Auto-process",value:"process"},{id:this.$nano.id(),icon:"eva-trash-2-outline",label:"Delete",value:"delete"}],fileId:0,isSelectAll:!1,showAutoLoad:!0}},computed:{hasFiles(){return!!this.files.length},notIndexedFiles(){return this.selectedFiles.filter(e=>"EXPORT"!==e.status&&"AUTO_PROCESSING"!==e.status).length},hasSelectedFiles(){return!!this.notIndexedFiles},label(){if(!this.hasSelectedFiles)return"";const e=1===this.notIndexedFiles?"file":"files";return`${this.notIndexedFiles} ${e} selected`},getFileTypes(){const e=this.selectedFiles.reduce((e,t)=>{const i=this.getFileType(t.name);return e[i]=e[i]+1||1,e},{});return Object.keys(e)},showAutoProcessBtn(){if(0===this.selectedFiles.length||"MANUAL"===this.indexingType||"STATIC"===this.fieldsType)return!1;const e=this.getFileTypes;return e.every(e=>["pdf","tif","tiff","png","jpeg","jpg"].includes(e))}},methods:{isFileSelected(e){return!!this.selectedFiles.find(t=>t.id===e.id)},getFileType(e){return e.split(".").reverse()[0].slice(0,4).toLowerCase()},getActions(e){let t=this.actions;const i=this.getFileType(e.name);let s=["pdf","tif","tiff","png","jpeg","jpg"].includes(i);return s&&"MANUAL"!==this.indexingType||(t=t.filter(e=>"process"!==e.value)),t},fileSelect(e){this.$emit("selectedFile",e)},selectAllFile(){this.isSelectAll=!this.isSelectAll,this.$emit("selectAll",this.isSelectAll,"INDEXING")}}},ht=ut,pt=(i("64ed3"),Object(h["a"])(ht,dt,ct,!1,null,"7795a238",null)),ft=pt.exports;m()(pt,"components",{QMenu:D["a"]});var mt=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"exporting-file-list"}},[t("FileList",{staticClass:"q-mb-md",attrs:{"has-files":e.hasFiles,"has-selected-files":e.hasSelectedFiles,"number-of-files":e.files.length,"show-auto-load":e.showAutoLoad},on:{getFiles:function(t){return e.$emit("getFiles","EXPORT")}},scopedSlots:e._u([{key:"label",fn:function(){return[e.label?t("span",{staticClass:"label"},[e._v(e._s(e.label))]):t("span",[e._v("Exporting")])]},proxy:!0},{key:"actions-maximized",fn:function(){return[e.hasSelectedFiles?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.top",value:"Delete",expression:"'Delete'",arg:"red",modifiers:{top:!0}}],staticClass:"q-mr-md",attrs:{"is-flat":"",color:"red",icon:"eva-trash-2-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete")}}})]:e._e(),e.files.length?t("div",{staticClass:"row"},[t("div",{staticClass:"col"}),t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"select all",expression:"'select all'",modifiers:{top:!0}}],staticClass:"q-mx-sm cursor-pointer col-auto",attrs:{name:e.isSelectAll?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:e.isSelectAll?"secondary":"grey"},on:{click:function(t){return t.stopPropagation(),e.selectAllFile.apply(null,arguments)}}})],1):e._e()]},proxy:!0},e.hasFiles?{key:"actions-minimized",fn:function(){return[t("Pulse",{staticClass:"q-mr-md"})]},proxy:!0}:null,{key:"default",fn:function(){return e._l(e.files,(function(i){return t("FileListItem",{key:i.id,attrs:{file:i,"is-selected":e.isFileSelected(i)},on:{selectFile:function(t){return e.fileSelect(i)}},scopedSlots:e._u([{key:"status",fn:function(){return[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),i.hasError?t("div",{staticClass:"error"},[e._v("Error")]):[t("div",{staticClass:"status"},[e._v("Exporting")]),t("Pulse",{staticClass:"q-ml-md"})]]},proxy:!0},e.hasSelectedFiles?{key:"actions-maximized",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.top",value:"Delete",expression:"'Delete'",arg:"red",modifiers:{top:!0}}],staticClass:"q-mr-md",attrs:{"is-flat":"",color:"red",icon:"eva-trash-2-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete")}}})]},proxy:!0}:null],null,!0)},[i.hasError?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Reexport",expression:"'Reexport'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-refresh"},on:{click:function(t){return t.stopPropagation(),e.$emit("reexport",i)}}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.top",value:"Error Log",expression:"'Error Log'",arg:"red",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-file-document-outline",color:"red"},on:{click:function(t){return t.stopPropagation(),e.$emit("log",i)}}})]:e._e(),t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:e.isFileSelected(i)?"eva-checkmark-circle-2":"eva-radio-button-off-outline","is-inactive":!e.isFileSelected(i),color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.$emit("select",i)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-more-vertical"},on:{click:function(e){e.stopPropagation()}}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right","content-class":"q-py-sm"}},e._l(e.actions,(function(s){return t("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(t){return e.$emit(s.value,i)}}})})),1)],1)],2)}))},proxy:!0}],null,!0)})],1)},vt=[],gt={name:"ExportingFileList",components:{FileList:O["a"],FileListItem:E["a"],ListItem:B["a"],Pulse:at["a"]},props:{files:{type:Array,required:!0},selectedFiles:{type:Array,required:!0}},data(){return{actions:[{id:this.$nano.id(),icon:"eva-eye-outline",label:"View",value:"view"},{id:this.$nano.id(),icon:"eva-trash-2-outline",label:"Delete",value:"delete"}],isSelectAll:!1,showAutoLoad:!0}},computed:{hasFiles(){return!!this.files.length},exportingFiles(){return this.selectedFiles.filter(e=>"EXPORT"===e.status).length},hasSelectedFiles(){return!!this.exportingFiles},label(){if(!this.hasSelectedFiles)return"";const e=1===this.exportingFiles?"file":"files";return`${this.exportingFiles} ${e} selected`}},methods:{isFileSelected(e){return!!this.selectedFiles.find(t=>t.id===e.id)},fileSelect(e){this.$emit("selectedFile",e)},selectAllFile(){this.isSelectAll=!this.isSelectAll,this.$emit("selectAll",this.isSelectAll,"EXPORT")}}},yt=gt,bt=(i("72b7"),Object(h["a"])(yt,mt,vt,!1,null,"2b1c33c6",null)),_t=bt.exports;m()(bt,"components",{QMenu:D["a"]});var Ft=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"mdi-text-box-minus-outline","icon-color":"orange"},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Export Files")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[e._v(" Are you sure you want to export the following "+e._s(e.chunk)+"? "),t("ol",{staticClass:"q-my-lg"},e._l(e.files,(function(i){return t("li",{key:i.id,staticClass:"font-semibold"},[e._v(" "+e._s(i.name)+" ")])})),0)])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"orange"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"orange"},on:{click:e.handleYes}})]},proxy:!0}])})},St=[],xt={name:"ConfirmExportFiles",components:{Confirm:se["a"]},props:{value:{type:Boolean,default:!1},files:{type:Array,required:!0}},computed:{chunk(){return this.files.length?1===this.files.length?"file":"files":""}},methods:{handleInput(){this.$emit("input",!1)},handleNo(){this.$emit("input",!1)},handleYes(){this.$emit("input",!1),this.$emit("export","EXPORT")}}},Ct=xt,wt=Object(h["a"])(Ct,Ft,St,!1,null,"c3af53ac",null),Tt=wt.exports,kt=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"repository-fields"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 192px)"}},[t("WorkspaceList",{model:{value:e.workspaceId,callback:function(t){e.workspaceId=t},expression:"workspaceId"}}),t("RepositoryList",{attrs:{"workspace-id":e.workspaceId},on:{input:e.handleRepository},model:{value:e.repositoryId,callback:function(t){e.repositoryId=t},expression:"repositoryId"}}),e.hasFile?[e.fields.length&&"STATIC"===e.fieldType?t("div",{staticClass:"q-pa-md"},[t("ValidationObserver",{ref:"form"},[e._l(e.fields,(function(i,s){return["AUTO_GENERATED"!==i.dataType?[t("div",{key:i.id,staticClass:"field-wrapper"},["TABLE"===i.dataType?[t("TableField",{attrs:{field:i},model:{value:e.fieldsModel[i.name],callback:function(t){e.$set(e.fieldsModel,i.name,t)},expression:"fieldsModel[field.name]"}})]:["STATIC"===e.fieldType?t("RepositoryField",{staticClass:"col",attrs:{field:i,"sync-field":e.syncField,"repository-id":e.repositoryId,filter:i.filter,"row-index":s,"parent-control":e.checkParentControl(i),"freezed-data":e.freezedData,"show-freeze":!0},on:{saveSync:e.getSyncDataList,filterBy:e.filterChildControlValues,input:function(t){return e.updateMandatory(t,i,s)},"update:freezedData":e.updateFreezedData,"update:freezed":e.updateFreezeState,"update:removeFreezed":e.removeFreezedData},model:{value:e.fieldsModel[i.name],callback:function(t){e.$set(e.fieldsModel,i.name,t)},expression:"fieldsModel[field.name]"}}):e._e(),"STATIC"===e.fieldType&&Object.keys(e.file.suggestions).length?t("BotRecommendations",{staticClass:"bot-recommendations",attrs:{field:i,suggestions:Array.isArray(e.file.suggestions)?e.file.suggestions:e.file.suggestions[i.name]},on:{click:function(t){return e.controlFocus(e.fieldsModel[i.name])}},model:{value:e.fieldsModel[i.name],callback:function(t){e.$set(e.fieldsModel,i.name,t)},expression:"fieldsModel[field.name]"}}):e._e()]],2)]:e._e()]}))],2)],1):e._e(),"DYNAMIC"===e.fieldType?t("div",{staticClass:"q-pa-md"},[t("div",{staticClass:"action-bar q-mb-sm"},[e.dynamicData.length?[t("Tabs",{attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}})]:[t("Tabs",{attrs:{tabs:e.tabsFields},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}})]],2),"FIELDS"===e.tab?[t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"row items-center q-mb-sm"},[t("div",{staticClass:"col q-mr-sm"},[t("div",{on:{click:e.addField}},[t("q-chip",{staticClass:"cursor-pointer secondary-hover",staticStyle:{float:"right"},attrs:{outline:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"mdi-plus-thick",color:"secondary","text-color":"white"}}),e._v(" Add Field ")],1)],1)]),t("div",{staticClass:"field-label col-auto"},[t("div",{staticClass:"label",staticStyle:{float:"right"}},[e._v("Mark All")])]),t("BaseIcon",{staticClass:"q-ml-sm check-box cursor-pointer col-auto",attrs:{name:e.fieldCheckAll?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:e.fieldCheckAll?"secondary":"grey"},on:{click:function(t){return e.fieldSelectAll()}}})],1),e._l(e.dynamicFields,(function(i,s){return t("div",{key:i.id,staticClass:"field-wrapper"},[[t("RepositoryDynamicField",{staticClass:"col",attrs:{field:i,fields:e.dynamicFields,"repository-id":e.repositoryId,"label-name":i.name},model:{value:e.dynamicFieldsModel[i.name],callback:function(t){e.$set(e.dynamicFieldsModel,i.name,t)},expression:"dynamicFieldsModel[field.name]"}}),e._e(),"DYNAMIC"===i.type?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Change Type",expression:"'Change Type'",modifiers:{top:!0}}],staticStyle:{margin:"36px 0px 0px 3px"},attrs:{"is-flat":"","no-border":"",icon:"eva-layers-outline"}},[t("q-menu",{attrs:{anchor:"bottom right",self:"top right",offset:[0,8]}},[t("div",{staticStyle:{width:"280px"}},[t("div",{staticClass:"title-3 border q-pa-xs"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchType,expression:"searchType"}],ref:"searchQuery",refInFor:!0,staticClass:"q-pa-md",attrs:{type:"text",autofocus:"",placeholder:"Search Type"},domProps:{value:e.searchType},on:{input:function(t){t.target.composing||(e.searchType=t.target.value)}}})]),t("BaseScrollbar",{staticClass:"q-px-xs q-mb-sm",attrs:{height:"202px"}},[t("div",{staticClass:"chips"},[t("OptionsPicker",{attrs:{value:i.dataType,options:e._dataTypes},on:{select:function(t){return e.changeDataType(t,s)}}})],1)])],1)])],1):e._e(),"DYNAMIC"===i.type?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],staticStyle:{margin:"36px 0px 0px 2px"},attrs:{"is-flat":"","no-border":"",color:"negative",icon:"eva-trash-outline"},on:{click:function(t){return e.deleteDynamicField(s)}}}):e._e(),t("BaseIcon",{staticClass:"q-mr-sm check-box cursor-pointer",attrs:{name:i.selected?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:i.selected?"secondary":"grey"},on:{click:function(t){return e.fieldSelected(i,s)}}})]],2)}))],2)]:e._e(),"TABLE"===e.tab&&e.dynamicData.length?[t("div",{attrs:{id:"dynamicIndexingTables"}},[t("div",{staticClass:"row q-mb-sm q-mt-sm"},[t("BaseActionButton",{staticClass:"col-auto",attrs:{icon:"eva-external-link-outline",color:"secondary","is-flat":""},on:{click:function(t){e.expandTableModal=!0}}}),t("div",{staticClass:"field-label col q-mt-sm"},[t("div",{staticClass:"q-mb-sm label",staticStyle:{float:"right"}},[e._v("Mark All")])]),t("BaseIcon",{staticClass:"q-ml-sm check-box cursor-pointer col-auto q-mt-sm",attrs:{name:e.tableCheckAll?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:e.tableCheckAll?"secondary":"grey"},on:{click:function(t){return e.tableSelectAll()}}})],1),e._l(e.dynamicData,(function(i,s){return[t("div",{key:s,staticClass:"row"},[t("div",{staticClass:"field-label col"},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"col-auto"},[i.showEditTableName?e._e():[t("div",{on:{click:function(t){return e.editTableName(i,s)}}},[i.tablename?t("div",{staticClass:"q-mb-sm label"},[e._v(" "+e._s(i.tablename)+" ")]):t("div",{staticClass:"q-mb-sm label"},[e._v(" Table "+e._s(++s)+" ")])])],i.showEditTableName?t("input",{directives:[{name:"model",rawName:"v-model",value:i.tablename,expression:"table.tablename"}],ref:"searchInput",refInFor:!0,staticClass:"label q-mb-sm",attrs:{type:"text",autocomplete:"off",autofocus:i.showEditTableName},domProps:{value:i.tablename},on:{input:[function(t){t.target.composing||e.$set(i,"tablename",t.target.value)},function(t){return e.updateTableLabel(i,s)}],mouseleave:function(t){return e.validateTableLabel(i)}}}):e._e(),i.labelError?t("FormFieldError",{staticClass:"q-mb-sm",attrs:{error:i.labelError}}):e._e()],2)])]),t("BaseIcon",{staticClass:"q-ml-sm check-box cursor-pointer col-auto",attrs:{name:i.selected?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:i.selected?"secondary":"grey"},on:{click:function(t){return e.fieldSelected(i)}}})],1),t("table",{key:i.tablename},e._l(i.cellvalues,(function(i,s){return t("tr",{key:s},e._l(i,(function(i){return t("NoHeader"===i.kind?"td":"th",{key:`r${s}_c${i.columnindex}`,tag:"th"},[e._v(" "+e._s(i.cellvalue)+" ")])})),1)})),0)]}))],2)]:e._e()],2):e._e()]:e._e(),e.exportAll?t("div",{staticClass:"q-pa-md",attrs:{id:"export-all"}},[e.allFiles?t("div",{staticClass:"row items-center justify-center",staticStyle:{height:"100%"}},[t("div",{staticClass:"col-12 text-center"},[t("div",{staticClass:"indexed"},[t("BaseIcon",{attrs:{name:"mdi-check-circle-outline",size:"44px",color:"green"}})],1),t("div",{staticClass:"title-2 q-mt-sm"},[e._v("Success!")]),t("div",{staticClass:"label"},[e._v(" "+e._s(e.indexedFiles.length)+" files exported successfully ")])])]):e._e(),e.allFiles?e._e():t("div",{staticClass:"row items-center justify-center q-mt-md",staticStyle:{height:"100%"}},[t("div",{staticClass:"col-12 text-center"},[t("div",{staticClass:"not-indexed"},[t("BaseIcon",{attrs:{name:"mdi-alert-circle-outline",size:"44px","inherit-color":""}})],1),t("div",{staticClass:"label"},[e.indexedFiles.length?t("div",{staticClass:"indexed"},[e._v(" Exported : "+e._s(e.indexedFiles.length)+" ")]):e._e(),t("div",{staticClass:"not-indexed"},[e._v(" Unprocessed : "+e._s(e.notIndexedFiles.length)+" ")]),t("div",[e._v(" Please check the mandatory fields in the unprocessed files ")])])])]),t("Dropzone",{attrs:{"show-workspace-repository":!1,"tab-indexing":!0,"workspace-id":e.workspaceId,"repository-id":e.repositoryId},on:{upload:e.queueFilesForUpload}})],1):e._e()],2),t("div",{staticClass:"footer"},[e.file.status&&"STATIC"===e.fieldType?t("BaseButton",{staticClass:"q-mr-sm",attrs:{icon:"eva-save-outline",label:"save",color:"secondary","is-loading":e.isSaveLoading,disabled:e.isExportLoading},on:{click:function(t){e.isSaveLoading=!0,e.saveFields("")}}}):e._e(),!e.file.status||"DYNAMIC"!==e.fieldType||"EXTRACTED"!==e.file.status&&"INDEXED"!==e.file.status?e._e():t("BaseButton",{staticClass:"q-mr-sm",attrs:{icon:"eva-save-outline",label:"save",color:"secondary","is-loading":e.isSaveLoading,disabled:e.isExportLoading},on:{click:function(t){return e.saveDynamicFields("")}}}),e.file.status&&"DYNAMIC"===e.fieldType&&e.dynamicFields.length?t("BaseButton",{attrs:{icon:"eva-external-link-outline",label:"export","is-loading":e.isExportLoading,disabled:e.isSaveLoading},on:{click:function(t){e.isExportLoading=!0,e.saveFields("EXPORT")}}}):e._e(),e.file.status&&"STATIC"===e.fieldType?t("BaseButton",{attrs:{icon:"eva-external-link-outline",label:"export","is-loading":e.isExportLoading,disabled:e.isSaveLoading},on:{click:function(t){e.isExportLoading=!0,e.saveFields("EXPORT")}}}):e._e(),e.hasSelectAllFiles?t("BaseButton",{attrs:{icon:"eva-external-link-outline",label:"export all","is-loading":e.isExportLoading},on:{click:function(t){return e.exportAllFiles()}}}):e._e()],1),t("Modal",{attrs:{width:"60vw",height:"80vh"},on:{input:function(t){e.expandTableModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Link Tables")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"dynamicIndexingTablesExpand"}},e._l(e.dynamicData,(function(i,s){return t("div",{key:s},[t("div",{staticClass:"row"},[t("div",{staticClass:"field-label col"},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"col-auto"},[i.showEditTableName?e._e():[t("div",{on:{click:function(t){return e.editTableName(i,s)}}},[i.tablename?t("div",{staticClass:"q-mb-sm label"},[e._v(" "+e._s(i.tablename)+" ")]):t("div",{staticClass:"q-mb-sm label"},[e._v(" Table "+e._s(++s)+" ")])])],i.showEditTableName?t("input",{directives:[{name:"model",rawName:"v-model",value:i.tablename,expression:"table.tablename"}],ref:"searchInput",refInFor:!0,staticClass:"label q-mb-sm",attrs:{type:"text",autocomplete:"off",autofocus:i.showEditTableName},domProps:{value:i.tablename},on:{input:[function(t){t.target.composing||e.$set(i,"tablename",t.target.value)},function(t){return e.updateTableLabel(i,s)}],mouseleave:function(t){return e.validateTableLabel(i)}}}):e._e(),i.labelError?t("FormFieldError",{staticClass:"q-mb-sm",attrs:{error:i.labelError}}):e._e()],2)])])]),t("table",e._l(i.cellvalues,(function(i,s){return t("tr",{key:s},e._l(i,(function(i){return t("NoHeader"===i.kind?"td":"th",{key:`r${s}_c${i.columnindex}`,tag:"th"},[e._v(" "+e._s(i.cellvalue)+" ")])})),1)})),0)])})),0)]},proxy:!0}]),model:{value:e.expandTableModal,callback:function(t){e.expandTableModal=t},expression:"expandTableModal"}}),t("Confirm",{attrs:{icon:"mdi-file-alert","icon-color":"red"},on:{input:function(t){e.isExportLoading=!1,e.showNoFieldsSelectModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.file.name))]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md text-md"},[e.hasNoFieldSelect?t("p",[e._v(" Do you want to export this file without selecting any field "),e.hasNoTableSelect?t("span",[e._v(" and table ")]):e._e(),e._v("? ")]):e._e(),!e.hasNoFieldSelect&&e.hasNoTableSelect?t("p",[e._v(" Do you want to export this file without selecting table? ")]):e._e()])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no"},on:{click:function(t){e.isExportLoading=!1,e.showNoFieldsSelectModal=!1}}}),t("BaseButton",{attrs:{label:"yes",color:"primary"},on:{click:function(t){return e.saveFields("EXPORT","save")}}})]},proxy:!0}]),model:{value:e.showNoFieldsSelectModal,callback:function(t){e.showNoFieldsSelectModal=t},expression:"showNoFieldsSelectModal"}})],1)},It=[],At=i("42dc"),$t=i("dc7a"),Pt=i("7bb1"),Ot=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"table-field"}},[t("FormFieldLabel",{attrs:{label:e.field.name,"is-mandatory":e.field.isMandatory}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:secondary.top",value:"edit table",expression:"'edit table'",arg:"secondary",modifiers:{top:!0}}],staticClass:"edit-table",attrs:{"is-flat":"",color:"secondary",icon:"eva-edit-outline","no-border":""},on:{click:e.showTableFieldInput}}),t("BaseScrollbar",[e.value.length?t("table",[t("thead",[t("tr",e._l(e.field.options.columns,(function(i){return t("th",{key:i._id},[e._v(" "+e._s(i.name)+" ")])})),0)]),t("tbody",[e._l(e.value,(function(i,s){return t("tr",{key:s},e._l(e.field.options.columns,(function(s){return t("td",{key:s._id},[e._v(" "+e._s(i[s.name])+" ")])})),0)})),t("tr",e._l(e.field.options.columns,(function(i){return t("th",{key:i._id},[i.options.showColumnSum?t("div",[e._v(" "+e._s(e.getColumnSum(i.name))+" ")]):e._e()])})),0)],2)]):e._e()]),t("TableFieldInput",{attrs:{label:e.field.name,columns:e.field.options.columns,"fields-model":e.value},on:{save:e.handleSave},model:{value:e.isTableFieldInputVisible,callback:function(t){e.isTableFieldInputVisible=t},expression:"isTableFieldInputVisible"}})],1)},Et=[],Bt=i("3445"),Lt=function(){var e=this,t=e._self._c;return t("Modal",{attrs:{value:e.value,width:"80vw","has-footer":""},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.label))]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"table-field-input"}},[t("BaseScrollbar",[t("table",[t("thead",[t("tr",[e._l(e.columns,(function(i){return t("th",{key:i._id},[e._v(" "+e._s(i.name)+" ")])})),t("th",{staticClass:"action"},[t("BaseActionButton",{attrs:{"is-flat":"",color:"secondary",icon:"eva-plus-outline","no-border":""},on:{click:e.addRow}})],1)],2)]),t("tbody",[e._l(e.tableModel,(function(i,s){return t("tr",{key:s},[e._l(e.columns,(function(s){return t("td",{key:s._id},[t("ValidationObserver",{ref:"form",refInFor:!0},["SHORT_TEXT"===s.dataType||"BARCODE"===s.dataType?t("ValidationProvider",{attrs:{name:s.name,rules:{required:s.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("TextField",{attrs:{"is-mandatory":s.isMandatory,error:a[0]},model:{value:i[s.name],callback:function(t){e.$set(i,s.name,t)},expression:"row[column.name]"}})]}}],null,!0)}):e._e(),"NUMBER"===s.dataType?t("ValidationProvider",{attrs:{name:s.name,rules:{required:s.isMandatory,integer:!s.options.allowDecimals}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("NumberField",{attrs:{"is-mandatory":"",error:a[0]},model:{value:i[s.name],callback:function(t){e.$set(i,s.name,t)},expression:"row[column.name]"}})]}}],null,!0)}):e._e(),"DATE"===s.dataType?t("ValidationProvider",{attrs:{name:s.name,rules:{required:s.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("DateField",{attrs:{"is-mandatory":"",error:a[0]},model:{value:i[s.name],callback:function(t){e.$set(i,s.name,t)},expression:"row[column.name]"}})]}}],null,!0)}):e._e(),"TIME"===s.dataType?t("ValidationProvider",{attrs:{name:s.name,rules:{required:s.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("TimeField",{attrs:{"is-mandatory":s.isMandatory,error:a[0]},model:{value:i[s.name],callback:function(t){e.$set(i,s.name,t)},expression:"row[column.name]"}})]}}],null,!0)}):e._e(),"DATE_TIME"===s.dataType?t("ValidationProvider",{attrs:{name:s.name,rules:{required:s.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("DateTimeField",{attrs:{"is-mandatory":s.isMandatory,error:a[0]},model:{value:i[s.name],callback:function(t){e.$set(i,s.name,t)},expression:"row[column.name]"}})]}}],null,!0)}):e._e(),"SINGLE_SELECT"===s.dataType&&["EXISTING","MASTER"].includes(s.options.optionsType)?t("ValidationProvider",{attrs:{name:s.name,rules:{required:s.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("AsyncSelectField",{attrs:{"is-mandatory":s.isMandatory,error:a[0],"new-option":s.options.allowToAddNewOptions},model:{value:i[s.name],callback:function(t){e.$set(i,s.name,t)},expression:"row[column.name]"}})]}}],null,!0)}):e._e(),"SINGLE_SELECT"===s.dataType&&"PREDEFINED"===s.options.optionsType?t("ValidationProvider",{attrs:{name:s.name,rules:{required:s.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("SelectField",{attrs:{"is-mandatory":s.isMandatory,error:a[0],"new-option":s.options.allowToAddNewOptions,options:e.predefinedSelectOptions},model:{value:i[s.name],callback:function(t){e.$set(i,s.name,t)},expression:"row[column.name]"}})]}}],null,!0)}):e._e(),"BOOLEAN"===s.dataType?t("ValidationProvider",{attrs:{name:s.name,rules:{required:s.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("SingleChoiceField",{attrs:{"is-mandatory":s.isMandatory,options:e.booleanOptions,error:a[0]},model:{value:i[s.name],callback:function(t){e.$set(i,s.name,t)},expression:"row[column.name]"}})]}}],null,!0)}):e._e()],1)],1)})),t("td",{staticClass:"action"},[t("BaseActionButton",{attrs:{"is-flat":"",color:"red",icon:"eva-close-outline","no-border":""},on:{click:function(t){return e.removeRow(s)}}})],1)],2)})),t("tr",[e._l(e.columns,(function(i){return t("th",{key:i._id},[i.options.showColumnSum?t("div",{staticClass:"q-ml-sm"},[e._v(" "+e._s(e.getColumnSum(i.name))+" ")]):e._e()])})),t("td",{staticStyle:{height:"56px"}})],2)],2)])])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.save}})]},proxy:!0}])})},qt=[],Dt=i("6a70"),Nt=i("53c1"),Mt=i("cedb"),Rt=i("d1e5"),Vt=i("0c21"),zt=i("5c8a"),jt={name:"TableFieldInput",components:{Modal:Dt["a"],ValidationObserver:Pt["a"],ValidationProvider:Pt["b"],TextField:he["a"],NumberField:Ee["a"],DateField:Nt["a"],TimeField:Mt["a"],DateTimeField:Rt["a"],SelectField:ue["a"],AsyncSelectField:Vt["a"],SingleChoiceField:ce["a"]},props:{value:{type:Boolean,default:!1},label:{type:String,required:!0},columns:{type:Array,required:!0},fieldsModel:{type:[Array,String],required:!0}},data(){return{tableModel:[]}},computed:{booleanOptions(){return[{id:this.$nano.id(),label:this.field.options.truthyValue,value:this.field.options.truthyValue},{id:this.$nano.id(),label:this.field.options.falsyValue,value:this.field.options.falsyValue}]},predefinedSelectOptions(){return this.field.options.predefinedOptions.map(e=>({id:this.$nano.id(),label:e,value:e}))}},created(){this.fieldsModel.length?this.tableModel=Object(zt["a"])(this.fieldsModel):this.addRow()},methods:{closeModal(){this.$emit("input",!1)},addRow(){const e={};this.columns.forEach(t=>{e[t.name]=""}),this.tableModel.push(e)},removeRow(e){this.tableModel.splice(e,1)},getColumnSum(e){return this.tableModel.length?this.tableModel.reduce((t,i)=>t+i[e],0):0},async save(){let e=!0;for(let t of this.$refs.form)e=await t.validate();e&&(this.$emit("save",this.tableModel),this.closeModal())}}},Ut=jt,Qt=(i("4d7e"),Object(h["a"])(Ut,Lt,qt,!1,null,"d34de66a",null)),Xt=Qt.exports,Ht={name:"TableField",components:{FormFieldLabel:Bt["a"],TableFieldInput:Xt},props:{value:{type:[Array,String],required:!0},field:{type:Object,required:!0}},data(){return{isTableFieldInputVisible:!1}},methods:{showTableFieldInput(){this.isTableFieldInputVisible=!0},getColumnSum(e){return this.value.length?this.value.reduce((t,i)=>t+i[e],0):0},handleSave(e){this.$emit("input",e)}}},Wt=Ht,Gt=(i("8900"),Object(h["a"])(Wt,Ot,Et,!1,null,"7eb8f214",null)),Yt=Gt.exports,Jt=i("7794"),Kt=function(){var e=this,t=e._self._c;return t("div",e._g({directives:[{name:"ripple",rawName:"v-ripple",value:"gray",expression:"'gray'"}],class:{"is-active":e.isChipsVisible},attrs:{id:"bot-recommendations"}},e.$listeners),[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Suggestions",expression:"'Suggestions'",modifiers:{top:!0}}],attrs:{name:"mdi-robot-outline","inherit-color":""}}),t("q-menu",{attrs:{"auto-close":"",anchor:"bottom right",self:"top right",offset:[0,8]},on:{input:e.handleInput}},[t("div",{staticClass:"recommendation-chips"},[t("div",{staticClass:"title-3 q-ma-md"},[e._v("Bot Recommendations")]),t("BaseScrollbar",{staticClass:"q-px-md q-my-md",attrs:{height:"222px"}},[t("div",{staticClass:"chips"},[e._l(e.suggestions,(function(i){return[i?t("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i,expression:"chip",modifiers:{top:!0}}],key:i,staticClass:"chip",class:e.value==i?"selected":"",on:{click:function(t){return e.handleClick(i)}}},[e._v(" "+e._s(i)+" ")]):e._e()]}))],2)])],1)])],1)},Zt=[],ei={name:"BotRecommendations",props:{value:{type:String,default:""},field:{type:Object,required:!0},suggestions:{type:Array,default:()=>[]}},data(){return{isChipsVisible:!1}},methods:{handleInput(e){this.isChipsVisible=e},handleClick(e){const t=[this.field.options.truthyValue,this.field.options.falsyValue];let i="";switch(this.field.dataType){case"SHORT_TEXT":i=String(e);break;case"NUMBER":i=Number(e)||"";break;case"DATE":i=this.$day.parseDate(e);break;case"TIME":i=this.$day.parseTime(e);break;case"DATE_TIME":i=this.$day.parseDateTime(e);break;case"BOOLEAN":i=t.includes(e)?e:"";break;case"OMR":i=["true","false"].includes(e)?e:"";break;case"SINGLE_SELECT":i=this.field.options.allowToAddNewOptions?String(e):"";break}this.$emit("input",i)}}},ti=ei,ii=(i("9faa"),i("714f")),si=Object(h["a"])(ti,Kt,Zt,!1,null,"f11165f6",null),ai=si.exports;m()(si,"components",{QMenu:D["a"]}),m()(si,"directives",{Ripple:ii["a"]});var li=i("7ee8"),oi=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"repository-dynamic-fields"}},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"col-auto cursor-pointer"},[e.showEditText?e._e():[t("div",{staticClass:"row items-center header",on:{click:function(t){e.showEditText=!0}}},[e.showEditText?e._e():t("FormFieldLabel",{attrs:{label:e.field.name,"is-mandatory":!1}})],1)],t("ValidationObserver",{ref:"form"},[t("ValidationProvider",{attrs:{name:"label",rules:{required:!0,checkDuplicate:{target:e.labelError}}}},[e.showEditText?t("input",{directives:[{name:"model",rawName:"v-model",value:e.field.name,expression:"field.name"}],staticClass:"title q-mb-sm",attrs:{type:"text",autofocus:e.showEditText},domProps:{value:e.field.name},on:{input:[function(t){t.target.composing||e.$set(e.field,"name",t.target.value)},function(t){return e.updateLabel(e.field.name)}],mouseleave:e.validateLabel}}):e._e(),e.error?t("FormFieldError",{staticClass:"q-mb-sm",attrs:{error:e.error}}):e._e()],1)],1)],2)]),t("ValidationProvider",{attrs:{name:e.field.name}},["SHORT_TEXT"===e.field.dataType?t("TextField",{attrs:{value:e.value},on:{input:e.handleInput,click:function(t){return e.controlFocus(e.value)}}}):e._e()],1),"NUMBER"===e.field.dataType?t("ValidationProvider",{attrs:{name:e.field.name}},[t("NumberField",{attrs:{value:e.value},on:{input:e.handleInput,click:function(t){return e.controlFocus(e.value)}}})],1):e._e(),"DATE"===e.field.dataType?t("ValidationProvider",{attrs:{name:e.field.name},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("DateField",{attrs:{value:e.value,error:i[0]},on:{input:e.handleInput,click:function(t){return e.controlFocus(e.value)}}})]}}],null,!1,3264931796)}):e._e(),"TIME"===e.field.dataType?t("ValidationProvider",{attrs:{name:e.field.name},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TimeField",{attrs:{value:e.value,error:i[0]},on:{input:e.handleInput,click:function(t){return e.controlFocus(e.value)}}})]}}],null,!1,3962813429)}):e._e(),"DATE_TIME"===e.field.dataType?t("ValidationProvider",{attrs:{name:e.field.name},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("DateTimeField",{attrs:{value:e.value,error:i[0]},on:{input:e.handleInput}})]}}],null,!1,2562021919)}):e._e(),"SINGLE_SELECT"===e.field.dataType?t("ValidationProvider",{attrs:{name:e.field.name},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{attrs:{value:e.value,error:i[0],"new-option":!0,options:[],page:"repository"},on:{input:e.handleInput}})]}}],null,!1,1406586435)}):e._e()],1)},ni=[],ri=i("e683"),di={name:"RepositoryDynamicField",components:{ValidationProvider:Pt["b"],TextField:he["a"],FormFieldLabel:Bt["a"],ValidationObserver:Pt["a"],FormFieldError:ri["a"],NumberField:Ee["a"],DateField:Nt["a"],TimeField:Mt["a"],DateTimeField:Rt["a"],SelectField:ue["a"]},props:{field:{type:Object,required:!0},fields:{type:Array,required:!0},repositoryId:{type:[String,Number],required:!0},value:{type:[String,Number],required:!0},labelName:{type:[String,Number],required:!0}},data(){return{showEditText:!1,labelError:"",error:""}},computed:{},methods:{handleInput(e){this.$emit("input",e)},controlFocus(e){localStorage.setItem("findText",e)},updateLabel(e){this.error="",this.labelError="",this.error=e?"":"Label should not be empty";let t=!1;this.fields.forEach(i=>{i.id===this.field.id||i.name.trim()!==e||(t=!0)}),t&&(this.labelError="Specified label already assigned",this.error="Specified label already assigned")},async validateLabel(){const e=await this.$refs.form.validate();e&&(this.showEditText=!1)}}},ci=di,ui=(i("a84f"),Object(h["a"])(ci,oi,ni,!1,null,"419cd1e6",null)),hi=ui.exports,pi=i("dde9"),fi=i("9c79"),mi={name:"RepositoryFields",components:{WorkspaceList:At["a"],RepositoryList:$t["a"],ValidationObserver:Pt["a"],TableField:Yt,RepositoryField:Jt["a"],BotRecommendations:ai,RepositoryDynamicField:hi,Tabs:n["a"],Modal:Dt["a"],TextField:he["a"],ValidationProvider:Pt["b"],Confirm:se["a"],OptionsPicker:pi["a"],OrDivider:fi["a"],Dropzone:V["a"],FormFieldError:ri["a"]},props:{workspaceId:{type:Number,required:!0},repositoryId:{type:Number,required:!0},file:{type:Object,required:!0},hasSelectAllFiles:{type:Boolean,default:!1},selectedFiles:{type:Array,default:()=>[]},oldSelectedItemId:{type:Number,default:0},oldSelectedId:{type:Number,default:0},refreshed:{type:Boolean,default:!1}},data(){return{fields:[],fieldsModel:{},fieldType:"",repositoryFields:[],dynamicFieldsModel:{},dynamicFields:[],tab:"FIELDS",tabs:[{id:this.$nano.id(),label:"Fields",value:"FIELDS"},{id:this.$nano.id(),label:"Table",value:"TABLE"}],tabsFields:[{id:this.$nano.id(),label:"Fields",value:"FIELDS"}],dynamicData:[],fieldCheckAll:!1,tableCheckAll:!1,tableTab:0,tableIndex:0,expandTableModal:!1,showEditTableName:!1,hoverTableLabel:!1,labelError:"",syncMapping:{},syncField:{},showNoFieldsSelectModal:!1,hasNoFieldSelect:!1,hasNoTableSelect:!1,dataTypes:[{id:this.$nano.id(),label:"Short Text",value:"SHORT_TEXT"},{id:this.$nano.id(),label:"Number",value:"NUMBER"},{id:this.$nano.id(),label:"Date",value:"DATE"},{id:this.$nano.id(),label:"Time",value:"TIME"},{id:this.$nano.id(),label:"Date Time",value:"DATE_TIME"}],searchType:"",repositoryFieldsData:[],indexedFiles:[],notIndexedFiles:[],exportAll:!1,allFiles:!1,dynamicFileId:0,advancedOCRResultId:0,isSaveLoading:!1,isExportLoading:!1,freezedData:{},isFreezed:!1,fileChangeSave:!1,valueChanged:!1}},computed:{hasFile(){return!Object(li["a"])(this.file)},fileSizeLimit(){return this.session.license,52428800},status(){let e=0,t=0,i=0;return this.fields.forEach(s=>{"AUTO_GENERATED"!==s.dataType&&(s.isMandatory?e++:0,this.fieldsModel[s.name]&&(s.isMandatory?t++:i++))}),e===t?"INDEXED":t+i?"PARTIALLY_INDEXED":"NOT_INDEXED"},_dataTypes(){return this.searchType?this.dataTypes.filter(e=>e.label.toLowerCase().includes(this.searchType.toLowerCase())):this.dataTypes}},watch:{oldSelectedId:{immediate:!0,deep:!0,async handler(e,t){0!==e&&(this.valueChanged||Object.keys(this.freezedData).length>0)&&(console.log(e,t),this.fileChangeSave=!0,await this.saveFields(),this.valueChanged=!1)}},file:{immediate:!0,deep:!0,async handler(){this.hasFile&&this.handleRepository(this.file.repository.id)}},dynamicFields:{deep:!0,async handler(){this.dynamicFields&&this.processDynamicFieldsModel(this.dynamicFields)}},fieldsModel:{immediate:!0,deep:!0,handler(){for(let e in this.fieldsModel)if(this.fieldsModel[e]){let t=this.fields.find(t=>t.name===e);this.updateMandatory(this.fieldsModel[e],t)}}},selectedFiles:{deep:!0,handler(){this.selectedFiles.length&&(this.indexedFiles=[],this.notIndexedFiles=[],this.exportAll=!1,this.allFiles=!1)}},refreshed:{deep:!0,handler(){this.refreshed&&(this.freezedData={})}}},created(){this.getHubLink()},methods:{controlFocus(e){localStorage.setItem("findText",e)},removeFreezedData(e){e in this.freezedData&&delete this.freezedData[e]},updateFreezedData(e){this.freezedData={...this.freezedData,...e}},updateFreezeState(e){this.isFreezed=e},async handleRepository(e){if(this.repositoryId=e,await this.getRepositoryFields(),"STATIC"===this.fieldType){const e=await this.getStaticFields();e&&(this.processFieldsModel(e),this.sortFields(e))}else{const e=await this.getDynamicFields();e&&this.processDynamicFieldsModel(e)}},processFieldsModel(e){this.fieldsModel={},e.forEach(e=>{this.$set(this.fieldsModel,e.name,"")}),this.file.fields&&this.file.fields.forEach(e=>{"TABLE"===e.type?e.value?this.fieldsModel[e.name]=JSON.parse(e.value):this.fieldsModel[e.name]=[]:this.fieldsModel[e.name]=e.value}),this.freezedData&&this.fieldsModel&&Object.keys(this.freezedData).forEach(e=>{e in this.fieldsModel&&(this.fieldsModel[e]=this.freezedData[e])})},sortFields(e){const t=e.filter(e=>e.level>0);t.sort((e,t)=>e.level-t.level);const i=e.filter(e=>0===e.level&&e.isMandatory),s=e.filter(e=>!e.isMandatory);this.fields=[...t,...i,...s]},computeStatus(){let e=0,t=0,i=0;this.fields.forEach(s=>{s.isMandatory?e++:0,this.fieldsModel[s.name]&&(s.isMandatory?t++:i++)}),this.status=e!==t?t+i?"PARTIALLY_INDEXED":"NOT_INDEXED":"INDEXED"},getStaticFields(){return this.repositoryFields.fields.map(e=>({...e,options:JSON.parse(e.options)}))},processDynamicFieldsModel(e){this.dynamicFieldsModel={},e.forEach((e,t)=>{this.dynamicFields[t].value=e.value,this.$set(this.dynamicFieldsModel,e.name,e.value?e.value:"")})},fieldSelected(e,t){t>-1&&(this.dynamicFields[t].value=this.dynamicFieldsModel[e.name]),e.selected=!e.selected},fieldSelectAll(){this.fieldCheckAll=!this.fieldCheckAll,this.dynamicFields=this.dynamicFields.map(e=>({...e,value:this.dynamicFieldsModel[e.name],selected:this.fieldCheckAll}))},tableSelectAll(){this.tableCheckAll=!this.tableCheckAll,this.dynamicData=this.dynamicData.map(e=>({...e,selected:this.tableCheckAll,showEditTableName:!1}))},addField(){let e=this.dynamicFields.filter(e=>"DYNAMIC"===e.type);for(let t in this.dynamicFieldsModel){let e=this.dynamicFields.findIndex(e=>e.name===t);e>-1&&this.dynamicFieldsModel[t]&&(this.dynamicFields[e].value=this.dynamicFieldsModel[t])}this.dynamicFields.unshift({dataType:"SHORT_TEXT",id:this.$nano.id(),name:"Label "+(e.length+1),selected:!0,value:"",type:"DYNAMIC"}),this.processDynamicFieldsModel(this.dynamicFields)},changeDataType(e,t){this.dynamicFields[t].dataType=e},deleteDynamicField(e){this.dynamicFields.splice(e,1)},checkParentControl(e){let t=!1;return this.fields.forEach(i=>{i.options.masterFormParentColumn&&e.name===i.options.masterFormParentColumn&&(t=!0)}),t},filterChildControlValues(e){this.fields.forEach(t=>{t.options.masterFormParentColumn&&e.name===t.options.masterFormParentColumn&&(t.filterBy=[{criteria:e.options.masterTableColumn,condition:"IS_EQUALS_TO",value:this.fieldsModel[e.name],dataType:""}],t.filter=!t.filter)})},updateMandatory(e,t){if(this.valueChanged=!0,e){let i="";if(t.options.mandatorySettings&&(i=t.options.mandatorySettings.find(t=>t.value===e)),i)for(let e=0;e<this.fields.length;e++){let t=i.fields.find(t=>t===this.fields[e].name);this.fields[e].isMandatory=!!t||this.repositoryFields.fields[e].isMandatory}else{let e=this.repositoryFields.fields,t=[],i=this.fields.filter(({isMandatory:t})=>!e.some(({isMandatory:e})=>e===t)),s=e.filter(({isMandatory:e})=>!this.fields.some(({isMandatory:t})=>t===e));i.length?t=i:s.length&&(t=s),t.forEach(e=>{let t=this.fields.findIndex(t=>t.name===e.name);t>=0&&(this.fields[t].isMandatory=!this.fields[t].isMandatory)})}}else{let e=this.repositoryFields.fields,t=[],i=this.fields.filter(({isMandatory:t})=>!e.some(({isMandatory:e})=>e===t)),s=e.filter(({isMandatory:e})=>!this.fields.some(({isMandatory:t})=>t===e));i.length?t=i:s.length&&(t=s),t.forEach(e=>{let t=this.fields.findIndex(t=>t.name===e.name);t>=0&&(this.fields[t].isMandatory=!this.fields[t].isMandatory)})}},handleChange(e){const t=e.target.files,i=[],s=["exe"];if(t.length){for(let e of t){if(e.size>this.fileSizeLimit)return void this.$alert.warning(e.name+" - Maximum file size exceeded");const t=e.name.split(".").reverse()[0];if(s.includes(t))return void this.$alert.warning(e.name+" - Invalid file type");i.push({id:this.$nano.id(),name:e.name,type:t.slice(0,4),size:e.size,createdAt:"",status:"UPLOADING",file:e,uploadedPercentage:0})}this.$refs.dropzone.value="",this.$emit("upload",i)}},queueFilesForUpload(e){this.$emit("upload",e)},async getRepositoryFields(){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await fe["p"].getRepository(this.repositoryId);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t&&(this.fieldType=t.fieldsType,this.repositoryFieldsData=t,this.repositoryFields=t)},async getDynamicFields(){let e=[];this.dynamicFields=[],this.dynamicData=[],this.$store.commit("showLoadingBar");let t={filterBy:[{filters:[{criteria:"fileId",condition:"IS_EQUALS_TO",value:this.file.id}]}]};const{error:i,payload:s}=await fe["r"].getOCRData(t);if(this.$store.commit("hideLoadingBar"),i)this.$alert.error(i);else if(s){if(s.length){let t=JSON.parse(s[0].resultJson);if(this.dynamicFileId=s[0].fileId,this.advancedOCRResultId=s[0].id,t&&(t[0].fields&&(t[0].fields.forEach((t,i)=>{e.push({dataType:"SHORT_TEXT",name:t.key,value:t.value,id:i+1,selected:!!t.selected&&t.selected})}),this.dynamicFields=e,this.dynamicFields=e.map(e=>({...e}))),t[0].tables)){let e=[];t[0].tables.forEach(t=>{let i=new Array,s=0;i[s]=new Array,t.cellvalues.forEach(e=>{s===e.rowindex||(s=e.rowindex,i[s]=new Array),i[s].push(e)}),e.push({tablename:t.tablename,cellvalues:i,showEditTableName:!1,selected:!!t.selected&&t.selected})}),this.dynamicData=e}}return e}},async saveFields(e,t){if(e&&"STATIC"===this.fieldType){const e=await this.$refs.form.validate();if(!e)return this.isSaveLoading=!1,void(this.isExportLoading=!1)}e||(e=this.status);let i={};if("STATIC"===this.fieldType)i={repositoryId:this.repositoryId,itemId:this.fileChangeSave?this.oldSelectedItemId:this.file.itemId,status:e,fields:this.fields.map(e=>({name:e.name,value:"TABLE"===e.dataType?JSON.stringify(this.fieldsModel[e.name]):this.fieldsModel[e.name],type:e.dataType}))};else{if(this.showNoFieldsSelectModal=!1,!t&&"EXPORT"===e){let e=this.dynamicFields.find(e=>e.selected);var s="";if(this.dynamicData.length&&(s=this.dynamicData.find(e=>e.selected)),!e||!s)return this.hasNoFieldSelect=!e,this.hasNoTableSelect=!s||0===this.dynamicData.length,void(this.showNoFieldsSelectModal=!0)}let a=[];if(this.dynamicFields.filter(e=>{e.selected&&a.push({name:e.name,value:this.dynamicFieldsModel[e.name],type:e.dataType})}),this.dynamicData.length&&this.dynamicData.forEach(e=>{e.selected&&a.push({name:e.tablename,value:JSON.stringify(e),type:"TABLE"})}),a.length){let e=a.reduce((e,t,i)=>{let s=e.findIndex(e=>e.name===t.name);return s>=0&&(e[s].isDuplicate=!0,a[i].isDuplicate=!0),e.push(t),e},[]),t=e.filter(e=>e.isDuplicate);if(t.length)return void this.$alert.warning("More than one same field names found: "+t[0].name)}i={repositoryId:this.repositoryId,itemId:this.file.itemId,status:e,ocrResult:JSON.stringify(a)}}this.$store.commit("showLoadingBar");const{error:a}=await fe["r"].updateFile(this.fileChangeSave?this.oldSelectedId:this.file.id,i);if(this.$store.commit("hideLoadingBar"),this.fileChangeSave&&this.$emit("updteSavedFile",this.oldSelectedId),a)return void this.$alert.error(a);this.fieldCheckAll=!1,this.tableCheckAll=!1;const l=this.file.name;this.fileChangeSave||("INDEXED"===e?this.$alert.success(`File "${l}" ${this.status}`):"EXPORT"===e?this.$alert.success(`File "${l}" Exported`):this.$alert.info(`File "${l}" ${this.status}`),this.isSaveLoading=!1,this.isExportLoading=!1,this.$emit("refresh")),this.fileChangeSave=!1},updateTableLabel(e,t){e.labelError="";let i=!1;this.dynamicData.forEach((s,a)=>{s.tablename!==e.tablename||a===t||(i=!0)}),i&&(e.labelError="Specified label already assigned"),e.tablename||(e.labelError="Label Should not be empty")},async getHubLink(){const{error:e,payload:t}=await fe["c"].getHubLink({filterBy:[],mode:"BROWSE"});if(e)return void this.$alert.error(e);let i=t.filter(e=>e.createdBy===this.$store.state.session.id&&e.repositoryId===Number(this.repositoryId));i.length&&(this.syncField=JSON.parse(i[0].payloadMapping),this.syncMapping=i[0])},async getSyncDataList(e){let t={};for(let a in this.syncField)this.$set(t,a,this.fieldsModel[e.name]);const{error:i,payload:s}=await fe["c"].getSyncValue({hublinkId:this.syncMapping.id,payloadMapping:JSON.stringify(t)});if(i)this.$alert.error(i);else if(s.data[0].value.length){let e=s.data[0].value[0];for(let t in e)e[t]&&(this.fieldsModel[t]=e[t])}},async exportAllFiles(){this.isExportLoading=!0;let e=[];if(this.selectedFiles.forEach(t=>{"INDEXED"===t.status&&e.push({id:t.id,status:"EXPORT"})}),e.length){const{error:t,payload:i}=await fe["r"].indexSetStatus(e);if(t)return void this.$alert.error(t);i&&(this.exportAll=!0),this.indexedFiles=this.selectedFiles.filter(e=>"INDEXED"===e.status),this.notIndexedFiles=this.selectedFiles.filter(e=>"INDEXED"!==e.status),this.allFiles=this.selectedFiles.every(e=>"INDEXED"===e.status),this.$emit("refresh")}else this.$alert.warning("Which is no files in the indexed status");this.isExportLoading=!1},async saveDynamicFields(e,t){this.isSaveLoading=!0,e||(e=this.status);let i={};if(this.showNoFieldsSelectModal=!1,!t&&"EXPORT"===e){let e=this.dynamicFields.find(e=>e.selected);var s="";if(this.dynamicData.length&&(s=this.dynamicData.find(e=>e.selected)),!e||!s)return this.hasNoFieldSelect=!e,this.hasNoTableSelect=!s,void(this.showNoFieldsSelectModal=!0)}let a=[{fields:[],tables:[]}];if(this.dynamicFields.forEach(e=>{a[0].fields.push({key:e.name,value:this.dynamicFieldsModel[e.name],selected:e.selected})}),this.dynamicData.length&&this.dynamicData.forEach(e=>{let t=[];e.cellvalues.forEach(e=>{t.push(...e)}),a[0].tables.push({cellvalues:t,columncount:e.cellvalues[e.cellvalues.length-1].length,rowcount:e.cellvalues.length,tablename:e.tablename,selected:e.selected})}),!a.length)return this.$alert.warning("Choose any one of fields"),void(this.isSaveLoading=!1);if(!a[0].fields.length&&!a[0].tables.length)return this.$alert.warning("Choose any one of fields"),void(this.isSaveLoading=!1);{let e=a.reduce((e,t,i)=>{let s=e.findIndex(e=>e.name===t.name);return s>=0&&(e[s].isDuplicate=!0,a[i].isDuplicate=!0),e.push(t),e},[]),t=e.filter(e=>e.isDuplicate);if(t.length)return this.$alert.warning("More than one same field names found: "+t[0].name),void(this.isSaveLoading=!1)}i={fileId:this.dynamicFileId,resultJson:JSON.stringify(a)},this.$store.commit("showLoadingBar");const{error:l}=await fe["r"].saveDynamicFields(this.advancedOCRResultId,i);if(this.$store.commit("hideLoadingBar"),l)return void this.$alert.error(l);this.fieldCheckAll=!1,this.tableCheckAll=!1;const o=this.file.name;this.$alert.success(`File "${o}" Indexed`),this.isSaveLoading=!1,await this.setStatusInDynamicFiles()},async setStatusInDynamicFiles(){let e=[];e.push({id:this.dynamicFileId,status:"INDEXED"});const{error:t,payload:i}=await fe["r"].indexSetStatus(e);t?this.$alert.error(t):(console.log(i),this.$emit("refresh"))},async validateTableLabel(e){e.tablename?e.labelError||(e.labelError="",e.showEditTableName=!1):this.labelError="Label should not be empty"},editTableName(e){e.showEditTableName=!0}}},vi=mi,gi=(i("97e5"),i("b047")),yi=i("cb32"),bi=i("a026"),_i=i("0016"),Fi=i("3980"),Si=i("463c"),xi=i("87e8"),Ci=i("d882"),wi=i("e277"),Ti=i("d54d"),ki=i("0831"),Ii=i("9e47");function Ai(e,t,i){const s=!0===i?["left","right"]:["top","bottom"];return`absolute-${!0===t?s[0]:s[1]}${e?" text-"+e:""}`}const $i=["left","center","right","justify"],Pi=()=>({matchedLen:0,queryDiff:9999,hrefLen:0,exact:!1,redirected:!0});function Oi(e,t){for(const i in e)if(e[i]!==t[i])return!1;return!0}var Ei=bi["default"].extend({name:"QTabs",mixins:[Si["a"],xi["a"]],provide(){return{$tabs:this}},props:{value:[Number,String],align:{type:String,default:"center",validator:e=>$i.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String},data(){return{scrollable:!1,leftArrow:!0,rightArrow:!1,justify:!1,tabNameList:[],currentModel:this.value,hasFocus:!1,avoidRouteWatcher:!1}},watch:{isRTL(){this.__localUpdateArrows()},value(e){this.__updateModel({name:e,setCurrent:!0,skipEmit:!0})},outsideArrows(){this.__recalculateScroll()},arrowsEnabled(e){this.__localUpdateArrows=!0===e?this.__updateArrowsFn:Ci["g"],this.__recalculateScroll()}},computed:{tabProps(){return{activeClass:this.activeClass,activeColor:this.activeColor,activeBgColor:this.activeBgColor,indicatorClass:Ai(this.indicatorColor,this.switchIndicator,this.vertical),narrowIndicator:this.narrowIndicator,inlineLabel:this.inlineLabel,noCaps:this.noCaps}},hasActiveTab(){return this.tabNameList.some(e=>e.name===this.currentModel)},arrowsEnabled(){return!0===this.$q.platform.is.desktop||!0===this.mobileArrows},alignClass(){const e=!0===this.scrollable?"left":!0===this.justify?"justify":this.align;return"q-tabs__content--align-"+e},classes(){return`q-tabs row no-wrap items-center q-tabs--${!0===this.scrollable?"":"not-"}scrollable q-tabs--`+(!0===this.vertical?"vertical":"horizontal")+" q-tabs__arrows--"+(!0===this.arrowsEnabled&&!0===this.outsideArrows?"outside":"inside")+(!0===this.dense?" q-tabs--dense":"")+(!0===this.shrink?" col-shrink":"")+(!0===this.stretch?" self-stretch":"")},innerClass(){return"q-tabs__content row no-wrap items-center self-stretch hide-scrollbar relative-position "+this.alignClass+(void 0!==this.contentClass?" "+this.contentClass:"")+(!0===this.$q.platform.is.mobile?" scroll":"")},domProps(){return!0===this.vertical?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}},isRTL(){return!0!==this.vertical&&!0===this.$q.lang.rtl},rtlPosCorrection(){return!1===Object(ki["f"])()&&!0===this.isRTL},posFn(){return!0===this.rtlPosCorrection?{get:e=>Math.abs(e.scrollLeft),set:(e,t)=>{e.scrollLeft=-t}}:!0===this.vertical?{get:e=>e.scrollTop,set:(e,t)=>{e.scrollTop=t}}:{get:e=>e.scrollLeft,set:(e,t)=>{e.scrollLeft=t}}},onEvents(){return{input:Ci["k"],...this.qListeners,focusin:this.__onFocusin,focusout:this.__onFocusout}}},methods:{__updateModel({name:e,setCurrent:t,skipEmit:i}){this.currentModel!==e&&(!0!==i&&void 0!==this.qListeners.input&&this.$emit("input",e),!0!==t&&void 0!==this.qListeners.input||(this.__animate(this.currentModel,e),this.currentModel=e))},__recalculateScroll(){this.__registerScrollTick(()=>{this.__updateContainer({width:this.$el.offsetWidth,height:this.$el.offsetHeight})})},__updateContainer(e){if(void 0===this.domProps||!this.$refs.content)return;const t=e[this.domProps.container],i=Math.min(this.$refs.content[this.domProps.scroll],Array.prototype.reduce.call(this.$refs.content.children,(e,t)=>e+(t[this.domProps.content]||0),0)),s=t>0&&i>t;this.scrollable!==s&&(this.scrollable=s),!0===s&&this.__registerUpdateArrowsTick(this.__localUpdateArrows);const a=t<parseInt(this.breakpoint,10);this.justify!==a&&(this.justify=a)},__animate(e,t){const i=void 0!==e&&null!==e&&""!==e?this.tabVmList.find(t=>t.name===e):null,s=void 0!==t&&null!==t&&""!==t?this.tabVmList.find(e=>e.name===t):null;if(i&&s){const e=i.$refs.tabIndicator,t=s.$refs.tabIndicator;clearTimeout(this.animateTimer),e.style.transition="none",e.style.transform="none",t.style.transition="none",t.style.transform="none";const a=e.getBoundingClientRect(),l=t.getBoundingClientRect();t.style.transform=!0===this.vertical?`translate3d(0,${a.top-l.top}px,0) scale3d(1,${l.height?a.height/l.height:1},1)`:`translate3d(${a.left-l.left}px,0,0) scale3d(${l.width?a.width/l.width:1},1,1)`,this.__registerAnimateTick(()=>{this.animateTimer=setTimeout(()=>{t.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",t.style.transform="none"},70)})}s&&!0===this.scrollable&&this.__scrollToTabEl(s.$el)},__scrollToTabEl(e){const t=this.$refs.content,{left:i,width:s,top:a,height:l}=t.getBoundingClientRect(),o=e.getBoundingClientRect();let n=!0===this.vertical?o.top-a:o.left-i;if(n<0)return t[!0===this.vertical?"scrollTop":"scrollLeft"]+=Math.floor(n),void this.__localUpdateArrows();n+=!0===this.vertical?o.height-l:o.width-s,n>0&&(t[!0===this.vertical?"scrollTop":"scrollLeft"]+=Math.ceil(n),this.__localUpdateArrows())},__updateArrowsFn(){const e=this.$refs.content;if(null!==e){const t=e.getBoundingClientRect(),i=!0===this.vertical?e.scrollTop:Math.abs(e.scrollLeft);!0===this.isRTL?(this.leftArrow=Math.ceil(i+t.width)<e.scrollWidth-1,this.rightArrow=i>0):(this.leftArrow=i>0,this.rightArrow=!0===this.vertical?Math.ceil(i+t.height)<e.scrollHeight:Math.ceil(i+t.width)<e.scrollWidth)}},__animScrollTo(e){this.__stopAnimScroll(),this.scrollTimer=setInterval(()=>{!0===this.__scrollTowards(e)&&this.__stopAnimScroll()},5)},__scrollToStart(){this.__animScrollTo(!0===this.rtlPosCorrection?Number.MAX_SAFE_INTEGER:0)},__scrollToEnd(){this.__animScrollTo(!0===this.rtlPosCorrection?0:Number.MAX_SAFE_INTEGER)},__stopAnimScroll(){clearInterval(this.scrollTimer)},__onKbdNavigate(e,t){const i=Array.prototype.filter.call(this.$refs.content.children,e=>e===t||e.matches&&!0===e.matches(".q-tab.q-focusable")),s=i.length;if(0===s)return;if(36===e)return this.__scrollToTabEl(i[0]),i[0].focus(),!0;if(35===e)return this.__scrollToTabEl(i[s-1]),i[s-1].focus(),!0;const a=e===(!0===this.vertical?38:37),l=e===(!0===this.vertical?40:39),o=!0===a?-1:!0===l?1:void 0;if(void 0!==o){const e=!0===this.isRTL?-1:1,a=i.indexOf(t)+o*e;return a>=0&&a<s&&(this.__scrollToTabEl(i[a]),i[a].focus({preventScroll:!0})),!0}},__scrollTowards(e){const t=this.$refs.content,{get:i,set:s}=this.posFn;let a=!1,l=i(t);const o=e<l?-1:1;return l+=5*o,l<0?(a=!0,l=0):(-1===o&&l<=e||1===o&&l>=e)&&(a=!0,l=e),s(t,l),this.__localUpdateArrows(),a},__updateActiveRoute(){let e=null,t=Pi();const i=this.tabVmList.filter(e=>!0===e.hasRouterLink),s=i.length,{query:a}=this.$route,l=Object.keys(a).length;for(let o=0;o<s;o++){const s=i[o],n=!0===s.exact;if(!0!==s[!0===n?"linkIsExactActive":"linkIsActive"]||!0===t.exact&&!0!==n)continue;const{route:r,href:d}=s.resolvedLink,{matched:c,query:u,hash:h}=r,p=void 0!==r.redirectedFrom;if(!0===n){if(!1===p){e=s.name;break}!1===t.exact&&(t=Pi())}if(!1===t.redirected&&!0===p)continue;const f=Object.keys(u).length;if(!1===n&&0!==f&&!1===Oi(u,a))continue;const m={exact:n,redirected:p,matchedLen:c.length,queryDiff:!0===n?0:l-f,hrefLen:d.length-h.length};m.matchedLen>t.matchedLen?(e=s.name,t=m):m.matchedLen===t.matchedLen&&(m.queryDiff<t.queryDiff||m.queryDiff===t.queryDiff&&m.hrefLen>t.hrefLen)&&(e=s.name,t=m)}null===e&&!0===this.tabVmList.some(e=>void 0===e.hasRouterLink&&e.name===this.currentModel)||this.__updateModel({name:e,setCurrent:!0})},__onFocusin(e){if(this.__removeFocusTimeout(),!0!==this.hasFocus&&this.$el&&e.target&&"function"===typeof e.target.closest){const t=e.target.closest(".q-tab");t&&!0===this.$el.contains(t)&&(this.hasFocus=!0,!0===this.scrollable&&this.__scrollToTabEl(t))}void 0!==this.qListeners.focusin&&this.$emit("focusin",e)},__onFocusout(e){this.__registerFocusTimeout(()=>{this.hasFocus=!1},30),void 0!==this.qListeners.focusout&&this.$emit("focusout",e)},__verifyRouteModel(){!1===this.avoidRouteWatcher?this.__registerScrollToTabTimeout(this.__updateActiveRoute):this.__removeScrollToTabTimeout()},__watchRoute(){if(void 0===this.unwatchRoute){const e=this.$watch(()=>this.$route.fullPath,this.__verifyRouteModel);this.unwatchRoute=()=>{e(),this.unwatchRoute=void 0}}},__registerTab(e){this.tabVmList.push(e),this.tabNameList.push(Object(Ii["a"])({},"name",()=>e.name)),this.__recalculateScroll(),void 0===e.hasRouterLink||void 0===this.$route?this.__registerScrollToTabTimeout(()=>{if(!0===this.scrollable){const e=this.currentModel,t=void 0!==e&&null!==e&&""!==e?this.tabVmList.find(t=>t.name===e):null;t&&this.__scrollToTabEl(t.$el)}}):(this.__watchRoute(),!0===e.hasRouterLink&&this.__verifyRouteModel())},__unregisterTab(e){const t=this.tabVmList.indexOf(e);this.tabVmList.splice(t,1),this.tabNameList.splice(t,1),this.__recalculateScroll(),void 0!==this.unwatchRoute&&void 0!==e.hasRouterLink&&(!0===this.tabVmList.every(e=>void 0===e.hasRouterLink)&&this.unwatchRoute(),this.__verifyRouteModel())},__cleanup(){clearTimeout(this.animateTimer),this.__stopAnimScroll(),void 0!==this.unwatchRoute&&this.unwatchRoute()}},created(){this.__useTick("__registerScrollTick"),this.__useTick("__registerUpdateArrowsTick"),this.__useTick("__registerAnimateTick"),this.__useTimeout("__registerFocusTimeout","__removeFocusTimeout"),this.__useTimeout("__registerScrollToTabTimeout","__removeScrollToTabTimeout"),Object.assign(this,{tabVmList:[],__localUpdateArrows:!0===this.arrowsEnabled?this.__updateArrowsFn:Ci["g"]})},activated(){!0===this.hadRouteWatcher&&this.__watchRoute(),this.__recalculateScroll()},deactivated(){this.hadRouteWatcher=void 0!==this.unwatchRoute,this.__cleanup()},beforeDestroy(){this.__cleanup()},render(e){const t=[e(Fi["a"],{on:Object(Ti["b"])(this,"resize",{resize:this.__updateContainer})}),e("div",{ref:"content",class:this.innerClass,on:!0===this.arrowsEnabled?Object(Ti["b"])(this,"scroll",{scroll:this.__updateArrowsFn}):void 0},Object(wi["c"])(this,"default"))];return!0===this.arrowsEnabled&&t.push(e(_i["a"],{class:"q-tabs__arrow q-tabs__arrow--start absolute q-tab__icon"+(!0===this.leftArrow?"":" q-tabs__arrow--faded"),props:{name:this.leftIcon||this.$q.iconSet.tabs[!0===this.vertical?"up":"left"]},on:Object(Ti["b"])(this,"onS",{"&mousedown":this.__scrollToStart,"&touchstart":this.__scrollToStart,"&mouseup":this.__stopAnimScroll,"&mouseleave":this.__stopAnimScroll,"&touchend":this.__stopAnimScroll})}),e(_i["a"],{class:"q-tabs__arrow q-tabs__arrow--end absolute q-tab__icon"+(!0===this.rightArrow?"":" q-tabs__arrow--faded"),props:{name:this.rightIcon||this.$q.iconSet.tabs[!0===this.vertical?"down":"right"]},on:Object(Ti["b"])(this,"onE",{"&mousedown":this.__scrollToEnd,"&touchstart":this.__scrollToEnd,"&mouseup":this.__stopAnimScroll,"&mouseleave":this.__stopAnimScroll,"&touchend":this.__stopAnimScroll})})),e("div",{class:this.classes,on:this.onEvents,attrs:{role:"tablist"}},t)}}),Bi=i("3d69"),Li=i("dc8a"),qi=i("1732"),Di=i("5ff7");let Ni=0;var Mi=bi["default"].extend({name:"QTab",mixins:[Bi["a"],xi["a"]],inject:{$tabs:{default(){console.error("QTab/QRouteTab components need to be child of QTabs")}}},props:{icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>"t_"+Ni++},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String},computed:{isActive(){return this.$tabs.currentModel===this.name},classes(){return"q-tab relative-position self-stretch flex flex-center text-center"+(!0===this.isActive?" q-tab--active"+(this.$tabs.tabProps.activeClass?" "+this.$tabs.tabProps.activeClass:"")+(this.$tabs.tabProps.activeColor?" text-"+this.$tabs.tabProps.activeColor:"")+(this.$tabs.tabProps.activeBgColor?" bg-"+this.$tabs.tabProps.activeBgColor:""):" q-tab--inactive")+(this.icon&&this.label&&!1===this.$tabs.tabProps.inlineLabel?" q-tab--full":"")+(!0===this.noCaps||!0===this.$tabs.tabProps.noCaps?" q-tab--no-caps":"")+(!0===this.disable?" disabled":" q-focusable q-hoverable cursor-pointer")+(void 0!==this.hasRouterLinkProps?this.linkClass:"")},innerClass(){return"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(!0===this.$tabs.tabProps.inlineLabel?"row no-wrap q-tab__content--inline":"column")+(void 0!==this.contentClass?" "+this.contentClass:"")},computedTabIndex(){return!0===this.disable||!0===this.$tabs.hasFocus||!1===this.isActive&&!0===this.$tabs.hasActiveTab?-1:this.tabindex||0},computedRipple(){return!1!==this.ripple&&Object.assign({keyCodes:[13,32],early:!0},!0===this.ripple?{}:this.ripple)},onEvents(){return{input:Ci["k"],...this.qListeners,click:this.__onClick,keydown:this.__onKeydown}},attrs(){const e={...this.linkAttrs,tabindex:this.computedTabIndex,role:"tab","aria-selected":!0===this.isActive?"true":"false"};return!0===this.disable&&(e["aria-disabled"]="true"),e}},methods:{__onClick(e,t){if(!0!==t&&void 0!==this.$refs.blurTarget&&this.$refs.blurTarget.focus({preventScroll:!0}),!0!==this.disable){if(void 0===this.hasRouterLinkProps)return this.$tabs.__updateModel({name:this.name}),void(void 0!==this.qListeners.click&&this.$emit("click",e));if(!0===this.hasRouterLink){const t=(t,i,s)=>{const{to:a,replace:l,append:o,returnRouterError:n}=!1===e.navigate?{to:t,replace:i,append:s}:t||{};let r;const d=void 0===a||o===this.append&&!0===Object(Di["b"])(a,this.to)?this.$tabs.avoidRouteWatcher=Object(qi["a"])():null;return this.__navigateToRouterLink(e,{to:a,replace:l,append:o,returnRouterError:!0}).catch(e=>{r=e}).then(e=>(d===this.$tabs.avoidRouteWatcher&&(this.$tabs.avoidRouteWatcher=!1,void 0!==r&&!0!==r.message.startsWith("Avoided redundant navigation")||this.$tabs.__updateModel({name:this.name})),void 0!==r&&!0===n?Promise.reject(r):e))};return void 0!==this.qListeners.click&&this.$emit("click",e,t),!1===e.navigate&&e.preventDefault(),void(!0!==e.defaultPrevented&&t())}void 0!==this.qListeners.click&&this.$emit("click",e)}else!0===this.hasRouterLink&&Object(Ci["l"])(e)},__onKeydown(e){Object(Li["a"])(e,[13,32])?this.__onClick(e,!0):!0!==Object(Li["c"])(e)&&e.keyCode>=35&&e.keyCode<=40&&!0!==e.altKey&&!0!==e.metaKey&&!0===this.$tabs.__onKbdNavigate(e.keyCode,this.$el)&&Object(Ci["l"])(e),void 0!==this.qListeners.keydown&&this.$emit("keydown",e)},__getContent(e){const t=this.$tabs.tabProps.narrowIndicator,i=[],s=e("div",{ref:"tabIndicator",staticClass:"q-tab__indicator",class:this.$tabs.tabProps.indicatorClass});void 0!==this.icon&&i.push(e(_i["a"],{staticClass:"q-tab__icon",props:{name:this.icon}})),void 0!==this.label&&i.push(e("div",{staticClass:"q-tab__label"},[this.label])),!1!==this.alert&&i.push(void 0!==this.alertIcon?e(_i["a"],{staticClass:"q-tab__alert-icon",props:{color:!0!==this.alert?this.alert:void 0,name:this.alertIcon}}):e("div",{staticClass:"q-tab__alert",class:!0!==this.alert?"text-"+this.alert:null})),!0===t&&i.push(s);const a=[e("div",{staticClass:"q-focus-helper",attrs:{tabindex:-1},ref:"blurTarget"}),e("div",{class:this.innerClass},Object(wi["a"])(i,this,"default"))];return!1===t&&a.push(s),a},__renderTab(e,t){const i={class:this.classes,attrs:this.attrs,on:this.onEvents,directives:!1===this.ripple||!0===this.disable?null:[{name:"ripple",value:this.computedRipple}]};return e(t,i,this.__getContent(e))}},mounted(){this.$tabs.__registerTab(this)},beforeDestroy(){this.$tabs.__unregisterTab(this)},render(e){return this.__renderTab(e,"div")}}),Ri=Object(h["a"])(vi,kt,It,!1,null,"ba466ef8",null),Vi=Ri.exports;m()(Ri,"components",{QChip:gi["a"],QAvatar:yi["a"],QMenu:D["a"],QTabs:Ei,QTab:Mi});var zi={name:"Indexer",components:{Portal:r["Portal"],ExpandableSearch:F["a"],FilterItems:S["a"],ContentWrapper:I,AutoProcessingFileList:rt,IndexingFileList:ft,ExportingFileList:_t,Pagination:R["a"],FileViewerWrapper:ee,ConfirmDeleteFiles:ne,ConfirmManualIndexFiles:Ce,ConfirmExportFiles:Tt,FileSheet:Qe,RepositoryFields:Vi,ConfirmAutoProcessFiles:ye},props:{workspaceId:{type:Number,required:!0},repositoryId:{type:Number,required:!0}},data(){return{columns:[{id:this.$nano.id(),name:"repository",label:"Repository",dataType:_["a"].SHORT_TEXT},{id:this.$nano.id(),name:"uploadedFrom",label:"Uploaded From",dataType:_["a"].SHORT_TEXT},{id:this.$nano.id(),name:"lastModifiedBy",label:"Last Modified By",dataType:_["a"].SHORT_TEXT},{id:this.$nano.id(),name:"lastModifiedAt",label:"Last Modified At",dataType:_["a"].DATE_TIME}],filterBy:[],files:[],fileData:[],totalItems:0,itemsPerPage:50,currentPage:1,selectedFiles:[],isFileViewerVisible:!1,isFilesSheetVisible:!1,isDeleteConfirmationVisible:!1,isAutoProcessConfirmationVisible:!1,isManualIndexConfirmationVisible:!1,isExportConfirmationVisible:!1,ocrPages:[1],ocrType:"",ocrPattern:!1,hasSelectAllFiles:!1,indexingType:"",fieldsType:"",oldSelectedId:0,getSavedFile:!1,getSavedFileId:0,oldSelectedItemId:0,isRefreshed:!1,watchFreeHandValues:null,loadingBarContent:!1}},computed:{autoProcessingFiles(){return this.files.filter(e=>"AUTO_PROCESSING"===e.status)},indexingFiles(){return this.files.filter(e=>"AUTO_PROCESSING"!==e.status&&"EXPORT"!==e.status)},notIndexedFiles(){return this.files.filter(e=>"NOT_INDEXED"===e.status)},partiallyIndexedFiles(){return this.files.filter(e=>"PARTIALLY_INDEXED"===e.status)},indexedFiles(){return this.files.filter(e=>"INDEXED"===e.status)},exportingFiles(){return this.files.filter(e=>"EXPORT"===e.status)},selectedFile(){return 1!==this.selectedFiles.length||["AUTO_PROCESSING","EXPORT"].includes(this.selectedFiles[0].status)?{}:this.selectedFiles[0]},fileList(){return[{status:"indexing",files:this.indexingFiles}]},getFileTypes(){const e=this.selectedFiles.reduce((e,t)=>{const i=this.getFileType(t.name);return e[i]=e[i]+1||1,e},{});return Object.keys(e)},showAutoProcessBtn(){if(0===this.selectedFiles.length||"MANUAL"===this.indexingType||"STATIC"===this.fieldsType)return!1;const e=this.getFileTypes;return e.every(e=>["pdf","tif","tiff","png","jpeg","jpg"].includes(e))}},watch:{repositoryId:{immediate:!0,handler(){this.repositoryId&&this.getRepository()}},selectedFiles:{deep:!0,handler(){this.selectedFiles.length>1?this.hasSelectAllFiles=!0:this.hasSelectAllFiles=!1}}},mounted(){this.$watch(e=>[e.currentPage,e.itemsPerPage],()=>this.getFiles(),{immediate:!0,deep:!0})},methods:{selectFile(e){const t=this.selectedFiles.findIndex(t=>t.id===e.id),i=t>-1;i?this.selectedFiles.splice(t,1):this.selectedFiles.push(e)},singleSelectFile(e){this.selectedFiles=[e]},showFileViewer(e){this.selectedFiles=[e];let t={name:e.repository.value,fields:e.fields};localStorage.setItem("repositoryDetails",JSON.stringify(t)),this.isFileViewerVisible=!0},hideFileViewer(){this.isFileViewerVisible=!1,this.selectedFiles=[],clearInterval(this.watchFreeHandValues),localStorage.removeItem("freeHand"),localStorage.removeItem("repositoryDetails")},showFilesSheet(){this.isFilesSheetVisible=!0},showDeleteConfirmation(e){e&&this.singleSelectFile(e),this.isDeleteConfirmationVisible=!0},showManualIndexConfirmation(e){e&&this.singleSelectFile(e),this.isManualIndexConfirmationVisible=!0},showExportConfirmation(e){e&&this.singleSelectFile(e),this.isExportConfirmationVisible=!0},showPreviousFile(){const e=this.uploadedFiles.findIndex(e=>e.id===this.selectedFiles[0].id);e-1>=0&&(this.selectedFiles=[this.uploadedFiles[e-1]])},showNextFile(){const e=this.uploadedFiles.findIndex(e=>e.id===this.selectedFiles[0].id);e+1<this.uploadedFiles.length&&(this.selectedFiles=[this.uploadedFiles[e+1]])},getFileType(e){return e.split(".").reverse()[0].slice(0,4).toLowerCase()},searchRow(e){this.files=e?this.fileData.map(({key:t,value:i})=>({key:t,value:i.filter(t=>{for(let i in t){let s=this.columns.findIndex(e=>e.name===i);if(s>=0&&t[i]&&String(t[i]).toLowerCase().includes(e.toLowerCase()))return t}})})):this.fileData},showAutoProcessConfirmation(e){e&&this.singleSelectFile(e),this.setStatus("AUTO_PROCESSING")},freeHandIndexing(e){console.log(e),localStorage.setItem("freeHand","true"),localStorage.setItem("freeHandClicked","true"),this.watchFreeHandValues=setInterval(()=>this.checkFreeHandValue(),1e3)},checkFreeHandValue(){if(localStorage.getItem("freeHand")&&"true"===localStorage.getItem("freeHand")){console.log("read values"),localStorage.setItem("freeHand","false");let e=JSON.parse(localStorage.getItem("repositoryDetails"));e&&(this.selectedFiles[0].fields=e.fields)}},async getRepository(){const{error:e,payload:t}=await fe["p"].getRepository(this.repositoryId);e?this.$alert.error(e):("STATIC"===t.fieldsType?this.ocrType="STANDARD":this.ocrType="ADVANCED",this.indexingType=t.indexingType,this.fieldsType=t.fieldsType)},updteSavedFile(){this.getSavedFile=!0,this.getFiles(),this.getSavedFile=!1},async getFiles(){if(this.loadingBarContent=!0,this.getSavedFile){this.getSavedFile=!1;const{error:e,payload:t}=await fe["r"].getIndexFiles({repositoryId:this.repositoryId,mode:"BROWSE",sortBy:{criteria:"g.createdAt",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"status",condition:"IS_NOT_EQUALS_TO",value:"UPLOADED"},{criteria:"g.id",condition:"IS_EQUALS_TO",value:this.oldSelectedId}]}],itemsPerPage:this.itemsPerPage,currentPage:this.currentPage});if(this.loadingBarContent=!1,e)return void this.$alert.error(e);const{meta:i,data:s}=t,a=s[0].value[0];this.files=this.files.map(e=>e.id===this.oldSelectedId?{...e,name:a.name,status:a.status,fields:a.fields,createdAt:a.createdAt,createdBy:a.createdBy,totalPages:a.totalPages,ocrType:a.ocrType,suggestions:a.suggestions?JSON.parse(a.suggestions):{},uploadedFrom:Object(We["a"])(Object(Ge["a"])(a.uploadedFrom))}:e),this.fileData=this.files,this.totalItems=i.totalItems,this.isFileViewerVisible=!1,this.isFilesSheetVisible=!1}else{this.files=[],this.files=[],this.selectedFiles=[];const{error:e,payload:t}=await fe["r"].getIndexFiles({repositoryId:this.repositoryId,mode:"BROWSE",sortBy:{criteria:"g.createdAt",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"status",condition:"IS_NOT_EQUALS_TO",value:"UPLOADED"}]}],itemsPerPage:this.itemsPerPage,currentPage:this.currentPage});if(this.loadingBarContent=!1,e)return void this.$alert.error(e);const{meta:i,data:s}=t;this.files=s[0].value.map(e=>({id:e.id,name:e.name,status:e.status,size:0,isVerified:!1,hasError:!1,fields:e.fields,itemId:e.itemId,repository:e.repository,createdAt:e.createdAt,createdBy:e.createdBy,totalPages:e.totalPage,ocrType:e.ocrType,suggestions:e.suggestions?JSON.parse(e.suggestions):{},uploadedFrom:Object(We["a"])(Object(Ge["a"])(e.uploadedFrom))})),this.fileData=this.files,this.totalItems=i.totalItems,this.isFileViewerVisible=!1,this.isFilesSheetVisible=!1}this.isRefreshed=!1},async setStatus(e){this.$store.commit("showLoadingBar");const t=this.selectedFiles.map(t=>({id:t.id,status:e,OCRPages:this.ocrPages,OCRType:this.ocrType,OCRTool:"STANDARD"===this.ocrType?"LEADTOOLS":"AZURE",OCRPattern:this.ocrPattern})),{error:i}=await fe["r"].indexSetStatus(t);this.$store.commit("hideLoadingBar"),i?this.$alert.error(i):(this.$alert.success(`${this.selectedFiles.length} ${this.selectedFiles.length>1?"files":"file"} saved successfully`),this.getFiles())},async deleteFiles(){this.$store.commit("showLoadingBar");const e=this.selectedFiles.map(e=>e.id),{error:t}=await fe["r"].deleteIndexedFiles(e);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):this.getFiles()},async exportFiles(e){this.$store.commit("showLoadingBar");const t=this.selectedFiles[0],{error:i}=await fe["r"].updateFile(t.id,{repositoryId:this.repositoryId,itemId:t.itemId,status:e,fields:t.fields.map(e=>({name:e.name,value:e.value,type:e.dataType}))});if(this.$store.commit("hideLoadingBar"),i)return void this.$alert.error(i);const s=t.name;"EXPORT"===e&&this.$alert.success(`File "${s}" Exported`),this.getFiles()},selectedOneFile(e){this.selectedFiles.length>0&&(this.oldSelectedId=this.selectedFiles[0].id,this.oldSelectedItemId=this.selectedFiles[0].itemId);const t=this.selectedFiles.findIndex(t=>t.id===e.id),i=t>-1;this.selectedFiles=[],i||this.selectedFiles.push(e)},selectAllFile(e,t){this.hasSelectAllFiles=e,e?"INDEXING"===t?this.selectedFiles=this.files.filter(e=>"AUTO_PROCESSING"!==e.status&&"EXPORT"!==e.status):"AUTO_PROCESSING"===t?this.selectedFiles=this.files.filter(e=>"AUTO_PROCESSING"===e.status):"EXPORT"===t&&(this.selectedFiles=this.files.filter(e=>"EXPORT"===e.status)):this.selectedFiles=[]},queueFilesForUpload(e){this.$emit("upload",e)},async getSpecficFiles(e){let t="NOT_INDEXED";switch(e){case"AUTO_PROCESSING":t="AUTO_PROCESSING",await this.getFilesSpecficFiles(t);break;case"INDEXING":t="INDEXING",await this.getFilesSpecficFiles(t);break;case"EXPORT":t="EXPORT",await this.getFilesSpecficFiles(t);break;default:console.log("no value present")}},async getFilesSpecficFiles(e){const{error:t,payload:i}=await fe["r"].getIndexFiles({repositoryId:this.repositoryId,mode:"BROWSE",sortBy:{criteria:"g.createdAt",order:"DESC"},groupBy:"",filterBy:[{filters:"INDEXING"!==e?[{criteria:"status",condition:"IS_NOT_EQUALS_TO",value:"UPLOADED"},{criteria:"status",condition:"IS_EQUALS_TO",value:e}]:[{criteria:"status",condition:"IS_NOT_EQUALS_TO",value:"UPLOADED"},{criteria:"status",condition:"IS_NOT_EQUALS_TO",value:"AUTO_PROCESSING"},{criteria:"status",condition:"IS_NOT_EQUALS_TO",value:"EXPORT"}]}],itemsPerPage:this.itemsPerPage,currentPage:this.currentPage});if(t)return void this.$alert.error(t);const{data:s}=i;if(s.length){let e=s[0].value;Array.isArray(this.selectedFiles)&&this.selectedFiles.length>0&&(e=e.filter(e=>e.id!==this.selectedFiles[0].id));const t=(e,t)=>{const i=new Map;return e.forEach(e=>{i.set(e.id,e)}),t.forEach(t=>{i.has(t.id)?this.$set(e,e.indexOf(i.get(t.id)),t):e.unshift(t)}),e};this.files=t([...this.files],e)}else{let t;if("INDEXING"!==e)t=this.files.filter(t=>t.status!==e);else{const e=["NOT_INDEXED","INDEXED","PARTIALLY_INDEXED"];t=this.files.filter(t=>!e.includes(t.status))}this.files=t}},async refreshAll(){this.isRefreshed=!0,await this.getFiles()}}},ji=zi,Ui=(i("6b50"),Object(h["a"])(ji,et,tt,!1,null,"25e2b1c0",null)),Qi=Ui.exports,Xi={name:"UploadAndIndex",components:{Header:g,Uploader:Ze,Indexer:Qi},props:{workspaceId:{type:Number,required:!0},repositoryId:{type:Number,required:!0}},data(){return{tab:"UPLOAD",isLoading:!1,uploadFiles:[]}},methods:{closeUploder(){this.$router.back()},queueFilesForUpload(e){this.tab="UPLOAD",this.uploadFiles=e}}},Hi=Xi,Wi=(i("09fe"),Object(h["a"])(Hi,s,a,!1,null,"3592a8c3",null));t["default"]=Wi.exports},e953:function(e,t,i){"use strict";i("8fbb")},e9c1:function(e,t,i){"use strict";var s=i("a026"),a=i("e277"),l=i("d54d");t["a"]=s["default"].extend({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},methods:{__begin(e,t,i){e.style.overflowY="hidden",void 0!==t&&(e.style.height=t+"px"),e.style.transition=`height ${this.duration}ms cubic-bezier(.25, .8, .50, 1)`,this.animating=!0,this.done=i},__end(e,t){e.style.overflowY=null,e.style.height=null,e.style.transition=null,this.__cleanup(),t!==this.lastEvent&&this.$emit(t)},__cleanup(){this.done&&this.done(),this.done=null,this.animating=!1,clearTimeout(this.timer),clearTimeout(this.timerFallback),void 0!==this.el&&this.el.removeEventListener("transitionend",this.animListener),this.animListener=null}},beforeDestroy(){this.animating&&this.__cleanup()},render(e){return e("transition",{props:{css:!1,appear:this.appear},on:Object(l["b"])(this,"tr",{enter:(e,t)=>{let i=0;this.el=e,!0===this.animating?(this.__cleanup(),i=e.offsetHeight===e.scrollHeight?0:void 0):this.lastEvent="hide",this.__begin(e,i,t),this.timer=setTimeout(()=>{e.style.height=e.scrollHeight+"px",this.animListener=t=>{Object(t)===t&&t.target!==e||this.__end(e,"show")},e.addEventListener("transitionend",this.animListener),this.timerFallback=setTimeout(this.animListener,1.1*this.duration)},100)},leave:(e,t)=>{let i;this.el=e,!0===this.animating?this.__cleanup():(this.lastEvent="show",i=e.scrollHeight),this.__begin(e,i,t),this.timer=setTimeout(()=>{e.style.height=0,this.animListener=t=>{Object(t)===t&&t.target!==e||this.__end(e,"hide")},e.addEventListener("transitionend",this.animListener),this.timerFallback=setTimeout(this.animListener,1.1*this.duration)},100)}})},Object(a["c"])(this,"default"))}})},eb85:function(e,t,i){"use strict";var s=i("a026"),a=i("b7fa"),l=i("87e8");const o={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},n={xs:2,sm:4,md:8,lg:16,xl:24};t["a"]=s["default"].extend({name:"QSeparator",mixins:[a["a"],l["a"]],props:{spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},computed:{orientation(){return!0===this.vertical?"vertical":"horizontal"},classPrefix(){return" q-separator--"+this.orientation},insetClass(){return!1!==this.inset?`${this.classPrefix}-${o[this.inset]}`:""},classes(){return`q-separator${this.classPrefix}${this.insetClass}`+(void 0!==this.color?" bg-"+this.color:"")+(!0===this.isDark?" q-separator--dark":"")},style(){const e={};if(void 0!==this.size&&(e[!0===this.vertical?"width":"height"]=this.size),!1!==this.spaced){const t=!0===this.spaced?n.md+"px":this.spaced in n?n[this.spaced]+"px":this.spaced,i=!0===this.vertical?["Left","Right"]:["Top","Bottom"];e["margin"+i[0]]=e["margin"+i[1]]=t}return e},attrs(){return{"aria-orientation":this.orientation}}},render(e){return e("hr",{staticClass:"q-separator",class:this.classes,style:this.style,attrs:this.attrs,on:{...this.qListeners}})}})},edfd:function(e,t,i){},f620:function(e,t,i){},fad0:function(e,t,i){},fb2a:function(e,t,i){"use strict";i("8b7a")}}]);
//# sourceMappingURL=upload-and-index.37e8a2ab.js.map