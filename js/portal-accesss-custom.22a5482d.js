(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["portal-accesss-custom"],{"00c2":function(t,e,s){t.exports=s.p+"img/name-light.137e40b6.png"},"0170":function(t,e,s){"use strict";var i=s("a026"),a=s("87e8"),o=s("e277");e["a"]=i["default"].extend({name:"QItemLabel",mixins:[a["a"]],props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},computed:{classes(){return{"q-item__label--overline text-overline":this.overline,"q-item__label--caption text-caption":this.caption,"q-item__label--header":this.header,ellipsis:1===parseInt(this.lines,10)}},style(){if(void 0!==this.lines&&parseInt(this.lines,10)>1)return{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":this.lines}}},render(t){return t("div",{staticClass:"q-item__label",style:this.style,class:this.classes,on:{...this.qListeners}},Object(o["c"])(this,"default"))}})},"01c3":function(t,e,s){},1009:function(t,e,s){},"1c1c":function(t,e,s){"use strict";var i=s("a026"),a=s("b7fa"),o=s("87e8"),r=s("e277");e["a"]=i["default"].extend({name:"QList",mixins:[o["a"],a["a"]],props:{bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},computed:{classes(){return"q-list"+(!0===this.bordered?" q-list--bordered":"")+(!0===this.dense?" q-list--dense":"")+(!0===this.separator?" q-list--separator":"")+(!0===this.isDark?" q-list--dark":"")+(!0===this.padding?" q-list--padding":"")}},render(t){return t(this.tag,{class:this.classes,on:{...this.qListeners}},Object(r["c"])(this,"default"))}})},"1c54":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-dialog",{attrs:{value:t.value},on:{input:t.close}},[e("div",{class:t.cssClass,style:{width:t.width},attrs:{id:"confirm"}},[e("div",{staticClass:"header"},[e("BaseIcon",{staticClass:"q-mr-md",attrs:{name:t.icon,color:t.iconColor,size:t.iconSize}}),e("div",{staticClass:"title-1"},[t._t("title")],2),e("q-space"),e("BaseCloseButton",{on:{click:t.close}})],1),t._t("default"),t.hasFooter?e("div",{staticClass:"footer"},[t._t("footer")],2):t._e()],2)])},a=[],o={name:"Confirm",props:{value:{type:Boolean,required:!0},width:{type:String,default:"480px"},icon:{type:String,required:!0},iconColor:{type:String,default:"secondary"},iconSize:{type:String,default:"20px"},hasFooter:{type:Boolean,default:!0},cssClass:{type:String,default:""}},methods:{close(){this.$emit("input",!1)}}},r=o,n=(s("c7a9"),s("2877")),l=s("24e8"),c=s("2c91"),d=s("93dc"),h=s.n(d),m=Object(n["a"])(r,i,a,!1,null,"3a193cc6",null);e["a"]=m.exports;h()(m,"components",{QDialog:l["a"],QSpace:c["a"]})},2573:function(t,e,s){"use strict";s("b963")},4074:function(t,e,s){"use strict";var i=s("a026"),a=s("87e8"),o=s("e277");e["a"]=i["default"].extend({name:"QItemSection",mixins:[a["a"]],props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},computed:{classes(){const t=this.avatar||this.side||this.thumbnail;return{"q-item__section--top":this.top,"q-item__section--avatar":this.avatar,"q-item__section--thumbnail":this.thumbnail,"q-item__section--side":t,"q-item__section--nowrap":this.noWrap,"q-item__section--main":!t,["justify-"+(this.top?"start":"center")]:!0}}},render(t){return t("div",{staticClass:"q-item__section column",class:this.classes,on:{...this.qListeners}},Object(o["c"])(this,"default"))}})},"481a":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{style:{width:t.portalWidth},attrs:{id:"portals-access"}},[e("div",{staticClass:"header"},[e("div",{staticClass:"col-auto logo"},[e("img",{attrs:{src:t._logo}})]),e("q-space"),e("BaseActionButton",{attrs:{"is-flat":"",icon:t.isMaximized?"eva-collapse":"eva-expand"},on:{click:t.toggleWidth}}),e("ThemeSwitcher",{staticClass:"q-ml-sm",attrs:{"no-border":!1}})],1),e("div",{staticClass:"content"},[e("div",{staticClass:"row"},[t.breadcrumbs.length?e("Breadcrumbs",{staticClass:"col q-ma-md",attrs:{breadcrumbs:t.breadcrumbs},on:{click:t.handleBreadcrumbClick,reset:t.resetList}}):t._e()],1),e("BaseScrollbar",{attrs:{height:t.breadcrumbs.length?"calc(100vh - 205px)":"calc(100vh - 160px)"}},[e("div",{staticClass:"q-pa-sm"},[0===t.breadcrumbs.length?e("div",[e("div",{staticClass:"col welcomeHeader"},[e("p",{staticClass:"row welcomeTextHigh"},[t._v("Hello,")]),e("p",{staticClass:"row welcomeTextHigh"},[t._v(" "+t._s(t.$store.state.session.email.split("@")[0])+"! ")]),e("p",{staticClass:"row welcomeTextSmall"},[t._v("Welcome back,")]),e("p",{staticClass:"row welcomeTextSmall"},[t._v("How can we help you today?")])]),e("div",{staticClass:"col"},t._l(t.drilledList,(function(s){return e("div",{key:s.id,staticClass:"mainMenu q-mb-sm",class:"col-"+s.size},[e("div",{staticClass:"row title"},[t._v(" "+t._s(s.description)+" ")]),e("div",{staticClass:"row q-mt-sm"},[e("q-space"),e("div",{staticClass:"col-auto list-item",on:{click:function(e){return t.drillDown(s)}}},[t._v(" "+t._s(s.label)+" ")])],1)])})),0)]):t._e(),1===t.breadcrumbs.length?e("div",{staticClass:"row q-col-gutter-sm"},t._l(t.drilledList,(function(s){return e("div",{key:s.id,class:"col-"+s.size},["Document Submission"!==s.label?e("div",{staticClass:"subMenu"},[e("div",{staticClass:"list-item"},[t._v(" "+t._s(s.label)+" ")]),s.description?e("div",{staticClass:"col menuDescription"},[t._l(s.description,(function(s){return e("q-list",{key:s.id},[e("q-item",{class:s.class},[e("q-item-section",[e("q-item-label",[t._v(" "+t._s(s.title)+" ")]),e("q-item-label",{attrs:{caption:""}},[t._v(t._s(s.label))]),t._l(s.list,(function(s){return[e("q-item-label",{key:s.id,staticClass:"text-red q-pt-sm q-pl-sm"},[t._v(" "+t._s(s.label)+" "),s.link?[e("a",{staticClass:"text-xs row q-ml-sm q-mt-xs",attrs:{href:s.link.value,target:"_blank"}},[t._v(t._s(s.link.label))])]:t._e()],2)]}))],2)],1),e("q-separator",{attrs:{spaced:"",inset:""}})],1)})),e("div",{staticClass:"menuAction q-ma-sm"},[s.workflowId?e("BaseButton",{staticClass:"action",attrs:{label:"Proceed"},on:{click:function(e){return t.drillDown(s)}}}):t._e()],1)],2):t._e()]):e("div",{staticClass:"mainMenu"},[t._l(s.description,(function(s){return e("div",{key:s.id,staticClass:"q-mb-sm"},[e("div",{staticClass:"row",class:s.size},[t._v(" "+t._s(s.label)+" ")])])})),e("div",{staticClass:"row q-mt-sm"},[e("q-space"),e("div",{staticClass:"col-auto list-item",on:{click:function(e){return t.drillDown(s)}}},[t._v(" Upload completed claim form ")])],1)],2)])})),0):t._e(),t.activeItem.workflowId&&"Track your claim"!==t.activeItem.label&&"Track your request"!==t.activeItem.label?e("div",{staticClass:"subcontent row"},[e("div",{staticClass:"col"},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 230px)"}},[e("div",{staticClass:"q-pl-md q-pr-md"},[t.formId?e("RenderForm",{attrs:{"form-id":t.formId,panels:t.panels,"secondary-panels":t.secondaryPanels,"form-settings":t.formSettings,"form-model":t.formModel,"workflow-actions":t.actions,"save-action":t.saveAction,"workflow-form-model":t.workflowFormModel,"is-readonly":t.formEditAccess,"form-edit-controls":t.formEditControls,"form-visibility-access":t.formVisibilityAccess,"form-secure-controls":t.formSecureControls,"enable-controls":t.enableControls},on:{"update:saveAction":function(e){t.saveAction=e},"update:save-action":function(e){t.saveAction=e},"update:workflowFormModel":function(e){t.workflowFormModel=e},"update:workflow-form-model":function(e){t.workflowFormModel=e}}}):t._e()],1)])],1),e("div",{staticClass:"col-auto q-pa-xs leftBorder"},[t._l(t.tabs,(function(s){return["attachments"===s.label&&t.docWarning?[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.top",value:"Attach required documents here",expression:"'Attach required documents here'",arg:"red",modifiers:{top:!0}}],key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(e){return t.showLinks(s.value)}}},["attachments"===s.label&&t.docWarning?[e("span",{staticClass:"alert"},[e("BaseIcon",{attrs:{name:"mdi-alert-circle",color:"red"}})],1)]:s.count?[e("span",{staticClass:"badge"},[t._v(t._s(s.count)+" ")])]:t._e()],2)]:["history"!==s.label?e("BaseActionButton",{key:s.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:s.icon,color:"primary"},on:{click:function(e){return t.showLinks(s.value)}}},["attachments"===s.label&&t.docWarning?[e("span",{staticClass:"alert"},[e("BaseIcon",{attrs:{name:"mdi-alert-circle",color:"red"}})],1)]:s.count?[e("span",{staticClass:"badge"},[t._v(t._s(s.count)+" ")])]:t._e()],2):t._e()]]}))],2)]):t._e(),!t.activeItem.workflowId||"Track your claim"!==t.activeItem.label&&"Track your request"!==t.activeItem.label?t._e():e("div",[e("div",{staticClass:"row q-mb-sm"},[e("q-space"),e("div",{staticClass:"col-auto q-mr-xs"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Refresh",expression:"'Refresh'",modifiers:{top:!0}}],attrs:{icon:"eva-refresh",color:"gray","no-border":"","is-flat":"",size:"20px"},on:{click:t.getRequestList}})],1),e("div",{staticClass:"col-auto"},[e("div",{attrs:{id:"global-search"}},[e("BaseIcon",{attrs:{name:"eva-search"}}),e("div",{staticClass:"label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchReq,expression:"searchReq"}],ref:"searchQuery",staticClass:"q-px-xs",attrs:{type:"text",placeholder:"Search request..."},domProps:{value:t.searchReq},on:{keyup:function(e){return t.searchList(t.search)},input:function(e){e.target.composing||(t.searchReq=e.target.value)}}})])],1)])],1),e("div",{staticClass:"subdetcontent"},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 260px)"}},[t._l(t.workflowRequestList,(function(s){return[s.visible?e("div",{key:s.processId,staticClass:"list q-mb-xs q-pa-sm",class:s.processId===t.hasSelectedProcess?"active-list":"",on:{click:function(t){s.expand=!s.expand}}},[e("div",{staticClass:"row"},[e("q-icon",{staticClass:"q-mr-sm",attrs:{name:"mdi-star-outline",color:"primary",size:"18px"}}),e("span",{staticClass:"col"},[t._v(t._s(s.requestNo))]),e("BaseIcon",{attrs:{name:"mdi-circle-small",color:"secondary"}}),e("span",{staticClass:"col-auto q-mr-sm"},[t._v(t._s(t.lastActionDuration(s)))]),t._l(t.tabs,(function(i){return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons q-mr-sm",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary",size:"16px"},on:{click:function(e){return e.stopPropagation(),t.showLinks(i.value,s)}}},["attachments"===i.label&&t.docWarning?[e("span",{staticClass:"alert"},[e("BaseIcon",{attrs:{name:"mdi-alert-circle",color:"red"}})],1)]:i.count?[e("span",{staticClass:"badge"},[t._v(t._s(i.count)+" ")])]:t._e()],2)}))],2)]):t._e(),s.expand?[e("div",{key:s.processId+"det",staticClass:"row"},[e("div",{staticClass:"col-12"},[e("q-stepper",{ref:"stepper",refInFor:!0,attrs:{"alternative-labels":"",color:"primary",animated:""}},t._l(t.processLevel,(function(t,i){return e("q-step",{key:t.id,attrs:{name:i,title:t.label,prefix:i+1,done:s.step>=i+1}})})),1)],1),e("div",{staticClass:"col-12"},[e("div",{staticClass:"row justify-center"},[e("div",{staticClass:"col q-pa-md"},[e("div",{staticClass:"row items-center q-col-gutter-sm"},[s.formData?[t._l(s.formData.fields,(function(s,i){return[t.validateType(i)?[e("div",{key:i,staticClass:"col-4 ellipsis"},[e("div",{staticClass:"lblheader"},[t._v(" "+t._s(t.getLabel(i))+" ")]),e("div",{staticClass:"label"},[t.validateValue(s)?e("div",{staticClass:"forms"},[t._v(" "+t._s(t.removeTags(s)||"-")+" ")]):e("div",{staticClass:"forms"},[e("a",{attrs:{href:s,target:"_blank"}},[t._v(" "+t._s(s||"-")+" ")])])])])]:[e("table",{key:i,staticClass:"q-ma-sm"},[e("thead",[e("tr",t._l(t.tableValue(s)[0],(function(s,i){return e("th",{key:i},[t._v(" "+t._s(t.getLabel(i,"table"))+" ")])})),0)]),e("tbody",t._l(t.tableValue(s),(function(s,i){return e("tr",{key:i},t._l(s,(function(s,i){return e("td",{key:i},[t._v(" "+t._s(s)+" ")])})),0)})),0)])]]}))]:t._e()],2)])])])])]:t._e()]}))],2)],1)])])])],1),t._m(0),e("Sheet",{attrs:{width:"30vw","sub-actions":t.checkListTemplate,"sub-actions-height":105},on:{input:t.closeAttachmentsSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:t.getAttachments}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"upload documents",expression:"'upload documents'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-upload",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){t.rowIndex=null,t.$refs.attachments.click()}}})]},proxy:!0},{key:"subActions",fn:function(){return[e("div",{staticClass:"q-mt-sm"},[e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"q-mt-xs"},[t._v("Checklist Documents")]),e("q-space"),e("div",{on:{click:t.downloadAll}},[e("q-chip",{staticClass:"chips grey-hover large",attrs:{outline:"",color:"grey"}},[t._v(" Download All ")])],1)],1),e("div",{staticClass:"row q-mb-md description text-sm text-grey"},[t._v(" It can be useful to ensure that all necessary information and supporting documents are included when submitting a claim ")])])]},proxy:!0}]),model:{value:t.attachmentSheet,callback:function(e){t.attachmentSheet=e},expression:"attachmentSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:t.uploadAttachments}}),t._l(t.checkList,(function(s){return[s.name?[s.attach?t._e():e("div",{key:s.uid,staticClass:"checkList"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),e("div",{staticClass:"col q-ml-sm"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t._v(" "+t._s(s.name)+" ")]),s.required?e("div",{staticClass:"col-12 q-mt-sm"},[e("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[t._v(" Required ")])],1):t._e()])]),e("div",{staticClass:"col-auto"},[e("div",{staticClass:"col-12",on:{click:function(e){return t.attachTemplate(s.uid)}}},[e("q-chip",{staticClass:"chips primary-hover medium",attrs:{outline:"",color:"primary"}},[e("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-upload-outline",color:"primary","text-color":"white"}}),t._v(" Upload ")],1)],1),s.template?e("div",{staticClass:"col-12",on:{click:function(e){return t.download(s.id)}}},[e("q-chip",{staticClass:"chips secondary-hover medium",attrs:{outline:"",color:"secondary"}},[e("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-download-outline",color:"secondary","text-color":"white"}}),t._v(" Download ")],1)],1):t._e()])])])]:t._e()]})),t._l(t.attachmentList,(function(s){return[e("div",{key:s.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[t.selectedProcess.processId?e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:s.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(t){s.checked=!s.checked}}})],1):t._e(),e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(s.name)}})],1),e("div",{staticClass:"col ellipsis",on:{click:function(e){return t.openFile(s)}}},[t._v(" "+t._s(s.name)+" ")]),e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.attachmentDelete(s)}}})],1)]),e("div",{staticClass:"meta"},[e("div",[t._v(t._s(t.$day.format(s.createdAt)))]),s.createdBy?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(s.createdByEmail))])]:t._e()],2)])]})),e("div",{staticClass:"q-mt-sm defaultBottom"},[e("BaseIcon",{attrs:{name:"mdi-circle-medium",color:"red"}}),t._v(" Required Documents ")],1)],2)]),e("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"30"},on:{input:t.closeCommentsSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments ")]},proxy:!0}]),model:{value:t.commentsSheet,callback:function(e){t.commentsSheet=e},expression:"commentsSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 155px)"}},[t._l(t.commentsList,(function(s,i){return[e("q-chat-message",{key:i,staticClass:"q-ma-sm",attrs:{name:s.createdBy===t.$store.state.session.id?"me":s.createdByEmail,text:[s.comments],"text-html":"",sent:s.createdBy===t.$store.state.session.id,stamp:t.lastCommentDuration(s),"bg-color":s.createdBy===t.$store.state.session.id?"primary-1":"secondary-1"}})]}))],2)],1),e("div",{staticClass:"col q-pa-sm borderTop"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}})],1),e("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:t.saveComment}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(e){t.advancedCommentsSheet=!0}}})],1)])])]),e("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(e){t.fileSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"attachmentFileHeader"},[e("div",{staticClass:"avatar q-ml-sm"},[e("FileIcon",{attrs:{"mime-type":t.fileType(t.selectedFile.name)}})],1),e("div",{staticClass:"q-ml-md"},[e("div",{staticClass:"filename"},[t._v(" "+t._s(t.selectedFile.name)+" ")]),e("div",{staticClass:"meta"},[e("div",[t._v("Archived At: "+t._s(t.$day.format(t.selectedFile.createdAt)))]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v("Archived By: "+t._s(t.selectedFile.createdByEmail))]),t.selectedFile.size?e("div",[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t._v(" File Size: "+t._s(t.fileSize(t.selectedFile.size))+" ")],1):t._e()],1)])])]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[e("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},t._l(t.documentActionList,(function(s){return e("ListItem",{key:s.id,attrs:{icon:s.icon,label:s.label},on:{click:function(e){return t.documentAction(s)}}})})),1)],1)],1)]},proxy:!0}]),model:{value:t.fileSheet,callback:function(e){t.fileSheet=e},expression:"fileSheet"}},[e("div",{staticClass:"attachmentFileFrame"},[e("div",{staticClass:"file-list"},[e("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:t.fileLink(),frameborder:"0"}})])])]),e("Confirm",{attrs:{icon:"eva-checkmark-circle-2","icon-color":"green",size:"24px"},on:{input:function(e){t.successModalClaim=!1,t.refNo=""}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Claim Registered!")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"q-py-md text-lg"},[e("p",[t._v(" Thank for submitting your Involuntary Unemployment claim to PSG. ")]),e("p",[t._v(" Your reference number is"),e("span",{staticClass:"text-primary"},[t._v(' "'),e("b",[t._v(t._s(t.refNo)+'"')]),t._v(". ")])]),e("p",{staticClass:"text-secondary"},[t._v(" We have sent a link to the email address you provided which allows you to track your claim. ")])])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Close",color:"primary"},on:{click:function(e){t.successModalClaim=!1,t.refNo=""}}})]},proxy:!0}]),model:{value:t.successModalClaim,callback:function(e){t.successModalClaim=e},expression:"successModalClaim"}}),e("Confirm",{attrs:{icon:"eva-checkmark-circle-2","icon-color":"green",size:"24px"},on:{input:function(e){t.successModal=!1,t.refNo=""}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Request Registered!")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"q-py-md text-lg"},[e("p",[t._v("Thank for submitting your Request.")]),e("p",[t._v(" Your reference number is"),e("span",{staticClass:"text-primary"},[t._v(' "'),e("b",[t._v(t._s(t.refNo)+'"')]),t._v(". ")])]),e("p",{staticClass:"text-secondary"},[t._v(" We have sent a link to the email address you provided which allows you to track your request. ")])])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Close",color:"primary"},on:{click:function(e){t.successModal=!1,t.refNo=""}}})]},proxy:!0}]),model:{value:t.successModal,callback:function(e){t.successModal=e},expression:"successModal"}}),e("Confirm",{attrs:{icon:"mdi-file-alert","icon-color":"red"},on:{input:function(e){t.alertModalClaim=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Documents Required!")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"q-py-md text-md"},[e("p",[t._v(" Are you sure you want to submit the claim registration without attaching the required documents. ")]),e("p",{staticClass:"text-secondary"},[t._v(" After registration, you will get the link to track your claim."),e("br"),t._v("From there, you can upload the required documents once you have them. ")])])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no"},on:{click:function(e){t.alertModalClaim=!1}}}),e("BaseButton",{attrs:{label:"yes",color:"primary"},on:{click:t.initiateRequest}})]},proxy:!0}]),model:{value:t.alertModalClaim,callback:function(e){t.alertModalClaim=e},expression:"alertModalClaim"}}),e("Confirm",{attrs:{icon:"mdi-file-alert","icon-color":"red"},on:{input:function(e){t.alertModal=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Documents Required!")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"q-py-md text-md"},[e("p",[t._v(" Are you sure you want to submit the request without attaching the required documents. ")]),e("p",{staticClass:"text-secondary"},[t._v(" After registration, you will get the link to track your request."),e("br"),t._v("From there, you can upload the required documents once you have them. ")])])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no"},on:{click:function(e){t.alertModal=!1}}}),e("BaseButton",{attrs:{label:"yes",color:"primary"},on:{click:t.initiateRequest}})]},proxy:!0}]),model:{value:t.alertModal,callback:function(e){t.alertModal=e},expression:"alertModal"}}),e("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(e){t.advancedCommentsSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[e("TextBuilderField",{model:{value:t.advancedCommentText,callback:function(e){t.advancedCommentText=e},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:t.saveAdvancedComment}})]},proxy:!0}]),model:{value:t.advancedCommentsSheet,callback:function(e){t.advancedCommentsSheet=e},expression:"advancedCommentsSheet"}}),t.historyProcessId?e("ProcessHistory",{attrs:{"process-id":t.historyProcessId,"selected-process":t.selectedProcess},on:{close:function(e){t.historyProcessId=0}}}):t._e()],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer"},[e("div",{staticClass:"footer"},[t._v("© 2024 All Rights Reserved")])])}],o=(s("14d9"),s("2f62")),r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"breadcrumbs"},[e("BaseIcon",{staticClass:"cursor-pointer icon",attrs:{name:"mdi-home","inherit-color":""},on:{click:function(e){return t.$emit("reset")}}}),t._l(t.breadcrumbs,(function(s){return e("div",{key:s.id,staticClass:"breadcrumb",on:{click:function(e){return t.$emit("click",s)}}},[e("BaseIcon",{staticClass:"icon q-mx-xs",attrs:{name:"eva-chevron-right","inherit-color":""}}),e("div",{staticClass:"label"},[t._v(t._s(s.label))])],1)}))],2)},n=[],l={name:"Breadcrumbs",props:{breadcrumbs:{type:Array,default:()=>[]}}},c=l,d=(s("bd28"),s("2877")),h=Object(d["a"])(c,r,n,!1,null,"4bedab96",null),m=h.exports,u=s("fd26"),p=s("4bc4"),f=s("381e"),v=s("a7d2"),b=s("dd90"),w=s("bc3a"),y=s.n(w),g=s("fa1f"),k=s("6df3"),C=s("6a70"),I=s("1b0d"),_=s("1c54"),q=s("695e"),x=s("cade"),L=s("8505"),$={name:"PortalsAccessCustom",components:{ThemeSwitcher:u["a"],Breadcrumbs:m,RenderForm:p["a"],Sheet:f["a"],FileIcon:g["a"],TextAreaField:k["a"],Modal:C["a"],Confirm:_["a"],TextBuilderField:q["a"],ListItem:x["a"],ProcessHistory:L["a"]},props:{tenantId:{type:String,required:!0},portalId:{type:String,required:!0}},data(){return{portalWidth:"720px",breadcrumbs:[],activeItem:"",tabList:[{id:this.$nano.id(),label:"Submit a claim",size:"12",description:"If you wish to initiate a new claim, kindly begin by clicking the 'Submit a claim' button below.",children:[{id:this.$nano.id(),label:"IUI (Involuntary Unemployment)",size:"6",workflowId:13,description:[{id:this.$nano.id(),title:"Required Information",class:"medium",label:"Please have the below documents ready to initiate an Involuntary Unemployment claim",list:[{id:this.$nano.id(),label:"- Record or Employment (ROE)",condition:"OR"},{id:this.$nano.id(),label:"- Employer’s Statement (If ROE not available)",link:{label:"Click here to download a pdf to be completed by your employer",value:"http://52.172.32.88/ezenterpriseAPI/template/Employer Statement.pdf"}}]},{id:this.$nano.id(),title:"Complete the Claim Form",label:"Fill out the claim form thoroughly, providing all the required information."},{id:this.$nano.id(),title:"Follow Up",label:"Once you have submitted the claim form and the supporting documents, a PSG representative will contact you to follow up on the status of your claim. You will also receive a link by email which will allow you to track the progress of your claim."}]},{id:this.$nano.id(),label:"Sickness / Injury",size:"6",workflowId:13,description:[{id:this.$nano.id(),title:"Required Information",class:"medium",label:"All the below documents are required to initiate a Sickness/Injury Claim",list:[{id:this.$nano.id(),label:"- Employer’s Statement"},{id:this.$nano.id(),label:"- Physician’s Statement"}]},{id:this.$nano.id(),title:"Complete the Claim Form",label:"Fill out the claim form thoroughly, providing all the required information."},{id:this.$nano.id(),title:"Follow Up",label:"Once you have submitted the claim form and the supporting documents, a PSG representative will contact you to follow up on the status of your claim. You will also receive a link by email which will allow you to track the progress of your claim."}]},{id:this.$nano.id(),label:"Document Submission",size:"12",workflowId:1013,description:[{id:this.$nano.id(),title:"",size:"medium",label:"You can also download the claim documents by clicking on the link below and upload them to this portal."},{id:this.$nano.id(),title:"",size:"small",label:"Please note submitting forms through the below link might delay the process compared to submitting online forms on the link above."}]}]},{id:this.$nano.id(),label:"Track your claim",size:"12",description:"To track the progress of your claim, simply click on the 'Track your claim' button below.",workflowId:13}],drilledList:[],workflowId:"",workflow:{},formId:"",form:null,formModel:{},tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0}],attachmentSheet:!1,commentsSheet:!1,commentText:"",commentsList:[],attachmentList:[],fileSheet:!1,selectedFile:{},selectedProcess:{},checkList:[],docWarning:!1,rowIndex:null,actions:[],workflowFormModel:{},saveAction:"",generatePDF:0,workflowRequestList:[],searchReq:"",hasSelectedProcess:0,processLevel:[],successModal:!1,successModalClaim:!1,refNo:"",alertModal:!1,alertModalClaim:!1,formEditAccess:!1,formEditControls:[],formVisibilityAccess:!0,formSecureControls:[],advancedCommentsSheet:!1,advancedCommentText:"",documentActionList:[{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline"},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline"}],historyProcessId:0}},computed:{...Object(o["c"])(["darkTheme"]),_logo(){return s("bcdf")(`./name-${this.darkTheme?"dark":"light"}.png`)},isMaximized(){return"100%"===this.portalWidth},formName(){return this.formId?this.form.settings.general.name:""},formDescription(){return this.formId?this.form.settings.general.description:""},panels(){return this.formId?this.form.panels:[]},secondaryPanels(){return this.formId?this.form.secondaryPanels:[]},formSettings(){return this.formId?this.form.settings:{}},checkListTemplate(){return!!this.checkList.length&&this.checkList.filter(t=>t.template).length>0},_enableControls(){let t=[],e=[];return this.panels.forEach(s=>{if(s.fields.length){let i=s.fields.filter(t=>"SINGLE_SELECT"===t.type||"SINGLE_CHOICE"===t.type||"MULTIPLE_CHOICE"===t.type||"MULTI_SELECT"===t.type);i.length&&i.forEach(s=>{if(s.settings.validation.enableSettings&&s.settings.validation.enableSettings.length){let i=[];s.settings.validation.enableSettings.forEach(t=>{t.controls.length&&(i.push({value:t.value,childControls:t.controls}),t.controls.forEach(t=>{i.indexOf(t)<0&&e.push(t)}))}),i.length&&t.push({id:s.id,parentControls:i})}})}}),{listControls:e,controls:t}}},watch:{workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&this.checkData()}}},created(){let t=location.origin;("https://demo.ezofis.com"===t||"http://52.172.32.88"===t)&&1==this.portalId?this.drilledList=this.tabList:(this.tabList=[],this.getPortal())},methods:{checkDocument(){this.docWarning=!1,"Track your claim"!==this.activeItem.label&&"Track your request"!==this.activeItem.label&&this.checkList.length&&this.checkList.forEach(t=>{t.required&&!t.attach&&(this.docWarning=!0)})},toggleWidth(){this.portalWidth="100%"===this.portalWidth?"720px":"100%"},drillDown(t){this.breadcrumbs.push(t),this.activeItem=t,this.drilledList=this.getChildren(this.tabList),this.formId="",this.form=null,this.workflowId="",this.checkList=[],this.saveAction="",this.actions=[],this.processLevel=[],this.docWarning=!1,this.attachmentList=[],this.commentsList=[],this.activeItem.workflowId&&(this.workflowId=this.activeItem.workflowId,this.getWorkflow())},getChildren(t){for(let e=0;e<t.length;e++)return t[e].id===this.activeItem.id?t[e].children:[]},handleBreadcrumbClick(t){const e=this.breadcrumbs.findIndex(e=>e.id===t.id);this.breadcrumbs.splice(e+1),this.activeItem=t,this.drilledList=this.getChildren(this.tabList)},resetList(){this.activeItem={},this.breadcrumbs=[],this.drilledList=this.tabList},showLinks(t,e){this.selectedProcess=e||{},"ATTACHMENTS"===t?this.selectedProcess.processId?(this.attachmentList=[],this.getAttachments()):this.attachmentSheet=!0:"COMMENTS"===t?this.selectedProcess.processId?this.getComments():this.commentsSheet=!0:"HISTORY"===t&&this.selectedProcess.processId&&(this.historyProcessId=this.selectedProcess.processId)},closeAttachmentsSheet(){this.attachmentSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},lastCommentDuration(t){const e=t.createdAt instanceof Date?t.createdAt:new Date(t.createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(e.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const t=a/i[o];return s.format(Math.round(t),o)}},fileType(t){if(t)return t.split(".").reverse()[0].slice(0,4)},fileSize(t){return Object(v["a"])(t)},fileLink(){let t=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let e=this.selectedFile.name.split(".").pop();return this.selectedFile.initiate?Object(b["d"])(e)?"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:"https://trial.ezofis.com"===t?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:"https://app.ezofis.com"===t?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:`${t}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:"http://52.172.32.88"===t?`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/1`:Object(b["d"])(e)?"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2`:"https://trial.ezofis.com"===t?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}`:"https://app.ezofis.com"===t?`https://ezdocsviewer.azurewebsites.ne/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2`:`${t}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}&action=download,print`:Object(b["b"])(e)||"http://52.172.32.88"!==t?`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`:`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}`}},openFile(t){this.selectedFile=t;let e=location.origin;"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?window.open(this.fileLink()):this.fileSheet=!0},download(t){window.open(`https://appuat.ezofis.com/ezofisapi/api/workflow/viewChecklist?wId=${this.workflowId}&id=${t}`)},downloadAll(){this.checkList.forEach(t=>{t.id&&t.template&&window.open(`https://appuat.ezofis.com/ezofisapi/api/workflow/viewChecklist?wId=${this.workflowId}&id=${t.id}`)})},attachTemplate(t){this.rowIndex=t,this.$refs.attachments.click()},searchList(){this.searchReq?this.workflowRequestList.forEach(t=>{String(t.requestNo).toLowerCase().indexOf(this.searchReq.toLowerCase())>-1?t.visible=!0:t.visible=!1}):this.workflowRequestList.forEach(t=>{t.visible=!0})},lastActionDuration(t){const e=t.transaction_createdAt instanceof Date?t.transaction_createdAt:new Date(t.transaction_createdAt),s=new Intl.RelativeTimeFormat("en"),i={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(e.getTime()-Date.now())/1e3;for(let o in i)if(i[o]<Math.abs(a)){const t=a/i[o];return s.format(Math.round(t),o)}},getLabel(t,e){let s="";return this.form.panels.forEach(i=>{if(i.fields.length)for(let a of i.fields)if("table"===e){const e=a.settings.specific.tableColumns.find(e=>e.id===t);e&&(s=e.label)}else if(a.id===t)return void(s=a.label)}),s},validateType(t){let e=!0;return this.form.panels.forEach(s=>{if(s.fields.length)for(let i of s.fields)if(i.id===t&&"TABLE"===i.type)return void(e=!1)}),e},validateValue(t){let e=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;return!e.test(t)},removeTags(t){return t?t.replace(/(<([^>]+)>)/gi,""):""},tableValue(t){return t?JSON.parse(t):[]},async getPortal(){this.$store.commit("showLoadingBar");const{error:t,payload:e}=await I["m"].getPortal(this.portalId);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e&&(this.tabList=[{id:this.$nano.id(),label:"Track your request",size:"12",description:"To track the progress of your request, simply click on the 'Track your request' button below.",workflowId:e.workflowId}],this.drilledList=this.tabList,this.workflowId=e.workflowId,this.getWorkflow(!0))},async getWorkflow(t){this.$store.commit("showLoadingBar");const{error:e,payload:s}=await I["t"].getWorkflow(this.workflowId);if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.workflow=s;let i=JSON.parse(this.workflow.flowJson),a=i.blocks.find(t=>"START"===t.type);if(a){if(a.settings.initiateBy.indexOf("PORTAL")>-1){t&&(this.tabList=[{id:this.$nano.id(),label:"Submit a request",size:"12",description:"If you wish to initiate a new request, kindly begin by clicking the 'Submit a request' button below.",workflowId:this.workflowId},{id:this.$nano.id(),label:"Track your request",size:"12",description:"To track the progress of your request, simply click on the 'Track your request' button below.",workflowId:this.workflowId}],this.drilledList=this.tabList),a.settings.fileSettings&&a.settings.fileSettings.fileCheckList.length&&(this.checkList=a.settings.fileSettings.fileCheckList,this.checkList.forEach(t=>{t.uid=this.$nano.id(),t.attach=!1}),this.checkDocument());let e=i.rules.find(t=>t.fromBlockId===a.id);e&&this.actions.push(e.proceedAction)}a.settings.formEditAccess&&(""===a.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===a.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===a.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=a.settings.formEditControls)),a.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=a.settings.formSecureControls),this.generatePDF=a.settings.generatePDF?1:0}if("PUBLISHED"===i.settings.publish.publishOption){let t=String(i.settings.general.initiateUsing.formId);t&&this.getForm(t)}i.blocks.forEach(t=>{"START"!==t.type&&"INTERNAL_ACTOR"!==t.type&&"END"!==t.type||this.processLevel.push({id:t.id,label:t.settings.label})})},async getForm(t){this.$store.commit("showLoadingBar");const{error:e,payload:s}=await I["g"].getForm(t);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):(this.formId=t,this.form=JSON.parse(s.formJson),"Track your claim"!==this.activeItem.label&&"Track your request"!==this.activeItem.label||this.getRequestList())},async getComments(){this.commentsList=[],this.$store.commit("showLoadingBar");const{error:t,payload:e}=await I["t"].getProcessComments(this.workflow.id,this.selectedProcess.processId);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):(e.length&&(this.commentsList=e),this.commentsSheet=!0)},async saveComment(){if(this.commentText)if(this.selectedProcess.processId){this.$store.commit("showLoadingBar");const{error:t}=await I["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.commentText="",this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=this.commentsList.length)}),this.commentText=""},async saveAdvancedComment(){if(this.advancedCommentText)if(this.selectedProcess.processId){this.$store.commit("showLoadingBar");const{error:t}=await I["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:this.commentAction});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=this.commentsList.length)}),this.advancedCommentText="",this.advancedCommentsSheet=!1},async uploadAttachments(t){if(this.selectedProcess.processId){const s=t.target.files[0],i=new FormData;i.append("workflowId",this.workflow.id),i.append("repositoryId",this.workflow.repositoryId),i.append("processId",this.selectedProcess.processId),i.append("transactionId",this.selectedProcess.transactionId),i.append("fields",""),i.append("file",s);let a=t.target.files[0].name;const o=a.split(".").pop();if(this.rowIndex){let t=this.checkList.filter(t=>t.uid===this.rowIndex);i.append("filename",t[0].name+"."+o),a=t[0].name+"."+o}if(!Object(b["a"])(o))return void this.$alert.info("This file format is not supported");this.$store.commit("showLoadingBar");try{const t=await y()({url:"https://appuat.ezofis.com/ezofisapi/api/workflow/attachmentWithProcessId",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:e,data:s}=t;if(200!==e||!s)throw t;this.$alert.success("Document attached")}catch(e){this.$alert.error("Error uploading file"),console.error(e)}this.$store.commit("hideLoadingBar"),this.checkList.length&&(this.checkList.forEach(t=>{t.uid!==this.rowIndex||(t.attach=!0)}),this.checkDocument()),t.target.value=""}else{const s=t.target.files[0],i=new FormData;i.append("file",s),i.append("repositoryId",this.workflow.repositoryId);let a=t.target.files[0].name;const o=a.split(".").pop();if(this.rowIndex){let t=this.checkList.filter(t=>t.uid===this.rowIndex);i.append("filename",t[0].name+"."+o),a=t[0].name+"."+o}if(!Object(b["a"])(o))return void this.$alert.info("This file format is not supported");try{const e=await y()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:o,data:r}=e;if(200!==o)throw"Invalid response";let n=JSON.parse(r);this.attachmentList.push({id:Number(n.fileId),name:a,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:s.size,initiate:!0,uid:this.rowIndex}),this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=this.attachmentList.length)}),this.checkList.length&&(this.checkList.forEach(t=>{t.uid!==this.rowIndex||(t.attach=!0)}),this.checkDocument()),t.target.value=""}catch(e){console.error(e),this.$alert.error("error attaching file")}}},async getAttachments(){this.checkList=[];let t=JSON.parse(this.workflow.flowJson),e=t.blocks.find(t=>t.id===this.selectedProcess.activityId);e&&e.settings.fileSettings&&e.settings.fileSettings.fileCheckList.length&&(this.checkList=e.settings.fileSettings.fileCheckList,this.checkList.forEach(t=>{t.uid=this.$nano.id(),t.attach=!1}),this.checkDocument());let s=this.attachmentList.length;this.$store.commit("showLoadingBar");const{error:i,payload:a}=await I["t"].getAttachments(this.workflow.id,this.selectedProcess.processId);this.$store.commit("hideLoadingBar"),i?this.$alert.error(i):(a.length?s!==a.length&&(this.attachmentList=a.map(t=>({...t,checked:!1}))):this.attachmentList=[],this.checkList.length&&this.checkList.forEach(t=>{let e=this.attachmentList.filter(e=>{let s=e.name.substr(0,e.name.lastIndexOf("."));if(t.name===s)return e});e.length?t.attach=!0:t.attach=!1}),this.attachmentSheet=!0)},async attachmentDelete(t){if(this.$store.commit("showLoadingBar"),t.initiate){const{error:e}=await I["r"].deleteUploadedFiles([t.id]);if(e)return void this.$alert.error(e);this.$store.commit("hideLoadingBar"),this.attachmentList=this.attachmentList.filter(e=>e.id!==t.id),this.checkList.forEach(e=>{e.uid===t.uid&&(e.attach=!1)})}else{const{error:e}=await I["p"].fileDelete(this.workflow.repositoryId,t.id);if(e)return void this.$alert.error(e);this.$store.commit("hideLoadingBar"),this.getAttachments()}},checkData(){let t=[];if(this.docWarning&&(t=this.checkList.filter(t=>t.required&&!t.attach)),t.length){let t=location.origin;("https://demo.ezofis.com"===t||"http://52.172.32.88"===t)&&1==this.portalId?this.alertModalClaim=!0:this.alertModal=!0}else this.initiateRequest()},async initiateRequest(){let t=[];this.attachmentList.length&&this.attachmentList.forEach(e=>{t.push(e.id)});let e=[];this.docWarning&&(e=this.checkList.filter(t=>t.required&&!t.attach));let s={workflowId:this.workflow.id,review:this.saveAction,comments:this.commentsList,formData:{formId:this.formId,fields:this.workflowFormModel},fileIds:t,fileChecklistStatus:this.docWarning?1:0,fileInfo:e,portalId:this.portalId,hasFormPDF:this.generatePDF};this.saveAction="",this.$store.commit("showLoadingBarSave");const{error:i,payload:a}=await I["t"].processTransaction(s);if(this.$store.commit("hideLoadingBarSave"),i)return void this.$alert.error(i);this.alertModal=!1,this.workflowFormModel={},this.$alert.success(a.requestNo+" Request Initiated"),this.refNo=a.requestNo;let o=location.origin;("https://demo.ezofis.com"===o||"http://52.172.32.88"===o)&&1==this.portalId?this.successModalClaim=!0:this.successModal=!0,this.resetList()},async getRequestList(){this.workflowRequestList=[],await this.getInboxList(),await this.getSentList(),await this.getCompletedList()},async getSentList(){this.$store.commit("showLoadingBar");const{error:t,payload:e}=await I["t"].getSentList(this.workflow.id,{filterBy:[],itemsPerPage:20,currentPage:1});this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e.data.forEach(t=>{t.value.forEach(t=>{let e=0,s=JSON.parse(this.workflow.flowJson),i=!0;s.blocks.forEach(s=>{s.id!==t.activityId&&i?e+=1:(1==t.flowStatus&&(e+=1),i=!1)}),this.workflowRequestList.push({...t,step:e,visible:!0,expand:!1})})})},async getCompletedList(){this.$store.commit("showLoadingBar");const{error:t,payload:e}=await I["t"].getCompletedList(this.workflow.id,{filterBy:[],itemsPerPage:20,currentPage:1});this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e.data.forEach(t=>{t.value.forEach(t=>{let e=0,s=JSON.parse(this.workflow.flowJson),i=!0;s.blocks.forEach(s=>{s.id!==t.activityId&&i?e+=1:(1==t.flowStatus&&(e+=1),i=!1)}),this.workflowRequestList.push({...t,step:e,visible:!0,expand:!1})})})},async getInboxList(){this.$store.commit("showLoadingBar");const{error:t,payload:e}=await I["t"].getInboxList(this.workflow.id,{filterBy:[],itemsPerPage:20,currentPage:1});this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e.data.forEach(t=>{t.value.forEach(t=>{let e=0,s=JSON.parse(this.workflow.flowJson),i=!0;s.blocks.forEach(s=>{s.id!==t.activityId&&i?e+=1:(1==t.flowStatus&&(e+=1),i=!1)}),this.workflowRequestList.push({...t,step:e,visible:!0,expand:!1}),this.workflowRequestList.sort((t,e)=>new Date(e.transaction_createdAt)-new Date(t.transaction_createdAt))})})},documentAction(t){if("Email_Sharing"===t.id);else if("Print"===t.id){if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();Object(b["d"])(t)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===t.id){let t="";t=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`,window.open(t,"_blank")}},async filePrintSession(){const{error:t}=await I["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});t&&this.$alert.error(t)}}},S=$,B=(s("dfc6"),s("6e8ca"),s("2c91")),A=s("1c1c"),T=s("66e5"),F=s("4074"),P=s("0170"),z=s("eb85"),E=s("0016"),M=s("f531"),D=s("87fe"),O=s("b047"),R=s("cb32"),N=s("8169"),j=s("4e73"),W=s("93dc"),Q=s.n(W),U=Object(d["a"])(S,i,a,!1,null,"e3ac1414",null);e["default"]=U.exports;Q()(U,"components",{QSpace:B["a"],QList:A["a"],QItem:T["a"],QItemSection:F["a"],QItemLabel:P["a"],QSeparator:z["a"],QIcon:E["a"],QStepper:M["a"],QStep:D["a"],QChip:O["a"],QAvatar:R["a"],QChatMessage:N["a"],QMenu:j["a"]})},"66e5":function(t,e,s){"use strict";s("3c65");var i=s("a026"),a=s("b7fa"),o=s("e2fa"),r=s("8716"),n=s("87e8"),l=s("e277"),c=s("d882"),d=s("dc8a");e["a"]=i["default"].extend({name:"QItem",mixins:[a["a"],r["a"],o["a"],n["a"]],props:{active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},computed:{isActionable(){return!0===this.clickable||!0===this.hasLink||"label"===this.tag},isClickable(){return!0!==this.disable&&!0===this.isActionable},classes(){return"q-item q-item-type row no-wrap"+(!0===this.dense?" q-item--dense":"")+(!0===this.isDark?" q-item--dark":"")+(!0===this.hasLink&&null===this.active?this.linkClass:!0===this.active?` q-item--active${void 0!==this.activeClass?" "+this.activeClass:""} `:"")+(!0===this.disable?" disabled":"")+(!0===this.isClickable?" q-item--clickable q-link cursor-pointer "+(!0===this.manualFocus?"q-manual-focusable":"q-focusable q-hoverable")+(!0===this.focused?" q-manual-focusable--focused":""):"")},style(){if(void 0!==this.insetLevel){const t=!0===this.$q.lang.rtl?"Right":"Left";return{["padding"+t]:16+56*this.insetLevel+"px"}}},onEvents(){return{...this.qListeners,click:this.__onClick,keyup:this.__onKeyup}}},methods:{__onClick(t){!0===this.isClickable&&(void 0!==this.$refs.blurTarget&&(!0!==t.qKeyEvent&&document.activeElement===this.$el?this.$refs.blurTarget.focus():document.activeElement===this.$refs.blurTarget&&this.$el.focus()),this.__navigateOnClick(t))},__onKeyup(t){if(!0===this.isClickable&&!0===Object(d["a"])(t,13)){Object(c["l"])(t),t.qKeyEvent=!0;const e=new MouseEvent("click",t);e.qKeyEvent=!0,this.$el.dispatchEvent(e)}this.$emit("keyup",t)},__getContent(t){const e=Object(l["d"])(this,"default",[]);return!0===this.isClickable&&e.unshift(t("div",{staticClass:"q-focus-helper",attrs:{tabindex:-1},ref:"blurTarget"})),e}},render(t){const e={class:this.classes,style:this.style,attrs:{role:"listitem"},on:this.onEvents};return!0===this.isClickable?(e.attrs.tabindex=this.tabindex||"0",Object.assign(e.attrs,this.linkAttrs)):!0===this.isActionable&&(e.attrs["aria-disabled"]="true"),t(this.linkTag,e,this.__getContent(t))}})},"6e8ca":function(t,e,s){"use strict";s("01c3")},"7c86":function(t,e,s){"use strict";s.d(e,"a",(function(){return o})),s.d(e,"b",(function(){return r}));const i=["left","right","up","down","horizontal","vertical"],a={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0,all:!0};function o(t){const e={};return i.forEach(s=>{t[s]&&(e[s]=!0)}),0===Object.keys(e).length?a:(!0===e.horizontal&&(e.left=e.right=!0),!0===e.vertical&&(e.up=e.down=!0),!0===e.left&&!0===e.right&&(e.horizontal=!0),!0===e.up&&!0===e.down&&(e.vertical=!0),!0===e.horizontal&&!0===e.vertical&&(e.all=!0),e)}function r(t,e){return void 0===e.event&&void 0!==t.target&&!0!==t.target.draggable&&"function"===typeof e.handler&&"INPUT"!==t.target.nodeName.toUpperCase()&&(void 0===t.qClonedBy||-1===t.qClonedBy.indexOf(e.uid))}},b2ec:function(t,e,s){},b963:function(t,e,s){},bcdf:function(t,e,s){var i={"./name-dark.png":"cd22","./name-light.png":"00c2"};function a(t){var e=o(t);return s(e)}function o(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=o,t.exports=a,a.id="bcdf"},bd28:function(t,e,s){"use strict";s("1009")},c7a9:function(t,e,s){"use strict";s("b2ec")},cade:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return t.visible?e("div",t._g({class:{"is-selected":t.isSelected,"is-disabled":!t.subList.length&&"Initiate Workflow"===t.label||t.disabled},style:{padding:t.isSparse?"16px":"8px 16px"},attrs:{id:"list-item"}},t.$listeners),[t.color?[t.icon?e("BaseActionButton",{staticClass:"icon",attrs:{icon:t.icon,color:t.color,size:"14px"}}):t._e()]:[t.icon?e("BaseIcon",{staticClass:"icon",attrs:{name:t.icon,"inherit-color":""}}):t._e()],e("div",{staticClass:"label",style:{color:t.color}},[t._v(t._s(t.label))]),t.subList?[e("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"top end",self:"top start"}},[e("q-list",t._l(t.subList,(function(s){return e("q-item",{key:s.id,attrs:{clickable:""},on:{click:function(e){return t.$emit("subListAction",s)}}},[e("q-item-section",{attrs:{side:""}},[t.icon?e("BaseIcon",{staticClass:"icon",attrs:{name:t.icon,"inherit-color":""}}):t._e()],1),e("q-item-section",[t._v(t._s(s.name))])],1)})),1)],1)]:t._e()],2):t._e()},a=[],o={name:"ListItem",props:{icon:{type:String,default:""},label:{type:[String,Number],required:!0},isSparse:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},color:{type:String,default:""},subList:{type:Array,default:()=>[]},visible:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}}},r=o,n=(s("2573"),s("2877")),l=s("4e73"),c=s("1c1c"),d=s("66e5"),h=s("4074"),m=s("93dc"),u=s.n(m),p=Object(n["a"])(r,i,a,!1,null,"0b394298",null);e["a"]=p.exports;u()(p,"components",{QMenu:l["a"],QList:c["a"],QItem:d["a"],QItemSection:h["a"]})},cd22:function(t,e,s){t.exports=s.p+"img/name-dark.ebb22601.png"},dfc6:function(t,e,s){"use strict";s("e6c6")},e6c6:function(t,e,s){},eb85:function(t,e,s){"use strict";var i=s("a026"),a=s("b7fa"),o=s("87e8");const r={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},n={xs:2,sm:4,md:8,lg:16,xl:24};e["a"]=i["default"].extend({name:"QSeparator",mixins:[a["a"],o["a"]],props:{spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},computed:{orientation(){return!0===this.vertical?"vertical":"horizontal"},classPrefix(){return" q-separator--"+this.orientation},insetClass(){return!1!==this.inset?`${this.classPrefix}-${r[this.inset]}`:""},classes(){return`q-separator${this.classPrefix}${this.insetClass}`+(void 0!==this.color?" bg-"+this.color:"")+(!0===this.isDark?" q-separator--dark":"")},style(){const t={};if(void 0!==this.size&&(t[!0===this.vertical?"width":"height"]=this.size),!1!==this.spaced){const e=!0===this.spaced?n.md+"px":this.spaced in n?n[this.spaced]+"px":this.spaced,s=!0===this.vertical?["Left","Right"]:["Top","Bottom"];t["margin"+s[0]]=t["margin"+s[1]]=e}return t},attrs(){return{"aria-orientation":this.orientation}}},render(t){return t("hr",{staticClass:"q-separator",class:this.classes,style:this.style,attrs:this.attrs,on:{...this.qListeners}})}})},fd26:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("BaseActionButton",{attrs:{"is-flat":"","no-border":t.noBorder,icon:t.darkTheme?"eva-moon-outline":"eva-sun-outline"},on:{click:t.toggleDarkTheme}})},a=[],o=s("2f62"),r={name:"ThemeSwitcher",props:{noBorder:{type:Boolean,default:!0}},computed:{...Object(o["c"])(["darkTheme"])},methods:{...Object(o["b"])(["toggleDarkTheme"])}},n=r,l=s("2877"),c=Object(l["a"])(n,i,a,!1,null,"b3ced1f0",null);e["a"]=c.exports}}]);
//# sourceMappingURL=portal-accesss-custom.22a5482d.js.map