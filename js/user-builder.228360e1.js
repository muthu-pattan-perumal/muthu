(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-builder"],{"0043":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"user-builder"}},[t("ItemBuilder",{on:{close:e.closeBuilder},scopedSlots:e._u([{key:"title",fn:function(){return["NEW"===e.mode?[e._v("Create User")]:e._e(),"EDIT"===e.mode?[e._v("Edit User")]:e._e()]},proxy:!0},{key:"description",fn:function(){return["NEW"===e.mode?[e._v(" Feel free to skip the optional fields and fill them later ")]:e._e(),"EDIT"===e.mode?[e._v(" Some of the fields or non-editable ")]:e._e()]},proxy:!0}])},[t("ActionBar",{attrs:{tabs:e.tabs,"is-loading":e.isLoading},on:{save:function(t){"EDIT"===e.mode?e.updateUser():e.createUser()}},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),t("BaseScrollbar",{attrs:{height:"calc(100vh - 126px)"}},[t("div",{staticClass:"row"},[t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"form"},[t("LoginDetails",{ref:"LOGIN_DETAILS",attrs:{mode:e.mode,role:e.role,email:e.email,"login-type":e.loginType,password:e.password,"last-name":e.lastName,"first-name":e.firstName,"password-age":e.passwordAge,"is-active":"LOGIN_DETAILS"===e.tab},on:{"update:role":function(t){e.role=t},"update:email":function(t){e.email=t},"update:loginType":function(t){e.loginType=t},"update:login-type":function(t){e.loginType=t},"update:password":function(t){e.password=t},"update:lastName":function(t){e.lastName=t},"update:last-name":function(t){e.lastName=t},"update:firstName":function(t){e.firstName=t},"update:first-name":function(t){e.firstName=t},"update:passwordAge":function(t){e.passwordAge=t},"update:password-age":function(t){e.passwordAge=t},click:function(t){e.tab="LOGIN_DETAILS"}}}),t("BaseSeparator",{attrs:{"has-left-inset":""}}),t("BusinessDetails",{ref:"BUSINESS_DETAILS",attrs:{mode:e.mode,"job-title":e.jobTitle,"manager-id":e.managerId,department:e.department,"is-active":"BUSINESS_DETAILS"===e.tab},on:{"update:jobTitle":function(t){e.jobTitle=t},"update:job-title":function(t){e.jobTitle=t},"update:managerId":function(t){e.managerId=t},"update:manager-id":function(t){e.managerId=t},"update:department":function(t){e.department=t},click:function(t){e.tab="BUSINESS_DETAILS"}}}),t("BaseSeparator",{attrs:{"has-left-inset":""}}),t("GroupDetails",{ref:"GROUP_DETAILS",attrs:{groups:e.groups,"is-active":"GROUP_DETAILS"===e.tab},on:{"update:groups":function(t){e.groups=t},click:function(t){e.tab="GROUP_DETAILS"}}}),t("BaseSeparator",{attrs:{"has-left-inset":""}}),t("PersonalDetails",{ref:"PERSONAL_DETAILS",attrs:{"phone-no":e.phoneNo,"country-code":e.countryCode,"secondary-email":e.secondaryEmail,"is-active":"PERSONAL_DETAILS"===e.tab},on:{"update:phoneNo":function(t){e.phoneNo=t},"update:phone-no":function(t){e.phoneNo=t},"update:countryCode":function(t){e.countryCode=t},"update:country-code":function(t){e.countryCode=t},"update:secondaryEmail":function(t){e.secondaryEmail=t},"update:secondary-email":function(t){e.secondaryEmail=t},click:function(t){e.tab="PERSONAL_DETAILS"}}})],1)]),t("q-space"),"EDIT"===e.mode?t("QuickAccess",{on:{click:e.goto}}):e._e()],1)])],1)],1)},a=[],r=i("8287"),o=i("4d94"),n=i("7bb1"),l=i("1b0d"),d=function(){var e=this,t=e._self._c;return t("FormSection",e._g({attrs:{icon:e.isActive?"mdi-lock":"mdi-lock-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Login Details")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Enter the desired user details and define preferred login settings to effortlessly generate a new user account ")]},proxy:!0}])},e.$listeners),[t("div",{staticClass:"row q-mb-lg"},[t("ValidationProvider",{staticClass:"col",attrs:{name:"first name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{attrs:{value:e.firstName,"is-mandatory":"",label:"first name",error:i[0]},on:{input:e.updateFirstName}})]}}])}),t("TextField",{staticClass:"col q-ml-md",attrs:{value:e.lastName,label:"last name"},on:{input:e.updateLastName}})],1),t("ValidationProvider",{attrs:{name:"email",rules:{required:!0,email:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-mb-lg",attrs:{"is-mandatory":"",label:"email",value:e.email,error:i[0],"is-readonly":"EDIT"===e.mode},on:{input:e.updateEmail}})]}}])}),t("FormFieldLabel",{attrs:{label:"Login Type","is-mandatory":""}}),t("SingleChoiceField",{staticClass:"q-mb-lg",attrs:{options:e.loginTypes,"options-per-line":1},on:{input:e.updateLoginType},model:{value:e.loginType,callback:function(t){e.loginType=t},expression:"loginType"}}),"Ezofis"===e.loginType?[t("FormFieldLabel",{attrs:{label:"password","is-mandatory":"",tooltip:e._passwordHint}}),"EDIT"===e.mode?t("div",{staticClass:"row",class:e.resetPassword?"q-mb-md":"q-mb-lg"},[t("q-toggle",{attrs:{color:"secondary",dense:""},model:{value:e.resetPassword,callback:function(t){e.resetPassword=t},expression:"resetPassword"}}),t("div",{staticClass:"font-medium q-ml-md"},[e._v("Reset Password")])],1):e._e(),e.resetPassword?t("BaseSeparator",{staticClass:"q-mb-md"}):e._e(),"NEW"===e.mode||e.resetPassword?[t("SingleChoiceField",{staticClass:"q-mb-lg",attrs:{options:e.passwordOptions,"options-per-line":1},model:{value:e.passwordOption,callback:function(t){e.passwordOption=t},expression:"passwordOption"}}),"CREATE"===e.passwordOption?t("ValidationProvider",{attrs:{name:"password",rules:{required:"CREATE"===e.passwordOption,password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("PasswordField",{staticClass:"q-mb-lg",attrs:{"is-mandatory":"",value:e.password,error:i[0]},on:{input:e.updatePassword}})]}}],null,!1,659136836)}):e._e()]:e._e(),t("SingleChoiceField",{staticClass:"q-mb-lg",attrs:{"is-mandatory":"",label:"password age",tooltip:"Force users to change password every n days for better security",value:e.passwordAge,"options-per-line":4,options:e.passwordAgeOptions},on:{input:e.updatePasswordAge}})]:e._e(),t("ValidationProvider",{attrs:{name:"role",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{attrs:{"is-mandatory":"",label:"role",value:e.role,options:e.roles,error:i[0]},on:{input:e.updateRole}})]}}])})],2)},u=[],c=i("e47f"),p=i("3445"),m=i("b3d1"),h=i("8bc3"),f=i("9234"),g=i("12b8"),b=i("874f"),y=i("9996");const v={ADMINISTRATOR:"ADMINISTRATOR",WORKSPACE_OWNER:"WORKSPACE_OWNER",PROCESS_OWNER:"PROCESS_OWNER",REPOSITORY_OWNER:"REPOSITORY_OWNER",BUSINESS_USER:"BUSINESS_USER"};Object.freeze(v);var S=v,_=i("0c6e"),E={name:"LoginDetails",components:{FormSection:c["a"],ValidationProvider:n["b"],TextField:m["a"],PasswordField:h["a"],SingleChoiceField:f["a"],SelectField:g["a"],FormFieldLabel:p["a"]},props:{firstName:{type:String,required:!0},lastName:{type:String,required:!0},email:{type:String,required:!0},loginType:{type:String,required:!0},password:{type:String,required:!0},passwordAge:{type:Number,required:!0},role:{type:String,required:!0},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"}},data(){return{loginTypes:[{id:this.$nano.id(),label:"Password",value:"Ezofis"},{id:this.$nano.id(),label:"Active Directory",value:"ADUser"}],passwordOption:"GENERATE",passwordOptions:[{id:this.$nano.id(),label:"Automatically generate a password",value:"GENERATE"},{id:this.$nano.id(),label:"Create password",value:"CREATE"}],passwordAgeOptions:[{id:this.$nano.id(),label:"30 Days",value:30},{id:this.$nano.id(),label:"60 Days",value:60},{id:this.$nano.id(),label:"90 Days",value:90},{id:this.$nano.id(),label:"120 Days",value:120}],resetPassword:!1}},computed:{_passwordHint(){return"EDIT"!==this.mode||this.resetPassword?_["a"]:""},roles(){const e=Object.keys(S);return e.map(e=>({id:this.$nano.id(),label:Object(b["a"])(Object(y["a"])(e)),value:e}))}},watch:{passwordOption:{immediate:!0,handler(){"GENERATE"===this.passwordOption&&this.updatePassword("Ezofis@123"),"CREATE"===this.passwordOption&&this.updatePassword("")}}},methods:{updateFirstName(e){this.$emit("update:firstName",e)},updateLastName(e){this.$emit("update:lastName",e)},updateEmail(e){this.$emit("update:email",e)},updateLoginType(e){this.$emit("update:loginType",e)},updatePassword(e){this.$emit("update:password",e)},updatePasswordAge(e){this.$emit("update:passwordAge",e)},updateRole(e){this.$emit("update:role",e)}}},I=E,w=i("2877"),T=i("a026"),A=i("0016"),L=i("85fc"),C=T["default"].extend({name:"QToggle",mixins:[L["a"]],props:{icon:String,iconColor:String},computed:{computedIcon(){return(!0===this.isTrue?this.checkedIcon:!0===this.isIndeterminate?this.indeterminateIcon:this.uncheckedIcon)||this.icon},computedIconColor(){if(!0===this.isTrue)return this.iconColor}},methods:{__getInner(e){return[e("div",{staticClass:"q-toggle__track"}),e("div",{staticClass:"q-toggle__thumb absolute flex flex-center no-wrap"},void 0!==this.computedIcon?[e(A["a"],{props:{name:this.computedIcon,color:this.computedIconColor}})]:void 0)]}},created(){this.type="toggle"}}),N=i("93dc"),k=i.n(N),O=Object(w["a"])(I,d,u,!1,null,"c0cc5bf8",null),$=O.exports;k()(O,"components",{QToggle:C});var P=function(){var e=this,t=e._self._c;return t("FormSection",e._g({attrs:{icon:e.isActive?"mdi-briefcase":"mdi-briefcase-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Business Details")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Input relevant information about the user to establish a comprehensive profile, enabling efficient management and organization of key business-specific details. ")]},proxy:!0}])},e.$listeners),[t("SelectField",{staticClass:"q-mb-lg",attrs:{value:e.jobTitle,label:"job title","new-option":"",options:e.jobTitles},on:{input:e.updateJobTitle}}),t("SelectField",{staticClass:"q-mb-lg",attrs:{value:e.department,label:"department","new-option":"",options:e.departments},on:{input:e.updateDepartment}}),t("SelectField",{attrs:{value:e.managerId,label:"manager",options:e.managers},on:{input:e.updateManagerId}})],1)},x=[],F=(i("13d5"),i("14d9"),{name:"BusinessDetails",components:{FormSection:c["a"],SelectField:g["a"]},props:{jobTitle:{type:String,required:!0},department:{type:String,required:!0},managerId:{type:[String,Number],required:!0},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"}},data(){return{jobTitles:[],departments:[],managers:[]}},mounted(){this.getJobTitles(),this.getDepartments(),this.getManagers()},methods:{updateJobTitle(e){this.$emit("update:jobTitle",e)},updateDepartment(e){this.$emit("update:department",e)},updateManagerId(e){this.$emit("update:managerId",e)},async getJobTitles(){const{error:e,payload:t}=await l["s"].getUniqueColumnValues({column:"jobTitle"});e?this.$alert.error("Error fetching Job Titles"):this.jobTitles=t&&t.map(e=>({id:this.$nano.id(),label:e,value:e}))},async getDepartments(){const{error:e,payload:t}=await l["s"].getUniqueColumnValues({column:"department"});e?this.$alert.error("Error fetching departments"):this.departments=t&&t.map(e=>({id:this.$nano.id(),label:e,value:e}))},async getManagers(){const{error:e,payload:t}=await l["s"].getUserList();e?this.$alert.error("Error fetching managers"):this.managers=t&&t.reduce((e,t)=>("EDIT"===this.mode?t.id!==Number(this.$route.params.id)&&e.push({id:this.$nano.id(),label:t.value,value:Number(t.id)}):e.push({id:this.$nano.id(),label:t.value,value:t.id}),e),[])}}}),D=F,q=Object(w["a"])(D,P,x,!1,null,"9e769846",null),B=q.exports,R=function(){var e=this,t=e._self._c;return t("FormSection",e._g({attrs:{icon:e.isActive?"mdi-account-multiple":"mdi-account-multiple-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Group Details")]},proxy:!0},{key:"description",fn:function(){return[e._v(' Input essential information about the group to establish a cohesive profile, facilitating effective management and organization of group-specific details." ')]},proxy:!0}])},e.$listeners),[t("MultiSelectField",{attrs:{label:"groups",value:e.groups,options:e.groupList},on:{input:e.updateGroups}})],1)},j=[],M=i("c3d2"),U={name:"GroupDetails",components:{FormSection:c["a"],MultiSelectField:M["a"]},props:{groups:{type:Array,required:!0},isActive:{type:Boolean,default:!1}},data(){return{groupList:[]}},created(){this.getGroups()},methods:{updateGroups(e){this.$emit("update:groups",e)},async getGroups(){const{error:e,payload:t}=await l["i"].getGroupList();e?this.$alert.error("Error fetching groups"):this.groupList=t&&t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))}}},V=U,G=Object(w["a"])(V,R,j,!1,null,"0191ca55",null),W=G.exports,J=function(){var e=this,t=e._self._c;return t("FormSection",e._g({attrs:{icon:e.isActive?"mdi-account":"mdi-account-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Personal Details")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Provide user's personal information to create a comprehensive profile, enabling personalized experiences and tailored settings within the software. ")]},proxy:!0}])},e.$listeners),[t("div",{staticClass:"row q-mb-lg"},[t("SelectField",{staticClass:"col-4",attrs:{"new-option":"",label:"country code",value:e.countryCode,options:e.countryCodes},on:{input:e.updateCountryCode}}),t("TextField",{staticClass:"col q-ml-md",attrs:{label:"phone no",value:e.phoneNo},on:{input:e.updatePhoneNo}})],1),t("ValidationProvider",{attrs:{name:"secondary email",rules:{email:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-mb-lg",attrs:{label:"secondary email",error:i[0],value:e.secondaryEmail},on:{input:e.updateSecondaryEmail}})]}}])})],1)},z=[],Q={name:"PersonalDetails",components:{ValidationProvider:n["b"],FormSection:c["a"],TextField:m["a"],SelectField:g["a"]},props:{countryCode:{type:String,required:!0},phoneNo:{type:String,required:!0},secondaryEmail:{type:String,required:!0},isActive:{type:Boolean,default:!1}},data(){return{countryCodes:[]}},created(){this.getCountryCodes()},methods:{updateCountryCode(e){this.$emit("update:countryCode",e)},updatePhoneNo(e){this.$emit("update:phoneNo",e)},updateSecondaryEmail(e){this.$emit("update:secondaryEmail",e)},async getCountryCodes(){const{error:e,payload:t}=await l["s"].getUniqueColumnValues({column:"countryCode"});e?this.$alert.error("Error fetching Country Codes"):this.countryCodes=t&&t.map(e=>({id:this.$nano.id(),label:e,value:e}))}}},K=Q,H=Object(w["a"])(K,J,z,!1,null,"ea8635b8",null),Y=H.exports,X=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"quick-access"}},[t("div",{staticClass:"title-3 q-mx-md q-mb-md"},[e._v("Quick access")]),e._l(e.quickAccess,(function(i){return t("ListItem",{key:i.id,attrs:{icon:i.icon,label:i.label},on:{click:function(t){return e.handleClick(i.value)}}})}))],2)},Z=[],ee=i("cade"),te={name:"QuickAccess",components:{ListItem:ee["a"]},data(){return{quickAccess:[{id:this.$nano.id(),label:"Change password",value:"LOGIN_DETAILS",icon:"eva-lock-outline"},{id:this.$nano.id(),label:"Add user to a Group",value:"GROUP_DETAILS",icon:"eva-people-outline"},{id:this.$nano.id(),label:"Change Phone No",value:"PERSONAL_DETAILS",icon:"eva-person-outline"},{id:this.$nano.id(),label:"Add Manager",value:"BUSINESS_DETAILS",icon:"mdi-briefcase-outline"},{id:this.$nano.id(),label:"Change Role",value:"LOGIN_DETAILS",icon:"eva-lock-outline"}]}},methods:{handleClick(e){this.$emit("click",e)}}},ie=te,se=(i("afd7"),Object(w["a"])(ie,X,Z,!1,null,"57d2da65",null)),ae=se.exports,re={name:"UserBuilder",components:{ItemBuilder:r["a"],ValidationObserver:n["a"],ActionBar:o["a"],LoginDetails:$,BusinessDetails:B,GroupDetails:W,PersonalDetails:Y,QuickAccess:ae},props:{userId:{type:String,default:""}},data(){return{mode:"NEW",tabs:[{id:this.$nano.id(),label:"login details",value:"LOGIN_DETAILS"},{id:this.$nano.id(),label:"business details",value:"BUSINESS_DETAILS"},{id:this.$nano.id(),label:"group details",value:"GROUP_DETAILS"},{id:this.$nano.id(),label:"personal details",value:"PERSONAL_DETAILS"}],tab:"LOGIN_DETAILS",isLoading:!1,firstName:"",lastName:"",email:"",loginType:"Ezofis",password:"",passwordAge:120,role:"",groups:[],jobTitle:"",department:"",managerId:"",countryCode:"",phoneNo:"",secondaryEmail:""}},watch:{tab(){this.$refs[this.tab].$el.scrollIntoView({behavior:"smooth"})},userId:{immediate:!0,handler(){this.userId&&(this.mode="EDIT",this.getUser())}}},methods:{closeBuilder(){this.$router.back()},goto(e){this.tab=e},async createUser(){const e=await this.$refs.form.validate();if(!e)return;this.isLoading=!0;const t={firstName:this.firstName,lastName:this.lastName,email:this.email,loginType:this.loginType,password:this.password,passwordAge:this.passwordAge,role:this.role,jobTitle:this.jobTitle,department:this.department,managerId:this.managerId,groups:this.groups,countryCode:this.countryCode,phoneNo:this.phoneNo,secondaryEmail:this.secondaryEmail},{error:i}=await l["s"].createUser(t);if(i)return"error creating user"!==i?this.$alert.warning(i):this.$alert.error(i),void(this.isLoading=!1);this.$alert.success("New user created"),this.closeBuilder()},async getUser(){const{error:e,payload:t}=await l["s"].getUser(this.userId);e?this.$alert.error(e):(this.firstName=t.firstName,this.lastName=t.lastName,this.email=t.email,this.loginType=t.loginType,this.passwordAge=t.passwordAge,this.role=t.role,this.jobTitle=t.jobTitle,this.department=t.department,this.managerId=t.manager?t.manager.id:0,this.groups=t.groups?t.groups.map(e=>e.id):[],this.countryCode=t.countryCode,this.phoneNo=t.phoneNo,this.secondaryEmail=t.secondaryEmail)},async updateUser(){const e=await this.$refs.form.validate();if(!e)return;this.isLoading=!0;const t={firstName:this.firstName,lastName:this.lastName,email:this.email,loginType:this.loginType,password:this.password,passwordAge:this.passwordAge,role:this.role,jobTitle:this.jobTitle,department:this.department,managerId:this.managerId,groups:this.groups,countryCode:this.countryCode,phoneNo:this.phoneNo,secondaryEmail:this.secondaryEmail},{error:i}=await l["s"].updateUser(this.userId,t);this.isLoading=!1,i?"error updating user"!==i?this.$alert.warning(i):this.$alert.error(i):(this.$alert.success("User updated successfully"),this.closeBuilder())}}},oe=re,ne=(i("6339"),i("2c91")),le=Object(w["a"])(oe,s,a,!1,null,"4df8fb09",null);t["default"]=le.exports;k()(le,"components",{QSpace:ne["a"]})},"1cf5":function(e,t,i){},3800:function(e,t,i){},"5cf4":function(e,t,i){"use strict";i("1cf5")},"62b0":function(e,t,i){},"62e8":function(e,t,i){},6339:function(e,t,i){"use strict";i("62e8")},"63d7":function(e,t,i){},"75db":function(e,t,i){"use strict";i("62b0")},"85fc":function(e,t,i){"use strict";i("14d9");var s=i("b7fa"),a=i("d882"),r=i("f89c"),o=i("6642"),n=Object(o["b"])({xs:30,sm:35,md:40,lg:50,xl:60}),l={computed:{__refocusTargetEl(){if(!0!==this.disable)return this.$createElement("span",{ref:"refocusTarget",staticClass:"no-outline",attrs:{tabindex:-1}})}},methods:{__refocusTarget(e){void 0!==e&&0===e.type.indexOf("key")?document.activeElement!==this.$el&&!0===this.$el.contains(document.activeElement)&&this.$el.focus():void 0!==e&&!0!==this.$el.contains(e.target)||void 0===this.$refs.refocusTarget||this.$refs.refocusTarget.focus()}}},d=i("e277"),u=i("d54d");t["a"]={mixins:[s["a"],n,r["b"],l],props:{value:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>"tf"===e||"ft"===e},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},computed:{isTrue(){return!0===this.modelIsArray?this.index>-1:this.value===this.trueValue},isFalse(){return!0===this.modelIsArray?-1===this.index:this.value===this.falseValue},isIndeterminate(){return!1===this.isTrue&&!1===this.isFalse},index(){if(!0===this.modelIsArray)return this.value.indexOf(this.val)},modelIsArray(){return void 0!==this.val&&Array.isArray(this.value)},computedTabindex(){return!0===this.disable?-1:this.tabindex||0},classes(){return`q-${this.type} cursor-pointer no-outline row inline no-wrap items-center`+(!0===this.disable?" disabled":"")+(!0===this.isDark?` q-${this.type}--dark`:"")+(!0===this.dense?` q-${this.type}--dense`:"")+(!0===this.leftLabel?" reverse":"")},innerClass(){const e=!0===this.isTrue?"truthy":!0===this.isFalse?"falsy":"indet",t=void 0===this.color||!0!==this.keepColor&&("toggle"===this.type?!0!==this.isTrue:!0===this.isFalse)?"":" text-"+this.color;return`q-${this.type}__inner--${e}${t}`},formAttrs(){const e={type:"checkbox"};return void 0!==this.name&&Object.assign(e,{checked:this.isTrue,name:this.name,value:!0===this.modelIsArray?this.val:this.trueValue}),e},attrs(){const e={tabindex:this.computedTabindex,role:"toggle"===this.type?"switch":"checkbox","aria-label":this.label,"aria-checked":!0===this.isIndeterminate?"mixed":!0===this.isTrue?"true":"false"};return!0===this.disable&&(e["aria-disabled"]="true"),e}},methods:{toggle(e){void 0!==e&&(Object(a["l"])(e),this.__refocusTarget(e)),!0!==this.disable&&this.$emit("input",this.__getNextValue(),e)},__getNextValue(){if(!0===this.modelIsArray){if(!0===this.isTrue){const e=this.value.slice();return e.splice(this.index,1),e}return this.value.concat([this.val])}if(!0===this.isTrue){if("ft"!==this.toggleOrder||!1===this.toggleIndeterminate)return this.falseValue}else{if(!0!==this.isFalse)return"ft"!==this.toggleOrder?this.trueValue:this.falseValue;if("ft"===this.toggleOrder||!1===this.toggleIndeterminate)return this.trueValue}return this.indeterminateValue},__onKeydown(e){13!==e.keyCode&&32!==e.keyCode||Object(a["l"])(e)},__onKeyup(e){13!==e.keyCode&&32!==e.keyCode||this.toggle(e)}},render(e){const t=this.__getInner(e);!0!==this.disable&&this.__injectFormInput(t,"unshift",`q-${this.type}__native absolute q-ma-none q-pa-none`);const i=[e("div",{staticClass:`q-${this.type}__inner relative-position non-selectable`,class:this.innerClass,style:this.sizeStyle,attrs:{"aria-hidden":"true"}},t)];void 0!==this.__refocusTargetEl&&i.push(this.__refocusTargetEl);const s=void 0!==this.label?Object(d["a"])([this.label],this,"default"):Object(d["c"])(this,"default");return void 0!==s&&i.push(e("div",{staticClass:`q-${this.type}__label q-anchor--skip`},s)),e("div",{class:this.classes,attrs:this.attrs,on:Object(u["b"])(this,"inpExt",{click:this.toggle,keydown:this.__onKeydown,keyup:this.__onKeyup})},i)}}},"874f":function(e,t,i){"use strict";var s=i("7c4a"),a=i("0e40"),r=Object(s["a"])((function(e,t,i){return e+(i?" ":"")+Object(a["a"])(t)}));t["a"]=r},aec3:function(e,t,i){"use strict";i("63d7")},afd7:function(e,t,i){"use strict";i("3800")},f98c:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"user-builder"}},[t("ItemBuilder",{on:{close:e.closeBuilder},scopedSlots:e._u([{key:"title",fn:function(){return["NEW"===e.mode?[e._v("Create Profile")]:e._e(),"EDIT"===e.mode?[e._v("Edit Profile")]:e._e()]},proxy:!0},{key:"description",fn:function(){return["NEW"===e.mode?[e._v(" Feel free to skip the optional fields and fill them later ")]:e._e(),"EDIT"===e.mode?[e._v(" Some of the fields or non-editable ")]:e._e()]},proxy:!0}])},[t("ActionBar",{attrs:{tabs:e.tabs,"is-loading":e.isLoading},on:{save:function(t){"EDIT"===e.mode?e.updateProfile():e.addProfile()}},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),t("BaseScrollbar",{attrs:{height:"calc(100vh - 126px)"}},[t("div",{staticClass:"row"},[t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"form"},[t("ProfileSettings",{ref:"PROFILE_DETAILS",attrs:{mode:e.mode,users:e.users,"user-list":e.userList,"profile-name":e.profileName,description:e.description,"is-active":"PROFILE_DETAILS"===e.tab,"profile-list":e.profileList,"profile-menu":e.profileList},on:{"update:users":function(t){e.users=t},"update:profileName":function(t){e.profileName=t},"update:profile-name":function(t){e.profileName=t},"update:description":function(t){e.description=t},click:function(t){e.tab="PROFILE_DETAILS"},filterRows:e.filterRows}})],1)]),t("q-space")],1)])],1)],1)},a=[],r=(i("14d9"),i("8287")),o=i("4d94"),n=i("7bb1"),l=i("1b0d"),d=function(){var e=this,t=e._self._c;return t("FormSection",e._g({attrs:{icon:e.isActive?"mdi-lock":"mdi-lock-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Profile Details")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Define the necessary menus to the user when they enter login")]},proxy:!0}])},e.$listeners),[t("div",{staticClass:"row q-mb-lg"},[t("ValidationProvider",{staticClass:"col",attrs:{name:"Profile name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{attrs:{value:e.profileName,"is-mandatory":"",label:"Profile name",error:i[0]},on:{input:e.updateProfileName}})]}}])})],1),t("TextAreaField",{staticClass:"q-mb-lg",attrs:{value:e.description,label:"description"},on:{input:e.updateDescription}}),t("ValidationProvider",{staticClass:"col",attrs:{name:"Profile name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("MultiSelectField",{staticClass:"q-mb-lg",attrs:{"is-mandatory":"",label:"Users",error:i[0],options:e.userList},on:{input:e.updateUsers},model:{value:e.users,callback:function(t){e.users=t},expression:"users"}})]}}])}),[t("div",[t("FormFieldLabel",{attrs:{label:"Profile Menu","is-mandatory":""}}),t("div",{staticClass:"q-pa-md",staticStyle:{border:"1px solid var(--divider-color)"}},[t("div",{staticClass:"q-mb-md",attrs:{id:"global-search"}},[t("div",[t("BaseIcon",{staticClass:"icon",class:[{"is-selected":e.isAllSelected,"is-focused":e.isFocused}],attrs:{name:e.isAllSelected?"mdi-checkbox-marked":"mdi-checkbox-blank-outline","inherit-color":""},on:{focus:function(t){e.isFocused=!0},blur:function(t){e.isFocused=!1},click:function(t){e.isAllSelected=!e.isAllSelected}}})],1),t("BaseIcon",{attrs:{name:"eva-search"}}),t("div",{staticClass:"label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],ref:"searchQuery",staticClass:"q-px-xs",attrs:{type:"text",placeholder:"Search in profile menu..."},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})])],1),t("MultipleCheckboxField",{staticClass:"q-pb-md",attrs:{options:e.profileList,"options-per-line":1},model:{value:e.profileMenu,callback:function(t){e.profileMenu=t},expression:"profileMenu"}})],1)],1)]],2)},u=[],c=i("e47f"),p=i("b3d1"),m=i("c3d2"),h=i("6df3"),f=i("a026"),g=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"multiple-checkbox-field"}},[t("div",{staticClass:"options-wrapper",class:{"is-readonly":e.isReadonly,"is-disabled":e.isDisabled}},[t("div",{staticClass:"row q-col-gutter-md"},[e._l(e.options,(function(i){return[e._l(i,(function(s,a){return["Menu"!==a&&"dashboard"!==a?t("div",{key:a,staticClass:"option",class:[e._optionsPerLine,{"is-selected":e.isSelected(s),"is-focused":e.isFocused===a}],attrs:{tabindex:0},on:{focus:function(t){e.isFocused=a},blur:function(t){e.isFocused=""},click:function(t){return e.selectOption(i)},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.stopPropagation(),e.selectOption(i))}}},["Menu"!==a&&"dashboard"!==a?t("BaseIcon",{key:a,staticClass:"icon",class:[i.description||1===e.optionsPerLine?"q-mr-md":"q-mr-sm"],attrs:{name:e.isSelected(s)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline","inherit-color":""}}):e._e(),t("div",["Menu"!==a?t("div",{staticClass:"label"},[e._v(" "+e._s(a)+" ")]):e._e()])],1):e._e()]})),e._l(i.Menu,(function(s,a){return t("div",{key:s[a],staticClass:"option1",class:["col-12",{"is-selected":e.isSelected(s),"is-focused":e.isFocused===a}],attrs:{tabindex:0},on:{focus:function(t){e.isFocused=a},blur:function(t){e.isFocused=""},click:function(t){return e.selectOptionMenu(i,a)},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.stopPropagation(),e.selectOptionMenu(i,a))}}},[t("BaseIcon",{key:a,staticClass:"icon",class:[i.description||1===e.optionsPerLine?"q-mr-md":"q-mr-sm"],attrs:{name:e.isSelected(s)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline","inherit-color":""}}),t("div",[t("div",{staticClass:"label"},[e._v(e._s(a))])])],1)}))]}))],2)]),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e()],1)},b=[],y=(i("caad"),i("e683")),v={name:"MultipleCheckboxField",components:{FormFieldError:y["a"]},props:{value:{type:Array,default:()=>[]},options:{type:Array,default:()=>[]},label:{type:String,default:""},isMandatory:{type:Boolean,default:!1},tooltip:{type:String,default:""},isDisabled:{type:Boolean,default:!1},isReadonly:{type:Boolean,default:!1},error:{type:String,default:""},optionsPerLine:{type:Number,default:3,validator(e){return[0,1,2,3,4,6].includes(e)}},allSelected:{type:Boolean,default:!1}},data(){return{isFocused:""}},computed:{_optionsPerLine(){switch(this.optionsPerLine){case 0:return"col";case 2:return"col-6";case 3:return"col-4";case 4:return"col-3";case 6:return"col-2";default:return"col-12"}}},methods:{isSelected(e){return e},selectOption(e){for(var t in e)"Menu"!==t&&(e[t]=!e[t],t=e[t])},selectOptionMenu(e,t){e.Menu[t]=!e.Menu[t],t=e[t];for(let i in e)"Menu"!==i&&(e[i]||(e[i]=!0))}}},S=v,_=(i("5cf4"),i("2877")),E=Object(_["a"])(S,g,b,!1,null,"3e3d04a3",null),I=E.exports,w=i("3445"),T={name:"LoginDetails",components:{FormSection:c["a"],ValidationProvider:n["b"],TextField:p["a"],MultiSelectField:m["a"],TextAreaField:h["a"],MultipleCheckboxField:I,FormFieldLabel:w["a"]},props:{profileName:{type:String,required:!0},description:{type:String,default:""},users:{type:Array,required:!0},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"},userList:{type:Array,default:()=>[]},profileList:{type:Array,default:()=>[]},profileMenu:{type:Array,default:()=>[]}},data(){return{color:Object(f["ref"])(["Reports"]),search:"",isFocused:!1,isAllSelected:!1}},computed:{},watch:{search(){this.$emit("filterRows",this.search)},isAllSelected(){this.profileList.length&&this.profileList.forEach(e=>{for(let t in e)if("Menu"!==t&&"dashboard"!==t&&(this.isAllSelected?e[t]=!0:e[t]=!1),"Menu"===t)for(let i in e["Menu"])this.isAllSelected?e.Menu[i]=!0:e.Menu[i]=!1})}},methods:{updateProfileName(e){this.$emit("update:profileName",e)},updateDescription(e){this.$emit("update:description",e)},updateUsers(e){this.$emit("update:users",e)}}},A=T,L=(i("75db"),Object(_["a"])(A,d,u,!1,null,"153b6004",null)),C=L.exports,N={name:"ProfileBuilder",components:{ItemBuilder:r["a"],ValidationObserver:n["a"],ActionBar:o["a"],ProfileSettings:C},props:{profileId:{type:String,default:""}},data(){return{mode:"NEW",tabs:[{id:this.$nano.id(),label:"Profile details",value:"PROFILE_DETAILS"}],tab:"PROFILE_DETAILS",isLoading:!1,userList:[],profileName:"",description:"",users:[],profile:{},profileList:[],profileMenu:[],profileMenuList:[]}},watch:{tab(){this.$refs[this.tab].$el.scrollIntoView({behavior:"smooth"})},profileId:{immediate:!0,handler(){this.profileId&&(this.mode="EDIT",this.getProfile())}}},created(){this.getUsers(),"NEW"===this.mode&&this.getProfileList()},methods:{closeBuilder(){this.$router.back()},goto(e){this.tab=e},filterRows(e){this.profileList=e?this.profileMenuList.filter(t=>JSON.stringify(t).toLocaleLowerCase().match(e.toLocaleLowerCase())):this.profileMenuList},async getUsers(){this.userList=[];const{error:e,payload:t}=await l["s"].getUserList();e?this.$alert.error("Error fetching users"):t&&t.map(e=>{this.userList.push({id:this.$nano.id(),label:e.value,value:String(e.id)})})},async addProfile(){const e=await this.$refs.form.validate();if(!e)return;this.isLoading=!0;let t={name:this.profileName,description:this.description,menuOptions:this.profileList,userId_Array:this.users};const{error:i,payload:s}=await l["n"].addProfile(t);i?this.$alert.error(i):(this.isLoading=!1,console.log(s),s&&this.$alert.success("profile added successfully"),this.closeBuilder())},async updateProfile(){const e=await this.$refs.form.validate();if(!e)return;this.isLoading=!0;let t={name:this.profileName,description:this.description,menuOptions:this.profileList,userId_Array:this.users};const{error:i,payload:s}=await l["n"].updateProfile(this.profileId,t);i?this.$alert.error(i):(this.isLoading=!1,console.log(s),s&&this.$alert.success("profile updated successfully"),this.closeBuilder())},async getProfileList(){const{error:e,payload:t}=await l["n"].getProfileList(0);e?this.$alert.error(e):(this.profile=t,this.profileList=JSON.parse(this.profile.menuOptions),this.profileMenuList=this.profileList)},async getProfile(){const{error:e,payload:t}=await l["n"].getProfileList(this.profileId);e?this.$alert.error(e):(this.profileName=t.name,this.description=t.description,this.users=t.userId_Array,this.profileList=JSON.parse(t.menuOptions),this.profileMenuList=this.profileList)}}},k=N,O=(i("aec3"),i("2c91")),$=i("93dc"),P=i.n($),x=Object(_["a"])(k,s,a,!1,null,"454f2c8b",null);t["default"]=x.exports;P()(x,"components",{QSpace:O["a"]})}}]);
//# sourceMappingURL=user-builder.228360e1.js.map