(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["repository-secure"],{"067e":function(e,t,i){"use strict";i("aa96")},"0c21":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cursor-pointer",attrs:{id:"async-select-field"}},[e.label?t("FormFieldLabel",{attrs:{label:e.label,"is-mandatory":e.isMandatory,tooltip:e.tooltip}}):e._e(),t("FormFieldWrapper",{ref:"wrapper",attrs:{"is-focused":e._isFocused,"is-clearable":e._isClearable,"is-readonly":e.isReadonly,"is-disabled":e.isDisabled,"has-error":!!e.error,"action-icon":"eva-chevron-down"},on:{click:e.showOptionPicker,clear:e.handleClear},scopedSlots:e._u([{key:"default",fn:function(){return[t("div",{staticClass:"async-select"},[e.value?t("div",{staticClass:"value"},[e._v(" "+e._s(e.value)+" ")]):e._e(),t("input",{ref:"searchQuery",staticClass:"q-px-sm",attrs:{type:"text",placeholder:e._placeholder},domProps:{value:e.searchQuery},on:{focus:function(t){e.isFocused=!0},blur:function(t){e.isFocused=!1},input:e.debouncedInput,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleKeypress.apply(null,arguments)}}})]),t("q-menu",{attrs:{target:e.$refs.wrapper,fit:"","no-focus":"","no-refocus":"","no-parent-event":"","transition-show":"scale","transition-hide":"scale"},model:{value:e.optionPicker,callback:function(t){e.optionPicker=t},expression:"optionPicker"}},[t("OptionPicker",{attrs:{value:e.value,options:e._options,"new-option":e.newOption},on:{select:e.handleSelect,loadMore:e.getOptions}})],1)]},proxy:!0},{key:"action",fn:function(){return[e.isLoading?t("q-spinner",{staticClass:"q-mr-sm",attrs:{color:"secondary",size:"20px"}}):e._e()]},proxy:!0}])}),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e()],1)},r=[],o=(i("caad"),i("14d9"),i("3445")),a=i("0f01"),n=i("e683"),l=i("29db"),d=i("0d5e"),c=i("9996"),u=i("32e8"),h=i("5c8a"),p=i("85b1"),f={name:"AsyncSelectField",components:{FormFieldLabel:o["a"],FormFieldWrapper:a["a"],FormFieldError:n["a"],OptionPicker:l["a"]},props:{value:{type:[String,Number],default:null},label:{type:String,default:""},placeholder:{type:String,default:""},isMandatory:{type:Boolean,default:!1},tooltip:{type:String,default:""},isDisabled:{type:Boolean,default:!1},isReadonly:{type:Boolean,default:!1},isClearable:{type:Boolean,default:!0},error:{type:String,default:""},newOption:{type:Boolean,default:!1},apiPath:{type:String,default:""},columnName:{type:String,default:""}},data(){return{isFocused:!1,optionPicker:!1,searchQuery:"",options:[],isLoading:!1,optionsClone:[]}},computed:{_placeholder(){return""},_isFocused(){return this.isFocused||this.optionPicker},_isClearable(){return this.isClearable&&!!this.value},_options(){return this.searchQuery?this.optionsClone.filter(e=>Object(c["a"])(e).includes(Object(c["a"])(this.searchQuery))):this.optionsClone}},watch:{options:{immediate:!0,deep:!0,handler(){Object(u["a"])(this.options,this.optionsClone)||(this.optionsClone=Object(h["a"])(this.options))}},optionPicker(){this.optionPicker||(this.searchQuery="")},columnName(){this.columnName&&(this.options=[],this.getOptions())}},created(){this.getOptions()},methods:{showOptionPicker(){this.optionPicker=!0},handleChange(e){this.searchQuery=e.target.value},handleSelect(e){this.$emit("input",e),this.optionPicker=!1},handleKeypress(){this.searchQuery&&this.newOption&&(this.handleSelect(this.searchQuery),this.searchQuery="",this.$refs.searchQuery.blur())},handleClear(){this.$emit("input","")},debouncedInput:Object(p["a"])((function(e){this.searchQuery=e.target.value}),1),async getOptions(){try{const e=await d["b"].post(this.apiPath,JSON.stringify({column:this.label||this.columnName,keyword:this.searchQuery,rowFrom:this.options.length||0,rowCount:this.options.length})),{status:t,data:i}=e;if(200!==t)throw e;const s=JSON.parse(i);this.options.push(...s)}catch(e){console.error(e),this.$alert.error("Error fetching options")}}}},y=f,m=(i("da87"),i("2877")),v=i("4e73"),b=i("0d59"),g=i("93dc"),S=i.n(g),_=Object(m["a"])(y,s,r,!1,null,"f4e0ea94",null);t["a"]=_.exports;S()(_,"components",{QMenu:v["a"],QSpinner:b["a"]})},1761:function(e,t,i){"use strict";i("9a9e")},"1a05":function(e,t,i){"use strict";i("6df8")},"1a82":function(e,t,i){},"1b65":function(e,t,i){"use strict";i("c515")},"1b7e":function(e,t,i){"use strict";i("fd21")},"1bfa":function(e,t,i){},"1c29":function(e,t,i){"use strict";i("fa3a")},"1f1e":function(e,t,i){},2192:function(e,t,i){"use strict";i("b864")},2731:function(e,t,i){},"27c8":function(e,t,i){},2948:function(e,t,i){"use strict";i("f108")},"29db":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"options-picker"}},[t("BaseScrollbar",{staticClass:"q-py-sm",attrs:{height:"256px"},on:{scroll:e.handleScroll}},[e.options.length?e._l(e.options,(function(i){return t("div",{key:i,staticClass:"option",class:{"is-selected":e.isSelected(i)},on:{click:function(t){return e.handleClick(i)}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:e.icon(i),"inherit-color":""}}),t("div",{staticClass:"label"},[e._v(e._s(i))])],1)})):t("div",{staticClass:"no-option"},[t("div",{staticClass:"q-mb-sm"},[e._v("No option found")]),e.newOption?t("div",[e._v('Press "Enter" to add new option')]):e._e()])],2)],1)},r=[],o=i("85b1"),a={name:"OptionsPicker",props:{value:{type:[String,Number,Array],required:!0},options:{type:Array,required:!0},isMultiple:{type:Boolean,default:!1},newOption:{type:Boolean,default:!1}},methods:{isSelected(e){return this.isMultiple?!!this.value.find(t=>t===e):this.value===e},icon(e){const t=this.isSelected(e);return this.isMultiple?t?"mdi-checkbox-marked":"mdi-checkbox-blank-outline":t?"eva-radio-button-on":"eva-radio-button-off"},handleClick(e){this.$emit("select",e)},handleScroll:Object(o["a"])((function(e){const t=e.target.scrollHeight,i=e.target.scrollTop,s=e.target.clientHeight,r=t-i===s;r&&this.$emit("loadMore")}),300)}},n=a,l=(i("1a05"),i("2877")),d=Object(l["a"])(n,s,r,!1,null,"12738659",null);t["a"]=d.exports},"2ddf":function(e,t,i){},"2f12":function(e,t,i){"use strict";i("2ddf")},"32d0":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"repository-builder"}},[t("ItemBuilder",{on:{close:e.closeBuilder},scopedSlots:e._u([{key:"title",fn:function(){return[[e._v("Secure Folder/ Repository")]]},proxy:!0},{key:"description",fn:function(){return[[e._v(" Some of the fields or non-editable ")]]},proxy:!0}])},[t("ActionBar",{attrs:{tabs:e.tabs,mode:e.mode},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),t("BaseScrollbar",{attrs:{height:"calc(100vh - 126px)",width:"100vw"}},[t("div",{staticClass:"row q-pb-xl"},[t("ValidationObserver",{ref:"form"},["REPOSITORY_DETAILS"===e.tab||"RULES_CONDITIONS"===e.tab||"RETENTIONS"===e.tab?t("RepositoryDetails",{ref:e.tab?"RULES_CONDITIONS":"REPOSITORY_DETAILS",attrs:{mode:e.mode,name:e.name,"is-active":e.isActiveTab},on:{"update:name":function(t){e.name=t},click:function(t){e.tab}}}):e._e(),t("BaseSeparator",{attrs:{"has-left-inset":""}}),"REPOSITORY_DETAILS"===e.tab?t("AssignGroup",{ref:"REPOSITORY_DETAILS",attrs:{mode:e.mode,"repository-id":e.repositoryId,group:e.groupSecurity,"is-active":"REPOSITORY_DETAILS"===e.tab},on:{refresh:e.getFolderSecurity,click:function(t){e.tab="REPOSITORY_DETAILS"}}}):e._e(),t("BaseSeparator",{attrs:{"has-left-inset":""}}),"REPOSITORY_DETAILS"===e.tab?t("AssignUser",{ref:"REPOSITORY_DETAILS",attrs:{mode:e.mode,"repository-id":e.repositoryId,user:e.userSecurity,"is-active":"REPOSITORY_DETAILS"===e.tab},on:{refresh:e.getFolderSecurity,click:function(t){e.tab="REPOSITORY_DETAILS"}}}):e._e(),"RULES_CONDITIONS"===e.tab?t("RulesAndConditions",{ref:"RULES_CONDITIONS",attrs:{mode:e.mode,fields:e.fields,"repository-id":e.repositoryId,rule:e.documentSecurity,"is-active":"RULES_CONDITIONS"===e.tab},on:{refresh:e.getFileSecurity,click:function(t){e.tab="RULES_CONDITIONS"}}}):e._e(),"RETENTIONS"===e.tab?t("Retentions",{ref:"RETENTIONS",attrs:{mode:e.mode,fields:e.fields,"repository-id":e.repositoryId,retentions:e.retentions,"is-active":"RETENTIONS"===e.tab},on:{refresh:e.getFileRetentions,click:function(t){e.tab="RETENTIONS"}}}):e._e(),"ADVANCED_SETTINGS"===e.tab?t("WorkInProgress",{attrs:{feature:"Advance Settings"}}):e._e(),"REPORTS_SETTINGS"===e.tab?t("WorkInProgress",{attrs:{feature:"Reports Settings"}}):e._e()],1)],1)])],1)],1)},r=[],o=i("8287"),a=i("4d94"),n=i("7bb1"),l=function(){var e=this,t=e._self._c;return t("FormSection",e._g({staticStyle:{width:"100vw"},attrs:{icon:e.isActive?"eva-archive":"eva-archive-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Folder Details")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Enter the desired name of the folder you'd like to create as a root folder to organize your documents. ")]},proxy:!0}])},e.$listeners),[t("ValidationProvider",{attrs:{name:"name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-mb-lg",attrs:{value:e.name,label:"name","is-mandatory":"","is-readonly":"SECURE"===e.mode,error:i[0]},on:{input:e.updateName}})]}}])})],1)},d=[],c=i("e47f"),u=i("b3d1"),h={name:"RepositoryDetails",components:{FormSection:c["a"],ValidationProvider:n["b"],TextField:u["a"]},props:{name:{type:String,required:!0},isActive:{type:Boolean,default:!1},mode:{type:String,default:""}},methods:{updateName(e){this.$emit("update:name",e)},updateDescription(e){this.$emit("update:description",e)}}},p=h,f=i("2877"),y=Object(f["a"])(p,l,d,!1,null,"6ef0c431",null),m=y.exports,v=function(){var e=this,t=e._self._c;return t("FormSection",e._g({staticClass:"assignGroup",attrs:{icon:e.isActive?"mdi-account-group":"mdi-account-group-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Apply Groups")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Manage access permissions and security settings for user groups, simplifying collaborative access control to specific repository content and resources. ")]},proxy:!0}])},e.$listeners),[t("GroupSheet",{attrs:{mode:e.modes,"repository-id":e.repositoryId,group:e.group,groups:e.groupList,"edit-field":e.editSecurity},on:{refresh:e.handleRefresh,reset:e.reset},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}}),t("div",{attrs:{id:"item-list"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 q-mb-md"},[t("div",{staticClass:"row",staticStyle:{float:"right"}},[t("ExpandableSearch",{staticClass:"q-mr-sm col-auto",on:{search:e.searchRow}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"col-auto",attrs:{"is-flat":"","no-border":"",icon:"eva-refresh"},on:{click:e.handleRefresh}}),t("BaseButton",{staticClass:"q-ml-md col-auto",attrs:{icon:"eva-plus",label:"add group"},on:{click:function(t){return e.add()}}})],1)]),t("div",{staticClass:"col-12"},[t("BaseScrollbar",{staticClass:"q-pb-sm",staticStyle:{"max-height":"340px"}},[t("table",[t("thead",[t("tr",[t("th",{staticClass:"action"}),t("th",[e._v("Name")]),t("th",[e._v("View")]),t("th",[e._v("Edit")]),t("th",[e._v("Password")]),t("th",[e._v("Delete")]),t("th",[e._v("Email")]),t("th",[e._v("Print")]),t("th",[e._v("Download")]),t("th",{staticClass:"action"})])]),t("tbody",e._l(e.groupSecurities,(function(i){return t("tr",{key:i.id},[t("td",[t("div",{staticClass:"row"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:secondary.left",value:"edit group",expression:"'edit group'",arg:"secondary",modifiers:{left:!0}}],attrs:{"is-flat":"",color:"secondary",icon:"eva-edit-outline","no-border":""},on:{click:function(t){return e.edit(i.id)}}})],1)]),t("td",[e._v(e._s(i.groupName))]),t("td",[t("CheckboxField",{attrs:{"is-readonly":"",value:i.options.view,"is-disabled":!0}})],1),t("td",[t("CheckboxField",{attrs:{"is-readonly":"",value:i.options.metadataEdit,"is-disabled":!0}})],1),t("td",[t("CheckboxField",{attrs:{"is-readonly":"",value:i.options.password,"is-disabled":!0}})],1),t("td",[t("CheckboxField",{attrs:{"is-readonly":"",value:i.options.deleteFile,"is-disabled":!0}})],1),t("td",[t("CheckboxField",{attrs:{"is-readonly":"",value:i.options.emailSharing,"is-disabled":!0}})],1),t("td",[t("CheckboxField",{attrs:{"is-readonly":"",value:i.options.print,"is-disabled":!0}})],1),t("td",[t("CheckboxField",{attrs:{"is-readonly":"",value:i.options.download,"is-disabled":!0}})],1),t("td",[t("div",{staticClass:"row"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.right",value:"delete group",expression:"'delete group'",arg:"red",modifiers:{right:!0}}],attrs:{"is-flat":"",color:"red",icon:"eva-close-outline","no-border":""},on:{click:function(t){return e.deleteSecurity(i.id)}}})],1)])])})),0)])])],1)])])],1)},b=[],g=(i("caad"),i("869e")),S=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,width:"calc(100vw - 220px)","has-footer":""},on:{input:e.closeSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.name)+" group security")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-pa-md"},[t("GroupTable",{attrs:{list:e.groupList,"add-field":e.security,"edit-field":e.editField,action:e.action,text:e.text},on:{"update:addField":function(t){e.security=t},"update:add-field":function(t){e.security=t},"update:editField":function(t){e.editField=t},"update:edit-field":function(t){e.editField=t}}})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:function(t){return e.closeSheet(!1)}}}),t("BaseButton",{attrs:{label:e.label},on:{click:function(t){"ADD"===e.mode?e.addField():e.saveField()}}})]},proxy:!0}])})},_=[],C=i("381e"),I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"field",attrs:{id:"checklist-builder"}},[e.action?[t("div",{staticClass:"text-red q-mb-md"},[e._v(" "+e._s(e.text)+" ")])]:e._e(),t("BaseScrollbar",[t("div",[t("table",[t("thead",[t("tr",[t("th",{staticClass:"medium"},[e._v("Group")]),t("th",{staticClass:"large"},[e._v("Options")]),void 0==e.editField.id?t("th",{staticClass:"action"},[t("BaseActionButton",{staticClass:"q-ml-xs",attrs:{"is-flat":"",color:"secondary",icon:"eva-plus-outline","no-border":""},on:{click:e.addRow}})],1):e._e()])]),t("tbody",[e._l(e.folderSecurity,(function(i,s){return t("tr",{key:s},[t("td",[t("SelectField",{staticClass:"col",attrs:{options:e.filterOptions(s),"is-clearable":!1,"is-readonly":void 0!==e.editField.id},model:{value:e.folderSecurity[s]["groupId"],callback:function(t){e.$set(e.folderSecurity[s],"groupId",t)},expression:"folderSecurity[index]['groupId']"}})],1),t("td",[t("MultiSelectField",{staticClass:"col",attrs:{options:e.accessibilities,"is-clearable":!1},on:{input:function(t){return e.updateAccessibilities(s)}},model:{value:e.folderSecurity[s]["accessibilities"],callback:function(t){e.$set(e.folderSecurity[s],"accessibilities",t)},expression:"folderSecurity[index]['accessibilities']"}})],1),void 0==e.editField.id?t("td",{staticClass:"action"},[t("BaseActionButton",{attrs:{"is-flat":"",color:"red",icon:"eva-close-outline","no-border":""},on:{click:function(t){return e.removeRow(s)}}})],1):e._e()])})),e.folderSecurity.length>10?[t("tr",[t("td",{staticClass:"text-bold"},[e._v("Group")]),t("td",{staticClass:"text-bold"},[e._v("Options")]),t("td",[t("BaseActionButton",{staticClass:"q-ml-xs",attrs:{"is-flat":"",color:"secondary",icon:"eva-plus-outline","no-border":""},on:{click:e.addRow}})],1)])]:e._e()],2)])])])],2)},T=[],k=(i("14d9"),i("12b8")),x=i("c3d2"),B={name:"GroupTable",components:{SelectField:k["a"],MultiSelectField:x["a"]},props:{list:{type:Array,default:()=>[]},addField:{type:Array,default:()=>[]},editField:{type:Object,default:()=>{}},action:{type:Boolean,default:!1},text:{type:String,default:""}},data(){return{accessibilities:[{id:this.$nano.id(),label:"View",value:"view"},{id:this.$nano.id(),label:"Metadata Edit",value:"metadataEdit"},{id:this.$nano.id(),label:"Password",value:"password"},{id:this.$nano.id(),label:"Delete File",value:"deleteFile"},{id:this.$nano.id(),label:"Email Sharing",value:"emailSharing"},{id:this.$nano.id(),label:"Print",value:"print"},{id:this.$nano.id(),label:"Download",value:"download"}],folderSecurity:[]}},computed:{filterOptions(){return e=>{const t=this.folderSecurity.slice(0,e).map(e=>e.groupId),i=this.list.filter(e=>!t.includes(e.value));return i}}},watch:{folderSecurity:{immediate:!0,deep:!0,handler(){this.$emit("update:addField",this.folderSecurity)}}},mounted(){if(0!==Object.keys(this.editField).length){const e=this.extractTrueOptions(this.editField.options);this.folderSecurity=[{id:this.editField.id,groupId:this.editField.groupId,accessibilities:e,options:this.editField.options}]}else this.addRow()},methods:{addRow(){const e={id:this.$nano.id(),groupId:0,accessibilities:["view"],options:{view:!0,metadataEdit:!1,password:!1,vault:!1,hidePages:!1,alert:!1,checkInAndOut:!1,deleteFile:!1,emailSharing:!1,print:!1,download:!1,links:!1}};this.folderSecurity.push(e)},removeRow(e){this.folderSecurity.splice(e,1)},updateAccessibilities(e){const t=this.folderSecurity[e].accessibilities,i=this.folderSecurity[e].options;for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&(i[s]=!1);t.forEach(e=>{Object.prototype.hasOwnProperty.call(i,e)&&(i[e]=!0)})},extractTrueOptions(e){const t=[];for(const i in e)e.hasOwnProperty.call(e,i)&&!0===e[i]&&t.push(i);return t}}},O=B,$=(i("c875"),Object(f["a"])(O,I,T,!1,null,"a263cc3c",null)),w=$.exports,F=i("1b0d"),E={name:"GroupSheet",components:{Sheet:C["a"],GroupTable:w},props:{value:{type:Boolean,default:!1},editField:{type:Object,default:()=>{}},mode:{type:String,required:!0},repositoryId:{type:String,default:""},group:{type:Array,default:()=>[]},groups:{type:Array,default:()=>[]}},data(){return{name:"",security:[],groupList:[],action:!1,text:""}},computed:{label(){return"ADD"===this.mode?"Add":"Save"}},watch:{group:{immediate:!0,deep:!0,handler(){this.filterGroups()}},editField:{immediate:!0,deep:!0,handler(){this.filterGroups()}},mode:{immediate:!0,handler(){"ADD"===this.mode?this.name="Add":"EDIT"===this.mode&&(this.name="Edit")}}},mounted(){},methods:{reset(){this.security=[],this.action=!1,this.text=""},closeSheet(){this.$emit("input",!1),this.$emit("reset"),this.reset()},filterGroups(){if(0!==Object.keys(this.editField).length){const e=this.editField.groupId,t=this.groups.filter(t=>e===t.value);this.groupList=t&&t.map(e=>({id:this.$nano.id(),label:e.label,value:e.value}))}else if(this.group.length){const e=this.group.map(e=>e.groupId),t=this.groups.filter(t=>!e.includes(t.id));this.groupList=t&&t.map(e=>({id:this.$nano.id(),label:e.label,value:e.value}))}else this.groupList=this.groups},async addField(){const e=this.security.map(e=>e.groupId),t=this.security.map(e=>e.options.view?0:1);if(e.includes(0)&&t.includes(1))this.action=!0,this.text="Don't leave GROUP colum blank and don't remove view from OPTIONS";else if(e.includes(0))this.action=!0,this.text="Select any of the group, don't leave GROUP column empty";else if(t.includes(1))this.btn=!0,this.text="Don't remove view from OPTIONS column";else{const e=this.security.map(e=>{const t={...e};return delete t.id,delete t.accessibilities,t}),t={repositoryId:this.repositoryId,userOptions:[],groupOptions:e},{error:i}=await F["p"].insertRepositorySecurity(t);if(i)return void this.$alert.error(i);this.closeSheet(),this.$alert.success("New folder security added succesfully"),this.$emit("refresh",this.repositoryId)}},async saveField(){const e=this.security.map(e=>e.groupId),t=this.security.map(e=>e.options.view?0:1);if(e.includes(0)&&t.includes(1))this.action=!0,this.text="Don't leave GROUP colum blank and don't remove view from OPTIONS";else if(e.includes(0))this.action=!0,this.text="Select any of the group, don't leave GROUP column empty";else if(t.includes(1))this.btn=!0,this.text="Don't remove view from OPTIONS column";else{const e=this.security.map(e=>{const t={...e};return delete t.accessibilities,t}),t=this.repositoryId,i={repositoryId:this.repositoryId,userOptions:[],groupOptions:e},{error:s}=await F["p"].updateRepositorySecurity(t,i);if(s)return void this.$alert.error(s);this.closeSheet(),this.$alert.success("Folder security updated succesfully"),this.$emit("refresh",this.repositoryId)}}}},A=E,N=Object(f["a"])(A,S,_,!1,null,"72f27e81",null),D=N.exports,R=i("be3f"),P={name:"AssignGroups",components:{FormSection:c["a"],CheckboxField:g["a"],GroupSheet:D,ExpandableSearch:R["a"]},props:{isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"},repositoryId:{type:String,default:""},group:{type:Array,default:()=>[]}},data(){return{visible:!1,modes:"",groupSecurities:[],editSecurity:{},securityData:[],groupList:[]}},watch:{group:{immediate:!0,deep:!0,handler(){this.group&&(this.groupSecurities=this.group)}}},created(){this.getGroups()},methods:{handleRefresh(e){this.$emit("refresh",e)},reset(){this.editSecurity={}},add(){this.modes="ADD",this.visible=!0},edit(e){this.editSecurity=this.groupSecurities.find(t=>t.id===e),this.modes="EDIT",this.visible=!0},searchRow(e){this.securityData=this.group,this.groupSecurities=e?this.securityData.filter(t=>t.groupName.toLowerCase().includes(e.toLowerCase())):this.securityData},async getGroups(){const{error:e,payload:t}=await F["i"].getGroupList();e?this.$alert.error("Error fetching groups"):this.groupList=t&&t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))},async deleteSecurity(e){const{error:t}=await F["p"].deleteRepositorySecurity(e);t?this.$alert.error(t):(this.$alert.success("Folder security deleted succesfully"),this.handleRefresh(this.repositoryId))}}},q=P,L=(i("784e"),i("1b65"),Object(f["a"])(q,v,b,!1,null,"add670d4",null)),M=L.exports,j=function(){var e=this,t=e._self._c;return t("FormSection",e._g({staticClass:"assignUser",attrs:{icon:e.isActive?"mdi-account":"mdi-account-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Apply Users")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Define and customize access controls for individual users, ensuring secure and tailored access to specific repository resources. ")]},proxy:!0}])},e.$listeners),[t("UserSheet",{attrs:{mode:e.modes,"repository-id":e.repositoryId,"edit-field":e.editSecurity,user:e.user,users:e.userList},on:{refresh:e.handleRefresh,reset:e.reset},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}}),t("div",{attrs:{id:"item-list"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 q-mb-md"},[t("div",{staticClass:"row",staticStyle:{float:"right"}},[t("ExpandableSearch",{staticClass:"q-mr-sm col-auto",on:{search:e.searchRow}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"col-auto",attrs:{"is-flat":"","no-border":"",icon:"eva-refresh"},on:{click:e.handleRefresh}}),t("BaseButton",{staticClass:"q-ml-md col-auto",attrs:{icon:"eva-plus",label:"add user"},on:{click:function(t){return e.add()}}})],1)]),t("div",{staticClass:"col-12"},[t("BaseScrollbar",{staticClass:"q-pb-sm",staticStyle:{"max-height":"340px"}},[t("table",[t("thead",[t("tr",[t("th",{staticClass:"action"}),t("th",[e._v("Name")]),t("th",[e._v("View")]),t("th",[e._v("Edit")]),t("th",[e._v("Password")]),t("th",[e._v("Delete")]),t("th",[e._v("Email")]),t("th",[e._v("Print")]),t("th",[e._v("Download")]),t("th",{staticClass:"action"})])]),t("tbody",e._l(e.userSecurities,(function(i){return t("tr",{key:i.id},[t("td",[t("div",{staticClass:"row"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:secondary.left",value:"edit user",expression:"'edit user'",arg:"secondary",modifiers:{left:!0}}],attrs:{"is-flat":"",color:"secondary",icon:"eva-edit-outline","no-border":""},on:{click:function(t){return e.edit(i.id)}}})],1)]),t("td",[e._v(e._s(i.userName))]),t("td",[t("CheckboxField",{attrs:{"is-readonly":"",value:i.options.view,"is-disabled":!0}})],1),t("td",[t("CheckboxField",{attrs:{"is-readonly":"",value:i.options.metadataEdit,"is-disabled":!0}})],1),t("td",[t("CheckboxField",{attrs:{"is-readonly":"",value:i.options.password,"is-disabled":!0}})],1),t("td",[t("CheckboxField",{attrs:{"is-readonly":"",value:i.options.deleteFile,"is-disabled":!0}})],1),t("td",[t("CheckboxField",{attrs:{"is-readonly":"",value:i.options.emailSharing,"is-disabled":!0}})],1),t("td",[t("CheckboxField",{attrs:{"is-readonly":"",value:i.options.print,"is-disabled":!0}})],1),t("td",[t("CheckboxField",{attrs:{"is-readonly":"",value:i.options.download,"is-disabled":!0}})],1),t("td",[t("div",{staticClass:"row"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.right",value:"delete user",expression:"'delete user'",arg:"red",modifiers:{right:!0}}],attrs:{"is-flat":"",color:"red",icon:"eva-close-outline","no-border":""},on:{click:function(t){return e.deleteSecurity(i.id)}}})],1)])])})),0)])])],1)])])],1)},U=[],Y=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,width:"calc(100vw - 220px)","has-footer":""},on:{input:e.closeSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.name)+" user security")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-pa-md"},[t("UserTable",{attrs:{list:e.usersList,"add-field":e.security,"edit-field":e.editField,action:e.action,text:e.text},on:{"update:addField":function(t){e.security=t},"update:add-field":function(t){e.security=t}}})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:function(t){return e.closeSheet(!1)}}}),t("BaseButton",{attrs:{label:e.label},on:{click:function(t){"ADD"===e.mode?e.addField():e.saveField()}}})]},proxy:!0}])})},V=[],G=function(){var e=this,t=e._self._c;return t("div",{staticClass:"field",attrs:{id:"checklist-builder"}},[e.action?[t("div",{staticClass:"text-red q-mb-md"},[e._v(" "+e._s(e.text)+" ")])]:e._e(),t("BaseScrollbar",[t("div",[t("table",[t("thead",[t("tr",[t("th",{staticClass:"medium"},[e._v("User")]),t("th",{staticClass:"large"},[e._v("Options")]),void 0==e.editField.id?t("th",{staticClass:"action"},[t("BaseActionButton",{staticClass:"q-ml-xs",attrs:{"is-flat":"",color:"secondary",icon:"eva-plus-outline","no-border":""},on:{click:e.addRow}})],1):e._e()])]),t("tbody",[e._l(e.folderSecurity,(function(i,s){return t("tr",{key:s},[t("td",[t("SelectField",{staticClass:"col",attrs:{options:e.filterOptions(s),"is-clearable":!1,"is-readonly":void 0!==e.editField.id},model:{value:e.folderSecurity[s]["userId"],callback:function(t){e.$set(e.folderSecurity[s],"userId",t)},expression:"folderSecurity[index]['userId']"}})],1),t("td",[t("MultiSelectField",{staticClass:"col",attrs:{options:e.accessibilities,"is-clearable":!1},on:{input:function(t){return e.updateAccessibilities(s)}},model:{value:e.folderSecurity[s]["accessibilities"],callback:function(t){e.$set(e.folderSecurity[s],"accessibilities",t)},expression:"folderSecurity[index]['accessibilities']"}})],1),void 0==e.editField.id?t("td",{staticClass:"action"},[t("BaseActionButton",{attrs:{"is-flat":"",color:"red",icon:"eva-close-outline","no-border":""},on:{click:function(t){return e.removeRow(s)}}})],1):e._e()])})),e.folderSecurity.length>10?[t("tr",[t("td",{staticClass:"text-bold"},[e._v("User")]),t("td",{staticClass:"text-bold"},[e._v("Options")]),t("td",[t("BaseActionButton",{staticClass:"q-ml-xs",attrs:{"is-flat":"",color:"secondary",icon:"eva-plus-outline","no-border":""},on:{click:e.addRow}})],1)])]:e._e()],2)])])])],2)},J=[],H={name:"UserTable",components:{SelectField:k["a"],MultiSelectField:x["a"]},props:{list:{type:Array,default:()=>[]},addField:{type:Array,default:()=>[]},editField:{type:Object,default:()=>{}},action:{type:Boolean,default:!1},text:{type:String,default:""}},data(){return{accessibilities:[{id:this.$nano.id(),label:"View",value:"view"},{id:this.$nano.id(),label:"Metadata Edit",value:"metadataEdit"},{id:this.$nano.id(),label:"Password",value:"password"},{id:this.$nano.id(),label:"Delete File",value:"deleteFile"},{id:this.$nano.id(),label:"Email Sharing",value:"emailSharing"},{id:this.$nano.id(),label:"Print",value:"print"},{id:this.$nano.id(),label:"Download",value:"download"}],folderSecurity:[]}},computed:{filterOptions(){return e=>{const t=this.folderSecurity.slice(0,e).map(e=>e.userId);console.log(t);const i=this.list.filter(e=>!t.includes(e.value));return console.log(i),i}}},watch:{folderSecurity:{immediate:!0,handler(){this.$emit("update:addField",this.folderSecurity)}}},mounted(){if(0!==Object.keys(this.editField).length){const e=this.extractTrueOptions(this.editField.options);this.folderSecurity=[{id:this.editField.id,userId:this.editField.userId,accessibilities:e,options:this.editField.options}]}else this.addRow()},methods:{addRow(){if(0===Object.keys(this.editField).length){const e={id:0,userId:0,accessibilities:["view"],options:{view:!0,metadataEdit:!1,password:!1,vault:!1,hidePages:!1,alert:!1,checkInAndOut:!1,deleteFile:!1,emailSharing:!1,print:!1,download:!1,links:!1}};this.folderSecurity.push(e)}},removeRow(e){this.folderSecurity.splice(e,1)},updateAccessibilities(e){const t=this.folderSecurity[e].accessibilities,i=this.folderSecurity[e].options;for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&(i[s]=!1);t.forEach(e=>{Object.prototype.hasOwnProperty.call(i,e)&&(i[e]=!0)})},extractTrueOptions(e){const t=[];for(const i in e)e.hasOwnProperty.call(e,i)&&!0===e[i]&&t.push(i);return t}}},Q=H,W=(i("aadf"),Object(f["a"])(Q,G,J,!1,null,"f64a3494",null)),z=W.exports,K={name:"UserSheet",components:{Sheet:C["a"],UserTable:z},props:{value:{type:Boolean,default:!1},editField:{type:Object,default:()=>{}},mode:{type:String,required:!0},repositoryId:{type:String,default:""},user:{type:Array,default:()=>[]},users:{type:Array,default:()=>[]}},data(){return{name:"",security:[],usersList:[],action:!1,text:""}},computed:{label(){return"ADD"===this.mode?"Add":"Save"}},watch:{users:{immediate:!0,deep:!0,handler(){this.filterUsers()}},editField:{immediate:!0,deep:!0,handler(){this.filterUsers()}},mode:{immediate:!0,handler(){"ADD"===this.mode?this.name="Add":"EDIT"===this.mode&&(this.name="Edit")}}},mounted(){},methods:{reset(){this.security=[],this.action=!1,this.text=""},closeSheet(){this.$emit("input",!1),this.$emit("reset"),this.reset()},filterUsers(){if(0!==Object.keys(this.editField).length){const e=this.editField.userId,t=this.users.filter(t=>e===t.value);this.usersList=t&&t.map(e=>({id:this.$nano.id(),label:e.label,value:e.value}))}else if(this.user.length){const e=this.user.map(e=>e.userId),t=this.users.filter(t=>!e.includes(t.id));this.usersList=t&&t.map(e=>({id:this.$nano.id(),label:e.label,value:e.value}))}else this.usersList=this.users},async addField(){const e=this.security.map(e=>e.userId),t=this.security.map(e=>e.options.view?0:1);if(e.includes(0)&&t.includes(1))this.action=!0,this.text="Don't leave user column blank and don't remove view from OPTIONS";else if(e.includes(0))this.action=!0,this.text="Select any of the user, don't leave user column empty";else if(t.includes(1))this.btn=!0,this.text="Don't remove view from options column";else{const e=this.security.map(e=>{const t={...e};return delete t.id,delete t.accessibilities,t}),t={repositoryId:this.repositoryId,userOptions:e,groupOptions:[]},{error:i}=await F["p"].insertRepositorySecurity(t);if(i)return void this.$alert.error(i);this.closeSheet(),this.$alert.success("New folder security added succesfully"),this.$emit("refresh",this.repositoryId)}},async saveField(){const e=this.security.map(e=>e.userId),t=this.security.map(e=>e.options.view?0:1);if(e.includes(0)&&t.includes(1))this.action=!0,this.text="Don't leave USER colum blank and don't remove view from OPTIONS";else if(e.includes(0))this.action=!0,this.text="Select any of the user, don't leave USER column empty";else if(t.includes(1))this.btn=!0,this.text="Don't remove view from OPTIONS column";else{const e=this.security.map(e=>{const t={...e};return delete t.accessibilities,t}),t=this.repositoryId,i={repositoryId:this.repositoryId,userOptions:e,groupOptions:[]},{error:s}=await F["p"].updateRepositorySecurity(t,i);if(s)return void this.$alert.error(s);this.closeSheet(),this.$alert.success("Folder security updated succesfully"),this.$emit("refresh",this.repositoryId)}}}},X=K,Z=Object(f["a"])(X,Y,V,!1,null,"57ecdbee",null),ee=Z.exports,te={name:"AssignUsers",components:{FormSection:c["a"],CheckboxField:g["a"],UserSheet:ee,ExpandableSearch:R["a"]},props:{isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"},repositoryId:{type:String,default:""},user:{type:Array,default:()=>[]}},data(){return{visible:!1,modes:"",userSecurities:[],editSecurity:{},securityData:[],userList:[]}},watch:{user:{immediate:!0,deep:!0,handler(){this.user&&(this.userSecurities=this.user)}}},created(){this.getUsers()},methods:{handleRefresh(e){this.$emit("refresh",e)},reset(){this.editSecurity={}},add(){this.modes="ADD",this.visible=!0},edit(e){this.editSecurity=this.userSecurities.find(t=>t.id===e),this.modes="EDIT",this.visible=!0},searchRow(e){this.securityData=this.user,this.userSecurities=e?this.securityData.filter(t=>t.userName.toLowerCase().includes(e.toLowerCase())):this.securityData},async getUsers(){this.userList=[];const{error:e,payload:t}=await F["s"].getUserList();e?this.$alert.error("Error fetching users"):this.userList=t&&t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))},async deleteSecurity(e){const{error:t}=await F["p"].deleteRepositorySecurity(e);t?this.$alert.error(t):(this.$alert.success("Folder security deleted succesfully"),this.handleRefresh(this.repositoryId))}}},ie=te,se=(i("967e"),i("067e"),Object(f["a"])(ie,j,U,!1,null,"8021ca6a",null)),re=se.exports,oe=i("36af"),ae=function(){var e=this,t=e._self._c;return t("FormSection",e._g({staticClass:"assignRule",attrs:{icon:e.isActive?"mdi-account":"mdi-account-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Apply for users & groups")]},proxy:!0}])},e.$listeners),[t("Security",{attrs:{"repository-id":e.repositoryId,mode:e.modes,"file-security":e.editSecurity,columns:e.fields},on:{refresh:e.handleRefresh,reset:e.reset},model:{value:e.rules,callback:function(t){e.rules=t},expression:"rules"}}),t("div",{attrs:{id:"item-list"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 q-mb-md"},[t("div",{staticClass:"row",staticStyle:{float:"right"}},[t("ExpandableSearch",{staticClass:"q-mr-sm col-auto",on:{search:e.searchRow}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"col-auto",attrs:{"is-flat":"","no-border":"",icon:"eva-refresh"},on:{click:e.handleRefresh}}),t("BaseButton",{staticClass:"q-ml-md col-auto",attrs:{icon:"eva-plus",label:"Add Rules/Conditions"},on:{click:function(t){return e.add()}}})],1)]),e.securities.length?[t("div",{staticClass:"col-12"},[t("BaseScrollbar",{staticClass:"q-pb-sm",staticStyle:{"max-height":"320px"}},[t("table",[t("thead",[t("tr",[t("th",{staticClass:"action"}),t("th",[e._v("Rule Name")]),t("th",[e._v("Visibility")]),t("th",[e._v("users")]),t("th",[e._v("groups")]),t("th",{staticClass:"action"})])]),t("tbody",e._l(e.securities,(function(i){return t("tr",{key:i.id},[t("td",{staticStyle:{width:"5px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:secondary.left",value:"edit rule",expression:"'edit rule'",arg:"secondary",modifiers:{left:!0}}],attrs:{"is-flat":"",color:"secondary",icon:"eva-edit-outline","no-border":""},on:{click:function(t){return e.edit(i.id)}}})],1),t("td",[e._v(e._s(i.name))]),t("td",{staticStyle:{width:"5px"}},[e._v(e._s(i.visibility))]),t("td",{staticStyle:{width:"5px"}},[e._v(e._s(i.userId_Array.length))]),t("td",{staticStyle:{width:"5px"}},[e._v(e._s(i.groupId_Array.length))]),t("td",{staticStyle:{width:"5px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.right",value:"delete rule",expression:"'delete rule'",arg:"red",modifiers:{right:!0}}],attrs:{"is-flat":"",color:"red",icon:"eva-trash-2-outline","no-border":""},on:{click:function(t){return e.deleteDocumentSecurity(i.id)}}})],1)])})),0)])])],1)]:[t("div",{staticClass:"q-ma-xl text-bold"},[e._v(" No rules were found to protect your folder or document. Please add a rule to ensure the security of your content. ")])]],2)])],1)},ne=[],le=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,"has-footer":"","no-padding":"",width:"880px"},on:{input:e.closeSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.name)+" Rules / Conditions ")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"row",attrs:{id:"tab-settings"}},[t("div",{staticClass:"content"},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[t("div",{staticClass:"q-my-lg text-bold"},[e._v(" Define rules or conditions for the folder or document security ")]),"CONDITIONS"===e.activeTab?[t("ValidationProvider",{attrs:{name:"rule name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-mb-lg",attrs:{label:"rule name","is-mandatory":"",error:i[0]},model:{value:e.security.name,callback:function(t){e.$set(e.security,"name",t)},expression:"security.name"}})]}}],null,!1,1984488265)}),e.nameError?[t("div",{staticClass:"q-mb-lg text-red"},[e._v(" Rule name should not be empty ")])]:e._e(),e._l(e.security.filterBy,(function(i,s){return[t("div",{key:i.id,staticClass:"filter-group"},[t("div",{staticClass:"header"},[t("div",{staticClass:"label q-mr-md"},[e._v("Criteria")]),t("div",{staticClass:"label q-mr-md"},[e._v("Condition")]),t("div",{staticClass:"label q-mr-sm"},[e._v("Value")]),t("BaseActionButton",{attrs:{"is-flat":"",color:"secondary",icon:"eva-plus","no-border":""},on:{click:function(t){return e.addFilter(s)}}})],1),t("BaseSeparator",{staticClass:"q-mb-md",attrs:{"has-inset":""}}),e._l(i.filters,(function(i,r){return t("ValidationObserver",{key:i.id,ref:"form",refInFor:!0,staticClass:"filter"},[t("ValidationProvider",{key:i.id,staticClass:"col q-mr-md",attrs:{name:"criteria",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:o}){return[t("SelectField",{attrs:{"is-mandatory":"","is-searchable":!0,options:e._columns,error:o[0]},on:{input:function(t){return e.applyDataType(s,r,i.criteria)}},model:{value:i.criteria,callback:function(t){e.$set(i,"criteria",t)},expression:"filter.criteria"}})]}}],null,!0)}),t("ValidationProvider",{staticClass:"col q-mr-md",attrs:{name:"condition",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{"is-mandatory":"","is-searchable":!0,options:e.conditions(i.criteria),error:s[0]},model:{value:i.condition,callback:function(t){e.$set(i,"condition",t)},expression:"filter.condition"}})]}}],null,!0)}),"SHORT_TEXT"===i.dataType||"BARCODE"===i.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"NUMBER"===i.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("NumberField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"DATE"===i.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"TIME"===i.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TimeField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"SINGLE_SELECT"===i.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[e.checkOptions(i.criteria)?[t("AsyncMultiSelectField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0],"api-path":e.apiPath,"column-name":i.criteria,"new-option":""},model:{value:i.arrayValue,callback:function(t){e.$set(i,"arrayValue",t)},expression:"filter.arrayValue"}}),e._e()]:[e._e(),t("MultiSelectField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),"is-searchable":!0,options:e.getOptions(i.criteria),error:s[0],"new-option":""},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]]}}],null,!0)}):t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}),t("div",{staticClass:"remove-filter"},[t("BaseActionButton",{attrs:{"is-flat":"",color:"red","no-border":"",icon:"eva-close-outline"},on:{click:function(t){return e.removeFilter(s,r)}}})],1)],1)})),t("BaseSeparator",{attrs:{"has-inset":""}}),t("div",{staticClass:"row"},[t("Action",{staticClass:"col",attrs:{icon:"eva-plus-outline",label:"Add Condition"},on:{click:function(t){return e.addFilterGroup(s+1)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),t("Action",{staticClass:"col",attrs:{icon:"eva-trash-2-outline",label:"Delete Condition"},on:{click:function(t){return e.removeFilterGroup(s)}}})],1)],2),s!==e.security.filterBy.length-1?t("div",{key:s,staticClass:"row justify-center"},[t("Toggle",{staticClass:"q-my-md",attrs:{options:e.groupConditions},on:{input:e.groupCondition},model:{value:i.groupCondition,callback:function(t){e.$set(i,"groupCondition",t)},expression:"group.groupCondition"}})],1):e._e()]}))]:e._e(),"SECURITY"===e.activeTab?[t("MultiSelectField",{staticClass:"q-mt-lg",attrs:{label:"users","is-mandatory":"",options:e.userList},model:{value:e.security.userId_Array,callback:function(t){e.$set(e.security,"userId_Array",t)},expression:"security.userId_Array"}}),t("MultiSelectField",{staticClass:"q-mt-lg",attrs:{label:"groups","is-mandatory":"",options:e.groupList},model:{value:e.security.groupId_Array,callback:function(t){e.$set(e.security,"groupId_Array",t)},expression:"security.groupId_Array"}}),e.user_grpError?[t("div",{staticClass:"q-mt-lg text-red"},[e._v(" User or Group list should not be empty ")])]:e._e(),t("SingleChoiceField",{staticClass:"q-mt-lg",attrs:{"is-mandatory":"",label:"Visibility","options-per-line":1,options:e.options},model:{value:e.security.visibility,callback:function(t){e.$set(e.security,"visibility",t)},expression:"security.visibility"}}),e.visibilityError?[t("div",{staticClass:"q-mt-lg text-red"},[e._v(" Visibility should not be empty ")])]:e._e()]:e._e()],2)],1),t("div",{staticClass:"tabs"},e._l(e.tabs,(function(i){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"q-mb-md",attrs:{"is-flat":e.activeTab!==i.value,icon:i.icon,color:e.activeTab===i.value?"primary":"gray"},on:{click:function(t){e.activeTab=i.value}}})})),1)])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear",disabled:e.fileSecurity.length},on:{click:function(t){return e.clearFilter(!0)}}}),t("BaseButton",{attrs:{label:e.label},on:{click:function(t){"ADD"===e.mode?e.apply():e.save()}}})]},proxy:!0}])})},de=[],ce=(i("13d5"),i("874f")),ue=i("9996"),he=i("9234"),pe=i("94f5"),fe=i("670a"),ye=i("970a"),me=i("ad54"),ve=i("53c1"),be=i("cedb"),ge=i("0c21"),Se=i("70a9"),_e={name:"Security",components:{ValidationObserver:n["a"],ValidationProvider:n["b"],Sheet:C["a"],TextField:u["a"],SelectField:k["a"],MultiSelectField:x["a"],SingleChoiceField:he["a"],Action:pe["a"],Toggle:fe["a"],NumberField:me["a"],DateField:ve["a"],TimeField:be["a"],AsyncSelectField:ge["a"],AsyncMultiSelectField:Se["a"]},props:{repositoryId:{type:String,default:""},mode:{type:String,default:""},columns:{type:Array,required:!0},value:{type:Boolean,default:!1},fileSecurity:{type:Object,default:()=>{}}},data(){return{groupConditions:["AND","OR"],userList:[],groupList:[],options:[{id:this.$nano.id(),label:"Show only",value:"SHOW"},{id:this.$nano.id(),label:"Hide only",value:"HIDE"}],activeTab:"CONDITIONS",tabs:[{id:this.$nano.id(),label:"conditions",value:"CONDITIONS",icon:"mdi-tune"},{id:this.$nano.id(),label:"security",value:"SECURITY",icon:"mdi-shield-account-outline"}],security:{id:0,repositoryId:this.repositoryId,name:"",conditions:[],filterBy:[],userId_Array:[],groupId_Array:[],visibility:""},name:"",nameError:!1,user_grpError:!1,visibilityError:!1}},computed:{_columns(){var e=this.columns.reduce((e,t)=>("isFilter"in t?t.isFilter&&e.push({id:t.id,label:t.name,value:t.name,dataType:t.dataType,levelId:t.level,icon:this.getIcon(t.level),color:this.getColor(t.level)}):e.push({id:t.id,label:t.name,value:t.name,dataType:t.dataType,levelId:t.level,icon:this.getIcon(t.level),color:this.getColor(t.level)}),e),[]);return e},apiPath(){return`/repository/${this.repositoryId}/uniqueColumnValues`},label(){return"ADD"===this.mode?"Apply":"Save"}},watch:{value:{deep:!0,handler(){if(this.value)if(0!==Object.keys(this.fileSecurity).length){this.security=this.fileSecurity;for(let e=0;e<this.security.filterBy.length;e++){const t=this.security.filterBy[e];for(let i=0;i<t.filters.length;i++){const s=t.filters[i],r=s.criteria,o=s.value;this.applyDataType(e,i,r,o)}}this.security.filterBy.length>1?this.security.filterBy[0].groupCondition=this.security.filterBy[1].groupCondition:this.security.filterBy[0].groupCondition=""}else this.security.filterBy=[],this.addFilterGroup(0)}},mode:{immediate:!0,handler(){"ADD"===this.mode?this.name="Add":"EDIT"===this.mode&&(this.name="Edit")}}},mounted(){this.getUserList(),this.getGroupList()},methods:{conditions(e){if(!e)return[];const t=this.columns.find(t=>t.name===e);return t?Object(ye["a"])(t.dataType).map(e=>({id:this.$nano.id(),label:`${Object(ce["a"])(Object(ue["a"])(e.split(" ")[0]))} ${e.split(" ")[1]?e.split(" ")[1]:""}`,value:e.split(" ")[0]})):void 0},addFilterGroup(e=0){this.security.filterBy.splice(e,0,{id:this.$nano.id(),filters:[{id:this.$nano.id(),criteria:"",condition:"",value:"",levelId:""}],groupCondition:(this.security.filterBy.length,"")})},removeFilterGroup(e){e>0?this.security.filterBy.splice(e,1):this.$emit("input",!1)},addFilter(e){this.security.filterBy[e].filters.push({id:this.$nano.id(),criteria:"",condition:"",value:"",levelId:""})},removeFilter(e,t){this.security.filterBy[e].filters.splice(t,1)},applyDataType(e,t,i,s){this.security.filterBy[e].filters[t].value="",this.security.filterBy[e].filters[t].condition="",this.security.filterBy[e].filters[t].condition="IS_EQUALS_TO",this.security.filterBy[e].filters[t].dataType="";let r=this._columns.find(e=>e.label===i);r&&(this.security.filterBy[e].filters[t].dataType=r.dataType,this.security.filterBy[e].filters[t].levelId=r.levelId,s&&(this.security.filterBy[e].filters[t].value=s))},clearFilter(e){this.security.name="",this.security.filterBy=[],this.security.conditions=[],this.security.userId_Array=[],this.security.groupId_Array=[],this.security.visibility="",this.activeTab="CONDITIONS",e&&this.addFilterGroup()},groupCondition(e){this.security.filterBy[this.security.filterBy.length-1].groupCondition=e},checkOptions(e){let t=this.columns.find(t=>t.name===e);return!(!t||!t.apiLoad)},getOptions(e){return"createdBy"===e||"modifiedBy"===e||"owner"===e||"coordinator"===e?this.userList:[]},getIcon(e){let t=this.columns,i=0,s="";for(const r of t)r.level>i&&(i=r.level);return s=0!==e&&e<i?"mdi-folder":e==i?"eva-file-text-outline":"mdi-label-outline",s},getColor(e){let t=this.columns,i=0,s="";for(const r of t)r.level>i&&(i=r.level);return 0!==e&&e<i?s="amber":e==i&&(s="secondary"),s},closeSheet(){this.$emit("input",!1),this.clearFilter(!1),this.$emit("refresh",this.repositoryId),this.$emit("reset")},async getUserList(){const{error:e,payload:t}=await F["s"].getUserList();e?this.$alert.error("Error fetching users"):this.userList=t&&t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))},async getGroupList(){const{error:e,payload:t}=await F["i"].getGroupList();e?this.$alert.error("Error fetching groups"):this.groupList=t&&t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))},async apply(){let e=0;if(this.$refs.form){for(const t of this.$refs.form){const i=await t.validate();i||e++}if(!e)if(this.security.filterBy[0].groupCondition="",this.security.filterBy.length&&(this.security.filterBy[0].filters.length||(this.security.filterBy=[]),this.security.filterBy.forEach(e=>{e.filters.length&&e.filters.forEach(e=>{"SINGLE_SELECT"===e.dataType&&(e.value=JSON.stringify(e.arrayValue))})})),this.security.conditions=this.security.filterBy,this.security.name&&(this.security.userId_Array.length||this.security.groupId_Array.length)&&this.security.visibility){const{error:e}=await F["p"].insertDocumentSecurity(this.security);if(e)return void this.$alert.error(e);this.closeSheet(),this.$alert.success("New document security added succesfully"),this.$emit("refresh",this.repositoryId),this.clearFilter(!1)}else this.security.name?this.security.userId_Array.length||this.security.groupId_Array.length?this.security.visibility||(this.activeTab="SECURITY",this.user_grpError=!1,this.visibilityError=!0):(this.activeTab="SECURITY",this.nameError=!1,this.user_grpError=!0):(this.activeTab="CONDITIONS",this.nameError=!0)}},async save(){let e=0;if(this.$refs.form){for(const t of this.$refs.form){const i=await t.validate();i||e++}if(!e)if(this.security.filterBy[0].groupCondition="",this.security.filterBy.length&&(this.security.filterBy[0].filters.length||(this.security.filterBy=[])),this.security.filterBy.forEach(e=>{e.filters.length&&e.filters.forEach(e=>{"SINGLE_SELECT"===e.dataType&&(e.value=JSON.stringify(e.arrayValue))})}),this.security.conditions=this.security.filterBy,this.security.name&&(this.security.userId_Array.length||this.security.groupId_Array.length)&&this.security.visibility){let e=this.security.id;const{error:t}=await F["p"].updateDocumentSecurity(e,this.security);if(t)return void this.$alert.error(t);this.closeSheet(),this.$alert.success("Document security updated succesfully"),this.$emit("refresh",this.repositoryId),this.clearFilter(!1)}else this.security.name?this.security.userId_Array.length||this.security.groupId_Array.length?this.security.visibility||(this.activeTab="SECURITY",this.user_grpError=!1,this.visibilityError=!0):(this.activeTab="SECURITY",this.nameError=!1,this.user_grpError=!0):(this.activeTab="CONDITIONS",this.nameError=!0)}}}},Ce=_e,Ie=(i("2192"),Object(f["a"])(Ce,le,de,!1,null,"d0c6fdc0",null)),Te=Ie.exports,ke={name:"RulesAndConditions",components:{FormSection:c["a"],Security:Te,ExpandableSearch:R["a"]},props:{repositoryId:{type:String,default:""},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"},fields:{type:Array,required:!0},rule:{type:Array,required:!0}},data(){return{rules:!1,securities:[],editSecurity:{},modes:"",securityData:[]}},watch:{rule:{immediate:!0,deep:!0,handler(){this.securities=[],this.rule.length&&(this.securities=this.rule)}}},mounted(){},methods:{handleRefresh(e){this.$emit("refresh",e)},reset(){this.editSecurity={}},add(){this.rules=!0,this.modes="ADD"},searchRow(e){this.securityData=this.rule,this.securities=e?this.securityData.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())):this.securityData},edit(e){this.editSecurity=this.securities.find(t=>t.id===e),this.editSecurity.filterBy.forEach(e=>{e.filters.length&&e.filters.forEach(e=>{if("SINGLE_SELECT"===e.dataType){console.log(e.value);try{e.arrayValue=JSON.parse(e.value)}catch(t){e.arrayValue=[],e.arrayValue.push(e.value)}}})}),this.editSecurity,this.rules=!0,this.modes="EDIT"},async deleteDocumentSecurity(e){let t={isDeleted:!0};const{error:i}=await F["p"].updateDocumentSecurity(e,t);i?this.$alert.error(i):(this.$alert.success("Document security updated succesfully"),this.handleRefresh(this.repositoryId))}}},xe=ke,Be=(i("1c29"),i("1b7e"),Object(f["a"])(xe,ae,ne,!1,null,"d0210dc4",null)),Oe=Be.exports,$e=function(){var e=this,t=e._self._c;return t("FormSection",e._g({staticClass:"assignRetention",attrs:{icon:e.isActive?"mdi-account":"mdi-account-outline","is-active":e.isActive},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Apply Retention")]},proxy:!0}])},e.$listeners),[t("RetentionSettings",{attrs:{"repository-id":e.repositoryId,mode:e.modes,"retention-security":e.editRetention,columns:e.fields},on:{refresh:e.handleRefresh,reset:e.reset},model:{value:e.retentionSettings,callback:function(t){e.retentionSettings=t},expression:"retentionSettings"}}),t("div",{attrs:{id:"item-list"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 q-mb-md"},[t("div",{staticClass:"row",staticStyle:{float:"right"}},[t("ExpandableSearch",{staticClass:"q-mr-sm col-auto",on:{search:e.searchRow}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"col-auto",attrs:{"is-flat":"","no-border":"",icon:"eva-refresh"},on:{click:e.handleRefresh}}),t("BaseButton",{staticClass:"q-ml-md col-auto",attrs:{icon:"eva-plus",label:"Add Retentions"},on:{click:function(t){return e.add()}}})],1)]),e.retentionList.length?[t("div",{staticClass:"col-12"},[t("BaseScrollbar",{staticClass:"q-pb-sm",staticStyle:{"max-height":"320px"}},[t("table",[t("thead",[t("tr",[t("th",{staticClass:"action"}),t("th",[e._v("Rule Name")]),t("th",[e._v("Field")]),t("th",[e._v("Action")]),t("th",{staticClass:"action"})])]),t("tbody",e._l(e.retentionList,(function(i){return t("tr",{key:i.id},[t("td",[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:secondary.left",value:"edit rule",expression:"'edit rule'",arg:"secondary",modifiers:{left:!0}}],attrs:{"is-flat":"",color:"secondary",icon:"eva-edit-outline","no-border":""},on:{click:function(t){return e.edit(i.id)}}})],1),t("td",[e._v(e._s(i.name))]),t("td",[e._v(e._s(e.getField(i.fieldId)))]),t("td",[e._v(e._s(i.action))]),t("td",[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.right",value:"delete rule",expression:"'delete rule'",arg:"red",modifiers:{right:!0}}],attrs:{"is-flat":"",color:"red",icon:"eva-trash-2-outline","no-border":""},on:{click:function(t){return e.deleteRetention(i.id)}}})],1)])})),0)])])],1)]:[t("div",{staticClass:"q-ma-xl text-bold"},[e._v(" No retentions were found to protect your document. Please add a retention to ensure the security of your content. ")])]],2)])],1)},we=[],Fe=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,"has-footer":"","no-padding":"",width:"880px"},on:{input:e.closeSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.name)+" Retention ")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"row",attrs:{id:"tab-settings"}},[t("div",{staticClass:"content"},[t("div",{staticClass:"text-bold q-mb-md"},[e._v(" Define conditions for the document retention ")]),t("div",{directives:[{name:"show",rawName:"v-show",value:"CONDITIONS"===e.activeTab,expression:"activeTab === 'CONDITIONS'"}]},[t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"Rule name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-mb-md",attrs:{label:"Rule name","is-mandatory":"",error:i[0]},model:{value:e.security.name,callback:function(t){e.$set(e.security,"name",t)},expression:"security.name"}})]}}])})],1),t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"Retention field",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{staticClass:"q-mb-md",attrs:{label:"Retention Field","is-mandatory":"",options:e.getDateField,error:i[0]},model:{value:e.security.fieldId,callback:function(t){e.$set(e.security,"fieldId",t)},expression:"security.fieldId"}})]}}])})],1)]),t("SingleChoiceField",{staticClass:"q-mb-md",attrs:{"is-mandatory":"",label:"Set Notification Date","options-per-line":2,options:e.notificationDateOptions},model:{value:e.notificationDate,callback:function(t){e.notificationDate=t},expression:"notificationDate"}}),"field_date"===e.notificationDate?[t("FormFieldLabel",{staticClass:"q-mb-md",attrs:{label:e.getFieldDateLabel,transform:""}}),t("BaseSeparator",{staticClass:"q-mb-md"})]:e._e(),"future_date"===e.notificationDate?t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12"},[t("FormFieldLabel",{staticClass:"q-mb-md",attrs:{label:"Allows to schedule a future expiry date\n              based on an existing date, which prompts automatic reminders\n              when due",transform:""}}),t("BaseSeparator")],1),t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"Duration",rules:e.validateUploadDateRules},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("CounterField",{staticClass:"q-mb-md",attrs:{label:"Duration","is-mandatory":e.hasUploadDate,error:i[0]},model:{value:e.security.duration,callback:function(t){e.$set(e.security,"duration",t)},expression:"security.duration"}})]}}],null,!1,2307864289)})],1),t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"Duration Type",rules:e.validateUploadDateRules},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{staticClass:"q-mb-md",attrs:{label:"Duration Type","is-mandatory":e.hasUploadDate,options:e.durationTypes,error:i[0]},model:{value:e.security.durationType,callback:function(t){e.$set(e.security,"durationType",t)},expression:"security.durationType"}})]}}],null,!1,3013201646)})],1)]):e._e()],2),e._l(e.security.filterBy,(function(i,s){return[t("div",{key:i.id,staticClass:"filter-group"},[t("div",{staticClass:"header"},[t("div",{staticClass:"label q-mr-md"},[e._v("Criteria")]),t("div",{staticClass:"label q-mr-md"},[e._v("Condition")]),t("div",{staticClass:"label q-mr-sm"},[e._v("Value")]),t("BaseActionButton",{attrs:{"is-flat":"",color:"secondary",icon:"eva-plus","no-border":""},on:{click:function(t){return e.addFilter(s)}}})],1),t("BaseSeparator",{staticClass:"q-mb-md",attrs:{"has-inset":""}}),e._l(i.filters,(function(i,r){return t("ValidationObserver",{key:i.id,ref:"condition",refInFor:!0,staticClass:"filter"},[t("ValidationProvider",{key:i.id,staticClass:"col q-mr-md",attrs:{name:"criteria",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:o}){return[t("SelectField",{attrs:{"is-mandatory":"","is-searchable":!0,options:e._columns,error:o[0]},on:{input:function(t){return e.applyDataType(s,r,i.criteria)}},model:{value:i.criteria,callback:function(t){e.$set(i,"criteria",t)},expression:"filter.criteria"}})]}}],null,!0)}),t("ValidationProvider",{staticClass:"col q-mr-md",attrs:{name:"condition",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{"is-mandatory":"","is-searchable":!0,options:e.conditions(i.criteria),error:s[0]},model:{value:i.condition,callback:function(t){e.$set(i,"condition",t)},expression:"filter.condition"}})]}}],null,!0)}),"SHORT_TEXT"===i.dataType||"BARCODE"===i.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"NUMBER"===i.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("NumberField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"DATE"===i.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"TIME"===i.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TimeField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"SINGLE_SELECT"===i.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[e.checkOptions(i.criteria)?[t("AsyncMultiSelectField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0],"api-path":e.apiPath,"column-name":i.criteria,"new-option":""},model:{value:i.arrayValue,callback:function(t){e.$set(i,"arrayValue",t)},expression:"filter.arrayValue"}}),e._e()]:[e._e(),t("MultiSelectField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),"is-searchable":!0,options:e.getOptions(i.criteria),error:s[0],"new-option":""},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]]}}],null,!0)}):t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}),t("div",{staticClass:"remove-filter"},[t("BaseActionButton",{attrs:{"is-flat":"",color:"red","no-border":"",icon:"eva-close-outline"},on:{click:function(t){return e.removeFilter(s,r)}}})],1)],1)})),t("BaseSeparator",{attrs:{"has-inset":""}}),t("div",{staticClass:"row"},[t("Action",{staticClass:"col",attrs:{icon:"eva-plus-outline",label:"Add Condition"},on:{click:function(t){return e.addFilterGroup(s+1)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),t("Action",{staticClass:"col",attrs:{icon:"eva-trash-2-outline",label:"Delete Condition"},on:{click:function(t){return e.removeFilterGroup(s)}}})],1)],2),s!==e.security.filterBy.length-1?t("div",{key:s,staticClass:"row justify-center"},[t("Toggle",{staticClass:"q-my-md",attrs:{options:e.groupConditions},on:{input:e.groupCondition},model:{value:i.groupCondition,callback:function(t){e.$set(i,"groupCondition",t)},expression:"group.groupCondition"}})],1):e._e()]}))],2),t("div",{directives:[{name:"show",rawName:"v-show",value:"NOTIFICATION"===e.activeTab,expression:"activeTab === 'NOTIFICATION'"}]},[t("ValidationObserver",{ref:"security"},[t("ValidationProvider",{attrs:{name:"Retention Action",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{staticClass:"q-mb-md",attrs:{label:"Retention Action","is-mandatory":"",options:e.retentionActions,error:i[0]},model:{value:e.security.action,callback:function(t){e.$set(e.security,"action",t)},expression:"security.action"}})]}}])}),t("FormFieldLabel",{attrs:{label:"Pre-Expiration Notification for file Retention"}}),t("BaseSeparator",{staticClass:"q-mb-md"}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{label:"Notify via Email",description:""},model:{value:e.notify,callback:function(t){e.notify=t},expression:"notify"}}),e.notify?[t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Before Counts",rules:{required:e.notify}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("CounterField",{attrs:{label:"Before the retention policy","is-mandatory":e.notify,error:i[0]},model:{value:e.security.notification.duration,callback:function(t){e.$set(e.security.notification,"duration",t)},expression:"security.notification.duration"}})]}}],null,!1,75832657)})],1),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"Duration Type",rules:{required:e.notify}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{attrs:{label:"Duration Type","is-mandatory":e.notify,options:e.durationTypes,error:i[0]},model:{value:e.security.notification.durationType,callback:function(t){e.$set(e.security.notification,"durationType",t)},expression:"security.notification.durationType"}})]}}],null,!1,3208105172)})],1)]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"user",rules:{required:0===e.security.notification.group.length}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("MultiSelectField",{staticClass:"q-mt-md",attrs:{label:"users",options:e.userList,error:i[0]},model:{value:e.security.notification.user,callback:function(t){e.$set(e.security.notification,"user",t)},expression:"security.notification.user"}})]}}],null,!1,940633116)})],1),t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"group",rules:{required:0===e.security.notification.user.length}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("MultiSelectField",{staticClass:"q-mt-md",attrs:{label:"groups",options:e.groupList,error:i[0]},model:{value:e.security.notification.group,callback:function(t){e.$set(e.security.notification,"group",t)},expression:"security.notification.group"}})]}}],null,!1,2752232402)})],1)]),t("FormFieldLabel",{staticClass:"q-mt-lg",attrs:{label:"Mail Subject"}}),t("TextEditor",{staticClass:"mail-class",attrs:{"hide-tool-bar":!1,"form-columns":e.fieldColumns},model:{value:e.security.notification.mailSubject,callback:function(t){e.$set(e.security.notification,"mailSubject",t)},expression:"security.notification.mailSubject"}}),t("FormFieldLabel",{staticClass:"q-my-md",attrs:{label:"Mail Content"}}),t("TextEditor",{staticClass:"mail-class q-pb-md",attrs:{"form-columns":e.fieldColumns},model:{value:e.security.notification.mailBody,callback:function(t){e.$set(e.security.notification,"mailBody",t)},expression:"security.notification.mailBody"}})]:e._e()],2)],1)]),t("div",{staticClass:"tabs"},e._l(e.tabs,(function(i){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"q-mb-md",attrs:{"is-flat":e.activeTab!==i.value,icon:i.icon,color:e.activeTab===i.value?"primary":"gray"},on:{click:function(t){e.activeTab=i.value}}})})),1)])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear",disabled:e.retentionSecurity.length},on:{click:function(t){return e.clearFilter(!0)}}}),t("BaseButton",{attrs:{label:e.label},on:{click:function(t){"ADD"===e.mode?e.apply():e.save()}}})]},proxy:!0}])})},Ee=[],Ae=i("cc77"),Ne=i("3445"),De=i("64ab"),Re={name:"RetentionSettings",components:{ValidationObserver:n["a"],ValidationProvider:n["b"],Sheet:C["a"],TextField:u["a"],SelectField:k["a"],MultiSelectField:x["a"],SingleChoiceField:he["a"],Action:pe["a"],Toggle:fe["a"],NumberField:me["a"],DateField:ve["a"],TimeField:be["a"],AsyncSelectField:ge["a"],AsyncMultiSelectField:Se["a"],CounterField:Ae["a"],CheckboxField:g["a"],FormFieldLabel:Ne["a"],TextEditor:De["a"]},props:{repositoryId:{type:String,default:""},mode:{type:String,default:""},columns:{type:Array,required:!0},value:{type:Boolean,default:!1},retentionSecurity:{type:Object,default:()=>{}}},data(){return{groupConditions:["AND","OR"],userList:[],groupList:[],options:[{id:this.$nano.id(),label:"Show only",value:"SHOW"},{id:this.$nano.id(),label:"Hide only",value:"HIDE"}],activeTab:"CONDITIONS",tabs:[{id:this.$nano.id(),label:"conditions",value:"CONDITIONS",icon:"mdi-tune"},{id:this.$nano.id(),label:"notification",value:"NOTIFICATION",icon:"mdi-bell-outline"}],security:{id:0,repositoryId:this.repositoryId,itemId:0,name:"",fieldId:"",duration:0,durationType:"Day",filterBy:[],conditionJson:[],action:"",actionDate:"",notification:{duration:0,durationType:"Day",user:[],group:[],mailSubject:{text:"",content:""},mailBody:{text:"",content:""}}},name:"",nameError:!1,user_grpError:!1,visibilityError:!1,durationTypes:[{id:this.$nano.id(),label:"Year",value:"Year"},{id:this.$nano.id(),label:"Month",value:"Month"},{id:this.$nano.id(),label:"Day",value:"Day"}],retentionActions:[{id:this.$nano.id(),label:"No Action",value:"NO_ACTION"},{id:this.$nano.id(),label:"Hide",value:"HIDE"},{id:this.$nano.id(),label:"Move to Trash",value:"TRASH"},{id:this.$nano.id(),label:"Permanent Delete",value:"DELETE"}],notify:!1,notificationDateOptions:[{id:this.$nano.id(),label:"Use Field Date",value:"field_date"},{id:this.$nano.id(),label:"Set Future Date from Field Date",value:"future_date"}],notificationDate:"field_date"}},computed:{_columns(){var e=this.columns.reduce((e,t)=>("isFilter"in t?t.isFilter&&e.push({id:t.id,label:t.name,value:t.name,dataType:t.dataType,levelId:t.level,icon:this.getIcon(t.level),color:this.getColor(t.level)}):e.push({id:t.id,label:t.name,value:t.name,dataType:t.dataType,levelId:t.level,icon:this.getIcon(t.level),color:this.getColor(t.level)}),e),[]);return e},apiPath(){return`/repository/${this.repositoryId}/uniqueColumnValues`},label(){return"ADD"===this.mode?"Apply":"Save"},getDateField(){let e=[{id:this.$nano.id(),label:"Uploaded Date",value:"0"}];return this.columns.forEach(t=>{"DATE"===t.dataType&&e.push({id:this.$nano.id(),label:t.name,value:t.id})}),e},hasUploadDate(){return!this.security.fieldId||"0"===this.security.fieldId},validateUploadDateRules(){let e={required:!1};return this.hasUploadDate?{required:!0}:e},getFieldDateLabel(){if(this.security.fieldId){let e=this.getDateField.find(e=>e.value===this.security.fieldId);return`Set a document's expiry based on\n                    an <${e.label}>, which triggers auto-reminders when due`}return""},fieldColumns(){let e=[{id:this.$nano.id(),label:"Uploaded Date",value:"#UPLOADEDDATE#",display:"",color:"#643094",hasDefault:!0},{id:this.$nano.id(),label:"Uploaded By",value:"#UPLOADBY#",display:"",color:"#643094",hasDefault:!0}],t=this.columns.map(e=>({id:e.id,label:e.name,value:e.id,hasDefault:!1}));return[...e,...t]}},watch:{value:{deep:!0,handler(){if(this.value)if(0!==Object.keys(this.retentionSecurity).length){this.security.id=this.retentionSecurity.id,this.security.name=this.retentionSecurity.name,this.security.fieldId=this.retentionSecurity.fieldId?this.retentionSecurity.fieldId:"0",this.security.duration=this.retentionSecurity.duration,this.security.durationType=this.retentionSecurity.durationType,this.security.conditionJson=this.retentionSecurity.conditionJson,this.security.duration&&(this.notificationDate="future_date"),this.security.filterBy=JSON.parse(this.retentionSecurity.conditionJson),this.security.action=this.retentionSecurity.action,this.retentionSecurity.notifyJson&&(this.security.notification=JSON.parse(this.retentionSecurity.notifyJson),this.notify=!0),this.security.filterBy.forEach(e=>{e.filters.length&&e.filters.forEach(e=>{"SINGLE_SELECT"===e.dataType&&(e.arrayValue=JSON.parse(e.value))})});for(let e=0;e<this.security.filterBy.length;e++){const t=this.security.filterBy[e];for(let i=0;i<t.filters.length;i++){const s=t.filters[i],r=s.criteria,o=s.value;this.applyDataType(e,i,r,o)}}this.security.filterBy.length>1?this.security.filterBy[0].groupCondition=this.security.filterBy[1].groupCondition:this.security.filterBy[0].groupCondition=""}else this.security.filterBy=[],this.addFilterGroup(0)}},mode:{immediate:!0,handler(){"ADD"===this.mode?this.name="Add":"EDIT"===this.mode&&(this.name="Edit")}}},mounted(){this.getUserList(),this.getGroupList()},methods:{conditions(e){if(!e)return[];const t=this.columns.find(t=>t.name===e);return t?Object(ye["a"])(t.dataType).map(e=>({id:this.$nano.id(),label:`${Object(ce["a"])(Object(ue["a"])(e.split(" ")[0]))} ${e.split(" ")[1]?e.split(" ")[1]:""}`,value:e.split(" ")[0]})):void 0},addFilterGroup(e=0){this.security.filterBy.splice(e,0,{id:this.$nano.id(),filters:[{id:this.$nano.id(),criteria:"",condition:"",value:"",levelId:""}],groupCondition:(this.security.filterBy.length,"")})},removeFilterGroup(e){e>0?this.security.filterBy.splice(e,1):this.$emit("input",!1)},addFilter(e){this.security.filterBy[e].filters.push({id:this.$nano.id(),criteria:"",condition:"",value:"",levelId:""})},removeFilter(e,t){this.security.filterBy[e].filters.splice(t,1)},applyDataType(e,t,i,s){this.security.filterBy[e].filters[t].value="",this.security.filterBy[e].filters[t].condition="",this.security.filterBy[e].filters[t].condition="IS_EQUALS_TO",this.security.filterBy[e].filters[t].dataType="";let r=this._columns.find(e=>e.label===i);r&&(this.security.filterBy[e].filters[t].dataType=r.dataType,this.security.filterBy[e].filters[t].levelId=r.levelId,s&&(this.security.filterBy[e].filters[t].value=s))},clearFilter(e){this.security.id=0,this.security.name="",this.security.fieldId="",this.security.duration=0,this.security.durationType="Day",this.security.notificationDate="field_date",this.security.notification={duration:0,durationType:"Day",user:[],group:[],mailSubject:{text:"",content:""},mailBody:{text:"",content:""}},this.security.filterBy=[],this.security.conditionJson=[],this.security.action="",this.notify=!1,this.activeTab="CONDITIONS",e&&this.addFilterGroup()},groupCondition(e){this.security.filterBy[this.security.filterBy.length-1].groupCondition=e},checkOptions(e){let t=this.columns.find(t=>t.name===e);return!(!t||!t.apiLoad)},getOptions(e){return"createdBy"===e||"modifiedBy"===e||"owner"===e||"coordinator"===e?this.userList:[]},getIcon(e){let t=this.columns,i=0,s="";for(const r of t)r.level>i&&(i=r.level);return s=0!==e&&e<i?"mdi-folder":e==i?"eva-file-text-outline":"mdi-label-outline",s},getColor(e){let t=this.columns,i=0,s="";for(const r of t)r.level>i&&(i=r.level);return 0!==e&&e<i?s="amber":e==i&&(s="secondary"),s},closeSheet(){this.$emit("input",!1),this.clearFilter(!1),this.$emit("refresh",this.repositoryId),this.$emit("reset")},async getUserList(){const{error:e,payload:t}=await F["s"].getUserList();e?this.$alert.error("Error fetching users"):this.userList=t&&t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))},async getGroupList(){const{error:e,payload:t}=await F["i"].getGroupList();e?this.$alert.error("Error fetching groups"):this.groupList=t&&t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))},async apply(){"field_date"===this.notificationDate&&(this.security.duration=0,this.security.durationType="Day");const e=await this.$refs.form.validate();if(!e)return;let t=0;for(const r of this.$refs.condition){const e=await r.validate();e||t++}if(t)return;const i=await this.$refs.security.validate();if(!i)return;this.security.filterBy[0].groupCondition="",this.security.filterBy.length&&(this.security.filterBy[0].filters.length||(this.security.filterBy=[]),this.security.filterBy.forEach(e=>{e.filters.length&&e.filters.forEach(e=>{"SINGLE_SELECT"===e.dataType&&(e.value=JSON.stringify(e.arrayValue))})})),this.security.conditionJson=JSON.stringify(this.security.filterBy),this.notify?this.security.notifyJson=JSON.stringify(this.security.notification):this.security.notifyJson="",this.security.fieldId=Number(this.security.fieldId);const{error:s}=await F["p"].addRetention(this.security);s?this.$alert.error(s):(this.$alert.success("New retention added succesfully"),this.closeSheet(),this.$emit("refresh",this.repositoryId))},async save(){const e=await this.$refs.form.validate();if(!e)return;let t=0;for(const r of this.$refs.condition){const e=await r.validate();e||t++}if(t)return;const i=await this.$refs.security.validate();if(!i)return;this.security.filterBy[0].groupCondition="",this.security.filterBy.length&&(this.security.filterBy[0].filters.length||(this.security.filterBy=[])),this.security.filterBy.forEach(e=>{e.filters.length&&e.filters.forEach(e=>{"SINGLE_SELECT"===e.dataType&&(e.value=JSON.stringify(e.arrayValue))})}),this.security.conditionJson=JSON.stringify(this.security.filterBy),this.notify?this.security.notifyJson=JSON.stringify(this.security.notification):this.security.notifyJson="";const{error:s}=await F["p"].updateRetention(this.security.id,this.security);s?this.$alert.error(s):(this.closeSheet(),this.$alert.success("Retention updated succesfully"),this.$emit("refresh",this.repositoryId),this.clearFilter(!1))}}},Pe=Re,qe=(i("d093"),Object(f["a"])(Pe,Fe,Ee,!1,null,"0d5a375c",null)),Le=qe.exports,Me={name:"Retentions",components:{FormSection:c["a"],RetentionSettings:Le,ExpandableSearch:R["a"]},props:{repositoryId:{type:String,default:""},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"},fields:{type:Array,required:!0},retentions:{type:Array,required:!0}},data(){return{retentionSettings:!1,retentionList:[],editRetention:{},modes:"",retentionListData:[]}},watch:{retentions:{immediate:!0,deep:!0,handler(){this.retentionList=[],this.retentions.length&&(this.retentionList=this.retentions)}}},mounted(){},methods:{handleRefresh(e){this.$emit("refresh",e)},reset(){this.editRetention={}},getField(e){if(0===e)return"Uploaded Date";let t=this.fields.find(t=>t.id===e);return t?t.name:""},add(){this.editRetention={},this.retentionSettings=!0,this.modes="ADD"},searchRow(e){this.retentionListData=this.retentions,this.retentionList=e?this.retentionListData.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())):this.retentionListData},edit(e){this.getRetentionById(e)},async deleteRetention(e){let t={isDeleted:!0};const{error:i}=await F["p"].updateRetention(e,t);i?this.$alert.error(i):(this.$alert.success("Retention deleted succesfully"),this.handleRefresh(this.repositoryId))},async getRetentionById(e){const{error:t,payload:i}=await F["p"].getRetention(e);t?this.$alert.error(t):(this.editRetention=i,this.retentionSettings=!0,this.modes="EDIT")}}},je=Me,Ue=(i("f9cb"),i("edc2"),Object(f["a"])(je,$e,we,!1,null,"03c075df",null)),Ye=Ue.exports,Ve={name:"RepositorySecure",components:{ItemBuilder:o["a"],ValidationObserver:n["a"],ActionBar:a["a"],RepositoryDetails:m,AssignGroup:M,AssignUser:re,WorkInProgress:oe["a"],RulesAndConditions:Oe,Retentions:Ye},props:{repositoryId:{type:String,default:""}},data(){return{mode:"Secure",tab:"REPOSITORY_DETAILS",tabs:[{id:this.$nano.id(),label:"folder",value:"REPOSITORY_DETAILS"},{id:this.$nano.id(),label:"rules/conditions",value:"RULES_CONDITIONS"},{id:this.$nano.id(),label:"retentions",value:"RETENTIONS"}],isLoading:!1,workspaceId:"",name:"",fields:[],userSecurity:[],groupSecurity:[],documentSecurity:[],retentions:[]}},computed:{isActiveTab(){return"REPOSITORY_DETAILS"===this.tab||"RULES_CONDITIONS"===this.tab}},watch:{repositoryId:{immediate:!0,handler(){this.repositoryId&&(this.mode="SECURE",this.getRepository(),this.getFolderSecurity(),this.getFileSecurity(),this.getFileRetentions())}}},methods:{closeBuilder(){this.$router.back()},async getRepository(){var e;const{error:t,payload:i}=await F["p"].getRepository(this.repositoryId);t?this.$alert.error(t):(this.workspaceId=(null===(e=i.workspace)||void 0===e?void 0:e.id)||0,this.name=i.name,this.description=i.description,this.fields=i.fields.map(e=>({_id:this.$nano.id(),...e,isFilter:!0,apiLoad:!0})))},async getFolderSecurity(){const{error:e,payload:t}=await F["p"].getRepositorySecurity(this.repositoryId);if(e)return void this.$alert.error(e);if(null===t)return void console.log("No security data available");const i=t.userOptions.map(e=>({id:e.id,userName:e.email,userId:e.userId,options:JSON.parse(e.options)}));this.userSecurity=i;const s=t.groupOptions.map(e=>({id:e.id,groupName:e.groupName,groupId:e.groupId,options:JSON.parse(e.options)}));this.groupSecurity=s},async getFileSecurity(){this.documentSecurity=[];const{error:e,payload:t}=await F["p"].getDocumentSecurity(this.repositoryId);e?this.$alert.error(e):null!==t?this.documentSecurity=t&&t.map(e=>({id:e.id,name:e.name,conditions:JSON.parse(e.conditionJson),filterBy:JSON.parse(e.conditionJson),userId_Array:e.userId_Array,groupId_Array:e.groupId_Array,visibility:e.visibility})):console.log("No security data available")},async getFileRetentions(){this.retentions=[];const{error:e,payload:t}=await F["p"].getRetentions({sortBy:{criteria:"",order:"ASC"},groupBy:"",filterBy:[{filters:[{criteria:"repositoryId",condition:"IS_EQUALS_TO",value:this.repositoryId},{criteria:"itemId",condition:"IS_EQUALS_TO",value:0}],groupCondition:""}],currentPage:1,itemsPerPage:50,mode:"BROWSE"});e?this.$alert.error(e):null!==t?this.retentions=t&&t.map(e=>({id:e.id,name:e.name,action:e.action,fieldId:e.fieldId,durationType:e.durationType,duration:e.duration,conditionJson:JSON.parse(e.conditionJson),filterBy:JSON.parse(e.conditionJson),notifyJson:e.notifyJson})):console.log("No security data available")}}},Ge=Ve,Je=(i("1761"),i("2c91")),He=i("93dc"),Qe=i.n(He),We=Object(f["a"])(Ge,s,r,!1,null,"24ee65e0",null);t["default"]=We.exports;Qe()(We,"components",{QSpace:Je["a"]})},"36af":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("StateWrapper",{attrs:{icon:"mdi-progress-clock",title:e.title,description:"The feature is currently in development. We will notify you once it is\n    ready."}})},r=[],o=i("c49c"),a={name:"WorkInProgress",components:{StateWrapper:o["a"]},props:{feature:{type:String,default:""}},computed:{title(){return this.feature+", Coming soon"}}},n=a,l=i("2877"),d=Object(l["a"])(n,s,r,!1,null,"cfa1873a",null);t["a"]=d.exports},4714:function(e,t,i){},"4d67":function(e,t,i){},"5dbf":function(e,t,i){"use strict";i("2731")},"5dd5":function(e,t,i){},"64ab":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"tip-tap-editor"}},[t("Toolbar",{attrs:{"hide-tool-bar":e.hideToolBar,"form-columns":e.formColumns},on:{"set-heading":e.setHeading,"unset-heading":e.unsetHeading,"toggle-alignment":e.toggleAlignment,"toggle-bold":e.toggleBold,"toggle-italic":e.toggleItalic,"toggle-underline":e.toggleUnderline,"toggle-bullet-list":e.toggleBulletList,"toggle-number-list":e.toggleNumberList,"increase-indent":e.increaseIndent,"decrease-indent":e.decreaseIndent,"set-text-color":e.setTextColor,"unset-text-color":e.unsetTextColor,"set-bg-color":e.setBgColor,"unset-bg-color":e.unsetBgColor,undo:e.undo,redo:e.redo,"set-link":e.setLink,"add-field":e.addField}}),t("EditorContent",{attrs:{editor:e.editor}})],1)},r=[],o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"toolbar"}},[t("AddField",{attrs:{"form-columns":e.formColumns},on:{click:e.addField}}),e.hideToolBar?[t("Heading",{on:{set:e.setHeading,unset:e.unsetHeading}}),t("Alignment",{on:{toggle:e.toggleAlignment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"bold",expression:"'bold'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-bold"},on:{click:e.toggleBold}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"italic",expression:"'italic'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-italic"},on:{click:e.toggleItalic}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"underline",expression:"'underline'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-underline"},on:{click:e.toggleUnderline}}),t("List",{on:{bullet:e.toggleBulletList,number:e.toggleNumberList}}),t("Indent",{on:{increase:e.increaseIndent,decrease:e.decreaseIndent}}),t("TextColor",{on:{set:e.setTextColor,unset:e.unsetTextColor}}),t("BackgroundColor",{on:{set:e.setBgColor,unset:e.unsetBgColor}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"undo",expression:"'undo'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-undo"},on:{click:e.undo}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"redo",expression:"'redo'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-redo"},on:{click:e.redo}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"link",expression:"'link'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-link-2-outline"},on:{click:e.setLink}})]:e._e()],2)},a=[],n=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"heading",expression:"'heading'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-size"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},e._l(e.headings,(function(i){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:i.label,expression:"heading.label",modifiers:{right:!0}}],key:i.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:i.icon},on:{click:function(t){return e.handleClick(i.level)}}})})),1)],1)},l=[],d={name:"Heading",data(){return{headings:[{id:this.$nano.id(),label:"heading 1",icon:"mdi-format-header-1",level:1},{id:this.$nano.id(),label:"heading 2",icon:"mdi-format-header-2",level:2},{id:this.$nano.id(),label:"heading 3",icon:"mdi-format-header-3",level:3},{id:this.$nano.id(),label:"heading 4",icon:"mdi-format-header-4",level:4},{id:this.$nano.id(),label:"heading 5",icon:"mdi-format-header-5",level:5},{id:this.$nano.id(),label:"heading 6",icon:"mdi-format-header-6",level:6},{id:this.$nano.id(),label:"normal",icon:"mdi-format-paragraph",level:0}]}},methods:{handleClick(e){e?this.$emit("set",e):this.$emit("unset")}}},c=d,u=i("2877"),h=i("4e73"),p=i("93dc"),f=i.n(p),y=Object(u["a"])(c,n,l,!1,null,"5b56e398",null),m=y.exports;f()(y,"components",{QMenu:h["a"]});var v=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"alignment",expression:"'alignment'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-align-center"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},e._l(e.alignments,(function(i){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:i.label,expression:"alignment.label",modifiers:{right:!0}}],key:i.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:i.icon},on:{click:function(t){return e.$emit("toggle",i.label)}}})})),1)],1)},b=[],g={name:"Alignment",data(){return{alignments:[{id:this.$nano.id(),label:"left",icon:"mdi-format-align-left"},{id:this.$nano.id(),label:"center",icon:"mdi-format-align-center"},{id:this.$nano.id(),label:"right",icon:"mdi-format-align-right"},{id:this.$nano.id(),label:"justify",icon:"mdi-format-align-justify"}]}}},S=g,_=Object(u["a"])(S,v,b,!1,null,"4a6ff39e",null),C=_.exports;f()(_,"components",{QMenu:h["a"]});var I=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"list",expression:"'list'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-list-bulleted-square"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},e._l(e.lists,(function(i){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:i.label,expression:"list.label",modifiers:{right:!0}}],key:i.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:i.icon},on:{click:function(t){return e.$emit(i.value)}}})})),1)],1)},T=[],k={name:"List",data(){return{lists:[{id:this.$nano.id(),label:"bullet list",icon:"mdi-format-list-bulleted",value:"bullet"},{id:this.$nano.id(),label:"number list",icon:"mdi-format-list-numbered",value:"number"}]}}},x=k,B=Object(u["a"])(x,I,T,!1,null,"6f405cc2",null),O=B.exports;f()(B,"components",{QMenu:h["a"]});var $=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"indent",expression:"'indent'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-indent-increase"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},e._l(e.indents,(function(i){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:i.label,expression:"indent.label",modifiers:{right:!0}}],key:i.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:i.icon},on:{click:function(t){return e.$emit(i.value)}}})})),1)],1)},w=[],F={name:"Indent",data(){return{indents:[{id:this.$nano.id(),label:"increase indent",icon:"mdi-format-indent-increase",value:"increase"},{id:this.$nano.id(),label:"decrease indent",icon:"mdi-format-indent-decrease",value:"decrease"}]}}},E=F,A=Object(u["a"])(E,$,w,!1,null,"fd1a0bc6",null),N=A.exports;f()(A,"components",{QMenu:h["a"]});var D=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"text color",expression:"'text color'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"format_color_text"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"auto-close":"","transition-show":"scale","transition-hide":"scale"}},[t("div",{attrs:{id:"colors"}},e._l(e.colors,(function(i){return t("div",{key:i.id,staticClass:"color",style:{backgroundColor:i.value},on:{click:function(t){return e.handleInput(i)}}},[e.activeColor===i.value?t("BaseIcon",{attrs:{name:"eva-checkmark",color:"white"}}):e._e()],1)})),0)])],1)},R=[],P={name:"TextColor",data(){return{colors:[{id:this.$nano.id(),label:"primary",value:"#643094"},{id:this.$nano.id(),label:"secondary",value:"#00bcd4"},{id:this.$nano.id(),label:"red",value:"#f44336"},{id:this.$nano.id(),label:"pink",value:"#e91e63"},{id:this.$nano.id(),label:"purple",value:"#9c27b0"},{id:this.$nano.id(),label:"deep-purple",value:"#673ab7"},{id:this.$nano.id(),label:"indigo",value:"#3f51b5"},{id:this.$nano.id(),label:"blue",value:"#2196f3"},{id:this.$nano.id(),label:"teal",value:"#009688"},{id:this.$nano.id(),label:"green",value:"#4caf50"},{id:this.$nano.id(),label:"light-green",value:"#8bc34a"},{id:this.$nano.id(),label:"lime",value:"#cddc39"},{id:this.$nano.id(),label:"amber",value:"#ffc107"},{id:this.$nano.id(),label:"orange",value:"#ff9800"},{id:this.$nano.id(),label:"deep-orange",value:"#ff5722"},{id:this.$nano.id(),label:"brown",value:"#795548"},{id:this.$nano.id(),label:"gray",value:"#64748b"},{id:this.$nano.id(),label:"none",value:""}],activeColor:""}},methods:{handleInput(e){this.activeColor=e.value,"none"!==e.label?this.$emit("set",e.value):this.$emit("unset")}}},q=P,L=(i("718c"),Object(u["a"])(q,D,R,!1,null,"781fdde1",null)),M=L.exports;f()(L,"components",{QMenu:h["a"]});var j=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"background color",expression:"'background color'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-color-palette-outline"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"auto-close":"","transition-show":"scale","transition-hide":"scale"}},[t("div",{attrs:{id:"colors"}},e._l(e.colors,(function(i){return t("div",{key:i.id,staticClass:"color",style:{backgroundColor:i.value},on:{click:function(t){return e.handleInput(i)}}},[e.activeColor===i.value?t("BaseIcon",{attrs:{name:"eva-checkmark",color:"white"}}):e._e()],1)})),0)])],1)},U=[],Y={name:"BackgroundColor",data(){return{colors:[{id:this.$nano.id(),label:"primary",value:"#dec2e7"},{id:this.$nano.id(),label:"secondary",value:"#b2ebf2"},{id:this.$nano.id(),label:"red",value:"#ffcdd2"},{id:this.$nano.id(),label:"pink",value:"#f8bbd0"},{id:this.$nano.id(),label:"purple",value:"#e1bee7"},{id:this.$nano.id(),label:"deep-purple",value:"#d1c4e9"},{id:this.$nano.id(),label:"indigo",value:"#c5cae9"},{id:this.$nano.id(),label:"blue",value:"#bbdefb"},{id:this.$nano.id(),label:"teal",value:"#b2dfdb"},{id:this.$nano.id(),label:"green",value:"#c8e6c9"},{id:this.$nano.id(),label:"lime",value:"#f0f4c3"},{id:this.$nano.id(),label:"amber",value:"#ffecb3"},{id:this.$nano.id(),label:"orange",value:"#ffe0b2"},{id:this.$nano.id(),label:"deep-orange",value:"#ffccbc"},{id:this.$nano.id(),label:"brown",value:"#d7ccc8"},{id:this.$nano.id(),label:"none",value:""}],activeColor:""}},methods:{handleInput(e){this.activeColor=e.value,"none"!==e.label?this.$emit("set",e.value):this.$emit("unset")}}},V=Y,G=(i("e21c"),Object(u["a"])(V,j,U,!1,null,"6647f5ea",null)),J=G.exports;f()(G,"components",{QMenu:h["a"]});var H=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"add field",expression:"'add field'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-plus"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale"}},[t("div",{staticClass:"row border"},[t("div",{staticClass:"title-3 q-pa-xs col-auto"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchColumns,expression:"searchColumns"}],ref:"searchQuery",staticClass:"q-pa-md",attrs:{type:"text",placeholder:"Search",autofocus:""},domProps:{value:e.searchColumns},on:{keyup:function(t){return e.searchColumnList(e.searchColumns)},input:function(t){t.target.composing||(e.searchColumns=t.target.value)}}})])]),t("BaseScrollbar",{attrs:{height:"200px"}},e._l(e.fields,(function(i){return t("ListItem",{key:i.id,staticClass:"text-capitalize",class:i.display,attrs:{label:i.label,color:i.color},on:{click:function(t){return e.$emit("click",i)}}})})),1)],1)],1)},Q=[],W=(i("14d9"),i("caad"),i("cade")),z={name:"AddField",components:{ListItem:W["a"]},props:{formColumns:{type:Array,default:()=>[]}},data(){return{fields:[],searchColumns:""}},watch:{formColumns:{immediate:!0,handler(){this.formColumns.length&&this.formColumns.forEach(e=>{this.fields.push({id:this.$nano.id(),label:e.label,value:e.hasDefault?e.value:`#F#${e.label}#F#`,display:"",color:e.hasDefault?e.color:"#00bcd4"})})}}},methods:{searchColumnList(e){this.fields.forEach(t=>{t.display="",e&&(t.label.toLowerCase().includes(e.toLowerCase())||(t.display="hide"))})}}},K=z,X=(i("ea98"),Object(u["a"])(K,H,Q,!1,null,"42d457c1",null)),Z=X.exports;f()(X,"components",{QMenu:h["a"]});var ee={name:"Toolbar",components:{Heading:m,Alignment:C,List:O,Indent:N,TextColor:M,BackgroundColor:J,AddField:Z},props:{hideToolBar:{type:Boolean,default:!1},formColumns:{type:Array,default:()=>[]}},methods:{setHeading(e){this.$emit("set-heading",e)},unsetHeading(){this.$emit("unset-heading")},toggleAlignment(e){this.$emit("toggle-alignment",e)},toggleBold(){this.$emit("toggle-bold")},toggleItalic(){this.$emit("toggle-italic")},toggleUnderline(){this.$emit("toggle-underline")},toggleBulletList(){this.$emit("toggle-bullet-list")},toggleNumberList(){this.$emit("toggle-number-list")},increaseIndent(){this.$emit("increase-indent")},decreaseIndent(){this.$emit("decrease-indent")},setTextColor(e){this.$emit("set-text-color",e)},unsetTextColor(){this.$emit("unset-text-color")},setBgColor(e){this.$emit("set-bg-color",e)},unsetBgColor(){this.$emit("unset-bg-color")},undo(){this.$emit("undo")},redo(){this.$emit("redo")},setLink(){this.$emit("set-link")},addField(e){this.$emit("add-field",e)}}},te=ee,ie=(i("8829"),Object(u["a"])(te,o,a,!1,null,"10d390a9",null)),se=ie.exports,re=i("1ab4"),oe=i("672a"),ae=i("3560"),ne=i("cc86"),le=i("97a2"),de=i("58e6"),ce=i("e8d8"),ue=i("9751"),he=i("795d"),pe=i("9980"),fe=function(){var e=this,t=e._self._c;return t("NodeViewWrapper",{staticClass:"field-placeholder-wrapper"},[t("div",{attrs:{id:"field-placeholder"}},[t("div",{staticClass:"field"},[e._v(" "+e._s(e.node.attrs.fieldType)+" ")]),t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-close",color:"red"},on:{click:e.deleteNode}})],1)])},ye=[],me={name:"FieldPlaceholder",components:{NodeViewWrapper:re["c"]},props:re["e"]},ve=me,be=(i("2f12"),Object(u["a"])(ve,fe,ye,!1,null,"f6682294",null)),ge=be.exports,Se=pe["d"].create({name:"FieldPlaceholder",group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{fieldType:{type:String,required:!0}}},parseHTML(){return[{tag:"FieldPlaceholder"}]},renderHTML({HTMLAttributes:e}){return["FieldPlaceholder",Object(pe["r"])(e)]},addNodeView(){return Object(re["d"])(ge)}}),_e=i("dce4"),Ce={name:"TextEditor",components:{Toolbar:se,EditorContent:re["b"]},props:{value:{type:Object,required:!0},field:{type:Object,default:()=>{}},hideToolBar:{type:Boolean,default:!0},formColumns:{type:Array,default:()=>[]}},data(){return{editor:null,textContent:""}},watch:{editor:{deep:!0,handler(){if(this.value){const t=new DOMParser,i=t.parseFromString(this.editor.getHTML(),"text/html");var e="";i.body.childNodes.forEach(t=>{let i=t.outerHTML.replace(new RegExp('"></fieldplaceholder>',"g"),""),s=i.split('<fieldplaceholder fieldtype="');e+=s.join("")});let s={text:this.editor.getHTML(),content:e};this.$emit("input",s)}}}},created(){this.initiateEditor()},beforeDestroy(){this.editor.destroy()},methods:{initiateEditor(){this.editor=new re["a"]({content:this.value.text,extensions:[oe["a"],ae["a"],ne["a"],le["a"].configure({types:["heading","paragraph"]}),de["a"],ce["a"],ue["a"].configure({multicolor:!0}),he["a"].configure({placeholder:"Start typing …"}),Se,Text,_e["b"]]})},setHeading(e){this.editor.chain().focus().toggleHeading({level:e}).run()},unsetHeading(){this.editor.chain().focus().clearNodes().unsetAllMarks().run()},toggleAlignment(e){this.editor.chain().focus().setTextAlign(e).run()},toggleBold(){this.editor.chain().focus().toggleBold().run()},toggleItalic(){this.editor.chain().focus().toggleItalic().run()},toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()},toggleBulletList(){this.editor.chain().focus().toggleBulletList().run()},toggleNumberList(){this.editor.chain().focus().toggleOrderedList().run()},increaseIndent(){this.editor.chain().focus().sinkListItem("listItem").run()},decreaseIndent(){this.editor.chain().focus().liftListItem("listItem").run()},undo(){this.editor.chain().focus().undo().run()},redo(){this.editor.chain().focus().redo().run()},setLink(){const e=this.editor.getAttributes("link").href,t=window.prompt("URL",e);null!==t&&(t?this.editor.chain().focus().extendMarkRange("link").setLink({href:t}).run():this.editor.chain().focus().extendMarkRange("link").unsetLink().run())},setTextColor(e){this.editor.chain().focus().setColor(e).run()},unsetTextColor(){this.editor.chain().focus().unsetColor().run()},setBgColor(e){this.editor.chain().focus().setHighlight({color:e}).run()},unsetBgColor(){this.editor.chain().focus().unsetHighlight().run()},addField(e){const t=`<FieldPlaceholder fieldId="${e.id}" fieldType="${e.value}">${e.value}</FieldPlaceholder>`;this.editor.chain().focus().insertContent(t).run()}}},Ie=Ce,Te=(i("74d9"),Object(u["a"])(Ie,s,r,!1,null,"b184c692",null));t["a"]=Te.exports},"6cf2":function(e,t,i){},"6df8":function(e,t,i){},"718c":function(e,t,i){"use strict";i("1a82")},"74d9":function(e,t,i){"use strict";i("ee7b")},"784e":function(e,t,i){"use strict";i("1f1e")},"85b1":function(e,t,i){"use strict";var s=i("2332"),r=i("26ee"),o=function(){return r["a"].Date.now()},a=o,n=/\s/;function l(e){var t=e.length;while(t--&&n.test(e.charAt(t)));return t}var d=l,c=/^\s+/;function u(e){return e?e.slice(0,d(e)+1).replace(c,""):e}var h=u,p=i("1bc6"),f=NaN,y=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,v=/^0o[0-7]+$/i,b=parseInt;function g(e){if("number"==typeof e)return e;if(Object(p["a"])(e))return f;if(Object(s["a"])(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(s["a"])(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=h(e);var i=m.test(e);return i||v.test(e)?b(e.slice(2),i?2:8):y.test(e)?f:+e}var S=g,_="Expected a function",C=Math.max,I=Math.min;function T(e,t,i){var r,o,n,l,d,c,u=0,h=!1,p=!1,f=!0;if("function"!=typeof e)throw new TypeError(_);function y(t){var i=r,s=o;return r=o=void 0,u=t,l=e.apply(s,i),l}function m(e){return u=e,d=setTimeout(g,t),h?y(e):l}function v(e){var i=e-c,s=e-u,r=t-i;return p?I(r,n-s):r}function b(e){var i=e-c,s=e-u;return void 0===c||i>=t||i<0||p&&s>=n}function g(){var e=a();if(b(e))return T(e);d=setTimeout(g,v(e))}function T(e){return d=void 0,f&&r?y(e):(r=o=void 0,l)}function k(){void 0!==d&&clearTimeout(d),u=0,r=c=o=d=void 0}function x(){return void 0===d?l:T(a())}function B(){var e=a(),i=b(e);if(r=arguments,o=this,c=e,i){if(void 0===d)return m(c);if(p)return clearTimeout(d),d=setTimeout(g,t),y(c)}return void 0===d&&(d=setTimeout(g,t)),l}return t=S(t)||0,Object(s["a"])(i)&&(h=!!i.leading,p="maxWait"in i,n=p?C(S(i.maxWait)||0,t):n,f="trailing"in i?!!i.trailing:f),B.cancel=k,B.flush=x,B}t["a"]=T},"869e":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{class:{disabled:e.isDisabled},attrs:{id:"checkbox-field"}},[t("div",{staticClass:"option",class:{"is-focused":e.isFocused,"no-pointer-events":e.isDisabled,"is-selected":e.value},attrs:{tabindex:0},on:{focus:function(t){e.isFocused=!0},blur:function(t){e.isFocused=!1},click:e.handleInput,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.stopPropagation(),e.handleInput.apply(null,arguments))}}},[t("BaseIcon",{staticClass:"icon",class:[e.description?"q-mr-md":"q-mr-sm"],attrs:{name:e.value?"mdi-checkbox-marked":"mdi-checkbox-blank-outline","inherit-color":""}}),t("div",[t("div",{staticClass:"label"},[e._v(e._s(e.label))]),e.description?t("div",{staticClass:"description"},[e._v(e._s(e.description))]):e._e()])],1),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e()],1)},r=[],o=i("e683"),a={name:"CheckboxField",components:{FormFieldError:o["a"]},props:{value:{type:Boolean,default:!1},label:{type:String,default:""},description:{type:String,default:""},isDisabled:{type:Boolean,default:!1},error:{type:String,default:""}},data(){return{isFocused:!1}},methods:{handleInput(){this.isDisabled||this.$emit("input",!this.value)}}},n=a,l=(i("5dbf"),i("2877")),d=Object(l["a"])(n,s,r,!1,null,"658eb834",null);t["a"]=d.exports},8829:function(e,t,i){"use strict";i("4714")},9672:function(e,t,i){},"967e":function(e,t,i){"use strict";i("9672")},"9a9e":function(e,t,i){},aa96:function(e,t,i){},aadf:function(e,t,i){"use strict";i("27c8")},b864:function(e,t,i){},c49c:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"state-wrapper"}},[t("div",{staticClass:"slow-up-down",attrs:{id:"illustration"}},[t("div",{attrs:{id:"shape-1"}}),t("div",{attrs:{id:"shape-2"}}),t("div",{attrs:{id:"shape-3"}},[t("BaseIcon",{staticClass:"icon",attrs:{name:e.icon,size:"80px"}})],1)]),t("div",{staticClass:"title-1"},[e._v(" "+e._s(e.title)+" ")]),t("div",{staticClass:"description"},[e._v(" "+e._s(e.description)+" ")]),e.action?t("BaseButton",{staticClass:"q-mt-lg",attrs:{icon:e.actionIcon,label:e.action},on:{click:function(t){return e.$emit("action")}}}):e._e()],1)},r=[],o={name:"StateWrapper",props:{icon:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},action:{type:String,default:""},actionIcon:{type:String,default:""}}},a=o,n=(i("2948"),i("2877")),l=Object(n["a"])(a,s,r,!1,null,"ba5412d8",null);t["a"]=l.exports},c515:function(e,t,i){},c61d:function(e,t,i){},c875:function(e,t,i){"use strict";i("c61d")},d093:function(e,t,i){"use strict";i("4d67")},da87:function(e,t,i){"use strict";i("e10a")},e09c:function(e,t,i){},e10a:function(e,t,i){},e21c:function(e,t,i){"use strict";i("e09c")},ea98:function(e,t,i){"use strict";i("1bfa")},edc2:function(e,t,i){"use strict";i("6cf2")},ee7b:function(e,t,i){},f108:function(e,t,i){},f9cb:function(e,t,i){"use strict";i("5dd5")},fa3a:function(e,t,i){},fd21:function(e,t,i){}}]);
//# sourceMappingURL=repository-secure.38ea4a42.js.map