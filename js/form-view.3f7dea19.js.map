{"version":3,"sources":["webpack:///./src/assets/logo/logo-light.png","webpack:///./src/views/forms/views/FormView.vue?6f68","webpack:///./src/views/forms/views/FormView.vue","webpack:///src/views/forms/views/FormView.vue","webpack:///./src/views/forms/views/FormView.vue?80b5","webpack:///./src/views/forms/views/FormView.vue?97ce","webpack:///./src/components/common/QRView.vue?abf8","webpack:///./src/layouts/app/components/toolbar/components/ThemeSwitcher.vue","webpack:///src/layouts/app/components/toolbar/components/ThemeSwitcher.vue","webpack:///./src/layouts/app/components/toolbar/components/ThemeSwitcher.vue?7805","webpack:///./src/layouts/app/components/toolbar/components/ThemeSwitcher.vue?5df8","webpack:///./src/components/common/QRView.vue","webpack:///src/components/common/QRView.vue","webpack:///./src/components/common/QRView.vue?4818","webpack:///./src/components/common/QRView.vue?5f63"],"names":["module","exports","render","_vm","this","_c","_self","loadingBarContent","staticClass","_e","style","width","formWidth","attrs","_v","_s","formName","formDescription","isMaximized","on","toggleWidth","form","formId","panels","secondaryPanels","formSettings","formModel","_enableControls","portal","id","externalLoading","$event","saveForm","formSaveType","formEntryId","closeQRModal","model","value","isQRView","callback","$$v","expression","_m","closeSubmission","scopedSlots","_u","key","fn","proxy","submissionModal","staticRenderFns","require","name","components","ThemeSwitcher","RenderForm","QRView","Modal","props","tenantId","type","required","data","sendInviteBtn","savingType","formItemId","computed","field","panelFields","row","controls","childControls","tblrow","listControls","enableControls","parentControls","watch","immediate","handler","methods","error","payload","mode","sortBy","groupBy","filterBy","filters","criteria","condition","groupCondition","itemsPerPage","currentPage","meta","settings","fields","entryId","input","console","fieldNames","window","linkText","origin","entryIds","fieldName","inviteUrl","component","noBorder","darkTheme","toggleDarkTheme","default","closeModal","staticStyle","getURL","printImg","qrData","printWin"],"mappings":"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","file":"js/form-view.3f7dea19.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/logo-light.7cfed3a8.png\";","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--9-oneOf-1-4!../../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormView.vue?vue&type=style&index=0&id=76ea625c&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.loadingBarContent)?_c('BaseLoadingBarSheet',{staticClass:\"loading-content\"}):_vm._e(),_c('div',{style:({ width: _vm.formWidth }),attrs:{\"id\":\"form-view\"}},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"col\"},[_c('div',{staticClass:\"title-1\"},[_vm._v(_vm._s(_vm.formName))]),_c('div',{staticClass:\"description\"},[_vm._v(_vm._s(_vm.formDescription))])]),_c('BaseActionButton',{attrs:{\"is-flat\":\"\",\"icon\":_vm.isMaximized ? 'eva-collapse' : 'eva-expand'},on:{\"click\":_vm.toggleWidth}}),_c('ThemeSwitcher',{staticClass:\"q-ml-sm\",attrs:{\"no-border\":false}})],1),(_vm.form)?_c('RenderForm',{attrs:{\"form-id\":_vm.formId,\"panels\":_vm.panels,\"secondary-panels\":_vm.secondaryPanels,\"form-settings\":_vm.formSettings,\"form-model\":_vm.formModel,\"enable-controls\":_vm._enableControls,\"height\":'calc(100vh - 200px)',\"external-link\":true,\"portal-id\":_vm.portal.id,\"external-loading\":_vm.externalLoading},on:{\"update:externalLoading\":function($event){_vm.externalLoading=$event},\"update:external-loading\":function($event){_vm.externalLoading=$event},\"save\":_vm.saveForm,\"formSaveType\":_vm.formSaveType}}):_vm._e(),_c('QRView',{attrs:{\"form-id\":_vm.formId,\"form-entry-id\":_vm.formEntryId},on:{\"input\":_vm.closeQRModal},model:{value:(_vm.isQRView),callback:function ($$v) {_vm.isQRView=$$v},expression:\"isQRView\"}}),_vm._m(0),_c('Modal',{attrs:{\"width\":\"30vw\",\"height\":\"50vh\",\"has-footer\":\"\"},on:{\"input\":function($event){return _vm.closeSubmission()}},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_vm._v(\"Thank you!\")]},proxy:true},{key:\"default\",fn:function(){return [_c('BaseIcon',{staticClass:\"imgCenter\",attrs:{\"name\":\"eva-checkmark-circle-2-outline\",\"color\":\"positive\",\"size\":\"80px\"}}),_c('div',{staticClass:\"text-center\"},[_vm._v(\" Thank you for submitting the form. We appreciate your participation and the information you have provided. \")])]},proxy:true},{key:\"footer\",fn:function(){return [_c('BaseButton',{attrs:{\"label\":\"Close\"},on:{\"click\":_vm.closeSubmission}})]},proxy:true}]),model:{value:(_vm.submissionModal),callback:function ($$v) {_vm.submissionModal=$$v},expression:\"submissionModal\"}})],1)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"footer\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"Powered by\")]),_c('img',{attrs:{\"src\":require(\"@/assets/logo/logo-light.png\"),\"alt\":\"logo\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <BaseLoadingBarSheet v-if=\"loadingBarContent\" class=\"loading-content\" />\n\n    <div id=\"form-view\" :style=\"{ width: formWidth }\">\n      <!-- form meta -->\n\n      <div class=\"header\">\n        <div class=\"col\">\n          <div class=\"title-1\">{{ formName }}</div>\n          <div class=\"description\">{{ formDescription }}</div>\n        </div>\n\n        <BaseActionButton\n          is-flat\n          :icon=\"isMaximized ? 'eva-collapse' : 'eva-expand'\"\n          @click=\"toggleWidth\"\n        />\n        <ThemeSwitcher class=\"q-ml-sm\" :no-border=\"false\" />\n      </div>\n\n      <!-- ... -->\n\n      <!-- form -->\n      <RenderForm\n        v-if=\"form\"\n        :form-id=\"formId\"\n        :panels=\"panels\"\n        :secondary-panels=\"secondaryPanels\"\n        :form-settings=\"formSettings\"\n        :form-model=\"formModel\"\n        :enable-controls=\"_enableControls\"\n        :height=\"'calc(100vh - 200px)'\"\n        :external-link=\"true\"\n        :portal-id=\"portal.id\"\n        :external-loading.sync=\"externalLoading\"\n        @save=\"saveForm\"\n        @formSaveType=\"formSaveType\"\n      />\n\n      <!-- ... -->\n\n      <!-- QR Print -->\n\n      <QRView\n        v-model=\"isQRView\"\n        :form-id=\"formId\"\n        :form-entry-id=\"formEntryId\"\n        @input=\"closeQRModal\"\n      />\n\n      <!-- ... -->\n\n      <!-- footer -->\n\n      <div class=\"footer\">\n        <div class=\"label\">Powered by</div>\n        <img src=\"@/assets/logo/logo-light.png\" alt=\"logo\" />\n      </div>\n\n      <!-- ... -->\n\n      <!-- modal -->\n\n      <Modal\n        v-model=\"submissionModal\"\n        width=\"30vw\"\n        height=\"50vh\"\n        has-footer\n        @input=\"closeSubmission()\"\n      >\n        <!-- title -->\n\n        <template #title>Thank you!</template>\n\n        <!-- ... -->\n\n        <template #default>\n          <BaseIcon\n            name=\"eva-checkmark-circle-2-outline\"\n            color=\"positive\"\n            size=\"80px\"\n            class=\"imgCenter\"\n          />\n          <div class=\"text-center\">\n            Thank you for submitting the form. We appreciate your participation\n            and the information you have provided.\n          </div>\n        </template>\n\n        <!-- footer -->\n\n        <template #footer>\n          <BaseButton label=\"Close\" @click=\"closeSubmission\" />\n        </template>\n      </Modal>\n\n      <!-- ... -->\n    </div>\n  </div>\n</template>\n\n<script>\nimport { auth, form, portal } from \"@/api/factory.js\";\nimport ThemeSwitcher from \"@/layouts/app/components/toolbar/components/ThemeSwitcher.vue\";\nimport RenderForm from \"@/components/common/render-form/RenderForm.vue\";\nimport QRView from \"@/components/common/QRView.vue\";\nimport Modal from \"@/components/common/popup/Modal.vue\";\n\nexport default {\n  name: \"FormView\",\n\n  components: { ThemeSwitcher, RenderForm, QRView, Modal },\n\n  props: {\n    tenantId: {\n      type: String,\n      required: true,\n    },\n\n    formId: {\n      type: String,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      loadingBarContent: true,\n      form: null,\n      formWidth: \"720px\",\n      formModel: {},\n      isQRView: false,\n      formEntryId: 0,\n      submissionModal: false,\n      sendInviteBtn: false,\n      portal: {},\n      savingType: \"\",\n      formItemId: 0,\n      externalLoading: false,\n    };\n  },\n\n  computed: {\n    isMaximized() {\n      return this.formWidth === \"100%\";\n    },\n\n    formName() {\n      if (!this.form) {\n        return \"\";\n      }\n\n      return this.formSettings.general.name;\n    },\n\n    formDescription() {\n      if (!this.form) {\n        return \"\";\n      }\n\n      return this.formSettings.general.description;\n    },\n\n    panels() {\n      if (!this.form) {\n        return [];\n      }\n\n      return this.form.panels;\n    },\n\n    secondaryPanels() {\n      if (!this.form) {\n        return [];\n      }\n\n      return this.form.secondaryPanels;\n    },\n\n    formSettings() {\n      if (!this.form) {\n        return {};\n      }\n\n      return this.form.settings;\n    },\n\n    _enableControls() {\n      let enableControls = [];\n      let listControls = [];\n      this.panels.forEach((panel) => {\n        if (panel.fields.length) {\n          let panelFields = panel.fields.filter(\n            (field) =>\n              field.type === \"SINGLE_SELECT\" ||\n              field.type === \"SINGLE_CHOICE\" ||\n              field.type === \"MULTIPLE_CHOICE\" ||\n              field.type === \"MULTI_SELECT\"\n          );\n          if (panelFields.length) {\n            panelFields.forEach((row) => {\n              if (row.settings.validation.enableSettings) {\n                if (row.settings.validation.enableSettings.length) {\n                  let controls = [];\n                  row.settings.validation.enableSettings.forEach((tblrow) => {\n                    if (tblrow.controls.length) {\n                      controls.push({\n                        value: tblrow.value,\n                        childControls: tblrow.controls,\n                      });\n                      tblrow.controls.forEach((control) => {\n                        if (\n                          controls.indexOf(control) < 0 &&\n                          listControls.indexOf(control) < 0\n                        ) {\n                          listControls.push(control);\n                        }\n                      });\n                    }\n                  });\n                  if (controls.length) {\n                    enableControls.push({\n                      id: row.id,\n                      parentControls: controls,\n                    });\n                  }\n                }\n              }\n            });\n          }\n        }\n      });\n      return {\n        listControls: listControls,\n        controls: enableControls,\n      };\n    },\n  },\n\n  watch: {\n    tenantId: {\n      immediate: true,\n      handler: \"getSession\",\n    },\n\n    externalLoading: {\n      immediate: true,\n      handler() {\n        if (this.externalLoading) {\n          this.loadingBarContent = true;\n        } else {\n          this.loadingBarContent = false;\n        }\n      },\n    },\n  },\n\n  methods: {\n    toggleWidth() {\n      this.formWidth = this.formWidth === \"100%\" ? \"720px\" : \"100%\";\n    },\n\n    async getSession() {\n      this.loadingBarContent = true;\n      const { error } = await auth.externalLogin(this.tenantId, 1);\n      if (error) {\n        this.loadingBarContent = false;\n        this.$alert.info(\"User Account Not Found\");\n        return;\n      }\n      this.getForm();\n      this.getPortals();\n    },\n\n    async getForm() {\n      const { error, payload } = await form.getForm(this.formId);\n      this.loadingBarContent = false;\n\n      if (error) {\n        this.loadingBarContent = false;\n        this.$alert.error(error);\n        return;\n      }\n\n      this.form = JSON.parse(payload.formJson);\n    },\n\n    async getPortals() {\n      this.portal = {};\n      this.sendInviteBtn = false;\n      const { error, payload } = await portal.getPortalList({\n        mode: this.mode,\n        sortBy: this.sortBy,\n        groupBy: this.groupBy,\n        filterBy: [\n          {\n            filters: [\n              {\n                criteria: \"settingsJson\",\n                condition: \"CONTAINS\",\n                value:\n                  '\"loginType\":\"MASTER_LOGIN\",\"formId\":' + this.formId + \",\",\n              },\n            ],\n            groupCondition: \"\",\n          },\n        ],\n        itemsPerPage: this.itemsPerPage,\n        currentPage: this.currentPage,\n      });\n\n      if (error) {\n        this.$alert.error(error);\n        return;\n      }\n\n      const { data, meta } = payload;\n      if (meta.totalItems) {\n        if (data.length) {\n          if (data[0].value.length) {\n            this.portal = data[0].value[0];\n            if (this.portal.settingsJson) {\n              let settings = JSON.parse(this.portal.settingsJson);\n              if (\n                settings.authentication.loginType === \"MASTER_LOGIN\" &&\n                settings.authentication.notification\n              ) {\n                this.sendInviteBtn = true;\n              }\n            }\n          }\n        }\n      }\n    },\n\n    async saveForm(fieldsModel) {\n      this.loadingBarContent = true;\n      let input = {\n        fields: fieldsModel,\n      };\n      let entryId = 0;\n      if (this.savingType === \"ADD\") {\n        entryId = 0;\n      } else if (this.savingType === \"UPDATE\") {\n        entryId = this.formItemId;\n      }\n      const { data, error } = await form.saveFormEntry(\n        this.formId,\n        entryId,\n        input\n      );\n\n      this.loadingBarContent = false;\n\n      if (error) {\n        if (error.data) {\n          let errorData = JSON.parse(error.data);\n          console.log(errorData);\n          let fields = JSON.parse(errorData.output);\n          let fieldNames = [];\n          fields.forEach((row) => {\n            fieldNames.push(row.name);\n          });\n          this.$alert.warning(\"Already Exists!\", fieldNames);\n        }\n        this.$alert.error(error);\n        return;\n      }\n\n      if (this.sendInviteBtn) {\n        this.sendInvite(data.output);\n      }\n\n      if (this.form.settings.general.qrFields) {\n        if (this.form.settings.general.qrFields.length) {\n          let entryId = data.output;\n          this.formEntryId = parseInt(entryId);\n          this.isQRView = true;\n        }\n      } else {\n        //window.location.reload();\n        this.submissionModal = true;\n      }\n    },\n\n    closeQRModal() {\n      this.submissionModal = true;\n      //window.location.reload();\n    },\n\n    closeSubmission() {\n      this.submissionModal = false;\n      window.location.reload();\n    },\n\n    async sendInvite(entryId) {\n      let origin = location.origin;\n      let linkText = \"\";\n      if (\n        origin === \"https://app.ezofis.com\" ||\n        origin === \"https://appuat.ezofis.com\" ||\n        origin === \"https://ag-appsvc01.azurewebsites.net\" ||\n        origin === \"https://ag-appsvc05.azurewebsites.net\" ||\n        origin === \"https://trial.ezofis.com\"\n      ) {\n        linkText = `${origin}/portals/${this.$store.state.session.tenantId}/${this.portal.id}`;\n      } else {\n        linkText = `${origin}/app/portals/${this.$store.state.session.tenantId}/${this.portal.id}`;\n      }\n\n      let settingsJson = JSON.parse(this.portal.settingsJson);\n\n      let input = {\n        formId: this.formId,\n        entryIds: [entryId],\n        fieldName: settingsJson.authentication.usernameField,\n        inviteUrl: linkText,\n      };\n      const { error } = await form.sendInvite(this.portal.id, input);\n\n      if (error) {\n        this.$alert.error(error);\n        return;\n      }\n      this.$alert.success(`Invite Sent`);\n    },\n\n    formSaveType(type, itemId) {\n      console.log(type, itemId);\n      this.savingType = type;\n      if (type === \"ADD\") {\n        this.formItemId = 0;\n      } else {\n        this.formItemId = itemId;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#form-view {\n  margin: auto;\n  padding: 16px;\n\n  .header {\n    padding: 16px;\n    border-radius: 4px;\n    background-color: var(--component-bg-color);\n    border-top: 4px solid var(--primary);\n    margin-bottom: 16px;\n    display: flex;\n    align-items: center;\n\n    .description {\n      @extend .text-sm;\n      color: var(--icon-color-inverted);\n    }\n  }\n\n  .footer {\n    margin-top: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: fixed;\n    left: 0;\n    bottom: 16px;\n    width: 100%;\n\n    .label {\n      @extend .text-sm;\n      color: var(--icon-color-inverted);\n      margin-right: 4px;\n    }\n\n    img {\n      height: 16px;\n      width: auto;\n    }\n  }\n}\n\n#modal .imgCenter {\n  display: flex;\n  align-items: center;\n  margin-left: auto;\n  margin-right: auto;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FormView.vue?vue&type=template&id=76ea625c&scoped=true&\"\nimport script from \"./FormView.vue?vue&type=script&lang=js&\"\nexport * from \"./FormView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FormView.vue?vue&type=style&index=0&id=76ea625c&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"76ea625c\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QRView.vue?vue&type=style&index=0&id=2a4b55c0&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('BaseActionButton',{attrs:{\"is-flat\":\"\",\"no-border\":_vm.noBorder,\"icon\":_vm.darkTheme ? 'eva-moon-outline' : 'eva-sun-outline'},on:{\"click\":_vm.toggleDarkTheme}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <BaseActionButton\n    is-flat\n    :no-border=\"noBorder\"\n    :icon=\"darkTheme ? 'eva-moon-outline' : 'eva-sun-outline'\"\n    @click=\"toggleDarkTheme\"\n  />\n</template>\n\n<script>\nimport { mapState, mapMutations } from \"vuex\";\n\nexport default {\n  name: \"ThemeSwitcher\",\n\n  props: {\n    noBorder: {\n      type: Boolean,\n      default: true,\n    },\n  },\n\n  computed: {\n    ...mapState([\"darkTheme\"]),\n  },\n\n  methods: {\n    ...mapMutations([\"toggleDarkTheme\"]),\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../../../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThemeSwitcher.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../../../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThemeSwitcher.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ThemeSwitcher.vue?vue&type=template&id=b3ced1f0&scoped=true&\"\nimport script from \"./ThemeSwitcher.vue?vue&type=script&lang=js&\"\nexport * from \"./ThemeSwitcher.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b3ced1f0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Modal',{attrs:{\"value\":_vm.value,\"width\":\"30vw\",\"height\":\"62vh\"},on:{\"input\":_vm.closeModal},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_vm._v(\"QR Image\")]},proxy:true},{key:\"default\",fn:function(){return [_c('div',{staticStyle:{\"height\":\"40vh\"}},[_c('img',{staticClass:\"imgCenter\",attrs:{\"src\":_vm.getURL}})]),_c('div',{staticClass:\"float-right\"},[_c('BaseButton',{attrs:{\"icon\":\"eva-printer\",\"label\":\"print\"},on:{\"click\":function($event){return _vm.printImg()}}})],1)]},proxy:true}])})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- modal -->\r\n\r\n  <Modal :value=\"value\" width=\"30vw\" height=\"62vh\" @input=\"closeModal\">\r\n    <!-- title -->\r\n\r\n    <template #title>QR Image</template>\r\n\r\n    <!-- ... -->\r\n\r\n    <template #default>\r\n      <div style=\"height: 40vh\">\r\n        <img :src=\"getURL\" class=\"imgCenter\" />\r\n      </div>\r\n      <div class=\"float-right\">\r\n        <BaseButton icon=\"eva-printer\" label=\"print\" @click=\"printImg()\" />\r\n      </div>\r\n    </template>\r\n  </Modal>\r\n\r\n  <!-- ... -->\r\n</template>\r\n<script>\r\nimport Modal from \"@/components/common/popup/Modal.vue\";\r\nexport default {\r\n  name: \"QRView\",\r\n\r\n  components: {\r\n    Modal,\r\n  },\r\n\r\n  props: {\r\n    value: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n\r\n    formId: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n\r\n    formEntryId: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      qrData: \"\",\r\n      error: \"\",\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    getURL() {\r\n      if (this.$store.state.session) {\r\n        return `${process.env.VUE_APP_API_URL}/form/qrview/${this.$store.state.session.tenantId}/${this.formId}/${this.formEntryId}`;\r\n      }\r\n      return \"\";\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    closeModal() {\r\n      this.$emit(\"input\", false);\r\n    },\r\n\r\n    printImg() {\r\n      let printWin = window.open(this.getURL, \"_new\");\r\n      printWin.print();\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.imgCenter {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QRView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QRView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./QRView.vue?vue&type=template&id=2a4b55c0&scoped=true&\"\nimport script from \"./QRView.vue?vue&type=script&lang=js&\"\nexport * from \"./QRView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./QRView.vue?vue&type=style&index=0&id=2a4b55c0&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a4b55c0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}