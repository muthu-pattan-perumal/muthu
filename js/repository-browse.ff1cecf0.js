(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["repository-browse","form-builder~forms-trash~groups-trash~integration-browse~leave-trash~portals-trash~repositories-over~b968ab97","integration-browse~repositories-reports-overview","repositories-trash"],{"0079":function(e,t,i){},"00f0":function(e,t,i){},"0170":function(e,t,i){"use strict";var s=i("a026"),a=i("87e8"),o=i("e277");t["a"]=s["default"].extend({name:"QItemLabel",mixins:[a["a"]],props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},computed:{classes(){return{"q-item__label--overline text-overline":this.overline,"q-item__label--caption text-caption":this.caption,"q-item__label--header":this.header,ellipsis:1===parseInt(this.lines,10)}},style(){if(void 0!==this.lines&&parseInt(this.lines,10)>1)return{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":this.lines}}},render(e){return e("div",{staticClass:"q-item__label",style:this.style,class:this.classes,on:{...this.qListeners}},Object(o["c"])(this,"default"))}})},"02c4":function(e,t,i){},"02fb":function(e,t,i){"use strict";i("8920")},"03e1":function(e,t,i){},"0412":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"item-grid"}},[t("BaseScrollbar",{attrs:{height:e.breadcrumbs?"calc(100vh - 295px)":"calc(100vh - 260px)"}},e._l(e.items,(function({key:i,value:s,data:a}){return t("div",{key:s},[i?t("div",{staticClass:"group-by"},[t("span",{staticClass:"key"},[e._v(e._s(i)+": ")]),t("span",[e._v(e._s(s)+" ")]),t("span",[e._v("("+e._s(a.length)+")")])]):e._e(),e._t("items",(function(){return[t("div",{staticClass:"row q-col-gutter-md"},e._l(a,(function(i){return t("div",{key:i.id,staticClass:"col-xs-6 col-sm-4 col-md-3 col-lg-3",on:{click:function(t){return e.$emit("select",i.id)}}},[t("div",{staticClass:"card"},[e._t("header",(function(){return[t("div",{staticClass:"row items-center q-pa-md"},[e._t("avatar",(function(){return[t("BaseIcon",{attrs:{name:i.icon,color:"secondary"}})]}),{item:i}),t("div",{staticClass:"col q-mx-md"},[e._t("title",(function(){return[t("div",{staticClass:"title ellipsis"},[e._v(" "+e._s(i[e.title.name])+" ")])]}),{item:i,title:i[e.title.name]}),e._t("subtitle",(function(){return[t("div",{staticClass:"subtitle ellipsis"},[e._v(" "+e._s(i[e.subtitle.name]||"-")+" ")])]}),{subtitle:e.subtitle&&i[e.subtitle.name]})],2),i.infoIcon?e._t("infoIcon",(function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.infoIconTooltip,expression:"item.infoIconTooltip",modifiers:{top:!0}}],attrs:{icon:i.infoIcon?i.infoIcon:"",color:i.infoIconColor?i.infoIconColor:"primary","is-flat":"","no-border":""},on:{click:function(t){return e.$emit("info",i.id)}}})]}),{item:i}):e._e()],2)]}),{item:i}),e._t("content",(function(){return[e._columns.length?[t("BaseSeparator",{attrs:{"has-inset":""}}),t("div",{staticClass:"q-py-sm"},e._l(e._columns,(function(s){return t("div",{key:s.id},[e._t(s.name,(function(){return[t("div",{staticClass:"row q-px-md q-py-sm"},[t("div",{staticClass:"label ellipsis medium"},[e._v(" "+e._s(s.label)+" ")]),t("q-space"),"FILE_UPLOAD"===s.dataType?[t("div",{staticClass:"ellipsis medium text-right"},e._l(i[s.name],(function(s,a){return t("div",{key:a,staticClass:"row"},[t("FileIcon",{staticClass:"mini-avatar col-auto q-mr-sm",attrs:{"mime-type":e.fileType(s.fileName)}}),t("span",{staticClass:"text-secondary file-underline col",on:{click:function(t){return e.viewFile(s,i)}}},[e._v(e._s(s.fileName))])],1)})),0)]:[t("div",{staticClass:"ellipsis medium text-right"},[e._v(" "+e._s(i[s.name]||"-")+" ")])]],2)]}),{column:s.label,value:i[s.name],item:i})],2)})),0)]:e._e()]}),{item:i}),e.noActions?e._e():t("BaseSeparator",{attrs:{"has-inset":""}}),e.noActions?e._e():e._t("footer",(function(){return["BROWSE"===e.mode?[i.actionAccess?[t("Action",{staticClass:"col",attrs:{icon:"eva-eye-outline",label:"View"},on:{click:function(t){return t.stopPropagation(),e.$emit("select",i.id)}}})]:[t("div",{staticClass:"row items-center"},[e.security||e.visibility(i)?[i.actionButton?[t("Action",{staticClass:"col",attrs:{icon:"eva-edit-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit",i.id)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),t("Action",{staticClass:"col",attrs:{icon:"eva-shield-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("secure",i.id)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),t("Action",{staticClass:"col",attrs:{icon:"eva-trash-2-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete",i.id)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),t("BaseActionButton",{staticClass:"q-mx-md",attrs:{"is-flat":"",icon:"eva-more-vertical","no-border":""},on:{click:function(t){return t.stopPropagation(),e.$emit("more",i.id)}}})]:[t("Action",{staticClass:"col",attrs:{icon:"eva-edit-outline",label:"Edit"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit",i.id)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),t("Action",{staticClass:"col",attrs:{icon:"eva-trash-2-outline",label:"Delete"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete",i.id)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),e.showExport?[t("BaseActionButton",{staticClass:"q-mx-sm",attrs:{"is-flat":"",icon:"eva-download-outline","no-border":""},on:{click:function(t){return t.stopPropagation(),e.$emit("export",i.id)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}})]:e._e(),t("BaseActionButton",{staticClass:"q-mx-md",attrs:{"is-flat":"",icon:"eva-more-vertical","no-border":""},on:{click:function(t){return t.stopPropagation(),e.$emit("more",i.id)}}})]]:e._e()],2)]]:e._e(),e.visibility(i)||e.security?e._e():[[t("Action",{attrs:{icon:"mdi-eye-outline",label:"View"},on:{click:function(t){return t.stopPropagation(),e.$emit("select",i.id)}}})]],"TRASH"===e.mode?[e.security||e.visibility(i)?[t("Action",{attrs:{icon:"mdi-history",label:"Restore"},on:{click:function(t){return t.stopPropagation(),e.$emit("restore",i.id)}}})]:e._e()]:e._e()]}),{item:i})],2)])})),0)]}),{items:a})],2)})),0)],1)},a=[],o=(i("caad"),i("94f5")),r=i("fa1f"),n={name:"ItemGrid",components:{Action:o["a"],FileIcon:r["a"]},props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},mode:{type:String,required:!0},security:{type:Boolean,default:!0},noActions:{type:Boolean,default:!1},breadcrumbs:{type:Boolean,default:!1},showExport:{type:Boolean,default:!1}},data(){return{userId:this.$store.state.session.id,email:this.$store.state.session.email}},computed:{title(){return this.columns.find(e=>"TITLE"===e.type)},subtitle(){return this.columns.find(e=>"SUBTITLE"===e.type)},_columns(){return this.columns.filter(e=>"NORMAL"===e.type&&e.isVisible)}},methods:{visibility(e){const t=Number(this.userId),i=this.email;let s=!1;const a=e.owner?e.owner.map(e=>e.id):[0],o=e.coordinator?e.coordinator.map(e=>e.id):[0];return(e.createdBy===i||a.includes(t)||o.includes(t)||1===t)&&(s=!0),s},viewFile(e,t){e.createdBy=t.createdBy,e.createdAt=t.createdAt,this.$emit("viewFile",e)},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)}}},l=n,d=(i("0f1c"),i("2877")),c=i("2c91"),u=i("93dc"),h=i.n(u),m=Object(d["a"])(l,s,a,!1,null,null,null);t["a"]=m.exports;h()(m,"components",{QSpace:c["a"]})},"064c":function(e,t,i){"use strict";i("caad");var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row items-center",attrs:{id:"item-actions"}},[(e.customProcessForm,e._e()),e.sendInvite?[t("div",{attrs:{classs:"cursor-pointer"},on:{click:function(t){return e.$emit("invite")}}},[t("q-chip",{staticClass:"cursor-pointer primary-hover q-mr-sm",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-account-plus",color:"primary","text-color":"white"}}),e._v(" Send Invite ")],1)],1)]:e._e(),e.processForward?[t("div",{attrs:{classs:"cursor-pointer"},on:{click:function(t){return e.$emit("forward")}}},[t("q-chip",{staticClass:"cursor-pointer orange-hover",attrs:{outline:"",color:"orange"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-arrow-right",color:"orange","text-color":"white"}}),e._v(" Assign ")],1)],1)]:e._e(),e.workflowInitiate?[e.initiateAccess?[t("div",{attrs:{classs:"cursor-pointer "},on:{click:function(t){return e.$emit("initiate")}}},[t("q-chip",{staticClass:"cursor-pointer secondary-hover q-mr-sm",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-plus-thick",color:"secondary","text-color":"white"}}),e._v(" Initiate ")],1)],1)]:[t("q-chip",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Choose document to initiate",expression:"'Choose document to initiate'",modifiers:{top:!0}}],staticClass:"cursor-pointer secondary-hover",attrs:{outline:"",disable:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-plus-thick",color:"secondary","text-color":"white"}}),e._v(" Initiate ")],1)]]:e._e(),e.gotoInbox?t("div",{staticClass:"cursor-pointer q-mr-xs",on:{click:function(t){return e.$emit("inbox")}}},[t("q-chip",{staticClass:"cursor-pointer primary-hover",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-email",color:"primary","text-color":"white"}}),e._v(" My Inbox ")],1)],1):e._e(),e.workflowImport?t("ImportPopup",{attrs:{"chip-button":!0,"data-imported":e.dataImported,"form-id":e.formId},on:{upload:e.upload,close:e.closeImport}}):e._e(),e.downloadAll?t("div",{staticClass:"row q-pr-xs",class:{download:e.checkIconCount}},[e.visibleDownload?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"download",expression:"'download'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-ml-xs q-mr-xs",attrs:{icon:"mdi-download-outline","is-flat":"","no-border":""},on:{click:function(t){return e.$emit("downloadAll",e.item.id)}}}):e._e(),e.visiblePrint?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"print",expression:"'print'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-ml-xs q-mr-xs",attrs:{"is-flat":"","no-border":"",icon:"eva-printer-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("printAll",e.item.id)}}}):e._e(),e.visibleEmail?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Email Sharing",expression:"'Email Sharing'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-ml-xs q-mr-xs",attrs:{"is-flat":"","no-border":"",icon:"mdi-email-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("emailAll",e.item)}}}):e._e(),e.visibleDelete?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Delete",expression:"'Delete'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-pa-sm",attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline"},on:{click:function(t){return e.$emit("deleteFileAction",e.item.id)}}}):e._e()],1):e._e(),e._t("filterSearchIcon"),e.simpleSearchFilter?t("div",[e.hideActions.includes("search")?e._e():t("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:e.searchTable}})],1):t("div",{staticClass:"q-mr-xs"},[t("SimpleSearchWithFilter",{attrs:{columns:e.columns,"filter-by":e.filterBy},on:{keyup:e.searchTable,update:e.updateSimpletSearchFilterBy}})],1),e.id?t("SelectField",{staticClass:"fieldList q-mr-sm",attrs:{"is-mandatory":"",placeholder:"Select day","is-searchable":!0,options:e.dateFilter},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}):e._e(),e.refresh||e.id?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"eva-refresh"},on:{click:function(t){return e.$emit("refresh")}}}):e._e(),e.jiraConnect?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"JIRA - Create Issue",expression:"'JIRA - Create Issue'",modifiers:{top:!0}}],attrs:{icon:"mdi-jira","no-border":"","is-flat":""},on:{click:function(t){return e.$emit("jira")}}}):e._e(),"TRASH"===e.mode?t("div",{staticClass:"row justify-end"},[e.deleteBtn?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Restore Selected Items",expression:"'Restore Selected Items'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-history"},on:{click:function(t){return t.stopPropagation(),e.$emit("restore")}}}):e._e()],1):e._e(),e.deleteBtn?t("div",[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Delete Selected Items",expression:"'Delete Selected Items'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete")}}})],1):e._e(),e.hideActions.includes("toggle")?e._e():t("ToggleColumns",{attrs:{columns:e.repositoryFields?"LIST"===e.activeView?e.columns:[]:e.columns,"repository-fields":e.repositoryFields,"toggle-id":e.toggleId},on:{"update:columns":e.updateColumns,viewColumns:e.viewColumns}}),e.hideActions.includes("sort")?e._e():t("SortItems",{attrs:{columns:e.columns,order:e.order,criteria:e.criteria},on:{"update:order":e.updateOrder,"update:criteria":e.updateCriteria}}),e.hideActions.includes("group")?e._e():t("GroupItems",{attrs:{columns:e.columns,"group-by":e.groupBy},on:{"update:groupBy":e.updateGroupBy}}),e.hideActions.includes("filter")?e._e():t("FilterItems",{attrs:{item:e.item,columns:e._columns,"filter-by":e.filterBy,"selected-filter":e.selectedFilter,"search-content":e.searchContent,"content-search":e.contentSearch,module:e.module,"module-id":e.moduleId},on:{update:e.updateFilterBy,updateContentSearch:e.updateContentSearch}}),e.importData?t("ImportPopup",{attrs:{"data-imported":e.dataImported,"form-id":e.formId},on:{upload:e.upload,close:e.closeImport,downloadTemplate:e.downloadTemplate}}):e._e(),e.importJson?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"import",expression:"'import'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-import"},on:{click:function(t){return e.$emit("import")}}}):e._e(),!e.hideActions.includes("export")&&e.exportData?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Export",expression:"'Export'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-table-arrow-right"},on:{click:function(t){return e.$emit("export")}}}):e._e(),e.hideActions.includes("activeView")?e._e():t("BaseSeparator",{staticClass:"q-mx-sm",attrs:{"is-vertical":"","has-inset":""}}),e.hideActions.includes("activeView")?e._e():t("ViewToggle",{attrs:{"active-view":e.activeView,"thumbnail-view":e.thumbnailView,"grid-view":e.gridView,module:e.module},on:{"update:activeView":e.updateActiveView}}),t("KanbanView",{attrs:{"kanban-view":e.kanbanView,"active-view":e.activeKanbanView,"kanban-list":e.kanbanList},on:{"update:activeKanbanView":e.updateActiveKanbanView,clickKanban:function(t){return e.$emit("clickKanban")}}}),e.dashboardView?t("BaseSeparator",{staticClass:"q-mx-sm",attrs:{"is-vertical":"","has-inset":""}}):e._e(),e.dashboardView?t("DashboardView",{attrs:{"dashboard-view":e.dashboardView,"chart-view":e.chartView,"table-view":e.tableView,page:e.page},on:{"update:activeDashboardView":e.updateActiveDashboardView}}):e._e(),e._t("extraIcon")],2)},a=[],o=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"columns",expression:"'columns'",modifiers:{bottom:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-table-column-plus-after"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("div",{staticClass:"row border"},[t("div",{staticClass:"title-3 q-pa-xs col-auto"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchColumns,expression:"searchColumns"}],ref:"searchQuery",staticClass:"q-pa-md",attrs:{type:"text",placeholder:"Show/Hide Columns",autofocus:""},domProps:{value:e.searchColumns},on:{keyup:function(t){return e.searchColumnList(e.searchColumns)},input:function(t){t.target.composing||(e.searchColumns=t.target.value)}}})]),e.repositoryFields&&e.columns.length?t("div",{staticClass:"col-auto q-pa-xs"},[t("BaseButton",{attrs:{label:"Apply",color:"primary"},on:{click:e.apply}})],1):e._e()]),t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight}},e._l(e._columns,(function(i){return t("ListItem",{key:i.id,class:i.display,attrs:{icon:i.isVisible?"mdi-checkbox-marked":"mdi-checkbox-blank-outline","is-selected":i.isVisible,label:i.label},on:{click:function(t){return e.updateColumns(i)}}})})),1)],1)],1)},r=[],n=(i("14d9"),i("cade")),l=i("1b0d"),d={name:"ToggleColumns",components:{ListItem:n["a"]},props:{columns:{type:Array,required:!0},repositoryFields:{type:Boolean,default:!1},toggleId:{type:Number,default:0}},data(){return{filterColumns:[],columnList:"",searchColumns:""}},computed:{_columns(){return this.columns.filter(e=>"NORMAL"===e.type)},scrollbarHeight(){const e=36*this._columns.length;return e>216?"276px":e+58+"px"}},methods:{updateColumns1(e){const t=this.columns,i=t.findIndex(t=>t.id===e);t[i].isVisible=!t[i].isVisible,this.$emit("update:columns",t)},apply(){this.filterColumns=[],console.log(this.columns),this.columns.forEach(e=>{!1===e.isVisible&&this.filterColumns.push({Fieldid:e.fieldId,value:e.isVisible})}),console.log(this.filterColumns),this.$emit("viewColumns",this.filterColumns),this.filterColumns=[]},searchColumnList(e){this.columns.forEach(t=>{t.display="",e&&(t.label.toLowerCase().includes(e.toLowerCase())||(t.display="hide"))})},async updateColumns(e){if(this.toggleId){const t=this.columns.findIndex(t=>t.id===e.id);this.columns[t].isVisible=!this.columns[t].isVisible;let i={id:e.hideId||0,columnName:e.id};const{error:s,payload:a}=await l["k"].updateHideColumns(this.toggleId,i);if(s)return void this.$alert.error(s);let o=[];e.hideId?o=this.columns.filter(t=>t.id!=e.hideId):(o=this.columns,o.push({id:a,columnName:e.id})),this.columns[t].hideId=e.hideId?0:a,this.$emit("update:columns",o)}else{const t=this.columns,i=t.findIndex(t=>t.id===e.id);t[i].isVisible=!t[i].isVisible,this.$emit("update:columns",t)}}}},c=d,u=(i("ee26"),i("2877")),h=i("4e73"),m=i("93dc"),p=i.n(m),f=Object(u["a"])(c,o,r,!1,null,"251c6f56",null),v=f.exports;p()(f,"components",{QMenu:h["a"]});var y=i("c559"),b=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"group",expression:"'group'",modifiers:{bottom:!0}}],attrs:{"is-flat":"",icon:"eva-copy-outline","no-border":""}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight,width:"240px"}},[t("div",{staticClass:"title-3 q-pa-md"},[e._v("Group By")]),e._l(e._columns,(function(i){return t("ListItem",{key:i.id,attrs:{icon:i.name===e.groupBy?"eva-radio-button-on":"eva-radio-button-off","is-selected":i.name===e.groupBy,label:i.label},on:{click:function(t){return e.updateGroupBy(i.name)}}})}))],2)],1)],1)},g=[],w={name:"GroupItems",components:{ListItem:n["a"]},props:{columns:{type:Array,required:!0},groupBy:{type:String,required:!0}},computed:{_columns(){return[{id:this.$nano.id(),label:"None",name:""},...this.columns.filter(e=>e.isGroupable)]},scrollbarHeight(){const e=36*this._columns.length;return e>216?"276px":e+58+"px"}},methods:{updateGroupBy(e){this.$emit("update:groupBy",e)}}},k=w,S=Object(u["a"])(k,b,g,!1,null,"72f07afc",null),C=S.exports;p()(S,"components",{QMenu:h["a"]});var _=i("27bd"),I=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"view-toggle"}},[e._l(e._views,(function(i){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.label,expression:"view.label",modifiers:{top:!0}}],key:i.id,attrs:{"is-flat":"","no-border":"",icon:e.activeView===i.value?i.activeIcon:i.icon,color:e.activeView===i.value?"secondary":"gray"},on:{click:function(t){return e.updateActiveView(i.value)}}})]})),t("DefaultView",{attrs:{value:e.showDefaultView,view:e.defaultView},on:{handleYes:e.handleYes,handleNo:e.handleNo,hideSheet:function(t){e.showDefaultView=!1}}})],2)},x=[],$=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"eva-info-outline","icon-color":"orange"},on:{input:e.hideSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Default view?")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" Do you want to make this "),t("b",[e._v('"('+e._s(e.view)+')"')]),e._v(" view is default? . ")]),t("p",[e._v("You can always change this view.")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"orange"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"orange"},on:{click:e.handleYes}})]},proxy:!0}])})},B=[],T=i("1c54"),F={name:"DefaultView",components:{Confirm:T["a"]},props:{value:{type:Boolean,required:!0},view:{type:String,required:!0}},methods:{handleNo(){this.$emit("handleNo",!1)},hideSheet(){this.$emit("hideSheet",!1)},handleYes(){this.$emit("handleYes",!1)}}},A=F,L=Object(u["a"])(A,$,B,!1,null,"38f8db3d",null),D=L.exports,E=i("4360"),O={name:"ViewToggle",components:{DefaultView:D},props:{activeView:{type:String,default:"GRID",validator(e){return["GRID","LIST","THUMBNAIL"].includes(e)}},thumbnailView:{type:Boolean,default:!1},gridView:{type:Boolean,default:!0},module:{type:String,default:""}},data(){return{views:[{id:this.$nano.id(),label:"Grid View",value:"GRID",icon:"mdi-view-grid-outline",activeIcon:"mdi-view-grid"},{id:this.$nano.id(),label:"List View",value:"LIST",icon:"mdi-format-list-checkbox",activeIcon:"mdi-view-list"},{id:this.$nano.id(),label:"Thumbnail View",value:"THUMBNAIL",icon:"eva-image-outline",activeIcon:"eva-image"}],showDefaultView:!1,defaultView:"",userId:this.$store.state.session.id,viewAlreadyAdded:!0,options:{}}},computed:{_views(){return this.thumbnailView?this.views:this.gridView?this.views.slice(0,2):this.views.slice(1,2)}},created(){this.getDefaultView()},methods:{updateActiveView(e){this.defaultView=e,this.showDefaultView=!0},handleYes(){this.showDefaultView=!1,this.viewAlreadyAdded?this.updateDefaultView():this.addDefaultView()},handleNo(){this.$emit("update:activeView",this.defaultView),this.showDefaultView=!1},async addDefaultView(){this.$store.commit("showLoadingBar");let e=this.$route.meta.menu,t={},i=this.$route.query.repositoryId,s="";i&&(s="files"),t=s?{preference:{[this.$route.meta.subMenu]:[{menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView}]}}:{preference:{[e]:[{menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView}]}};const{error:a,payload:o}=await l["n"].addProfilePreference(t);this.$store.commit("hideLoadingBar"),a?this.$alert.error("Error fetching changing view"):(E["a"].commit("setDefaultView",t.preference),E["a"].commit("setPreferenceId",o),this.viewAlreadyAdded=!0,this.options=t,this.$emit("update:activeView",this.defaultView))},async updateDefaultView(){this.$store.commit("showLoadingBar");let e=this.$route.meta.menu,t=this.$route.meta.breadcrumb,i=this.$route.query.repositoryId,s="";i&&(s="files");let a={};if(s)if(this.options[s])if(this.options[s].length){let e=this.options[s].findIndex(e=>e.subMenu===t);console.log(e),e>=0?this.options[s][e].view=this.defaultView:this.options[s].push({menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView})}else this.options[s]=[],this.options[s].push({menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});else this.options[s]=[],this.options[s].push({menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});else if(this.options[e])if(this.options[e].length){let i=this.options[e].findIndex(e=>e.subMenu===t);i>=0?this.options[e][i].view=this.defaultView:this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView})}else this.options[e]=[],this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});else this.options[e]=[],this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});let o=JSON.stringify(this.options);a={preference:JSON.parse(o)};const{error:r}=await l["n"].updateProfilePreference(this.$store.state.preferenceId,a);this.$store.commit("hideLoadingBar"),r?this.$alert.error("Error fetching changing view"):(E["a"].commit("setDefaultView",a.preference),this.$emit("update:activeView",this.defaultView))},async getDefaultView(){const{error:e,payload:t}=await l["n"].getProfilePreference(this.userId);e?this.$alert.error("Error fetching get default view"):t?(this.options=JSON.parse(t.options),E["a"].commit("setDefaultView",this.options),E["a"].commit("setPreferenceId",t.id)):this.viewAlreadyAdded=!1}}},M=O,q=(i("cd8d"),Object(u["a"])(M,I,x,!1,null,"75627166",null)),P=q.exports,V=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"kanban-view"}},[e.kanbanView?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Kanban View",expression:"'Kanban View'",modifiers:{bottom:!0}}],attrs:{"is-flat":"",icon:(e.activeKanban,"mdi-grid"),color:e.activeKanban?"secondary":"gray","no-border":""},on:{click:function(t){return e.$emit("clickKanban")}}},[e.kanbanList.length?t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight,width:"240px"}},e._l(e.kanbanList,(function(i){return t("ListItem",{key:i.id,attrs:{icon:i.name===e.activeView?"eva-radio-button-on":"eva-radio-button-off","is-selected":i.name===e.activeView,label:i.label},on:{click:function(t){return e.selectKanban(i.name)}}})})),1)],1):e._e()],1):e._e(),t("DefaultView",{attrs:{value:e.showDefaultView,view:e.defaultView},on:{handleYes:e.handleYes,handleNo:e.handleNo,hideSheet:function(t){e.showDefaultView=!1}}})],1)},N=[],R={name:"KanbanView",components:{ListItem:n["a"],DefaultView:D},props:{activeView:{type:String,default:""},kanbanView:{type:Boolean,default:!1},kanbanList:{type:Array,default:()=>[]}},data(){return{showDefaultView:!1,defaultView:"",userId:this.$store.state.session.id,viewAlreadyAdded:!0,options:{},defaultViewId:""}},computed:{scrollbarHeight(){const e=36*this.kanbanList.length;return e>216?"276px":e+58+"px"},activeKanban(){return"LIST"!==this.activeView&&"GRID"!==this.activeView&&"CHART"!==this.activeView&&"TABLE"!==this.activeView}},created(){this.getDefaultView()},methods:{selectKanban(e){let t=this.kanbanList.find(t=>t.name===e);console.log(t),t&&(this.defaultView=t.label),this.defaultViewId=e,this.showDefaultView=!0},handleYes(){this.showDefaultView=!1,this.viewAlreadyAdded?this.updateDefaultView():this.addDefaultView()},handleNo(){this.$emit("update:activeKanbanView",this.defaultViewId),this.showDefaultView=!1},async addDefaultView(){this.$store.commit("showLoadingBar");let e=this.$route.meta.menu,t={preference:{[e]:[{menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId}]}};const{error:i,payload:s}=await l["n"].addProfilePreference(t);this.$store.commit("hideLoadingBar"),i?this.$alert.error("Error fetching changing view"):(E["a"].commit("setDefaultView",t.preference),E["a"].commit("setPreferenceId",s),this.viewAlreadyAdded=!0,this.options=t,this.$emit("update:activeKanbanView",this.defaultViewId))},async updateDefaultView(){this.$store.commit("showLoadingBar");let e=this.$route.meta.menu,t=this.$route.meta.breadcrumb,i={};if(this.options[e])if(this.options[e].length){let i=this.options[e].findIndex(e=>e.subMenu===t);i>=0?this.options[e][i].view=this.defaultViewId:this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId})}else this.options[e]=[],this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId});else this.options[e]=[],this.options[e].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId});i={preference:this.options};const{error:s}=await l["n"].updateProfilePreference(this.$store.state.preferenceId,i);this.$store.commit("hideLoadingBar"),s?this.$alert.error("Error fetching changing view"):(E["a"].commit("setDefaultView",i.preference),this.$emit("update:activeKanbanView",this.defaultViewId))},async getDefaultView(){const{error:e,payload:t}=await l["n"].getProfilePreference(this.userId);e?this.$alert.error("Error fetching get default view"):t?(this.options=JSON.parse(t.options),E["a"].commit("setDefaultView",this.options),E["a"].commit("setPreferenceId",t.id)):this.viewAlreadyAdded=!1}}},z=R,j=(i("6c88"),Object(u["a"])(z,V,N,!1,null,"6f4b2704",null)),G=j.exports;p()(j,"components",{QMenu:h["a"]});var U=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"dashboard-view"}},e._l(e._views,(function(i){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.label,expression:"view.label",modifiers:{top:!0}}],key:i.id,attrs:{"is-flat":"","no-border":"",icon:e.dashboardView===i.value?i.activeIcon:i.icon,color:e.dashboardView===i.value?"secondary":"gray"},on:{click:function(t){return e.updateDashboardView(i.value)}}})})),1)},H=[],W={name:"DashboardView",props:{dashboardView:{type:String,default:"CHART",validator(e){return["CHART","TABLE","SANKEY","KANBAN"].includes(e)}},chartView:{type:Boolean,default:!1},tableView:{type:Boolean,default:!0},page:{type:String,default:""}},data(){return{views:[{id:this.$nano.id(),label:"Table View",value:"TABLE",icon:"mdi-table",activeIcon:"mdi-table"},{id:this.$nano.id(),label:"Chart View",value:"CHART",icon:"eva-image",activeIcon:"eva-image"},{id:this.$nano.id(),label:"Sankey View",value:"SANKEY",icon:"mdi-chart-sankey-variant",activeIcon:"mdi-chart-sankey-variant"}]}},computed:{_views(){if("REPORT"===this.page)return this.views.slice(0,2);let e=location.origin;return"https://edmsuat.sobhaapps.com"===e||"https://edms.sobhaapps.com"===e?this.views.slice(1,2):this.views.slice(1,3)}},methods:{updateDashboardView(e){this.$emit("update:activeDashboardView",e)}}},Y=W,J=(i("8180"),Object(u["a"])(Y,U,H,!1,null,"1da74fbd",null)),Q=J.exports,K=i("be3f"),X=i("0cdc"),Z=i("12b8"),ee=function(){var e=this,t=e._self._c;return t("div",{staticClass:"col",attrs:{id:"search-items"}},[t("div",{attrs:{id:"Simple-search"}},[t("div",{staticClass:"label",staticStyle:{"margin-left":"0px"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Search By",expression:"'Search By'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-filter-plus-outline",color:e.activeFilter?"secondary":"gray","no-border":""}},[e.filter?t("div"):e._e(),t("q-menu",{attrs:{"auto-close":"","transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top left"}},[t("div",{staticClass:"title-3 q-pa-xs border"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchColumns,expression:"searchColumns"}],ref:"searchQuery",staticClass:"q-pa-md",attrs:{type:"text",placeholder:"Type here to search"},domProps:{value:e.searchColumns},on:{click:function(e){e.stopPropagation()},keyup:function(t){return e.searchColumnList(e.searchColumns)},input:function(t){t.target.composing||(e.searchColumns=t.target.value)}}})]),t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight,width:"240px"}},[e._l(e.columnList,(function(i){return[i.display&&!1!==i.isFilter?t("ListItem",{key:i.id,attrs:{icon:i.selected?"eva-radio-button-on":"eva-radio-button-off","is-selected":i.selected,label:i.label},on:{click:function(t){return e.updateFilterBy(i.id)}}}):e._e()]}))],2)],1)],1),e.activeFilter?t("div",{staticClass:"selectedLabel"},[t("span",{staticClass:"text-bold"},[e._v(e._s(e.selectedLabel)+" :")])]):e._e(),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],ref:"searchQuery",staticClass:"q-px-xs",class:{"text-input-small":e.activeFilter,"text-input-big":!e.activeFilter},attrs:{type:"text",placeholder:e.isdataTypeIsDate?"YYYY-MM-DD":"Search"},domProps:{value:e.searchInput},on:{keyup:e.emitKeyUp,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateSimpleSearch.apply(null,arguments)},input:function(t){t.target.composing||(e.searchInput=t.target.value)}}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Search",expression:"'Search'",modifiers:{top:!0}}],attrs:{icon:"eva-search","no-border":"","is-flat":""},on:{click:e.updateSimpleSearch}}),e.activeFilter?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"clear",expression:"'clear'",modifiers:{top:!0}}],attrs:{icon:"mdi-close-circle","no-border":"","is-flat":""},on:{click:e.clearSimpleSearch}}):e._e()],1)])])},te=[],ie={name:"SimpleSearchWithFilter",components:{ListItem:n["a"]},props:{columns:{type:Array,default:()=>[]},filterBy:{type:Array,required:!0}},data(){return{filter:!1,activeFilter:!1,searchColumns:"",columnList:[],filterArray:[],searchInput:"",selectedLabel:"",FilterValue:"",isdataTypeIsDate:!1,isSingleSelect:!1}},computed:{scrollbarHeight(){const e=36*this.columns.length;return e>216?"276px":e+58+"px"}},watch:{$route:{deep:!0,handler(){this.$route.query.repositoryId||(this.activeFilter=!1,this.filterArray=[],this.searchInput="",this.FilterValue="")}},filterBy:{deep:!0,immediate:!0,handler(){0===this.filterBy.length&&(this.activeFilter=!1)}},columns:{deep:!0,immediate:!0,handler(){this.columnList=[],this.columns.forEach(e=>{this.columnList.push({...e,selected:!1,display:"show"})})}}},methods:{emitKeyUp(){this.FilterValue=this.searchInput,this.$emit("keyup",this.searchInput)},updateSimpleSearch(){if(this.activeFilter)if(0===this.filterArray.length){let e=[];this.$emit("update",e)}else if(this.isSingleSelect){let e=[];e[0]=this.FilterValue,this.filterArray[0].filters[0].value=JSON.stringify(e),this.filterArray[0].filters[0].arrayValue=e,this.$emit("click",this.filterArray),this.$emit("update",this.filterArray)}else this.filterArray[0].filters[0].value=this.FilterValue,this.$emit("click",this.filterArray),this.$emit("update",this.filterArray)},searchColumnList(e){this.columnList.forEach(t=>{t.display="show",t.label.toLowerCase().includes(e.toLowerCase())||(t.display="")})},updateFilterBy(e){this.filter=!this.filter,this.columnList.forEach(e=>{e.selected=!1});let t=this.columnList.find(t=>t.id===e);if(t){t.selected=!0,this.activeFilter=!0,this.selectedLabel=t.label;let e=[];if("None"==t.value)this.activeFilter=!1;else{let i="CONTAINS";"DATE"===t.dataType&&(i="IS_EQUALS_TO",this.isdataTypeIsDate=!0,this.isSingleSelect=!1),"SINGLE_SELECT"===t.dataType?(this.isSingleSelect=!0,e=[{filters:[{criteria:t.name,criteriaArray:[t.name],condition:i,value:"",arrayValue:"",dataType:"SINGLE_SELECT"}],groupCondition:""}],this.filterArray=e):(this.isSingleSelect=!1,e=[{filters:[{criteria:t.name,condition:i,value:"",dataType:t.dataType}],groupCondition:""}]),this.filterArray=e}}},clearSimpleSearch(){this.columnList.forEach(e=>{e.selected=!1}),this.isdataTypeIsDate=!1,this.filterArray=[],this.searchInput="",this.FilterValue="",this.activeFilter=!1,this.filter=!this.filter,this.$emit("update",this.filterArray)}}},se=ie,ae=(i("ba5a"),Object(u["a"])(se,ee,te,!1,null,"a32bb6e0",null)),oe=ae.exports;p()(ae,"components",{QMenu:h["a"]});var re={name:"ItemActions",components:{ToggleColumns:v,ViewToggle:P,SortItems:y["a"],GroupItems:C,FilterItems:_["a"],ExpandableSearch:K["a"],KanbanView:G,DashboardView:Q,ImportPopup:X["a"],SelectField:Z["a"],SimpleSearchWithFilter:oe},props:{item:{type:String,default:"item"},columns:{type:Array,required:!0},criteria:{type:String,required:!0},order:{type:String,required:!0},groupBy:{type:String,required:!0},filterBy:{type:Array,required:!0},activeView:{type:String,required:!0},thumbnailView:{type:Boolean,default:!1},filterColumns:{type:Array,default:()=>[]},selectedFilter:{type:Array,default:()=>[]},gridView:{type:Boolean,default:!0},kanbanView:{type:Boolean,default:!1},activeKanbanView:{type:String,default:""},kanbanList:{type:Array,default:()=>[]},jiraConnect:{type:Boolean,default:!1},importData:{type:Boolean,default:!1},dataImported:{type:Boolean,default:!1},hideActions:{type:Array,default:()=>[]},workflowInitiate:{type:Boolean,default:!1},initiateAccess:{type:Boolean,default:!1},gotoInbox:{type:Boolean,default:!1},workflowImport:{type:Boolean,default:!1},formId:{type:String,default:"0"},dashboardView:{type:String,default:""},chartView:{type:Boolean,default:!1},tableView:{type:Boolean,default:!1},searchContent:{type:Boolean,default:!1},contentSearch:{type:Object,default:()=>({contentSearchValue:"",fuzzy:0,searchType:1})},repositoryFields:{type:Boolean,default:!1},id:{type:Number,default:0},module:{type:String,default:""},moduleId:{type:[String,Number],default:0},deleteBtn:{type:Boolean,default:!1},mode:{type:String,default:""},page:{type:String,default:""},toggleId:{type:Number,default:0},simpleSearchFilter:{type:Boolean,default:!1},simpleSearchApplyed:{type:Boolean,default:!1},customProcessForm:{type:Boolean,default:!1},refresh:{type:Boolean,default:!0},exportData:{type:Boolean,default:!0},sendInvite:{type:Boolean,default:!1},downloadAll:{type:Boolean,default:!1},visibleDownload:{type:Boolean,default:!1},visiblePrint:{type:Boolean,default:!1},visibleEmail:{type:Boolean,default:!1},visibleDelete:{type:Boolean,default:!1},processForward:{type:Boolean,default:!1},importJson:{type:Boolean,default:!1}},data(){return{dateFilter:[{id:this.$nano.id(),label:"Today",value:"today"},{id:this.$nano.id(),label:"Yesterday",value:"yesterday"},{id:this.$nano.id(),label:"This Week",value:"7days"},{id:this.$nano.id(),label:"Last week",value:"week"},{id:this.$nano.id(),label:"This Month ",value:"Currentmonth"},{id:this.$nano.id(),label:"Last Month",value:"month"},{id:this.$nano.id(),label:"Last Quarter",value:"quarter"},{id:this.$nano.id(),label:"This Year",value:"currentyear"},{id:this.$nano.id(),label:"Last Year",value:"year"}],dateValue:""}},computed:{_columns(){return this.filterColumns.length?this.filterColumns:this.columns},checkIconCount(){let e,t=0;return this.visibleDownload&&(t+=1),this.visibleEmail&&(t+=1),this.visiblePrint&&(t+=1),this.visibleDelete&&(t+=1),2===t&&(e=!0),3===t&&(e=!0),4===t&&(e=!0),e}},watch:{dateValue:{deep:!0,immediate:!0,handler(){if(this.dateValue)if("today"===this.dateValue){let e=this.dateValue;const t=new Date;t.setDate(t.getDate());const i=t.toISOString().split("T")[0];this.$emit("filter",i,i,e)}else if("yesterday"===this.dateValue){let e=this.dateValue;const t=new Date;t.setDate(t.getDate()-1);const i=t.toISOString().split("T")[0];this.$emit("filter",i,i,e)}else if("week"===this.dateValue){let e=this.dateValue,t=new Date,i=t.getDay(),s=new Date(t);s.setDate(t.getDate()-i);let a=new Date(s);a.setDate(s.getDate()-7);let o=new Date(a);o.setDate(a.getDate()+6);let r=a.toISOString().split("T")[0],n=o.toISOString().split("T")[0];this.$emit("filter",r,n,e)}else if("7days"===this.dateValue){let e=this.dateValue,t=new Date,i=t.getDay(),s=new Date(t);s.setDate(t.getDate()-i);let a=new Date(s);a.setDate(s.getDate()+6);let o=s.toISOString().split("T")[0],r=a.toISOString().split("T")[0];this.$emit("filter",o,r,e)}else if("month"===this.dateValue){let e=this.dateValue,t=new Date,i=new Date(t.getFullYear(),t.getMonth()-1,2),s=new Date(t.getFullYear(),t.getMonth()),a=i.toISOString().split("T")[0],o=s.toISOString().split("T")[0];this.$emit("filter",a,o,e)}else if("quarter"===this.dateValue){let e=this.dateValue,t=new Date,i=t.getMonth(),s=(i-3+12)%12,a=new Date(t.getFullYear(),s,2),o=i-1,r=new Date(t.getFullYear(),o+1,1),n=a.toISOString().slice(0,10),l=r.toISOString().slice(0,10);this.$emit("filter",n,l,e)}else if("year"===this.dateValue){let e=this.dateValue,t=new Date,i=new Date(t.getFullYear()-1,0,2),s=new Date(t.getFullYear()-1,11,32),a=i.toISOString().split("T")[0],o=s.toISOString().split("T")[0];this.$emit("filter",a,o,e)}else if("Currentmonth"===this.dateValue){let e=this.dateValue,t=new Date,i=new Date(t.getFullYear(),t.getMonth(),1),s=`${i.getFullYear()}-${(i.getMonth()+1).toString().padStart(2,"0")}-${i.getDate().toString().padStart(2,"0")}`,a=`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`;this.$emit("filter",s,a,e)}else if("currentyear"===this.dateValue){let e=this.dateValue,t=new Date,i=new Date(t.getFullYear(),0,2),s=i.toISOString().split("T")[0],a=t.toISOString().split("T")[0];this.$emit("filter",s,a,e)}}}},methods:{updateColumns(e){this.$emit("update:columns",e)},updateCriteria(e){this.$emit("update:criteria",e)},updateOrder(e){this.$emit("update:order",e)},updateGroupBy(e){this.$emit("update:groupBy",e)},updateFilterBy(e,t){this.$emit("update:simpleSearchApplyed",!1),this.$emit("update:filterBy",e),this.$emit("update",e,t)},updateContentSearch(e){this.$emit("update:contentSearch",e)},updateActiveView(e){this.$emit("update:activeView",e)},searchTable(e){this.$emit("search",e)},updateActiveKanbanView(e){this.$emit("update:activeKanbanView",e)},updateActiveDashboardView(e){this.$emit("update:dashboardView",e)},upload(){this.$emit("upload")},closeImport(){this.$emit("close")},viewColumns(e){this.$emit("viewColumns",e)},updateSimpletSearchFilterBy(e){this.$emit("update:simpleSearchApplyed",!0),this.$emit("update:filterBy",e),this.$emit("update",e)},downloadTemplate(){this.$emit("downloadTemplate")}}},ne=re,le=(i("c925"),i("7225"),i("b047")),de=i("cb32"),ce=Object(u["a"])(ne,s,a,!1,null,"53ff3a83",null);t["a"]=ce.exports;p()(ce,"components",{QChip:le["a"],QAvatar:de["a"]})},"0ad7":function(e,t,i){},"0b2c":function(e,t,i){},"0ba8":function(e,t,i){"use strict";i("1fb7")},"0c04":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"addTask"}},[t("Sheet",{attrs:{value:e.value,width:e.taskWidth,"no-padding":""},on:{input:e.closeSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("title",(function(){return[e._v(e._s(e.title))]}))]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:e.isMaximized?"eva-collapse":"eva-expand"},on:{click:e.toggleWidth}})]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t("div",{staticClass:"col",attrs:{id:"task-form-view"}},[t("BaseScrollbar",{staticClass:"q-pa-md",attrs:{height:"calc(100vh - 60px)"}},[t("RenderForm",{attrs:{"no-padding":"",panels:e.panels,"secondary-panels":e.secondaryPanels,"form-settings":e.formSettings,"form-model":e.taskModel,"is-readonly":"VIEW"===e.mode},on:{save:e.saveTask}})],1)],1),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(i){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary"},on:{click:function(t){return e.showLinks(i.value)}}},[i.count?t("span",{staticClass:"badge"},[e._v(e._s(i.count)+" ")]):e._e()])})),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"workflows",expression:"'workflows'",modifiers:{left:!0}}],staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:"o_account_tree",color:"primary"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.taskWorkflowList,(function(i){return t("ListItem",{key:i.id,attrs:{icon:"mdi-sitemap",label:i.label},on:{click:function(t){return e.getForm(i)}}})})),1)],1)],1)],2)])]},proxy:!0}],null,!0)}),t("Sheet",{attrs:{width:e.taskWidth,"has-footer":""},on:{input:e.closeAddTaskSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("title",(function(){return[e._v(e._s(e.headerTitle))]}))]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:e.isMaximized?"eva-collapse":"eva-expand"},on:{click:e.toggleWidth}})]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t("div",{staticClass:"col",attrs:{id:"form-view"}},[t("BaseScrollbar",{staticClass:"q-pa-md",attrs:{height:"calc(100vh - 145px)"}},[t("RenderForm",{attrs:{"no-padding":"","workflow-id":e.workflowFormId,panels:e.addWorkflowForm.panels,"secondary-panels":e.addWorkflowForm.secondaryPanels,"form-settings":e.addWorkflowForm.settings,"workflow-form-model":e.workflowFormModel,"save-action":e.saveAction},on:{"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t},"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t}}})],1)],1),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},e._l(e.tabs,(function(i){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary"},on:{click:function(t){return e.showLinks(i.value)}}},[i.count?t("span",{staticClass:"badge"},[e._v(e._s(i.count)+" ")]):e._e()])})),1)])]},proxy:!0},{key:"footer",fn:function(){return[e.actions?t("div",{staticClass:"footer row"},[e._l(e.actions,(function(i){return[t("BaseButton","Approve"===i||"Complete"===i||"Rightsize"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"positive"},on:{click:function(t){return e.validateRequest(i)}}}:"Reject"===i||"Terminate"===i||"Force Close"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"red"},on:{click:function(t){return e.validateRequest(i)}}}:"Forward"===i||"Reply"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"orange"},on:{click:function(t){return e.validateRequest(i)}}}:{key:i,staticClass:"q-ml-md",attrs:{label:i},on:{click:function(t){return e.validateRequest(i)}}})]}))],2):e._e()]},proxy:!0}],null,!0),model:{value:e.addTaskSheet,callback:function(t){e.addTaskSheet=t},expression:"addTaskSheet"}}),t("Sheet",{attrs:{width:"30vw","sub-actions":!!e.attachmentList.length,upload:!0},on:{input:e.closeAttachmentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:e.getAttachments}})]},proxy:!0},{key:"upload",fn:function(){return[t("div",{staticClass:"hint",on:{click:function(t){return e.$refs.attachments.click()}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),t("div",{staticClass:"title text-blue"},[e._v("UPLOAD FILES")]),t("div",{staticClass:"description"},[e._v("Click here to choose files and upload")])],1)]},proxy:!0},{key:"subActions",fn:function(){return[[t("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:e.fileSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}}),e._v(" Select All ")],t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!e.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentShare}}),(e.selectedFileCount,e._e())]},proxy:!0}]),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:e.uploadAttachments}}),e._l(e.attachmentList,(function(i){return[t("div",{key:i.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:i.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){i.checked=!i.checked}}})],1),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(i.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(i)}}},[e._v(" "+e._s(i.name)+" ")]),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(i)}}})],1)]),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(i.createdAt)))]),i.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(i.createdByEmail))])]:e._e(),i.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(i.size)))])]:e._e()],2)])]}))],2)]),t("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"30"},on:{input:e.closeCommentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 155px)"}},[e._l(e.commentsList,(function(i,s){return[t("q-chat-message",{key:s,staticClass:"q-ma-sm",attrs:{name:i.createdBy===e.$store.state.session.id?"me":i.createdByEmail,text:[i.comments],"text-html":"",sent:i.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(i),"bg-color":i.createdBy===e.$store.state.session.id?"primary-1":"secondary-1"}})]}))],2)],1),t("div",{staticClass:"col q-pa-sm borderTop"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])])]),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])])]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])]),t("Sheet",{attrs:{width:"30vw"},on:{input:e.closeTaskSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Workflows ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Add Workflows",expression:"'Add Workflows'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-plus",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getworkflowForm(e.workflowFormId)}}})]},proxy:!0}]),model:{value:e.taskSheet,callback:function(t){e.taskSheet=t},expression:"taskSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[e._l(e.processInfo,(function(i){return[t("div",{key:i.id,staticClass:"taskEntries"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto q-mr-md",staticStyle:{"margin-top":"3px"},on:{click:function(t){return e.getWorkflowAudit(i.requestNo)}}},[e._v(" Request No: "+e._s(i.requestNo)+" ")]),i.actionUser?[t("q-chip",{attrs:{size:"10px",color:"yellow","text-color":"white"}},[e._v(" "+e._s(i.actionUser)+" ")])]:e._e(),t("q-chip",{attrs:{size:"10px",color:e.getColor(i.flowStatus),"text-color":"white"}},[e._v(" "+e._s("0"===i.flowStatus?"Open":"Completed")+" ")])],2)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col-12"},[e._v(" Raised By: "+e._s(i.raisedBy)+" "),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" Raised At: "+e._s(e.$day.format(i.raisedAt))+" ")],1)])])]}))],2)]),t("Sheet",{attrs:{width:"100vw","has-footer":"","no-padding":""},on:{input:function(t){e.processSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.headerTitle)+" ")]},proxy:!0}]),model:{value:e.processSheet,callback:function(t){e.processSheet=t},expression:"processSheet"}},[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t("div",{staticClass:"col",attrs:{id:"form-view"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 145px)"}},[t("RenderForm",{attrs:{"form-id":e.formIdName,panels:e.addWorkflowForm.panels,"secondary-panels":e.addWorkflowForm.secondaryPanels,"form-settings":e.addWorkflowForm.settings,"form-model":e.formModel,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t}}})],1)],1),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(i){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary"},on:{click:function(t){return e.showLinks(i.value)}}},[i.count?t("span",{staticClass:"badge"},[e._v(e._s(i.count)+" ")]):e._e()])]}))],2)])]),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}}),t("EmailSharing",{attrs:{"repository-id":e.repositoryId,"file-list":e.selectedFileList},on:{"update:fileList":function(t){e.selectedFileList=t},"update:file-list":function(t){e.selectedFileList=t}},model:{value:e.emailSharingSheet,callback:function(t){e.emailSharingSheet=t},expression:"emailSharingSheet"}})],1)},a=[],o=(i("14d9"),i("caad"),i("381e")),r=i("4bc4"),n=i("869e"),l=i("6df3"),d=i("1b0d"),c=i("9bc4"),u=i("fa1f"),h=i("a7d2"),m=i("dd90"),p=i("bc3a"),f=i.n(p),v=i("cade"),y=i("695e"),b=i("6a70"),g=i("2f62"),w=i("5e23"),k={name:"AddTask",components:{Sheet:o["a"],RenderForm:r["a"],FileIcon:u["a"],CheckboxField:n["a"],TextAreaField:l["a"],ListItem:v["a"],TextBuilderField:y["a"],Modal:b["a"],EmailSharing:w["a"]},props:{value:{type:Boolean,default:!1},formSettings:{type:Object,required:!0},panels:{type:Array,required:!0},secondaryPanels:{type:Array,default:()=>[]},formId:{type:Number,default:0},taskModel:{type:Object,default:()=>{}},mode:{type:String,default:""},taskName:{type:String,default:""},repositoryId:{type:Number,default:0},workflowTask:{type:Boolean,default:!1},taskWorkflowList:{type:Array,default:()=>[]},selectedTask:{type:Object,default:()=>{}},documentTask:{type:Boolean,default:!1},repositoryFile:{type:Object,default:()=>{}}},data(){return{taskWidth:"720px",tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0}],attachmentSheet:!1,addTaskSheet:!1,taskSheet:!1,commentsSheet:!1,commentText:"",commentsList:[],selectAll:!1,attachmentLoad:null,attachmentList:[],fileSheet:!1,selectedFile:{},actions:[],workflowsSheet:!0,workflowList:[],saveAction:"",workflowId:0,addWorkflowForm:[],workflowPanels:[],form:[],workflowName:"",workflowDescription:"",workflowFormId:0,workflowFormModel:{},processId:0,transactionId:0,workflowDetails:[],countWorkflow:0,processInfo:[],workflowFormTaskList:{},formList:{},formStage:{},processSheet:!1,formDetails:{},formIdName:"",formModel:{},headerTitle:"",advancedCommentsSheet:!1,advancedCommentText:"",emailSharingSheet:!1,selectedFileList:[]}},computed:{...Object(g["c"])(["LoadingBarPage"]),isMaximized(){return"100vw"===this.taskWidth},title(){return"VIEW"===this.mode?"View Task":"EDIT"===this.mode?"Edit Task":"FORWARD"===this.mode?"Forward Task":"COPY"===this.mode?"Copy Task":"Add Task"},formName(){return this.formSettings.general.name},formDescription(){return this.formSettings.general.description},selectedFileCount(){let e=this.attachmentList.filter(e=>e.checked).length;return e},scrollbarHeight(){const e=36*this.columns.length;return e>216?"276px":e+58+"px"}},watch:{taskModel:{immediate:!0,handler(){this.taskModel.id&&(this.attachmentList=[],this.getComments(),this.getAttachments())}},workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&this.initiateRequest()}},attachmentSheet:{immediate:!0,handler(){this.attachmentSheet&&this.taskModel.id||clearInterval(this.attachmentLoad)}}},methods:{toggleWidth(){this.taskWidth="100vw"===this.taskWidth?"720px":"100vw"},closeSheet(){this.$emit("close",!1)},closeAttachmentsSheet(){this.attachmentSheet=!1},closeAddTaskSheet(){this.addTaskSheet=!1},closeTaskSheet(){this.taskSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},getColor(e){return"0"===e?"orange":"1"===e||"Medium"===e?"green":"primary"},showLinks(e){"ATTACHMENTS"===e?this.attachmentSheet=!0:"COMMENTS"===e?this.commentsSheet=!0:"HISTORY"===e?this.$emit("history",this.formList[0].value[0].processId,this.formList[0].workflowId,this.formList[0].value[0].requestNo):"PRINT"===e&&window.print()},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const e=a/s[o];return i.format(Math.round(e),o)}},fileSelectAll(){this.attachmentList=this.attachmentList.map(e=>({...e,checked:this.selectAll}))},showHistory(){},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},fileSize(e){return Object(h["a"])(e)},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let i="";if(Object(m["d"])(t))i="https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":"https://app.ezofis.com"===e?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html";else{if("http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/1`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`}{let i="";if(Object(m["d"])(t))i="https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":"https://app.ezofis.com"===e?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html";else{if(Object(m["b"])(t)||"http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}`}}},openFile(e){this.selectedFile=e,this.fileSheet=!0},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(e=>{e.checked&&this.selectedFileList.push({id:e.id,name:e.name})}),this.emailSharingSheet=!0},async saveTask(e){const t=["itemid","createdBy","createdAt","modifiedBy","modifiedAt","icon","buttonAction","formId","status","color","link","selected","isDeleted","createdByEmail","modifiedByEmail","emailStatus","expandSubworkflow"],i=Object(c["a"])(e,t);try{this.$store.commit("showLoadingBarPage");const{id:e,...t}=i;let s=0;s="COPY"===this.mode?0:e||0;let a={};if(s)a={fields:t};else{let e=[];this.attachmentList.length&&this.attachmentList.forEach(t=>{e.push(t.id)}),a={fields:t,task:{comments:this.commentsList,fileIds:e}}}const{data:o,error:r}=await d["g"].saveFormEntry(this.formId,s,a);if(this.workflowDetails.length&&this.linkTaskWorkflowProcess(o.output),r)return void this.$alert.error(r);e?this.$alert.success(this.taskName+" edited successfully"):(this.documentTask&&this.linkTaskDocument(o.output),this.$alert.success("New task added successfully")),this.getUsers(a.fields),this.closeSheet(),this.workflowTask||this.documentTask?this.$emit("addEntry",this.formId,o.output):this.$emit("refresh",this.workflowId)}catch(s){console.log(s)}finally{this.$store.commit("hideLoadingBarPage")}},async linkTaskDocument(e){let t={wFormId:this.formId,formEntryId:e,fileInfo:{repositoryId:this.repositoryFile.repositoryId,itemId:this.repositoryFile.id}};const{error:i}=await d["g"].linkTaskDocument(t);i&&this.$alert.error(i)},async getComments(){this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=0)}),this.commentsList=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await d["g"].getFormComments(this.formId,this.taskModel.id);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t.length&&(this.commentsList=t,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}))},async saveComment(){if(this.commentText)if(this.taskModel.id){this.$store.commit("showLoadingBar");const{error:e}=await d["g"].insertFormComment(this.formId,this.taskModel.id,{comments:this.commentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.commentText="",this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.commentText=""},async saveAdvancedComment(){if(this.advancedCommentText)if(this.taskModel.id){this.$store.commit("showLoadingBar");const{error:e}=await d["g"].insertFormComment(this.formId,this.taskModel.id,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.advancedCommentText="",this.advancedCommentsSheet=!1},async uploadAttachments(e){if(this.taskModel.id){const i=e.target.files[0];this.$store.commit("showLoadingBar");const s=new FormData;s.append("formId",this.formId),s.append("repositoryId",this.repositoryId),s.append("entryId",this.taskModel.id),s.append("file",i);let a=e.target.files[0].name;const o=a.split(".").pop();if(!Object(m["a"])(o))return void this.$alert.info("This file format is not supported");try{const t=await f()({url:"https://appuat.ezofis.com/ezofisapi/api/form/taskAttachmentWithEntryId",method:"POST",data:s,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:i,data:a}=t;if(this.$store.commit("hideLoadingBar"),e.target.value="",200!==i||!a)throw t;this.$alert.success("Document attached")}catch(t){this.$store.commit("hideLoadingBar"),this.$alert.error("Error uploading file"),console.error(t)}this.attachmentLoad=setInterval(()=>this.getAttachments(),5e3)}else{this.$store.commit("showLoadingBar");const i=e.target.files[0],s=new FormData;s.append("file",i),s.append("formId",this.formId),s.append("repositoryId",this.repositoryId);let a=e.target.files[0].name;const o=a.split(".").pop();if(!Object(m["a"])(o))return void this.$alert.info("This file format is not supported");try{const t=await f()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:s,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:a,data:o}=t;if(this.$store.commit("hideLoadingBar"),e.target.value="",200!==a)throw"Invalid response";let r=JSON.parse(o);this.attachmentList.push({id:Number(r.fileId),name:i.name,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:i.size,initiate:!0,checked:!1})}catch(t){this.$store.commit("hideLoadingBar"),console.error(t),this.$alert.error("error attaching file")}}},async getAttachments(){this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=0)});let e=this.attachmentList.length;this.$store.commit("showLoadingBar");const{error:t,payload:i}=await d["g"].getFormAttachments(this.formId,this.taskModel.id);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):i.length?(e!==i.length&&(this.attachmentList=i.map(e=>({...e,checked:!1})),clearInterval(this.attachmentLoad)),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)})):this.attachmentList=[]},async attachmentDelete(e){if(this.$store.commit("showLoadingBar"),e.initiate){const{error:t}=await d["r"].deleteUploadedFiles([e.id]);if(t)return void this.$alert.error(t);this.$store.commit("hideLoadingBar"),this.attachmentList=this.attachmentList.filter(t=>t.id!==e.id)}else{const{error:t}=await d["p"].fileDelete(e.repositoryId,e.id);if(t)return void this.$alert.error(t);this.$store.commit("hideLoadingBar"),this.getAttachments()}},validateRequest(e){this.saveAction=e},async initiateRequest(){let e={};e={workflowId:this.workflowId,transactionId:0,review:this.saveAction,formData:{formId:this.workflowFormId,formEntryId:this.form.entryCount,fields:this.workflowFormModel}},this.$store.commit("showLoadingBarSave");const{error:t,payload:i}=await d["t"].processTransaction(e);this.$store.commit("hideLoadingBarSave"),this.saveAction="",t?this.$alert.error(t):(this.$alert.success(i.requestNo+" Request Initiated"),this.workflowDetails.push({workflowId:this.workflowId,processId:i.processId,transactionId:i.transactionId}),this.selectedTask.id&&this.linkTaskWorkflowProcess(this.selectedTask.id),this.closeAddTaskSheet(),this.$emit("refresh",this.workflowId))},async getForm(e){if(this.workflowId=e.id,this.headerTitle=e.stage,this.actions=e.actions,this.selectedTask.formId&&this.selectedTask.id&&await this.getWorkflowList(this.workflowId),e.formId)if(this.workflowFormId=e.formId,this.processInfo.length)this.countWorkflow=this.processInfo.length,this.taskSheet=!0;else{const{error:e,payload:t}=await d["g"].getForm(this.workflowFormId);if(e)return void this.$alert.error(e);t&&(this.form=t,this.workflowName=this.form.name,this.workflowDescription=this.form.description,this.addWorkflowForm=JSON.parse(t.formJson),this.workflowPanels=this.addWorkflowForm.panels,this.addTaskSheet=!0)}},async getworkflowForm(e){this.closeTaskSheet();const{error:t,payload:i}=await d["g"].getForm(e);this.workflowFormId=e,t?this.$alert.error(t):i&&(this.form=i,this.workflowName=this.form.name,this.workflowDescription=this.form.description,this.addWorkflowForm=JSON.parse(i.formJson),this.workflowPanels=this.addWorkflowForm.panels,this.addTaskSheet=!0)},async getworkflowDetailsForm(e){const{error:t,payload:i}=await d["g"].getForm(e);t?this.$alert.error(t):i&&(this.form=i,this.workflowName=this.form.name,this.workflowDescription=this.form.description,this.addWorkflowForm=JSON.parse(i.formJson),this.workflowPanels=this.addWorkflowForm.panels,this.processSheet=!0,this.$store.commit("hideLoadingBarPage"))},async linkTaskWorkflowProcess(e){let t={};t={wFormId:this.formId,formEntryId:e,workflow:this.workflowDetails};const{error:i}=await d["g"].linkTaskWorkflowProcess(t);i&&this.$alert.error(i)},async getWorkflowList(e){let t={};t={wId:e,fId:this.selectedTask.formId,entryId:this.selectedTask.id};const{error:i,payload:s}=await d["g"].getWorkflowTaskList(e,this.selectedTask.formId,this.selectedTask.id,t);this.workflowFormTaskList=s,s.processInfo&&(this.processInfo=s.processInfo),i&&this.$alert.error(i)},async getWorkflowAudit(e){this.$store.commit("showLoadingBarPage");const{error:t,payload:i}=await d["o"].getWorkflowData(this.workflowId,{filterBy:[{groupCondition:"",filters:[{criteria:"requestNo",condition:"IS_EQUALS_TO",value:e}]}],currentPage:1,itemsPerPage:10,mode:""}),{data:s,meta:a}=i;if(this.formList=s||{},this.formStage=a,this.formList[0].value[0].formData){let e=Object.keys(this.formList[0].value[0].formData.fields),t={};e.forEach(e=>{t[e]=this.validateTypeValue(this.formList[0].value[0].formData.fields[e])}),this.formModel=t}this.headerTitle=""+this.formList[0].value[0].name,this.formIdName=String(this.formList[0].value[0].formData.formId),this.getworkflowDetailsForm(this.formIdName),t&&this.$alert.error(t)},validateTypeValue(e){if(e)try{var t=JSON.parse(e);if("object"===typeof t)return t}catch(i){return e}return e},async getUsers(e){const{error:t,payload:i}=await d["s"].getUserList();if(t)return void this.$alert.error("Error fetching users");let s={id:0,title:e["e_NFnW0JxrLpZxqPeJS7K"],status:e["11m7YRT-7kdLx-g6iGojc"],remarks:e["2XOJMCR_DVb-5TwVPVdEX"],category:"TASK",createdBy:e["pM6Vly-JRlfroRrziE1jr"],lastActionBy:this.$store.state.session.email};const a=s.createdBy,o=i.filter(e=>a.includes(e.value)),r=o.map(e=>e.id);r.forEach(e=>{const t={...s,createdBy:e};this.insertNotification(t)}),console.log("email",o,r)},async insertNotification(e){const{error:t}=await d["b"].insertNotification(e);t&&this.$alert.error(t)}}},S=k,C=(i("a4c9"),i("2877")),_=i("4e73"),I=i("8169"),x=i("cb32"),$=i("b047"),B=i("93dc"),T=i.n(B),F=Object(C["a"])(S,s,a,!1,null,"0b56d901",null);t["a"]=F.exports;T()(F,"components",{QMenu:_["a"],QChatMessage:I["a"],QAvatar:x["a"],QChip:$["a"]})},"0ce8":function(e,t,i){},"0f1c":function(e,t,i){"use strict";i("431c")},1026:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("FileList",{staticClass:"q-mb-md",attrs:{"has-files":!!e.files.length},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Uploading")]},proxy:!0},e.files.length?{key:"actions-minimized",fn:function(){return[t("Pulse",{staticClass:"q-mr-md",attrs:{color:"light-green"}})]},proxy:!0}:null,{key:"default",fn:function(){return e._l(e.files,(function(i,s){return t("FileListItem",{key:i.id,staticClass:"file",attrs:{file:i}},[e.showProgress?t("q-circular-progress",{staticClass:"font-semibold",attrs:{"show-value":"","font-size":"13px",size:"48px",color:"light-green","track-color":e.trackColor,thickness:.22,value:i.uploadedPercentage,indeterminate:!i.uploadedPercentage}},[e._v(" "+e._s(i.uploadedPercentage)+"% ")]):e._e(),e.showDeleteBtn?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.top",value:"Delete",expression:"'Delete'",arg:"red",modifiers:{top:!0}}],staticClass:"q-mr-md",attrs:{"is-flat":"",color:"red",icon:"eva-trash-2-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete",s)}}}):e._e()],1)}))},proxy:!0}],null,!0)})},a=[],o=i("9ef6"),r=i("d406"),n=i("4e64"),l=i("2f62"),d={name:"UploadingFileList",components:{FileList:o["a"],FileListItem:r["a"],Pulse:n["a"]},props:{files:{type:Array,required:!0},showProgress:{type:Boolean,default:!0},showDeleteBtn:{type:Boolean,default:!1}},computed:{...Object(l["c"])(["darkTheme"]),trackColor(){return this.darkTheme?"gray-8":"gray-3"}}},c=d,u=(i("73e0"),i("2877")),h=i("58ea"),m=i("93dc"),p=i.n(m),f=Object(u["a"])(c,s,a,!1,null,"7aa1b7fe",null);t["a"]=f.exports;p()(f,"components",{QCircularProgress:h["a"]})},1137:function(e,t,i){},1549:function(e,t,i){"use strict";var s=i("2250"),a=i("a809"),o=i("5132"),r=i("e621");function n(e,t){return t.length<2?e:Object(o["a"])(e,Object(r["a"])(t,0,-1))}var l=n,d=i("4dc8");function c(e,t){return t=Object(s["a"])(t,e),e=l(e,t),null==e||delete e[Object(d["a"])(Object(a["a"])(t))]}t["a"]=c},"1a82":function(e,t,i){},"1bfa":function(e,t,i){},"1fb7":function(e,t,i){},"204d":function(e,t,i){},"21e0":function(e,t,i){"use strict";i("7334")},"27bd":function(e,t,i){"use strict";i("caad");var s=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"filter",expression:"'filter'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"eva-funnel-outline",color:e.activeFilter?"secondary":"gray"},on:{click:function(t){e.model=!0}}},[t("Sheet",{attrs:{width:"50vw","has-footer":""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Filter "+e._s(e.item)+"s ")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-pa-md",attrs:{id:"filters"}},[e.searchContent?[t("div",{staticClass:"description"},[e._v(" To search by content, type any text to search the entire folder ")]),t("TextField",{staticClass:"q-mb-md",attrs:{placeholder:"Search the document by content"},model:{value:e.contentSearch.contentSearchValue,callback:function(t){e.$set(e.contentSearch,"contentSearchValue",t)},expression:"contentSearch.contentSearchValue"}}),t("div",{staticClass:"q-mb-md",staticStyle:{"border-bottom":"1px solid var(--divider-color)"}},[e.showAdvanceOptions?t("div",{staticClass:"q-my-md"},[t("SingleChoiceField",{staticClass:"col q-mb-md",attrs:{options:e.searchOptions,"options-per-line":2,label:"Advanced Search Options"},model:{value:e.contentSearch.searchType,callback:function(t){e.$set(e.contentSearch,"searchType",t)},expression:"contentSearch.searchType"}}),t("FormFieldLabel",{attrs:{label:"Search similarity"}}),t("q-slider",{attrs:{color:"secondary",markers:"","marker-labels":"",min:0,max:10,label:""},model:{value:e.contentSearch.fuzzy,callback:function(t){e.$set(e.contentSearch,"fuzzy",t)},expression:"contentSearch.fuzzy"}})],1):e._e(),t("div",{staticClass:"row items-center q-mb-md"},[t("div",{staticClass:"col"},[e.showAdvanceOptions?t("div",{staticClass:"row items-center cursor-pointer",on:{click:function(t){e.showAdvanceOptions=!1}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-minus",color:"secondary"}}),t("div",{staticClass:"options"},[e._v("Hide Advanced Options")])],1):t("div",{staticClass:"row items-center cursor-pointer",on:{click:function(t){e.showAdvanceOptions=!0}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-plus",color:"secondary"}}),t("div",{staticClass:"options"},[e._v("Advanced Options")])],1)]),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"actions"},[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:e.clearContentSearch}}),t("BaseButton",{attrs:{label:"search"},on:{click:e.apply}})],1)])])])]:e._e(),e.filterGroups.length?[e._l(e.filterGroups,(function(i,s){return[t("div",{key:i.id,staticClass:"filter-group"},[t("div",{staticClass:"header"},[t("div",{staticClass:"label q-mr-md"},[e._v("Criteria")]),t("div",{staticClass:"label q-mr-md"},[e._v("Condition")]),t("div",{staticClass:"label q-mr-sm"},[e._v("Value")]),t("BaseActionButton",{attrs:{"is-flat":"",color:"secondary",icon:"eva-plus","no-border":""},on:{click:function(t){return e.addFilter(s)}}})],1),t("BaseSeparator",{staticClass:"q-mb-md",attrs:{"has-inset":""}}),e._l(i.filters,(function(i,a){return t("ValidationObserver",{key:i.id,ref:"form",refInFor:!0,staticClass:"filter row"},[t("ValidationProvider",{key:i.id,staticClass:"col q-mr-md",attrs:{name:"criteria",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:o}){return[t("MultiSelectField",{attrs:{"is-mandatory":"","is-searchable":!0,options:e._columns,error:o[0]},on:{input:function(t){return e.applyDataType(s,a,i.criteriaArray)}},model:{value:i.criteriaArray,callback:function(t){e.$set(i,"criteriaArray",t)},expression:"filter.criteriaArray"}})]}}],null,!0)}),t("ValidationProvider",{staticClass:"col-3 q-mr-md",attrs:{name:"condition",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("SelectField",{attrs:{"is-mandatory":"","is-searchable":!0,options:e.conditions(i.criteriaArray),error:s[0]},model:{value:i.condition,callback:function(t){e.$set(i,"condition",t)},expression:"filter.condition"}})]}}],null,!0)}),"SHORT_TEXT"===i.dataType||"BARCODE"===i.dataType?t("ValidationProvider",{staticClass:"col-3 q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"NUMBER"===i.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("NumberField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"DATE"===i.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("DateField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"TIME"===i.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TimeField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}):"SINGLE_SELECT"===i.dataType?t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[e.checkOptions(i.criteriaArray)?[t("AsyncMultiSelectField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0],"api-path":e.apiPath,"column-name":i.criteriaArray},model:{value:i.arrayValue,callback:function(t){e.$set(i,"arrayValue",t)},expression:"filter.arrayValue"}}),e._e()]:[e._e(),t("MultiSelectField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),"is-searchable":!0,options:e.getOptions(i.criteriaArray),error:s[0]},model:{value:i.arrayValue,callback:function(t){e.$set(i,"arrayValue",t)},expression:"filter.arrayValue"}})]]}}],null,!0)}):t("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("TextField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"filter.value"}})]}}],null,!0)}),t("div",{staticClass:"remove-filter"},[t("BaseActionButton",{attrs:{"is-flat":"",color:"red","no-border":"",icon:"eva-close-outline"},on:{click:function(t){return e.removeFilter(s,a)}}})],1)],1)})),t("BaseSeparator",{attrs:{"has-inset":""}}),t("div",{staticClass:"row"},[t("Action",{staticClass:"col",attrs:{icon:"eva-plus-outline",label:"Add Filter Group"},on:{click:function(t){return e.addFilterGroup(s+1)}}}),t("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),t("Action",{staticClass:"col",attrs:{icon:"eva-trash-2-outline",label:"Delete Group"},on:{click:function(t){return e.removeFilterGroup(s)}}})],1)],2),s!==e.filterGroups.length-1?t("div",{key:s,staticClass:"row justify-center"},[t("Toggle",{staticClass:"q-my-md",attrs:{options:e.groupConditions},on:{input:e.groupCondition},model:{value:i.groupCondition,callback:function(t){e.$set(i,"groupCondition",t)},expression:"group.groupCondition"}})],1):e._e()]}))]:[t("div",{staticClass:"add-filter",on:{click:e.addFilterGroup}},[t("BaseIcon",{attrs:{name:"eva-plus","inherit-color":""}}),t("div",{staticClass:"q-ml-sm"},[e._v("Add Filter")])],1)]],2)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:e.clearFilter}}),t("BaseButton",{attrs:{label:"apply"},on:{click:e.apply}})]},proxy:!0}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)},a=[],o=(i("13d5"),i("14d9"),i("874f")),r=i("9996"),n=i("7bb1"),l=i("381e"),d=i("b3d1"),c=i("12b8"),u=i("94f5"),h=i("670a"),m=i("970a"),p=i("ad54"),f=i("53c1"),v=i("cedb"),y=i("70a9"),b=i("0c21"),g=i("c3d2"),w=i("1b0d"),k=i("0d5e"),S=i("3445"),C=i("9234"),_={name:"FilterItems",components:{ValidationObserver:n["a"],ValidationProvider:n["b"],Sheet:l["a"],TextField:d["a"],SelectField:c["a"],Action:u["a"],Toggle:h["a"],NumberField:p["a"],DateField:f["a"],TimeField:v["a"],AsyncMultiSelectField:y["a"],MultiSelectField:g["a"],AsyncSelectField:b["a"],FormFieldLabel:S["a"],SingleChoiceField:C["a"]},props:{item:{type:String,default:"item"},columns:{type:Array,required:!0},filterBy:{type:Array,required:!0},isBordered:{type:Boolean,default:!1},selectedFilter:{type:Array,default:()=>[]},searchContent:{type:Boolean,default:!1},contentSearch:{type:Object,default:()=>({contentSearchValue:"",fuzzy:0,searchType:1})},module:{type:String,default:""},moduleId:{type:[String,Number],default:0}},data(){return{model:!1,groupConditions:["AND","OR"],filterGroups:[],activeFilter:!1,userList:[],options:[],showAdvanceOptions:!1,searchOptions:[{id:this.$nano.id(),label:"Any of the Words",value:1},{id:this.$nano.id(),label:"All of the Words",value:2}]}},computed:{_columns(){var e=this.columns.reduce((e,t)=>("isFilter"in t?t.isFilter&&e.push({id:t.id,label:t.label,value:t.name,dataType:t.dataType}):e.push({id:t.id,label:t.label,value:t.name,dataType:t.dataType}),e),[]);return e},apiPath(){if("repository"===this.module){if(this.$route.query.repositoryId)return`/repository/${this.moduleId}/uniqueColumnValues`}else if("form"===this.module)return`/form/${this.moduleId}/uniqueColumnValues`;return""}},watch:{model:{deep:!0,handler(){this.model}},$route:{deep:!0,handler(){this.$route.query.repositoryId||(this.filterGroups=[],this.activeFilter=!1)}},filterBy:{deep:!0,immediate:!0,handler(){0===this.filterBy.length&&""===this.contentSearch.contentSearchValue&&(this.activeFilter=!1)}},contentSearch:{deep:!0,immediate:!0,handler(){0===this.filterBy.length&&""===this.contentSearch.contentSearchValue&&(this.activeFilter=!1)}}},created(){this.getUsers()},methods:{conditions(e){if(!e)return[];if(1!==e.length)return Object(m["a"])("SHORT_TEXT").map(e=>({id:this.$nano.id(),label:`${Object(o["a"])(Object(r["a"])(e.split(" ")[0]))} ${e.split(" ")[1]?e.split(" ")[1]:""}`,value:e.split(" ")[0]}));{const t=this.columns.find(t=>t.name===e[0]);if(t)return Object(m["a"])(t.dataType).map(e=>({id:this.$nano.id(),label:`${Object(o["a"])(Object(r["a"])(e.split(" ")[0]))} ${e.split(" ")[1]?e.split(" ")[1]:""}`,value:e.split(" ")[0]}))}},addFilterGroup(e=0){this.filterGroups.splice(e,0,{id:this.$nano.id(),filters:[{id:this.$nano.id(),criteria:"",criteriaArray:[],condition:"",value:"",arrayValue:[]}],groupCondition:(this.filterGroups.length,"")}),this.filterGroups.length&&this.selectedFilter.length&&this.selectedFilter[1]&&1===this.selectedFilter[1].level&&(this.filterGroups[0].filters=[],this.selectedFilter.forEach((e,t)=>{0!=t&&this.filterGroups[0].filters.push({id:this.$nano.id(),criteria:e.fieldName,condition:"IS_EQUALS_TO",value:e.label,arrayValue:e.arrayValue||[]})}))},removeFilterGroup(e){this.filterGroups.splice(e,1)},addFilter(e){this.filterGroups[e].filters.push({id:this.$nano.id(),criteria:"",criteriaArray:[],condition:"CONTAINS",value:"",arrayValue:[]})},removeFilter(e,t){this.filterGroups[e].filters.splice(t,1)},async apply(){let e=0,t={};if(!this.$refs.form)return void(this.searchContent&&(this.$emit("update",this.filterGroups,t),this.model=!1,this.activeFilter=!0));for(const s of this.$refs.form){const t=await s.validate();t||e++}if(e)return;let i=!1;if(this.filterGroups.length&&(this.filterGroups[0].groupCondition="",this.filterGroups[0].filters.length||(this.filterGroups=[]),this.filterGroups.forEach(e=>{e.filters.length&&e.filters.forEach(e=>{e.criteriaArray.length>1?i=!0:e.criteria=e.criteriaArray[0],"SINGLE_SELECT"===e.dataType&&(e.value=JSON.stringify(e.arrayValue))})})),i){let e=[];this.filterGroups.forEach(t=>{t.filters.length&&t.filters.forEach(t=>{t.criteriaArray.forEach((i,s)=>{e.push({filters:[{criteria:i,condition:t.condition,value:t.value,dataType:t.dataType}],groupCondition:s?"OR":""})})})}),this.$emit("update",e,t)}else this.$emit("update",this.filterGroups,t);this.model=!1,this.activeFilter=!0},applyDataType(e,t,i){if(this.filterGroups[e].filters[t].condition="",1===i.length){this.filterGroups[e].filters[t].dataType="";let s=this._columns.find(e=>e.label===i[0]||e.value===i[0]);s&&(this.filterGroups[e].filters[t].dataType=s.dataType,"SHORT_TEXT"===s.dataType?this.filterGroups[e].filters[t].condition="CONTAINS":"SINGLE_SELECT"===s.dataType&&(this.filterGroups[e].filters[t].condition="IS_EQUALS_TO"));let a=this.filterGroups[e].filters[t];"SINGLE_SELECT"===a.dataType?this.filterGroups[e].filters[t].value=[]:this.filterGroups[e].filters[t].value=""}else this.filterGroups[e].filters[t].condition="CONTAINS",this.filterGroups[e].filters[t].dataType="SHORT_TEXT",this.filterGroups[e].filters[t].value=""},clearFilter(){this.filterGroups=[],this.activeFilter=!1,this.clearContentSearch(),this.$emit("update",this.filterGroups,"")},clearContentSearch(){this.showAdvanceOptions=!1,this.contentSearch.contentSearchValue="",this.contentSearch.searchType=1,this.contentSearch.fuzzy=0,this.$emit("updateContentSearch",this.contentSearch)},groupCondition(e){this.filterGroups[this.filterGroups.length-1].groupCondition=e},checkOptions(e){if(1===e.length){let t=this.columns.find(t=>t.name===e[0]);if(t&&t.apiLoad)return!0}return!1},getOptions(e){var t;return 1===e.length?"createdBy"===e[0]||"modifiedBy"===e[0]||"owner"===e[0]||"coordinator"===e[0]?this.userList:null===(t=this.columns.find(t=>t.name===e[0]))||void 0===t?void 0:t.options:[]},async getUsers(){this.userList=[];const{error:e,payload:t}=await w["s"].getUserList();e?this.$alert.error("Error fetching users"):t&&t.map(e=>{this.userList.push({id:this.$nano.id(),label:e.value,value:String(e.id)})})},async getUniqueOptions(e){try{const t=await k["b"].post(this.apiPath,JSON.stringify({column:e,keyword:"",rowFrom:0,rowCount:10})),{status:i,data:s}=t;if(200!==i)throw t;const a=JSON.parse(s);return this.options=[],a.forEach(e=>{let t=this.userList.find(t=>t.value===e);t&&this.options.push({id:this.$nano.id(),label:t.label,value:t.value})}),this.options}catch(t){console.error(t),this.$alert.error("Error fetching options")}}}},I=_,x=(i("ae23"),i("2877")),$=i("a026"),B=i("75c3"),T=i("b7fa"),F=i("f89c"),A=i("7937"),L=i("d882"),D=i("5ff7");const E="q-slider__marker-labels",O=e=>({value:e}),M=[34,37,40,33,39,38],q={mixins:[T["a"],F["b"]],directives:{TouchPan:B["a"]},props:{min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},data(){return{active:!1,preventFocus:!1,focus:!1,dragging:!1}},computed:{axis(){return!0===this.vertical?"--v":"--h"},labelSide(){return"-"+(!0===this.switchLabelSide?"switched":"standard")},isReversed(){return!0===this.vertical?!0===this.reverse:this.reverse!==(!0===this.$q.lang.rtl)},computedInnerMin(){return this.__getInnerMin(this.innerMin)},computedInnerMax(){return this.__getInnerMax(this.innerMax)},editable(){return!0!==this.disable&&!0!==this.readonly&&this.computedInnerMin<this.computedInnerMax},computedDecimals(){return(String(this.step).trim("0").split(".")[1]||"").length},computedStep(){return 0===this.step?1:this.step},computedTabindex(){return!0===this.editable?this.tabindex||0:-1},trackLen(){return this.max-this.min},innerBarLen(){return this.computedInnerMax-this.computedInnerMin},innerMinRatio(){return this.__convertModelToRatio(this.computedInnerMin)},innerMaxRatio(){return this.__convertModelToRatio(this.computedInnerMax)},positionProp(){return!0===this.vertical?!0===this.isReversed?"bottom":"top":!0===this.isReversed?"right":"left"},sizeProp(){return!0===this.vertical?"height":"width"},thicknessProp(){return!0===this.vertical?"width":"height"},orientation(){return!0===this.vertical?"vertical":"horizontal"},attributes(){const e={role:"slider","aria-valuemin":this.computedInnerMin,"aria-valuemax":this.computedInnerMax,"aria-orientation":this.orientation,"data-step":this.step};return!0===this.disable?e["aria-disabled"]="true":!0===this.readonly&&(e["aria-readonly"]="true"),e},classes(){return`q-slider q-slider${this.axis} q-slider--${!0===this.active?"":"in"}active inline no-wrap `+(!0===this.vertical?"row":"column")+(!0===this.disable?" disabled":" q-slider--enabled"+(!0===this.editable?" q-slider--editable":""))+("both"===this.focus?" q-slider--focus":"")+(this.label||!0===this.labelAlways?" q-slider--label":"")+(!0===this.labelAlways?" q-slider--label-always":"")+(!0===this.isDark?" q-slider--dark":"")+(!0===this.dense?" q-slider--dense q-slider--dense"+this.axis:"")},selectionBarClass(){const e=this.selectionColor||this.color;return"q-slider__selection absolute"+(void 0!==e?" text-"+e:"")},markerClass(){return this.__getAxisClass("markers")+" absolute overflow-hidden"},trackContainerClass(){return this.__getAxisClass("track-container")},pinClass(){return this.__getPositionClass("pin")},labelClass(){return this.__getPositionClass("label")},textContainerClass(){return this.__getPositionClass("text-container")},markerLabelsContainerClass(){return this.__getPositionClass("marker-labels-container")+(void 0!==this.markerLabelsClass?" "+this.markerLabelsClass:"")},trackClass(){return"q-slider__track relative-position no-outline"+(void 0!==this.trackColor?" bg-"+this.trackColor:"")},trackStyle(){const e={[this.thicknessProp]:this.trackSize};return void 0!==this.trackImg&&(e.backgroundImage=`url(${this.trackImg}) !important`),e},innerBarClass(){return"q-slider__inner absolute"+(void 0!==this.innerTrackColor?" bg-"+this.innerTrackColor:"")},innerBarStyle(){const e={[this.positionProp]:100*this.innerMinRatio+"%",[this.sizeProp]:100*(this.innerMaxRatio-this.innerMinRatio)+"%"};return void 0!==this.innerTrackImg&&(e.backgroundImage=`url(${this.innerTrackImg}) !important`),e},markerStep(){return!0===Object(D["c"])(this.markers)?this.markers:this.computedStep},markerTicks(){const e=[],t=this.markerStep;let i=this.min;do{e.push(i),i+=t}while(i<this.max);return e.push(this.max),e},markerLabelClass(){const e=` ${E}${this.axis}-`;return E+`${e}${!0===this.switchMarkerLabelsSide?"switched":"standard"}`+`${e}${!0===this.isReversed?"rtl":"ltr"}`},markerLabelsList(){return!1===this.markerLabels?null:this.__getMarkerList(this.markerLabels).map((e,t)=>({index:t,value:e.value,label:e.label||e.value,classes:this.markerLabelClass+(void 0!==e.classes?" "+e.classes:""),style:{...this.__getMarkerLabelStyle(e.value),...e.style||{}}}))},markerScope(){return{markerList:this.markerLabelsList,markerMap:this.markerLabelsMap,classes:this.markerLabelClass,getStyle:this.__getMarkerLabelStyle}},markerStyle(){if(0!==this.innerBarLen){const e=100*this.markerStep/this.innerBarLen;return{...this.innerBarStyle,backgroundSize:!0===this.vertical?`2px ${e}%`:e+"% 2px"}}return null},markerLabelsMap(){if(!1===this.markerLabels)return null;const e={};return this.markerLabelsList.forEach(t=>{e[t.value]=t}),e},panDirectives(){return!0===this.editable?[{name:"touch-pan",value:this.__onPan,modifiers:{[this.orientation]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}}]:null}},methods:{__getInnerMin(e){return!0===isNaN(e)||this.innerMin<this.min?this.min:this.innerMin},__getInnerMax(e){return!0===isNaN(e)||e>this.max?this.max:this.innerMax},__getPositionClass(e){const t="q-slider__"+e;return`${t} ${t}${this.axis} ${t}${this.axis}${this.labelSide}`},__getAxisClass(e){const t="q-slider__"+e;return`${t} ${t}${this.axis}`},__convertRatioToModel(e){let t=this.min+e*(this.max-this.min);if(this.step>0){const e=(t-this.min)%this.step;t+=(Math.abs(e)>=this.step/2?(e<0?-1:1)*this.step:0)-e}return this.computedDecimals>0&&(t=parseFloat(t.toFixed(this.computedDecimals))),Object(A["a"])(t,this.computedInnerMin,this.computedInnerMax)},__convertModelToRatio(e){return 0===this.trackLen?0:(e-this.min)/this.trackLen},__getDraggingRatio(e,t){const i=Object(L["h"])(e),s=!0===this.vertical?Object(A["a"])((i.top-t.top)/t.height,0,1):Object(A["a"])((i.left-t.left)/t.width,0,1);return Object(A["a"])(!0===this.isReversed?1-s:s,this.innerMinRatio,this.innerMaxRatio)},__getMarkerList(e){if(!1===e)return null;if(!0===e)return this.markerTicks.map(O);if("function"===typeof e)return this.markerTicks.map(t=>{const i=e(t);return!0===Object(D["d"])(i)?{...i,value:t}:{value:t,label:i}});const t=({value:e})=>e>=this.min&&e<=this.max;return!0===Array.isArray(e)?e.map(e=>!0===Object(D["d"])(e)?e:{value:e}).filter(t):Object.keys(e).map(t=>{const i=e[t],s=Number(t);return!0===Object(D["d"])(i)?{...i,value:s}:{value:s,label:i}}).filter(t)},__getMarkerLabelStyle(e){return{[this.positionProp]:100*(e-this.min)/this.trackLen+"%"}},__getMarkerLabelsContent(e){if(void 0!==this.$scopedSlots["marker-label-group"])return this.$scopedSlots["marker-label-group"](this.markerScope);const t=this.$scopedSlots["marker-label"];return void 0!==t?this.markerLabelsList.map(e=>t({marker:e,...this.markerScope})):this.markerLabelsList.map(t=>e("div",{key:t.value,style:t.style,class:t.classes},t.label))},__onPan(e){!0===e.isFinal?(void 0!==this.dragging&&(this.__updatePosition(e.evt),!0===e.touch&&this.__updateValue(!0),this.dragging=void 0,this.$emit("pan","end")),this.active=!1,this.focus=!1):!0===e.isFirst?(this.dragging=this.__getDragging(e.evt),this.__updatePosition(e.evt),this.__updateValue(),this.active=!0,this.$emit("pan","start")):(this.__updatePosition(e.evt),this.__updateValue())},__onBlur(){this.focus=!1},__onActivate(e){this.__updatePosition(e,this.__getDragging(e)),this.__updateValue(),this.preventFocus=!0,this.active=!0,document.addEventListener("mouseup",this.__onDeactivate,!0)},__onDeactivate(){this.preventFocus=!1,this.active=!1,this.__updateValue(!0),this.__onBlur(),document.removeEventListener("mouseup",this.__onDeactivate,!0)},__onMobileClick(e){this.__updatePosition(e,this.__getDragging(e)),this.__updateValue(!0)},__onKeyup(e){M.includes(e.keyCode)&&this.__updateValue(!0)},__getTextContainerStyle(e){if(!0===this.vertical)return null;const t=this.$q.lang.rtl!==this.reverse?1-e:e;return{transform:`translateX(calc(${2*t-1} * ${this.thumbSize} / 2 + ${50-100*t}%))`}},__getThumb(e,t){const i=[e("svg",{class:"q-slider__thumb-shape absolute-full",attrs:{viewBox:"0 0 20 20","aria-hidden":"true"}},[e("path",{attrs:{d:this.thumbPath}})]),e("div",{class:"q-slider__focus-ring fit"})];return!0!==this.label&&!0!==this.labelAlways||(i.push(e("div",{class:this.pinClass+" absolute fit no-pointer-events"+t.pinColor},[e("div",{class:this.labelClass,style:{minWidth:this.thumbSize}},[e("div",{class:this.textContainerClass,style:t.textContainerStyle},[e("span",{class:t.textClass},t.label)])])])),void 0!==this.name&&!0!==this.disable&&this.__injectFormInput(i,"push")),e("div",{class:t.classes,style:t.style,...t.nodeData},i)},__getContent(e,t){const i=[];"transparent"!==this.innerTrackColor&&i.push(e("div",{key:"inner",class:this.innerBarClass,style:this.innerBarStyle})),"transparent"!==this.selectionColor&&i.push(e("div",{key:"selection",class:this.selectionBarClass,style:this.selectionBarStyle})),!1!==this.markers&&i.push(e("div",{key:"marker",class:this.markerClass,style:this.markerStyle})),t(i);const s=[e("div",{key:"trackC",class:this.trackContainerClass,attrs:this.trackContainerAttrs,on:this.trackContainerEvents,directives:this.panDirectives},[e("div",{class:this.trackClass,style:this.trackStyle},i)])];if(!1!==this.markerLabels){const t=!0===this.switchMarkerLabelsSide?"unshift":"push";s[t](e("div",{key:"markerL",class:this.markerLabelsContainerClass},this.__getMarkerLabelsContent(e)))}return s}},beforeDestroy(){document.removeEventListener("mouseup",this.__onDeactivate,!0)}};var P=$["default"].extend({name:"QSlider",mixins:[q],props:{value:{required:!0,default:null,validator:e=>"number"===typeof e||null===e},labelValue:[String,Number]},data(){const e=this.__getInnerMin(this.innerMin),t=this.__getInnerMax(this.innerMax);return{model:null===this.value?e:Object(A["a"])(this.value,e,t),curRatio:0}},computed:{modelRatio(){return this.__convertModelToRatio(this.model)},ratio(){return!0===this.active?this.curRatio:this.modelRatio},selectionBarStyle(){const e={[this.positionProp]:100*this.innerMinRatio+"%",[this.sizeProp]:100*(this.ratio-this.innerMinRatio)+"%"};return void 0!==this.selectionImg&&(e.backgroundImage=`url(${this.selectionImg}) !important`),e},thumbLabel(){return void 0!==this.labelValue?this.labelValue:this.model},thumbClasses(){const e=this.thumbColor||this.color;return`q-slider__thumb q-slider__thumb${this.axis} q-slider__thumb${this.axis}-${!0===this.isReversed?"rtl":"ltr"} absolute non-selectable`+(!1===this.preventFocus&&!0===this.focus?" q-slider--focus":"")+(void 0!==e?" text-"+e:"")},thumbStyle(){return{width:this.thumbSize,height:this.thumbSize,[this.positionProp]:100*this.ratio+"%"}},thumbPinColor(){return void 0!==this.labelColor?" text-"+this.labelColor:""},thumbTextContainerStyle(){return this.__getTextContainerStyle(this.ratio)},thumbTextClass(){return"q-slider__text"+(void 0!==this.labelTextColor?" text-"+this.labelTextColor:"")},trackContainerEvents(){return!0!==this.editable?{}:!0===this.$q.platform.is.mobile?{click:this.__onMobileClick}:{mousedown:this.__onActivate,focus:this.__onFocus,blur:this.__onBlur,keydown:this.__onKeydown,keyup:this.__onKeyup}},trackContainerAttrs(){return{tabindex:!0!==this.$q.platform.is.mobile?this.computedTabindex:null}},modelUpdate(){return`${this.value}|${this.computedInnerMin}|${this.computedInnerMax}`}},watch:{modelUpdate(){this.model=null===this.value?this.computedInnerMin:Object(A["a"])(this.value,this.computedInnerMin,this.computedInnerMax)}},methods:{__updateValue(e){this.model!==this.value&&this.$emit("input",this.model),!0===e&&this.$emit("change",this.model)},__getDragging(){return this.$el.getBoundingClientRect()},__updatePosition(e,t=this.dragging){const i=this.__getDraggingRatio(e,t);this.model=this.__convertRatioToModel(i),this.curRatio=!0!==this.snap||0===this.computedStep?i:this.__convertModelToRatio(this.model)},__onFocus(){this.focus=!0},__onKeydown(e){if(!M.includes(e.keyCode))return;Object(L["l"])(e);const t=([34,33].includes(e.keyCode)?10:1)*this.computedStep,i=([34,37,40].includes(e.keyCode)?-1:1)*(!0===this.isReversed?-1:1)*(!0===this.vertical?-1:1)*t;this.model=Object(A["a"])(parseFloat((this.model+i).toFixed(this.computedDecimals)),this.computedInnerMin,this.computedInnerMax),this.__updateValue()}},render(e){const t=this.__getContent(e,t=>{t.push(this.__getThumb(e,{pinColor:this.thumbPinColor,textContainerStyle:this.thumbTextContainerStyle,textClass:this.thumbTextClass,label:this.thumbLabel,classes:this.thumbClasses,style:this.thumbStyle,nodeData:{}}))});return e("div",{class:this.classes+(null===this.value?" q-slider--no-value":""),attrs:{...this.attributes,"aria-valuenow":this.value}},t)}}),V=i("93dc"),N=i.n(V),R=Object(x["a"])(I,s,a,!1,null,"2eff0750",null);t["a"]=R.exports;N()(R,"components",{QSlider:P})},2852:function(e,t,i){"use strict";i("e5e9")},"28f7":function(e,t,i){},2948:function(e,t,i){"use strict";i("f108")},"297e":function(e,t,i){"use strict";i("f98d")},"2ac6":function(e,t,i){"use strict";i("0ce8")},"2b88":function(e,t,i){"use strict";
/*! 
  * portal-vue  Thorsten Lnborg, 2019 
  * 
  * Version: 2.1.7
  * 
  * LICENCE: MIT 
  * 
  * https://github.com/linusborg/portal-vue
  * 
 */function s(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}Object.defineProperty(t,"__esModule",{value:!0});var a=s(i("a026"));function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e){return n(e)||l(e)||d()}function n(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var c="undefined"!==typeof window;function u(e){return Array.isArray(e)||"object"===o(e)?Object.freeze(e):e}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.reduce((function(e,i){var s=i.passengers[0],a="function"===typeof s?s(t):i.passengers;return e.concat(a)}),[])}function m(e,t){return e.map((function(e,t){return[t,e]})).sort((function(e,i){return t(e[1],i[1])||e[0]-i[0]})).map((function(e){return e[1]}))}function p(e,t){return t.reduce((function(t,i){return e.hasOwnProperty(i)&&(t[i]=e[i]),t}),{})}var f={},v={},y={},b=a.extend({data:function(){return{transports:f,targets:v,sources:y,trackInstances:c}},methods:{open:function(e){if(c){var t=e.to,i=e.from,s=e.passengers,o=e.order,r=void 0===o?1/0:o;if(t&&i&&s){var n={to:t,from:i,passengers:u(s),order:r},l=Object.keys(this.transports);-1===l.indexOf(t)&&a.set(this.transports,t,[]);var d=this.$_getTransportIndex(n),h=this.transports[t].slice(0);-1===d?h.push(n):h[d]=n,this.transports[t]=m(h,(function(e,t){return e.order-t.order}))}}},close:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.to,s=e.from;if(i&&(s||!1!==t)&&this.transports[i])if(t)this.transports[i]=[];else{var a=this.$_getTransportIndex(e);if(a>=0){var o=this.transports[i].slice(0);o.splice(a,1),this.transports[i]=o}}},registerTarget:function(e,t,i){c&&(this.trackInstances&&!i&&this.targets[e]&&console.warn("[portal-vue]: Target ".concat(e," already exists")),this.$set(this.targets,e,Object.freeze([t])))},unregisterTarget:function(e){this.$delete(this.targets,e)},registerSource:function(e,t,i){c&&(this.trackInstances&&!i&&this.sources[e]&&console.warn("[portal-vue]: source ".concat(e," already exists")),this.$set(this.sources,e,Object.freeze([t])))},unregisterSource:function(e){this.$delete(this.sources,e)},hasTarget:function(e){return!(!this.targets[e]||!this.targets[e][0])},hasSource:function(e){return!(!this.sources[e]||!this.sources[e][0])},hasContentFor:function(e){return!!this.transports[e]&&!!this.transports[e].length},$_getTransportIndex:function(e){var t=e.to,i=e.from;for(var s in this.transports[t])if(this.transports[t][s].from===i)return+s;return-1}}}),g=new b(f),w=1,k=a.extend({name:"portal",props:{disabled:{type:Boolean},name:{type:String,default:function(){return String(w++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}}},created:function(){var e=this;this.$nextTick((function(){g.registerSource(e.name,e)}))},mounted:function(){this.disabled||this.sendUpdate()},updated:function(){this.disabled?this.clear():this.sendUpdate()},beforeDestroy:function(){g.unregisterSource(this.name),this.clear()},watch:{to:function(e,t){t&&t!==e&&this.clear(t),this.sendUpdate()}},methods:{clear:function(e){var t={from:this.name,to:e||this.to};g.close(t)},normalizeSlots:function(){return this.$scopedSlots.default?[this.$scopedSlots.default]:this.$slots.default},normalizeOwnChildren:function(e){return"function"===typeof e?e(this.slotProps):e},sendUpdate:function(){var e=this.normalizeSlots();if(e){var t={from:this.name,to:this.to,passengers:r(e),order:this.order};g.open(t)}else this.clear()}},render:function(e){var t=this.$slots.default||this.$scopedSlots.default||[],i=this.tag;return t&&this.disabled?t.length<=1&&this.slim?this.normalizeOwnChildren(t)[0]:e(i,[this.normalizeOwnChildren(t)]):this.slim?e():e(i,{class:{"v-portal":!0},style:{display:"none"},key:"v-portal-placeholder"})}}),S=a.extend({name:"portalTarget",props:{multiple:{type:Boolean,default:!1},name:{type:String,required:!0},slim:{type:Boolean,default:!1},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},data:function(){return{transports:g.transports,firstRender:!0}},created:function(){var e=this;this.$nextTick((function(){g.registerTarget(e.name,e)}))},watch:{ownTransports:function(){this.$emit("change",this.children().length>0)},name:function(e,t){g.unregisterTarget(t),g.registerTarget(e,this)}},mounted:function(){var e=this;this.transition&&this.$nextTick((function(){e.firstRender=!1}))},beforeDestroy:function(){g.unregisterTarget(this.name)},computed:{ownTransports:function(){var e=this.transports[this.name]||[];return this.multiple?e:0===e.length?[]:[e[e.length-1]]},passengers:function(){return h(this.ownTransports,this.slotProps)}},methods:{children:function(){return 0!==this.passengers.length?this.passengers:this.$scopedSlots.default?this.$scopedSlots.default(this.slotProps):this.$slots.default||[]},noWrapper:function(){var e=this.slim&&!this.transition;return e&&this.children().length>1&&console.warn("[portal-vue]: PortalTarget with `slim` option received more than one child element."),e}},render:function(e){var t=this.noWrapper(),i=this.children(),s=this.transition||this.tag;return t?i[0]:this.slim&&!s?e():e(s,{props:{tag:this.transition&&this.tag?this.tag:void 0},class:{"vue-portal-target":!0}},i)}}),C=0,_=["disabled","name","order","slim","slotProps","tag","to"],I=["multiple","transition"],x=a.extend({name:"MountingPortal",inheritAttrs:!1,props:{append:{type:[Boolean,String]},bail:{type:Boolean},mountTo:{type:String,required:!0},disabled:{type:Boolean},name:{type:String,default:function(){return"mounted_"+String(C++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}},multiple:{type:Boolean,default:!1},targetSlim:{type:Boolean},targetSlotProps:{type:Object,default:function(){return{}}},targetTag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},created:function(){if("undefined"!==typeof document){var e=document.querySelector(this.mountTo);if(e){var t=this.$props;if(g.targets[t.name])t.bail?console.warn("[portal-vue]: Target ".concat(t.name," is already mounted.\n        Aborting because 'bail: true' is set")):this.portalTarget=g.targets[t.name];else{var i=t.append;if(i){var s="string"===typeof i?i:"DIV",a=document.createElement(s);e.appendChild(a),e=a}var o=p(this.$props,I);o.slim=this.targetSlim,o.tag=this.targetTag,o.slotProps=this.targetSlotProps,o.name=this.to,this.portalTarget=new S({el:e,parent:this.$parent||this,propsData:o})}}else console.error("[portal-vue]: Mount Point '".concat(this.mountTo,"' not found in document"))}},beforeDestroy:function(){var e=this.portalTarget;if(this.append){var t=e.$el;t.parentNode.removeChild(t)}e.$destroy()},render:function(e){if(!this.portalTarget)return console.warn("[portal-vue] Target wasn't mounted"),e();if(!this.$scopedSlots.manual){var t=p(this.$props,_);return e(k,{props:t,attrs:this.$attrs,on:this.$listeners,scopedSlots:this.$scopedSlots},this.$slots.default)}var i=this.$scopedSlots.manual({to:this.to});return Array.isArray(i)&&(i=i[0]),i||e()}});function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component(t.portalName||"Portal",k),e.component(t.portalTargetName||"PortalTarget",S),e.component(t.MountingPortalName||"MountingPortal",x)}var B={install:$};t.default=B,t.Portal=k,t.PortalTarget=S,t.MountingPortal=x,t.Wormhole=g},"2ddf":function(e,t,i){},"2f12":function(e,t,i){"use strict";i("2ddf")},"307a":function(e,t,i){},3093:function(e,t,i){},"315c":function(e,t,i){},"34bc":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"repositories-browse"}},[t("Portal",{attrs:{to:"primary-action"}},[e.showAddRepository?t("BaseButton",{staticClass:"q-ml-md",attrs:{icon:"eva-plus",label:"add folder"},on:{click:e.addRepository}}):e._e()],1),t("Portal",{attrs:{to:"action-bar"}},[e.isLoading?e._e():t("ItemActions",{attrs:{item:"repository",columns:e.columns,"group-by":e.groupBy,order:e.sortBy.order,"filter-by":e.filterBy,"active-view":e.activeView,criteria:e.sortBy.criteria,"simple-search-applyed":e.simpleSearchApplyed},on:{"update:columns":function(t){e.columns=t},"update:groupBy":function(t){e.groupBy=t},"update:group-by":function(t){e.groupBy=t},"update:order":function(t){return e.$set(e.sortBy,"order",t)},"update:filterBy":function(t){e.filterBy=t},"update:filter-by":function(t){e.filterBy=t},"update:activeView":function(t){e.activeView=t},"update:active-view":function(t){e.activeView=t},"update:criteria":function(t){return e.$set(e.sortBy,"criteria",t)},"update:simpleSearchApplyed":function(t){e.simpleSearchApplyed=t},"update:simple-search-applyed":function(t){e.simpleSearchApplyed=t},refresh:e.getRepositories,search:e.searchRow,update:e.getRepositories,export:e.export_Data}})],1),e.isLoading?e._e():t("div",{staticClass:"content"},[e.totalItems?[t("ItemActionChips",{attrs:{"sort-by":e.sortBy,columns:e.columns,"group-by":e.groupBy,"filter-by":e.filterBy,"simple-search-applyed":e.simpleSearchApplyed},on:{clearSortBy:e.clearSortBy,clearGroupBy:e.clearGroupBy,clearFilterBy:e.clearFilterBy}}),"GRID"===e.activeView?t("RepositoryGrid",{attrs:{mode:e.mode,items:e.items,columns:e.columns,security:!1},on:{edit:e.editRepository,more:e.showRepositoryDetails,delete:e.showDeleteConfirmation,restore:e.showRestoreConfirmation,select:e.openRepository,secure:e.secureRepository}}):e._e(),"LIST"===e.activeView?t("RepositoryList",{attrs:{mode:e.mode,items:e.items,columns:e.columns,security:!1},on:{edit:e.editRepository,more:e.showRepositoryDetails,delete:e.showDeleteConfirmation,restore:e.showRestoreConfirmation,select:e.openRepository,secure:e.secureRepository}}):e._e()]:[t("StateWrapper",{staticStyle:{"margin-top":"20px"},attrs:{icon:"eva-archive-outline",title:"NO DATA",description:"No data available at the moment"}})]],2),e.isLoading?e._e():t("Pagination",{attrs:{"total-items":e.totalItems,"current-page":e.currentPage,"items-per-page":e.itemsPerPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:itemsPerPage":function(t){e.itemsPerPage=t},"update:items-per-page":function(t){e.itemsPerPage=t}}}),e.isRepositoryDetailsVisible?t("RepositoryDetails",{attrs:{columns:e.columns,repository:e.selectedRepository},on:{edit:e.editRepository,delete:e.showDeleteConfirmation},model:{value:e.isRepositoryDetailsVisible,callback:function(t){e.isRepositoryDetailsVisible=t},expression:"isRepositoryDetailsVisible"}}):e._e(),t("ConfirmDeleteRepository",{attrs:{repository:e.selectedRepository},on:{delete:e.updateRepository},model:{value:e.isDeleteConfirmationVisible,callback:function(t){e.isDeleteConfirmationVisible=t},expression:"isDeleteConfirmationVisible"}}),t("ConfirmRestoreRepository",{attrs:{repository:e.selectedRepository},on:{restore:e.updateRepository},model:{value:e.isRestoreConfirmationVisible,callback:function(t){e.isRestoreConfirmationVisible=t},expression:"isRestoreConfirmationVisible"}})],1)},a=[],o=(i("14d9"),i("caad"),i("874f")),r=i("52ef"),n=i("1b0d"),l=i("381b"),d=i("a7d2"),c=i("2b88"),u=i("c49c"),h=i("b6d2"),m=i("064c"),p=i("4904"),f=function(){var e=this,t=e._self._c;return t("ItemGrid",{attrs:{columns:e.columns,items:e.items,mode:e.mode,security:e.security},on:{select:e.handleSelect,edit:e.handleEdit,delete:e.handleDelete,restore:e.handleRestore,more:e.handleMore,secure:e.handleSecure},scopedSlots:e._u([{key:"fieldsType",fn:function({column:i,value:s}){return[t("div",{staticClass:"row q-px-md q-py-sm"},[t("div",{staticClass:"label"},[e._v(e._s(i))]),t("q-space"),t("div",{class:{dynamic:"Dynamic"===s},attrs:{id:"repository-type"}},[t("BaseIcon",{attrs:{name:"mdi-circle",size:"8px","inherit-color":""}}),t("div",{staticClass:"q-ml-sm"},[e._v(e._s(s))])],1)],1)]}},{key:"files",fn:function({column:i,value:s}){return[t("div",{staticClass:"row q-px-md q-py-sm"},[t("div",{staticClass:"label"},[e._v(e._s(i))]),t("q-space"),t("div",[e._v(" "+e._s(e.appendZeroIfNeeded(s))+" ")])],1)]}}])})},v=[],y=i("0412"),b={name:"RepositoryGrid",components:{ItemGrid:y["a"]},props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},mode:{type:String,required:!0},security:{type:Boolean,default:!0}},methods:{appendZeroIfNeeded(e){return 0===e?0:e<10?"0"+e:e},handleSelect(e){this.$emit("select",e)},handleEdit(e){this.$emit("edit",e)},handleDelete(e){this.$emit("delete",e)},handleRestore(e){this.$emit("restore",e)},handleMore(e){this.$emit("more",e)},handleSecure(e){this.$emit("secure",e)}}},g=b,w=(i("6fb0"),i("2877")),k=i("2c91"),S=i("93dc"),C=i.n(S),_=Object(w["a"])(g,f,v,!1,null,"5948ff3c",null),I=_.exports;C()(_,"components",{QSpace:k["a"]});var x=function(){var e=this,t=e._self._c;return t("ItemList",{attrs:{columns:e.columns,items:e.items,mode:e.mode,security:e.security},on:{select:e.handleSelect,edit:e.handleEdit,delete:e.handleDelete,restore:e.handleRestore,more:e.handleMore,secure:e.handleSecure},scopedSlots:e._u([{key:"fieldsType",fn:function({value:i}){return[t("div",{class:{dynamic:"Dynamic"===i},attrs:{id:"repository-type"}},[t("BaseIcon",{attrs:{name:"mdi-circle",size:"8px","inherit-color":""}}),t("div",{staticClass:"q-ml-sm"},[e._v(e._s(i))])],1)]}},{key:"files",fn:function({value:t}){return[e._v(" "+e._s(e.appendZeroIfNeeded(t))+" ")]}}])})},$=[],B=i("f92f"),T={name:"RepositoryList",components:{ItemList:B["a"]},props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},mode:{type:String,required:!0},security:{type:Boolean,default:!0}},methods:{appendZeroIfNeeded(e){return 0===e?0:e<10?"0"+e:e},handleSelect(e){this.$emit("select",e)},handleEdit(e){this.$emit("edit",e)},handleDelete(e){this.$emit("delete",e)},handleRestore(e){this.$emit("restore",e)},handleMore(e){this.$emit("more",e)},handleSecure(e){this.$emit("secure",e)}}},F=T,A=(i("a797"),Object(w["a"])(F,x,$,!1,null,"060fbfb5",null)),L=A.exports,D=function(){var e=this,t=e._self._c;return t("ItemDetails",{attrs:{width:"620px",value:e.value,history:e.history,overview:e.overview},on:{edit:e.handleEdit,input:e.handleInput,delete:e.handleDelete},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Folder Details")]},proxy:!0},{key:"fields",fn:function({value:i}){return[i&&i.length?t("ol",e._l(i,(function(i){return t("li",{key:i.id},[e._v(" "+e._s(i.name)+" ")])})),0):t("div",[e._v("-")])]}}])})},E=[],O=i("9290"),M={name:"RepositoryDetails",components:{ItemDetails:O["a"]},props:{value:{type:Boolean,default:!1},columns:{type:Array,required:!0},repository:{type:Object,required:!0}},data(){return{isLoading:!1,history:[]}},computed:{overview(){return this.columns.map(e=>({id:e.id,name:e.name,label:e.label,value:this.repository[e.name]}))}},watch:{repository:{immediate:!0,deep:!0,handler(){this.repository.id&&this.getRepositoryHistory()}}},methods:{processRepositoryFields(e){return this.showAllRepositoryFields?e:e.slice(0,5)},handleInput(e){this.$emit("input",e)},handleEdit(){this.$emit("input",!1),this.$emit("edit",this.repository.id)},handleDelete(){this.$emit("input",!1),this.$emit("delete",this.repository.id)},async getRepositoryHistory(){this.isLoading=!0;const{error:e,payload:t}=await n["p"].getRepositoryHistory(this.repository.id);this.isLoading=!1,e?this.$alert.error(e):this.history=t}}},q=M,P=(i("d3dd"),Object(w["a"])(q,D,E,!1,null,"2b076cb4",null)),V=P.exports,N=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"eva-trash-2-outline","icon-color":"red"},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Delete Repository?")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" Are you sure you want to delete the repository "),t("b",[e._v('"'+e._s(e.repository.name)+'"')]),e._v(". If you delete the repository, you will not be able to use the repository. ")]),t("p",[e._v(" You can always restore the deleted repository from the trash page. ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"red"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"red"},on:{click:e.handleYes}})]},proxy:!0}])})},R=[],z=i("1c54"),j={name:"ConfirmDeleteRepository",components:{Confirm:z["a"]},props:{value:{type:Boolean,required:!0},repository:{type:Object,required:!0}},methods:{handleInput(e){this.$emit("input",e)},handleNo(){this.$emit("input",!1)},handleYes(){this.$emit("input",!1),this.$emit("delete",{isDeleted:!0})}}},G=j,U=Object(w["a"])(G,N,R,!1,null,"c4573cd0",null),H=U.exports,W=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"eva-trash-2-outline","icon-color":"orange"},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Restore Repository?")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" Are you sure you want to restore the repository "),t("b",[e._v('"'+e._s(e.repository.name)+'"')]),e._v(". If you restore the repository, you will be able to use the repository. ")]),t("p",[e._v(" You can always delete the restored repository from the browse page. ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"orange"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"orange"},on:{click:e.handleYes}})]},proxy:!0}])})},Y=[],J={name:"ConfirmRestoreRepository",components:{Confirm:z["a"]},props:{value:{type:Boolean,required:!0},repository:{type:Object,required:!0}},methods:{handleInput(e){this.$emit("input",e)},handleNo(){this.$emit("input",!1)},handleYes(){this.$emit("input",!1),this.$emit("restore",{isDeleted:!1})}}},Q=J,K=Object(w["a"])(Q,W,Y,!1,null,"1f88040a",null),X=K.exports,Z=i("42fc"),ee={name:"RepositoriesBrowseAndTrash",components:{Portal:c["Portal"],StateWrapper:u["a"],ItemActions:m["a"],ItemActionChips:p["a"],RepositoryGrid:I,RepositoryList:L,RepositoryDetails:V,Pagination:h["a"],ConfirmDeleteRepository:H,ConfirmRestoreRepository:X},props:{mode:{type:String,required:!0}},data(){return{columns:[{id:this.$nano.id(),name:"name",label:"Name",type:"TITLE",isVisible:!0,isSortable:!0,isGroupable:!1,isFilter:!0,dataType:l["a"].SHORT_TEXT},{id:this.$nano.id(),name:"description",label:"Description",type:"SUBTITLE",isVisible:!0,isSortable:!1,isGroupable:!1,isFilter:!0,dataType:l["a"].SHORT_TEXT},{id:this.$nano.id(),name:"workspace",label:"Workspace",type:"NORMAL",isVisible:!0,isSortable:!0,isGroupable:!0,isFilter:!0,dataType:l["a"].SHORT_TEXT},{id:this.$nano.id(),name:"fieldsType",label:"Type",type:"NORMAL",isVisible:!0,isSortable:!0,isGroupable:!0,isFilter:!0,options:[{id:this.$nano.id(),label:"Static",value:"STATIC"},{id:this.$nano.id(),label:"Dynamic",value:"DYNAMIC"}],dataType:l["a"].SINGLE_SELECT},{id:this.$nano.id(),name:"files",label:"Files",type:"NORMAL",isVisible:!0,isSortable:!1,isGroupable:!1,isFilter:!1,dataType:l["a"].SHORT_TEXT},{id:this.$nano.id(),name:"size",label:"Size",type:"NORMAL",isVisible:!0,isSortable:!1,isGroupable:!1,isFilter:!1,dataType:l["a"].SHORT_TEXT},{id:this.$nano.id(),name:"cloudFileServer",label:"Cloud File Server",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!0,isFilter:!1,dataType:l["a"].SHORT_TEXT},{id:this.$nano.id(),name:"localFileServerPath",label:"Local File Server Path",type:"NORMAL",isVisible:!1,isSortable:!1,isGroupable:!1,isFilter:!1,dataType:l["a"].SHORT_TEXT},{id:this.$nano.id(),name:"owner",label:"Owner",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!0,isFilter:!0,dataType:l["a"].SINGLE_SELECT},{id:this.$nano.id(),name:"coordinator",label:"Coordinator",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!0,isFilter:!0,dataType:l["a"].SINGLE_SELECT},{id:this.$nano.id(),name:"expiryDate",label:"Expiry Date",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!0,isFilter:!0,dataType:l["a"].DATE},{id:this.$nano.id(),name:"versionType",label:"Version Type",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!0,isFilter:!0,options:[{id:this.$nano.id(),label:"Timestamp",value:"TIMESTAMP"},{id:this.$nano.id(),label:"Number",value:"NUMBER"},{id:this.$nano.id(),label:"Alphabet",value:"ALPHABET"}],dataType:l["a"].SINGLE_SELECT},{id:this.$nano.id(),name:"versionedDocuments",label:"Versioned Documents",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!0,isFilter:!1,dataType:l["a"].SHORT_TEXT},{id:this.$nano.id(),name:"fields",label:"Fields",type:"NORMAL",isVisible:!1,isSortable:!1,isGroupable:!1,isFilter:!1,dataType:l["a"].SINGLE_SELECT},{id:this.$nano.id(),name:"createdBy",label:"Created By",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!0,isFilter:!0,dataType:l["a"].SINGLE_SELECT},{id:this.$nano.id(),name:"createdAt",label:"Created At",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!1,isFilter:!0,dataType:l["a"].DATE},{id:this.$nano.id(),name:"modifiedBy",label:"Modified By",type:"NORMAL",isVisible:!1,isSortable:!1,isGroupable:!1,isFilter:!0,dataType:l["a"].SINGLE_SELECT},{id:this.$nano.id(),name:"modifiedAt",label:"Modified At",type:"NORMAL",isVisible:!1,isSortable:!1,isGroupable:!1,isFilter:!0,dataType:l["a"].DATE}],repositories:[],activeView:"GRID",selectedRepository:{},isRepositoryDetailsVisible:!1,isDeleteConfirmationVisible:!1,isRestoreConfirmationVisible:!1,isLoading:!1,sortBy:{criteria:"",order:"ASC"},groupBy:"",filterBy:[],totalItems:0,itemsPerPage:50,currentPage:1,repositoriesFilterData:[],repositoriesData:[],simpleSearchApplyed:!1}},computed:{items(){return this.repositories.map(({key:e,value:t})=>({key:this.groupBy,value:e,data:t.map(e=>{var t,i;return{id:e.id,name:e.name,description:e.description,workspaceId:null===(t=e.workspace)||void 0===t?void 0:t.id,workspace:null===(i=e.workspace)||void 0===i?void 0:i.value,fieldsType:Object(o["a"])(Object(r["a"])(e.fieldsType)),files:e.filesCount||0,size:Object(d["a"])(e.fileSize),cloudFileServer:Object(o["a"])(Object(r["a"])(e.cloudFileServer)),localFileServerPath:e.localFileServerPath,owner:e.ownerlist,coordinator:e.coordinatorlist,expiryDate:e.expiryDate,versionType:Object(o["a"])(Object(r["a"])(e.versionType)),versionedDocuments:Object(o["a"])(Object(r["a"])(e.versionedDocuments)),fields:e.fields,icon:"eva-archive",createdBy:e.createdBy,createdAt:this.$day.format(e.createdAt),modifiedBy:e.modifiedBy,modifiedAt:this.$day.format(e.modifiedAt),actionButton:!0}})}))},showAddRepository(){return!!this.$store.state.profileMenus.length&&this.$store.state.profileMenus.find(e=>e.folders).Menu["Manage Folders"]}},watch:{$route:{immediate:!0,deep:!0,handler(){this.defaultView()}},"$store.state.defaultView":function(){this.defaultView()}},mounted(){this.$watch(e=>[e.mode,e.sortBy,e.groupBy,e.currentPage,e.itemsPerPage],()=>this.getRepositories(),{immediate:!0,deep:!0})},methods:{defaultView(){let e=this.$store.state.defaultView,t=this.$route.meta.menu,i=this.$route.meta.breadcrumb;if(Object.keys(e).length&&e[t]){let s=e[t].find(e=>e.subMenu===i);s&&(this.activeView=s.view)}},findRepository(e){const t=[];return this.items.forEach(e=>t.push(...e.data)),t.find(t=>t.id===e)},showRepositoryDetails(e){this.selectedRepository=this.findRepository(e),this.isRepositoryDetailsVisible=!0},editRepository(e){this.$router.push({name:"repository-builder",params:{id:String(e)}})},showDeleteConfirmation(e){this.selectedRepository=this.findRepository(e),this.isDeleteConfirmationVisible=!0},showRestoreConfirmation(e){this.selectedRepository=this.findRepository(e),this.isRestoreConfirmationVisible=!0},openRepository(e){const t=this.findRepository(e).workspaceId;this.$router.push({query:{workspaceId:t,repositoryId:e}}),this.filterBy=[]},addRepository(){this.$router.push({name:"repository-builder"})},secureRepository(e){this.$router.push({name:"repository-secure",params:{id:String(e)}})},searchRow(e){e?this.repositories=this.repositoriesFilterData.map(({key:t,value:i})=>({key:t,value:i.filter(t=>{for(let i in t){let s=this.columns.findIndex(e=>e.name===i);if(s>=0&&t[i]&&String(t[i]).toLowerCase().includes(e.toLowerCase()))return t}})})):(this.repositories=this.repositoriesData,this.repositoriesFilterData=this.repositoriesData)},clearSortBy(){this.sortBy={criteria:"",order:"DESC"}},clearGroupBy(){this.groupBy=""},clearFilterBy(e,t){this.filterBy[e].filters.splice(t,1),0==this.filterBy[e].filters.length&&(this.filterBy[e].filters=[],this.filterBy.splice(e,1)),0==this.filterBy.length&&(this.filterBy=[]),this.getRepositories()},async getRepositories(){this.$store.commit("showLoadingBarPage");const{error:e,payload:t}=await n["p"].getRepositories({mode:this.mode,sortBy:this.sortBy,groupBy:this.groupBy,filterBy:this.filterBy,itemsPerPage:this.itemsPerPage,currentPage:this.currentPage});if(this.$store.commit("hideLoadingBarPage"),e)return void this.$alert.error(e);const{data:i,meta:s}=t;this.repositoriesData=i||[],this.repositoriesFilterData=i||[],this.repositories=i||[],this.totalItems=(null===s||void 0===s?void 0:s.totalItems)||0},async updateRepository(e){this.$store.commit("showLoadingBarPage");const{error:t}=await n["p"].updateRepository(this.selectedRepository.id,e);if(this.$store.commit("hideLoadingBarPage"),t)return void this.$alert.error(t);const i=e.isDeleted?"deleted":"restored";this.$alert.success(`Repository "${this.selectedRepository.name}" ${i} successfully`),this.getRepositories()},async export_Data(){this.$store.commit("showLoadingBarPage");const{error:e,payload:t}=await n["p"].getRepositories({mode:this.mode,sortBy:this.sortBy,groupBy:this.groupBy,filterBy:this.filterBy,itemsPerPage:0,currentPage:0});if(this.$store.commit("hideLoadingBarPage"),e)return void this.$alert.error(e);const{meta:i,data:s}=t;if(i.totalItems&&s.length){let e=[];s[0].value.forEach(t=>{var i;let s=[];t.fields.forEach(e=>{s.push({Name:e.name,Type:e.dataType,Mandatory:e.isMandatory,Level:e.level})});let a=[];t.ownerlist&&t.ownerlist.forEach(e=>{a.push(e.value)});let n=[];t.coordinatorlist&&t.coordinatorlist.forEach(e=>{n.push(e.value)}),e.push({Name:t.name,Description:t.description,Workspace:null===(i=t.workspace)||void 0===i?void 0:i.value,"Fields Type":Object(o["a"])(Object(r["a"])(t.fieldsType)),"Files Count":t.filesCount||0,"Total File Size":Object(d["a"])(t.fileSize),Owner:a.toString(),Coordinator:n.toString(),"Expiry Date":t.expiryDate,"Version Type":Object(o["a"])(Object(r["a"])(t.versionType)),"Versioned Docuemnts":Object(o["a"])(Object(r["a"])(t.versionedDocuments)),Fields:JSON.stringify(s),"Created By":t.createdBy,"Created At":this.$day.format(t.createdAt),"Last Modified By":t.modifiedBy,"Last Modified At":this.$day.format(t.modifiedAt)})});let t="Repository List - Report";"TRASH"===this.mode&&(t="Repository Trash List - Report"),Object(Z["a"])(e,t)}}}},te=ee,ie=(i("0ba8"),Object(w["a"])(te,s,a,!1,null,"e9743dfe",null));t["default"]=ie.exports},3595:function(e,t,i){"use strict";i("ee74")},3607:function(e,t,i){"use strict";i("ff59")},"39cc":function(e,t,i){"use strict";i("fad0")},"3b73":function(e,t,i){"use strict";i("3c65"),i("14d9");var s=i("a026"),a=i("66e5"),o=i("4074"),r=i("0170"),n=i("0016"),l=i("e9c1"),d=i("eb85"),c=i("8716"),u=i("463c"),h=i("7ee0"),m=i("b7fa"),p=i("d882"),f=i("e277"),v=i("d54d"),y=i("1732");const b="q:expansion-item:close",g=Object.keys(c["b"]);t["a"]=s["default"].extend({name:"QExpansionItem",mixins:[m["a"],u["a"],h["a"]],props:{...c["b"],icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},data(){return{showing:void 0!==this.value?this.value:this.defaultOpened}},watch:{showing(e){!0===e&&void 0!==this.group&&this.$root.$emit(b,this)},group(e,t){void 0!==e&&void 0===t?this.$root.$on(b,this.__eventHandler):void 0===e&&void 0!==t&&this.$root.$off(b,this.__eventHandler)}},computed:{classes(){return"q-expansion-item--"+(!0===this.showing?"expanded":"collapsed")+" q-expansion-item--"+(!0===this.popup?"popup":"standard")},contentStyle(){if(void 0!==this.contentInsetLevel){const e=!0===this.$q.lang.rtl?"Right":"Left";return{["padding"+e]:56*this.contentInsetLevel+"px"}}},hasLink(){return!0!==this.disable&&(void 0!==this.href||void 0!==this.to&&null!==this.to&&""!==this.to)},linkProps(){const e={};return g.forEach(t=>{e[t]=this[t]}),e},isClickable(){return!0===this.hasLink||!0!==this.expandIconToggle},expansionIcon(){return void 0!==this.expandedIcon&&!0===this.showing?this.expandedIcon:this.expandIcon||this.$q.iconSet.expansionItem[!0===this.denseToggle?"denseIcon":"icon"]},activeToggleIcon(){return!0!==this.disable&&(!0===this.hasLink||!0===this.expandIconToggle)},headerSlotScope(){return{expanded:!0===this.showing,detailsId:this.targetUid,toggle:this.toggle,show:this.show,hide:this.hide}},toggleAriaAttrs(){const e=void 0!==this.toggleAriaLabel?this.toggleAriaLabel:this.$q.lang.label[!0===this.showing?"collapse":"expand"](this.label);return{role:"button","aria-expanded":!0===this.showing?"true":"false","aria-controls":this.targetUid,"aria-label":e}}},methods:{__onHeaderClick(e){!0!==this.hasLink&&this.toggle(e),this.$emit("click",e)},__toggleIconKeyboard(e){13===e.keyCode&&this.__toggleIcon(e,!0)},__toggleIcon(e,t){!0!==t&&void 0!==this.$refs.blurTarget&&this.$refs.blurTarget.focus(),this.toggle(e),Object(p["l"])(e)},__eventHandler(e){this!==e&&this.group===e.group&&this.hide()},__getToggleIcon(e){const t={staticClass:"q-focusable relative-position cursor-pointer"+(!0===this.denseToggle&&!0===this.switchToggleSide?" items-end":""),class:this.expandIconClass,props:{side:!0!==this.switchToggleSide,avatar:this.switchToggleSide}},i=[e(n["a"],{staticClass:"q-expansion-item__toggle-icon",class:void 0===this.expandedIcon&&!0===this.showing?"q-expansion-item__toggle-icon--rotated":void 0,props:{name:this.expansionIcon}})];return!0===this.activeToggleIcon&&(Object.assign(t,{attrs:{tabindex:0,...this.toggleAriaAttrs},on:Object(v["b"])(this,"inpExt",{click:this.__toggleIcon,keyup:this.__toggleIconKeyboard})}),i.unshift(e("div",{ref:"blurTarget",staticClass:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",attrs:{tabindex:-1}}))),e(o["a"],t,i)},__getHeader(e){let t;void 0!==this.$scopedSlots.header?t=[].concat(this.$scopedSlots.header(this.headerSlotScope)):(t=[e(o["a"],[e(r["a"],{props:{lines:this.labelLines}},[this.label||""]),this.caption?e(r["a"],{props:{lines:this.captionLines,caption:!0}},[this.caption]):null])],this.icon&&t[!0===this.switchToggleSide?"push":"unshift"](e(o["a"],{props:{side:!0===this.switchToggleSide,avatar:!0!==this.switchToggleSide}},[e(n["a"],{props:{name:this.icon}})]))),!0!==this.disable&&!0!==this.hideExpandIcon&&t[!0===this.switchToggleSide?"unshift":"push"](this.__getToggleIcon(e));const i={ref:"item",style:this.headerStyle,class:this.headerClass,props:{dark:this.isDark,disable:this.disable,dense:this.dense,insetLevel:this.headerInsetLevel}};return!0===this.isClickable&&(i.props.clickable=!0,!0===this.hasLink?Object.assign(i.props,this.linkProps):i.attrs=this.toggleAriaAttrs,i.on={...this.qListeners,click:this.__onHeaderClick}),e(a["a"],i,t)},__getContent(e){const t=[this.__getHeader(e),e(l["a"],{props:{duration:this.duration},on:Object(v["b"])(this,"slide",{show:()=>{this.$emit("after-show")},hide:()=>{this.$emit("after-hide")}})},[e("div",{staticClass:"q-expansion-item__content relative-position",style:this.contentStyle,attrs:{id:this.targetUid},directives:[{name:"show",value:this.showing}]},Object(f["c"])(this,"default"))])];return this.expandSeparator&&t.push(e(d["a"],{staticClass:"q-expansion-item__border q-expansion-item__border--top absolute-top",props:{dark:this.isDark}}),e(d["a"],{staticClass:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",props:{dark:this.isDark}})),t}},render(e){return e("div",{staticClass:"q-expansion-item q-item-type",class:this.classes},[e("div",{staticClass:"q-expansion-item__container relative-position"},this.__getContent(e))])},created(){void 0!==this.group&&this.$root.$on(b,this.__eventHandler),this.targetUid="e_"+Object(y["a"])()},beforeDestroy(){void 0!==this.group&&this.$root.$off(b,this.__eventHandler)}})},"3b8d":function(e,t,i){"use strict";i("c24c")},"3ed6":function(e,t,i){},"40f9":function(e,t,i){"use strict";i("c589")},"42dc":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"workspace-list"}},[t("div",{staticClass:"title"},[e._v("Workspace")]),t("div",{staticClass:"wrapper"},[t("ValidationProvider",{attrs:{name:"workspace",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{attrs:{value:e.value,"is-mandatory":"","is-clearable":!1,options:e.workspaces,"is-readonly":"",error:i[0]},on:{input:e.handleInput}})]}}])})],1)])},a=[],o=i("1b0d"),r=i("7bb1"),n=i("12b8"),l={name:"WorkspaceList",components:{ValidationProvider:r["b"],SelectField:n["a"]},props:{value:{type:Number,required:!0}},data(){return{workspaces:[]}},created(){this.getWorkspaces()},methods:{handleInput(e){this.$emit("input",e)},async getWorkspaces(){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await o["u"].getWorkspaceList();this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t&&(this.workspaces=t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id})))}}},d=l,c=(i("2852"),i("2877")),u=Object(c["a"])(d,s,a,!1,null,"d504442c",null);t["a"]=u.exports},"42fc":function(e,t,i){"use strict";i.d(t,"a",(function(){return D}));i("d9e2");function s(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e,t){if(!e)throw new Error(t)}function o(e){return Object.keys(e)}function r(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function n(e,t,i){var s="."+t,a=new RegExp("(\\".concat(t,")?$"));return i(e).replace(a,s)}function l(e){return"555xmlHello .  world!".trim().replace(/^([0-9,;]|(xml))+/,""),e.replace(/[^_a-zA-Z 0-9:\-\.]/g,"").replace(/^([ 0-9-:\-\.]|(xml))+/i,"").replace(/ +/g,"-")}function d(e){return Array(e+1).join(" ")}function c(e){return e.replace(/([<>&])/g,(function(e,t){switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return""}}))}function u(e,t,i){switch(t){case"txt":var s="text/plain;charset=utf-8";return i?URL.createObjectURL(new Blob([e],{type:s})):"data:,".concat(s)+encodeURIComponent(e);case"css":s="text/css;charset=utf-8";return i?URL.createObjectURL(new Blob([e],{type:s})):"data:,".concat(s)+encodeURIComponent(e);case"html":s="text/html;charset=utf-8";return i?URL.createObjectURL(new Blob([e],{type:s})):"data:,".concat(s)+encodeURIComponent(e);case"json":s="text/json;charset=utf-8";return i?URL.createObjectURL(new Blob([e],{type:s})):"data:,".concat(s)+encodeURIComponent(e);case"csv":s="text/csv;charset=utf-8";return i?URL.createObjectURL(new Blob([e],{type:s})):"data:,".concat(s)+encodeURIComponent(e);case"xls":s="text/application/vnd.ms-excel;charset=utf-8";return i?URL.createObjectURL(new Blob([e],{type:s})):"data:,".concat(s)+encodeURIComponent(e);case"xml":s="text/application/xml;charset=utf-8";return i?URL.createObjectURL(new Blob([e],{type:s})):"data:,".concat(s)+encodeURIComponent(e);default:return""}}function h(e,t,i,s){void 0===i&&(i="download"),void 0===s&&(s=!0);var a=u(e,t,s),o=document.createElement("a");o.href=a,o.download=i,o.setAttribute("style","visibility:hidden"),document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!1,view:window})),document.body.removeChild(o)}var m=function(){return m=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var a in t=arguments[i],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},m.apply(this,arguments)},p=function(e,t){var i="function"===typeof Symbol&&e[Symbol.iterator];if(!i)return e;var s,a,o=i.call(e),r=[];try{while((void 0===t||t-- >0)&&!(s=o.next()).done)r.push(s.value)}catch(n){a={error:n}}finally{try{s&&!s.done&&(i=o["return"])&&i.call(o)}finally{if(a)throw a.error}}return r};function f(e){if(!e||s(e)&&!e.length||!s(e)&&!o(e).length)return function(e){return e};var t=s(e)?e.reduce((function(e,t){var i;return m(m({},e),(i={},i[t]=t,i))}),Object.create(null)):e;return function(e){return s(e)?e.map((function(e){return r(e).reduce((function(e,i){var s=p(i,2),a=s[0],o=s[1];return a in t&&(e[t[a]]=o),e}),Object.create(null))})).filter((function(e){return o(e).length})):r(e).reduce((function(e,i){var s=p(i,2),a=s[0],o=s[1];return a in t&&(e[t[a]]=o),e}),Object.create(null))}}function v(e){var t="Invalid export data. Please provide a valid JSON";try{return"string"===typeof e?JSON.parse(e):e}catch(i){throw new Error(t)}}function y(e,t,i){void 0===t&&(t=null);var s="Invalid export data. Please provide valid JSON object";try{return JSON.stringify(e,t,i)}catch(a){throw new Error(s)}}function b(e){return e.map(r).reduce((function(t,i,s){return i.reduce((function(t,i){var a=p(i,2),o=a[0],r=a[1],n=t[o]||Array.from({length:e.length}).map((function(e){return""}));return n[s]=("string"!==typeof r?JSON.stringify(r):r)||"",t[o]=n,t}),t)}),Object.create(null))}function g(e,t){return void 0===t&&(t=function(e){return e}),t(r(e).map((function(e){var t=p(e,2),i=t[0],s=t[1];return{fieldName:i,fieldValues:s}})))}function w(e){var t=/,|"|\n/.test(e)?'"':"",i=e.replace(/"/g,'""');return"".concat(t).concat(i).concat(t)}var k={beforeTableEncode:function(e){return e},delimiter:","};function S(e,t){void 0===t&&(t={});var i=m(m({},k),t),s=i.beforeTableEncode,a=i.delimiter;if(!e.length)return"";var o=b(e),r=g(o,s),n=r.map((function(e){var t=e.fieldName;return t})).join(a)+"\r\n",l=r.map((function(e){var t=e.fieldValues;return t})).map((function(e){return e.map(w)})),d=l.reduce((function(e,t){return e.map((function(e,i){return"".concat(e).concat(a).concat(t[i])}))}));return n+d.join("\r\n")}function C(e,t){a(e.length>0);var i=b(e),s=g(i,t),o=s.map((function(e){var t=e.fieldName;return t})).join("</b></th><th><b>"),r=s.map((function(e){var t=e.fieldValues;return t})).map((function(e){return e.map((function(e){return"<td>".concat(e,"</td>")}))})),n=r.reduce((function(e,t){return e.map((function(e,i){return"".concat(e).concat(t[i])}))}));return"\n    <table>\n      <thead>\n        <tr><th><b>".concat(o,"</b></th></tr>\n      </thead>\n      <tbody>\n        <tr>").concat(n.join("</tr>\n        <tr>"),"</tr>\n      </tbody>\n    </table>\n  ")}var _={beforeTableEncode:function(e){return e}};function I(e,t){var i=m(m({},_),t).beforeTableEncode;if(!e.length)return"";var s='<html>\n  <head>\n    <meta charset="UTF-8" />\n  </head >\n  <body>\n    '.concat(C(e,i),"\n  </body>\n</html >\n");return s}function x(e){var t='<?xml version="1.0" encoding="utf-8"?><!DOCTYPE base>\n'.concat($(e,"base"),"\n");return t}function $(e,t,i,a){void 0===i&&(i="element"),void 0===a&&(a=0);var o=l(t),n=d(a);if(null===e||void 0===e)return"".concat(n,"<").concat(o," />");var u=s(e)?e.map((function(e){return $(e,i,i,a+2)})).join("\n"):"object"===typeof e?r(e).map((function(e){var t=p(e,2),s=t[0],o=t[1];return $(o,s,i,a+2)})).join("\n"):n+"  "+c(String(e)),h="".concat(n,"<").concat(o,">\n").concat(u,"\n").concat(n,"</").concat(o,">");return h}var B={txt:"txt",css:"css",html:"html",json:"json",csv:"csv",xls:"xls",xml:"xml"};function T(e){var t=e.data,i=e.fileName,o=void 0===i?"download":i,r=e.extension,l=e.fileNameFormatter,d=void 0===l?function(e){return e.replace(/\s+/,"_")}:l,c=e.fields,u=e.exportType,m=void 0===u?"txt":u,p=e.replacer,b=void 0===p?null:p,g=e.space,w=void 0===g?4:g,k=e.processor,C=void 0===k?h:k,_=e.withBOM,$=void 0!==_&&_,B=e.beforeTableEncode,T=void 0===B?function(e){return e}:B,F=e.delimiter,A=void 0===F?",":F,L="Invalid export data. Please provide an array of objects",D="Can't export unknown data type ".concat(m,"."),E="Can't export string data to ".concat(m,".");if("string"===typeof t)switch(m){case"txt":case"css":case"html":return C(t,m,n(o,null!==r&&void 0!==r?r:m,d));default:throw new Error(E)}var O=f(c),M=O(v(t)),q=y(M,b,w);switch(m){case"txt":case"css":case"html":return C(q,m,n(o,null!==r&&void 0!==r?r:m,d));case"json":return C(q,m,n(o,null!==r&&void 0!==r?r:"json",d));case"csv":a(s(M),L);var P="\ufeff",V=S(M,{beforeTableEncode:T,delimiter:A}),N=$?P+V:V;return C(N,m,n(o,null!==r&&void 0!==r?r:"csv",d));case"xls":a(s(M),L);N=I(M,{beforeTableEncode:T});return C(N,m,n(o,null!==r&&void 0!==r?r:"xls",d));case"xml":N=x(M);return C(N,m,n(o,null!==r&&void 0!==r?r:"xml",d));default:throw new Error(D)}}T.types=B,T.processors={downloadFile:h};var F=T,A=F;const L=()=>{function e(e,t,i){if(e)try{const s=t||"exported-data",a=A.types[i||"xls"];A({data:e,fileName:s,exportType:a})}catch(s){throw new Error("Parsing failed!")}}return{exportDataFromJSON:e}};function D(e,t){if(!e)return this.$alert.info("Data not found");let i=new Date;return t||(t=`${i.getFullYear()}${i.getMonth()+1}${i.getDate()}${i.getHours()}${i.getMinutes()}${i.getSeconds()}`),L().exportDataFromJSON(e,t,null)}},"431c":function(e,t,i){},4519:function(e,t,i){},"467fa":function(e,t,i){},4697:function(e,t,i){"use strict";i("d30f")},4714:function(e,t,i){},"487e":function(e,t,i){"use strict";i("0b2c")},"48d5":function(e,t,i){},4904:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return e.showChips?t("div",{attrs:{id:"item-action-chips"}},[e.sortBy.criteria?t("div",{staticClass:"chip sort-by"},[t("div",{staticClass:"label"},[e._v("Sort by: "+e._s(e.getColumnLabel(e.sortBy.criteria)))]),t("BaseIcon",{staticClass:"q-mr-md",attrs:{name:"ASC"===e.sortBy.order?"mdi-sort-ascending":"mdi-sort-descending","inherit-color":""}}),t("BaseIcon",{staticClass:"cursor-pointer",attrs:{name:"mdi-close-circle","inherit-color":""},on:{click:e.clearSortBy}})],1):e._e(),e.groupBy?t("div",{staticClass:"chip group-by"},[t("div",{staticClass:"label"},[e._v("Group by: "+e._s(e.getColumnLabel(e.groupBy)))]),t("BaseIcon",{staticClass:"cursor-pointer",attrs:{name:"mdi-close-circle","inherit-color":""},on:{click:e.clearGroupBy}})],1):e._e(),e.contentSearch.contentSearchValue?t("div",{staticClass:"chip filter-by"},[t("div",{staticClass:"label"},[t("BaseIcon",{staticClass:"q-mr-xs",attrs:{name:"eva-funnel-outline","inherit-color":""}}),e._v(" SearchBy: "+e._s(e.contentSearch.contentSearchValue)+" ")],1),t("BaseIcon",{staticClass:"cursor-pointer",attrs:{name:"mdi-close-circle","inherit-color":""},on:{click:function(t){return e.$emit("clearContentSearch")}}})],1):e._e(),t("BaseScrollbar",[e.filterBy.length?t("div",{staticClass:"q-mb-md",staticStyle:{display:"flex"}},e._l(e.filterBy,(function(i,s){return t("div",{key:s,staticClass:"col-auto"},[i.filters.length?t("div",{class:{"filterBy-length":e.filterBy.length>1}},e._l(i.filters,(function(i,a){return t("div",{key:a,staticClass:"chip filter-by"},[t("div",{staticClass:"label"},[t("BaseIcon",{staticClass:"q-mr-xs",attrs:{name:"eva-funnel-outline","inherit-color":""}}),e._v(" "+e._s(e.getColumnLabel(i.criteria))+" "+e._s(i.condition)+" "+e._s(i.value)+" ")],1),t("BaseIcon",{staticClass:"cursor-pointer",attrs:{name:"mdi-close-circle","inherit-color":""},on:{click:function(t){return e.clearFilterBy(s,a)}}})],1)})),0):e._e()])})),0):e._e()])],1):e._e()},a=[],o={name:"ItemActionChips",props:{columns:{type:Array,required:!0},sortBy:{type:Object,required:!0},groupBy:{type:String,required:!0},filterBy:{type:Array,required:!0},contentSearch:{type:Object,default:()=>({contentSearchValue:"",fuzzy:0,searchType:1})},simpleSearchApplyed:{type:Boolean,required:!1,default:!1}},computed:{showChips(){return!!this.sortBy.criteria||(!!this.groupBy||!this.simpleSearchApplyed&&(!!this.filterBy.length||!!this.contentSearch.contentSearchValue))}},methods:{getColumnLabel(e){var t;return null===(t=this.columns.find(t=>t.name===e))||void 0===t?void 0:t.label},clearSortBy(){this.$emit("clearSortBy")},clearGroupBy(){this.$emit("clearGroupBy")},clearFilterBy(e,t){this.$emit("clearFilterBy",e,t)}}},r=o,n=(i("c3ca"),i("2877")),l=Object(n["a"])(r,s,a,!1,null,"1d4f94d9",null);t["a"]=l.exports},"4c7b":function(e,t,i){"use strict";i("ed03")},"4ddc":function(e,t,i){},"4e64":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{style:e._style,attrs:{id:"pulse"}})},a=[],o=i("b263"),r={name:"Pulse",props:{color:{type:String,default:"secondary",validator:o["a"]}},computed:{_style(){return`background-color: var(--${this.color}); color: var(--${this.color})`}}},n=r,l=(i("e953"),i("2877")),d=Object(l["a"])(n,s,a,!1,null,"123d286d",null);t["a"]=d.exports},"4f21":function(e,t,i){},5042:function(e,t,i){},5132:function(e,t,i){"use strict";var s=i("2250"),a=i("4dc8");function o(e,t){t=Object(s["a"])(t,e);var i=0,o=t.length;while(null!=e&&i<o)e=e[Object(a["a"])(t[i++])];return i&&i==o?e:void 0}t["a"]=o},"52e1":function(e,t,i){"use strict";i("73e7")},5960:function(e,t,i){"use strict";i("9a8d")},"5d0b":function(e,t,i){},"5e23":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,"no-padding":!0,"has-footer":"",width:"650px"},on:{input:function(t){return e.$emit("input",!1)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Document Sharing By Email")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"document-sharing-details"}},[t("Tabs",{staticClass:"tabs",attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),t("BaseScrollbar",{attrs:{height:"calc(100vh - 170px)"}},[t("div",{staticClass:"q-pa-md"},[t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"field-wrapper"},[t("ValidationProvider",{attrs:{name:"to",rules:{required:!0,email:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("MultiSelectField",{staticClass:"q-mb-sm",attrs:{label:"to","is-mandatory":"","new-option":"",error:i[0]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})]}}])}),t("ValidationProvider",{attrs:{name:"subject",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-mb-sm",attrs:{label:"subject","is-mandatory":"",error:i[0]},model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}})]}}])}),"attach link"===e.tab?[t("div",{staticClass:"row"},[t("div",{staticClass:"col-6 q-pr-sm"},[t("ValidationProvider",{attrs:{name:"Expiry from Date",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("DateField",{staticClass:"q-mb-sm",attrs:{label:"Expiry from Date","is-mandatory":"",error:i[0],"minimum-validation":!0},model:{value:e.fromDate,callback:function(t){e.fromDate=t},expression:"fromDate"}})]}}],null,!1,714078504)})],1),t("div",{staticClass:"col-6 q-pl-sm"},[t("ValidationProvider",{attrs:{name:"Expiry to Date",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("DateField",{staticClass:"q-mb-sm",attrs:{label:"Expiry to Date","is-mandatory":"",error:i[0],"minimum-validation":!0},model:{value:e.toDate,callback:function(t){e.toDate=t},expression:"toDate"}})]}}],null,!1,738413864)})],1)])]:e._e(),e._l(e.fileList,(function(i){return[t("q-chip",{key:i.id,staticClass:"chips secondary-hover cursor-pointer",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{attrs:{icon:"mdi-file",color:"secondary","text-color":"white"},on:{click:function(t){return e.remove(i.id)}}}),e._v(" "+e._s(i.name)+" "),t("q-avatar",{staticClass:"close-icon",attrs:{icon:"mdi-close","text-color":"red"},on:{click:function(t){return e.remove(i.id)}}})],1)]})),t("TextBuilderField",{model:{value:e.body,callback:function(t){e.body=t},expression:"body"}})],2)])],1)])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:function(t){return e.$emit("input",!1)}}}),t("BaseButton",{attrs:{label:"send"},on:{click:e.documentShare}})]},proxy:!0}])})},a=[],o=(i("14d9"),i("7bb1")),r=i("381e"),n=i("b94d"),l=i("b3d1"),d=i("53c1"),c=i("c3d2"),u=i("695e"),h=i("1b0d"),m={name:"EmailSharing",components:{Sheet:r["a"],ValidationObserver:o["a"],ValidationProvider:o["b"],TextField:l["a"],Tabs:n["a"],DateField:d["a"],MultiSelectField:c["a"],TextBuilderField:u["a"]},props:{value:{type:Boolean,default:!1},repositoryId:{type:Number,default:0},fileList:{type:Array,default:()=>[]}},data(){return{tab:"attach file",tabs:[{id:this.$nano.id(),label:"attach file",value:"attach file"},{id:this.$nano.id(),label:"attach link",value:"attach link"}],email:[],subject:"",body:"",fromDate:"",toDate:"",minimumFromDate:""}},created(){const e=new Date,t=e.toISOString().split("T")[0];this.minimumFromDate=t},methods:{clearFields(){this.tab="attach file",this.email=[],this.subject="",this.body="",this.fromDate="",this.toDate=""},remove(e){if(this.fileList.length>1){let t=this.fileList.filter(t=>t.id!=e);this.$emit("update:fileList",t)}else this.$alert.warning("Minimum one document is required")},async documentShare(){const e=await this.$refs.form.validate();if(!e)return;let t=[];if(this.fileList.forEach(e=>{t.push(e.id)}),"attach file"===this.tab){let e={repositoryId:this.repositoryId,itemIds:t,toAdd:this.email.toString(),subject:this.subject,body:this.body};const{error:i}=await h["k"].documentShare(e);if(i)return void this.$alert.error(i)}else if("attach link"===this.tab){if(this.toDate<this.fromDate)return void this.$alert.warning("ToDate Is Must Be Greater Than Or Equal To FromDate");let e={toAddress:this.email.toString(),subject:this.subject,body:this.body,expiryFromDate:this.fromDate,expiryTodate:this.toDate,repositoryId:this.repositoryId,itemIdArray:t};const{error:i}=await h["k"].documentShareLink(e);if(i)return void this.$alert.error(i)}this.$alert.success("Initiated Document Sharing by Email"),this.clearFields(),this.$emit("input",!1)}}},p=m,f=(i("5fab"),i("2877")),v=i("b047"),y=i("cb32"),b=i("93dc"),g=i.n(b),w=Object(f["a"])(p,s,a,!1,null,"2c37c0ea",null);t["a"]=w.exports;g()(w,"components",{QChip:v["a"],QAvatar:y["a"]})},"5e5c":function(e,t,i){"use strict";i("204d")},"5f3d":function(e,t,i){},"5fab":function(e,t,i){"use strict";i("467fa")},"61cf":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",[e.showWorkspaceRepository?[t("WorkspaceList",{model:{value:e.workspaceId,callback:function(t){e.workspaceId=t},expression:"workspaceId"}}),t("RepositoryList",{attrs:{"workspace-id":e.workspaceId},model:{value:e.repositoryId,callback:function(t){e.repositoryId=t},expression:"repositoryId"}})]:e._e(),t("div",{class:[{"is-dragging":e.isDragging},{"is-indexing":e.tabIndexing}],attrs:{id:"dropzone"}},[t("div",{staticClass:"hint"},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"128px","inherit-color":""}}),t("div",{staticClass:"title"},[e._v("Drag & Drop your files here to upload")]),t("div",{staticClass:"description"},[e._v(" Simply dragging and dropping them from the user's computer or device onto a designated area on the screen ")]),t("OrDivider",{staticClass:"full-width"}),e.tabIndexing?t("BaseButton",{attrs:{icon:"eva-plus",label:"Add more files"}}):t("BaseButton",{attrs:{label:"browse files"}})],1),t("input",{ref:"dropzone",attrs:{type:"file",multiple:e.hasMultiple},on:{dragenter:function(t){e.isDragging=!0},dragleave:function(t){e.isDragging=!1},drop:function(t){e.isDragging=!1},change:e.handleChange}})])],2)},a=[],o=(i("caad"),i("14d9"),i("42dc")),r=i("dc7a"),n=i("9c79"),l=i("2f62"),d=i("dd90"),c={name:"Dropzone",components:{WorkspaceList:o["a"],RepositoryList:r["a"],OrDivider:n["a"]},props:{workspaceId:{type:Number,required:!0},repositoryId:{type:Number,required:!0},hasMultiple:{type:Boolean,default:!0},showWorkspaceRepository:{type:Boolean,default:!0},tabIndexing:{type:Boolean,default:!1}},data(){return{isDragging:!1}},computed:{...Object(l["c"])(["session"]),fileSizeLimit(){return this.session.license,52428800}},methods:{handleChange(e){const t=e.target.files,i=[],s=["exe"];if(t.length){for(let e of t){if(e.size>this.fileSizeLimit)return void this.$alert.warning(e.name+" - Maximum file size exceeded");const t=e.name.split(".").reverse()[0];if(s.includes(t))return void this.$alert.warning(e.name+" - Invalid file type");if(!Object(d["a"])(t))return void this.$alert.warning(e.name+" - Invalid file type");i.push({id:this.$nano.id(),name:e.name,type:t.slice(0,4),size:e.size,createdAt:"",status:"UPLOADING",file:e,uploadedPercentage:0})}this.$refs.dropzone.value="",this.$emit("upload",i)}}}},u=c,h=(i("9495"),i("2877")),m=Object(h["a"])(u,s,a,!1,null,"dc127c58",null);t["a"]=m.exports},"626d":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("Modal",{attrs:{value:e.value,"is-header":!1,"has-footer":!0,width:"60vw",height:"80vh"},on:{input:function(t){return e.$emit("input")}},scopedSlots:e._u([{key:"default",fn:function(){return[e.summarizeView?[t("div",{staticClass:"footer-modal q-pa-sm"},[t("BaseIcon",{attrs:{name:"mdi-creation",color:"secondary"}}),t("span",{staticClass:"footer-text"},[e._v("Recommended Action:")]),e._v(" "+e._s(e.summarizingData.description)+" ")],1),t("div",{staticClass:"q-pt-md"},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 320px)"}},[t("table",[t("tbody",[e._l(e.summarizingData.data,(function(i,s){return["string"===typeof i?[t("tr",{key:s},[t("td",{staticClass:"tablekey"},[e._v(e._s(s))]),t("td",{staticClass:"tablevalue"},[e._v(e._s(i))])])]:"object"===typeof i?[Array.isArray(i)?[t("tr",{key:s},[t("td",{staticClass:"tablekey",staticStyle:{color:"#643094"},attrs:{colspan:"2"}},[e._v(" "+e._s(s)+" ")])]),t("tr",{key:s},[t("td",{attrs:{colspan:"2"}},[t("table",{staticClass:"sub-table"},[t("thead",[t("tr",e._l(i[0],(function(i,s){return t("th",{key:s,staticClass:"tablevalue",staticStyle:{color:"#00bcd4"}},[e._v(" "+e._s(s)+" ")])})),0)]),t("tbody",e._l(i,(function(i,s){return t("tr",{key:s},e._l(i,(function(i,s){return t("td",{key:s,staticClass:"tablevalue"},[e._v(" "+e._s(i)+" ")])})),0)})),0)])])])]:[t("tr",{key:s},[t("td",{staticClass:"tablekey",staticStyle:{color:"#643094"},attrs:{colspan:"2"}},[e._v(" "+e._s(s)+" ")])]),e._l(i,(function(i,s){return["string"===typeof i?[t("tr",{key:s},[t("td",{staticClass:"tablekey"},[e._v(e._s(s))]),t("td",{staticClass:"tablevalue"},[e._v(e._s(i))])])]:"object"===typeof i?[t("tr",{key:s},[t("td",{staticClass:"tablekey",staticStyle:{color:"#f49d3a"},attrs:{colspan:"2"}},[e._v(" "+e._s(s)+" ")])]),e._l(i,(function(i,s){return["string"===typeof i?[t("tr",{key:s},[t("td",{staticClass:"tablekey"},[e._v(e._s(s))]),t("td",{staticClass:"tablevalue"},[e._v(" "+e._s(i)+" ")])])]:e._e()]}))]:"array"===typeof i?[t("tr",{key:s},[t("td",{attrs:{colspan:"2"}},[e._v(e._s(s))])]),e._l(i,(function(i,s){return["string"===typeof e.objectvalueobject?[t("tr",{key:s},[t("td",{staticClass:"tablekey"},[e._v(e._s(s))]),t("td",{staticClass:"tablevalue"},[e._v(" "+e._s(i)+" ")])])]:e._e()]}))]:e._e()]}))]]:e._e()]}))],2)])])],1)]:[t("div",{staticClass:"htmlElement",domProps:{innerHTML:e._s(e.summarizingData)}})]]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Close"},on:{click:function(t){return e.$emit("input",!1)}}})]},proxy:!0}])})},a=[],o=i("6a70"),r=i("1b0d"),n={name:"Summarize",components:{Modal:o["a"]},props:{value:{type:Boolean,default:!1},repositoryId:{type:Number,default:0},itemid:{type:Number,default:0},transactionId:{type:Number,default:0},workflowId:{type:Number,default:0},processId:{type:Number,default:0},page:{type:String,default:""}},data(){return{summarizingData:"",summarizeView:!1}},watch:{value:{immediate:!0,handler(){this.value&&("REPOSITORY"===this.page?this.documentSummarize():"WORKFLOW"===this.page&&this.workflowRecommendation())}}},methods:{async documentSummarize(){this.$store.commit("showLoadingBarSave");const{error:e,payload:t}=await r["p"].getSummary(this.repositoryId,this.itemid);if(this.$store.commit("hideLoadingBarSave"),e)this.$alert.error(e);else if(t)try{this.summarizingData=JSON.parse(t.output),this.summarizeView=!0}catch(i){console.log(i),this.summarizeView=!1,this.summarizingData=t.output.replace(new RegExp("<title>","g"),'<title class="heading" style="display:block">').replace(new RegExp("<h1>","g"),'<h6 class="heading">').replace(new RegExp("<h2>","g"),'<h6 class="heading2">').replace(new RegExp("<table>","g"),'<table class="custom-table-style">').replace(new RegExp("<p>","g"),'<p style="margin-top:20px">')}},async workflowRecommendation(){this.$store.commit("showLoadingBarSave");const{error:e,payload:t}=await r["t"].getWorkflowRecommendation(this.workflowId,this.processId,this.transactionId);if(this.$store.commit("hideLoadingBarSave"),e)this.$alert.error(e);else if(t)try{this.summarizingData=JSON.parse(t.output),this.summarizeView=!0}catch(i){console.log(i),this.summarizeView=!1,this.summarizingData=t.replace(new RegExp("<title>","g"),'<title class="heading" style="display:block">').replace(new RegExp("<h1>","g"),'<h6 class="heading">').replace(new RegExp("<h2>","g"),'<h6 class="heading2">').replace(new RegExp("<table>","g"),'<table class="custom-table-style">').replace(new RegExp("<p>","g"),'<p style="margin-top:20px">')}}}},l=n,d=(i("3595"),i("e864"),i("2877")),c=Object(d["a"])(l,s,a,!1,null,"85a6110e",null);t["a"]=c.exports},"64ab":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"tip-tap-editor"}},[t("Toolbar",{attrs:{"hide-tool-bar":e.hideToolBar,"form-columns":e.formColumns},on:{"set-heading":e.setHeading,"unset-heading":e.unsetHeading,"toggle-alignment":e.toggleAlignment,"toggle-bold":e.toggleBold,"toggle-italic":e.toggleItalic,"toggle-underline":e.toggleUnderline,"toggle-bullet-list":e.toggleBulletList,"toggle-number-list":e.toggleNumberList,"increase-indent":e.increaseIndent,"decrease-indent":e.decreaseIndent,"set-text-color":e.setTextColor,"unset-text-color":e.unsetTextColor,"set-bg-color":e.setBgColor,"unset-bg-color":e.unsetBgColor,undo:e.undo,redo:e.redo,"set-link":e.setLink,"add-field":e.addField}}),t("EditorContent",{attrs:{editor:e.editor}})],1)},a=[],o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"toolbar"}},[t("AddField",{attrs:{"form-columns":e.formColumns},on:{click:e.addField}}),e.hideToolBar?[t("Heading",{on:{set:e.setHeading,unset:e.unsetHeading}}),t("Alignment",{on:{toggle:e.toggleAlignment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"bold",expression:"'bold'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-bold"},on:{click:e.toggleBold}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"italic",expression:"'italic'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-italic"},on:{click:e.toggleItalic}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"underline",expression:"'underline'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-underline"},on:{click:e.toggleUnderline}}),t("List",{on:{bullet:e.toggleBulletList,number:e.toggleNumberList}}),t("Indent",{on:{increase:e.increaseIndent,decrease:e.decreaseIndent}}),t("TextColor",{on:{set:e.setTextColor,unset:e.unsetTextColor}}),t("BackgroundColor",{on:{set:e.setBgColor,unset:e.unsetBgColor}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"undo",expression:"'undo'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-undo"},on:{click:e.undo}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"redo",expression:"'redo'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-redo"},on:{click:e.redo}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"link",expression:"'link'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-link-2-outline"},on:{click:e.setLink}})]:e._e()],2)},r=[],n=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"heading",expression:"'heading'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-size"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},e._l(e.headings,(function(i){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:i.label,expression:"heading.label",modifiers:{right:!0}}],key:i.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:i.icon},on:{click:function(t){return e.handleClick(i.level)}}})})),1)],1)},l=[],d={name:"Heading",data(){return{headings:[{id:this.$nano.id(),label:"heading 1",icon:"mdi-format-header-1",level:1},{id:this.$nano.id(),label:"heading 2",icon:"mdi-format-header-2",level:2},{id:this.$nano.id(),label:"heading 3",icon:"mdi-format-header-3",level:3},{id:this.$nano.id(),label:"heading 4",icon:"mdi-format-header-4",level:4},{id:this.$nano.id(),label:"heading 5",icon:"mdi-format-header-5",level:5},{id:this.$nano.id(),label:"heading 6",icon:"mdi-format-header-6",level:6},{id:this.$nano.id(),label:"normal",icon:"mdi-format-paragraph",level:0}]}},methods:{handleClick(e){e?this.$emit("set",e):this.$emit("unset")}}},c=d,u=i("2877"),h=i("4e73"),m=i("93dc"),p=i.n(m),f=Object(u["a"])(c,n,l,!1,null,"5b56e398",null),v=f.exports;p()(f,"components",{QMenu:h["a"]});var y=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"alignment",expression:"'alignment'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-align-center"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},e._l(e.alignments,(function(i){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:i.label,expression:"alignment.label",modifiers:{right:!0}}],key:i.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:i.icon},on:{click:function(t){return e.$emit("toggle",i.label)}}})})),1)],1)},b=[],g={name:"Alignment",data(){return{alignments:[{id:this.$nano.id(),label:"left",icon:"mdi-format-align-left"},{id:this.$nano.id(),label:"center",icon:"mdi-format-align-center"},{id:this.$nano.id(),label:"right",icon:"mdi-format-align-right"},{id:this.$nano.id(),label:"justify",icon:"mdi-format-align-justify"}]}}},w=g,k=Object(u["a"])(w,y,b,!1,null,"4a6ff39e",null),S=k.exports;p()(k,"components",{QMenu:h["a"]});var C=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"list",expression:"'list'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-list-bulleted-square"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},e._l(e.lists,(function(i){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:i.label,expression:"list.label",modifiers:{right:!0}}],key:i.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:i.icon},on:{click:function(t){return e.$emit(i.value)}}})})),1)],1)},_=[],I={name:"List",data(){return{lists:[{id:this.$nano.id(),label:"bullet list",icon:"mdi-format-list-bulleted",value:"bullet"},{id:this.$nano.id(),label:"number list",icon:"mdi-format-list-numbered",value:"number"}]}}},x=I,$=Object(u["a"])(x,C,_,!1,null,"6f405cc2",null),B=$.exports;p()($,"components",{QMenu:h["a"]});var T=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"indent",expression:"'indent'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-indent-increase"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},e._l(e.indents,(function(i){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:i.label,expression:"indent.label",modifiers:{right:!0}}],key:i.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:i.icon},on:{click:function(t){return e.$emit(i.value)}}})})),1)],1)},F=[],A={name:"Indent",data(){return{indents:[{id:this.$nano.id(),label:"increase indent",icon:"mdi-format-indent-increase",value:"increase"},{id:this.$nano.id(),label:"decrease indent",icon:"mdi-format-indent-decrease",value:"decrease"}]}}},L=A,D=Object(u["a"])(L,T,F,!1,null,"fd1a0bc6",null),E=D.exports;p()(D,"components",{QMenu:h["a"]});var O=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"text color",expression:"'text color'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"format_color_text"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"auto-close":"","transition-show":"scale","transition-hide":"scale"}},[t("div",{attrs:{id:"colors"}},e._l(e.colors,(function(i){return t("div",{key:i.id,staticClass:"color",style:{backgroundColor:i.value},on:{click:function(t){return e.handleInput(i)}}},[e.activeColor===i.value?t("BaseIcon",{attrs:{name:"eva-checkmark",color:"white"}}):e._e()],1)})),0)])],1)},M=[],q={name:"TextColor",data(){return{colors:[{id:this.$nano.id(),label:"primary",value:"#643094"},{id:this.$nano.id(),label:"secondary",value:"#00bcd4"},{id:this.$nano.id(),label:"red",value:"#f44336"},{id:this.$nano.id(),label:"pink",value:"#e91e63"},{id:this.$nano.id(),label:"purple",value:"#9c27b0"},{id:this.$nano.id(),label:"deep-purple",value:"#673ab7"},{id:this.$nano.id(),label:"indigo",value:"#3f51b5"},{id:this.$nano.id(),label:"blue",value:"#2196f3"},{id:this.$nano.id(),label:"teal",value:"#009688"},{id:this.$nano.id(),label:"green",value:"#4caf50"},{id:this.$nano.id(),label:"light-green",value:"#8bc34a"},{id:this.$nano.id(),label:"lime",value:"#cddc39"},{id:this.$nano.id(),label:"amber",value:"#ffc107"},{id:this.$nano.id(),label:"orange",value:"#ff9800"},{id:this.$nano.id(),label:"deep-orange",value:"#ff5722"},{id:this.$nano.id(),label:"brown",value:"#795548"},{id:this.$nano.id(),label:"gray",value:"#64748b"},{id:this.$nano.id(),label:"none",value:""}],activeColor:""}},methods:{handleInput(e){this.activeColor=e.value,"none"!==e.label?this.$emit("set",e.value):this.$emit("unset")}}},P=q,V=(i("718c"),Object(u["a"])(P,O,M,!1,null,"781fdde1",null)),N=V.exports;p()(V,"components",{QMenu:h["a"]});var R=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"background color",expression:"'background color'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-color-palette-outline"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"auto-close":"","transition-show":"scale","transition-hide":"scale"}},[t("div",{attrs:{id:"colors"}},e._l(e.colors,(function(i){return t("div",{key:i.id,staticClass:"color",style:{backgroundColor:i.value},on:{click:function(t){return e.handleInput(i)}}},[e.activeColor===i.value?t("BaseIcon",{attrs:{name:"eva-checkmark",color:"white"}}):e._e()],1)})),0)])],1)},z=[],j={name:"BackgroundColor",data(){return{colors:[{id:this.$nano.id(),label:"primary",value:"#dec2e7"},{id:this.$nano.id(),label:"secondary",value:"#b2ebf2"},{id:this.$nano.id(),label:"red",value:"#ffcdd2"},{id:this.$nano.id(),label:"pink",value:"#f8bbd0"},{id:this.$nano.id(),label:"purple",value:"#e1bee7"},{id:this.$nano.id(),label:"deep-purple",value:"#d1c4e9"},{id:this.$nano.id(),label:"indigo",value:"#c5cae9"},{id:this.$nano.id(),label:"blue",value:"#bbdefb"},{id:this.$nano.id(),label:"teal",value:"#b2dfdb"},{id:this.$nano.id(),label:"green",value:"#c8e6c9"},{id:this.$nano.id(),label:"lime",value:"#f0f4c3"},{id:this.$nano.id(),label:"amber",value:"#ffecb3"},{id:this.$nano.id(),label:"orange",value:"#ffe0b2"},{id:this.$nano.id(),label:"deep-orange",value:"#ffccbc"},{id:this.$nano.id(),label:"brown",value:"#d7ccc8"},{id:this.$nano.id(),label:"none",value:""}],activeColor:""}},methods:{handleInput(e){this.activeColor=e.value,"none"!==e.label?this.$emit("set",e.value):this.$emit("unset")}}},G=j,U=(i("e21c"),Object(u["a"])(G,R,z,!1,null,"6647f5ea",null)),H=U.exports;p()(U,"components",{QMenu:h["a"]});var W=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"add field",expression:"'add field'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-plus"}},[t("q-menu",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale"}},[t("div",{staticClass:"row border"},[t("div",{staticClass:"title-3 q-pa-xs col-auto"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchColumns,expression:"searchColumns"}],ref:"searchQuery",staticClass:"q-pa-md",attrs:{type:"text",placeholder:"Search",autofocus:""},domProps:{value:e.searchColumns},on:{keyup:function(t){return e.searchColumnList(e.searchColumns)},input:function(t){t.target.composing||(e.searchColumns=t.target.value)}}})])]),t("BaseScrollbar",{attrs:{height:"200px"}},e._l(e.fields,(function(i){return t("ListItem",{key:i.id,staticClass:"text-capitalize",class:i.display,attrs:{label:i.label,color:i.color},on:{click:function(t){return e.$emit("click",i)}}})})),1)],1)],1)},Y=[],J=(i("14d9"),i("caad"),i("cade")),Q={name:"AddField",components:{ListItem:J["a"]},props:{formColumns:{type:Array,default:()=>[]}},data(){return{fields:[],searchColumns:""}},watch:{formColumns:{immediate:!0,handler(){this.formColumns.length&&this.formColumns.forEach(e=>{this.fields.push({id:this.$nano.id(),label:e.label,value:e.hasDefault?e.value:`#F#${e.label}#F#`,display:"",color:e.hasDefault?e.color:"#00bcd4"})})}}},methods:{searchColumnList(e){this.fields.forEach(t=>{t.display="",e&&(t.label.toLowerCase().includes(e.toLowerCase())||(t.display="hide"))})}}},K=Q,X=(i("ea98"),Object(u["a"])(K,W,Y,!1,null,"42d457c1",null)),Z=X.exports;p()(X,"components",{QMenu:h["a"]});var ee={name:"Toolbar",components:{Heading:v,Alignment:S,List:B,Indent:E,TextColor:N,BackgroundColor:H,AddField:Z},props:{hideToolBar:{type:Boolean,default:!1},formColumns:{type:Array,default:()=>[]}},methods:{setHeading(e){this.$emit("set-heading",e)},unsetHeading(){this.$emit("unset-heading")},toggleAlignment(e){this.$emit("toggle-alignment",e)},toggleBold(){this.$emit("toggle-bold")},toggleItalic(){this.$emit("toggle-italic")},toggleUnderline(){this.$emit("toggle-underline")},toggleBulletList(){this.$emit("toggle-bullet-list")},toggleNumberList(){this.$emit("toggle-number-list")},increaseIndent(){this.$emit("increase-indent")},decreaseIndent(){this.$emit("decrease-indent")},setTextColor(e){this.$emit("set-text-color",e)},unsetTextColor(){this.$emit("unset-text-color")},setBgColor(e){this.$emit("set-bg-color",e)},unsetBgColor(){this.$emit("unset-bg-color")},undo(){this.$emit("undo")},redo(){this.$emit("redo")},setLink(){this.$emit("set-link")},addField(e){this.$emit("add-field",e)}}},te=ee,ie=(i("8829"),Object(u["a"])(te,o,r,!1,null,"10d390a9",null)),se=ie.exports,ae=i("1ab4"),oe=i("672a"),re=i("3560"),ne=i("cc86"),le=i("97a2"),de=i("58e6"),ce=i("e8d8"),ue=i("9751"),he=i("795d"),me=i("9980"),pe=function(){var e=this,t=e._self._c;return t("NodeViewWrapper",{staticClass:"field-placeholder-wrapper"},[t("div",{attrs:{id:"field-placeholder"}},[t("div",{staticClass:"field"},[e._v(" "+e._s(e.node.attrs.fieldType)+" ")]),t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-close",color:"red"},on:{click:e.deleteNode}})],1)])},fe=[],ve={name:"FieldPlaceholder",components:{NodeViewWrapper:ae["c"]},props:ae["e"]},ye=ve,be=(i("2f12"),Object(u["a"])(ye,pe,fe,!1,null,"f6682294",null)),ge=be.exports,we=me["d"].create({name:"FieldPlaceholder",group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{fieldType:{type:String,required:!0}}},parseHTML(){return[{tag:"FieldPlaceholder"}]},renderHTML({HTMLAttributes:e}){return["FieldPlaceholder",Object(me["r"])(e)]},addNodeView(){return Object(ae["d"])(ge)}}),ke=i("dce4"),Se={name:"TextEditor",components:{Toolbar:se,EditorContent:ae["b"]},props:{value:{type:Object,required:!0},field:{type:Object,default:()=>{}},hideToolBar:{type:Boolean,default:!0},formColumns:{type:Array,default:()=>[]}},data(){return{editor:null,textContent:""}},watch:{editor:{deep:!0,handler(){if(this.value){const t=new DOMParser,i=t.parseFromString(this.editor.getHTML(),"text/html");var e="";i.body.childNodes.forEach(t=>{let i=t.outerHTML.replace(new RegExp('"></fieldplaceholder>',"g"),""),s=i.split('<fieldplaceholder fieldtype="');e+=s.join("")});let s={text:this.editor.getHTML(),content:e};this.$emit("input",s)}}}},created(){this.initiateEditor()},beforeDestroy(){this.editor.destroy()},methods:{initiateEditor(){this.editor=new ae["a"]({content:this.value.text,extensions:[oe["a"],re["a"],ne["a"],le["a"].configure({types:["heading","paragraph"]}),de["a"],ce["a"],ue["a"].configure({multicolor:!0}),he["a"].configure({placeholder:"Start typing "}),we,Text,ke["b"]]})},setHeading(e){this.editor.chain().focus().toggleHeading({level:e}).run()},unsetHeading(){this.editor.chain().focus().clearNodes().unsetAllMarks().run()},toggleAlignment(e){this.editor.chain().focus().setTextAlign(e).run()},toggleBold(){this.editor.chain().focus().toggleBold().run()},toggleItalic(){this.editor.chain().focus().toggleItalic().run()},toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()},toggleBulletList(){this.editor.chain().focus().toggleBulletList().run()},toggleNumberList(){this.editor.chain().focus().toggleOrderedList().run()},increaseIndent(){this.editor.chain().focus().sinkListItem("listItem").run()},decreaseIndent(){this.editor.chain().focus().liftListItem("listItem").run()},undo(){this.editor.chain().focus().undo().run()},redo(){this.editor.chain().focus().redo().run()},setLink(){const e=this.editor.getAttributes("link").href,t=window.prompt("URL",e);null!==t&&(t?this.editor.chain().focus().extendMarkRange("link").setLink({href:t}).run():this.editor.chain().focus().extendMarkRange("link").unsetLink().run())},setTextColor(e){this.editor.chain().focus().setColor(e).run()},unsetTextColor(){this.editor.chain().focus().unsetColor().run()},setBgColor(e){this.editor.chain().focus().setHighlight({color:e}).run()},unsetBgColor(){this.editor.chain().focus().unsetHighlight().run()},addField(e){const t=`<FieldPlaceholder fieldId="${e.id}" fieldType="${e.value}">${e.value}</FieldPlaceholder>`;this.editor.chain().focus().insertContent(t).run()}}},Ce=Se,_e=(i("74d9"),Object(u["a"])(Ce,s,a,!1,null,"b184c692",null));t["a"]=_e.exports},"65c0":function(e,t,i){},"6c88":function(e,t,i){"use strict";i("5d0b")},"6cd0":function(e,t,i){"use strict";i("3093")},"6d23":function(e,t,i){"use strict";i("02c4")},"6fb0":function(e,t,i){"use strict";i("315c")},7104:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,"no-padding":"",width:"100vw"},on:{input:e.closeFileSheet},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{attrs:{id:"file"}},[e.menuActions?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"files",expression:"'files'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-menu-2"},on:{click:function(t){return e.$emit("show-files")}}}):e._e(),t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.type}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.file.name)+" "),2===e.file.checkinStatus?t("q-chip",{staticClass:"chips red-hover ellipsis",staticStyle:{height:"20px","font-size":"12px"},attrs:{color:"red","text-color":"white"}},[e._v(" Readonly ")]):e._e()],1),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.file.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.file.createdBy))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("File Size: "+e._s(e.fileSize))])],1)])],1)]},proxy:!0},e.menuActions?{key:"actions",fn:function(){return[e.checkTenant?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Data Extraction",expression:"'Data Extraction'",modifiers:{top:!0}}],staticClass:"q-ml-xs btnColor",attrs:{icon:"mdi-creation",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){e.summarizeModal=!0}}}):e._e(),t("div",{staticClass:"row q-mr-sm"},[2===e.file.checkinStatus&&e.file.checkinBy===e.$store.state.session.email?t("q-chip",{staticClass:"chips ellipsis",staticStyle:{height:"25px"},attrs:{outline:"",color:"orange",clickable:""},on:{click:function(t){return e.showCheckinUploadFile(e.file)}}},[t("q-avatar",{attrs:{icon:"mdi-file-upload-outline",color:"orange","text-color":"white"}}),e._v(" CheckIn ")],1):e._e()],1),e.isSignProcessFound&&0===e.file.checkinStatus?t("div",{staticClass:"row q-mr-sm"},[t("q-chip",{staticClass:"chips ellipsis",staticStyle:{height:"25px"},attrs:{outline:"",color:"primary",clickable:""},on:{click:e.checkSignProcess}},[t("q-avatar",{attrs:{icon:"mdi-file-outline",color:"primary","text-color":"white"}}),e._v(" Request for Sign ")],1)],1):e._e(),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:e.scrollbarHeight,width:"240px"}},e._l(e.actionList,(function(i){return t("ListItem",{key:i.id,attrs:{icon:i.icon,label:i.label,visible:i.visible,disabled:i.disable,"sub-list":i.subMenu||[]},on:{click:function(t){return e.updateColumns(i)},subListAction:e.checkWorkflow}})})),1)],1)],1)]},proxy:!0}:null],null,!0)},[t("div",{attrs:{id:"content-wrapper"}},[e.menuActions?t("div",{staticClass:"file-list"},[t("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})]):e._e(),e.documentEdit?e._e():t("div",{staticClass:"aside"},[t("div",{staticClass:"action-bar"},[t("Tabs",{attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}})],1),e.loadingBar?t("BaseLoadingBarSheet"):e._e(),t("div",["METADATA"===e.tab?t("FileDetails",{attrs:{file:e.file,"repository-field":e.repositoryField,"file-data":e.fileData,"is-retention-required":e.menuActions,"retention-list":e.retentionList},on:{refresh:e.getFileRetentions}}):e._e(),"COMMENTS"===e.tab?t("Comments",{attrs:{"repository-id":e.file.repositoryId,"item-id":e.file.id}}):e._e(),"HISTORY"===e.tab?t("DocumentHistory",{attrs:{history:e.history},on:{get:e.getFileHistory}}):e._e()],1)],1)]),t("Password",{attrs:{value:e.showPasswordModal,header:e.selectList,"repository-id":e.file.repositoryId,"item-id":e.file.id},on:{close:function(t){e.showPasswordModal=!1}}}),t("MetaDataEdit",{attrs:{value:e.showMetaDataEditModal,file:e.file,"repository-field":e.repositoryField,"file-data":e.fileData,"edit-from-file-sheet":""},on:{close:function(t){e.showMetaDataEditModal=!1},save:e.saveMetaData}}),t("EncryptDecrypt",{attrs:{value:e.showEncryptDecryptModal,header:e.selectList},on:{close:function(t){e.showEncryptDecryptModal=!1}}}),t("HidePage",{attrs:{value:e.showHidePageModal,header:e.selectList},on:{close:function(t){e.showHidePageModal=!1}}}),t("Task",{attrs:{value:e.showTaskModal},on:{close:function(t){e.showTaskModal=!1}}}),t("Alert",{attrs:{value:e.showAlertModal},on:{close:function(t){e.showAlertModal=!1}}}),t("CheckedInOut",{attrs:{value:e.showCheckedInOutModal,header:e.selectList,file:e.file},on:{close:function(t){e.showCheckedInOutModal=!1},checkout:e.closeFileSheet,downloadFile:e.fileDownload}}),t("Delete",{attrs:{value:e.showDeleteModal,header:e.selectList,"repository-id":e.file.repositoryId,"item-id":e.file.id},on:{close:e.closeDeleteFile}}),t("AddVault",{attrs:{value:e.showAddVaultModal},on:{close:function(t){e.showAddVaultModal=!1}}}),t("EmailSharing",{attrs:{"repository-id":e.file.repositoryId,"file-list":e.selectedFileList},on:{"update:fileList":function(t){e.selectedFileList=t},"update:file-list":function(t){e.selectedFileList=t}},model:{value:e.emailSharingSheet,callback:function(t){e.emailSharingSheet=t},expression:"emailSharingSheet"}}),t("Sheet",{attrs:{width:e.formWidth,"has-footer":"","no-padding":""},on:{input:e.closeProcessSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.headerTitle)+" ")]},proxy:!0},e.documentSignProcess?null:{key:"footer",fn:function(){return[e.actions?t("div",{staticClass:"footer row"},[e._l(e.actions,(function(i){return[t("BaseButton","Approve"===i||"Complete"===i||"Rightsize"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"positive"},on:{click:function(t){return e.validateRequest(i)}}}:"Reject"===i||"Terminate"===i||"Force Close"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"red"},on:{click:function(t){return e.validateRequest(i)}}}:"Forward"===i||"Reply"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"orange"},on:{click:function(t){return e.validateRequest(i)}}}:{key:i,staticClass:"q-ml-md",attrs:{label:i},on:{click:function(t){return e.validateRequest(i)}}})]}))],2):e._e()]},proxy:!0}],null,!0),model:{value:e.processSheet,callback:function(t){e.processSheet=t},expression:"processSheet"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 115px)"}},[e.formId?t("div",[t("RenderForm",{attrs:{"form-id":e.formId,panels:e.panels,"secondary-panels":e.secondaryPanels,"form-settings":e.formSettings,"form-model":e.formModel,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel,"enable-controls":e._enableControls},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t}}})],1):e._e(),e.documentSignProcess?t("div",[t("div",{staticClass:"fileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{attrs:{id:"file-frame",src:e.itemLink(),frameborder:"0"}})])])]):e._e()])],1),t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.processTabs,(function(i){return["TASK"!==i.value||"TASK"===i.value&&e.addTaskEnabled?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"processTab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary"},on:{click:function(t){return e.showLinks(i.value)}}},[i.count?t("span",{staticClass:"badge"},[e._v(e._s(i.count)+" ")]):e._e()]):e._e()]}))],2)])]),t("Sheet",{attrs:{width:"30vw"},on:{input:e.closeAttachmentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"upload documents",expression:"'upload documents'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-upload",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.$refs.attachments.click()}}})]},proxy:!0}]),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",[t("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:e.uploadWflowAttachments}}),e._l(e.attachmentList,(function(i){return[t("div",{key:i.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(i.name)}})],1),t("div",{staticClass:"col",on:{click:function(t){return e.openFile(i)}}},[e._v(" "+e._s(i.name)+" ")]),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(i)}}})],1)]),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.$day.format(i.createdAt)))]),i.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(i.createdByEmail))])]:e._e(),i.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.attachedFileSize(i.size)))])]:e._e()],2)])]}))],2)]),t("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"30"},on:{input:e.closeCommentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",[t("BaseScrollbar",{attrs:{height:"calc(100vh - 155px)"}},[e._l(e.commentsList,(function(i,s){return[t("q-chat-message",{key:s,staticClass:"q-ma-sm",attrs:{name:i.createdBy===e.$store.state.session.id?"me":i.createdByEmail,text:e.commentsText(i),"text-html":"",sent:i.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(i),"bg-color":e.bgCommentsColor(i)}})]}))],2)],1),t("div",{staticClass:"col q-pa-sm borderTop"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])])]),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("File Size: "+e._s(e.attachedFileSize(e.selectedFile.size)))])],1)])])]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{attrs:{id:"file-frame",src:e.attachedFileLink(),frameborder:"0"}})])])]),t("Sheet",{attrs:{width:"30vw"},on:{input:e.closeTaskSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Tasks ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Add Task",expression:"'Add Task'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-plus",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:e.addTask}})]},proxy:!0}]),model:{value:e.taskSheet,callback:function(t){e.taskSheet=t},expression:"taskSheet"}},[t("div",[e._l(e.taskEntries,(function(i){return[t("div",{key:i.id,staticClass:"taskEntries"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto q-mr-md",staticStyle:{"margin-top":"3px"},on:{click:function(t){return e.$emit("viewTask",i.id)}}},[e._v(" "+e._s(i.name)+" ")]),t("q-chip",{attrs:{size:"10px",color:e.getColor(i.priority),"text-color":"white"}},[e._v(" "+e._s(i.priority)+" ")]),t("q-chip",{attrs:{size:"10px",color:e.getColor(i.status),"text-color":"white"}},[e._v(" "+e._s(i.status)+" ")])],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col-12"},[e._v("Assigned To: "+e._s(i.assigned))]),t("div",{staticClass:"col-12"},[e._v(" Start Date: "+e._s(e.$day.format(i.startDate,!1))+" "),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" End Date: "+e._s(e.$day.format(i.endDate,!1))+" ")],1)])])]}))],2)]),e.taskFormId?t("AddTask",{attrs:{value:e.addTaskSheet,"form-settings":e.addTaskForm.settings,panels:e.addTaskForm.panels,"secondary-panels":e.addTaskForm.secondaryPanels,"form-id":e.taskFormId,"repository-id":e.taskRepositoryId,"task-model":e.selectedTask,"document-task":!0,file:e.file,mode:e.taskMode},on:{close:function(t){e.addTaskSheet=!1},addEntry:e.addTaskEntry}}):e._e(),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}}),t("Sheet",{attrs:{width:"470px","has-footer":""},on:{input:e.reset},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Upload File ")]},proxy:!0},{key:"default",fn:function(){return[e.filesToUpload.length?e._e():t("Dropzone",{attrs:{"show-workspace-repository":!1,"workspace-id":Number(e.$route.query.workspaceId),"repository-id":Number(e.file.repositoryId),"has-multiple":!1},on:{upload:e.queueFilesForUpload}}),e.filesError?t("FormFieldError",{staticClass:"q-mx-md",attrs:{error:"Please upload file"}}):e._e(),e.filesToUpload.length?t("UploadingFileList",{attrs:{files:e.filesToUpload,"show-progress":e.showProgress,"show-delete-btn":e.showDeleteBtn},on:{delete:e.deleteUploadFile}}):e._e(),t("div",{staticClass:"q-px-md"},[t("ValidationObserver",{ref:"checkin"},[t("ValidationProvider",{attrs:{name:"comment",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextAreaField",{staticClass:"q-mb-lg",attrs:{label:"Purpose for checking in","is-mandatory":"",error:i[0]},model:{value:e.comments,callback:function(t){e.comments=t},expression:"comments"}})]}}])})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:e.reset}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.uploadFile}})]},proxy:!0}]),model:{value:e.showCheckinModal,callback:function(t){e.showCheckinModal=t},expression:"showCheckinModal"}}),t("Modal",{attrs:{width:"40vw",height:"60vh","has-footer":""},on:{input:function(t){e.signProcessModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Document Sign")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"field-wrapper"},[t("SingleChoiceField",{staticClass:"q-mb-lg",attrs:{label:"Signature Type","is-mandatory":"",options:e.signTypes,"options-per-line":2},model:{value:e.signType,callback:function(t){e.signType=t},expression:"signType"}}),t("SingleChoiceField",{staticClass:"q-mb-lg",attrs:{label:"Order Type","is-mandatory":"",options:e.orderTypes,"options-per-line":2},model:{value:e.orderType,callback:function(t){e.orderType=t},expression:"orderType"}})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Continue",color:"primary"},on:{click:e.openSignProcess}})]},proxy:!0}]),model:{value:e.signProcessModal,callback:function(t){e.signProcessModal=t},expression:"signProcessModal"}}),t("Summarizing",{attrs:{itemid:e.file.id,"repository-id":e.file.repositoryId,page:"REPOSITORY"},on:{input:function(t){e.summarizeModal=!1}},model:{value:e.summarizeModal,callback:function(t){e.summarizeModal=t},expression:"summarizeModal"}})],1)},a=[],o=(i("14d9"),i("a7d2")),r=i("1b0d"),n=i("381e"),l=i("fa1f"),d=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"file-details"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[t("div",{attrs:{id:"item-overview"}},[t("div",{staticClass:"version"},[e._v("Version : "+e._s(e.file.fileVersion))]),t("table",[t("tbody",[e._l(e.fileData,(function(i,s){return t("tr",{key:s+""+i.name,staticClass:"tableRow",on:{click:function(t){return e.textSearchInFile(i.value)}}},[t("td",{staticClass:"label"},[e._v(e._s(i.name))]),"TABLE"!==i.type?t("td",{staticClass:"value"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col ellipsis"},[e._t(i.name,(function(){return[e._v(" "+e._s(i.value||"-")+" ")]}),{value:i.value})],2),e.isRetentionRequired&&"DATE"===i.type&&i.value?[t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Notification Settings",expression:"'Notification Settings'",modifiers:{top:!0}}],staticClass:"actions",attrs:{"is-flat":"","no-border":"",icon:"eva-settings-outline",color:e.checkRetention(i.id)},on:{click:function(t){return e.showRetention(i.id)}}})],1)]:e._e()],2)]):t("td",{staticClass:"value",staticStyle:{padding:"8px"}},[e._t(i.name,(function(){return[t("BaseActionButton",{attrs:{icon:"mdi-table-large","is-flat":"","no-border":""},on:{click:function(t){return e.showTable(i.name)}}})]}))],2)])})),t("tr",{staticClass:"tableRow"},[t("td",{staticClass:"label"},[e._v("Uploaded Date")]),t("td",{staticClass:"value"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col ellipsis"},[e._v(" "+e._s(e.$day.format(e.file.createdAt))+" ")]),e.isRetentionRequired?t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Notification Settings",expression:"'Notification Settings'",modifiers:{top:!0}}],staticClass:"actions",attrs:{"is-flat":"","no-border":"",icon:"eva-settings-outline",color:e.checkRetention(0)},on:{click:function(t){return e.showRetention(0)}}})],1):e._e()])])])],2)])])]),t("Modal",{attrs:{width:"60vw",height:"80vh"},on:{input:function(t){e.expandTableModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.tableHeader))]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"tableData"}},[e.tableData.cellvalues?[t("table",e._l(e.tableData.cellvalues,(function(i,s){return t("tr",{key:s},e._l(i,(function(i){return t("NoHeader"===i.kind?"td":"th",{key:`r${s}_c${i.columnindex}`,tag:"th"},[e._v(" "+e._s(i.cellvalue)+" ")])})),1)})),0)]:[t("table",[t("thead",[t("tr",e._l(e.tableData[0],(function(i,s){return t("th",{key:s},[e._v(" "+e._s(s)+" ")])})),0)]),t("tbody",e._l(e.tableData,(function(i,s){return t("tr",{key:s},e._l(i,(function(i,s){return t("td",{key:s},[e._v(" "+e._s(i)+" ")])})),0)})),0)])]],2)]},proxy:!0}]),model:{value:e.expandTableModal,callback:function(t){e.expandTableModal=t},expression:"expandTableModal"}}),t("Sheet",{attrs:{width:"750px","has-footer":""},on:{input:e.reset},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Notification Settings ")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"row",attrs:{id:"tab-settings"}},[t("div",{staticClass:"content"},[t("div",{},[t("ValidationObserver",{ref:"retention"},[t("div",{directives:[{name:"show",rawName:"v-show",value:"GENERAL"===e.activeTab,expression:"activeTab === 'GENERAL'"}]},[t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-mb-md",attrs:{label:"name","is-mandatory":"",error:i[0]},model:{value:e.retention.name,callback:function(t){e.$set(e.retention,"name",t)},expression:"retention.name"}})]}}])})],1)]),t("SingleChoiceField",{staticClass:"q-mb-md",attrs:{"is-mandatory":"",label:"Set Notification Date","options-per-line":e.notificationDateOptions.length,options:e.notificationDateOptions},model:{value:e.notificationDate,callback:function(t){e.notificationDate=t},expression:"notificationDate"}}),"field_date"===e.notificationDate?[t("FormFieldLabel",{staticClass:"q-mb-lg",attrs:{label:e.getFieldDateLabel}}),t("BaseSeparator",{staticClass:"q-mb-md"})]:e._e(),"specific_date"===e.notificationDate?[t("FormFieldLabel",{staticClass:"q-mb-lg",attrs:{label:"Define a specific date for document notification, activating automatic reminders when the chosen date is reached.",transform:""}}),t("BaseSeparator",{staticClass:"q-mb-md"}),t("ValidationProvider",{attrs:{name:"notification date",rules:e.dateValidation},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("DateField",{staticClass:"q-mb-md",attrs:{label:"notification date","is-mandatory":"",validation:"",error:i[0]},model:{value:e.retention.actionDate,callback:function(t){e.$set(e.retention,"actionDate",t)},expression:"retention.actionDate"}})]}}],null,!1,2663690688)})]:e._e(),"future_date"===e.notificationDate?t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12"},[t("FormFieldLabel",{staticClass:"q-mb-md",attrs:{label:"Allows to schedule a future expiry date\n              based on an existing date, which prompts automatic reminders\n              when due",transform:""}}),t("BaseSeparator")],1),t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"Duration",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("CounterField",{staticClass:"q-mb-md",attrs:{label:"Duration",error:i[0]},model:{value:e.retention.duration,callback:function(t){e.$set(e.retention,"duration",t)},expression:"retention.duration"}})]}}],null,!1,3325698584)})],1),t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"Duration Type",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{staticClass:"q-mb-md",attrs:{label:"Duration Type",options:e.durationTypes,error:i[0]},model:{value:e.retention.durationType,callback:function(t){e.$set(e.retention,"durationType",t)},expression:"retention.durationType"}})]}}],null,!1,1187220727)})],1)]):e._e(),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"user",rules:{required:0===e.retention.notification.group.length}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("MultiSelectField",{staticClass:"q-m-md",attrs:{label:"users",options:e.userList,error:i[0]},model:{value:e.retention.notification.user,callback:function(t){e.$set(e.retention.notification,"user",t)},expression:"retention.notification.user"}})]}}])})],1),t("div",{staticClass:"col-6"},[t("ValidationProvider",{attrs:{name:"group",rules:{required:0===e.retention.notification.user.length}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("MultiSelectField",{staticClass:"q-m-md",attrs:{label:"groups",options:e.groupList,error:i[0]},model:{value:e.retention.notification.group,callback:function(t){e.$set(e.retention.notification,"group",t)},expression:"retention.notification.group"}})]}}])})],1)]),e.dateError?t("FormFieldError",{attrs:{error:e.dateError}}):e._e()],2),"NOTIFICATION"===e.activeTab?[t("FormFieldLabel",{attrs:{label:"Mail Subject"}}),t("TextEditor",{staticClass:"mail-class",attrs:{"hide-tool-bar":!1,"form-columns":e.fieldColumns},model:{value:e.retention.notification.mailSubject,callback:function(t){e.$set(e.retention.notification,"mailSubject",t)},expression:"retention.notification.mailSubject"}}),t("FormFieldLabel",{staticClass:"q-my-md",attrs:{label:"Mail Content"}}),t("TextEditor",{staticClass:"mail-class",attrs:{"form-columns":e.fieldColumns},model:{value:e.retention.notification.mailBody,callback:function(t){e.$set(e.retention.notification,"mailBody",t)},expression:"retention.notification.mailBody"}})]:e._e()],2)],1)]),t("div",{staticClass:"tabs"},e._l(e.tabs,(function(i){return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"q-mb-md",attrs:{"is-flat":e.activeTab!==i.value,icon:i.icon,color:e.activeTab===i.value?"primary":"gray"},on:{click:function(t){e.activeTab=i.value}}})})),1)])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:e.reset}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.saveRetention}})]},proxy:!0}]),model:{value:e.retentionSettings,callback:function(t){e.retentionSettings=t},expression:"retentionSettings"}})],1)},c=[],u=i("6a70"),h=i("cc77"),m=i("c3d2"),p=i("b3d1"),f=i("12b8"),v=i("7bb1"),y=i("869e"),b=i("3445"),g=i("9234"),w=i("53c1"),k=i("64ab"),S=i("e683"),C={name:"FileDetails",components:{Modal:u["a"],Sheet:n["a"],CounterField:h["a"],MultiSelectField:m["a"],TextField:p["a"],SelectField:f["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],CheckboxField:y["a"],FormFieldLabel:b["a"],TextEditor:k["a"],SingleChoiceField:g["a"],DateField:w["a"],FormFieldError:S["a"]},props:{file:{type:Object,required:!0},repositoryField:{type:Array,required:!0},fileData:{type:Array,required:!0},isRetentionRequired:{type:Boolean,default:!1},retentionList:{type:Array,default:()=>[]}},data(){return{expandTableModal:!1,tableHeader:"",tableData:[],retentionFieldId:0,retentionSettings:!1,retention:{id:0,repositoryId:this.file.repositoryId,itemId:this.file.id,name:"",fieldId:"",duration:0,durationType:"Day",conditionJson:"",action:"",actionDate:"",notification:{duration:0,durationType:"Day",user:[],group:[],mailSubject:{text:"",content:""},mailBody:{text:"",content:""}}},durationTypes:[{id:this.$nano.id(),label:"Year",value:"Year"},{id:this.$nano.id(),label:"Month",value:"Month"},{id:this.$nano.id(),label:"Day",value:"Day"}],userList:[],groupList:[],retentionActions:[{id:this.$nano.id(),label:"No Action",value:"NO_ACTION"},{id:this.$nano.id(),label:"Hide",value:"HIDE"},{id:this.$nano.id(),label:"Move to Trash",value:"TRASH"},{id:this.$nano.id(),label:"Permanent Delete",value:"DELETE"}],notify:!0,notificationDate:"field_date",activeTab:"GENERAL",tabs:[{id:this.$nano.id(),label:"general",value:"GENERAL",icon:"mdi-tune"},{id:this.$nano.id(),label:"notification",value:"NOTIFICATION",icon:"mdi-bell-outline"}],dateError:""}},computed:{fieldColumns(){let e=[{id:this.$nano.id(),label:"Uploaded Date",value:"#UPLOADEDDATE#",display:"",color:"#643094",hasDefault:!0},{id:this.$nano.id(),label:"Uploaded By",value:"#UPLOADBY#",display:"",color:"#643094",hasDefault:!0}],t=this.repositoryField.map(e=>({id:e.id,label:e.name,value:e.id,hasDefault:!1}));return[...e,...t]},getFieldDateLabel(){if(this.retention.fieldId){let e=this.repositoryField.find(e=>e.id===this.retention.fieldId);return`Set a Document's expiry based on\n                    an ${e.name}, which triggers auto-reminders when due.`}return""},notificationDateOptions(){return this.retention.fieldId?[{id:this.$nano.id(),label:"Use Field Date",value:"field_date"},{id:this.$nano.id(),label:"Use Specific Date",value:"specific_date"},{id:this.$nano.id(),label:"Set Future Date from Field Date",value:"future_date"}]:[{id:this.$nano.id(),label:"Use Specific Date",value:"specific_date"},{id:this.$nano.id(),label:"Set Future Date from Field Date",value:"future_date"}]},dateValidation(){const e={};"specific_date"===this.notificationDate&&(e.required=!0);let t="";if(this.retention.fieldId){let e=this.fileData.find(e=>e.id===this.retention.fieldId);t=e.value}else t=this.$day.format(this.file.createdAt,!1);return t&&(e.minDate=t),e}},watch:{file:{immediate:!0,deep:!0,async handler(){this.file}},notificationDate(){this.notificationDate&&(this.dateError="")}},mounted(){this.getUserList(),this.getGroupList()},methods:{textSearchInFile(e){localStorage.setItem("findText",e)},showTable(e){let t=this.fileData.filter(t=>t.name===e);this.tableHeader=t[0].name,this.tableData=JSON.parse(t[0].value),this.expandTableModal=!0},checkRetention(e){return this.retentionList.filter(t=>t.fieldId===e).length?"orange":""},showRetention(e){this.retentionFieldId=e,this.reset();let t=this.retentionList.find(t=>t.fieldId===e);t&&(this.retention.id=t.id,this.retention.name=t.name,this.retention.duration=t.duration,this.retention.durationType=t.durationType,this.retention.action=t.action,this.retention.actionDate=t.actionDate,this.notificationDate="field_date",this.retention.duration?this.notificationDate="future_date":this.retention.actionDate&&(this.notificationDate="specific_date"),this.retention.notification=JSON.parse(t.notifyJson),t.notifyJson&&(this.notify=!0),this.retention.notification.mailSubject||(this.retention.notification.mailSubject={text:"",content:""},this.retention.notification.mailBody={text:"",content:""})),this.retention.fieldId=e,t||(this.retention.fieldId?this.notificationDate="field_date":this.notificationDate="future_date"),this.retentionSettings=!0},reset(){this.activeTab="GENERAL",this.retentionSettings=!1,this.retention.name="",this.retention.fieldId="",this.retention.action="NO_ACTION",this.retention.actionDate="",this.retention.durationType="Day",this.retention.duration=0,this.retention.notification={duration:0,durationType:"Day",user:[],group:[],mailSubject:{text:"",content:""},mailBody:{text:"",content:""}},this.dateError="",this.notify=!0},async getUserList(){const{error:e,payload:t}=await r["s"].getUserList();e?this.$alert.error("Error fetching users"):this.userList=t&&t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))},async getGroupList(){const{error:e,payload:t}=await r["i"].getGroupList();e?this.$alert.error("Error fetching groups"):this.groupList=t&&t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))},async saveRetention(){"field_date"===this.notificationDate?(this.retention.actionDate="",this.retention.duration=0,this.retention.durationType="Day"):"specific_date"===this.notificationDate?(this.retention.duration=0,this.retention.durationType="Day"):"future_date"===this.notificationDate&&(this.retention.actionDate="");let e="";if(this.retention.fieldId){let t=this.fileData.find(e=>e.id===this.retention.fieldId);e=t.value}else e=this.$day.format(this.file.createdAt,!1);let t="",i="";if("future_date"===this.notificationDate?("Day"===this.retention.durationType&&(t=this.$day.addDate(e,this.retention.duration)),"Month"===this.retention.durationType&&(t=this.$day.addMonth(e,this.retention.duration)),"Year"===this.retention.durationType&&(t=this.$day.addYear(e,this.retention.duration)),i=this.$day.isDateGreater(e,this.$day.newDate())?e:this.$day.newDate()):t="specific_date"===this.notificationDate?this.retention.actionDate:e,!(t>=this.$day.newDate()))return void("field_date"===this.notificationDate?this.dateError="Its completed date. please select any one option in two options":this.dateError=`Please select any date after (${i}) this date`);this.dateError="";const s=await this.$refs.retention.validate();if(s){if(this.notify?this.retention.notifyJson=JSON.stringify(this.retention.notification):this.retention.notifyJson="",this.$store.commit("showLoadingBar"),this.retention.id&&this.retention.fieldId===this.retentionFieldId){const{error:e}=await r["p"].updateRetention(this.retention.id,this.retention);if(e)return void this.$alert.error(e);this.$alert.success("Notification rule updated succesfully")}else{const{error:e}=await r["p"].addRetention(this.retention);if(e)return void this.$alert.error(e);this.$alert.success("Notification rule added succesfully")}this.$store.commit("hideLoadingBar"),this.$emit("refresh"),this.reset()}}}},_=C,I=(i("d2fb"),i("2877")),x=Object(I["a"])(_,d,c,!1,null,"1ffcec1e",null),$=x.exports,B=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card"},[t("div",{staticClass:"q-pa-xs"},[t("BaseScrollbar",{staticClass:"q-pa-sm",attrs:{height:"calc(100vh - 215px)"}},[e._l(e.commentsList,(function(i,s){return[t("q-chat-message",{key:s,staticClass:"q-ma-sm",attrs:{name:i.createdBy===e.$store.state.session.id?"me":i.createdByEmail,text:e.commentsText(i),"text-html":"",sent:i.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(i),"bg-color":e.bgCommentsColor(i)}})]}))],2)],1),t("div",{staticClass:"col q-pa-sm borderTop"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])]),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}})],1)},T=[],F=i("6df3"),A=i("695e"),L={name:"FileComments",components:{TextAreaField:F["a"],TextBuilderField:A["a"],Modal:u["a"]},props:{repositoryId:{type:Number,default:0},itemId:{type:Number,default:0}},data(){return{commentText:"",commentsList:[],advancedCommentsSheet:!1,advancedCommentText:""}},created(){this.getComments()},methods:{commentsText(e){return e.processId?[`<b>${e.workflowName} : ${e.requestNo}</b><br/> ${e.comments}`]:2===e.checkinStatus?["<b>CheckOut:</b><br/> "+e.comments]:1===e.checkinStatus?["<b>CheckIn:</b><br/> "+e.comments]:[e.comments]},bgCommentsColor(e){return e.processId?"orange-1":2===e.checkinStatus?"red-1":1===e.checkinStatus?"green-1":e.createdBy===this.$store.state.session.id?"primary-1":"secondary-1"},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const e=a/s[o];return i.format(Math.round(e),o)}},async getComments(){this.commentsList=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["p"].getFileComments(this.repositoryId,this.itemId);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t.length&&(this.commentsList=t)},async saveComment(){if(this.commentText){this.$store.commit("showLoadingBar");const{error:e}=await r["p"].insertFileComments(this.repositoryId,this.itemId,{comments:this.commentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.commentText="",this.getComments()}},async saveAdvancedComment(){if(this.advancedCommentText){this.$store.commit("showLoadingBar");const{error:e}=await r["p"].insertFileComments(this.repositoryId,this.itemId,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}}}},D=L,E=(i("81e5"),i("8169")),O=i("93dc"),M=i.n(O),q=Object(I["a"])(D,B,T,!1,null,"f1ea4660",null),P=q.exports;M()(q,"components",{QChatMessage:E["a"]});var V=i("b94d"),N=i("cade"),R=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:e.header.icon||"","icon-color":"primary",width:"450px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){var t;return[e._v(e._s(null===(t=e.header)||void 0===t?void 0:t.label))]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"form"},[t("ValidationProvider",{attrs:{name:"password",rules:{required:!0,password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("PasswordField",{staticClass:"q-my-lg",attrs:{label:"Set_Password"===e.header.id?"enter a password for to protect this file":"enter a password to remove this file protection","is-mandatory":"",tooltip:e._passwordHint,error:i[0]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})]}}])}),t("ValidationProvider",{attrs:{name:"password",rules:{required:!0,password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("PasswordField",{staticClass:"q-mb-lg",attrs:{label:"confirm password","is-mandatory":"",tooltip:e._passwordHint,error:i[0]},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.updatePassword}})]},proxy:!0}])})},z=[],j=i("1c54"),G=i("8bc3"),U=i("0c6e"),H={name:"Password",components:{Confirm:j["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],PasswordField:G["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0},repositoryId:{type:Number,required:!0},itemId:{type:Number,required:!0}},data(){return{password:"",confirmPassword:""}},computed:{_passwordHint(){return U["a"]}},methods:{closeModal(){this.$emit("close",!1)},async updatePassword(){if(this.password===this.confirmPassword){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["k"].setRemoveFilePassword({repositoryId:this.repositoryId,itemId:this.itemId,password:"Set_Password"===this.header.id?this.confirmPassword:""});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);202===t.status&&("Set_Password"===this.header.id?this.$alert.success("password set successfully"):this.$alert.success("password removed successfully"),this.password="",this.confirmPassword=""),this.$emit("close",!1)}else this.$alert.warning("password not matched")}}},W=H,Y=Object(I["a"])(W,R,z,!1,null,"5e2bad70",null),J=Y.exports,Q=i("ee54"),K=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:e.header.icon||"","icon-color":"primary",width:"450px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){var t;return[e._v(e._s(null===(t=e.header)||void 0===t?void 0:t.label))]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"form"},[t("ValidationProvider",{attrs:{name:"field",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-my-lg",attrs:{label:"Encrypt"===e.header.id?"enter a password for to encrypt this file":"enter a password for to decrypt this file","is-mandatory":"",error:i[0]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})},X=[],Z={name:"EncryptDecrypt",components:{Confirm:j["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],TextField:p["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0}},data(){return{password:""}},methods:{closeModal(){this.$emit("close",!1)}}},ee=Z,te=Object(I["a"])(ee,K,X,!1,null,"30ac12fa",null),ie=te.exports,se=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:e.header.icon||"","icon-color":"primary",width:"450px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){var t;return[e._v(e._s(null===(t=e.header)||void 0===t?void 0:t.label))]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"form"},[t("ValidationProvider",{attrs:{name:"field",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{staticClass:"q-mt-lg",attrs:{label:"Pages","is-mandatory":"",error:i[0],placeholder:"enter page number like 2,3,4  or 2-5"},model:{value:e.pages,callback:function(t){e.pages=t},expression:"pages"}})]}}])}),t("div",{staticClass:"description q-mb-lg q-mt-sm"},[e._v(" Note: First page and last page cannot be hide ")])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})},ae=[],oe={name:"HidePage",components:{Confirm:j["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],TextField:p["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0}},data(){return{pages:""}},methods:{closeModal(){this.$emit("close",!1)}}},re=oe,ne=(i("02fb"),Object(I["a"])(re,se,ae,!1,null,"7b871c5e",null)),le=ne.exports,de=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,"has-footer":"",width:"540px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Task")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"task-details"}},[t("Tabs",{staticClass:"tabs",attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),t("div",{staticClass:"q-pa-md"},["form"===e.tab?t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"field-wrapper"},[t("ValidationProvider",{attrs:{name:"type",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{staticClass:"q-mb-sm",attrs:{label:"Type","is-mandatory":"",options:[],error:i[0]},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})]}}],null,!1,221057675)}),t("TextAreaField",{staticClass:"q-mb-sm",attrs:{value:e.task,label:"Task"}}),t("ValidationProvider",{attrs:{name:"start time",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("DateTimeField",{staticClass:"q-mb-sm",attrs:{value:e.startTime,label:"Start Time","is-mandatory":"",error:i[0]}})]}}],null,!1,882080563)}),t("ValidationProvider",{attrs:{name:"end time",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("DateTimeField",{staticClass:"q-mb-sm",attrs:{value:e.endTime,label:"End Time","is-mandatory":"",error:i[0]}})]}}],null,!1,384865875)}),t("ValidationProvider",{attrs:{name:"users",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("MultiSelectField",{staticClass:"q-mb-sm",attrs:{label:"users","is-mandatory":"",options:[],error:i[0]},model:{value:e.users,callback:function(t){e.users=t},expression:"users"}})]}}],null,!1,1613393186)}),t("ValidationProvider",{attrs:{name:"priority",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{staticClass:"q-mb-sm",attrs:{label:"task priority","is-mandatory":"",options:e.priorityList,error:i[0]},model:{value:e.priority,callback:function(t){e.priority=t},expression:"priority"}})]}}],null,!1,1876549040)})],1)]):e._e(),"history"===e.tab?t("div",{attrs:{id:"history"}},[[t("div",{staticClass:"entry"},[t("div",{staticClass:"header"},[e._v("1 Task Assign")]),t("div",{staticClass:"content"},[t("div",{staticClass:"changes-meta"},[t("div",[e._v("admin@ezofis.com")]),t("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),t("div",[e._v("2022-May-06 09:35 PM")])],1),t("div",{staticClass:"change"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),t("div",[t("span",{staticClass:"font-semibold"},[e._v(' "Assigned" ')]),e._v(" to abc@ezofis.com ")])],1)])])]],2):e._e()],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})},ce=[],ue=i("d1e5"),he={name:"Task",components:{Sheet:n["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],TextAreaField:F["a"],SelectField:f["a"],DateTimeField:ue["a"],MultiSelectField:m["a"],Tabs:V["a"]},props:{value:{type:Boolean,default:!1}},data(){return{tab:"form",tabs:[{id:this.$nano.id(),label:"form",value:"form"},{id:this.$nano.id(),label:"history",value:"history"}],type:"",task:"",startTime:"",endTime:"",users:[],priority:"",priorityList:[{id:this.$nano.id(),label:"High",value:"High"},{id:this.$nano.id(),label:"Medium",value:"Medium"},{id:this.$nano.id(),label:"Low",value:"Low"}]}},methods:{closeModal(){this.$emit("close",!1)}}},me=he,pe=(i("21e0"),Object(I["a"])(me,de,ce,!1,null,"1a249f74",null)),fe=pe.exports,ve=(i("caad"),function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,"has-footer":"",width:"540px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Alert")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"alert-details"}},[t("Tabs",{staticClass:"tabs",attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),t("div",{staticClass:"q-pa-md"},["form"===e.tab?t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"field-wrapper"},[t("FormFieldLabel",{attrs:{label:"Conditions","is-mandatory":""}}),t("div",{staticClass:"options-wrapper"},[t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Checked In"),label:"Checked In"},on:{input:function(t){return e.updateValue("Checked In")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Checked Out"),label:"Checked Out"},on:{input:function(t){return e.updateValue("Checked Out")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Commented"),label:"Commented"},on:{input:function(t){return e.updateValue("Commented")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Email"),label:"Email"},on:{input:function(t){return e.updateValue("Email")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Link"),label:"Link"},on:{input:function(t){return e.updateValue("Link")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Viewed"),label:"Viewed"},on:{input:function(t){return e.updateValue("Viewed")}}})],1),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e(),t("ValidationProvider",{attrs:{name:"Alert To",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("MultiSelectField",{staticClass:"q-mb-sm",attrs:{label:"alert to","is-mandatory":"",options:[],error:i[0]},model:{value:e.users,callback:function(t){e.users=t},expression:"users"}})]}}],null,!1,3515054549)})],1)]):e._e(),"history"===e.tab?t("div",{attrs:{id:"history"}},[[t("div",{staticClass:"entry"},[t("div",{staticClass:"header"},[e._v("2 Alerts")]),t("div",{staticClass:"content"},[t("div",{staticClass:"changes-meta"},[t("div",[e._v("admin@ezofis.com")]),t("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),t("div",[e._v("2022-May-06 09:35 PM")])],1),t("div",{staticClass:"change"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),t("div",[t("span",{staticClass:"font-semibold"},[e._v(' "Checkin" ')]),e._v(" alert sent to abc@ezofis.com ")])],1),t("div",{staticClass:"change"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),t("div",[t("span",{staticClass:"font-semibold"},[e._v(' "Viewed" ')]),e._v(" alert sent to xyz@ezofis.com ")])],1)])])]],2):e._e()],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})}),ye=[],be={name:"Alert",components:{Sheet:n["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],MultiSelectField:m["a"],FormFieldLabel:b["a"],CheckboxField:y["a"],FormFieldError:S["a"],Tabs:V["a"]},props:{value:{type:Boolean,default:!1}},data(){return{tab:"form",tabs:[{id:this.$nano.id(),label:"form",value:"form"},{id:this.$nano.id(),label:"history",value:"history"}],users:[],conditions:[],error:""}},methods:{closeModal(){this.$emit("close",!1)},updateValue(e){const t=[...this.conditions];if(t.includes(e)){const i=t.indexOf(e);t.splice(i,1)}else t.push(e);this.conditions=t}}},ge=be,we=(i("cccc"),Object(I["a"])(ge,ve,ye,!1,null,"67ebff79",null)),ke=we.exports,Se=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:e.header.icon||"","icon-color":"primary",width:"450px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){var t;return[e._v(e._s(null===(t=e.header)||void 0===t?void 0:t.label))]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"form"},[t("ValidationProvider",{attrs:{name:"field",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextAreaField",{staticClass:"q-my-lg",attrs:{label:"CheckIn"===e.header.id?"Purpose for checking in":"Purpose for checking out","is-mandatory":"",error:i[0]},model:{value:e.checkInOut,callback:function(t){e.checkInOut=t},expression:"checkInOut"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.saveCheckInCheckOut}})]},proxy:!0}])})},Ce=[],_e={name:"CheckedInOut",components:{Confirm:j["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],TextAreaField:F["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0},file:{type:Object,required:!0}},data(){return{checkInOut:""}},methods:{closeModal(){this.$emit("close",!1)},async saveCheckInCheckOut(){this.$store.commit("showLoadingBar");let e={comments:this.checkInOut};if("CheckOut"===this.header.label){const{error:t,payload:i}=await r["p"].fileCheckOut(this.file.repositoryId,this.file.id,e);if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);if(!i)return;console.log(i),this.$emit("checkout",!1),this.$emit("downloadFile","")}this.checkInOut="",this.$emit("close",!1)}}},Ie=_e,xe=Object(I["a"])(Ie,Se,Ce,!1,null,"3664c360",null),$e=xe.exports,Be=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:e.header.icon||"","icon-color":"red",width:"450px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){var t;return[e._v(e._s(null===(t=e.header)||void 0===t?void 0:t.label))]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[t("p",[e._v(" Are you sure you want to delete this "),t("span",[e._v("file")])]),t("p",[e._v("You can always restore the deleted file from the trash page.")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"red"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"yes",color:"red"},on:{click:e.deleteFile}})]},proxy:!0}])})},Te=[],Fe={name:"Delete",components:{Confirm:j["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0},repositoryId:{type:Number,required:!0},itemId:{type:Number,required:!0}},data(){return{}},methods:{closeModal(){this.$emit("close",!1)},async deleteFile(){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["p"].fileDelete(this.repositoryId,this.itemId);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):(200===t.status&&this.$alert.success("file deleted successfully"),this.$emit("close",!1))}}},Ae=Fe,Le=Object(I["a"])(Ae,Be,Te,!1,null,"5663a02d",null),De=Le.exports,Ee=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,"has-footer":"",width:"540px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Protect using password")]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"vault-details"}},[t("Tabs",{staticClass:"tabs",attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),t("div",{staticClass:"q-pa-md"},["form"===e.tab?t("ValidationObserver",{ref:"form"},[t("div",{staticClass:"field-wrapper"},[t("FormFieldLabel",{attrs:{label:"Requires user to enter a password for","is-mandatory":""}}),t("div",{staticClass:"options-wrapper"},[t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Viewing"),label:"Viewing"},on:{input:function(t){return e.updateValue("Viewing")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Editing"),label:"Editing"},on:{input:function(t){return e.updateValue("Editing")}}})],1),e.error?t("FormFieldError",{attrs:{error:e.error}}):e._e(),t("ValidationProvider",{attrs:{name:"password",rules:{password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("PasswordField",{staticClass:"q-mb-sm",attrs:{"is-mandatory":"",label:"password",value:e.password,error:i[0]}})]}}],null,!1,2834753869)}),t("ValidationProvider",{attrs:{name:"confirm password",rules:{password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("PasswordField",{staticClass:"q-mb-sm",attrs:{"is-mandatory":"",label:"confirm password",value:e.password,error:i[0]}})]}}],null,!1,298225343)}),t("div",{staticClass:"advanced q-py-sm q-mb-sm",on:{click:function(t){e.showAdvanceOptions=!e.showAdvanceOptions}}},[t("div",{staticClass:"row items-center"},[t("div",{staticClass:"label"},[e._v("Advanced Options")]),t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-chevron-down","inherit-color":""}})],1)]),e.showAdvanceOptions?[t("FormFieldLabel",{attrs:{label:"Requires user to enter a password for","is-mandatory":""}}),t("div",{staticClass:"options-wrapper"},[t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Links"),label:"Links"},on:{input:function(t){return e.updateValue("Links")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Comments"),label:"Comments"},on:{input:function(t){return e.updateValue("Comments")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Share"),label:"Share"},on:{input:function(t){return e.updateValue("Share")}}}),t("CheckboxField",{staticClass:"q-mb-md",attrs:{value:e.conditions.includes("Task"),label:"Task"},on:{input:function(t){return e.updateValue("Task")}}})],1)]:e._e()],2)]):e._e(),"history"===e.tab?t("div",{attrs:{id:"history"}},[[t("div",{staticClass:"entry"},[t("div",{staticClass:"header"},[e._v("1 items protected")]),t("div",{staticClass:"content"},[t("div",{staticClass:"changes-meta"},[t("div",[e._v("admin@ezofis.com")]),t("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),t("div",[e._v("2022-May-06 09:35 PM")])],1),t("div",{staticClass:"change"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),t("div",[t("span",{staticClass:"font-semibold"},[e._v(' "Editing" ')]),e._v(" menu protected ")])],1)])])]],2):e._e()],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})},Oe=[],Me={name:"AddVault",components:{Sheet:n["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],PasswordField:G["a"],FormFieldLabel:b["a"],CheckboxField:y["a"],FormFieldError:S["a"],Tabs:V["a"]},props:{value:{type:Boolean,default:!1}},data(){return{tab:"form",tabs:[{id:this.$nano.id(),label:"form",value:"form"},{id:this.$nano.id(),label:"history",value:"history"}],password:"",conditions:[],error:"",showAdvanceOptions:!1}},methods:{closeModal(){this.$emit("close",!1)}}},qe=Me,Pe=(i("297e"),Object(I["a"])(qe,Ee,Oe,!1,null,"4b214f92",null)),Ve=Pe.exports,Ne=i("5e23"),Re=i("4bc4"),ze=i("bc3a"),je=i.n(ze),Ge=i("0c04"),Ue=i("dd90"),He=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"history"}},[e.history.length?[t("BaseScrollbar",{attrs:{height:"calc(100vh - 140px)"}},e._l(e.history,(function(i){return t("div",{key:i.id,staticClass:"entry"},[t("div",{staticClass:"header"},[e._v(" "+e._s(i.activity)+" ")]),t("div",{staticClass:"content"},[t("div",{staticClass:"changes-meta"},[t("div",[e._v(e._s(i.activityBy))]),t("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(i.activityOn))])],1)])])})),0)]:t("div",{staticClass:"no-history"},[e._v("No data found")])],2)},We=[],Ye={name:"DocumentHistory",props:{history:{type:Array,required:!0}},data(){return{}},created(){this.$emit("get")}},Je=Ye,Qe=(i("5960"),Object(I["a"])(Je,He,We,!1,null,"707cfe64",null)),Ke=Qe.exports,Xe=i("61cf"),Ze=i("1026"),et=i("2f62"),tt=i("626d"),it={name:"FileSheet",components:{Sheet:n["a"],FileIcon:l["a"],Tabs:V["a"],FileDetails:$,Comments:P,ListItem:N["a"],Password:J,MetaDataEdit:Q["a"],EncryptDecrypt:ie,HidePage:le,Task:fe,Alert:ke,CheckedInOut:$e,Delete:De,AddVault:Ve,EmailSharing:Ne["a"],RenderForm:Re["a"],TextAreaField:F["a"],AddTask:Ge["a"],TextBuilderField:A["a"],Modal:u["a"],DocumentHistory:Ke,Dropzone:Xe["a"],UploadingFileList:Ze["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],FormFieldError:S["a"],SingleChoiceField:g["a"],Summarizing:tt["a"]},props:{value:{type:Boolean,default:!1},file:{type:Object,required:!0},repositoryField:{type:Array,required:!0},options:{type:Object,default:()=>{}},menuActions:{type:Boolean,default:!0}},data(){return{tab:"METADATA",tabs:[{id:this.$nano.id(),label:"Metadata",value:"METADATA"},{id:this.$nano.id(),label:"Comments",value:"COMMENTS"},{id:this.$nano.id(),label:"History",value:"HISTORY"}],actionList:[{id:"Indexing_Change",key:"metadataEdit",label:"Metadata Edit",icon:"eva-edit-2-outline",visible:!0,disable:!0},{id:"Set_Password",key:"password",label:"Set Password",icon:"mdi-lock-outline",visible:!0,disable:!0},{id:"Remove_Password",key:"password",label:"Remove Password",icon:"mdi-lock-minus-outline",visible:!0,disable:!0},{id:"Add_To_Vault",key:"vault",label:"Add To Vault",icon:"mdi-eye-off-outline",visible:!0,disable:!0},{id:"Hide_Pages",key:"hidePages",label:"Hide Pages",icon:"mdi-book-open-page-variant-outline",visible:!0,disable:!0},{id:"Task",key:"task",label:"Task",icon:"mdi-send-outline",visible:!0,disable:!1},{id:"Initiate_Workflow",key:"workFlow",label:"Initiate Workflow",icon:"mdi-sitemap",subMenu:[],visible:!0,disable:!1},{id:"Alert",key:"alert",label:"Alert",icon:"mdi-file-alert-outline",visible:!0,disable:!0},{id:"CheckIn",key:"checkInAndOut",label:"CheckIn",icon:"mdi-file-upload-outline",visible:!0,disable:!0},{id:"CheckOut",key:"checkInAndOut",label:"CheckOut",icon:"mdi-file-download-outline",visible:!0,disable:!0},{id:"Delete",key:"deleteFile",label:"Delete",icon:"mdi-file-remove-outline",visible:!0,disable:!0},{id:"Email_Sharing",key:"emailSharing",label:"Email Sharing",icon:"mdi-email-outline",visible:!0,disable:!0},{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline",visible:!0,disable:!0},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline",visible:!0,disable:!0},{id:"Links",key:"links",label:"Links",icon:"mdi-link-variant",visible:!0,disable:!0}],showPasswordModal:!1,selectList:{},showMetaDataEditModal:!1,showEncryptDecryptModal:!1,showHidePageModal:!1,showTaskModal:!1,showAlertModal:!1,showCheckedInOutModal:!1,showDeleteModal:!1,showAddVaultModal:!1,emailSharingSheet:!1,selectedFileList:[],processSheet:!1,headerTitle:"",fileData:[],workflows:[],formId:"",form:{},formModel:{},workflowFormModel:{},actions:[],saveAction:"",processTabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0},{id:this.$nano.id(),label:"task",value:"TASK",icon:"eva-cube-outline",count:0}],attachmentSheet:!1,commentsSheet:!1,commentText:"",commentsList:[],attachmentList:[],fileSheet:!1,selectedFile:{},taskSheet:!1,taskEntries:[],workflowInit:{},taskFormId:0,taskRepositoryId:0,addTaskForm:{},addTaskSheet:!1,taskEntryId:[],taskEntryList:[],taskMode:"",selectedTask:{},formWidth:"100vw",advancedCommentsSheet:!1,advancedCommentText:"",history:[],fileAction:"",addTaskEnabled:!1,showCheckinModal:!1,filesToUpload:[],comments:"",showProgress:!1,filesError:!1,showDeleteBtn:!0,retentionList:[],isSignProcessFound:!1,documentSignProcess:!1,signWorkflow:{},signAction:"",signProcessModal:!1,signType:0,signTypes:[{id:this.$nano.id(),label:"E-Signature",value:0},{id:this.$nano.id(),label:"Digital Signature",value:1}],orderType:0,orderTypes:[{id:this.$nano.id(),label:"Sequential",value:1},{id:this.$nano.id(),label:"Non-Sequential",value:0}],watchViewerClose:null,watchViewerEdit:null,transactionUserIds:[],signerSettings:{},summarizeModal:!1,selectedUploadFile:[],repositoryDetails:{},userList:[],documentEdit:!1}},computed:{...Object(et["c"])(["loadingBar"]),checkTenant(){let e=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==e&&"https://ag-appsvc05.azurewebsites.net"!==e&&"http://10.16.7.1"!==e&&"http://172.16.1.118"!==e},type(){return this.file.name?this.file.name.split(".").reverse()[0].slice(0,4):""},fileSize(){return Object(o["a"])(this.file.size)},scrollbarHeight(){const e=36*this.actionList.length;return e>216?"276px":e+58+"px"},formName(){return this.formId?this.form.settings.general.name:""},formDescription(){return this.formId?this.form.settings.general.description:""},panels(){return this.formId?this.form.panels:[]},secondaryPanels(){return this.formId?this.form.secondaryPanels:[]},formSettings(){return this.formId?this.form.settings:{}},updatedActionList(){const e=[...this.actionList];return e.forEach(e=>{e.key in this.options&&(e.disable="true"!==this.options[e.key],"download"!==e.key||e.disable?"print"!==e.key||e.disable||(this.fileAction+=",print"):(this.fileAction="",this.fileAction+="download"))}),e},_enableControls(){let e=[],t=[];return this.panels.forEach(i=>{if(i.fields.length){let s=i.fields.filter(e=>"SINGLE_SELECT"===e.type||"SINGLE_CHOICE"===e.type||"MULTIPLE_CHOICE"===e.type||"MULTI_SELECT"===e.type);s.length&&s.forEach(i=>{if(i.settings.validation.enableSettings&&i.settings.validation.enableSettings.length){let s=[];i.settings.validation.enableSettings.forEach(e=>{e.controls.length&&(s.push({value:e.value,childControls:e.controls}),e.controls.forEach(e=>{s.indexOf(e)<0&&t.push(e)}))}),s.length&&e.push({id:i.id,parentControls:s})}})}}),{listControls:t,controls:e}}},watch:{value:{immediate:!0,deep:!0,async handler(){if(this.file.id&&this.value){if(this.getUserList(),this.getItemDetails(),this.getFileRetentions(),this.getWorkflows(),this.isSignProcessFound=!1,this.file.name){let e=this.file.name.split(".").pop();"pdf"===e.toLowerCase()&&this.getSignWorkflow()}if(this.getFileHistory(),this.getTaskForm(),this.file.repositoryId&&this.getFolderSecurity(),this.file.hasPassword)if(this.$store.state.session.id==this.file.encryptedBy){let e=this.actionList.findIndex(e=>"Set_Password"===e.id);this.actionList[e].label="Change Password",this.actionList[1].visible=!0,this.actionList[2].visible=!0}else this.actionList[1].visible=!1,this.actionList[2].visible=!1;else this.actionList[1].visible=!0,this.actionList[2].visible=!1;let e=this.actionList.findIndex(e=>"CheckIn"===e.id),t=this.actionList.findIndex(e=>"CheckOut"===e.id);this.file.checkinStatus?2===this.file.checkinStatus&&this.file.checkinBy===this.$store.state.session.email?e>=0&&(this.actionList[e].disable=!1,this.actionList[t].disable=!0):1===this.file.checkinStatus&&this.file.checkinBy===this.$store.state.session.email&&t>=0&&(this.actionList[t].disable=!1,this.actionList[e].disable=!0):t>=0&&(this.actionList[t].disable=!1,this.actionList[e].disable=!0)}}},workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&this.initiateWorkflow()}},options:{deep:!0,immediate:!0,handler(){this.actionList=this.updatedActionList}}},methods:{fileLink(){let e=location.origin.replace("http://localhost:8080","https://trial.ezofis.com");if(this.file.name){let t=this.file.name.split(".").pop();if(Object(Ue["d"])(t)){let i="";return this.fileAction&&(i="&action="+this.fileAction),"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}`:"https://trial.ezofis.com"!==e||Object(Ue["c"])(t)?"https://app.ezofis.com"===e?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}${i}`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}${i}`:(this.isSignProcessFound&&0===this.file.checkinStatus&&(localStorage.setItem("viewerClose",!1),localStorage.setItem("viewerEdit",!1),this.watchViewerEdit=setInterval(()=>this.checkViewerEdit(),1e3),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3)),`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}${i}`)}return Object(Ue["b"])(t)||"http://52.172.32.88"!==e?`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.file.repositoryId}/${this.file.id}/2`:(localStorage.setItem("viewerClose",!1),localStorage.setItem("viewerEdit",!1),this.watchViewerEdit=setInterval(()=>this.checkViewerEdit(),1e3),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}`)}return""},closeFileSheet(){this.$emit("input",!1)},updateColumns(e){if(this.selectList={},"Set_Password"===e.id||"Remove_Password"===e.id)this.showPasswordModal=!0,this.selectList=e;else if("Indexing_Change"===e.id)this.showMetaDataEditModal=!0;else if("Encrypt"===e.id||"Decrypt"===e.id)this.showEncryptDecryptModal=!0,this.selectList=e;else if("Hide_Pages"===e.id&&this.file&&this.file.name&&this.file.name.endsWith(".pdf"))this.showHidePageModal=!0,this.selectList=e;else if("Task"===e.id)this.taskEntries.length?this.taskSheet=!0:this.addTask();else if("Alert"===e.id)this.showAlertModal=!0;else if("CheckIn"===e.id||"CheckOut"===e.id)"CheckOut"===e.id?this.showCheckedInOutModal=!0:(this.itemId=this.file.id,this.showCheckinModal=!0),this.selectList=e;else if("Delete"===e.id)this.showDeleteModal=!0,this.selectList=e;else if("Add_To_Vault"===e.id)this.showAddVaultModal=!0;else if("Email_Sharing"===e.id)this.selectedFileList=[],this.selectedFileList.push({id:this.file.id,name:this.file.name}),this.emailSharingSheet=!0;else if("Print"===e.id){if(this.file.name){let e=this.file.name.split(".").pop();Object(Ue["d"])(e)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.file.id)):this.$refs.myFiles.contentWindow.print()}this.filePrintSession()}else if("Initiate_Workflow"===e.id);else if("Download"===e.id){let e="";e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.file.repositoryId}/${this.file.id}/2`,window.open(e,"_blank")}},closeProcessSheet(){this.processSheet=!1},showLinks(e){"ATTACHMENTS"===e?this.attachmentSheet=!0:"COMMENTS"===e?this.commentsSheet=!0:"PRINT"===e?window.print():"TASK"===e&&(this.taskEntries.length?this.taskSheet=!0:this.addTask())},closeAttachmentsSheet(){this.attachmentSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},commentsText(e){return e.processId?[`<b>${e.workflowName} : ${e.requestNo}</b><br/> ${e.comments}`]:2===e.checkinStatus?["<b>CheckOut:</b><br/> "+e.comments]:1===e.checkinStatus?["<b>CheckIn:</b><br/> "+e.comments]:[e.comments]},bgCommentsColor(e){return e.processId?"orange-1":2===e.checkinStatus?"red-1":1===e.checkinStatus?"green-1":e.createdBy===this.$store.state.session.id?"primary-1":"secondary-1"},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const e=a/s[o];return i.format(Math.round(e),o)}},openFile(e){this.selectedFile=e;let t=location.origin;"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?window.open(this.fileLink()):this.fileSheet=!0},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},attachedFileSize(e){return Object(o["a"])(e)},attachedFileLink(){return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view?id=${this.selectedFile.id}&type=1`},closeTaskSheet(){this.taskSheet=!1},validateRequest(e){this.saveAction=e},addTask(){this.selectedTask={},this.taskMode="NEW",this.addTaskSheet=!0},addTaskEntry(e,t){this.taskEntryId.push({formId:e,formEntryId:t}),this.getTaskFormEntry(e,t)},getColor(e){return"Closed"===e||"High"===e?"red":"In Progress"===e||"Medium"===e?"warning":"Open"===e||"Low"===e?"secondary":"primary"},disableAction(e,t){return!!("Hide_Pages"===t.id&&e&&this.file&&this.file.name)&&!this.file.name.endsWith(".pdf")},closeDeleteFile(){this.showDeleteModal=!1,this.$emit("input",!1)},showCheckinUploadFile(e){if(2===e.checkinStatus)this.showCheckinModal=!0,console.log(e),this.itemId=e.id;else{this.showCheckedInOutModal=!0;let e=this.actionList.findIndex(e=>"CheckOut"===e.id);this.selectList=this.actionList[e]}},queueFilesForUpload(e){this.filesError=!1,this.filesToUpload.push(...e)},fileDownload(){let e="";e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.file.repositoryId}/${this.file.id}/2`,window.open(e,"_blank")},reset(){this.filesToUpload=[],this.comments="",this.showCheckinModal=!1},deleteUploadFile(e){this.filesToUpload.splice(e,1)},checkSignProcess(){this.signType=0,this.orderType=1,this.signProcessModal=!0},openSignProcess(){this.signProcessModal=!1,this.actions=[];let e=JSON.parse(this.signWorkflow.flowJson),t=e.blocks.find(e=>"START"===e.type);if(t&&"MANUAL"===t.settings.initiateMode){this.headerTitle=`${this.signWorkflow.name} - ${t.settings.label}`;let i=e.rules.find(e=>e.fromBlockId===t.id);i&&this.actions.push(i.proceedAction)}localStorage.setItem("userList",JSON.stringify(this.userList)),localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),this.documentSignProcess=!0,this.processSheet=!0},itemLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88"),t="";return t="https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://trial.ezofis.com/docsviewer/index.html":"https://app.ezofis.com"===e?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":"http://52.172.32.88"===e?"http://52.172.32.88/DocsViewer/index.html":e+"/PDFViewer/web/viewer.html",`${t}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&wId=${this.signWorkflow.id}&type=2&position=true&signType=${this.signType}&orderType=${this.orderType}`},checkViewerClose(){localStorage.getItem("viewerClose")&&"true"===localStorage.getItem("viewerClose")&&(clearInterval(this.watchViewerClose),localStorage.removeItem("viewerClose"),this.processSheet?this.getSignerSettings():this.closeFileSheet())},checkViewerEdit(){localStorage.getItem("viewerEdit")&&"true"===localStorage.getItem("viewerEdit")&&(localStorage.removeItem("viewerEdit"),clearInterval(this.watchViewerEdit),this.documentEdit=!0)},async getUserList(){const{error:e,payload:t}=await r["s"].getUserList();e?this.$alert.error("Error fetching users"):this.userList=t&&t.map(e=>({id:e.id,value:e.value,firstName:e.firstName}))},async getItemDetails(){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["p"].getFileData({repositoryId:this.file.repositoryId,itemId:this.file.id});this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t&&(this.fileData=t)},async getFileRetentions(){this.retentionList=[];const{error:e,payload:t}=await r["p"].getRetentions({sortBy:{criteria:"",order:"ASC"},groupBy:"",filterBy:[{filters:[{criteria:"repositoryId",condition:"IS_EQUALS_TO",value:this.file.repositoryId},{criteria:"itemId",condition:"IS_EQUALS_TO",value:this.file.id}],groupCondition:""}],currentPage:0,itemsPerPage:0,mode:"BROWSE"});e?this.$alert.error(e):null!==t&&(this.retentionList=t&&t.map(e=>({id:e.id,name:e.name,action:e.action,actionDate:e.actionDate,fieldId:e.fieldId,durationType:e.durationType,duration:e.duration,notifyJson:e.notifyJson})))},async getWorkflows(){this.workflows=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["t"].getWorkflows({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"initiatedBy",condition:"CONTAINS",value:"Document",dataType:""},{criteria:"flowstatus",condition:"IS_EQUALS_TO",value:"PUBLISHED",dataType:""},{criteria:"repositoryId",condition:"IS_EQUALS_TO",value:this.file.repositoryId,dataType:""}],groupCondition:""}],itemsPerPage:0,currentPage:0,hasSecurity:!1});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);const{data:i}=t;i.length&&i[0].value.length&&(i[0].value.forEach(e=>{let t=JSON.parse(e.flowJson),i=t.blocks.find(e=>"START"===e.type);if(i&&i.settings.initiateBy.indexOf("USER")>-1){let s=!1;if((i.settings.users.indexOf(this.$store.state.session.id)>-1||i.settings.users.indexOf("0")>-1)&&(s=!0),i.settings.initiateBy.indexOf("DOMAIN_USER")>-1){let e=this.$store.state.session.email.split("@").pop();i.settings.userDomains.indexOf(e)>-1&&(s=!0)}if(s){let s="",a=t.rules.find(e=>e.fromBlockId===i.id);a&&(s=a.proceedAction),this.workflows.push({id:e.id,name:e.name,review:s,initiatedBy:e.initiatedBy,formId:e.wFormId,flowJson:e.flowJson})}}}),this.workflows.length&&this.actionList.find(e=>{"Initiate_Workflow"===e.id&&(e.subMenu=this.workflows)}))},async getSignWorkflow(){this.isSignProcessFound=!1,this.signWorkflow={},this.$store.commit("showLoadingBar");const{error:e,payload:t}=await r["t"].getWorkflows({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"initiatedBy",condition:"CONTAINS",value:"DOCUMENT_SIGN",dataType:""},{criteria:"flowstatus",condition:"IS_EQUALS_TO",value:"PUBLISHED",dataType:""}],groupCondition:""}],itemsPerPage:0,currentPage:0,hasSecurity:!1});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);const{data:i}=t;i.length&&i[0].value.length&&(this.isSignProcessFound=!0,i[0].value.forEach(e=>{let t=JSON.parse(e.flowJson),i=t.blocks.find(e=>"START"===e.type);if(i){let s="",a=t.rules.find(e=>e.fromBlockId===i.id);a&&(s=a.proceedAction),this.signWorkflow={id:e.id,name:e.name,review:s,initiatedBy:e.initiatedBy,formId:e.wFormId,flowJson:e.flowJson}}}))},async checkWorkflow(e){if(this.documentSignProcess=!1,"DOCUMENT"===e.initiatedBy||"DOCUMENT_SIGN"===e.initiatedBy)this.workflowInit=e,this.saveAction=e.review,this.initiateWorkflow();else if("DOCUMENT_FORM"===e.initiatedBy&&e.formId){this.workflowInit=e,this.actions=[],await this.getForm(e.formId),this.formId=String(e.formId);let t=JSON.parse(e.flowJson),i=t.blocks.find(e=>"START"===e.type);if(i&&"MANUAL"===i.settings.initiateMode){this.headerTitle=`${e.name} - ${i.settings.label}`;let s=t.rules.find(e=>e.fromBlockId===i.id);s&&this.actions.push(s.proceedAction)}const s=[...this.form.panels,...this.form.secondaryPanels];if(!s.length)return;let a=[];for(const e of s)a.push(...e.fields);a.forEach(e=>{this.fileData.forEach(t=>{t.name==e.label&&(this.formModel[e.id]=t.value)})}),this.processSheet=!0}},async getForm(e){const{error:t,payload:i}=await r["g"].getForm(e);t?this.$alert.error(t):i&&(this.form=JSON.parse(i.formJson))},async initiateWorkflow(){let e=[];this.attachmentList.length&&this.attachmentList.forEach(t=>{e.push(t.id)});let t={workflowId:this.workflowInit.id,repositoryId:this.file.repositoryId,itemId:this.file.id,review:this.saveAction,formData:{formId:this.workflowInit.formId,fields:this.workflowFormModel},comments:this.commentsList,task:this.taskEntryId,userIds:this.transactionUserIds,fileIds:e};this.saveAction="",this.workflowFormModel={},this.$store.commit("showLoadingBarSave");const{error:i,payload:s}=await r["t"].processTransaction(t);this.$store.commit("hideLoadingBarSave"),i?this.$alert.error(i):(this.$alert.success(s.requestNo+" Request Initiated"),"DOCUMENT_SIGN"===this.workflowInit.initiatedBy&&this.updateSignerSettingWithProcessId(s),this.workflowInit={},this.closeProcessSheet())},async saveComment(){this.commentText&&(this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id,fileIds:[0]}),this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}),this.commentText="")},async saveAdvancedComment(){this.advancedCommentText&&(this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id,fileIds:[0]}),this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}),this.advancedCommentText="",this.advancedCommentsSheet=!1)},async getRepository(){const{error:e,payload:t}=await r["p"].getRepository(this.file.repositoryId);e?this.$alert.error(e):this.repositoryDetails=t},async uploadWflowAttachments(e){"STATIC"===this.repositoryDetails.fieldsType&&(this.selectedUploadFile=e,this.uploadFilename=e.target.files[0].name,this.showMetaDataEditModal=!0)},async uploadAttachments(e){const t=e.target.files[0],i=new FormData;i.append("file",t),i.append("repositoryId",this.file.repositoryId);let s=e.target.files[0].name;const a=s.split(".").pop();if(Object(Ue["a"])(a))try{const s=await je()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:a,data:o}=s;if(200!==a)throw"Invalid response";let r=JSON.parse(o);this.attachmentList.push({id:Number(r.fileId),name:t.name,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:t.size,initiate:!0}),e.target.value=""}catch(o){console.error(o),this.$alert.error("error attaching file")}else this.$alert.info("This file format is not supported")},async attachmentDelete(e){if(this.$store.commit("showLoadingBar"),e.initiate){const{error:t}=await r["r"].deleteUploadedFiles([e.id]);if(t)return void this.$alert.error(t);this.$store.commit("hideLoadingBar"),this.attachmentList=this.attachmentList.filter(t=>t.id!==e.id)}},async getTaskForm(){this.taskFormList=[],this.addTaskEnabled=!1;const{error:e,payload:t}=await r["g"].getForms({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"type",condition:"IS_EQUALS_TO",value:"Task",dataType:""}],groupCondition:""}],itemsPerPage:50,currentPage:1});if(e)return void this.$alert.error(e);const{data:i}=t;i.length&&i[0].value.length&&(this.addTaskEnabled=!0,i[0].value.forEach(e=>{this.taskFormList.push({id:e.id,label:e.name,value:e.id,repositoryId:e.repositoryId,formJson:e.formJson})}),this.taskFormList.length&&1===this.taskFormList.length&&(this.taskFormId=this.taskFormList[0].id,this.taskRepositoryId=this.taskFormList[0].repositoryId,this.addTaskForm=JSON.parse(this.taskFormList[0].formJson),this.getDocumentTaskEntries()))},async getTaskFormEntry(e,t){this.$store.commit("showLoadingBar");const{error:i,payload:s}=await r["g"].getFormEntry(e,t);if(this.$store.commit("hideLoadingBar"),i)this.$alert.error(i);else if(s.length){const e=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let t=[];for(const s of e)t.push(...s.fields);let i="",a="",o="",r="",n="",l="";t.forEach(e=>{switch(e.label){case"Task Name":i=s[0][e.id];break;case"Task Assign":a=s[0][e.id];break;case"Start Date":o=s[0][e.id];break;case"End Date":r=s[0][e.id];break;case"Priority":n=s[0][e.id];break;case"Task Status":l=s[0][e.id];break}}),this.taskEntries.push({id:s[0].itemid,name:i,assigned:a,startDate:o,endDate:r,priority:n,status:l})}},async getDocumentTaskEntries(){this.taskEntries=[];const{error:e,payload:t}=await r["g"].getDocumentTaskEntries(this.taskFormId,this.file.repositoryId,this.file.id);if(e)this.$alert.error(e);else if(t.length){const e=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let i=[];for(const t of e)i.push(...t.fields);let s="",a="",o="",r="",n="",l="";i.forEach(e=>{switch(e.label){case"Task Name":s=t[0][e.id];break;case"Task Assign":a=t[0][e.id];break;case"Start Date":o=t[0][e.id];break;case"End Date":r=t[0][e.id];break;case"Priority":n=t[0][e.id];break;case"Task Status":l=t[0][e.id];break}}),this.taskEntries.push({id:t[0].itemid,name:s,assigned:a,startDate:o,endDate:r,priority:n,status:l})}},async filePrintSession(){const{error:e}=await r["k"].filePrintSession({repositoryId:this.file.repositoryId,itemId:this.file.id,activityId:4});e&&this.$alert.error(e)},async getFileHistory(){this.$store.commit("showLoadingBar"),this.history=[];const{error:e,payload:t}=await r["o"].getRepositoryData(this.file.repositoryId,{itemId:this.file.id,filterBy:[],itemsPerPage:100,currentPage:1});this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t&&(this.history=t.data[0].value.map(e=>({activity:e.activity,activityBy:e.activityBy,activityOn:this.$day.format(e.activityOn)})))},async uploadFile(){const e=await this.$refs.checkin.validate();if(!this.filesToUpload.length)return void(this.filesError=!0);if(!e)return;let t=this.filesToUpload[0],i=0;const s=new FormData;s.append("file",t.file),s.append("repositoryId",this.file.repositoryId),s.append("itemId",this.itemId),s.append("comments",this.comments),this.showProgress=!0,this.showDeleteBtn=!1;let a=t.name;const o=a.split(".").pop();if(!Object(Ue["a"])(o))return this.filesToUpload.splice(i,1),void this.$alert.info("This file format is not supported");try{const e=await je()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:s,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"},onUploadProgress:function(e){const i=Math.round(100*e.loaded/e.total);t.uploadedPercentage=i}}),{status:i}=e;if(200!==i)throw"Invalid response";this.$alert.success("file updated successfully"),this.reset(),this.showCheckinModal=!1,this.$emit("input",!1)}catch(r){console.error(r),this.$alert.error("error uploading file - "+t.name)}},async saveMetaData(e){this.$store.commit("showLoadingBar");let t=[],i=!1;if(e.forEach(e=>{e.oldValue!==e.newValue&&(i=!0,t.push(e))}),!i)return void this.$alert.error("Not edited any field");let s={repositoryId:this.file.repositoryId,itemId:this.file.id,settings:JSON.stringify(t)};const{error:a,payload:o}=await r["p"].saveMetaData(s);this.$store.commit("hideLoadingBar"),a?this.$alert.error(a):(o&&this.$alert.success("Metadata edit successfully"),this.getItemDetails())},async getFolderSecurity(){const{error:e,payload:t}=await r["p"].getRepositorySecurity(this.file.repositoryId);if(e)this.$alert.error(e);else if(t&&t.userOptions){const e=t.userOptions.map(e=>({id:e.id,userName:e.email,userId:e.userId,options:JSON.parse(e.options)}));let i=e.find(e=>e.userId===this.$store.state.session.id),s=!1;s=!(!i||!i.options)&&!!i.options.metadataEdit;const a=t.groupOptions.map(e=>({id:e.id,groupId:e.groupId,options:JSON.parse(e.options)}));let o=!1;this.$store.state.session.groups&&this.$store.state.session.groups.forEach(e=>{let t=a.find(t=>t.groupId===e.id);t&&t.options&&t.options.metadataEdit&&(o=!0)});let r=this.actionList.findIndex(e=>"Indexing_Change"===e.id);r>=0&&(this.actionList[r].disable=!s&&!o)}},async getSignerSettings(){this.transactionUserIds=[],this.signerSettings={};let e=[{groupCondition:"",filters:[{criteria:"repositoryId",condition:"IS_EQUALS_TO",value:this.file.repositoryId.toString()},{criteria:"itemId",condition:"IS_EQUALS_TO",value:this.file.id.toString()}]}];try{const t=await je()({url:`https://appuat.ezofis.com/ezofisapi/api/annotation/signSettingsList/${this.$store.state.session.tenantId}/${this.signWorkflow.id}`,method:"POST",headers:{Accept:"application/json"},data:e}),{status:i,data:s}=t;if(200!==i)throw"Invalid response";this.signerSettings=JSON.parse(s);let a=JSON.parse(this.signerSettings.settingsJson);if(a.length)if(0===this.orderType)a.forEach(e=>{"External"===e.signerType?this.transactionUserIds.push(e.externalSignerId):this.transactionUserIds.push(e.signerId)});else{let e=a.find(e=>1===e.signOrder);if(e){let t="External"===e.signerType?e.externalSignerId:e.signerId;this.transactionUserIds.push(t)}}this.transactionUserIds.length&&this.checkWorkflow(this.signWorkflow)}catch(t){console.error(t),this.$alert.error("error getting signer details")}},async updateSignerSettingWithProcessId(e){try{this.signerSettings.processId=e.processId;let t={pId:e.processId,rId:this.signerSettings.repositoryId,itemId:this.signerSettings.itemId,settingsJson:this.signerSettings.settingsJson,isDeleted:0};const i=await je()({url:`https://appuat.ezofis.com/ezofisapi/api/annotation/signSettings/${this.$store.state.session.tenantId}/${this.signWorkflow.id}/${this.signerSettings.id}`,method:"PUT",headers:{Accept:"application/json"},data:t}),{status:s}=i;if(202!==s)throw"Invalid response"}catch(t){console.error(t),this.$alert.error("error updating signer details")}}}},st=it,at=(i("487e"),i("b047")),ot=i("cb32"),rt=i("4e73"),nt=Object(I["a"])(st,s,a,!1,null,"07c89b08",null);t["a"]=nt.exports;M()(nt,"components",{QChip:at["a"],QAvatar:ot["a"],QMenu:rt["a"],QChatMessage:E["a"]})},"718c":function(e,t,i){"use strict";i("1a82")},"71f4":function(e,t,i){},7225:function(e,t,i){"use strict";i("afe7")},7334:function(e,t,i){},"73e0":function(e,t,i){"use strict";i("8ddd")},"73e7":function(e,t,i){},"74d9":function(e,t,i){"use strict";i("ee7b")},"75c3":function(e,t,i){"use strict";var s=i("0967"),a=i("7c86"),o=i("d882"),r=i("f249");function n(e,t,i){const s=Object(o["h"])(e);let a,r=s.left-t.event.x,n=s.top-t.event.y,l=Math.abs(r),d=Math.abs(n);const c=t.direction;!0===c.horizontal&&!0!==c.vertical?a=r<0?"left":"right":!0!==c.horizontal&&!0===c.vertical?a=n<0?"up":"down":!0===c.up&&n<0?(a="up",l>d&&(!0===c.left&&r<0?a="left":!0===c.right&&r>0&&(a="right"))):!0===c.down&&n>0?(a="down",l>d&&(!0===c.left&&r<0?a="left":!0===c.right&&r>0&&(a="right"))):!0===c.left&&r<0?(a="left",l<d&&(!0===c.up&&n<0?a="up":!0===c.down&&n>0&&(a="down"))):!0===c.right&&r>0&&(a="right",l<d&&(!0===c.up&&n<0?a="up":!0===c.down&&n>0&&(a="down")));let u=!1;if(void 0===a&&!1===i){if(!0===t.event.isFirst||void 0===t.event.lastDir)return{};a=t.event.lastDir,u=!0,"left"===a||"right"===a?(s.left-=r,l=0,r=0):(s.top-=n,d=0,n=0)}return{synthetic:u,payload:{evt:e,touch:!0!==t.event.mouse,mouse:!0===t.event.mouse,position:s,direction:a,isFirst:t.event.isFirst,isFinal:!0===i,duration:Date.now()-t.event.time,distance:{x:l,y:d},offset:{x:r,y:n},delta:{x:s.left-t.event.lastX,y:s.top-t.event.lastY}}}}function l(e){const t=e.__qtouchpan;void 0!==t&&(void 0!==t.event&&t.end(),Object(o["b"])(t,"main"),Object(o["b"])(t,"temp"),!0===s["a"].is.firefox&&Object(o["j"])(e,!1),void 0!==t.styleCleanup&&t.styleCleanup(),delete e.__qtouchpan)}let d=0;t["a"]={name:"touch-pan",bind(e,{value:t,modifiers:i}){if(void 0!==e.__qtouchpan&&(l(e),e.__qtouchpan_destroyed=!0),!0!==i.mouse&&!0!==s["a"].has.touch)return;function c(e,t){!0===i.mouse&&!0===t?Object(o["l"])(e):(!0===i.stop&&Object(o["k"])(e),!0===i.prevent&&Object(o["i"])(e))}const u={uid:"qvtp_"+d++,handler:t,modifiers:i,direction:Object(a["a"])(i),noop:o["g"],mouseStart(e){Object(a["b"])(e,u)&&Object(o["e"])(e)&&(Object(o["a"])(u,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),u.start(e,!0))},touchStart(e){if(Object(a["b"])(e,u)){const t=e.target;Object(o["a"])(u,"temp",[[t,"touchmove","move","notPassiveCapture"],[t,"touchcancel","end","passiveCapture"],[t,"touchend","end","passiveCapture"]]),u.start(e)}},start(t,a){!0===s["a"].is.firefox&&Object(o["j"])(e,!0),u.lastEvt=t;const r=Object(o["h"])(t);if(!0===a||!0===i.stop){if(!0!==u.direction.all&&(!0!==a||!0!==u.modifiers.mouseAllDir&&!0!==u.modifiers.mousealldir)){const e=t.type.indexOf("mouse")>-1?new MouseEvent(t.type,t):new TouchEvent(t.type,t);!0===t.defaultPrevented&&Object(o["i"])(e),!0===t.cancelBubble&&Object(o["k"])(e),e.qClonedBy=void 0===t.qClonedBy?[u.uid]:t.qClonedBy.concat(u.uid),e.qKeyEvent=t.qKeyEvent,e.qClickOutside=t.qClickOutside,u.initialEvent={target:t.target,event:e}}Object(o["k"])(t)}u.event={x:r.left,y:r.top,time:Date.now(),mouse:!0===a,detected:!1,isFirst:!0,isFinal:!1,lastX:r.left,lastY:r.top}},move(e){if(void 0===u.event)return;u.lastEvt=e;const t=!0===u.event.mouse,i=()=>{let i;c(e,t),!0!==u.modifiers.preserveCursor&&!0!==u.modifiers.preservecursor&&(i=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),!0===t&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Object(r["a"])(),u.styleCleanup=e=>{if(u.styleCleanup=void 0,void 0!==i&&(document.documentElement.style.cursor=i),document.body.classList.remove("non-selectable"),!0===t){const t=()=>{document.body.classList.remove("no-pointer-events--children")};void 0!==e?setTimeout(()=>{t(),e()},50):t()}else void 0!==e&&e()}};if(!0===u.event.detected){!0!==u.event.isFirst&&c(e,u.event.mouse);const{payload:t,synthetic:s}=n(e,u,!1);return void(void 0!==t&&(!1===u.handler(t)?u.end(e):(void 0===u.styleCleanup&&!0===u.event.isFirst&&i(),u.event.lastX=t.position.left,u.event.lastY=t.position.top,u.event.lastDir=!0===s?void 0:t.direction,u.event.isFirst=!1)))}if(!0===u.direction.all||!0===t&&(!0===u.modifiers.mouseAllDir||!0===u.modifiers.mousealldir))return i(),u.event.detected=!0,void u.move(e);const s=Object(o["h"])(e),a=s.left-u.event.x,l=s.top-u.event.y,d=Math.abs(a),h=Math.abs(l);d!==h&&(!0===u.direction.horizontal&&d>h||!0===u.direction.vertical&&d<h||!0===u.direction.up&&d<h&&l<0||!0===u.direction.down&&d<h&&l>0||!0===u.direction.left&&d>h&&a<0||!0===u.direction.right&&d>h&&a>0?(u.event.detected=!0,u.move(e)):u.end(e,!0))},end(t,i){if(void 0!==u.event){if(Object(o["b"])(u,"temp"),!0===s["a"].is.firefox&&Object(o["j"])(e,!1),!0===i)void 0!==u.styleCleanup&&u.styleCleanup(),!0!==u.event.detected&&void 0!==u.initialEvent&&u.initialEvent.target.dispatchEvent(u.initialEvent.event);else if(!0===u.event.detected){!0===u.event.isFirst&&u.handler(n(void 0===t?u.lastEvt:t,u).payload);const{payload:e}=n(void 0===t?u.lastEvt:t,u,!0),i=()=>{u.handler(e)};void 0!==u.styleCleanup?u.styleCleanup(i):i()}u.event=void 0,u.initialEvent=void 0,u.lastEvt=void 0}}};e.__qtouchpan=u,!0===i.mouse&&Object(o["a"])(u,"main",[[e,"mousedown","mouseStart","passive"+(!0===i.mouseCapture||!0===i.mousecapture?"Capture":"")]]),!0===s["a"].has.touch&&Object(o["a"])(u,"main",[[e,"touchstart","touchStart","passive"+(!0===i.capture?"Capture":"")],[e,"touchmove","noop","notPassiveCapture"]])},update(e,{oldValue:t,value:i}){const s=e.__qtouchpan;void 0!==s&&t!==i&&("function"!==typeof i&&s.end(),s.handler=i)},unbind(e){void 0===e.__qtouchpan_destroyed?l(e):delete e.__qtouchpan_destroyed}}},7794:function(e,t,i){"use strict";i("caad");var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{attrs:{id:"repository-field"}},[e.showFreeze?t("div",{attrs:{id:"checkbox-field"}},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Freeze",expression:"'Freeze'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:e.freezed?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:e.handleFreeze},model:{value:e.freezed,callback:function(t){e.freezed=t},expression:"freezed"}})],1):e._e(),"SHORT_TEXT"===e.field.dataType||"BARCODE"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:i[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,2138129544)}):e._e(),"NUMBER"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory,integer:!e.field.options.allowDecimals}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("NumberField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:i[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,3272965974)}):e._e(),"DATE"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("DateField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:i[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,2736912833)}):e._e(),"TIME"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TimeField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:i[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,2195704480)}):e._e(),"DATE_TIME"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("DateTimeField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:i[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,1802324180)}):e._e(),"SINGLE_SELECT"===e.field.dataType&&["EXISTING"].includes(e.field.options.optionsType)?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("AsyncSelectField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,"api-path":e.apiPath,error:i[0],"new-option":e.field.options.allowToAddNewOptions,"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,364407705)}):e._e(),"SINGLE_SELECT"===e.field.dataType&&"PREDEFINED"===e.field.options.optionsType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:i[0],"new-option":e.field.options.allowToAddNewOptions,options:e.predefinedSelectOptions,"is-readonly":e.readOnly,page:"repository"},on:{input:e.handleInput}})]}}],null,!1,3382750843)}):e._e(),"SINGLE_SELECT"===e.field.dataType&&["MASTER"].includes(e.field.options.optionsType)?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,error:i[0],"new-option":e.field.options.allowToAddNewOptions,options:e.options,"is-readonly":e.readOnly,page:"repository"},on:{input:e.handleInput}})]}}],null,!1,768311157)}):e._e(),"BOOLEAN"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SingleChoiceField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,options:e.booleanOptions,error:i[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,61245750)}):e._e(),"OMR"===e.field.dataType?t("ValidationProvider",{staticClass:"full-width",attrs:{name:e.field.name,rules:{required:e.field.isMandatory}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SingleChoiceField",{attrs:{value:e.value,"is-mandatory":e.field.isMandatory,label:e.label||e.field.name,options:e.omrOptions,error:i[0],"is-readonly":e.readOnly},on:{input:e.handleInput}})]}}],null,!1,1875132930)}):e._e()],1),t("div",{staticClass:"row items-center justify-center q-mt-sm"},[e.visiableSyncBtn?t("BaseButton",{attrs:{label:"Sync",color:"secondary"},on:{click:function(t){return e.$emit("saveSync",e.field)}}}):e._e()],1)])},a=[],o=i("7bb1"),r=i("b3d1"),n=i("ad54"),l=i("53c1"),d=i("cedb"),c=i("d1e5"),u=i("12b8"),h=i("0c21"),m=i("9234"),p=i("0d5e"),f={name:"RepositoryField",components:{ValidationProvider:o["b"],TextField:r["a"],NumberField:n["a"],DateField:l["a"],TimeField:d["a"],DateTimeField:c["a"],SelectField:u["a"],AsyncSelectField:h["a"],SingleChoiceField:m["a"]},props:{field:{type:Object,required:!0},repositoryId:{type:[String,Number],required:!0},value:{type:[String,Number],required:!0},readOnly:{type:Boolean,default:!1},label:{type:String,default:""},syncField:{type:Object,default:()=>{}},parentControl:{type:Boolean,default:!1},rowIndex:{type:Number,required:!0},filter:{type:Boolean,default:!1},freezedData:{type:Object,default:()=>{}},showFreeze:{type:Boolean,default:!1}},data(){return{booleanOptions:[{id:this.$nano.id(),label:this.field.options.truthyValue,value:this.field.options.truthyValue},{id:this.$nano.id(),label:this.field.options.falsyValue,value:this.field.options.falsyValue}],omrOptions:[{id:this.$nano.id(),label:"Yes",value:"true"},{id:this.$nano.id(),label:"No",value:"false"}],visiableSyncBtn:!1,options:[],freeze:!1,freezeData:this.freezedData,freezed:!1}},computed:{predefinedSelectOptions(){return this.field.options.predefinedOptions.map(e=>({id:this.$nano.id(),label:e,value:e}))},apiPath(){return`/repository/${this.repositoryId}/uniqueColumnValues`}},watch:{field:{immediate:!0,async handler(){for(let e in this.syncField)this.syncField[e]===this.field.name&&(this.visiableSyncBtn=!0)}},filter:{immediate:!0,deep:!0,handler(){this.field.filterBy&&this.field.options.masterFormId&&this.getMasterEntriesFilter(this.field)}}},created(){this.freezedData&&(this.freezed=this.field.name in this.freezedData),this.field.options.masterFormId&&this.getMasterEntries(this.field.options.masterFormId,this.field.options.masterTableColumn)},methods:{handleInput(e){this.$emit("input",e),this.parentControl&&this.$emit("filterBy",this.field,this.rowIndex),this.freezed&&this.updateOrAddField(this.field.name,e)},handleFreeze(){this.freezed=!this.freezed,this.freezed?(this.updateOrAddField(this.field.name,this.value),this.$emit("update:freezed",this.freeze)):this.$emit("update:removeFreezed",this.field.name)},updateOrAddField(e,t){e in this.freezeData?this.freezeData[e]=t:this.freezeData={...this.freezeData,[e]:t},this.$emit("update:freezedData",this.freezeData)},async getMasterEntries(e,t){try{const i=await p["b"].post(`/form/${e}/uniqueColumnValues`,JSON.stringify({column:t,keyword:"",rowFrom:0,rowCount:0})),{status:s,data:a}=i;if(200!==s)throw i;const o=JSON.parse(a);o.length&&(this.options=o.map(e=>({id:this.$nano.id(),label:e,value:e})))}catch(i){console.error(i),this.$alert.error("Error fetching options")}},async getMasterEntriesFilter(e){try{const t=await p["b"].post(`/form/${e.options.masterFormId}/uniqueColumnValues`,JSON.stringify({column:e.options.masterTableColumn,keyword:"",rowFrom:0,rowCount:0,filters:e.filterBy})),{status:i,data:s}=t;if(200!==i)throw t;const a=JSON.parse(s);a.length?(this.options=a.map(e=>({id:this.$nano.id(),label:e,value:e})),1===this.options.length&&this.handleInput(this.options[0].value)):(this.field.options.masterFormId&&this.getMasterEntries(this.field.options.masterFormId,this.field.options.masterTableColumn),this.handleInput(""))}catch(t){console.error(t),this.$alert.error("Error fetching options")}}}},v=f,y=(i("87dc"),i("2877")),b=Object(y["a"])(v,s,a,!1,null,"174d3602",null);t["a"]=b.exports},8169:function(e,t,i){"use strict";i("14d9");var s=i("a026"),a=i("87e8");t["a"]=s["default"].extend({name:"QChatMessage",mixins:[a["a"]],props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelSanitize:Boolean,nameSanitize:Boolean,textSanitize:Boolean,stampSanitize:Boolean},computed:{textClass(){return"q-message-text-content q-message-text-content--"+this.op+(void 0!==this.textColor?" text-"+this.textColor:"")},messageClass(){return"q-message-text q-message-text--"+this.op+(void 0!==this.bgColor?" text-"+this.bgColor:"")},containerClass(){return"q-message-container row items-end no-wrap"+(!0===this.sent?" reverse":"")},sizeClass(){if(void 0!==this.size)return"col-"+this.size},op(){return!0===this.sent?"sent":"received"}},methods:{__wrapStamp(e,t){if(void 0!==this.$scopedSlots.stamp)return[t,e("div",{staticClass:"q-message-stamp"},this.$scopedSlots.stamp())];if(this.stamp){const i=!0===this.stampSanitize?"textContent":"innerHTML";return[t,e("div",{staticClass:"q-message-stamp",domProps:{[i]:this.stamp}})]}return[t]},__getText(e,t,i){const s=!0===this.textSanitize?"textContent":"innerHTML";if(!0===i&&!0===t.some(e=>void 0===e.tag&&void 0!==e.text))return[e("div",{class:this.messageClass},[e("div",{class:this.textClass},this.__wrapStamp(e,e("div",t)))])];const a=!0!==i?t=>e("div",{domProps:{[s]:t}}):t.length>1?e=>e:t=>e("div",[t]);return t.map((t,i)=>e("div",{key:i,class:this.messageClass},[e("div",{class:this.textClass},this.__wrapStamp(e,a(t)))]))}},render(e){const t=[];void 0!==this.$scopedSlots.avatar?t.push(this.$scopedSlots.avatar()):void 0!==this.avatar&&t.push(e("img",{class:"q-message-avatar q-message-avatar--"+this.op,attrs:{src:this.avatar,"aria-hidden":"true"}}));const i=[];void 0!==this.$scopedSlots.name?i.push(e("div",{class:"q-message-name q-message-name--"+this.op},this.$scopedSlots.name())):void 0!==this.name&&i.push(e("div",{class:"q-message-name q-message-name--"+this.op,domProps:{[!0===this.nameSanitize?"textContent":"innerHTML"]:this.name}})),void 0!==this.text&&i.push(this.__getText(e,this.text)),void 0!==this.$scopedSlots.default&&i.push(this.__getText(e,this.$scopedSlots.default(),!0)),t.push(e("div",{class:this.sizeClass},i));const s=[];return void 0!==this.$scopedSlots.label?s.push(e("div",{staticClass:"q-message-label"},this.$scopedSlots.label())):void 0!==this.label&&s.push(e("div",{staticClass:"q-message-label",domProps:{[!0===this.labelSanitize?"textContent":"innerHTML"]:this.label}})),s.push(e("div",{class:this.containerClass},t)),e("div",{class:"q-message q-message-"+this.op,on:{...this.qListeners}},s)}})},8180:function(e,t,i){"use strict";i("e0b6")},"81e5":function(e,t,i){"use strict";i("e887")},"87dc":function(e,t,i){"use strict";i("5f3d")},8829:function(e,t,i){"use strict";i("4714")},"888a":function(e,t,i){},8920:function(e,t,i){},"8a9e":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"breadcrumbs"},[t("BaseIcon",{staticClass:"cursor-pointer icon active",attrs:{name:"mdi-home","inherit-color":""},on:{click:function(t){return e.$emit("reset")}}}),e._l(e.breadcrumbs,(function(i){return t("div",{key:i.id,staticClass:"breadcrumb",on:{click:function(t){return e.$emit("click",i)}}},[t("BaseIcon",{staticClass:"icon q-mx-xs",attrs:{name:"eva-chevron-right","inherit-color":""}}),t("div",{staticClass:"label"},[e._v(e._s(i.label))])],1)}))],2)},a=[],o={name:"Breadcrumbs",props:{breadcrumbs:{type:Array,default:()=>[]}}},r=o,n=(i("6cd0"),i("2877")),l=Object(n["a"])(r,s,a,!1,null,"165688e2",null);t["a"]=l.exports},"8b18":function(e,t,i){"use strict";i("28f7")},"8b55":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",e._g({class:{active:e.isActive,"is-full-width":e.isFullWidth},style:{color:e.isActive?e._color:""},attrs:{id:"tab"}},e.$listeners),[e._v(" "+e._s(e.label)+" ")])},a=[],o={name:"Tab",props:{label:{type:String,required:!0},isActive:{type:Boolean,default:!1},isFullWidth:{type:Boolean,default:!1},color:{type:String,default:"primary"}},computed:{_color(){return`var(--${this.color})`}}},r=o,n=(i("2ac6"),i("2877")),l=Object(n["a"])(r,s,a,!1,null,"f3c4783e",null);t["a"]=l.exports},"8b81":function(e,t,i){"use strict";i("03e1")},"8bf7":function(e,t,i){"use strict";i("0079")},"8ddd":function(e,t,i){},"8fbb":function(e,t,i){},"91dd":function(e,t,i){},9290:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,width:e.width},on:{input:function(t){return e.$emit("input",!1)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("title")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-edit-outline"},on:{click:function(t){return e.$emit("edit")}}}),t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-trash-2-outline"},on:{click:function(t){return e.$emit("delete")}}})]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"item-details"}},[t("Tabs",{staticClass:"tabs",attrs:{tabs:e.tabs},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),"overview"===e.tab?t("ItemOverview",{attrs:{overview:e.overview},scopedSlots:e._u([e._l(e.overview,(function(t){return{key:t.name,fn:function(){return[e._t(t.name,null,{value:t.value})]},proxy:!0}}))],null,!0)}):e._e(),"history"===e.tab?t("ItemHistory",{attrs:{history:e.history}}):e._e()],1)]},proxy:!0}],null,!0)})},a=[],o=i("381e"),r=i("b94d"),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"item-overview"}},[t("table",[t("tbody",e._l(e.overview,(function(i){return t("tr",{key:i.id},[t("td",{staticClass:"label"},[e._v(e._s(i.label))]),t("td",{staticClass:"value"},[e._t(i.name,(function(){return["options"===i.name&&"MenuOptions"===i.label?[t("MenuOptionsDetails",{attrs:{options:i.value}})]:[e._v(" "+e._s(i.value||"-")+" ")]]}),{value:i.value})],2)])})),0)])])},l=[],d=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"menu-options"}},[t("div",{staticClass:"options-wrapper"},[t("div",{staticClass:"row q-col-gutter-md"},[e._l(e.options,(function(i){return[e._l(i,(function(i,s){return["Menu"!==s&&"dashboard"!==s?t("div",{key:s,staticClass:"option col-4 is-selected",attrs:{tabindex:0}},["Menu"!==s&&"dashboard"!==s?t("BaseIcon",{key:s,staticClass:"icon",attrs:{name:e.isSelected(i)?"eva-checkmark-outline":"eva-close-outline",color:e.isSelected(i)?"positive":"negative"}}):e._e(),t("div",["Menu"!==s?t("div",{staticClass:"label"},[e._v(" "+e._s(s)+" ")]):e._e()])],1):e._e()]})),e._l(i.Menu,(function(i,s){return t("div",{key:i[s],staticClass:"option1 col-12 is-selected",attrs:{tabindex:0}},[t("BaseIcon",{key:s,staticClass:"icon",attrs:{name:e.isSelected(i)?"eva-checkmark-outline":"eva-close-outline",color:e.isSelected(i)?"positive":"negative"}}),t("div",[t("div",{staticClass:"label"},[e._v(e._s(s))])])],1)}))]}))],2)])])},c=[],u={name:"MenuOptionsDetails",props:{options:{type:Array,default:()=>[]}},methods:{isSelected(e){return e}}},h=u,m=(i("3607"),i("2877")),p=Object(m["a"])(h,d,c,!1,null,"1160de11",null),f=p.exports,v={name:"ItemOverview",components:{MenuOptionsDetails:f},props:{overview:{type:Array,required:!0}}},y=v,b=(i("beae"),Object(m["a"])(y,n,l,!1,null,"785f64ce",null)),g=b.exports,w=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"history"}},[e.changes.length?e._l(e.changes,(function(i){return t("div",{key:i.id,staticClass:"entry"},[t("div",{staticClass:"header"},[e._v(" "+e._s(i.changes.length)+" "+e._s(i.changes.length>1?"Changes":"Change")+" ")]),t("div",{staticClass:"content"},[t("div",{staticClass:"changes-meta"},[t("div",[e._v(e._s(i.changedBy))]),t("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(i.changedAt))])],1),e._l(i.changes,(function(i,s){return t("div",{key:s+1,staticClass:"change"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),"isDeleted"===i.column?t("div",[Number(i.newValue)?t("span",{staticClass:"font-semibold"},[e._v(' "Deleted" ')]):t("span",{staticClass:"font-semibold"},[e._v('"Restored"')]),e._v(" the item ")]):i.oldValue?t("div",[e._v(" Modified "+e._s(i.column)+" from "),t("span",{staticClass:"font-semibold"},[e._v('"'+e._s(i.oldValue)+'"')]),e._v(" to "),t("span",{staticClass:"font-semibold"},[e._v('"'+e._s(i.newValue)+'"')])]):t("div",[e._v(" Assigned "),t("span",{staticClass:"font-semibold"},[e._v('"'+e._s(i.newValue)+'"')]),e._v(" as "+e._s(i.column)+" ")])],1)}))],2)])})):t("div",{staticClass:"no-history"},[e._v("No data found")])],2)},k=[],S={name:"ItemHistory",props:{history:{type:Array,required:!0}},data(){return{changes:[]}},watch:{history:{immediate:!0,deep:!0,handler(){this.changes=this.history.map(e=>({id:this.$nano.id(),changedBy:"admin@ezofis.com",changedAt:this.$day.format(e.key),changes:e.changes}))}}}},C=S,_=(i("52e1"),Object(m["a"])(C,w,k,!1,null,"262c778d",null)),I=_.exports,x={name:"ItemDetails",components:{Sheet:o["a"],Tabs:r["a"],ItemOverview:g,ItemHistory:I},props:{value:{type:Boolean,default:!1},overview:{type:Array,required:!0},history:{type:Array,required:!0},width:{type:String,default:"540px"}},data(){return{tab:"overview",tabs:[{id:this.$nano.id(),label:"overview",value:"overview"},{id:this.$nano.id(),label:"history",value:"history"}]}}},$=x,B=(i("99dc"),Object(m["a"])($,s,a,!1,null,"08327a1e",null));t["a"]=B.exports},9495:function(e,t,i){"use strict";i("888a")},"99dc":function(e,t,i){"use strict";i("cc92")},"9a8d":function(e,t,i){},"9bc4":function(e,t,i){"use strict";var s=i("b703"),a=i("09f4"),o=i("1549"),r=i("2250"),n=i("f842"),l=i("e8b2");function d(e){return Object(l["a"])(e)?void 0:e}var c=d,u=i("b4f1"),h=i("ca54"),m=i("f5fe"),p=i("ff51"),f=h["a"]?h["a"].isConcatSpreadable:void 0;function v(e){return Object(p["a"])(e)||Object(m["a"])(e)||!!(f&&e&&e[f])}var y=v;function b(e,t,i,s,a){var o=-1,r=e.length;i||(i=y),a||(a=[]);while(++o<r){var n=e[o];t>0&&i(n)?t>1?b(n,t-1,i,s,a):Object(u["a"])(a,n):s||(a[a.length]=n)}return a}var g=b;function w(e){var t=null==e?0:e.length;return t?g(e,1):[]}var k=w,S=i("500e"),C=i("c619");function _(e){return Object(C["a"])(Object(S["a"])(e,void 0,k),e+"")}var I=_,x=i("4e71"),$=1,B=2,T=4,F=I((function(e,t){var i={};if(null==e)return i;var l=!1;t=Object(s["a"])(t,(function(t){return t=Object(r["a"])(t,e),l||(l=t.length>1),t})),Object(n["a"])(e,Object(x["a"])(e),i),l&&(i=Object(a["a"])(i,$|B|T,c));var d=t.length;while(d--)Object(o["a"])(i,t[d]);return i}));t["a"]=F},"9ef6":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"file-list"}},[t("div",{staticClass:"header",class:{"has-selected-files":e.hasSelectedFiles},on:{click:e.toggleContent}},[t("div",{staticClass:"label name-and-files"},[e._t("label"),t("span",{staticClass:"q-ml-xs"},[e._v("("+e._s(e.numberOfFiles)+")")])],2),t("q-space"),e.showAutoLoad?t("div",{staticClass:"auto-reload"},[e.isContentMaximized?t("p",{staticClass:"q-ml-sm text-gray ellipsis",staticStyle:{"font-size":"10px","margin-top":"15px"}},[e._v(" auto-refresh every 15 seconds ")]):e._e(),e.isContentMaximized?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.refreshClicked()}}}):e._e()],1):e._e(),e.isContentMaximized?e._t("actions-maximized"):e._t("actions-minimized"),t("BaseIcon",{staticClass:"icon",class:{"rotate-180":e.isContentMaximized},attrs:{name:"mdi-menu-down","inherit-color":""}})],2),t("q-expansion-item",{attrs:{value:e.isContentMaximized,"header-style":e._styles}},[e.hasFiles?t("div",{staticClass:"q-pb-sm"},[e._t("default")],2):t("div",{staticClass:"no-files"},[e._v("No files found")])])],1)},a=[],o={name:"FileList",props:{hasFiles:{type:Boolean,default:!1},hasSelectedFiles:{type:Boolean,default:!1},numberOfFiles:{type:Number,default:0},showAutoLoad:{type:Boolean,default:!1}},data(){return{reloadClicked:!1,isContentMaximized:this.hasFiles}},computed:{_styles(){return{minHeight:"0px",height:"0px",padding:"0px",overflow:"hidden"}}},watch:{hasFiles(e){this.isContentMaximized=e}},mounted(){this.startAutoRefresh()},beforeDestroy(){this.stopAutoRefresh()},methods:{toggleContent(){this.reloadClicked?this.reloadClicked=!1:this.isContentMaximized=!this.isContentMaximized},showContent(){this.isContentMaximized=this.hasFiles},refreshClicked(){this.reloadClicked=!0,this.getdata()},getdata(){this.isContentMaximized&&this.$emit("getFiles")},startAutoRefresh(){this.autoRefreshInterval=setInterval(()=>{this.getdata()},15e3)},stopAutoRefresh(){this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=null)}}},r=o,n=(i("5e5c"),i("2877")),l=i("2c91"),d=i("3b73"),c=i("93dc"),u=i.n(c),h=Object(n["a"])(r,s,a,!1,null,"d1f2acf4",null);t["a"]=h.exports;u()(h,"components",{QSpace:l["a"],QExpansionItem:d["a"]})},a465:function(e,t,i){"use strict";i("babf")},a4c9:function(e,t,i){"use strict";i("91dd")},a797:function(e,t,i){"use strict";i("bf89")},a809:function(e,t,i){"use strict";function s(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}t["a"]=s},ae23:function(e,t,i){"use strict";i("4ddc")},afe7:function(e,t,i){},b467:function(e,t,i){"use strict";i("fa45")},b94d:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{style:{color:e._color},attrs:{id:"tabs"}},[e._l(e.tabs,(function(i){return t("Tab",{key:i.id,ref:"tab",refInFor:!0,attrs:{label:i.label,color:e.color,"is-full-width":e.isFullWidth,"is-active":i.value===e.value},on:{click:function(t){return e.handleClick(i)}}})})),t("div",{ref:"indicator",staticClass:"indicator"})],2)},a=[],o=i("8b55"),r={name:"Tabs",components:{Tab:o["a"]},props:{tabs:{type:Array,required:!0},value:{type:[String,Number],required:!0},color:{type:String,default:"primary"},isFullWidth:{type:Boolean,default:!1}},computed:{_color(){return`var(--${this.color})`}},watch:{value(){this.setIndicatorPosition()}},mounted(){this.setIndicatorPosition()},methods:{setIndicatorPosition(){const e=this.tabs.findIndex(e=>e.value===this.value),t=this.$refs.tab[e],i=t.$el.offsetLeft;this.$refs.indicator.style.left=i+"px";const s=t.$el.clientWidth;this.$refs.indicator.style.width=s+"px"},handleClick(e){e.value!==this.value&&this.$emit("input",e.value)}}},n=r,l=(i("40f9"),i("2877")),d=Object(l["a"])(n,s,a,!1,null,"48eb7e5e",null);t["a"]=d.exports},b9c9:function(e,t,i){"use strict";i("3ed6")},ba5a:function(e,t,i){"use strict";i("5042")},babf:function(e,t,i){},beae:function(e,t,i){"use strict";i("dccd")},bf89:function(e,t,i){},c24c:function(e,t,i){},c3ca:function(e,t,i){"use strict";i("0ad7")},c49c:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"state-wrapper"}},[t("div",{staticClass:"slow-up-down",attrs:{id:"illustration"}},[t("div",{attrs:{id:"shape-1"}}),t("div",{attrs:{id:"shape-2"}}),t("div",{attrs:{id:"shape-3"}},[t("BaseIcon",{staticClass:"icon",attrs:{name:e.icon,size:"80px"}})],1)]),t("div",{staticClass:"title-1"},[e._v(" "+e._s(e.title)+" ")]),t("div",{staticClass:"description"},[e._v(" "+e._s(e.description)+" ")]),e.action?t("BaseButton",{staticClass:"q-mt-lg",attrs:{icon:e.actionIcon,label:e.action},on:{click:function(t){return e.$emit("action")}}}):e._e()],1)},a=[],o={name:"StateWrapper",props:{icon:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},action:{type:String,default:""},actionIcon:{type:String,default:""}}},r=o,n=(i("2948"),i("2877")),l=Object(n["a"])(r,s,a,!1,null,"ba5412d8",null);t["a"]=l.exports},c559:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"sort",expression:"'sort'",modifiers:{bottom:!0}}],attrs:{"is-flat":"",icon:"mdi-sort","no-border":""}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("BaseScrollbar",{attrs:{height:e.scrollbarHeight,width:"240px"}},[t("div",{staticClass:"title-3 q-pa-md"},[e._v("Sort Criteria")]),e._l(e._columns,(function(i){return t("ListItem",{key:i.id,attrs:{icon:e.criteria===i.name?"eva-radio-button-on":"eva-radio-button-off","is-selected":e.criteria===i.name,label:i.label},on:{click:function(t){return e.updateCriteria(i.name)}}})}))],2),t("div",{staticClass:"title-3 q-pa-md"},[e._v("Sort Order")]),t("ListItem",{attrs:{icon:"ASC"===e.order?"eva-radio-button-on":"eva-radio-button-off","is-selected":"ASC"===e.order,label:"Ascending"},on:{click:function(t){return e.updateOrder("ASC")}}}),t("ListItem",{staticClass:"q-mb-sm",attrs:{icon:"DESC"===e.order?"eva-radio-button-on":"eva-radio-button-off","is-selected":"DESC"===e.order,label:"Descending"},on:{click:function(t){return e.updateOrder("DESC")}}})],1)],1)},a=[],o=i("cade"),r={name:"SortItems",components:{ListItem:o["a"]},props:{columns:{type:Array,required:!0},criteria:{type:String,required:!0},order:{type:String,required:!0}},computed:{_columns(){return[{id:this.$nano.id(),label:"None",name:""},...this.columns.filter(e=>e.isSortable)]},scrollbarHeight(){const e=54*this._columns.length;return e>216?"224px":e+"px"}},methods:{updateCriteria(e){this.$emit("update:criteria",e)},updateOrder(e){this.$emit("update:order",e)}}},n=r,l=i("2877"),d=i("4e73"),c=i("93dc"),u=i.n(c),h=Object(l["a"])(n,s,a,!1,null,"12f6a366",null);t["a"]=h.exports;u()(h,"components",{QMenu:d["a"]})},c589:function(e,t,i){},c91b:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t(e.component,{tag:"component",attrs:{mode:e.mode,"full-file-sheet":e.fullFileSheet,"hide-file-sheet":e.hideFileSheet},on:{minimumFileSheet:e.minimumFileSheet}})},a=[],o=i("7ee8"),r=i("34bc"),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"entity-browse"}},[t("Portal",{attrs:{to:"primary-action"}},[e.showUploadFiles?t("BaseButton",{staticClass:"q-ml-md",attrs:{icon:"eva-upload",label:"upload files"},on:{click:e.uploadFiles}}):e._e()],1),t("keep-alive",[t("Portal",{attrs:{to:"action-bar"}},[e.isLoading?e._e():t("ItemActions",{attrs:{entity:"entity","hide-actions":["group"],columns:e.repositoryColumns,"filter-columns":e.repositoryColumns,"group-by":e.groupBy,order:e.sortBy.order,"filter-by":e.filterBy,"selected-filter":e.breadcrumbs,"active-view":e.activeView,criteria:e.sortBy.criteria,"thumbnail-view":"FILE"===e.entityType,"search-content":!0,"content-search":e.contentSearch,"repository-fields":!0,"workflow-initiate":!!e.workflows.length,"initiate-access":e.initiateAccess,"goto-inbox":!!e.workflows.length,module:"repository","module-id":e.repositoryId,"download-all":e.itemSelected,"simple-search-applyed":e.simpleSearchApplyed,"visible-download":e.download,"visible-print":e.print,"visible-email":e.email,"visible-delete":e.deleteFile},on:{"update:columns":function(t){e.repositoryColumns=t},"update:groupBy":function(t){e.groupBy=t},"update:group-by":function(t){e.groupBy=t},"update:order":function(t){return e.$set(e.sortBy,"order",t)},"update:filterBy":function(t){e.filterBy=t},"update:filter-by":function(t){e.filterBy=t},"update:activeView":function(t){e.activeView=t},"update:active-view":function(t){e.activeView=t},"update:criteria":function(t){return e.$set(e.sortBy,"criteria",t)},"update:contentSearch":function(t){e.contentSearch=t},"update:content-search":function(t){e.contentSearch=t},"update:simpleSearchApplyed":function(t){e.simpleSearchApplyed=t},"update:simple-search-applyed":function(t){e.simpleSearchApplyed=t},update:e.applyFilter,refresh:e.refreshData,search:e.searchRow,viewColumns:e.saveViewColumns,initiate:e.initiateRequest,inbox:e.gotoInbox,export:e.export_Data,downloadAll:e.downloadAll,printAll:e.printAll,emailAll:e.emailAll,deleteFileAction:e.deleteFileListAll}})],1)],1),e.isLoading?e._e():t("div",{staticClass:"content"},[t("ItemActionChips",{attrs:{"sort-by":e.sortBy,columns:e.columns,"group-by":e.groupBy,"filter-by":e.filterBy,"content-search":e.contentSearch,"simple-search-applyed":e.simpleSearchApplyed},on:{clearSortBy:e.clearSortBy,clearGroupBy:e.clearGroupBy,clearFilterBy:e.clearFilterBy,clearContentSearch:e.clearContentSearch}}),t("div",{staticClass:"col-12"},[t("div",[t("Breadcrumbs",{attrs:{breadcrumbs:e.breadcrumbs},on:{click:e.handleBreadcrumbClick,reset:e.homeRepository}})],1),t("q-space")],1),"GRID"===e.activeView?t("EntityGrid",{attrs:{mode:e.mode,columns:e.columns,entities:e._entities,"hide-file-sheet":e.hideFileSheet},on:{select:e.openRepository,view:e.openFile,more:e.showEntityDetails,delete:e.showDeleteConfirmation,restore:e.showRestoreConfirmation,minimumFileSheet:e.minimumFileSheet,revise:e.initiateRequest}}):e._e(),"LIST"===e.activeView?t("EntityList",{attrs:{mode:e.mode,entities:e._entitiesFile,columns:e.columns,"repository-id":e.repositoryId,"workflow-initiate":!!e.workflows.length,"has-meta-data-edit":e.hasMetaDataEdit,"select-all":e.overallSelectAll,"visible-download":e.download,"visible-print":e.print,"visible-email":e.email,checkbox:e.checkbox,"visible-delete":e.deleteFile},on:{select:e.openRepository,view:e.openFile,more:e.showEntityDetails,delete:e.showDeleteConfirmation,restore:e.showRestoreConfirmation,minimumFileSheet:e.minimumFileSheet,revise:e.initiateRequest,download:e.fileDownload,print:e.filePrint,email:e.emailShare,showCheckin:e.showCheckinUploadFile,openMetaDataEdit:e.openMetaDataEdit,"update-selected-all":e.updateSelectAll,deleteFile:e.deleteFileList}}):e._e(),"THUMBNAIL"===e.activeView?t("EntityThumbnail",{attrs:{mode:e.mode,files:e._entitiesFile,columns:e.columns,"repository-id":e.repositoryId},on:{select:e.openRepository,view:e.openFile,more:e.showEntityDetails,delete:e.showDeleteConfirmation,restore:e.showRestoreConfirmation,minimumFileSheet:e.minimumFileSheet}}):e._e()],1),e.isLoading?e._e():t("Pagination",{attrs:{"total-items":e.totalItems,"current-page":e.currentPage,"items-per-page":e.itemsPerPage,"file-sheet":e.hideFileSheet},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:itemsPerPage":function(t){e.itemsPerPage=t},"update:items-per-page":function(t){e.itemsPerPage=t},loadAll:e.loadAll}}),e.isEntityDetailsVisible?t("EntityDetails",{attrs:{columns:e.columns,entity:e.selectedEntity,"entity-type":e.entityType},model:{value:e.isEntityDetailsVisible,callback:function(t){e.isEntityDetailsVisible=t},expression:"isEntityDetailsVisible"}}):e._e(),t("ConfirmDeleteEntity",{attrs:{entity:e.selectedEntity,"entity-list":e.selectedDelete,"entity-type":e.entityType},on:{delete:function(t){e.selectedDelete.length?e.deleteFiles():e.updateEntity()}},model:{value:e.isDeleteConfirmationVisible,callback:function(t){e.isDeleteConfirmationVisible=t},expression:"isDeleteConfirmationVisible"}}),t("ConfirmRestoreEntity",{attrs:{entity:e.selectedEntity,"entity-type":e.entityType},on:{restore:e.updateEntity},model:{value:e.isRestoreConfirmationVisible,callback:function(t){e.isRestoreConfirmationVisible=t},expression:"isRestoreConfirmationVisible"}}),t("FileSheet",{attrs:{file:e.selectedFile,"repository-field":e.repositoryField,options:e.options},on:{"show-files":e.showFilesSheet,input:e.refreshData},model:{value:e.isFileSheetVisible,callback:function(t){e.isFileSheetVisible=t},expression:"isFileSheetVisible"}}),t("FileList",{attrs:{"file-list":e.entities.length?e.entities[0].value:[],"selected-files":e.selectedFile},on:{select:e.openFile},model:{value:e.isFilesSheetVisible,callback:function(t){e.isFilesSheetVisible=t},expression:"isFilesSheetVisible"}}),t("FilePassword",{attrs:{value:e.showFilePasswordModal,"repository-id":e.repositoryId,"item-id":e.selectedFile.id?e.selectedFile.id:0},on:{close:e.openFileSheet,closeModal:function(t){e.showFilePasswordModal=!1}}}),t("InitiateProcess",{attrs:{"item-file":e.selectedFile,"repository-id":Number(e.repositoryId),"repository-details":e.repositoryDetails,"repository-field":e.repositoryField,workflow:e.workflows.length?e.workflows[0]:{}},on:{"update:itemFile":function(t){e.selectedFile=t},"update:item-file":function(t){e.selectedFile=t}},model:{value:e.initiateProcessSheet,callback:function(t){e.initiateProcessSheet=t},expression:"initiateProcessSheet"}}),t("EmailSharing",{attrs:{"repository-id":Number(e.repositoryId),"file-list":e.selectedFileList},on:{"update:fileList":function(t){e.selectedFileList=t},"update:file-list":function(t){e.selectedFileList=t},selecting:e.emailSave},model:{value:e.emailSharingSheet,callback:function(t){e.emailSharingSheet=t},expression:"emailSharingSheet"}}),t("Sheet",{attrs:{width:"470px","has-footer":""},on:{input:function(t){return e.$emit("input",!1)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Upload File ")]},proxy:!0},{key:"default",fn:function(){return[e.filesToUpload.length?e._e():t("Dropzone",{attrs:{"show-workspace-repository":!1,"workspace-id":Number(e.$route.query.workspaceId),"repository-id":Number(e.repositoryId),"has-multiple":!1},on:{upload:e.queueFilesForUpload}}),e.filesError?t("FormFieldError",{staticClass:"q-mx-md",attrs:{error:"Please upload file"}}):e._e(),e.filesToUpload.length?t("UploadingFileList",{attrs:{files:e.filesToUpload,"show-progress":e.showProgress,"show-delete-btn":e.showDeleteBtn},on:{delete:e.deleteUploadFile}}):e._e(),t("div",{staticClass:"q-px-md"},[t("ValidationObserver",{ref:"checkin"},[t("ValidationProvider",{attrs:{name:"comment",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("TextAreaField",{staticClass:"q-mb-lg",attrs:{label:"Purpose for checking in","is-mandatory":"",error:i[0]},model:{value:e.comments,callback:function(t){e.comments=t},expression:"comments"}})]}}])})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:e.reset}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.uploadFile}})]},proxy:!0}]),model:{value:e.showCheckinModal,callback:function(t){e.showCheckinModal=t},expression:"showCheckinModal"}}),t("Modal",{attrs:{"has-footer":"",width:"440px",height:"390px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.selectColumn.label)+" Edit")]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"form"},[t("TextField",{staticClass:"q-mb-lg",attrs:{value:e.selectRow[e.selectColumn.name],label:"Old value","is-readonly":""}}),t("RepositoryField",{attrs:{field:e.selectField,"repository-id":e.repositoryId,label:"New Value"},model:{value:e.newValue,callback:function(t){e.newValue=t},expression:"newValue"}}),e.newValueError?t("FormFieldError",{attrs:{error:"New value should not be empty"}}):e._e()],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.saveMetaData}})]},proxy:!0}]),model:{value:e.openMetaDataEditModal,callback:function(t){e.openMetaDataEditModal=t},expression:"openMetaDataEditModal"}})],1)},l=[],d=(i("14d9"),i("caad"),i("1b0d")),c=i("381b"),u=i("2b88"),h=i("b6d2"),m=i("064c"),p=function(){var e=this,t=e._self._c;return t("ItemGrid",{attrs:{columns:e.columns,items:e.entities,mode:e.mode,breadcrumbs:!0},on:{select:e.handleSelect,view:e.handleOpenFile,edit:e.handleEdit,delete:e.handleDelete,restore:e.handleRestore,more:e.handleMore},scopedSlots:e._u([{key:"items",fn:function({items:i}){return[t("div",{attrs:{id:"entity-grid"}},[t("div",{staticClass:"row q-col-gutter-md"},[t("div",{class:e.showFileSheet?"col-md-6 col-lg-6":"col-md-12 col-lg-12"},[t("div",{staticClass:"row q-col-gutter-md"},e._l(i,(function(s){return t("div",{key:s.id,class:e.showFileSheet?"col-md-6 col-lg-4":"col-md-3 col-lg-2"},[t("div",{staticClass:"entity"},["FOLDER"===s.type?[t("div",{on:{click:function(t){return e.handleSelect(i,s.id)}}},[t("div",{staticClass:"row items-center"},[t("BaseIcon",{attrs:{name:"eva-folder",color:"amber",size:"36px"}}),t("q-space")],1),t("div",{staticClass:"col q-mt-md"},[t("div",{staticClass:"name ellipsis"},[e._v(e._s(s.name))]),t("div",{staticClass:"stats"},[t("div",{staticClass:"stat"},[e._v("Level "+e._s(s.level))]),t("BaseIcon",{staticClass:"icon",attrs:{name:"mdi-circle-small","inherit-color":""}}),t("div",{staticClass:"stat"},[e._v(e._s(s.files)+" Files")]),t("BaseIcon",{staticClass:"icon",attrs:{name:"mdi-circle-small","inherit-color":""}}),t("div",{staticClass:"stat"},[e._v(e._s(s.size))])],1)])])]:e._e(),"FILE"===s.type?[t("div",{on:{click:function(t){return e.handleOpenFile(s.id,s)}}},[t("div",{staticClass:"row items-center"},[t("FileIcon",{staticClass:"file-icon",attrs:{"mime-type":e.getFileType(s.name)}}),t("q-space"),s.isPassword?t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Protected",expression:"'Protected'",modifiers:{top:!0}}],staticClass:"icon",attrs:{name:"eva-lock",color:"red"}}):e._e(),1===s.maxVersion?t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Primary Document",expression:"'Primary Document'",modifiers:{top:!0}}],staticClass:"icon",attrs:{name:"mdi-tag",color:"primary"}}):e._e(),0===s.maxVersion?t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"V"+s.version,expression:"'V' + item.version",modifiers:{top:!0}}],staticClass:"icon",attrs:{name:"mdi-tag-outline",color:"secondary"}}):e._e()],1),t("div",{staticClass:"col q-mt-md"},[t("div",{staticClass:"name ellipsis"},[e._v(e._s(s.name))]),t("div",{staticClass:"stats ellipsis"},[t("div",{staticClass:"stat"},[e._v(e._s(s.createdBy))]),t("BaseIcon",{staticClass:"icon",attrs:{name:"mdi-circle-small","inherit-color":""}}),t("div",{staticClass:"stat"},[e._v(e._s(s.size))])],1)])])]:e._e()],2)])})),0)]),e._e()])])]}}])})},f=[],v=i("0412"),y=i("fa1f"),b=i("dd90"),g={name:"EntityGrid",components:{ItemGrid:v["a"],FileIcon:y["a"]},props:{columns:{type:Array,required:!0},entities:{type:Array,required:!0},mode:{type:String,required:!0},hideFileSheet:{type:Boolean,default:!1}},data(){return{gridType:"",selectedFile:{},showFileSheet:!1}},computed:{fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();return Object(b["d"])(t)?"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.itemId}&type=2`:"https://trial.ezofis.com"!==e||Object(b["c"])(t)?"https://app.ezofis.com"===e?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.itemId}&type=2`:`${e}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.itemId}&type=2&filename=${this.selectedFile.name}`:`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.itemId}&type=2&filename=${this.selectedFile.name}`:Object(b["b"])(t)||"http://52.172.32.88"!==e?`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.itemId}/2`:`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.itemId}&type=2&filename=${this.selectedFile.name}`}return""}},watch:{entities(){},hideFileSheet(){this.hideFileSheet||(this.showFileSheet=!1)}},methods:{handleSelect(e,t){this.$emit("select",t,e)},handleEdit(e){this.$emit("edit",e)},handleDelete(e){this.$emit("delete",e)},handleRestore(e){this.$emit("restore",e)},handleMore(e){this.$emit("more",e)},getFileType(e){return e.split(".").reverse()[0]},handleOpenFile(e,t){t&&(this.selectedFile={},this.showFileSheet=!0,this.selectedFile={name:t.name,size:t.size,createdAt:t.createdAt,createdBy:t.createdBy,id:t.id,type:t.name.split(".")[1],isPassword:t.isPassword,passwordCreatedBy:t.passwordCreatedBy},this.$emit("minimumFileSheet",this.selectedFile))},handleOpenFullFileSheet(e){this.$emit("view",e)}}},w=g,k=(i("b467"),i("2877")),S=i("2c91"),C=i("93dc"),_=i.n(C),I=Object(k["a"])(w,p,f,!1,null,"1f4b037a",null),x=I.exports;_()(I,"components",{QSpace:S["a"]});var $=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"entityList"}},[t("ItemList",{attrs:{columns:e.columns,items:e.entities,mode:e.mode,checkbox:e.checkbox,"repository-id":e.repositoryId,"has-meta-data-edit":e.hasMetaDataEdit,breadcrumbs:!0,repository:!0},on:{select:e.handleSelect,view:e.handleOpenFile,edit:e.handleEdit,delete:e.handleDelete,restore:e.handleRestore,more:e.handleMore,showThumbnail:e.showFileThumbnail,hideThumbnail:e.hideThumbnail,openMetaDataEdit:e.openMetaDataEdit,"update-selected-all":e.updateSelectAll},scopedSlots:e._u([{key:"avatar",fn:function({item:i}){return["FOLDER"===i.type?t("BaseIcon",{attrs:{name:"eva-folder",color:"amber"}}):e._e(),"FILE"===i.type?t("FileIcon",{staticClass:"file-icon col-auto",staticStyle:{height:"25px",width:"25px"},attrs:{"mime-type":e.getFileType(i.name)},on:{click:function(t){return t.stopPropagation(),e.handleOpenFile(i.id)}}}):e._e(),i.isPassword?t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Protected",expression:"'Protected'",modifiers:{top:!0}}],staticClass:"icon col-auto",attrs:{name:"eva-lock",color:"red"}}):e._e(),1===i.maxVersion?t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Primary Document",expression:"'Primary Document'",modifiers:{top:!0}}],staticClass:"icon",attrs:{name:"mdi-tag",color:"primary"}}):e._e(),0===i.maxVersion?t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"V"+i.version,expression:"'V' + item.version",modifiers:{top:!0}}],staticClass:"icon",attrs:{name:"mdi-tag-outline",color:"secondary"}}):e._e()]}},{key:"revise",fn:function({item:i}){return[i.isNewVersion&&"Approved"===i.stageStatus?t("div",{on:{click:function(t){return t.stopPropagation(),e.$emit("revise",i.id)}}},[i.isNewVersion?[t("q-chip",{staticClass:"chips brown-hover",attrs:{outline:"",color:"brown"}},[e._v(" SUBMIT REVISE ")])]:e._e()],2):e._e()]}},{key:"status",fn:function({item:i}){return[i.stageStatus?t("div",["Approved"===i.stageStatus?[t("q-chip",{staticClass:"chips green-hover",attrs:{outline:"",color:"green"}},[t("q-avatar",{attrs:{icon:"mdi-check",color:"green","text-color":"white"}}),e._v(" "+e._s(i.stageStatus)+" ")],1)]:"Rejected"===i.stageStatus?[t("q-chip",{staticClass:"chips red-hover",attrs:{outline:"",color:"red"}},[t("q-avatar",{attrs:{icon:"mdi-close",color:"red","text-color":"white"}}),e._v(" "+e._s(i.stageStatus)+" ")],1)]:[t("q-chip",{staticClass:"chips orange-hover ellipsis",attrs:{outline:"",color:"orange"}},[t("q-avatar",{attrs:{icon:"mdi-information-variant",color:"orange","text-color":"white"}}),e._v(" "+e._s(i.stageStatus)+" ")],1)]],2):e._e()]}},{key:"actions",fn:function({item:i}){return[i.checkinStatus&&1!==i.checkinStatus?e._e():t("div",{staticClass:"row",style:"width: "+e.calcButtonWidth},[e.visibleDownload?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"download",expression:"'download'",modifiers:{top:!0}}],staticClass:"icon",attrs:{icon:"mdi-download-outline",color:"primary","is-flat":"","no-border":""},on:{click:function(t){return t.stopPropagation(),e.$emit("download",i.id)}}}):e._e(),e.visiblePrint?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"print",expression:"'print'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"eva-printer-outline",color:"primary"},on:{click:function(t){return t.stopPropagation(),e.$emit("print",i.id)}}}):e._e(),e.visibleEmail?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Email Sharing",expression:"'Email Sharing'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-email-outline",color:"primary"},on:{click:function(t){return t.stopPropagation(),e.$emit("email",i)}}}):e._e(),e.visibleDelete?t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline",color:"primary"},on:{click:function(t){return t.stopPropagation(),e.$emit("deleteFile",i.id)}}}):e._e()],1),2===i.checkinStatus&&i.checkinBy===e.$store.state.session.email?t("div",{staticClass:"row"},[t("q-chip",{staticClass:"chips orange-hover ellipsis",attrs:{outline:"",color:"orange",clickable:""},on:{click:function(t){return e.showCheckinUploadFile(i)}}},[t("q-avatar",{attrs:{icon:"mdi-file-upload-outline",color:"orange","text-color":"white"}}),e._v(" Checkin ")],1)],1):e._e()]}},{key:"thumbnail",fn:function({item:i}){return[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showThumbnail&&e.itemId===i.id&&e.repositoryId,expression:"showThumbnail && itemId === item.id && repositoryId"}],staticClass:"shadow-3 fixed-left thumb-img",style:{top:e.mouseY,left:e.mouseX}},[t("img",{directives:[{name:"show",rawName:"v-show",value:e.isLoaded,expression:"isLoaded"}],attrs:{src:e.thumbnailLink},on:{load:e.onImgLoad}}),e.isLoaded?e._e():t("q-spinner",{staticClass:"spinner",attrs:{color:"primary-3",size:"48px"}})],1)]}}])})],1)},B=[],T=i("f92f"),F={name:"EntityList",components:{ItemList:T["a"],FileIcon:y["a"]},props:{columns:{type:Array,required:!0},entities:{type:Array,required:!0},mode:{type:String,required:!0},repositoryId:{type:String,required:!0},hasMetaDataEdit:{type:Boolean,required:!1},visibleDownload:{type:Boolean,default:!1},visiblePrint:{type:Boolean,default:!1},visibleEmail:{type:Boolean,default:!1},checkbox:{type:Boolean,default:!1},visibleDelete:{type:Boolean,default:!1}},data(){return{showThumbnail:!1,thumbnailLink:"",itemId:"",mouseX:"",mouseY:"",isLoaded:!1}},computed:{calcButtonWidth(){let e,t=0;return this.visibleDownload&&(t+=1),this.visibleEmail&&(t+=1),this.visiblePrint&&(t+=1),this.visibleDelete&&(t+=1),1===t&&(e="37px"),2===t&&(e="85px"),3===t&&(e="110px"),4===t&&(e="145px"),e}},methods:{handleSelect(e,t){"FILE"===t[0].type?this.$emit("view",e):this.$emit("select",e,t)},handleEdit(e){this.$emit("edit",e)},handleDelete(e){this.$emit("delete",e)},handleRestore(e){this.$emit("restore",e)},handleMore(e){this.$emit("more",e)},getFileType(e){return e.split(".").reverse()[0]},handleOpenFile(e){this.$emit("view",e)},showFileThumbnail(e,t){let i=this.$q.screen.height;i-t.pageY<200?this.mouseY=i-200-50+"px":this.mouseY=t.pageY+20+"px",this.mouseX="400px",this.itemId=e.id,this.thumbnailLink=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.repositoryId}/${e.id}/1`,this.showThumbnail=!0},hideThumbnail(){this.thumbnailLink="",this.showThumbnail=!1,this.isLoaded=!1},onImgLoad(){this.isLoaded=!0},showCheckinUploadFile(e){this.$emit("showCheckin",e)},openMetaDataEdit(e,t){this.$emit("openMetaDataEdit",e,t)},updateSelectAll(e){this.$emit("update-selected-all",e)}}},A=F,L=(i("8b81"),i("6d23"),i("b047")),D=i("cb32"),E=i("0d59"),O=Object(k["a"])(A,$,B,!1,null,"3feda893",null),M=O.exports;_()(O,"components",{QChip:L["a"],QAvatar:D["a"],QSpinner:E["a"]});var q=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"entity-thumbnail"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 300px)"}},e._l(e.files,(function({key:i,value:s,data:a}){return t("div",{key:s},[i?t("div",{staticClass:"group-by"},[t("span",{staticClass:"key"},[e._v(e._s(i)+": ")]),t("span",[e._v(e._s(s)+" ")]),t("span",[e._v("("+e._s(a.length)+")")])]):e._e(),t("div",{staticClass:"row q-col-gutter-md"},e._l(a,(function(i){return t("div",{key:i.id,staticClass:"col-md-3 col-lg-2"},[t("div",{staticClass:"file",on:{click:function(t){return e.handleOpenFile(i.id,i)}}},[t("div",{staticClass:"thumbnail"},[t("img",{attrs:{src:e.showThumbnail(i),alt:"thumnail"}})]),t("div",{staticClass:"col row items-center q-mt-md"},[t("div",{staticClass:"col q-mr-sm"},[t("div",{staticClass:"name"},[e._v(e._s(i.name))]),t("div",{staticClass:"stats"},[t("div",{staticClass:"stat"},[e._v(e._s(i.createdBy))]),t("BaseIcon",{staticClass:"icon",attrs:{name:"mdi-circle-small","inherit-color":""}}),t("div",{staticClass:"stat"},[e._v(e._s(i.size))])],1)]),i.isPassword?t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-lock",color:"red"}}):e._e()],1)])])})),0)])})),0)],1)},P=[],V={name:"EntityThumbnail",props:{columns:{type:Array,required:!0},files:{type:Array,required:!0},mode:{type:String,required:!0},repositoryId:{type:String,required:!0}},data(){return{selectedFile:{},showFileSheet:!1}},methods:{handleSelect(e){this.$emit("select",e)},handleDelete(e){this.$emit("delete",e)},handleRestore(e){this.$emit("restore",e)},handleMore(e){this.$emit("more",e)},showThumbnail(e){return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.repositoryId}/${e.id}/1`},handleOpenFile(e,t){t&&this.$emit("view",e)}}},N=V,R=(i("8bf7"),Object(k["a"])(N,q,P,!1,null,"b579b2b0",null)),z=R.exports,j=function(){var e=this,t=e._self._c;return t("ItemDetails",{attrs:{value:e.value,overview:e.overview},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Entity Details")]},proxy:!0}])})},G=[],U=i("9290"),H={name:"EntityDetails",components:{ItemDetails:U["a"]},props:{value:{type:Boolean,default:!1},columns:{type:Array,required:!0},entity:{type:Object,required:!0}},data(){return{showAllEntityUsers:!1}},computed:{overview(){return this.columns.map(e=>({id:e.id,name:e.name,label:e.label,value:this.entity[e.name]}))}},methods:{handleInput(e){this.$emit("input",e)}}},W=H,Y=Object(k["a"])(W,j,G,!1,null,"350aca68",null),J=Y.exports,Q=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"eva-trash-2-outline","icon-color":"red"},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Delete "+e._s("FOLDER"===e.entityType?"Folder":"File")+"? ")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[1===e.entityList.length?[t("p",[e._v(" Are you sure you want to delete the File "),t("span",[e._v(e._s("FOLDER"===e.entityType?"Folder":"File"))]),t("span",{staticClass:"font-bold"},[e._v('"'+e._s(e.entityList[0].name)+'" ?')]),"FOLDER"===e.entityType?t("span",[e._v(" If you delete this folder, all the files and folders inside it will also be deleted. ")]):e._e()])]:e.entityList.length>1?[t("p",[e._v(" Are you sure you want to delete the "),t("span",[e._v(e._s("FOLDER"===e.entityType?"Folder":"File"))]),t("span",{staticClass:"font-bold"},[e._v('"'+e._s(e.entityList.length)+'" Files ?')]),"FOLDER"===e.entityType?t("span",[e._v(" If you delete this folder, all the files and folders inside it will also be deleted. ")]):e._e()])]:[t("p",[e._v(" Are you sure you want to delete the "),t("span",[e._v(e._s("FOLDER"===e.entityType?"Folder":"File"))]),t("span",{staticClass:"font-bold"},[e._v('"'+e._s(e.entity.name)+'" ?')]),"FOLDER"===e.entityType?t("span",[e._v(" If you delete this folder, all the files and folders inside it will also be deleted. ")]):e._e()])],t("p",[e._v(" You can always restore the deleted "+e._s("FOLDER"===e.entityType?"Folder":"File")+" from the trash page. ")])],2)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"red"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"red"},on:{click:e.handleYes}})]},proxy:!0}])})},K=[],X=i("1c54"),Z={name:"ConfirmDeleteEntity",components:{Confirm:X["a"]},props:{value:{type:Boolean,required:!0},entity:{type:Object,default:()=>{}},entityType:{type:String,required:!0},entityList:{type:Array,default:()=>[]}},methods:{handleInput(e){this.$emit("input",e)},handleNo(){this.$emit("input",!1)},handleYes(){this.$emit("input",!1),this.$emit("delete",{isDeleted:!0})}}},ee=Z,te=Object(k["a"])(ee,Q,K,!1,null,"3a1ce37a",null),ie=te.exports,se=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"eva-trash-2-outline","icon-color":"orange"},on:{input:e.handleInput},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Restore"+e._s("FOLDER"===e.entityType?"Folder":"File")+"? ")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"q-py-md"},[e._v(" Are you sure you want to restore the "+e._s("FOLDER"===e.entityType?"Folder":"File")+" "),t("span",{staticClass:"font-bold"},[e._v('"'+e._s(e.entity.name)+'" ?')]),"FOLDER"===e.entityType?t("span",[e._v(" If you restore this folder, all the files and folders inside it will also be restored. ")]):e._e(),t("p",[e._v(" You can always delete the restored "+e._s("FOLDER"===e.entityType?"Folder":"File")+" from the browse page. ")])])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"orange"},on:{click:e.handleNo}}),t("BaseButton",{attrs:{label:"yes",color:"orange"},on:{click:e.handleYes}})]},proxy:!0}])})},ae=[],oe={name:"ConfirmRestoreEntity",components:{Confirm:X["a"]},props:{value:{type:Boolean,required:!0},entity:{type:Object,required:!0},entityType:{type:String,required:!0}},methods:{handleInput(e){this.$emit("input",e)},handleNo(){this.$emit("input",!1)},handleYes(){this.$emit("input",!1),this.$emit("restore",{isDeleted:!1})}}},re=oe,ne=Object(k["a"])(re,se,ae,!1,null,"010475b9",null),le=ne.exports,de=i("7104"),ce=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,position:"left",width:"360px"},on:{input:e.closeSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Files ")]},proxy:!0}])},[t("div",{attrs:{id:"file-sheet"}},e._l(e.fileList,(function(i){return t("FileListItem",{key:i.id,staticClass:"q-pb-sm",attrs:{file:i,"mini-mode":"","is-selected":e.selectedFiles.id===i.id},on:{click:function(t){return e.$emit("select",i.id)}}})})),1)])},ue=[],he=i("381e"),me=function(){var e=this,t=e._self._c;return t("div",e._g({class:{"is-selected":e.isSelected,"mini-mode":e.miniMode},attrs:{id:"file-list-item"}},e.$listeners),[t("img",{staticClass:"thumbnail",attrs:{src:e.showThumbnail,alt:"thumbnail"}}),e._e(),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"title"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.type}}),e._v(" "+e._s(e.file.name)+" "),e._t("info")],2),t("div",{staticClass:"meta"},[t("div",[e._v(e._s(e.createdAt))]),e.file.createdBy&&!e.miniMode?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.file.createdBy))])]:e._e(),e.file.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.size))])]:e._e()],2)])])},pe=[],fe=i("a7d2"),ve={name:"FileListItem",components:{FileIcon:y["a"]},props:{file:{type:Object,required:!0},isSelected:{type:Boolean,default:!1},miniMode:{type:Boolean,default:!1}},computed:{type(){return this.file.name.split(".").reverse()[0].slice(0,4)},createdAt(){return this.$day.format(this.file.createdAt)},size(){return Object(fe["a"])(this.file.size)},showThumbnail(){return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.file.repositoryId}/${this.file.id}/1`}}},ye=ve,be=(i("3b8d"),Object(k["a"])(ye,me,pe,!1,null,"cff06c02",null)),ge=be.exports,we={name:"FileSheet",components:{Sheet:he["a"],FileListItem:ge},props:{value:{type:Boolean,default:!1},fileList:{type:Array,required:!0},selectedFiles:{type:Object,required:!0}},data(){return{isContentMaximized:!0}},computed:{_styles(){return{minHeight:"0px",height:"0px",padding:"0px",overflow:"hidden"}}},methods:{closeSheet(){this.$emit("input",!1)},toggleContent(){this.isContentMaximized=!this.isContentMaximized}}},ke=we,Se=(i("4c7b"),Object(k["a"])(ke,ce,ue,!1,null,"21ba715e",null)),Ce=Se.exports,_e=i("8a9e"),Ie=i("4904"),xe=function(){var e=this,t=e._self._c;return t("Confirm",{attrs:{value:e.value,icon:"mdi-lock-outline","icon-color":"primary",width:"450px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Password")]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"form"},[t("ValidationProvider",{attrs:{name:"field",rules:{required:!0,password:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("PasswordField",{staticClass:"q-my-lg",attrs:{label:"Enter Password","is-mandatory":"",error:i[0]},on:{enter:e.validatePassword},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.validatePassword}})]},proxy:!0}])})},$e=[],Be=i("7bb1"),Te=i("8bc3"),Fe={name:"FilePassword",components:{Confirm:X["a"],ValidationObserver:Be["a"],ValidationProvider:Be["b"],PasswordField:Te["a"]},props:{value:{type:Boolean,default:!1},repositoryId:{type:[Number,String],required:!0},itemId:{type:[Number,String],required:!0}},data(){return{password:""}},methods:{closeModal(){this.$emit("closeModal",!1)},async validatePassword(){this.$store.commit("showLoadingBar");const{error:e,payload:t}=await d["k"].validatePassword({repositoryId:this.repositoryId,itemId:this.itemId,password:this.password});this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):(console.log(t),200===t.status?this.$emit("close",!1):404===t.status&&this.$alert.success("password is wrong"),this.password="")}}},Ae=Fe,Le=Object(k["a"])(Ae,xe,$e,!1,null,"8d696454",null),De=Le.exports,Ee=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"initiate-process"}},[t("Sheet",{attrs:{value:e.value,"no-padding":"",width:e.formWidth,"has-footer":!0},on:{input:e.closeInitiateProcessSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.headerTitle)+" ")]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:e.isMaximized?"eva-collapse":"eva-expand"},on:{click:e.toggleWidth}})]},proxy:!0},{key:"footer",fn:function(){return[e.actions.length?t("div",{staticClass:"footer row"},[e.isGenerateNumber?t("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Generate Number",color:"secondary"},on:{click:function(t){return e.validateRequest("Generate Number")}}}):e._e(),e.isGenerateNumber?e._e():[e._l(e.actions,(function(i){return[t("BaseButton",{key:i,staticClass:"q-ml-md",attrs:{label:i},on:{click:function(t){return e.validateRequest(i)}}})]}))]],2):e._e()]},proxy:!0}])},[t("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[e.formId&&e.form?t("div",{staticClass:"col",attrs:{id:"form-view"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 115px)"}},[t("RenderForm",{attrs:{"form-id":e.formId,panels:e.panels,"secondary-panels":e.secondaryPanels,"form-settings":e.formSettings,"form-model":e.formModel,"save-action":e.saveAction,"workflow-form-model":e.workflowFormModel,"workflow-model":e.workflowModel,"is-readonly":e.formEditAccess,"form-edit-controls":e.formEditControls,"readonly-controls":e.readonlyControls,"form-visibility-access":e.formVisibilityAccess,"form-secure-controls":e.formSecureControls,"enable-controls":e._enableControls,"check-list":e.checkList},on:{"update:saveAction":function(t){e.saveAction=t},"update:save-action":function(t){e.saveAction=t},"update:workflowFormModel":function(t){e.workflowFormModel=t},"update:workflow-form-model":function(t){e.workflowFormModel=t},"update:workflowModel":function(t){e.workflowModel=t},"update:workflow-model":function(t){e.workflowModel=t},"update:checkList":function(t){e.checkList=t},"update:check-list":function(t){e.checkList=t}}}),e.signList.length?t("div",{staticClass:"q-pa-md",attrs:{id:"approvalSignature"}},[t("div",{staticClass:"title q-mb-sm"},[e._v("Approval Signature")]),t("BaseSeparator",{staticClass:"q-my-sm"}),t("div",{staticClass:"row"},[e._l(e.signList,(function(i){return[t("div",{key:i.id,staticClass:"col-3 q-mb-sm"},[t("img",{staticClass:"imgCenter col",attrs:{src:e.signLink(i.id)}}),t("div",{staticClass:"text row"},[t("span",{staticClass:"col-12 text-bold"},[e._v(e._s(i.stage))]),t("span",{staticClass:"col-12"},[e._v(e._s(i.createdByEmail))]),t("span",{staticClass:"col-12"},[e._v(e._s(e.$day.format(i.createdAt)))])])])]}))],2)],1):e._e(),e.userSignature?t("SignatureField",{staticClass:"q-pa-md",attrs:{label:"Signature"},model:{value:e.signImg,callback:function(t){e.signImg=t},expression:"signImg"}}):e._e()],1)],1):e._e(),e.isGenerateNumber?e._e():t("div",{staticClass:"col-auto q-mr-sm leftBorder"},[e._l(e.tabs,(function(i){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary"},on:{click:function(t){return e.showLinks(i.value)}}},[i.count?t("span",{staticClass:"badge"},[e._v(e._s(i.count)+" ")]):e._e()])]}))],2)])]),t("Modal",{attrs:{width:"30vw",height:"60vh","has-footer":""},on:{input:function(t){e.documentGeneratedModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" New Document Number Generated")]},proxy:!0},{key:"default",fn:function(){return[t("div",[e._v(" Find the generated document by selecting company, Department, and Document Type with version for a unique document number "),t("b",[e._v(e._s(e.documentNumber))]),e._v(" "),t("br"),t("br"),t("b",[e._v("Action1:")]),e._v(" Copy the assigned Document Number provided below and include it on your document. "),t("br"),t("br"),t("b",[e._v("Action2:")]),e._v(" Complete the process by uploading the document, now tagged with the Document Number, for approval. ")])]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-md",attrs:{label:"Copy Document Number",color:"primary",icon:"eva-clipboard-outline"},on:{click:e.copyDocumentNumber}}),t("BaseButton",{attrs:{label:"Continue to Upload",icon:"eva-upload-outline",color:"secondary"},on:{click:e.proceedUpload}})]},proxy:!0}]),model:{value:e.documentGeneratedModal,callback:function(t){e.documentGeneratedModal=t},expression:"documentGeneratedModal"}}),t("Sheet",{attrs:{width:"30vw","sub-actions":!(!e.processId||!e.attachmentList.length),upload:!0,"no-padding":""},on:{input:e.closeAttachmentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[e.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 30 seconds ")]):e._e(),e.processId?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getAttachments()}}}):e._e()]},proxy:!0},{key:"upload",fn:function(){return[0===e.attachmentList.length?t("div",{staticClass:"hint",on:{click:function(t){e.rowIndex=null,e.$refs.attachments.click()}}},[t("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),t("div",{staticClass:"title text-blue"},[e._v("UPLOAD FILES")]),t("div",{staticClass:"description"},[e._v("Click here to choose files and upload")])],1):e._e()]},proxy:!0},e.processId&&e.attachmentList.length?{key:"subActions",fn:function(){return[t("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:e.fileSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}}),e._v(" Select All "),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!e.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentShare}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"merge documents (only PDF)",expression:"'merge documents (only PDF)'",modifiers:{top:!0}}],attrs:{"is-disabled":!(e.selectedFileCount>1&&e.isSelectedPDF),icon:"mdi-file-document-multiple-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:e.documentMerge}})]},proxy:!0}:null],null,!0),model:{value:e.attachmentSheet,callback:function(t){e.attachmentSheet=t},expression:"attachmentSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 200px)"}},[t("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:e.uploadWflowAttachments}}),e._l(e.checkList,(function(i){return[i.name?[i.attach?t("div",{key:i.uid},[e._l(e.attachmentFilterCheckList(i.name),(function(i){return[t("div",{key:i.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[e.processId?t("div",{staticClass:"col-auto"},[i.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:i.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){i.checked=!i.checked}}})]],2):t("div",[i.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e()],2),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(i.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(i)}}},[e._v(" "+e._s(i.name)+" ")]),i.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(i,"Download")}}})],1),i.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(i,"Print")}}})],1)]),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(i.createdAt)))]),i.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(i.createdByEmail))])]:e._e(),i.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(i.size)))])]:e._e()],2),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(i)}}})],1),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(i)}}})],1),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Re-Upload",expression:"'Re-Upload'",modifiers:{top:!0}}],attrs:{icon:"mdi-file-upload",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){t.stopPropagation(),e.reuploadFile=i,e.reupload(i.name)}}})],1)])])]}))],2):t("div",{key:i.uid,staticClass:"checkList"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-auto"},[t("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),t("div",{staticClass:"col q-ml-sm"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[e._v(" "+e._s(i.name)+" ")]),i.required?t("div",{staticClass:"col-12 q-mt-sm"},[t("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[e._v(" Required ")])],1):e._e()])]),t("div",{staticClass:"col-auto"},[t("div",{staticClass:"col-12",on:{click:function(t){return e.attachTemplate(i.uid)}}},[t("q-chip",{staticClass:"chips primary-hover medium",attrs:{outline:"",color:"primary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-upload-outline",color:"primary","text-color":"white"}}),e._v(" Upload ")],1)],1),i.template?t("div",{staticClass:"col-12",on:{click:function(t){return e.download(i.id)}}},[t("q-chip",{staticClass:"chips secondary-hover medium",attrs:{outline:"",color:"secondary"}},[t("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-download-outline",color:"secondary","text-color":"white"}}),e._v(" Download ")],1)],1):e._e()])])])]:e._e()]})),e._l(e.attachmentList,(function(i){return[e.isCheckList(i.name)?[t("div",{key:i.id,staticClass:"attachmentList"},[t("div",{staticClass:"title row"},[i.loading?[t("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:e._e(),e.processId?t("div",{staticClass:"col-auto"},[t("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:i.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(e){i.checked=!i.checked}}})],1):e._e(),t("div",{staticClass:"col-auto"},[t("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":e.fileType(i.name)}})],1),t("div",{staticClass:"col ellipsis",on:{click:function(t){return e.openFile(i)}}},[e._v(" "+e._s(i.name)+" ")]),i.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(i,"Download")}}})],1),i.loading?e._e():t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.fileMenuAction(i,"Print")}}})],1)],2),t("div",{staticClass:"meta row"},[t("div",{staticClass:"col row"},[t("div",[e._v(e._s(e.$day.format(i.createdAt)))]),i.createdBy?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(i.createdByEmail))])]:e._e(),i.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.fileSize(i.size)))])]:e._e()],2),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.getFileData(i)}}})],1),t("div",{staticClass:"col-auto"},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return t.stopPropagation(),e.attachmentDelete(i)}}})],1)])])]:e._e()]}))],2)],1)]),t("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"30","no-padding":""},on:{input:e.closeCommentsSheet},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments ")]},proxy:!0},{key:"actions",fn:function(){return[e.processId?t("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[e._v(" auto-refresh every 30 seconds ")]):e._e(),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(t){return e.getComments()}}})]},proxy:!0}]),model:{value:e.commentsSheet,callback:function(t){e.commentsSheet=t},expression:"commentsSheet"}},[t("div",{attrs:{id:"content-wrapper"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 200px)"}},[e._l(e.commentsList,(function(i,s){return[t("q-chat-message",{key:s,staticClass:"q-ma-sm",attrs:{name:i.createdBy===e.$store.state.session.id?"me":i.createdByEmail||i.externalCommentsby,text:[i.comments],"text-html":"",sent:i.createdBy===e.$store.state.session.id,stamp:e.lastCommentDuration(i),"bg-color":i.createdBy===e.$store.state.session.id?"primary-1":"secondary-1"}})]}))],2)],1),t("div",{staticClass:"col q-pa-sm borderTop"},[t("div",{staticClass:"row"},[t("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:e.commentActions,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}})],1),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}})],1),t("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:e.saveComment}}),t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(t){e.advancedCommentsSheet=!0}}})],1)])])]),t("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(t){e.saveAction="",e.workflowFormModel="",e.advancedCommentsSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[t("TextBuilderField",{model:{value:e.advancedCommentText,callback:function(t){e.advancedCommentText=t},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[[t("SingleChoiceField",{staticClass:"actions q-mr-sm noborder",attrs:{options:e.commentActions,"options-per-line":2},model:{value:e.commentAction,callback:function(t){e.commentAction=t},expression:"commentAction"}})],t("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:e.saveAdvancedComment}})]},proxy:!0}]),model:{value:e.advancedCommentsSheet,callback:function(t){e.advancedCommentsSheet=t},expression:"advancedCommentsSheet"}}),t("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(t){e.fileSheet=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"attachmentFileHeader"},[t("div",{staticClass:"avatar q-ml-sm"},[t("FileIcon",{attrs:{"mime-type":e.fileType(e.selectedFile.name)}})],1),t("div",{staticClass:"q-ml-md"},[t("div",{staticClass:"filename"},[e._v(" "+e._s(e.selectedFile.name)+" ")]),t("div",{staticClass:"meta"},[t("div",[e._v("Archived At: "+e._s(e.$day.format(e.selectedFile.createdAt)))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v("Archived By: "+e._s(e.selectedFile.createdByEmail))]),e.selectedFile.size?t("div",[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e._v(" File Size: "+e._s(e.fileSize(e.selectedFile.size))+" ")],1):e._e()],1)])])]},proxy:!0},{key:"actions",fn:function(){return[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[t("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[t("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},e._l(e.documentActionList,(function(i){return t("ListItem",{key:i.id,attrs:{icon:i.icon,label:i.label},on:{click:function(t){return e.documentAction(i.id)}}})})),1)],1)],1)]},proxy:!0}]),model:{value:e.fileSheet,callback:function(t){e.fileSheet=t},expression:"fileSheet"}},[t("div",{staticClass:"attachmentFileFrame"},[t("div",{staticClass:"file-list"},[t("iframe",{ref:"myAttachmentFiles",attrs:{id:"file-frame",src:e.fileLink(),frameborder:"0"}})])])]),t("MetaDataEdit",{attrs:{value:e.showMetaDataEditModal,file:e.workflow,"repository-field":e.repositoryField,"file-data":e.fileData,title:"Index",columns:e.formFields,"modal-value":e.workflowModel,"upload-filename":e.uploadFilename},on:{close:function(t){e.showMetaDataEditModal=!1},save:e.saveMetaData}}),t("FileDetails",{attrs:{"file-data":e.fileData},model:{value:e.fileDetailsSheet,callback:function(t){e.fileDetailsSheet=t},expression:"fileDetailsSheet"}}),t("EmailSharing",{attrs:{"repository-id":e.repositoryId,"file-list":e.selectedFileList},on:{"update:fileList":function(t){e.selectedFileList=t},"update:file-list":function(t){e.selectedFileList=t}},model:{value:e.emailSharingSheet,callback:function(t){e.emailSharingSheet=t},expression:"emailSharingSheet"}})],1)},Oe=[],Me=(i("13d5"),i("cdde")),qe=i("4bc4"),Pe=i("6a70"),Ve=i("cade"),Ne=i("ee54"),Re=i("bc3a"),ze=i.n(Re),je=i("6df3"),Ge=i("695e"),Ue=i("9234"),He=i("869e"),We=function(){var e=this,t=e._self._c;return t("Sheet",{attrs:{value:e.value,width:"40vw"},on:{input:function(t){return e.$emit("input",!1)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Metadata ")]},proxy:!0}])},[t("div",{attrs:{id:"file-details"}},[t("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[t("div",{attrs:{id:"item-overview"}},[t("table",[t("tbody",e._l(e.fileData,(function(i){return t("tr",{key:i.name,staticClass:"tableRow"},[t("td",{staticClass:"label"},[e._v(e._s(i.name))]),"TABLE"!==i.type?t("td",{staticClass:"value"},[e._t(i.name,(function(){return[e._v(" "+e._s(i.value||"-")+" ")]}),{value:i.value})],2):t("td",{staticClass:"value",staticStyle:{padding:"8px"}},[e._t(i.name,(function(){return[t("BaseActionButton",{attrs:{icon:"mdi-table-large","is-flat":"","no-border":""},on:{click:function(t){return e.showTable(i.name)}}})]}))],2)])})),0)])])]),t("Modal",{attrs:{width:"60vw",height:"80vh"},on:{input:function(t){e.expandTableModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.tableHeader))]},proxy:!0},{key:"default",fn:function(){return[e.tableData.cellvalues?[t("div",{attrs:{id:"tableData"}},[t("table",e._l(e.tableData.cellvalues,(function(i,s){return t("tr",{key:s},e._l(i,(function(i){return t("NoHeader"===i.kind?"td":"th",{key:`r${s}_c${i.columnindex}`,tag:"th"},[e._v(" "+e._s(i.cellvalue)+" ")])})),1)})),0)])]:[t("table",[t("thead",[t("tr",e._l(e.tableData[0],(function(i,s){return t("th",{key:s},[e._v(" "+e._s(s)+" ")])})),0)]),t("tbody",e._l(e.tableData,(function(i,s){return t("tr",{key:s},e._l(i,(function(i,s){return t("td",{key:s},[e._v(" "+e._s(i)+" ")])})),0)})),0)])]]},proxy:!0}]),model:{value:e.expandTableModal,callback:function(t){e.expandTableModal=t},expression:"expandTableModal"}})],1)])},Ye=[],Je={name:"FileDetails",components:{Sheet:he["a"],Modal:Pe["a"]},props:{value:{type:Boolean,required:!0},fileData:{type:Array,required:!0}},data(){return{expandTableModal:!1,tableHeader:"",tableData:[]}},methods:{showTable(e){this.expandTableModal=!0;let t=this.fileData.filter(t=>t.name===e);this.tableHeader=t[0].name,this.tableData=JSON.parse(t[0].value)}}},Qe=Je,Ke=(i("a465"),Object(k["a"])(Qe,We,Ye,!1,null,"264859f0",null)),Xe=Ke.exports,Ze=i("5e23"),et={name:"InitiateProcess",components:{Sheet:he["a"],RenderForm:qe["a"],Modal:Pe["a"],ListItem:Ve["a"],MetaDataEdit:Ne["a"],TextAreaField:je["a"],TextBuilderField:Ge["a"],SingleChoiceField:Ue["a"],CheckboxField:He["a"],FileIcon:y["a"],FileDetails:Xe,EmailSharing:Ze["a"]},props:{value:{type:Boolean,default:!1},itemFile:{type:Object,required:!0},repositoryId:{type:[Number,String],required:!0},repositoryField:{type:Array,default:()=>[]},repositoryDetails:{type:Object,default:()=>[]},workflow:{type:Object,default:()=>{}}},data(){return{headerTitle:"",formWidth:"100vw",processId:0,transactionId:0,formEntryId:0,isGenerateNumber:!1,documentNumber:"",actions:[],saveAction:"",formId:"",form:null,formFields:[],formModel:{},workflowFormModel:{},signList:[],formEditAccess:!1,formEditControls:[],readonlyControls:[],formVisibilityAccess:!0,formSecureControls:[],docWarning:"",tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0}],userSignature:!1,checkList:[],documentGeneratedModal:!1,commentsList:[],attachmentList:[],attachmentSheet:!1,commentsSheet:!1,commentText:"",advancedCommentsSheet:!1,advancedCommentText:"",fileSheet:!1,selectedFile:{},fileDetailsSheet:!1,emailSharingSheet:!1,selectAll:!1,selectedFileList:[],fileData:[],isLoading:!1,commentActions:[{id:this.$nano.id(),label:"Internal",value:2},{id:this.$nano.id(),label:"Public",value:1}],commentAction:2,showMetaDataEditModal:!1,selectedUploadFile:{},workflowModel:{},documentLoad:null,documentLoadList:[],documentActionList:[{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline"},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline"}],commentsLoad:null,attachmentLoad:null,reuploadFile:{},generatePDF:0,documentRequired:!1,uploadFilename:""}},computed:{isMaximized(){return"100vw"===this.formWidth},panels(){return this.form?this.form.panels:[]},secondaryPanels(){return this.form?this.form.secondaryPanels:[]},formSettings(){return this.form?this.form.settings:{}},_enableControls(){let e=[],t=[];return this.panels&&this.panels.forEach(i=>{if(i.fields.length){let s=i.fields.filter(e=>"SINGLE_SELECT"===e.type||"SINGLE_CHOICE"===e.type||"MULTIPLE_CHOICE"===e.type||"MULTI_SELECT"===e.type);s.length&&s.forEach(i=>{if(i.settings.validation.enableSettings&&i.settings.validation.enableSettings.length){let s=[];i.settings.validation.enableSettings.forEach(e=>{e.controls.length&&(s.push({value:e.value,childControls:e.controls}),e.controls.forEach(e=>{s.indexOf(e)<0&&t.push(e)}))}),s.length&&e.push({id:i.id,parentControls:s})}})}}),{listControls:t,controls:e}},selectedFileCount(){let e=this.attachmentList.filter(e=>e.checked).length;return e},isSelectedPDF(){let e=!0;return this.attachmentList.forEach(t=>{let i=t.name.split(".").pop();t.checked&&"pdf"!==i.toLowerCase()&&(e=!1)}),e}},watch:{value:{deep:!0,immediate:!0,handler(){if(this.formId="",this.form=null,Object.keys(this.workflow).length){this.isGenerateNumber=!1;let e=location.origin;("http://52.172.32.88"!==e&&"https://demo.ezofis.com"!==e&&"http://localhost:8080"!==e||2092!==this.workflow.id)&&("https://edmsuat.sobhaapps.com"!==e&&"http://localhost:8080"!==e||55!==this.workflow.id)||(this.isGenerateNumber=!0),this.readWorkflow()}}},workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&(this.isGenerateNumber?this.documentNumberGenerate():this.checkRequiredDocument())}},attachmentSheet:{immediate:!0,handler(){this.attachmentSheet&&this.processId?this.attachmentLoad=setInterval(()=>{this.getAttachments()},3e4):clearInterval(this.attachmentLoad)}},commentsSheet:{immediate:!0,handler(){this.commentsSheet&&this.processId?this.commentsLoad=setInterval(()=>{this.getComments()},3e4):clearInterval(this.commentsLoad)}},formFields:{deep:!0,immediate:!0,handler(){if(this.formEditAccess=!1,Object.keys(this.itemFile).length&&this.formFields.length){this.formEditAccess=!0;let e=JSON.parse(this.itemFile.fieldlist);this.formFields.forEach(t=>{if("Document No"!==t.label){let i=e.find(e=>e.fieldId==t.label);i&&(this.formModel[t.name]=i.value)}})}}}},methods:{toggleWidth(){this.formWidth="100vw"===this.formWidth?"50vw":"100vw"},async copyDocumentNumber(){await Object(Me["a"])(this.documentNumber),this.$alert.success("Document Number Copied")},proceedUpload(){this.documentGeneratedModal=!1,this.attachmentSheet=!0},readWorkflow(){this.actions=[],this.formId="",this.commentsList=[],this.attachmentList=[],0===Object.keys(this.itemFile).length&&(this.formModel={}),this.signList=[],this.formEditAccess=!1,this.formEditControls=[],this.readonlyControls=[],this.formVisibilityAccess=!0,this.formSecureControls=[];let e=JSON.parse(this.workflow.flowJson),t=e.blocks.find(e=>"START"===e.type);if(t){if("MANUAL"===t.settings.initiateMode){this.headerTitle=""+t.settings.label;let i=e.rules.find(e=>e.fromBlockId===t.id);i&&this.actions.push(i.proceedAction)}t.settings.formEditAccess&&(""===t.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===t.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===t.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=t.settings.formEditControls)),t.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=t.settings.formSecureControls),t.settings.fileSettings&&t.settings.fileSettings.fileCheckList.length&&(this.checkList=t.settings.fileSettings.fileCheckList,this.checkList.forEach(e=>{e.uid=this.$nano.id(),e.attach=!1}),this.docWarning=t.settings.fileSettings.partial),this.generatePDF=t.settings.generatePDF?1:0,this.documentRequired=t.settings.documentRequired||!1}this.workflow.formId&&(this.formId=String(this.workflow.formId),this.getForm())},validateRequest(e){this.saveAction=e},checkRequiredDocument(){if(this.documentRequired&&0===this.attachmentList.length)return this.saveAction="",this.workflowFormModel={},void this.$alert.warning("A minimum of one document is required for submission");let e=this.checkList.filter(e=>e.required&&!e.attach);e.length?(this.docWarning?this.alertModal=!0:this.$alert.warning("Mandatory documents required"),this.saveAction="",this.workflowFormModel={}):this.processRequest()},closeAttachmentsSheet(){this.attachmentSheet=!1},closeCommentsSheet(){this.closeCommentsSheet=!1},closeInitiateProcessSheet(){this.isGenerateNumber=!0,this.tabs.find(e=>{e.count=0}),this.commentsList=[],this.attachmentList=[],this.formModel={},this.processId=0,this.documentNumber="",this.transactionId=0,this.formEntryId=0,this.$emit("update:itemFile",{}),this.$emit("input",!1)},async showLinks(e){"ATTACHMENTS"===e?this.attachmentSheet=!0:"COMMENTS"===e&&(this.commentsSheet=!0)},isCheckList(e){let t=this.checkList.filter(t=>t.name===e.substring(0,e.lastIndexOf("."))||t.name===e.substring(0,e.lastIndexOf(".")).split("_")[0]);return!t.length},lastCommentDuration(e){const t=e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(t.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const e=a/s[o];return i.format(Math.round(e),o)}},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},fileSize(e){return Object(fe["a"])(e)},fileLink(){let e=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let i=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(i=2);let s="";if(Object(b["d"])(t))s="https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===e?"https://demo.ezofis.com/TrialPDFViewer/web/viewer.html":"https://app.ezofis.com"===e?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html";else{if("http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${i}`;s="http://52.172.32.88/DocsViewer/index.html"}return`${s}?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${i}`}{let i="";i="&action=all";let s="";if(Object(b["d"])(t))"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?(i="",s="https://ag-appsvc04.azurewebsites.net/web/viewer.html"):s="https://trial.ezofis.com"!==e||Object(b["c"])(t)?"https://app.ezofis.com"===e?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":e+"/PDFViewer/web/viewer.html":"https://trial.ezofis.com/docsviewer/index.html";else{if(Object(b["b"])(t)||"http://52.172.32.88"!==e)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;s="http://52.172.32.88/DocsViewer/index.html"}return`${s}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}${i}`}}},openFile(e){e.loading?this.$alert.info("Please wait to complete the uploading"):(this.selectedFile=e,this.fileSheet=!0)},fileSelectAll(){this.attachmentList=this.attachmentList.map(e=>({...e,checked:this.selectAll}))},reupload(e){var t;e=e.substr(0,e.lastIndexOf(".")).split("_")[0],this.checkListRowIndex=null===(t=this.checkList.find(t=>t.name===e))||void 0===t?void 0:t.uid,this.$refs.attachments.click()},attachmentFilterCheckList(e){return this.attachmentList.filter(t=>t.name.substring(0,t.name.lastIndexOf("."))===e||t.name.substring(0,t.name.lastIndexOf(".")).split("_")[0]===e)},async getForm(){this.formFields=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await d["g"].getForm(this.formId);if(this.$store.commit("hideLoadingBar"),e)this.$alert.error(e);else if(t){this.form=JSON.parse(t.formJson);const e=[...this.form.panels,...this.form.secondaryPanels];if(!e.length)return;let i=[];for(const t of e)i.push(...t.fields);i.forEach(e=>{"DIVIDER"===e.type||"LABEL"===e.type||"PARAGRAPH"===e.type||!e.label&&"TABLE"!==e.type||"DISABLE"===e.settings.general.visibility||this.formFields.push({id:this.$nano.id(),label:e.label||e.type,name:e.id,value:e.id,type:e.type})})}},async documentNumberGenerate(){let e={workflowId:this.workflow.id,repositoryId:this.repositoryId,itemId:this.itemFile.id,formData:{formId:this.formId,fields:this.workflowFormModel},review:"",comments:this.commentsList,addonLink:!1};this.$store.commit("showLoadingBar");const{error:t,payload:i}=await d["d"].documentNumberGenerate(e);if(this.$store.commit("hideLoadingBar"),this.saveAction="",this.workflowFormModel={},t)this.$alert.error(t);else if(i){this.documentNumber=i.autoGenDocNo;let e=this.formFields.find(e=>"Document No"===e.label);e&&(this.workflowModel[e.value]=this.documentNumber,this.processId=i.processId,this.transactionId=i.transactionId,this.formEntryId=i.formEntryId),this.isGenerateNumber=!1,this.documentGeneratedModal=!0}},async processRequest(){let e={};this.formId&&(e={workflowId:this.workflow.id,transactionId:this.transactionId,review:this.saveAction,formData:{formId:this.formId,formEntryId:this.formEntryId,fields:this.workflowFormModel},hasFormPDF:this.generatePDF}),this.saveAction="",this.workflowFormModel={},console.log(e),this.$store.commit("showLoadingBarSave");const{error:t}=await d["t"].processTransaction(e);this.$store.commit("hideLoadingBarSave"),t?this.$alert.error(t):(this.signImg&&await this.saveProcessSignature(),this.$alert.success(this.documentNumber+" Request Processed"),this.closeInitiateProcessSheet())},async saveProcessSignature(){let e={signBinary:this.signImg.split(",")[1],fileType:"png"};const{error:t}=await d["t"].saveProcessSignature(this.workflow.id,this.processId,this.transactionId,e);t?this.$alert.error(t):this.signImg=""},async getComments(){this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=0)}),this.commentsList=[];const{error:e,payload:t}=await d["t"].getProcessComments(this.workflow.id,this.processId);e?this.$alert.error(e):t.length&&(this.commentsList=t,this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}))},async saveComment(){if(this.commentText)if(this.processId){const{error:e}=await d["t"].insertProcessComment(this.workflow.id,this.processId,this.transactionId,{comments:this.commentText,showTo:this.commentAction});if(e)return void this.$alert.error(e);this.commentText="",this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}),this.commentText=""},async saveAdvancedComment(){if(this.advancedCommentText)if(this.processId){const{error:e}=await d["t"].insertProcessComment(this.workflow.id,this.processId,this.transactionId,{comments:this.advancedCommentText,showTo:this.commentAction});if(e)return void this.$alert.error(e);this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=this.commentsList.length)}),this.advancedCommentText="",this.advancedCommentsSheet=!1},async uploadWflowAttachments(e){"STATIC"===this.repositoryDetails.fieldsType?(this.selectedUploadFile=e,0===this.attachmentList.length?this.uploadFilename=this.documentNumber+".pdf":this.uploadFilename=e.target.files[0].name,this.showMetaDataEditModal=!0):this.uploadAttachments(e)},async uploadAttachments(e,t){if(this.processId){const s=e.target.files[0];this.$store.commit("showLoadingBar");const a=new FormData;a.append("workflowId",this.workflow.id),a.append("repositoryId",this.repositoryId),a.append("processId",this.processId),a.append("transactionId",this.transactionId),t?a.append("fields",t):a.append("fields",""),a.append("file",s);let o=e.target.files[0].name;if(this.checkListRowIndex){const e=o.split(".").pop();let t=this.checkList.filter(e=>e.uid===this.checkListRowIndex);a.append("filename",t[0].name+"."+e),o=t[0].name+"."+e}try{const e=await ze()({url:"https://appuat.ezofis.com/ezofisapi/api/workflow/attachmentWithProcessId",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:t,data:i}=e;if(200!==t||!i)throw e;this.$alert.success("Document attached"),this.documentLoad=setInterval(()=>{this.getAttachments(),clearInterval(this.documentLoad)},15e3)}catch(i){this.$alert.error("Error uploading file"),console.error(i)}this.$store.commit("hideLoadingBar"),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value="",Object.keys(this.reuploadFile).length&&(await this.attachmentDelete(this.reuploadFile),this.reuploadFile={})}else{const s=e.target.files[0],a=new FormData;a.append("file",s),a.append("repositoryId",this.repositoryId),t&&(this.fileData=JSON.parse(t),a.append("fields",t));let o=e.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let e=this.checkList.filter(e=>e.uid===this.checkListRowIndex);a.append("filename",e[0].name+"."+r),o=e[0].name+"."+r}else a.append("filename",o);try{const i=await ze()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:n,data:l}=i;if(200!==n)throw"Invalid response";let d=JSON.parse(l);this.$alert.success("Document attached");let c=this.repositoryField.reduce((e,t)=>e.level>t.level?e:t),u=this.fileData.find(e=>e.name===c.name),h=!1;"pdf"!==r.toLowerCase()&&(h=!0,this.documentLoadList.push(Number(d.fileId)),this.documentLoad=setInterval(()=>{let e=this.attachmentList.find(e=>this.documentLoadList.indexOf(e.id)>-1);e&&(this.documentLoadList.splice(this.documentLoadList.indexOf(e.id),1),e.loading=!1),0===this.documentLoadList.length&&clearInterval(this.documentLoad)},1e4)),this.attachmentList.push({id:Number(d.fileId),name:t?u.value+"."+r:o,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:s.size,initiate:!0,uid:this.checkListRowIndex,createdBy:this.$store.state.session.id,fileData:this.fileData,repositoryId:this.repositoryId,loading:h}),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)}),this.checkList.length&&this.checkList.forEach(e=>{e.uid!==this.checkListRowIndex||(e.attach=!0)}),e.target.value=""}catch(i){console.error(i),this.$alert.error("error attaching file")}}},async getAttachments(){this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=0)});let e=this.attachmentList.length;const{error:t,payload:i}=await d["t"].getAttachments(this.workflow.id,this.processId);t?this.$alert.error(t):(i.length?(e!==i.length&&(this.attachmentList=i.map(e=>({...e,checked:!1}))),this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=this.attachmentList.length)})):this.attachmentList=[],this.checkList.length&&this.checkList.forEach(e=>{let t=this.attachmentList.filter(t=>{let i=t.name.substr(0,t.name.lastIndexOf("."));if(e.name===i||e.name===i.split("_")[0])return t});t.length?e.attach=!0:e.attach=!1}))},async attachmentDelete(e){const{error:t}=await d["r"].deleteUploadedFiles([e.id]);t?this.$alert.error(t):(this.attachmentList=this.attachmentList.filter(t=>t.id!==e.id),this.checkList.forEach(t=>{t.uid===e.uid&&(t.attach=!1)}))},saveMetaData(e){let t=[];this.repositoryField.forEach(i=>{t.push({name:i.name,value:e[i.name],type:i.dataType})}),this.uploadAttachments(this.selectedUploadFile,JSON.stringify(t))},fileMenuAction(e,t){this.selectedFile=e,this.documentAction(t,!0)},documentAction(e,t){if("Email_Sharing"===e);else if("Print"===e){if(this.selectedFile.name)if(t){let e="";if(this.selectedFile.initiate){let t=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(t=2),e=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${t}/1`}else e=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(e,"_blank")}else{let e=this.selectedFile.name.split(".").pop();Object(b["d"])(e)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myAttachmentFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===e){let e="";if(this.selectedFile.initiate){let t=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(t=2),e=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${t}/2`}else e=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(e,"_blank")}},async filePrintSession(){const{error:e}=await d["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});e&&this.$alert.error(e)},async getFileData(e,t){const{error:i,payload:s}=await d["p"].getFileData({repositoryId:e.repositoryId,itemId:e.id});this.$store.commit("hideLoadingBar"),i?this.$alert.error(i):s&&(e.fileData?this.fileData=e.fileData:this.fileData=s,"file"!==t&&(this.fileDetailsSheet=!0))},async documentMerge(){let e=[];this.attachmentList.forEach(t=>{let i=t.name.split(".").pop();t.checked&&"pdf"===i.toLowerCase()&&e.push(t.id)});let t={ids:e};const{error:i}=await d["t"].documentMerge(this.workflow.id,this.processId,this.transactionId,this.repositoryId,t);i?this.$alert.error(i):this.$alert.success("Document merge process initiated")},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(e=>{e.checked&&this.selectedFileList.push({id:e.id,name:e.name})}),this.emailSharingSheet=!0}}},tt=et,it=(i("d8cf"),i("8169")),st=i("4e73"),at=Object(k["a"])(tt,Ee,Oe,!1,null,"cb6289a0",null),ot=at.exports;_()(at,"components",{QChip:L["a"],QAvatar:D["a"],QChatMessage:it["a"],QMenu:st["a"]});var rt=i("42fc"),nt=i("61cf"),lt=i("1026"),dt=i("e683"),ct=i("7794"),ut=i("b3d1"),ht={name:"RepositoryBrowseAndTrash",components:{Portal:u["Portal"],ItemActions:m["a"],EntityGrid:x,EntityList:M,EntityThumbnail:z,EntityDetails:J,Pagination:h["a"],ConfirmDeleteEntity:ie,ConfirmRestoreEntity:le,FileSheet:de["a"],FileList:Ce,Breadcrumbs:_e["a"],ItemActionChips:Ie["a"],FilePassword:De,InitiateProcess:ot,EmailSharing:Ze["a"],Sheet:he["a"],Dropzone:nt["a"],UploadingFileList:lt["a"],TextAreaField:je["a"],ValidationObserver:Be["a"],ValidationProvider:Be["b"],FormFieldError:dt["a"],RepositoryField:ct["a"],TextField:ut["a"],Modal:Pe["a"]},props:{mode:{type:String,required:!0},fullFileSheet:{type:Object,default:()=>{}},hideFileSheet:{type:Boolean,default:!1}},data(){return{workspaceId:0,repositoryId:0,columns:[{id:this.$nano.id(),name:"name",label:"Name",type:"TITLE",isVisible:!0,isSortable:!0,isGroupable:!1,dataType:c["a"].SHORT_TEXT,fieldId:0},{id:this.$nano.id(),name:"level",label:"Level",type:"NORMAL",isVisible:!1,isSortable:!1,isGroupable:!1,dataType:c["a"].NUMBER,isFilter:!1,fieldId:0},{id:this.$nano.id(),name:"files",label:"Files",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!1,dataType:c["a"].SHORT_TEXT,isFilter:!1,fieldId:0},{id:this.$nano.id(),name:"size",label:"Size",type:"NORMAL",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:c["a"].SHORT_TEXT,isFilter:!1,fieldId:0},{id:this.$nano.id(),name:"version",label:"Version",type:"NORMAL",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:c["a"].SHORT_TEXT,isFilter:!1,fieldId:0},{id:this.$nano.id(),name:"createdBy",label:"Created By",type:"NORMAL",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:c["a"].SHORT_TEXT,isFilter:!0,fieldId:0},{id:this.$nano.id(),name:"createdAt",label:"Created At",type:"NORMAL",isVisible:!0,isSortable:!0,isGroupable:!1,dataType:c["a"].DATE_TIME,isFilter:!0,fieldId:0},{id:this.$nano.id(),name:"modifiedBy",label:"Modified By",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!0,dataType:c["a"].SHORT_TEXT,isFilter:!1,fieldId:0},{id:this.$nano.id(),name:"modifiedAt",label:"Modified At",type:"NORMAL",isVisible:!1,isSortable:!0,isGroupable:!1,dataType:c["a"].DATE_TIME,isFilter:!1,fieldId:0}],repositoryColumns:[],entities:[],activeView:"LIST",selectedEntity:{},isEntityDetailsVisible:!1,isDeleteConfirmationVisible:!1,isRestoreConfirmationVisible:!1,isLoading:!1,sortBy:{criteria:"",order:"ASC"},groupBy:"",filterBy:[],totalItems:0,itemsPerPage:10,currentPage:1,isFileSheetVisible:!1,parentNodeId:0,breadcrumbs:[],repositoryDetails:{},repositoryField:[],selectedFile:{},currentLevel:0,entitiesData:[],isFilesSheetVisible:!1,maxLevel:0,fieldlist:"[]",EntitiesList:[],columnsGrid:[],showFilePasswordModal:!1,options:{},entitiesListData:[],initiateAccess:!1,workflows:[],initiateProcessSheet:!1,emailSharingSheet:!1,selectedFileList:[],contentSearch:{contentSearchValue:"",fuzzy:0,searchType:1},simpleSearchApplyed:!1,showCheckinModal:!1,filesToUpload:[],comments:"",showProgress:!1,filesError:!1,showDeleteBtn:!0,selectColumn:{},selectRow:{},openMetaDataEditModal:!1,newValue:"",selectField:{},newValueError:!1,hasMetaDataEdit:!1,overallSelectAll:!1,itemSelected:!1,isAllSelected:!1,download:!1,print:!1,email:!1,checkbox:!1,deleteFile:!1,selectedDelete:[],deleteFileListsAll:[]}},computed:{_entities(){return this.entities.map(({key:e,value:t})=>({key:this.groupBy,value:e,data:t.map(e=>({id:e.id,name:e.name,level:e.level,type:e.type,files:e.itemsCount,size:e.size?Object(fe["a"])(e.size):"",version:Number(e.fileVersion),maxVersion:Number(e.maxVersion),icon:"eva-folder",isPassword:e.hasPassword,passwordCreatedBy:e.encryptedBy,createdBy:e.createdBy,createdAt:this.$day.format(e.createdAt),modifiedBy:e.modifiedBy,modifiedAt:e.modifiedAt?this.$day.format(e.modifiedAt):"",stageStatus:e.stageStatus,revision:e.revision,isNewVersion:e.isNewVersion,checkinStatus:e.checkinStatus,comments:e.comments}))}))},_entitiesFile(){return this.entities.map(({key:e,value:t})=>({key:this.groupBy,value:e,data:t.map(e=>({id:e.id,name:e.name,link:!0,level:e.level,type:e.type,files:e.itemsCount,size:e.size?Object(fe["a"])(e.size):"",version:Number(e.fileVersion),maxVersion:Number(e.maxVersion),icon:"eva-folder",isPassword:e.hasPassword,passwordCreatedBy:e.encryptedBy,createdBy:e.createdBy,createdAt:this.$day.format(e.createdAt),modifiedBy:e.modifiedBy,modifiedAt:e.modifiedAt?this.$day.format(e.modifiedAt):"",stageStatus:e.stageStatus,revision:e.revision,isNewVersion:e.isNewVersion,checkinStatus:e.checkinStatus,comments:e.comments,checkinBy:e.checkinBy,...this.getFoldersFieldsData(e)}))}))},entityType(){return this.entities.length?this.entities[0].value.length?this.entities[0].value[0].type:"":"FOLDER"},showUploadFiles(){let e=location.origin;return("http://52.172.32.88"!==e&&"https://demo.ezofis.com"!==e&&"http://localhost:8080"!==e||"1136"!==this.repositoryId)&&(("https://edmsuat.sobhaapps.com"!==e||"80"!==this.repositoryId)&&(("https://edms.sobhaapps.com"!==e||"80"!==this.repositoryId)&&(!this.$store.state.profileMenus.length||this.$store.state.profileMenus.find(e=>e.folders).Menu["Upload File"])))},_repositoryField(){return this.repositoryField.map(e=>({...e,options:e.options?JSON.parse(e.options):[]}))}},watch:{fullFileSheet:{deep:!0,handler(){this.fullFileSheet&&(this.selectedFile=this.entities[0].value.find(e=>e.id===this.fullFileSheet.id),this.isFileSheetVisible=!0)}},activeView:{immediate:!0,deep:!0,handler(){this.entities=[],this.repositoryId&&("GRID"===this.activeView?this.getEntities():this.getEntitiesList())}},$route:{immediate:!0,deep:!0,async handler(){this.defaultView(),this.workspaceId=this.$route.query.workspaceId,this.repositoryId=this.$route.query.repositoryId,await this.getRepository(),await this.getWorkflows(),"GRID"===this.activeView?this.getEntities():this.getEntitiesList()}},"$store.state.defaultView":function(){this.defaultView()},repositoryId(){this.repositoryId&&this.getFolderSecurity()}},async mounted(){this.$watch(e=>[e.mode,e.sortBy,e.groupBy,e.currentPage,e.itemsPerPage],()=>"GRID"===this.activeView?this.getEntities():this.getEntitiesList(),{immediate:!0,deep:!0})},created(){this.getFolderSecurity()},methods:{defaultView(){let e=this.$store.state.defaultView,t=this.$route.meta.breadcrumb,i=this.$route.meta.subMenu;if(Object.keys(e).length&&e[i]){let s=e[i].find(e=>e.subMenu===t);s&&this.activeView!==s.view&&(this.activeView=s.view)}},findEntity(e,t){const i=this._entities.find(t=>t.data===e);return i.data.find(e=>e.id===t)},showEntityDetails(e,t){this.selectedEntity=this.findEntity(e,t),this.isEntityDetailsVisible=!0},deleteFileList(e){this.selectedDelete=[],this.isDeleteConfirmationVisible=!0;let t=this.entities[0].value.find(t=>t.id===e),i={...t};this.selectedDelete.push(i)},deleteFileListAll(){this.selectedDelete=[],this.isDeleteConfirmationVisible=!0,this._entitiesFile.forEach(e=>{e.data.forEach(e=>{if(e.selected){let t={id:e.id,name:e.name};this.selectedDelete.push(t)}})})},async deleteFiles(){this.$store.commit("showLoadingBar"),this.selectedDelete.forEach(e=>{let t=e.id;this.deleteFileListsAll.push(t)});const{error:e,payload:t}=await d["p"].fileDelete(this.repositoryId,this.deleteFileListsAll);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):(200===t.status&&(this.$alert.success("file deleted successfully"),this.getEntitiesList()),this.$emit("close",!1))},showDeleteConfirmation(e,t){this.selectedEntity=this.findEntity(e,t),this.isDeleteConfirmationVisible=!0},showRestoreConfirmation(e,t){this.selectedEntity=this.findEntity(e,t),this.isRestoreConfirmationVisible=!0},openRepository(e,t){this.selectedEntity=this.findEntity(t,e),this.parentNodeId=e,0===this.parentNodeId?this.repository():this.currentPage>1?this.currentPage=1:this.getEntities()},uploadFiles(){this.$router.push({name:"uploadAndIndex",query:this.$route.query})},handleBreadcrumbClick(e){if("REPOSITORY"===e.type)this.breadcrumbs=[],this.parentNodeId=0,this.currentLevel=1;else{let t=[],i=0;this.currentLevel=e.level+1,this.breadcrumbs.map(s=>{i||(t.push(s),s.id!==e.id||(i=s.id))}),this.selectedEntity={},this.breadcrumbs=t,this.parentNodeId=i,"THUMBNAIL"===this.activeView&&(this.activeView="GRID")}0==this.parentNodeId&&this.columns.shift(),"GRID"===this.activeView?this.getEntities("back"):("REPOSITORY"===e.type&&this.breadcrumbs.push({id:this.repositoryId,label:this.repositoryDetails.name,entity:this.selectedEntity,type:"REPOSITORY"}),this.filterBy=[],this.getEntitiesList())},homeRepository(){this.$router.push({name:"repositories-browse"}),this.filterBy=[]},openFile(e){this.selectedFile=this.entities[0].value.find(t=>t.id===e),this.selectedFile.hasPassword?this.showFilePasswordModal=!0:(this.isFileSheetVisible=!0,this.isFilesSheetVisible=!1)},async getRepository(){this.overallSelectAll=!1,this.repositoryColumns=[];const{error:e,payload:t}=await d["p"].getRepository(this.repositoryId);e?this.$alert.error(e):(this.repositoryDetails=t,t.options&&(this.options=t.options),"true"===this.options.download&&(this.download=!0),"true"===this.options.emailSharing&&(this.email=!0),"true"===this.options.print&&(this.print=!0),"true"===this.options.deleteFile&&(this.deleteFile=!0),(this.print||this.email||this.download||this.deleteFile)&&(this.checkbox=!0),this.repositoryField=this.repositoryDetails.fields,this.maxLevel=this.repositoryDetails.fields.filter(e=>0!=e.level).length,this.repositoryDetails&&(this.repositoryColumns=[],this.repositoryDetails.fields&&this.repositoryDetails.fields.forEach(e=>{this.repositoryColumns.push({id:this.$nano.id(),name:e.name,label:e.name,fieldId:e.id,type:"NORMAL",isVisible:e.visible,isSortable:!0,isGroupable:!1,isFilter:!0,dataType:e.dataType,display:"",apiLoad:!0})})))},applyFilter(e){"GRID"===this.activeView?this.getEntities(e):"LIST"===this.activeView&&this.getEntitiesList()},loadAll(){this.itemsPerPage=this.totalItems,this.currentPage=1},async getEntities(e){var t;Array.isArray(e)&&(this.filterBy=e),this.$store.commit("showLoadingBarPage");let i={};if(e){let t=1;Array.isArray(e)?this.breadcrumbs.forEach(i=>{i.fieldName&&e.forEach(e=>{let s=e.filters.findIndex(e=>e.criteria===i.fieldName);-1===s||(t+=1)})}):t=this.currentLevel,i={repositoryId:this.repositoryId,parentNodeId:this.parentNodeId,sortBy:this.sortBy,groupBy:this.groupBy,filterBy:Array.isArray(e)?e:this.filterBy,currentPage:this.currentPage,itemsPerPage:this.itemsPerPage,mode:this.mode,level:t,...this.contentSearch}}else i={repositoryId:this.repositoryId,parentNodeId:this.parentNodeId,sortBy:this.sortBy,groupBy:this.groupBy,filterBy:Array.isArray(e)?e:this.filterBy,currentPage:this.currentPage,itemsPerPage:this.itemsPerPage,mode:this.mode};const{error:s,payload:a}=await d["p"].getEntities(i);if(this.$store.commit("hideLoadingBarPage"),s)this.$alert.error(s);else{if(0===this.parentNodeId&&this.repositoryDetails)this.breadcrumbs=[],this.breadcrumbs.push({id:this.repositoryId,label:this.repositoryDetails.name,entity:this.selectedEntity,type:"REPOSITORY"});else if("FOLDER"===this.selectedEntity.type){let e=this.breadcrumbs.findIndex(e=>e.id===this.selectedEntity.id),t=this.repositoryField.find(e=>e.level===this.selectedEntity.level);-1===e&&this.breadcrumbs.push({id:this.selectedEntity.id,label:this.selectedEntity.name,entity:this.selectedEntity,type:"FOLDER",fieldName:t.name,level:this.selectedEntity.level})}this.totalItems=(null===(t=a.meta)||void 0===t?void 0:t.totalItems)||0,a.data.length?a.data[0].value.length&&a.data[0].value[0].level&&(this.currentLevel=a.data[0].value[0].level):this.totalItems=0,0===this.totalItems?(this.entities=[],this.entitiesData=[]):(this.entities=a.data,this.entitiesData=a.data)}},async getEntitiesList(){var e;let t=[{filters:[],groupCondition:""}];this.breadcrumbs=[],this.breadcrumbs.push({id:this.repositoryId,label:this.repositoryDetails.name,entity:this.selectedEntity,type:"REPOSITORY"}),this.breadcrumbs.length>1?this.breadcrumbs.forEach(e=>{"REPOSITORY"!=e.type&&t[0].filters.push({criteria:e.fieldName,condition:"IS_EQUALS_TO",value:e.label})}):t[0].filters.push({criteria:"isdeleted",condition:"IS_EQUALS_TO",value:"0"});let i={};i={repositoryId:this.repositoryId,parentNodeId:this.parentNodeId,sortBy:this.sortBy,groupBy:this.groupBy,filterBy:this.filterBy.length?this.filterBy:t,currentPage:this.currentPage,itemsPerPage:this.itemsPerPage,mode:this.mode,level:this.currentLevel,...this.contentSearch},this.$store.commit("showLoadingBarPage");const{error:s,payload:a}=await d["p"].getEntities(i);if(s)return void this.$alert.error(s);this.$store.commit("hideLoadingBarPage");let o=[],r=location.origin;(("http://52.172.32.88"===r||"https://demo.ezofis.com"===r||"http://localhost:8080"===r)&&"1136"===this.repositoryId||("https://edmsuat.sobhaapps.com"===r||"http://localhost:8080"===r)&&"80"===this.repositoryId||"https://edms.sobhaapps.com"===r&&"80"===this.repositoryId)&&(o=[],this.workflows.length&&o.push({id:this.$nano.id(),name:"revise",label:"Submit Revision",type:"REVISE",isVisible:!0,isSortable:!1,isGroupable:!1,dataType:c["a"].SHORT_TEXT,isFilter:!1,fieldId:0,addInfo:!0}),o.push({id:this.$nano.id(),name:"status",label:"Workflow Status",type:"STATUS",isVisible:!0,isSortable:!1,isGroupable:!1,dataType:c["a"].SHORT_TEXT,isFilter:!1,fieldId:0,addInfo:!0}),o.push({id:this.$nano.id(),name:"revision",label:"Revision",type:"NORMAL",isVisible:!0,isSortable:!1,isGroupable:!1,dataType:c["a"].SHORT_TEXT,isFilter:!1,fieldId:0,addInfo:!0})),this.columns=this.columns.filter(e=>0===e.fieldId&&!e.addInfo);let n=[];this.repositoryDetails.fields.forEach(e=>{e.visible&&n.push({id:this.$nano.id(),name:e.name,label:e.name,type:"NORMAL",isVisible:e.visible,isSortable:!0,isGroupable:!1,isFilter:!0,dataType:e.dataType,fieldId:e.id})}),this.columns=[...o,...n,...this.columns],this.entities=a.data,this.entitiesData=a.data,this.entitiesListData=a.data,this.totalItems=(null===(e=a.meta)||void 0===e?void 0:e.totalItems)||0},async updateEntity(e){this.$store.commit("showLoadingBarPage");const{error:t}=await d["p"].updateEntity(this.selectedEntity.id,e);if(this.$store.commit("hideLoadingBarPage"),t)return void this.$alert.error(t);const i=e.isDeleted?"deleted":"restored";this.$alert.success(`Entity "${this.selectedEntity.name}" ${i} successfully`),this.getEntities()},async getRepositoryField(){const{error:e,payload:t}=await d["p"].getRepositoryField({criteria:"repositoryId",value:this.repositoryId});e?this.$alert.error(e):this.repositoryField=t},clearSortBy(){this.sortBy={criteria:"",order:"ASC"}},clearGroupBy(){this.groupBy=""},minimumFileSheet(e){e.isPassword?(this.selectedFile=e,this.showFilePasswordModal=!0):"LIST"===this.activeView?(this.isFileSheetVisible=!0,this.isFilesSheetVisible=!1):this.$emit("minimumFileSheet",e)},refreshData(){"GRID"===this.activeView?this.getEntities():this.getEntitiesList()},searchRow(e){if("GRID"===this.activeView)this.entities=e?this.entitiesData.map(({key:t,value:i})=>({key:t,value:i.filter(t=>{for(let i in t){let s=this.columns.findIndex(e=>e.name===i);if(s>=0&&t[i]&&String(t[i]).toLowerCase().includes(e.toLowerCase()))return t}})})):this.entitiesData;else if(e){let t=this.columns;t.push({dataType:"SHORT_TEXT",fieldId:0,id:this.$nano.id(),isGroupable:!1,isSortable:!1,isVisible:!1,label:"fieldlist",name:"fieldlist",type:"NORMAL"}),this.entities=this.entitiesListData.map(({key:i,value:s})=>({key:i,value:s.filter(i=>{for(let s in i){let a=t.findIndex(e=>e.name===s);if(a>=0&&i[s]&&String(i[s]).toLowerCase().includes(e.toLowerCase()))return i}})}))}else this.entities=this.entitiesListData},showFilesSheet(){this.isFilesSheetVisible=!0},openFileSheet(){this.showFilePasswordModal=!1,"GRID"===this.activeView?this.$emit("minimumFileSheet",this.selectedFile):(this.isFileSheetVisible=!0,this.isFilesSheetVisible=!1)},clearFilterBy(e,t){this.filterBy[e].filters.splice(t,1),0==this.filterBy[e].filters.length&&(this.filterBy[e].filters=[],this.filterBy.splice(e,1)),0==this.filterBy.length&&(this.filterBy=[]),"GRID"===this.activeView?this.getEntities():this.getEntitiesList()},async saveViewColumns(e){this.repositoryDetails.fields.forEach(t=>{let i=e.find(e=>e.Fieldid==t.id);t.visible=!i});const{error:t}=await d["p"].setViewColumns({repositoryId:this.$route.query.repositoryId,fieldList:e});t?this.$alert.error(t):(this.$alert.success("Updated successfully"),this.getEntitiesList())},getFoldersFieldsData(e){const t={};if(e.fieldlist){let i=JSON.parse(e.fieldlist);this.repositoryColumns.forEach(e=>{let s=i.filter(t=>t.fieldId===e.name);s.length&&(t[e.name]=s[0].value)})}return t},clearContentSearch(){this.contentSearch={contentSearchValue:"",fuzzy:0,searchType:1},"GRID"===this.activeView?this.getEntities():this.getEntitiesList()},gotoInbox(){this.$router.push({name:"workflows-inbox"})},initiateRequest(e=0){this.selectedFile={},e&&(this.selectedFile=this.entities[0].value.find(t=>t.id===e)),this.initiateProcessSheet=!0},fileDownload(e){let t="";t=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.repositoryId}/${e}/2`,window.open(t,"_blank")},filePrint(e){let t="";t=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.repositoryId}/${e}/2`,window.open(t,"_blank"),this.filePrintSession(e)},emailShare(e){this.selectedFileList=[],this.selectedFileList.push({id:e.id,name:e.name}),this.emailSharingSheet=!0},emailAll(){this.selectedFileList=[],this._entitiesFile.forEach(e=>{e.data.forEach(e=>{e.selected&&this.selectedFileList.push({id:e.id,name:e.name})})}),this.emailSharingSheet=!0},emailSave(){this.getRepository(),this.itemSelected=!1,this.isAllSelected=!1,this.selectedFileList=[]},async filePrintSession(e){const{error:t}=await d["k"].filePrintSession({repositoryId:this.repositoryId,itemId:e,activityId:4});t&&this.$alert.error(t)},async getWorkflows(){this.workflows=[],this.$store.commit("showLoadingBarPage");const{error:e,payload:t}=await d["t"].getWorkflows({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"initiatedBy",condition:"CONTAINS",value:"Document",dataType:""},{criteria:"flowstatus",condition:"IS_EQUALS_TO",value:"PUBLISHED",dataType:""},{criteria:"repositoryId",condition:"IS_EQUALS_TO",value:this.repositoryId,dataType:""}],groupCondition:""}],itemsPerPage:0,currentPage:0,hasSecurity:!1});if(this.$store.commit("hideLoadingBarPage"),e)return void this.$alert.error(e);const{data:i}=t;i.length&&i[0].value.length&&i[0].value.forEach(e=>{if(2092===e.id){let t=JSON.parse(e.flowJson);this.initiateAccess=!1,"DOCUMENT_FORM"===t.settings.general.initiateUsing.type&&(this.initiateAccess=!0);let i=t.blocks.find(e=>"START"===e.type);if(i&&i.settings.initiateBy.indexOf("USER")>-1){let s=!1;if((i.settings.users.indexOf(this.$store.state.session.id)>-1||i.settings.users.indexOf("0")>-1)&&(s=!0),i.settings.initiateBy.indexOf("DOMAIN_USER")>-1){let e=this.$store.state.session.email.split("@").pop();i.settings.userDomains.indexOf(e)>-1&&(s=!0)}if(s){let s="",a=t.rules.find(e=>e.fromBlockId===i.id);a&&(s=a.proceedAction),this.workflows.push({id:e.id,name:e.name,review:s,initiateBy:e.initiatedBy,formId:e.wFormId,flowJson:e.flowJson,repositoryId:this.repositoryId,generatePDF:i.settings.generatePDF?1:0})}}}})},async export_Data(){if(this.$store.commit("showLoadingBarPage"),"GRID"===this.activeView){let e={repositoryId:this.repositoryId,parentNodeId:this.parentNodeId,sortBy:this.sortBy,groupBy:this.groupBy,filterBy:this.filterBy,currentPage:0,itemsPerPage:0,mode:this.mode,level:this.currentLevel,...this.contentSearch};const{error:t,payload:i}=await d["p"].getEntities(e);if(this.$store.commit("hideLoadingBarPage"),t)return void this.$alert.error(t);const{meta:s,data:a}=i;if(s.totalItems&&a.length){let e=[];a[0].value.forEach(t=>{e.push({Name:t.name,Level:t.level,Type:t.type,"No.of Files":t.itemsCount,Size:t.size?Object(fe["a"])(t.size):"",Version:Number(t.fileVersion),"Created By":t.createdBy,"Created At":this.$day.format(t.createdAt),"Last Modified By":t.modifiedBy,"Last Modified At":this.$day.format(t.modifiedAt)})});let t=this.repositoryDetails.name+" Folder List - Report";Object(rt["a"])(e,t)}}else{let e=[{filters:[],groupCondition:""}];e[0].filters.push({criteria:"isdeleted",condition:"IS_EQUALS_TO",value:"0"});let t={repositoryId:this.repositoryId,parentNodeId:this.parentNodeId,sortBy:this.sortBy,groupBy:this.groupBy,filterBy:this.filterBy.length?this.filterBy:e,currentPage:this.currentPage,itemsPerPage:this.itemsPerPage,mode:this.mode,level:this.currentLevel};this.$store.commit("hideLoadingBarPage");const{error:i,payload:s}=await d["p"].getEntities(t);if(i)return void this.$alert.error(i);const{meta:a,data:o}=s;if(a.totalItems&&o.length){let e=[];o[0].value.forEach(t=>{e.push({Name:t.name,Type:t.type,Size:t.size?Object(fe["a"])(t.size):"",Version:Number(t.fileVersion),...this.getFoldersFieldsData(t),"Created By":t.createdBy,"Created At":this.$day.format(t.createdAt),"Last Modified By":t.modifiedBy,"Last Modified At":this.$day.format(t.modifiedAt)})});let t=this.repositoryDetails.name+" Document List - Report";Object(rt["a"])(e,t)}}},showCheckinUploadFile(e){this.showCheckinModal=!0,this.itemId=e.id},queueFilesForUpload(e){this.filesError=!1,this.filesToUpload.push(...e)},async uploadFile(){const e=await this.$refs.checkin.validate();if(!this.filesToUpload.length)return void(this.filesError=!0);if(!e)return;let t=this.filesToUpload[0],i=0;const s=new FormData;s.append("file",t.file),s.append("repositoryId",this.repositoryId),s.append("itemId",this.itemId),s.append("comments",this.comments);let a=t.name;const o=a.split(".").pop();if(!Object(b["a"])(o))return this.filesToUpload.splice(i,1),void this.$alert.info("This file format is not supported");this.showProgress=!0,this.showDeleteBtn=!1;try{const e=await ze()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:s,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"},onUploadProgress:function(e){const i=Math.round(100*e.loaded/e.total);t.uploadedPercentage=i}}),{status:i}=e;if(200!==i)throw"Invalid response";this.$alert.success("file updated successfully"),this.reset(),this.showCheckinModal=!1,this.refreshData()}catch(r){console.error(r),this.$alert.error("error uploading file - "+t.name)}},reset(){this.filesToUpload=[],this.comments=""},deleteUploadFile(e){this.filesToUpload.splice(e,1)},openMetaDataEdit(e,t){this.repositoryId&&this.hasMetaDataEdit&&(this.selectRow=e,this.selectColumn=t,this.selectField=this._repositoryField.find(e=>e.name===t.name),this.selectField&&(this.openMetaDataEditModal=!0))},async getFolderSecurity(){const{error:e,payload:t}=await d["p"].getRepositorySecurity(this.repositoryId);if(e)this.$alert.error(e);else if(t&&t.userOptions){const e=t.userOptions.map(e=>({id:e.id,userName:e.email,userId:e.userId,options:JSON.parse(e.options)})),i=t.groupOptions.map(e=>({id:e.id,groupId:e.groupId,options:JSON.parse(e.options)}));let s=e.find(e=>e.userId===this.$store.state.session.id),a=!1;a=!(!s||!s.options)&&!!s.options.metadataEdit;let o=!1;this.$store.state.session.groups&&this.$store.state.session.groups.forEach(e=>{let t=i.find(t=>t.groupId===e.id);t&&t.options&&t.options.metadataEdit&&(o=!0)}),this.hasMetaDataEdit=!(!a&&!o)}},closeModal(){this.openMetaDataEditModal=!1,this.selectRow={},this.selectColumn={},this.newValue=""},async saveMetaData(){const e=await this.$refs.form.validate();if(!e)return;if(!this.newValue)return void(this.newValueError=!0);this.$store.commit("showLoadingBar");let t=[{fieldId:this.selectColumn.fieldId,oldValue:this.selectRow[this.selectColumn.name],newValue:this.newValue}],i={repositoryId:this.repositoryId,itemId:this.selectRow.id,settings:JSON.stringify(t)};const{error:s,payload:a}=await d["p"].saveMetaData(i);this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):(a&&this.$alert.success("Metadata edit successfully"),this.closeModal(),this.refreshData())},updateSelectAll(e){if(e)this.itemSelected=e,this.isAllSelected=e;else{const t=this._entitiesFile.some(e=>e.data.some(e=>!0===e.selected));this.itemSelected=t,this.isAllSelected=e}},downloadAll(){this._entitiesFile.forEach(e=>{e.data.forEach(e=>{if(e.selected){let t="";t=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.repositoryId}/${e.id}/2`,window.open(t,"_blank")}})}),this.getRepository(),this.itemSelected=!1,this.isAllSelected=!1},printAll(){this._entitiesFile.forEach(e=>{e.data.forEach(e=>{if(e.selected){let t="";t=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.repositoryId}/${e.id}/2`,window.open(t,"_blank"),this.filePrintSession(e.id)}})}),this.getRepository(),this.itemSelected=!1,this.isAllSelected=!1}}},mt=ht,pt=(i("b9c9"),Object(k["a"])(mt,n,l,!1,null,"0a709ed0",null)),ft=pt.exports;_()(pt,"components",{QSpace:S["a"]});var vt={name:"RepositoriesBrowseAndTrashWrapper",components:{RepositoriesBrowseAndTrash:r["default"],RepositoryBrowseAndTrash:ft},props:{mode:{type:String,required:!0},fullFileSheet:{type:Object,default:()=>{}},hideFileSheet:{type:Boolean,default:!1}},computed:{component(){return Object(o["a"])(this.$route.query)?"RepositoriesBrowseAndTrash":"RepositoryBrowseAndTrash"}},methods:{minimumFileSheet(e){this.$emit("minimumFileSheet",e)}}},yt=vt,bt=Object(k["a"])(yt,s,a,!1,null,"1b0829ac",null);t["default"]=bt.exports},c925:function(e,t,i){"use strict";i("65c0")},cbc3:function(e,t,i){},cc92:function(e,t,i){},cccc:function(e,t,i){"use strict";i("307a")},cd8d:function(e,t,i){"use strict";i("00f0")},cdde:function(e,t,i){"use strict";function s(e){const t=document.createElement("textarea");t.value=e,t.contentEditable=!0,t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();const i=document.execCommand("copy");return t.remove(),i}t["a"]=function(e){return void 0!==navigator.clipboard?navigator.clipboard.writeText(e):new Promise((t,i)=>{const a=s(e);a?t(!0):i(a)})}},d2fb:function(e,t,i){"use strict";i("71f4")},d30f:function(e,t,i){},d37d:function(e,t,i){"use strict";i("4f21")},d3dd:function(e,t,i){"use strict";i("4519")},d406:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{class:{"is-selected":e.isSelected||e.file.id===e.fileId,"mini-mode":e.miniMode},attrs:{id:"file-list-item"},on:{click:function(t){return e.$emit("selectFile")},mouseover:function(t){e.fileId=e.file.id},mouseleave:function(t){e.fileId=0}}},[t("div",{staticClass:"avatar"},[t("FileIcon",{attrs:{"mime-type":e.type}})],1),t("div",{staticClass:"q-ml-md"},[t("div",e._g({staticClass:"title",on:{click:e.viewFile}},e.$listeners),[e._v(" "+e._s(e.file.name)+" "),e._t("info")],2),t("div",{staticClass:"meta"},[e.repository?[t("div",[e._v(e._s(e.repository))]),t("BaseIcon",{attrs:{name:"mdi-circle-small"}})]:e._e(),t("div",[e._v(e._s(e.createdAt))]),e.file.createdBy&&!e.miniMode?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.file.createdBy))])]:e._e(),e.file.size?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.size))])]:e._e(),e.file.ocrType?[t("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t("div",[e._v(e._s(e.file.ocrType))])]:e._e(),e._t("status")],2)]),t("q-space"),e._t("default")],2)},a=[],o=i("fa1f"),r=i("a7d2"),n={name:"FileListItem",components:{FileIcon:o["a"]},props:{file:{type:Object,required:!0},isSelected:{type:Boolean,default:!1},miniMode:{type:Boolean,default:!1}},data(){return{fileId:0}},computed:{type(){return this.file.name.split(".").reverse()[0].slice(0,4)},repository(){if(this.file.repository)return this.file.repository.value},createdAt(){return this.$day.format(this.file.createdAt)},size(){return Object(r["a"])(this.file.size)}},methods:{viewFile(){this.$emit("view",this.file)}}},l=n,d=(i("8b18"),i("2877")),c=i("2c91"),u=i("93dc"),h=i.n(u),m=Object(d["a"])(l,s,a,!1,null,"0b7b1cb3",null);t["a"]=m.exports;h()(m,"components",{QSpace:c["a"]})},d8cf:function(e,t,i){"use strict";i("48d5")},dc7a:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"repository-list"}},[t("div",{staticClass:"title"},[e._v("Folder")]),t("div",{staticClass:"wrapper"},[t("ValidationProvider",{attrs:{name:"repository",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("SelectField",{attrs:{value:e.value,"is-mandatory":"","is-clearable":!1,options:e.repositories,"is-readonly":"",error:i[0]},on:{input:e.handleInput}})]}}])})],1)])},a=[],o=i("1b0d"),r=i("7bb1"),n=i("12b8"),l={name:"RepositoryList",components:{ValidationProvider:r["b"],SelectField:n["a"]},props:{value:{type:Number,required:!0},workspaceId:{type:Number,required:!0}},data(){return{repositories:[]}},watch:{workspaceId:{immediate:!0,handler:"getRepositories"}},methods:{handleInput(e){this.$emit("input",e)},async getRepositories(){if(this.workspaceId){this.repositories=[],this.$store.commit("showLoadingBar");const{error:e,payload:t}=await o["p"].getRepositoryList("workspaceId",this.workspaceId);if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);if(!t.length)return;this.repositories=t.map(e=>({id:this.$nano.id(),label:e.value,value:e.id}))}}}},d=l,c=(i("39cc"),i("2877")),u=Object(c["a"])(d,s,a,!1,null,"11e49f8b",null);t["a"]=u.exports},dccd:function(e,t,i){},e09c:function(e,t,i){},e0b6:function(e,t,i){},e21c:function(e,t,i){"use strict";i("e09c")},e5e9:function(e,t,i){},e864:function(e,t,i){"use strict";i("1137")},e887:function(e,t,i){},e953:function(e,t,i){"use strict";i("8fbb")},e9c1:function(e,t,i){"use strict";var s=i("a026"),a=i("e277"),o=i("d54d");t["a"]=s["default"].extend({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},methods:{__begin(e,t,i){e.style.overflowY="hidden",void 0!==t&&(e.style.height=t+"px"),e.style.transition=`height ${this.duration}ms cubic-bezier(.25, .8, .50, 1)`,this.animating=!0,this.done=i},__end(e,t){e.style.overflowY=null,e.style.height=null,e.style.transition=null,this.__cleanup(),t!==this.lastEvent&&this.$emit(t)},__cleanup(){this.done&&this.done(),this.done=null,this.animating=!1,clearTimeout(this.timer),clearTimeout(this.timerFallback),void 0!==this.el&&this.el.removeEventListener("transitionend",this.animListener),this.animListener=null}},beforeDestroy(){this.animating&&this.__cleanup()},render(e){return e("transition",{props:{css:!1,appear:this.appear},on:Object(o["b"])(this,"tr",{enter:(e,t)=>{let i=0;this.el=e,!0===this.animating?(this.__cleanup(),i=e.offsetHeight===e.scrollHeight?0:void 0):this.lastEvent="hide",this.__begin(e,i,t),this.timer=setTimeout(()=>{e.style.height=e.scrollHeight+"px",this.animListener=t=>{Object(t)===t&&t.target!==e||this.__end(e,"show")},e.addEventListener("transitionend",this.animListener),this.timerFallback=setTimeout(this.animListener,1.1*this.duration)},100)},leave:(e,t)=>{let i;this.el=e,!0===this.animating?this.__cleanup():(this.lastEvent="show",i=e.scrollHeight),this.__begin(e,i,t),this.timer=setTimeout(()=>{e.style.height=0,this.animListener=t=>{Object(t)===t&&t.target!==e||this.__end(e,"hide")},e.addEventListener("transitionend",this.animListener),this.timerFallback=setTimeout(this.animListener,1.1*this.duration)},100)}})},Object(a["c"])(this,"default"))}})},ea98:function(e,t,i){"use strict";i("1bfa")},eb85:function(e,t,i){"use strict";var s=i("a026"),a=i("b7fa"),o=i("87e8");const r={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},n={xs:2,sm:4,md:8,lg:16,xl:24};t["a"]=s["default"].extend({name:"QSeparator",mixins:[a["a"],o["a"]],props:{spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},computed:{orientation(){return!0===this.vertical?"vertical":"horizontal"},classPrefix(){return" q-separator--"+this.orientation},insetClass(){return!1!==this.inset?`${this.classPrefix}-${r[this.inset]}`:""},classes(){return`q-separator${this.classPrefix}${this.insetClass}`+(void 0!==this.color?" bg-"+this.color:"")+(!0===this.isDark?" q-separator--dark":"")},style(){const e={};if(void 0!==this.size&&(e[!0===this.vertical?"width":"height"]=this.size),!1!==this.spaced){const t=!0===this.spaced?n.md+"px":this.spaced in n?n[this.spaced]+"px":this.spaced,i=!0===this.vertical?["Left","Right"]:["Top","Bottom"];e["margin"+i[0]]=e["margin"+i[1]]=t}return e},attrs(){return{"aria-orientation":this.orientation}}},render(e){return e("hr",{staticClass:"q-separator",class:this.classes,style:this.style,attrs:this.attrs,on:{...this.qListeners}})}})},ed03:function(e,t,i){},ee26:function(e,t,i){"use strict";i("cbc3")},ee54:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("Modal",{attrs:{value:e.value,"has-footer":"",width:"540px"},on:{input:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.title))]},proxy:!0},{key:"default",fn:function(){return[t("ValidationObserver",{ref:"form"},[e.editFromFileSheet?e._e():e._l(e._repositoryField,(function(i){return t("div",{key:i.id,staticClass:"field-wrapper"},[[[t("RepositoryField",{staticClass:"col",attrs:{field:i,"repository-id":e.file.repositoryId,"read-only":e.readOnly},model:{value:e.fieldsModel[i.name],callback:function(t){e.$set(e.fieldsModel,i.name,t)},expression:"fieldsModel[field.name]"}})]]],2)})),e.editFromFileSheet?e._l(e.fieldsModalData,(function(i){return t("div",{key:i.id,staticClass:"field-wrapper"},[[[t("RepositoryField",{staticClass:"col",attrs:{field:e.getField(i.fieldId),"repository-id":e.file.repositoryId,"read-only":e.readOnly},model:{value:i.newValue,callback:function(t){e.$set(i,"newValue",t)},expression:"field.newValue"}})]]],2)})):e._e()],2)]},proxy:!0},{key:"footer",fn:function(){return[t("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:e.closeModal}}),t("BaseButton",{attrs:{label:"save"},on:{click:e.save}})]},proxy:!0}])})},a=[],o=(i("14d9"),i("7bb1")),r=i("6a70"),n=i("7794"),l=i("9996"),d=i("7ee8"),c={name:"MetaDataEdit",components:{Modal:r["a"],ValidationObserver:o["a"],RepositoryField:n["a"]},props:{value:{type:Boolean,default:!1},file:{type:Object,required:!0},repositoryField:{type:Array,required:!0},fileData:{type:Array,required:!0},title:{type:String,default:"Metadata Edit"},columns:{type:Array,default:()=>[]},modalValue:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1},uploadFilename:{type:String,default:""},editFromFileSheet:{type:Boolean,default:!1},metaDataFields:{type:Object,default:()=>{}}},data(){return{fieldsModel:{},fieldsModalData:[]}},computed:{_repositoryField(){return this.repositoryField.map(e=>({...e,options:e.options?JSON.parse(e.options):[]}))}},watch:{fileData:{immediate:!0,deep:!0,async handler(){this.editFromFileSheet?(this.fieldsModalData=[],this.fileData.length&&this.fileData.forEach(e=>{this.fieldsModalData.push({fieldId:e.id,oldValue:e.value,newValue:e.value})})):this.processFieldsModel()}},value(){this.value&&this.processFieldsModel()}},methods:{processFieldsModel(){if(this.fieldsModel={},this.fileData.length?this.fileData.forEach(e=>{this.$set(this.fieldsModel,e.name,e.value)}):this._repositoryField.forEach(e=>{let t=this.columns.find(t=>Object(l["a"])(t.label)===Object(l["a"])(e.name));t?this.modalValue.formData?this.$set(this.fieldsModel,e.name,this.modalValue.formData.fields[t.id]):this.modalValue[t.name]?this.$set(this.fieldsModel,e.name,this.modalValue[t.name]):this.modalValue[t.id]&&this.$set(this.fieldsModel,e.name,this.modalValue[t.id]):Object(d["a"])(this.metaDataFields)?this.$set(this.fieldsModel,e.name,""):this.$set(this.fieldsModel,e.name,this.metaDataFields[e.name])}),this.uploadFilename){let e=this.uploadFilename.substring(0,this.uploadFilename.lastIndexOf(".")),t=this._repositoryField.find(e=>"filename"==e.name.toLowerCase());t&&this.$set(this.fieldsModel,t.name,e)}},closeModal(){this.$emit("close",!1)},async save(){const e=await this.$refs.form.validate();e&&(this.$emit("save",this.editFromFileSheet?this.fieldsModalData:this.fieldsModel),this.$emit("close",!1))},getField(e){let t=this._repositoryField.find(t=>e===t.id);if(t)return t}}},u=c,h=(i("4697"),i("2877")),m=Object(h["a"])(u,s,a,!1,null,"059cbd7c",null);t["a"]=m.exports},ee74:function(e,t,i){},ee7b:function(e,t,i){},f108:function(e,t,i){},f92f:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"item-list"}},[e.selectedDummyData?e._t("default"):e._e(),t("BaseScrollbar",{attrs:{height:e.breadcrumbs||e.report?"calc(100vh - 310px)":"calc(100vh - 260px)"}},[t("table",[e.tableHeader?t("thead",[t("tr",{staticStyle:{"background-color":"var(--body-bg-color)"}},[t("th",{staticClass:"sticky icon",staticStyle:{left:"0"}},[e.checkbox?t("div",{staticClass:"row items-center justify-center"},[t("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:e.handleSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}})],1):e._e()]),e.repository&&e.checkbox?[t("th",{staticClass:"sticky file-mark-icon",staticStyle:{left:"44px"}}),e.title?t("th",{staticClass:"sticky",staticStyle:{left:"80px"}},[e._t("titleHead",(function(){return[e._v(" "+e._s(e.title.label)+" ")]}),{title:e.title.label})],2):e._e()]:[e.title?t("th",{staticClass:"sticky",staticStyle:{left:"36px"}},[e._t("titleHead",(function(){return[e._v(" "+e._s(e.title.label)+" ")]}),{title:e.title.label})],2):e._e()],e._l(e._columns,(function(i){return t("th",{key:i.id},[e._v(" "+e._s(i.label)+" ")])})),e.noActions?e._e():t("th",{staticClass:"sticky action",staticStyle:{right:"0"}})],2)]):e._e(),t("tbody",[e._l(e.items,(function({key:i,value:s,data:a}){return[i?t("tr",{key:s},[t("td",{staticClass:"group-by",attrs:{colspan:"2"}},[t("span",{staticClass:"key"},[e._v(e._s(i)+": ")]),t("span",[e._v(e._s(s)+" ")]),t("span",[e._v("("+e._s(a.length)+")")])])]):e._e(),e._l(a,(function(i,s){return[t("tr",{key:i.id,class:{"no-border":0===s,background:!e.noBackground,checkout:2===i.checkinStatus},on:{click:function(t){return e.toggleLink(i,a)}}},[e.repository&&e.checkbox?[t("td",{staticClass:"sticky icon",staticStyle:{left:"0"}},[e.checkbox?t("div",{staticClass:"row items-center justify-center"},[t("CheckboxField",{on:{input:function(t){return e.handleCheckboxChange(i.id)}},model:{value:i.selected,callback:function(t){e.$set(i,"selected",t)},expression:"item.selected"}})],1):e._e()]),t("td",{staticClass:"sticky file-mark-icon",staticStyle:{left:"44px"}},[t("div",{staticClass:"row items-center justify-center",staticStyle:{width:"20px"}},[e._t("avatar",null,{item:i})],2)])]:[t("td",{staticClass:"sticky icon",staticStyle:{left:"0",width:"36px"}},[e.checkbox?t("div",{staticClass:"col items-center justify-center"},[t("CheckboxField",{on:{input:function(t){return e.handleCheckboxChange(i.id)}},model:{value:i.selected,callback:function(t){e.$set(i,"selected",t)},expression:"item.selected"}}),i.subWorkflow?[i.subWorkflow.length?t("BaseIcon",{staticClass:"cursor-pointer q-ml-sm",attrs:{name:i.expandSubworkflow?"mdi-chevron-down":"mdi-chevron-up"}}):e._e()]:e._e()],2):t("div",{staticClass:"col items-center justify-center"},[e._t("avatar",(function(){return[i.buttonAction?["Closed"!==i.status?[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Mark Completed",expression:"'Mark Completed'",modifiers:{top:!0}}],attrs:{name:e.selectedRowIndex===s?"mdi-check":i.icon,color:e.selectedRowIndex===s?"primary":i.color},on:{mouseover:function(t){e.selectedRowIndex=s},mouseout:function(t){e.selectedRowIndex=-1},click:function(t){return e.$emit("complete",i.id)}}})]:[t("BaseIcon",{attrs:{name:i.icon,color:i.color}})]]:[i.iconTooltip?[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.iconTooltip,expression:"item.iconTooltip",modifiers:{top:!0}}],attrs:{name:i.icon,color:i.color||"secondary"}})]:[t("BaseIcon",{attrs:{name:i.icon,color:i.color||"secondary"}})]]]}),{item:i}),i.subWorkflow?[i.subWorkflow.length?t("BaseIcon",{staticClass:"cursor-pointer q-ml-sm",attrs:{name:i.expandSubworkflow?"mdi-chevron-down":"mdi-chevron-up"}}):e._e()]:e._e()],2)])],e.title?t("td",{staticClass:"sticky",style:"left:"+e.leftcount,on:{click:function(t){i.link&&e.$emit("select",i.id,a)}}},[e._t("title",(function(){return[t("div",{staticClass:"font-medium ellipsis",class:i.link?"text-underline":"",staticStyle:{"max-width":"250px"}},[t("span",{on:{mouseover:function(t){return e.$emit("showThumbnail",i,t)},mouseleave:function(t){return e.$emit("hideThumbnail",i)}}},[e._v(e._s(i[e.title.name])+" ")])])]}),{item:i,title:i[e.title.name]}),e._t("thumbnail",null,{item:i})],2):e._e(),e._l(e._columns,(function(s){return t("td",{key:s.id},[e._t(s.name,(function(){return["TABLE"===s.dataType?[i[s.name]?[t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Table Data",expression:"'Table Data'",modifiers:{top:!0}}],attrs:{icon:"mdi-table","is-flat":"","no-border":""},on:{click:function(t){return t.stopPropagation(),e.showTable(s.name,i[s.name])}}})]:[t("BaseActionButton",{attrs:{icon:"mdi-table","is-flat":"","no-border":"","is-disabled":""}})]]:"ICON"===s.type?[i[s.name]?[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.iconTooltip[s.name],expression:"item.iconTooltip[column.name]",modifiers:{top:!0}}],attrs:{name:i[s.name],color:i.iconColor[s.name]}})]:[e._v(" "+e._s("-")+" ")]]:"FILE_UPLOAD"===s.dataType?[i[s.name]?["string"===typeof i[s.name]?t("div",{staticClass:"ellipsis medium"},e._l(JSON.parse(i[s.name]),(function(s,a){return t("div",{key:a,staticClass:"row"},[t("FileIcon",{staticClass:"mini-avatar col-auto q-mr-sm",attrs:{"mime-type":e.fileType(s.fileName)}}),t("span",{staticClass:"text-secondary file-underline col",on:{click:function(t){return e.viewFile(s,i)}}},[e._v(e._s(s.fileName))])],1)})),0):t("div",{staticClass:"ellipsis medium"},e._l(i[s.name],(function(s,a){return t("div",{key:a,staticClass:"row"},[t("FileIcon",{staticClass:"mini-avatar col-auto q-mr-sm",attrs:{"mime-type":e.fileType(s.fileName)}}),t("span",{staticClass:"text-secondary file-underline col",on:{click:function(t){return e.viewFile(s,i)}}},[e._v(e._s(s.fileName))])],1)})),0)]:e._e()]:[t("div",{class:{"data-change":e.hasMetaDataEdit},on:{click:function(t){return e.handleOpenInput(i,s)}}},[e._v(" "+e._s(i[s.name]||"-")+" ")])]]}),{value:i[s.name],item:i})],2)})),e.noActions?e._e():t("td",{staticClass:"sticky action",staticStyle:{right:"0",width:"50px"}},[e._t("actions",(function(){return["BROWSE"===e.mode?[i.actionAccess?e._e():[t("div",{staticClass:"row justify-end no-wrap"},[e.security||e.visibility(i)?[i.actionButton?[i.infoIcon?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.infoIconTooltip,expression:"item.infoIconTooltip",modifiers:{top:!0}}],attrs:{icon:i.infoIcon,color:i.infoIconColor?i.infoIconColor:"primary","is-flat":"","no-border":""},on:{click:function(t){return t.stopPropagation(),e.$emit("info",i.id)}}}):e._e(),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"mdi-check-all",color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit",i.id)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"mdi-bell-outline",color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit",i.id)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-edit-outline",color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit",i.id)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-shield-outline"},on:{click:function(t){return t.stopPropagation(),e.$emit("secure",i.id)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline",color:"red"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete",i.id)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-more-vertical"},on:{click:function(t){return t.stopPropagation(),e.$emit("more",i.id)}}},[e._t("extraMenu")],2)]:[i.infoIcon?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.infoIconTooltip,expression:"item.infoIconTooltip",modifiers:{top:!0}}],attrs:{icon:i.infoIcon,color:i.infoIconColor?i.infoIconColor:"primary","is-flat":"","no-border":""},on:{click:function(t){return t.stopPropagation(),e.$emit("info",i.id)}}}):e._e(),1===i.emailStatus?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"send invite",expression:"'send invite'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-email-check-outline",color:"green"},on:{click:function(t){return t.stopPropagation(),e.$emit("resend",i.id)}}}):0===i.emailStatus?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"send invite",expression:"'send invite'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-email-sync-outline",color:"orange"},on:{click:function(t){return t.stopPropagation(),e.$emit("resend",i.id)}}}):e.resend?t("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"send invite",expression:"'send invite'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-email-outline",color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.$emit("resend",i.id)}}}):e._e(),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-edit-outline",color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit",i.id)}}}),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline",color:"red"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete",i.id)}}}),e.showExport?t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-download-outline",color:"orange"},on:{click:function(t){return t.stopPropagation(),e.$emit("export",i.id)}}}):e._e(),t("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-more-vertical"},on:{click:function(t){return t.stopPropagation(),e.$emit("more",i.id)}}},[e._t("extraMenu")],2)]]:e._e()],2)]]:e._e(),"TRASH"===e.mode?[t("div",{staticClass:"row justify-end"},[t("BaseActionButton",{attrs:{"is-flat":"",color:"secondary",icon:"mdi-history","no-border":""},on:{click:function(t){return t.stopPropagation(),e.$emit("restore",i.id)}}})],1)]:e._e()]}),{item:i})],2)],2),i.subWorkflow?[i.subWorkflow.length?[i.expandSubworkflow?t("tr",{key:i.id,staticClass:"sub-background"},[t("td",{attrs:{colspan:e._columns.length+3}},[t("table",{key:"subtable"+i.id,staticStyle:{"margin-left":"20px",border:"1px solid var(--divider-color)","table-layout":"fixed","max-width":"70%","min-width":"calc(70% - 1px)","border-collapse":"collapse","white-space":"nowrap"}},[t("thead",[t("tr",[t("th",{staticClass:"sticky icon",staticStyle:{left:"0","background-color":"rgb(222 217 247)",width:"2%"},attrs:{name:"icon"}}),e.title?t("th",{staticClass:"sticky",staticStyle:{left:"36px","background-color":"rgb(222 217 247)",width:"2%"},attrs:{name:"title"}},[t("div",{staticClass:"font-medium ellipsis",staticStyle:{"max-width":"250px"}},[e._v(" "+e._s(e.title.label)+" ")])]):e._e(),e._l(e._subWorkflowColumns,(function(i){return t("th",{key:i.id,staticStyle:{"background-color":"rgb(222 217 247)",width:"2%"}},[e._v(" "+e._s(i.label)+" ")])})),t("th",{staticClass:"sticky",staticStyle:{"background-color":"rgb(222 217 247)"}})],2)]),t("tbody",[e._l(i.subWorkflow,(function(i){return[t("tr",{key:i.requestNo},[t("td",{staticClass:"sticky icon sub-background",staticStyle:{left:"0"},attrs:{name:"avatar"}},[t("div",{staticClass:"row items-center sticky justify-center"},[t("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.iconTooltip,expression:"subItem.iconTooltip",modifiers:{top:!0}}],attrs:{name:i.icon,color:i.color}})],1)]),t("td",{staticClass:"sticky sub-background",staticStyle:{left:"0",width:"20%",color:"#007bff",cursor:"pointer"},attrs:{name:"title"}},[t("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.requestNo,expression:"subItem.requestNo",modifiers:{top:!0}}],staticClass:"row items-center text-underline",staticStyle:{overflow:"hidden !important","white-space":"unset !important",width:"220px"},on:{click:function(t){return e.openSubProcess(i)}}},[e._v(" "+e._s(i.requestNo||"-")+" ")])]),t("td",{staticClass:"sub-background",staticStyle:{width:"20%"}},[e._v(" "+e._s(i.stage)+" ")]),t("td",{staticClass:"sub-background",staticStyle:{width:"20%"}},[e._v(" "+e._s(i.raisedBy)+" ")]),t("td",{staticClass:"sub-background",staticStyle:{width:"20%"}},[e._v(" "+e._s(i.raisedAt)+" ")]),t("td",{staticClass:"sticky sub-background",staticStyle:{right:"0px",width:"20%"}},[e._t("subactions",null,{item:i})],2)])]}))],2)])])]):e._e()]:e._e()]:e._e()]}))]}))],2)])]),t("Modal",{attrs:{width:"60vw",height:"80vh"},on:{input:function(t){e.expandTableModal=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.tableTitle))]},proxy:!0},{key:"default",fn:function(){return[t("div",{attrs:{id:"tableData"}},[e.tableData.cellvalues?[t("table",e._l(e.tableData.cellvalues,(function(i,s){return t("tr",{key:s},e._l(i,(function(i){return t("NoHeader"===i.kind?"td":"th",{key:`r${s}_c${i.columnindex}`,tag:"th"},[e._v(" "+e._s(i.cellvalue)+" ")])})),1)})),0)]:[t("table",[t("thead",[t("tr",e._l(e.tableData[0],(function(i,s){return t("th",{key:s},[e._v(" "+e._s(s)+" ")])})),0)]),t("tbody",e._l(e.tableData,(function(i,s){return t("tr",{key:s},e._l(i,(function(i,s){return t("td",{key:s},[e._v(" "+e._s(i)+" ")])})),0)})),0)])]],2)]},proxy:!0}]),model:{value:e.expandTableModal,callback:function(t){e.expandTableModal=t},expression:"expandTableModal"}})],2)},a=[],o=(i("caad"),i("869e")),r=i("6a70"),n=i("fa1f"),l={name:"ItemList",components:{CheckboxField:o["a"],Modal:r["a"],FileIcon:n["a"]},props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},mode:{type:String,required:!0},noBackground:{type:Boolean,default:!1},noActions:{type:Boolean,default:!1},tableHeader:{type:Boolean,default:!0},security:{type:Boolean,default:!0},checkbox:{type:Boolean,default:!1},hasMetaDataEdit:{type:Boolean,required:!1},breadcrumbs:{type:Boolean,default:!1},report:{type:Boolean,default:!1},resend:{type:Boolean,default:!1},selectAll:{type:Boolean,default:!1},repository:{type:Boolean,default:!1},showExport:{type:Boolean,default:!1}},data(){return{selectedRowIndex:-1,userId:this.$store.state.session.id,email:this.$store.state.session.email,selectedDummyData:!1,expandTableModal:!1,tableTitle:"",tableData:[]}},computed:{_columns(){return this.columns.filter(e=>"TITLE"!==e.type&&e.isVisible)},title(){return this.columns.find(e=>"TITLE"===e.type)},leftcount(){return this.repository&&this.checkbox?"80px":"36px"},_subWorkflowColumns(){let e=[{id:this.$nano.id(),name:"stage",label:"Stage",type:"SINGLE_SELECT",isVisible:!0,isSortable:!0,isGroupable:!1},{id:this.$nano.id(),name:"raisedBy",label:"Raised By",type:"SINGLE_SELECT",isVisible:!0,isSortable:!0,isGroupable:!1},{id:this.$nano.id(),name:"raisedAt",label:"Raised On",type:"DATE",isVisible:!0,isSortable:!0,isGroupable:!1}];return e}},created(){this.items.forEach(e=>{e.data.forEach(e=>{this.$set(e,"selected",!1)})})},methods:{visibility(e){const t=Number(this.userId),i=this.email;let s=!1;const a=e.owner?e.owner.map(e=>e.id):[0],o=e.coordinator?e.coordinator.map(e=>e.id):[0];return(e.createdBy===i||a.includes(t)||o.includes(t)||1===t)&&(s=!0),s},handleCheckboxChange(e){this.selectAll=!1,this.selectedDummyData=!this.selectedDummyData;const t=this.items.flatMap(e=>e.data).find(t=>t.id===e);t&&this.$set(t,"selected",t.selected),this.$emit("update-selected-all",this.selectAll)},handleSelectAll(){!0===this.selectAll&&this.items.forEach(e=>{e.data.forEach(e=>{this.$set(e,"selected",!0)})}),!1===this.selectAll&&this.items.forEach(e=>{e.data.forEach(e=>{this.$set(e,"selected",!1)})}),this.$emit("update-selected-all",this.selectAll)},showTable(e,t){t&&(this.report?this.$emit("showTable",e,t):(this.tableTitle=e,this.tableData=JSON.parse(t),this.expandTableModal=!0))},handleOpenInput(e,t){this.$emit("openMetaDataEdit",e,t)},viewFile(e,t){e.createdBy=t.createdBy,e.createdAt=t.createdAt,e.name||(e.name=e.fileName),e.id||(e.id=e.itemId),this.$emit("viewFile",e)},fileType(e){if(e)return e.split(".").reverse()[0].slice(0,4)},toggleLink(e,t){e.expandSubworkflow=!e.expandSubworkflow,!e.link&&this.$emit("select",e.id,t),this.selectedDummyData=!this.selectedDummyData},openSubProcess(e){this.$emit("openSubWorkflow",e)}}},d=l,c=(i("d37d"),i("2877")),u=Object(c["a"])(d,s,a,!1,null,"00be4c3f",null);t["a"]=u.exports},f98d:function(e,t,i){},fa45:function(e,t,i){},fad0:function(e,t,i){},ff59:function(e,t,i){}}]);
//# sourceMappingURL=repository-browse.ff1cecf0.js.map