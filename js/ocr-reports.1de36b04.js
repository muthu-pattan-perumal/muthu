(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ocr-reports","form-builder~forms-trash~groups-trash~integration-browse~leave-trash~portals-trash~repositories-over~fc714461","form-builder~forms-trash~groups-trash~integration-browse~leave-trash~portals-trash~repositories-over~b968ab97","custom-form~external-request~portal-accesss-custom","integration-browse~repositories-reports-overview"],{"0059":function(t,e,i){"use strict";i("eead")},"00c2":function(t,e,i){t.exports=i.p+"img/name-light.137e40b6.png"},"00f0":function(t,e,i){},"0170":function(t,e,i){"use strict";var s=i("a026"),a=i("87e8"),o=i("e277");e["a"]=s["default"].extend({name:"QItemLabel",mixins:[a["a"]],props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},computed:{classes(){return{"q-item__label--overline text-overline":this.overline,"q-item__label--caption text-caption":this.caption,"q-item__label--header":this.header,ellipsis:1===parseInt(this.lines,10)}},style(){if(void 0!==this.lines&&parseInt(this.lines,10)>1)return{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":this.lines}}},render(t){return t("div",{staticClass:"q-item__label",style:this.style,class:this.classes,on:{...this.qListeners}},Object(o["c"])(this,"default"))}})},"02fb":function(t,e,i){"use strict";i("8920")},"064c":function(t,e,i){"use strict";i("caad");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row items-center",attrs:{id:"item-actions"}},[(t.customProcessForm,t._e()),t.sendInvite?[e("div",{attrs:{classs:"cursor-pointer"},on:{click:function(e){return t.$emit("invite")}}},[e("q-chip",{staticClass:"cursor-pointer primary-hover q-mr-sm",attrs:{outline:"",color:"primary"}},[e("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-account-plus",color:"primary","text-color":"white"}}),t._v(" Send Invite ")],1)],1)]:t._e(),t.processForward?[e("div",{attrs:{classs:"cursor-pointer"},on:{click:function(e){return t.$emit("forward")}}},[e("q-chip",{staticClass:"cursor-pointer orange-hover",attrs:{outline:"",color:"orange"}},[e("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-arrow-right",color:"orange","text-color":"white"}}),t._v(" Assign ")],1)],1)]:t._e(),t.workflowInitiate?[t.initiateAccess?[e("div",{attrs:{classs:"cursor-pointer "},on:{click:function(e){return t.$emit("initiate")}}},[e("q-chip",{staticClass:"cursor-pointer secondary-hover q-mr-sm",attrs:{outline:"",color:"secondary"}},[e("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-plus-thick",color:"secondary","text-color":"white"}}),t._v(" Initiate ")],1)],1)]:[e("q-chip",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Choose document to initiate",expression:"'Choose document to initiate'",modifiers:{top:!0}}],staticClass:"cursor-pointer secondary-hover",attrs:{outline:"",disable:"",color:"secondary"}},[e("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-plus-thick",color:"secondary","text-color":"white"}}),t._v(" Initiate ")],1)]]:t._e(),t.gotoInbox?e("div",{staticClass:"cursor-pointer q-mr-xs",on:{click:function(e){return t.$emit("inbox")}}},[e("q-chip",{staticClass:"cursor-pointer primary-hover",attrs:{outline:"",color:"primary"}},[e("q-avatar",{staticClass:"q-mr-md",attrs:{icon:"mdi-email",color:"primary","text-color":"white"}}),t._v(" My Inbox ")],1)],1):t._e(),t.workflowImport?e("ImportPopup",{attrs:{"chip-button":!0,"data-imported":t.dataImported,"form-id":t.formId},on:{upload:t.upload,close:t.closeImport}}):t._e(),t.downloadAll?e("div",{staticClass:"row q-pr-xs",class:{download:t.checkIconCount}},[t.visibleDownload?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"download",expression:"'download'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-ml-xs q-mr-xs",attrs:{icon:"mdi-download-outline","is-flat":"","no-border":""},on:{click:function(e){return t.$emit("downloadAll",t.item.id)}}}):t._e(),t.visiblePrint?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"print",expression:"'print'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-ml-xs q-mr-xs",attrs:{"is-flat":"","no-border":"",icon:"eva-printer-outline"},on:{click:function(e){return e.stopPropagation(),t.$emit("printAll",t.item.id)}}}):t._e(),t.visibleEmail?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Email Sharing",expression:"'Email Sharing'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-ml-xs q-mr-xs",attrs:{"is-flat":"","no-border":"",icon:"mdi-email-outline"},on:{click:function(e){return e.stopPropagation(),t.$emit("emailAll",t.item)}}}):t._e(),t.visibleDelete?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Delete",expression:"'Delete'",modifiers:{top:!0}}],staticClass:"repositoryIcon q-pa-sm",attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline"},on:{click:function(e){return t.$emit("deleteFileAction",t.item.id)}}}):t._e()],1):t._e(),t._t("filterSearchIcon"),t.simpleSearchFilter?e("div",[t.hideActions.includes("search")?t._e():e("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:t.searchTable}})],1):e("div",{staticClass:"q-mr-xs"},[e("SimpleSearchWithFilter",{attrs:{columns:t.columns,"filter-by":t.filterBy},on:{keyup:t.searchTable,update:t.updateSimpletSearchFilterBy}})],1),t.id?e("SelectField",{staticClass:"fieldList q-mr-sm",attrs:{"is-mandatory":"",placeholder:"Select day","is-searchable":!0,options:t.dateFilter},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}}):t._e(),t.refresh||t.id?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"eva-refresh"},on:{click:function(e){return t.$emit("refresh")}}}):t._e(),t.jiraConnect?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"JIRA - Create Issue",expression:"'JIRA - Create Issue'",modifiers:{top:!0}}],attrs:{icon:"mdi-jira","no-border":"","is-flat":""},on:{click:function(e){return t.$emit("jira")}}}):t._e(),"TRASH"===t.mode?e("div",{staticClass:"row justify-end"},[t.deleteBtn?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Restore Selected Items",expression:"'Restore Selected Items'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-history"},on:{click:function(e){return e.stopPropagation(),t.$emit("restore")}}}):t._e()],1):t._e(),t.deleteBtn?e("div",[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Delete Selected Items",expression:"'Delete Selected Items'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline"},on:{click:function(e){return e.stopPropagation(),t.$emit("delete")}}})],1):t._e(),t.hideActions.includes("toggle")?t._e():e("ToggleColumns",{attrs:{columns:t.repositoryFields?"LIST"===t.activeView?t.columns:[]:t.columns,"repository-fields":t.repositoryFields,"toggle-id":t.toggleId},on:{"update:columns":t.updateColumns,viewColumns:t.viewColumns}}),t.hideActions.includes("sort")?t._e():e("SortItems",{attrs:{columns:t.columns,order:t.order,criteria:t.criteria},on:{"update:order":t.updateOrder,"update:criteria":t.updateCriteria}}),t.hideActions.includes("group")?t._e():e("GroupItems",{attrs:{columns:t.columns,"group-by":t.groupBy},on:{"update:groupBy":t.updateGroupBy}}),t.hideActions.includes("filter")?t._e():e("FilterItems",{attrs:{item:t.item,columns:t._columns,"filter-by":t.filterBy,"selected-filter":t.selectedFilter,"search-content":t.searchContent,"content-search":t.contentSearch,module:t.module,"module-id":t.moduleId},on:{update:t.updateFilterBy,updateContentSearch:t.updateContentSearch}}),t.importData?e("ImportPopup",{attrs:{"data-imported":t.dataImported,"form-id":t.formId},on:{upload:t.upload,close:t.closeImport,downloadTemplate:t.downloadTemplate}}):t._e(),t.importJson?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"import",expression:"'import'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-import"},on:{click:function(e){return t.$emit("import")}}}):t._e(),!t.hideActions.includes("export")&&t.exportData?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Export",expression:"'Export'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-table-arrow-right"},on:{click:function(e){return t.$emit("export")}}}):t._e(),t.hideActions.includes("activeView")?t._e():e("BaseSeparator",{staticClass:"q-mx-sm",attrs:{"is-vertical":"","has-inset":""}}),t.hideActions.includes("activeView")?t._e():e("ViewToggle",{attrs:{"active-view":t.activeView,"thumbnail-view":t.thumbnailView,"grid-view":t.gridView,module:t.module},on:{"update:activeView":t.updateActiveView}}),e("KanbanView",{attrs:{"kanban-view":t.kanbanView,"active-view":t.activeKanbanView,"kanban-list":t.kanbanList},on:{"update:activeKanbanView":t.updateActiveKanbanView,clickKanban:function(e){return t.$emit("clickKanban")}}}),t.dashboardView?e("BaseSeparator",{staticClass:"q-mx-sm",attrs:{"is-vertical":"","has-inset":""}}):t._e(),t.dashboardView?e("DashboardView",{attrs:{"dashboard-view":t.dashboardView,"chart-view":t.chartView,"table-view":t.tableView,page:t.page},on:{"update:activeDashboardView":t.updateActiveDashboardView}}):t._e(),t._t("extraIcon")],2)},a=[],o=function(){var t=this,e=t._self._c;return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"columns",expression:"'columns'",modifiers:{bottom:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-table-column-plus-after"}},[e("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[e("div",{staticClass:"row border"},[e("div",{staticClass:"title-3 q-pa-xs col-auto"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchColumns,expression:"searchColumns"}],ref:"searchQuery",staticClass:"q-pa-md",attrs:{type:"text",placeholder:"Show/Hide Columns",autofocus:""},domProps:{value:t.searchColumns},on:{keyup:function(e){return t.searchColumnList(t.searchColumns)},input:function(e){e.target.composing||(t.searchColumns=e.target.value)}}})]),t.repositoryFields&&t.columns.length?e("div",{staticClass:"col-auto q-pa-xs"},[e("BaseButton",{attrs:{label:"Apply",color:"primary"},on:{click:t.apply}})],1):t._e()]),e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:t.scrollbarHeight}},t._l(t._columns,(function(i){return e("ListItem",{key:i.id,class:i.display,attrs:{icon:i.isVisible?"mdi-checkbox-marked":"mdi-checkbox-blank-outline","is-selected":i.isVisible,label:i.label},on:{click:function(e){return t.updateColumns(i)}}})})),1)],1)],1)},r=[],n=(i("14d9"),i("cade")),l=i("1b0d"),c={name:"ToggleColumns",components:{ListItem:n["a"]},props:{columns:{type:Array,required:!0},repositoryFields:{type:Boolean,default:!1},toggleId:{type:Number,default:0}},data(){return{filterColumns:[],columnList:"",searchColumns:""}},computed:{_columns(){return this.columns.filter(t=>"NORMAL"===t.type)},scrollbarHeight(){const t=36*this._columns.length;return t>216?"276px":t+58+"px"}},methods:{updateColumns1(t){const e=this.columns,i=e.findIndex(e=>e.id===t);e[i].isVisible=!e[i].isVisible,this.$emit("update:columns",e)},apply(){this.filterColumns=[],console.log(this.columns),this.columns.forEach(t=>{!1===t.isVisible&&this.filterColumns.push({Fieldid:t.fieldId,value:t.isVisible})}),console.log(this.filterColumns),this.$emit("viewColumns",this.filterColumns),this.filterColumns=[]},searchColumnList(t){this.columns.forEach(e=>{e.display="",t&&(e.label.toLowerCase().includes(t.toLowerCase())||(e.display="hide"))})},async updateColumns(t){if(this.toggleId){const e=this.columns.findIndex(e=>e.id===t.id);this.columns[e].isVisible=!this.columns[e].isVisible;let i={id:t.hideId||0,columnName:t.id};const{error:s,payload:a}=await l["k"].updateHideColumns(this.toggleId,i);if(s)return void this.$alert.error(s);let o=[];t.hideId?o=this.columns.filter(e=>e.id!=t.hideId):(o=this.columns,o.push({id:a,columnName:t.id})),this.columns[e].hideId=t.hideId?0:a,this.$emit("update:columns",o)}else{const e=this.columns,i=e.findIndex(e=>e.id===t.id);e[i].isVisible=!e[i].isVisible,this.$emit("update:columns",e)}}}},d=c,m=(i("ee26"),i("2877")),h=i("4e73"),u=i("93dc"),p=i.n(u),f=Object(m["a"])(d,o,r,!1,null,"251c6f56",null),v=f.exports;p()(f,"components",{QMenu:h["a"]});var y=i("c559"),b=function(){var t=this,e=t._self._c;return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"group",expression:"'group'",modifiers:{bottom:!0}}],attrs:{"is-flat":"",icon:"eva-copy-outline","no-border":""}},[e("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:t.scrollbarHeight,width:"240px"}},[e("div",{staticClass:"title-3 q-pa-md"},[t._v("Group By")]),t._l(t._columns,(function(i){return e("ListItem",{key:i.id,attrs:{icon:i.name===t.groupBy?"eva-radio-button-on":"eva-radio-button-off","is-selected":i.name===t.groupBy,label:i.label},on:{click:function(e){return t.updateGroupBy(i.name)}}})}))],2)],1)],1)},g=[],w={name:"GroupItems",components:{ListItem:n["a"]},props:{columns:{type:Array,required:!0},groupBy:{type:String,required:!0}},computed:{_columns(){return[{id:this.$nano.id(),label:"None",name:""},...this.columns.filter(t=>t.isGroupable)]},scrollbarHeight(){const t=36*this._columns.length;return t>216?"276px":t+58+"px"}},methods:{updateGroupBy(t){this.$emit("update:groupBy",t)}}},C=w,k=Object(m["a"])(C,b,g,!1,null,"72f07afc",null),S=k.exports;p()(k,"components",{QMenu:h["a"]});var I=i("27bd"),_=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"view-toggle"}},[t._l(t._views,(function(i){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.label,expression:"view.label",modifiers:{top:!0}}],key:i.id,attrs:{"is-flat":"","no-border":"",icon:t.activeView===i.value?i.activeIcon:i.icon,color:t.activeView===i.value?"secondary":"gray"},on:{click:function(e){return t.updateActiveView(i.value)}}})]})),e("DefaultView",{attrs:{value:t.showDefaultView,view:t.defaultView},on:{handleYes:t.handleYes,handleNo:t.handleNo,hideSheet:function(e){t.showDefaultView=!1}}})],2)},T=[],$=function(){var t=this,e=t._self._c;return e("Confirm",{attrs:{value:t.value,icon:"eva-info-outline","icon-color":"orange"},on:{input:t.hideSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Default view?")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"q-py-md"},[e("p",[t._v(" Do you want to make this "),e("b",[t._v('"('+t._s(t.view)+')"')]),t._v(" view is default? . ")]),e("p",[t._v("You can always change this view.")])])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"orange"},on:{click:t.handleNo}}),e("BaseButton",{attrs:{label:"yes",color:"orange"},on:{click:t.handleYes}})]},proxy:!0}])})},x=[],A=i("1c54"),L={name:"DefaultView",components:{Confirm:A["a"]},props:{value:{type:Boolean,required:!0},view:{type:String,required:!0}},methods:{handleNo(){this.$emit("handleNo",!1)},hideSheet(){this.$emit("hideSheet",!1)},handleYes(){this.$emit("handleYes",!1)}}},F=L,P=Object(m["a"])(F,$,x,!1,null,"38f8db3d",null),B=P.exports,D=i("4360"),M={name:"ViewToggle",components:{DefaultView:B},props:{activeView:{type:String,default:"GRID",validator(t){return["GRID","LIST","THUMBNAIL"].includes(t)}},thumbnailView:{type:Boolean,default:!1},gridView:{type:Boolean,default:!0},module:{type:String,default:""}},data(){return{views:[{id:this.$nano.id(),label:"Grid View",value:"GRID",icon:"mdi-view-grid-outline",activeIcon:"mdi-view-grid"},{id:this.$nano.id(),label:"List View",value:"LIST",icon:"mdi-format-list-checkbox",activeIcon:"mdi-view-list"},{id:this.$nano.id(),label:"Thumbnail View",value:"THUMBNAIL",icon:"eva-image-outline",activeIcon:"eva-image"}],showDefaultView:!1,defaultView:"",userId:this.$store.state.session.id,viewAlreadyAdded:!0,options:{}}},computed:{_views(){return this.thumbnailView?this.views:this.gridView?this.views.slice(0,2):this.views.slice(1,2)}},created(){this.getDefaultView()},methods:{updateActiveView(t){this.defaultView=t,this.showDefaultView=!0},handleYes(){this.showDefaultView=!1,this.viewAlreadyAdded?this.updateDefaultView():this.addDefaultView()},handleNo(){this.$emit("update:activeView",this.defaultView),this.showDefaultView=!1},async addDefaultView(){this.$store.commit("showLoadingBar");let t=this.$route.meta.menu,e={},i=this.$route.query.repositoryId,s="";i&&(s="files"),e=s?{preference:{[this.$route.meta.subMenu]:[{menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView}]}}:{preference:{[t]:[{menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView}]}};const{error:a,payload:o}=await l["n"].addProfilePreference(e);this.$store.commit("hideLoadingBar"),a?this.$alert.error("Error fetching changing view"):(D["a"].commit("setDefaultView",e.preference),D["a"].commit("setPreferenceId",o),this.viewAlreadyAdded=!0,this.options=e,this.$emit("update:activeView",this.defaultView))},async updateDefaultView(){this.$store.commit("showLoadingBar");let t=this.$route.meta.menu,e=this.$route.meta.breadcrumb,i=this.$route.query.repositoryId,s="";i&&(s="files");let a={};if(s)if(this.options[s])if(this.options[s].length){let t=this.options[s].findIndex(t=>t.subMenu===e);console.log(t),t>=0?this.options[s][t].view=this.defaultView:this.options[s].push({menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView})}else this.options[s]=[],this.options[s].push({menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});else this.options[s]=[],this.options[s].push({menu:this.$route.meta.subMenu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});else if(this.options[t])if(this.options[t].length){let i=this.options[t].findIndex(t=>t.subMenu===e);i>=0?this.options[t][i].view=this.defaultView:this.options[t].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView})}else this.options[t]=[],this.options[t].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});else this.options[t]=[],this.options[t].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultView});let o=JSON.stringify(this.options);a={preference:JSON.parse(o)};const{error:r}=await l["n"].updateProfilePreference(this.$store.state.preferenceId,a);this.$store.commit("hideLoadingBar"),r?this.$alert.error("Error fetching changing view"):(D["a"].commit("setDefaultView",a.preference),this.$emit("update:activeView",this.defaultView))},async getDefaultView(){const{error:t,payload:e}=await l["n"].getProfilePreference(this.userId);t?this.$alert.error("Error fetching get default view"):e?(this.options=JSON.parse(e.options),D["a"].commit("setDefaultView",this.options),D["a"].commit("setPreferenceId",e.id)):this.viewAlreadyAdded=!1}}},N=M,O=(i("cd8d"),Object(m["a"])(N,_,T,!1,null,"75627166",null)),q=O.exports,E=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"kanban-view"}},[t.kanbanView?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Kanban View",expression:"'Kanban View'",modifiers:{bottom:!0}}],attrs:{"is-flat":"",icon:(t.activeKanban,"mdi-grid"),color:t.activeKanban?"secondary":"gray","no-border":""},on:{click:function(e){return t.$emit("clickKanban")}}},[t.kanbanList.length?e("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:t.scrollbarHeight,width:"240px"}},t._l(t.kanbanList,(function(i){return e("ListItem",{key:i.id,attrs:{icon:i.name===t.activeView?"eva-radio-button-on":"eva-radio-button-off","is-selected":i.name===t.activeView,label:i.label},on:{click:function(e){return t.selectKanban(i.name)}}})})),1)],1):t._e()],1):t._e(),e("DefaultView",{attrs:{value:t.showDefaultView,view:t.defaultView},on:{handleYes:t.handleYes,handleNo:t.handleNo,hideSheet:function(e){t.showDefaultView=!1}}})],1)},V=[],R={name:"KanbanView",components:{ListItem:n["a"],DefaultView:B},props:{activeView:{type:String,default:""},kanbanView:{type:Boolean,default:!1},kanbanList:{type:Array,default:()=>[]}},data(){return{showDefaultView:!1,defaultView:"",userId:this.$store.state.session.id,viewAlreadyAdded:!0,options:{},defaultViewId:""}},computed:{scrollbarHeight(){const t=36*this.kanbanList.length;return t>216?"276px":t+58+"px"},activeKanban(){return"LIST"!==this.activeView&&"GRID"!==this.activeView&&"CHART"!==this.activeView&&"TABLE"!==this.activeView}},created(){this.getDefaultView()},methods:{selectKanban(t){let e=this.kanbanList.find(e=>e.name===t);console.log(e),e&&(this.defaultView=e.label),this.defaultViewId=t,this.showDefaultView=!0},handleYes(){this.showDefaultView=!1,this.viewAlreadyAdded?this.updateDefaultView():this.addDefaultView()},handleNo(){this.$emit("update:activeKanbanView",this.defaultViewId),this.showDefaultView=!1},async addDefaultView(){this.$store.commit("showLoadingBar");let t=this.$route.meta.menu,e={preference:{[t]:[{menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId}]}};const{error:i,payload:s}=await l["n"].addProfilePreference(e);this.$store.commit("hideLoadingBar"),i?this.$alert.error("Error fetching changing view"):(D["a"].commit("setDefaultView",e.preference),D["a"].commit("setPreferenceId",s),this.viewAlreadyAdded=!0,this.options=e,this.$emit("update:activeKanbanView",this.defaultViewId))},async updateDefaultView(){this.$store.commit("showLoadingBar");let t=this.$route.meta.menu,e=this.$route.meta.breadcrumb,i={};if(this.options[t])if(this.options[t].length){let i=this.options[t].findIndex(t=>t.subMenu===e);i>=0?this.options[t][i].view=this.defaultViewId:this.options[t].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId})}else this.options[t]=[],this.options[t].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId});else this.options[t]=[],this.options[t].push({menu:this.$route.meta.menu,subMenu:this.$route.meta.breadcrumb,view:this.defaultViewId});i={preference:this.options};const{error:s}=await l["n"].updateProfilePreference(this.$store.state.preferenceId,i);this.$store.commit("hideLoadingBar"),s?this.$alert.error("Error fetching changing view"):(D["a"].commit("setDefaultView",i.preference),this.$emit("update:activeKanbanView",this.defaultViewId))},async getDefaultView(){const{error:t,payload:e}=await l["n"].getProfilePreference(this.userId);t?this.$alert.error("Error fetching get default view"):e?(this.options=JSON.parse(e.options),D["a"].commit("setDefaultView",this.options),D["a"].commit("setPreferenceId",e.id)):this.viewAlreadyAdded=!1}}},z=R,j=(i("6c88"),Object(m["a"])(z,E,V,!1,null,"6f4b2704",null)),U=j.exports;p()(j,"components",{QMenu:h["a"]});var H=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"dashboard-view"}},t._l(t._views,(function(i){return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.label,expression:"view.label",modifiers:{top:!0}}],key:i.id,attrs:{"is-flat":"","no-border":"",icon:t.dashboardView===i.value?i.activeIcon:i.icon,color:t.dashboardView===i.value?"secondary":"gray"},on:{click:function(e){return t.updateDashboardView(i.value)}}})})),1)},W=[],J={name:"DashboardView",props:{dashboardView:{type:String,default:"CHART",validator(t){return["CHART","TABLE","SANKEY","KANBAN"].includes(t)}},chartView:{type:Boolean,default:!1},tableView:{type:Boolean,default:!0},page:{type:String,default:""}},data(){return{views:[{id:this.$nano.id(),label:"Table View",value:"TABLE",icon:"mdi-table",activeIcon:"mdi-table"},{id:this.$nano.id(),label:"Chart View",value:"CHART",icon:"eva-image",activeIcon:"eva-image"},{id:this.$nano.id(),label:"Sankey View",value:"SANKEY",icon:"mdi-chart-sankey-variant",activeIcon:"mdi-chart-sankey-variant"}]}},computed:{_views(){if("REPORT"===this.page)return this.views.slice(0,2);let t=location.origin;return"https://edmsuat.sobhaapps.com"===t||"https://edms.sobhaapps.com"===t?this.views.slice(1,2):this.views.slice(1,3)}},methods:{updateDashboardView(t){this.$emit("update:activeDashboardView",t)}}},G=J,Q=(i("8180"),Object(m["a"])(G,H,W,!1,null,"1da74fbd",null)),Y=Q.exports,K=i("be3f"),X=i("0cdc"),Z=i("12b8"),tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"col",attrs:{id:"search-items"}},[e("div",{attrs:{id:"Simple-search"}},[e("div",{staticClass:"label",staticStyle:{"margin-left":"0px"}},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Search By",expression:"'Search By'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-filter-plus-outline",color:t.activeFilter?"secondary":"gray","no-border":""}},[t.filter?e("div"):t._e(),e("q-menu",{attrs:{"auto-close":"","transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top left"}},[e("div",{staticClass:"title-3 q-pa-xs border"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchColumns,expression:"searchColumns"}],ref:"searchQuery",staticClass:"q-pa-md",attrs:{type:"text",placeholder:"Type here to search"},domProps:{value:t.searchColumns},on:{click:function(t){t.stopPropagation()},keyup:function(e){return t.searchColumnList(t.searchColumns)},input:function(e){e.target.composing||(t.searchColumns=e.target.value)}}})]),e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:t.scrollbarHeight,width:"240px"}},[t._l(t.columnList,(function(i){return[i.display&&!1!==i.isFilter?e("ListItem",{key:i.id,attrs:{icon:i.selected?"eva-radio-button-on":"eva-radio-button-off","is-selected":i.selected,label:i.label},on:{click:function(e){return t.updateFilterBy(i.id)}}}):t._e()]}))],2)],1)],1),t.activeFilter?e("div",{staticClass:"selectedLabel"},[e("span",{staticClass:"text-bold"},[t._v(t._s(t.selectedLabel)+" :")])]):t._e(),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],ref:"searchQuery",staticClass:"q-px-xs",class:{"text-input-small":t.activeFilter,"text-input-big":!t.activeFilter},attrs:{type:"text",placeholder:t.isdataTypeIsDate?"YYYY-MM-DD":"Search"},domProps:{value:t.searchInput},on:{keyup:t.emitKeyUp,keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateSimpleSearch.apply(null,arguments)},input:function(e){e.target.composing||(t.searchInput=e.target.value)}}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Search",expression:"'Search'",modifiers:{top:!0}}],attrs:{icon:"eva-search","no-border":"","is-flat":""},on:{click:t.updateSimpleSearch}}),t.activeFilter?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"clear",expression:"'clear'",modifiers:{top:!0}}],attrs:{icon:"mdi-close-circle","no-border":"","is-flat":""},on:{click:t.clearSimpleSearch}}):t._e()],1)])])},et=[],it={name:"SimpleSearchWithFilter",components:{ListItem:n["a"]},props:{columns:{type:Array,default:()=>[]},filterBy:{type:Array,required:!0}},data(){return{filter:!1,activeFilter:!1,searchColumns:"",columnList:[],filterArray:[],searchInput:"",selectedLabel:"",FilterValue:"",isdataTypeIsDate:!1,isSingleSelect:!1}},computed:{scrollbarHeight(){const t=36*this.columns.length;return t>216?"276px":t+58+"px"}},watch:{$route:{deep:!0,handler(){this.$route.query.repositoryId||(this.activeFilter=!1,this.filterArray=[],this.searchInput="",this.FilterValue="")}},filterBy:{deep:!0,immediate:!0,handler(){0===this.filterBy.length&&(this.activeFilter=!1)}},columns:{deep:!0,immediate:!0,handler(){this.columnList=[],this.columns.forEach(t=>{this.columnList.push({...t,selected:!1,display:"show"})})}}},methods:{emitKeyUp(){this.FilterValue=this.searchInput,this.$emit("keyup",this.searchInput)},updateSimpleSearch(){if(this.activeFilter)if(0===this.filterArray.length){let t=[];this.$emit("update",t)}else if(this.isSingleSelect){let t=[];t[0]=this.FilterValue,this.filterArray[0].filters[0].value=JSON.stringify(t),this.filterArray[0].filters[0].arrayValue=t,this.$emit("click",this.filterArray),this.$emit("update",this.filterArray)}else this.filterArray[0].filters[0].value=this.FilterValue,this.$emit("click",this.filterArray),this.$emit("update",this.filterArray)},searchColumnList(t){this.columnList.forEach(e=>{e.display="show",e.label.toLowerCase().includes(t.toLowerCase())||(e.display="")})},updateFilterBy(t){this.filter=!this.filter,this.columnList.forEach(t=>{t.selected=!1});let e=this.columnList.find(e=>e.id===t);if(e){e.selected=!0,this.activeFilter=!0,this.selectedLabel=e.label;let t=[];if("None"==e.value)this.activeFilter=!1;else{let i="CONTAINS";"DATE"===e.dataType&&(i="IS_EQUALS_TO",this.isdataTypeIsDate=!0,this.isSingleSelect=!1),"SINGLE_SELECT"===e.dataType?(this.isSingleSelect=!0,t=[{filters:[{criteria:e.name,criteriaArray:[e.name],condition:i,value:"",arrayValue:"",dataType:"SINGLE_SELECT"}],groupCondition:""}],this.filterArray=t):(this.isSingleSelect=!1,t=[{filters:[{criteria:e.name,condition:i,value:"",dataType:e.dataType}],groupCondition:""}]),this.filterArray=t}}},clearSimpleSearch(){this.columnList.forEach(t=>{t.selected=!1}),this.isdataTypeIsDate=!1,this.filterArray=[],this.searchInput="",this.FilterValue="",this.activeFilter=!1,this.filter=!this.filter,this.$emit("update",this.filterArray)}}},st=it,at=(i("ba5a"),Object(m["a"])(st,tt,et,!1,null,"a32bb6e0",null)),ot=at.exports;p()(at,"components",{QMenu:h["a"]});var rt={name:"ItemActions",components:{ToggleColumns:v,ViewToggle:q,SortItems:y["a"],GroupItems:S,FilterItems:I["a"],ExpandableSearch:K["a"],KanbanView:U,DashboardView:Y,ImportPopup:X["a"],SelectField:Z["a"],SimpleSearchWithFilter:ot},props:{item:{type:String,default:"item"},columns:{type:Array,required:!0},criteria:{type:String,required:!0},order:{type:String,required:!0},groupBy:{type:String,required:!0},filterBy:{type:Array,required:!0},activeView:{type:String,required:!0},thumbnailView:{type:Boolean,default:!1},filterColumns:{type:Array,default:()=>[]},selectedFilter:{type:Array,default:()=>[]},gridView:{type:Boolean,default:!0},kanbanView:{type:Boolean,default:!1},activeKanbanView:{type:String,default:""},kanbanList:{type:Array,default:()=>[]},jiraConnect:{type:Boolean,default:!1},importData:{type:Boolean,default:!1},dataImported:{type:Boolean,default:!1},hideActions:{type:Array,default:()=>[]},workflowInitiate:{type:Boolean,default:!1},initiateAccess:{type:Boolean,default:!1},gotoInbox:{type:Boolean,default:!1},workflowImport:{type:Boolean,default:!1},formId:{type:String,default:"0"},dashboardView:{type:String,default:""},chartView:{type:Boolean,default:!1},tableView:{type:Boolean,default:!1},searchContent:{type:Boolean,default:!1},contentSearch:{type:Object,default:()=>({contentSearchValue:"",fuzzy:0,searchType:1})},repositoryFields:{type:Boolean,default:!1},id:{type:Number,default:0},module:{type:String,default:""},moduleId:{type:[String,Number],default:0},deleteBtn:{type:Boolean,default:!1},mode:{type:String,default:""},page:{type:String,default:""},toggleId:{type:Number,default:0},simpleSearchFilter:{type:Boolean,default:!1},simpleSearchApplyed:{type:Boolean,default:!1},customProcessForm:{type:Boolean,default:!1},refresh:{type:Boolean,default:!0},exportData:{type:Boolean,default:!0},sendInvite:{type:Boolean,default:!1},downloadAll:{type:Boolean,default:!1},visibleDownload:{type:Boolean,default:!1},visiblePrint:{type:Boolean,default:!1},visibleEmail:{type:Boolean,default:!1},visibleDelete:{type:Boolean,default:!1},processForward:{type:Boolean,default:!1},importJson:{type:Boolean,default:!1}},data(){return{dateFilter:[{id:this.$nano.id(),label:"Today",value:"today"},{id:this.$nano.id(),label:"Yesterday",value:"yesterday"},{id:this.$nano.id(),label:"This Week",value:"7days"},{id:this.$nano.id(),label:"Last week",value:"week"},{id:this.$nano.id(),label:"This Month ",value:"Currentmonth"},{id:this.$nano.id(),label:"Last Month",value:"month"},{id:this.$nano.id(),label:"Last Quarter",value:"quarter"},{id:this.$nano.id(),label:"This Year",value:"currentyear"},{id:this.$nano.id(),label:"Last Year",value:"year"}],dateValue:""}},computed:{_columns(){return this.filterColumns.length?this.filterColumns:this.columns},checkIconCount(){let t,e=0;return this.visibleDownload&&(e+=1),this.visibleEmail&&(e+=1),this.visiblePrint&&(e+=1),this.visibleDelete&&(e+=1),2===e&&(t=!0),3===e&&(t=!0),4===e&&(t=!0),t}},watch:{dateValue:{deep:!0,immediate:!0,handler(){if(this.dateValue)if("today"===this.dateValue){let t=this.dateValue;const e=new Date;e.setDate(e.getDate());const i=e.toISOString().split("T")[0];this.$emit("filter",i,i,t)}else if("yesterday"===this.dateValue){let t=this.dateValue;const e=new Date;e.setDate(e.getDate()-1);const i=e.toISOString().split("T")[0];this.$emit("filter",i,i,t)}else if("week"===this.dateValue){let t=this.dateValue,e=new Date,i=e.getDay(),s=new Date(e);s.setDate(e.getDate()-i);let a=new Date(s);a.setDate(s.getDate()-7);let o=new Date(a);o.setDate(a.getDate()+6);let r=a.toISOString().split("T")[0],n=o.toISOString().split("T")[0];this.$emit("filter",r,n,t)}else if("7days"===this.dateValue){let t=this.dateValue,e=new Date,i=e.getDay(),s=new Date(e);s.setDate(e.getDate()-i);let a=new Date(s);a.setDate(s.getDate()+6);let o=s.toISOString().split("T")[0],r=a.toISOString().split("T")[0];this.$emit("filter",o,r,t)}else if("month"===this.dateValue){let t=this.dateValue,e=new Date,i=new Date(e.getFullYear(),e.getMonth()-1,2),s=new Date(e.getFullYear(),e.getMonth()),a=i.toISOString().split("T")[0],o=s.toISOString().split("T")[0];this.$emit("filter",a,o,t)}else if("quarter"===this.dateValue){let t=this.dateValue,e=new Date,i=e.getMonth(),s=(i-3+12)%12,a=new Date(e.getFullYear(),s,2),o=i-1,r=new Date(e.getFullYear(),o+1,1),n=a.toISOString().slice(0,10),l=r.toISOString().slice(0,10);this.$emit("filter",n,l,t)}else if("year"===this.dateValue){let t=this.dateValue,e=new Date,i=new Date(e.getFullYear()-1,0,2),s=new Date(e.getFullYear()-1,11,32),a=i.toISOString().split("T")[0],o=s.toISOString().split("T")[0];this.$emit("filter",a,o,t)}else if("Currentmonth"===this.dateValue){let t=this.dateValue,e=new Date,i=new Date(e.getFullYear(),e.getMonth(),1),s=`${i.getFullYear()}-${(i.getMonth()+1).toString().padStart(2,"0")}-${i.getDate().toString().padStart(2,"0")}`,a=`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`;this.$emit("filter",s,a,t)}else if("currentyear"===this.dateValue){let t=this.dateValue,e=new Date,i=new Date(e.getFullYear(),0,2),s=i.toISOString().split("T")[0],a=e.toISOString().split("T")[0];this.$emit("filter",s,a,t)}}}},methods:{updateColumns(t){this.$emit("update:columns",t)},updateCriteria(t){this.$emit("update:criteria",t)},updateOrder(t){this.$emit("update:order",t)},updateGroupBy(t){this.$emit("update:groupBy",t)},updateFilterBy(t,e){this.$emit("update:simpleSearchApplyed",!1),this.$emit("update:filterBy",t),this.$emit("update",t,e)},updateContentSearch(t){this.$emit("update:contentSearch",t)},updateActiveView(t){this.$emit("update:activeView",t)},searchTable(t){this.$emit("search",t)},updateActiveKanbanView(t){this.$emit("update:activeKanbanView",t)},updateActiveDashboardView(t){this.$emit("update:dashboardView",t)},upload(){this.$emit("upload")},closeImport(){this.$emit("close")},viewColumns(t){this.$emit("viewColumns",t)},updateSimpletSearchFilterBy(t){this.$emit("update:simpleSearchApplyed",!0),this.$emit("update:filterBy",t),this.$emit("update",t)},downloadTemplate(){this.$emit("downloadTemplate")}}},nt=rt,lt=(i("c925"),i("7225"),i("b047")),ct=i("cb32"),dt=Object(m["a"])(nt,s,a,!1,null,"53ff3a83",null);e["a"]=dt.exports;p()(dt,"components",{QChip:lt["a"],QAvatar:ct["a"]})},"0698":function(t,e,i){},"09e3":function(t,e,i){"use strict";var s=i("a026"),a=i("87e8"),o=i("e277");e["a"]=s["default"].extend({name:"QPageContainer",mixins:[a["a"]],inject:{layout:{default(){console.error("QPageContainer needs to be child of QLayout")}}},provide:{pageContainer:!0},computed:{style(){const t={};return!0===this.layout.header.space&&(t.paddingTop=this.layout.header.size+"px"),!0===this.layout.right.space&&(t["padding"+(!0===this.$q.lang.rtl?"Left":"Right")]=this.layout.right.size+"px"),!0===this.layout.footer.space&&(t.paddingBottom=this.layout.footer.size+"px"),!0===this.layout.left.space&&(t["padding"+(!0===this.$q.lang.rtl?"Right":"Left")]=this.layout.left.size+"px"),t}},render(t){return t("div",{staticClass:"q-page-container",style:this.style,on:{...this.qListeners}},Object(o["c"])(this,"default"))}})},"0b2c":function(t,e,i){},"0b71":function(t,e,i){},"0c04":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"addTask"}},[e("Sheet",{attrs:{value:t.value,width:t.taskWidth,"no-padding":""},on:{input:t.closeSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._t("title",(function(){return[t._v(t._s(t.title))]}))]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:t.isMaximized?"eva-collapse":"eva-expand"},on:{click:t.toggleWidth}})]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[e("div",{staticClass:"col",attrs:{id:"task-form-view"}},[e("BaseScrollbar",{staticClass:"q-pa-md",attrs:{height:"calc(100vh - 60px)"}},[e("RenderForm",{attrs:{"no-padding":"",panels:t.panels,"secondary-panels":t.secondaryPanels,"form-settings":t.formSettings,"form-model":t.taskModel,"is-readonly":"VIEW"===t.mode},on:{save:t.saveTask}})],1)],1),e("div",{staticClass:"col-auto q-mr-sm leftBorder"},[t._l(t.tabs,(function(i){return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary"},on:{click:function(e){return t.showLinks(i.value)}}},[i.count?e("span",{staticClass:"badge"},[t._v(t._s(i.count)+" ")]):t._e()])})),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"workflows",expression:"'workflows'",modifiers:{left:!0}}],staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:"o_account_tree",color:"primary"}},[e("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},t._l(t.taskWorkflowList,(function(i){return e("ListItem",{key:i.id,attrs:{icon:"mdi-sitemap",label:i.label},on:{click:function(e){return t.getForm(i)}}})})),1)],1)],1)],2)])]},proxy:!0}],null,!0)}),e("Sheet",{attrs:{width:t.taskWidth,"has-footer":""},on:{input:t.closeAddTaskSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._t("title",(function(){return[t._v(t._s(t.headerTitle))]}))]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:t.isMaximized?"eva-collapse":"eva-expand"},on:{click:t.toggleWidth}})]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[e("div",{staticClass:"col",attrs:{id:"form-view"}},[e("BaseScrollbar",{staticClass:"q-pa-md",attrs:{height:"calc(100vh - 145px)"}},[e("RenderForm",{attrs:{"no-padding":"","workflow-id":t.workflowFormId,panels:t.addWorkflowForm.panels,"secondary-panels":t.addWorkflowForm.secondaryPanels,"form-settings":t.addWorkflowForm.settings,"workflow-form-model":t.workflowFormModel,"save-action":t.saveAction},on:{"update:workflowFormModel":function(e){t.workflowFormModel=e},"update:workflow-form-model":function(e){t.workflowFormModel=e},"update:saveAction":function(e){t.saveAction=e},"update:save-action":function(e){t.saveAction=e}}})],1)],1),e("div",{staticClass:"col-auto q-mr-sm leftBorder"},t._l(t.tabs,(function(i){return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary"},on:{click:function(e){return t.showLinks(i.value)}}},[i.count?e("span",{staticClass:"badge"},[t._v(t._s(i.count)+" ")]):t._e()])})),1)])]},proxy:!0},{key:"footer",fn:function(){return[t.actions?e("div",{staticClass:"footer row"},[t._l(t.actions,(function(i){return[e("BaseButton","Approve"===i||"Complete"===i||"Rightsize"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"positive"},on:{click:function(e){return t.validateRequest(i)}}}:"Reject"===i||"Terminate"===i||"Force Close"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"red"},on:{click:function(e){return t.validateRequest(i)}}}:"Forward"===i||"Reply"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"orange"},on:{click:function(e){return t.validateRequest(i)}}}:{key:i,staticClass:"q-ml-md",attrs:{label:i},on:{click:function(e){return t.validateRequest(i)}}})]}))],2):t._e()]},proxy:!0}],null,!0),model:{value:t.addTaskSheet,callback:function(e){t.addTaskSheet=e},expression:"addTaskSheet"}}),e("Sheet",{attrs:{width:"30vw","sub-actions":!!t.attachmentList.length,upload:!0},on:{input:t.closeAttachmentsSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:t.getAttachments}})]},proxy:!0},{key:"upload",fn:function(){return[e("div",{staticClass:"hint",on:{click:function(e){return t.$refs.attachments.click()}}},[e("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),e("div",{staticClass:"title text-blue"},[t._v("UPLOAD FILES")]),e("div",{staticClass:"description"},[t._v("Click here to choose files and upload")])],1)]},proxy:!0},{key:"subActions",fn:function(){return[[e("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:t.fileSelectAll},model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}}),t._v(" Select All ")],e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!t.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:t.documentShare}}),(t.selectedFileCount,t._e())]},proxy:!0}]),model:{value:t.attachmentSheet,callback:function(e){t.attachmentSheet=e},expression:"attachmentSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:t.uploadAttachments}}),t._l(t.attachmentList,(function(i){return[e("div",{key:i.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:i.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(t){i.checked=!i.checked}}})],1),e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(i.name)}})],1),e("div",{staticClass:"col ellipsis",on:{click:function(e){return t.openFile(i)}}},[t._v(" "+t._s(i.name)+" ")]),e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.attachmentDelete(i)}}})],1)]),e("div",{staticClass:"meta"},[e("div",[t._v(t._s(t.$day.format(i.createdAt)))]),i.createdBy?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.createdByEmail))])]:t._e(),i.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.fileSize(i.size)))])]:t._e()],2)])]}))],2)]),e("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"30"},on:{input:t.closeCommentsSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments ")]},proxy:!0}]),model:{value:t.commentsSheet,callback:function(e){t.commentsSheet=e},expression:"commentsSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 155px)"}},[t._l(t.commentsList,(function(i,s){return[e("q-chat-message",{key:s,staticClass:"q-ma-sm",attrs:{name:i.createdBy===t.$store.state.session.id?"me":i.createdByEmail,text:[i.comments],"text-html":"",sent:i.createdBy===t.$store.state.session.id,stamp:t.lastCommentDuration(i),"bg-color":i.createdBy===t.$store.state.session.id?"primary-1":"secondary-1"}})]}))],2)],1),e("div",{staticClass:"col q-pa-sm borderTop"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}})],1),e("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:t.saveComment}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(e){t.advancedCommentsSheet=!0}}})],1)])])]),e("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(e){t.fileSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"attachmentFileHeader"},[e("div",{staticClass:"avatar q-ml-sm"},[e("FileIcon",{attrs:{"mime-type":t.fileType(t.selectedFile.name)}})],1),e("div",{staticClass:"q-ml-md"},[e("div",{staticClass:"filename"},[t._v(" "+t._s(t.selectedFile.name)+" ")]),e("div",{staticClass:"meta"},[e("div",[t._v("Archived At: "+t._s(t.$day.format(t.selectedFile.createdAt)))]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v("Archived By: "+t._s(t.selectedFile.createdByEmail))]),t.selectedFile.size?e("div",[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t._v(" File Size: "+t._s(t.fileSize(t.selectedFile.size))+" ")],1):t._e()],1)])])]},proxy:!0}]),model:{value:t.fileSheet,callback:function(e){t.fileSheet=e},expression:"fileSheet"}},[e("div",{staticClass:"attachmentFileFrame"},[e("div",{staticClass:"file-list"},[e("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:t.fileLink(),frameborder:"0"}})])])]),e("Sheet",{attrs:{width:"30vw"},on:{input:t.closeTaskSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Workflows ")]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Add Workflows",expression:"'Add Workflows'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-plus",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.getworkflowForm(t.workflowFormId)}}})]},proxy:!0}]),model:{value:t.taskSheet,callback:function(e){t.taskSheet=e},expression:"taskSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[t._l(t.processInfo,(function(i){return[e("div",{key:i.id,staticClass:"taskEntries"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto q-mr-md",staticStyle:{"margin-top":"3px"},on:{click:function(e){return t.getWorkflowAudit(i.requestNo)}}},[t._v(" Request No: "+t._s(i.requestNo)+" ")]),i.actionUser?[e("q-chip",{attrs:{size:"10px",color:"yellow","text-color":"white"}},[t._v(" "+t._s(i.actionUser)+" ")])]:t._e(),e("q-chip",{attrs:{size:"10px",color:t.getColor(i.flowStatus),"text-color":"white"}},[t._v(" "+t._s("0"===i.flowStatus?"Open":"Completed")+" ")])],2)]),e("div",{staticClass:"meta row"},[e("div",{staticClass:"col-12"},[t._v(" Raised By: "+t._s(i.raisedBy)+" "),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t._v(" Raised At: "+t._s(t.$day.format(i.raisedAt))+" ")],1)])])]}))],2)]),e("Sheet",{attrs:{width:"100vw","has-footer":"","no-padding":""},on:{input:function(e){t.processSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.headerTitle)+" ")]},proxy:!0}]),model:{value:t.processSheet,callback:function(e){t.processSheet=e},expression:"processSheet"}},[e("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[e("div",{staticClass:"col",attrs:{id:"form-view"}},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 145px)"}},[e("RenderForm",{attrs:{"form-id":t.formIdName,panels:t.addWorkflowForm.panels,"secondary-panels":t.addWorkflowForm.secondaryPanels,"form-settings":t.addWorkflowForm.settings,"form-model":t.formModel,"save-action":t.saveAction,"workflow-form-model":t.workflowFormModel},on:{"update:saveAction":function(e){t.saveAction=e},"update:save-action":function(e){t.saveAction=e},"update:workflowFormModel":function(e){t.workflowFormModel=e},"update:workflow-form-model":function(e){t.workflowFormModel=e}}})],1)],1),e("div",{staticClass:"col-auto q-mr-sm leftBorder"},[t._l(t.tabs,(function(i){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary"},on:{click:function(e){return t.showLinks(i.value)}}},[i.count?e("span",{staticClass:"badge"},[t._v(t._s(i.count)+" ")]):t._e()])]}))],2)])]),e("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(e){t.advancedCommentsSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[e("TextBuilderField",{model:{value:t.advancedCommentText,callback:function(e){t.advancedCommentText=e},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:t.saveAdvancedComment}})]},proxy:!0}]),model:{value:t.advancedCommentsSheet,callback:function(e){t.advancedCommentsSheet=e},expression:"advancedCommentsSheet"}}),e("EmailSharing",{attrs:{"repository-id":t.repositoryId,"file-list":t.selectedFileList},on:{"update:fileList":function(e){t.selectedFileList=e},"update:file-list":function(e){t.selectedFileList=e}},model:{value:t.emailSharingSheet,callback:function(e){t.emailSharingSheet=e},expression:"emailSharingSheet"}})],1)},a=[],o=(i("14d9"),i("caad"),i("381e")),r=i("4bc4"),n=i("869e"),l=i("6df3"),c=i("1b0d"),d=i("9bc4"),m=i("fa1f"),h=i("a7d2"),u=i("dd90"),p=i("bc3a"),f=i.n(p),v=i("cade"),y=i("695e"),b=i("6a70"),g=i("2f62"),w=i("5e23"),C={name:"AddTask",components:{Sheet:o["a"],RenderForm:r["a"],FileIcon:m["a"],CheckboxField:n["a"],TextAreaField:l["a"],ListItem:v["a"],TextBuilderField:y["a"],Modal:b["a"],EmailSharing:w["a"]},props:{value:{type:Boolean,default:!1},formSettings:{type:Object,required:!0},panels:{type:Array,required:!0},secondaryPanels:{type:Array,default:()=>[]},formId:{type:Number,default:0},taskModel:{type:Object,default:()=>{}},mode:{type:String,default:""},taskName:{type:String,default:""},repositoryId:{type:Number,default:0},workflowTask:{type:Boolean,default:!1},taskWorkflowList:{type:Array,default:()=>[]},selectedTask:{type:Object,default:()=>{}},documentTask:{type:Boolean,default:!1},repositoryFile:{type:Object,default:()=>{}}},data(){return{taskWidth:"720px",tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0}],attachmentSheet:!1,addTaskSheet:!1,taskSheet:!1,commentsSheet:!1,commentText:"",commentsList:[],selectAll:!1,attachmentLoad:null,attachmentList:[],fileSheet:!1,selectedFile:{},actions:[],workflowsSheet:!0,workflowList:[],saveAction:"",workflowId:0,addWorkflowForm:[],workflowPanels:[],form:[],workflowName:"",workflowDescription:"",workflowFormId:0,workflowFormModel:{},processId:0,transactionId:0,workflowDetails:[],countWorkflow:0,processInfo:[],workflowFormTaskList:{},formList:{},formStage:{},processSheet:!1,formDetails:{},formIdName:"",formModel:{},headerTitle:"",advancedCommentsSheet:!1,advancedCommentText:"",emailSharingSheet:!1,selectedFileList:[]}},computed:{...Object(g["c"])(["LoadingBarPage"]),isMaximized(){return"100vw"===this.taskWidth},title(){return"VIEW"===this.mode?"View Task":"EDIT"===this.mode?"Edit Task":"FORWARD"===this.mode?"Forward Task":"COPY"===this.mode?"Copy Task":"Add Task"},formName(){return this.formSettings.general.name},formDescription(){return this.formSettings.general.description},selectedFileCount(){let t=this.attachmentList.filter(t=>t.checked).length;return t},scrollbarHeight(){const t=36*this.columns.length;return t>216?"276px":t+58+"px"}},watch:{taskModel:{immediate:!0,handler(){this.taskModel.id&&(this.attachmentList=[],this.getComments(),this.getAttachments())}},workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&this.initiateRequest()}},attachmentSheet:{immediate:!0,handler(){this.attachmentSheet&&this.taskModel.id||clearInterval(this.attachmentLoad)}}},methods:{toggleWidth(){this.taskWidth="100vw"===this.taskWidth?"720px":"100vw"},closeSheet(){this.$emit("close",!1)},closeAttachmentsSheet(){this.attachmentSheet=!1},closeAddTaskSheet(){this.addTaskSheet=!1},closeTaskSheet(){this.taskSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},getColor(t){return"0"===t?"orange":"1"===t||"Medium"===t?"green":"primary"},showLinks(t){"ATTACHMENTS"===t?this.attachmentSheet=!0:"COMMENTS"===t?this.commentsSheet=!0:"HISTORY"===t?this.$emit("history",this.formList[0].value[0].processId,this.formList[0].workflowId,this.formList[0].value[0].requestNo):"PRINT"===t&&window.print()},lastCommentDuration(t){const e=t.createdAt instanceof Date?t.createdAt:new Date(t.createdAt),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(e.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const t=a/s[o];return i.format(Math.round(t),o)}},fileSelectAll(){this.attachmentList=this.attachmentList.map(t=>({...t,checked:this.selectAll}))},showHistory(){},fileType(t){if(t)return t.split(".").reverse()[0].slice(0,4)},fileSize(t){return Object(h["a"])(t)},fileLink(){let t=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let e=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let i="";if(Object(u["d"])(e))i="https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===t?"https://trial.ezofis.com/docsviewer/index.html":"https://app.ezofis.com"===t?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":t+"/PDFViewer/web/viewer.html";else{if("http://52.172.32.88"!==t)return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/1`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`}{let i="";if(Object(u["d"])(e))i="https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===t?"https://trial.ezofis.com/docsviewer/index.html":"https://app.ezofis.com"===t?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":t+"/PDFViewer/web/viewer.html";else{if(Object(u["b"])(e)||"http://52.172.32.88"!==t)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}`}}},openFile(t){this.selectedFile=t,this.fileSheet=!0},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(t=>{t.checked&&this.selectedFileList.push({id:t.id,name:t.name})}),this.emailSharingSheet=!0},async saveTask(t){const e=["itemid","createdBy","createdAt","modifiedBy","modifiedAt","icon","buttonAction","formId","status","color","link","selected","isDeleted","createdByEmail","modifiedByEmail","emailStatus","expandSubworkflow"],i=Object(d["a"])(t,e);try{this.$store.commit("showLoadingBarPage");const{id:t,...e}=i;let s=0;s="COPY"===this.mode?0:t||0;let a={};if(s)a={fields:e};else{let t=[];this.attachmentList.length&&this.attachmentList.forEach(e=>{t.push(e.id)}),a={fields:e,task:{comments:this.commentsList,fileIds:t}}}const{data:o,error:r}=await c["g"].saveFormEntry(this.formId,s,a);if(this.workflowDetails.length&&this.linkTaskWorkflowProcess(o.output),r)return void this.$alert.error(r);t?this.$alert.success(this.taskName+" edited successfully"):(this.documentTask&&this.linkTaskDocument(o.output),this.$alert.success("New task added successfully")),this.getUsers(a.fields),this.closeSheet(),this.workflowTask||this.documentTask?this.$emit("addEntry",this.formId,o.output):this.$emit("refresh",this.workflowId)}catch(s){console.log(s)}finally{this.$store.commit("hideLoadingBarPage")}},async linkTaskDocument(t){let e={wFormId:this.formId,formEntryId:t,fileInfo:{repositoryId:this.repositoryFile.repositoryId,itemId:this.repositoryFile.id}};const{error:i}=await c["g"].linkTaskDocument(e);i&&this.$alert.error(i)},async getComments(){this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=0)}),this.commentsList=[],this.$store.commit("showLoadingBar");const{error:t,payload:e}=await c["g"].getFormComments(this.formId,this.taskModel.id);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e.length&&(this.commentsList=e,this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=this.commentsList.length)}))},async saveComment(){if(this.commentText)if(this.taskModel.id){this.$store.commit("showLoadingBar");const{error:t}=await c["g"].insertFormComment(this.formId,this.taskModel.id,{comments:this.commentText});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.commentText="",this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.commentText=""},async saveAdvancedComment(){if(this.advancedCommentText)if(this.taskModel.id){this.$store.commit("showLoadingBar");const{error:t}=await c["g"].insertFormComment(this.formId,this.taskModel.id,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.advancedCommentText="",this.advancedCommentsSheet=!1},async uploadAttachments(t){if(this.taskModel.id){const i=t.target.files[0];this.$store.commit("showLoadingBar");const s=new FormData;s.append("formId",this.formId),s.append("repositoryId",this.repositoryId),s.append("entryId",this.taskModel.id),s.append("file",i);let a=t.target.files[0].name;const o=a.split(".").pop();if(!Object(u["a"])(o))return void this.$alert.info("This file format is not supported");try{const e=await f()({url:"https://appuat.ezofis.com/ezofisapi/api/form/taskAttachmentWithEntryId",method:"POST",data:s,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:i,data:a}=e;if(this.$store.commit("hideLoadingBar"),t.target.value="",200!==i||!a)throw e;this.$alert.success("Document attached")}catch(e){this.$store.commit("hideLoadingBar"),this.$alert.error("Error uploading file"),console.error(e)}this.attachmentLoad=setInterval(()=>this.getAttachments(),5e3)}else{this.$store.commit("showLoadingBar");const i=t.target.files[0],s=new FormData;s.append("file",i),s.append("formId",this.formId),s.append("repositoryId",this.repositoryId);let a=t.target.files[0].name;const o=a.split(".").pop();if(!Object(u["a"])(o))return void this.$alert.info("This file format is not supported");try{const e=await f()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:s,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:a,data:o}=e;if(this.$store.commit("hideLoadingBar"),t.target.value="",200!==a)throw"Invalid response";let r=JSON.parse(o);this.attachmentList.push({id:Number(r.fileId),name:i.name,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:i.size,initiate:!0,checked:!1})}catch(e){this.$store.commit("hideLoadingBar"),console.error(e),this.$alert.error("error attaching file")}}},async getAttachments(){this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=0)});let t=this.attachmentList.length;this.$store.commit("showLoadingBar");const{error:e,payload:i}=await c["g"].getFormAttachments(this.formId,this.taskModel.id);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):i.length?(t!==i.length&&(this.attachmentList=i.map(t=>({...t,checked:!1})),clearInterval(this.attachmentLoad)),this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=this.attachmentList.length)})):this.attachmentList=[]},async attachmentDelete(t){if(this.$store.commit("showLoadingBar"),t.initiate){const{error:e}=await c["r"].deleteUploadedFiles([t.id]);if(e)return void this.$alert.error(e);this.$store.commit("hideLoadingBar"),this.attachmentList=this.attachmentList.filter(e=>e.id!==t.id)}else{const{error:e}=await c["p"].fileDelete(t.repositoryId,t.id);if(e)return void this.$alert.error(e);this.$store.commit("hideLoadingBar"),this.getAttachments()}},validateRequest(t){this.saveAction=t},async initiateRequest(){let t={};t={workflowId:this.workflowId,transactionId:0,review:this.saveAction,formData:{formId:this.workflowFormId,formEntryId:this.form.entryCount,fields:this.workflowFormModel}},this.$store.commit("showLoadingBarSave");const{error:e,payload:i}=await c["t"].processTransaction(t);this.$store.commit("hideLoadingBarSave"),this.saveAction="",e?this.$alert.error(e):(this.$alert.success(i.requestNo+" Request Initiated"),this.workflowDetails.push({workflowId:this.workflowId,processId:i.processId,transactionId:i.transactionId}),this.selectedTask.id&&this.linkTaskWorkflowProcess(this.selectedTask.id),this.closeAddTaskSheet(),this.$emit("refresh",this.workflowId))},async getForm(t){if(this.workflowId=t.id,this.headerTitle=t.stage,this.actions=t.actions,this.selectedTask.formId&&this.selectedTask.id&&await this.getWorkflowList(this.workflowId),t.formId)if(this.workflowFormId=t.formId,this.processInfo.length)this.countWorkflow=this.processInfo.length,this.taskSheet=!0;else{const{error:t,payload:e}=await c["g"].getForm(this.workflowFormId);if(t)return void this.$alert.error(t);e&&(this.form=e,this.workflowName=this.form.name,this.workflowDescription=this.form.description,this.addWorkflowForm=JSON.parse(e.formJson),this.workflowPanels=this.addWorkflowForm.panels,this.addTaskSheet=!0)}},async getworkflowForm(t){this.closeTaskSheet();const{error:e,payload:i}=await c["g"].getForm(t);this.workflowFormId=t,e?this.$alert.error(e):i&&(this.form=i,this.workflowName=this.form.name,this.workflowDescription=this.form.description,this.addWorkflowForm=JSON.parse(i.formJson),this.workflowPanels=this.addWorkflowForm.panels,this.addTaskSheet=!0)},async getworkflowDetailsForm(t){const{error:e,payload:i}=await c["g"].getForm(t);e?this.$alert.error(e):i&&(this.form=i,this.workflowName=this.form.name,this.workflowDescription=this.form.description,this.addWorkflowForm=JSON.parse(i.formJson),this.workflowPanels=this.addWorkflowForm.panels,this.processSheet=!0,this.$store.commit("hideLoadingBarPage"))},async linkTaskWorkflowProcess(t){let e={};e={wFormId:this.formId,formEntryId:t,workflow:this.workflowDetails};const{error:i}=await c["g"].linkTaskWorkflowProcess(e);i&&this.$alert.error(i)},async getWorkflowList(t){let e={};e={wId:t,fId:this.selectedTask.formId,entryId:this.selectedTask.id};const{error:i,payload:s}=await c["g"].getWorkflowTaskList(t,this.selectedTask.formId,this.selectedTask.id,e);this.workflowFormTaskList=s,s.processInfo&&(this.processInfo=s.processInfo),i&&this.$alert.error(i)},async getWorkflowAudit(t){this.$store.commit("showLoadingBarPage");const{error:e,payload:i}=await c["o"].getWorkflowData(this.workflowId,{filterBy:[{groupCondition:"",filters:[{criteria:"requestNo",condition:"IS_EQUALS_TO",value:t}]}],currentPage:1,itemsPerPage:10,mode:""}),{data:s,meta:a}=i;if(this.formList=s||{},this.formStage=a,this.formList[0].value[0].formData){let t=Object.keys(this.formList[0].value[0].formData.fields),e={};t.forEach(t=>{e[t]=this.validateTypeValue(this.formList[0].value[0].formData.fields[t])}),this.formModel=e}this.headerTitle=""+this.formList[0].value[0].name,this.formIdName=String(this.formList[0].value[0].formData.formId),this.getworkflowDetailsForm(this.formIdName),e&&this.$alert.error(e)},validateTypeValue(t){if(t)try{var e=JSON.parse(t);if("object"===typeof e)return e}catch(i){return t}return t},async getUsers(t){const{error:e,payload:i}=await c["s"].getUserList();if(e)return void this.$alert.error("Error fetching users");let s={id:0,title:t["e_NFnW0JxrLpZxqPeJS7K"],status:t["11m7YRT-7kdLx-g6iGojc"],remarks:t["2XOJMCR_DVb-5TwVPVdEX"],category:"TASK",createdBy:t["pM6Vly-JRlfroRrziE1jr"],lastActionBy:this.$store.state.session.email};const a=s.createdBy,o=i.filter(t=>a.includes(t.value)),r=o.map(t=>t.id);r.forEach(t=>{const e={...s,createdBy:t};this.insertNotification(e)}),console.log("email",o,r)},async insertNotification(t){const{error:e}=await c["b"].insertNotification(t);e&&this.$alert.error(e)}}},k=C,S=(i("a4c9"),i("2877")),I=i("4e73"),_=i("8169"),T=i("cb32"),$=i("b047"),x=i("93dc"),A=i.n(x),L=Object(S["a"])(k,s,a,!1,null,"0b56d901",null);e["a"]=L.exports;A()(L,"components",{QMenu:I["a"],QChatMessage:_["a"],QAvatar:T["a"],QChip:$["a"]})},"0ce8":function(t,e,i){},1026:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("FileList",{staticClass:"q-mb-md",attrs:{"has-files":!!t.files.length},scopedSlots:t._u([{key:"label",fn:function(){return[t._v("Uploading")]},proxy:!0},t.files.length?{key:"actions-minimized",fn:function(){return[e("Pulse",{staticClass:"q-mr-md",attrs:{color:"light-green"}})]},proxy:!0}:null,{key:"default",fn:function(){return t._l(t.files,(function(i,s){return e("FileListItem",{key:i.id,staticClass:"file",attrs:{file:i}},[t.showProgress?e("q-circular-progress",{staticClass:"font-semibold",attrs:{"show-value":"","font-size":"13px",size:"48px",color:"light-green","track-color":t.trackColor,thickness:.22,value:i.uploadedPercentage,indeterminate:!i.uploadedPercentage}},[t._v(" "+t._s(i.uploadedPercentage)+"% ")]):t._e(),t.showDeleteBtn?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:red.top",value:"Delete",expression:"'Delete'",arg:"red",modifiers:{top:!0}}],staticClass:"q-mr-md",attrs:{"is-flat":"",color:"red",icon:"eva-trash-2-outline"},on:{click:function(e){return e.stopPropagation(),t.$emit("delete",s)}}}):t._e()],1)}))},proxy:!0}],null,!0)})},a=[],o=i("9ef6"),r=i("d406"),n=i("4e64"),l=i("2f62"),c={name:"UploadingFileList",components:{FileList:o["a"],FileListItem:r["a"],Pulse:n["a"]},props:{files:{type:Array,required:!0},showProgress:{type:Boolean,default:!0},showDeleteBtn:{type:Boolean,default:!1}},computed:{...Object(l["c"])(["darkTheme"]),trackColor(){return this.darkTheme?"gray-8":"gray-3"}}},d=c,m=(i("73e0"),i("2877")),h=i("58ea"),u=i("93dc"),p=i.n(u),f=Object(m["a"])(d,s,a,!1,null,"7aa1b7fe",null);e["a"]=f.exports;p()(f,"components",{QCircularProgress:h["a"]})},"108c":function(t,e,i){"use strict";i("bdf3")},1137:function(t,e,i){},"11f5":function(t,e,i){"use strict";i("4759")},1549:function(t,e,i){"use strict";var s=i("2250"),a=i("a809"),o=i("5132"),r=i("e621");function n(t,e){return e.length<2?t:Object(o["a"])(t,Object(r["a"])(e,0,-1))}var l=n,c=i("4dc8");function d(t,e){return e=Object(s["a"])(e,t),t=l(t,e),null==t||delete t[Object(c["a"])(Object(a["a"])(e))]}e["a"]=d},"1a1b":function(t,e,i){},"1a82":function(t,e,i){},"1bfa":function(t,e,i){},"1d87":function(t,e,i){t.exports=i.p+"img/kayaku-logo.34027bdf.png"},"204d":function(t,e,i){},"21e0":function(t,e,i){"use strict";i("7334")},"21fc":function(t,e,i){},"27bd":function(t,e,i){"use strict";i("caad");var s=function(){var t=this,e=t._self._c;return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"filter",expression:"'filter'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"eva-funnel-outline",color:t.activeFilter?"secondary":"gray"},on:{click:function(e){t.model=!0}}},[e("Sheet",{attrs:{width:"50vw","has-footer":""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Filter "+t._s(t.item)+"s ")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"q-pa-md",attrs:{id:"filters"}},[t.searchContent?[e("div",{staticClass:"description"},[t._v(" To search by content, type any text to search the entire folder ")]),e("TextField",{staticClass:"q-mb-md",attrs:{placeholder:"Search the document by content"},model:{value:t.contentSearch.contentSearchValue,callback:function(e){t.$set(t.contentSearch,"contentSearchValue",e)},expression:"contentSearch.contentSearchValue"}}),e("div",{staticClass:"q-mb-md",staticStyle:{"border-bottom":"1px solid var(--divider-color)"}},[t.showAdvanceOptions?e("div",{staticClass:"q-my-md"},[e("SingleChoiceField",{staticClass:"col q-mb-md",attrs:{options:t.searchOptions,"options-per-line":2,label:"Advanced Search Options"},model:{value:t.contentSearch.searchType,callback:function(e){t.$set(t.contentSearch,"searchType",e)},expression:"contentSearch.searchType"}}),e("FormFieldLabel",{attrs:{label:"Search similarity"}}),e("q-slider",{attrs:{color:"secondary",markers:"","marker-labels":"",min:0,max:10,label:""},model:{value:t.contentSearch.fuzzy,callback:function(e){t.$set(t.contentSearch,"fuzzy",e)},expression:"contentSearch.fuzzy"}})],1):t._e(),e("div",{staticClass:"row items-center q-mb-md"},[e("div",{staticClass:"col"},[t.showAdvanceOptions?e("div",{staticClass:"row items-center cursor-pointer",on:{click:function(e){t.showAdvanceOptions=!1}}},[e("BaseIcon",{staticClass:"icon",attrs:{name:"eva-minus",color:"secondary"}}),e("div",{staticClass:"options"},[t._v("Hide Advanced Options")])],1):e("div",{staticClass:"row items-center cursor-pointer",on:{click:function(e){t.showAdvanceOptions=!0}}},[e("BaseIcon",{staticClass:"icon",attrs:{name:"eva-plus",color:"secondary"}}),e("div",{staticClass:"options"},[t._v("Advanced Options")])],1)]),e("div",{staticClass:"col-auto"},[e("div",{staticClass:"actions"},[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:t.clearContentSearch}}),e("BaseButton",{attrs:{label:"search"},on:{click:t.apply}})],1)])])])]:t._e(),t.filterGroups.length?[t._l(t.filterGroups,(function(i,s){return[e("div",{key:i.id,staticClass:"filter-group"},[e("div",{staticClass:"header"},[e("div",{staticClass:"label q-mr-md"},[t._v("Criteria")]),e("div",{staticClass:"label q-mr-md"},[t._v("Condition")]),e("div",{staticClass:"label q-mr-sm"},[t._v("Value")]),e("BaseActionButton",{attrs:{"is-flat":"",color:"secondary",icon:"eva-plus","no-border":""},on:{click:function(e){return t.addFilter(s)}}})],1),e("BaseSeparator",{staticClass:"q-mb-md",attrs:{"has-inset":""}}),t._l(i.filters,(function(i,a){return e("ValidationObserver",{key:i.id,ref:"form",refInFor:!0,staticClass:"filter row"},[e("ValidationProvider",{key:i.id,staticClass:"col q-mr-md",attrs:{name:"criteria",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:o}){return[e("MultiSelectField",{attrs:{"is-mandatory":"","is-searchable":!0,options:t._columns,error:o[0]},on:{input:function(e){return t.applyDataType(s,a,i.criteriaArray)}},model:{value:i.criteriaArray,callback:function(e){t.$set(i,"criteriaArray",e)},expression:"filter.criteriaArray"}})]}}],null,!0)}),e("ValidationProvider",{staticClass:"col-3 q-mr-md",attrs:{name:"condition",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("SelectField",{attrs:{"is-mandatory":"","is-searchable":!0,options:t.conditions(i.criteriaArray),error:s[0]},model:{value:i.condition,callback:function(e){t.$set(i,"condition",e)},expression:"filter.condition"}})]}}],null,!0)}),"SHORT_TEXT"===i.dataType||"BARCODE"===i.dataType?e("ValidationProvider",{staticClass:"col-3 q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("TextField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"filter.value"}})]}}],null,!0)}):"NUMBER"===i.dataType?e("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("NumberField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"filter.value"}})]}}],null,!0)}):"DATE"===i.dataType?e("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("DateField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"filter.value"}})]}}],null,!0)}):"TIME"===i.dataType?e("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("TimeField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"filter.value"}})]}}],null,!0)}):"SINGLE_SELECT"===i.dataType?e("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[t.checkOptions(i.criteriaArray)?[e("AsyncMultiSelectField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0],"api-path":t.apiPath,"column-name":i.criteriaArray},model:{value:i.arrayValue,callback:function(e){t.$set(i,"arrayValue",e)},expression:"filter.arrayValue"}}),t._e()]:[t._e(),e("MultiSelectField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),"is-searchable":!0,options:t.getOptions(i.criteriaArray),error:s[0]},model:{value:i.arrayValue,callback:function(e){t.$set(i,"arrayValue",e)},expression:"filter.arrayValue"}})]]}}],null,!0)}):e("ValidationProvider",{staticClass:"col q-mr-sm",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("TextField",{attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"filter.value"}})]}}],null,!0)}),e("div",{staticClass:"remove-filter"},[e("BaseActionButton",{attrs:{"is-flat":"",color:"red","no-border":"",icon:"eva-close-outline"},on:{click:function(e){return t.removeFilter(s,a)}}})],1)],1)})),e("BaseSeparator",{attrs:{"has-inset":""}}),e("div",{staticClass:"row"},[e("Action",{staticClass:"col",attrs:{icon:"eva-plus-outline",label:"Add Filter Group"},on:{click:function(e){return t.addFilterGroup(s+1)}}}),e("BaseSeparator",{attrs:{"is-vertical":"","has-inset":""}}),e("Action",{staticClass:"col",attrs:{icon:"eva-trash-2-outline",label:"Delete Group"},on:{click:function(e){return t.removeFilterGroup(s)}}})],1)],2),s!==t.filterGroups.length-1?e("div",{key:s,staticClass:"row justify-center"},[e("Toggle",{staticClass:"q-my-md",attrs:{options:t.groupConditions},on:{input:t.groupCondition},model:{value:i.groupCondition,callback:function(e){t.$set(i,"groupCondition",e)},expression:"group.groupCondition"}})],1):t._e()]}))]:[e("div",{staticClass:"add-filter",on:{click:t.addFilterGroup}},[e("BaseIcon",{attrs:{name:"eva-plus","inherit-color":""}}),e("div",{staticClass:"q-ml-sm"},[t._v("Add Filter")])],1)]],2)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:t.clearFilter}}),e("BaseButton",{attrs:{label:"apply"},on:{click:t.apply}})]},proxy:!0}]),model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)},a=[],o=(i("13d5"),i("14d9"),i("874f")),r=i("9996"),n=i("7bb1"),l=i("381e"),c=i("b3d1"),d=i("12b8"),m=i("94f5"),h=i("670a"),u=i("970a"),p=i("ad54"),f=i("53c1"),v=i("cedb"),y=i("70a9"),b=i("0c21"),g=i("c3d2"),w=i("1b0d"),C=i("0d5e"),k=i("3445"),S=i("9234"),I={name:"FilterItems",components:{ValidationObserver:n["a"],ValidationProvider:n["b"],Sheet:l["a"],TextField:c["a"],SelectField:d["a"],Action:m["a"],Toggle:h["a"],NumberField:p["a"],DateField:f["a"],TimeField:v["a"],AsyncMultiSelectField:y["a"],MultiSelectField:g["a"],AsyncSelectField:b["a"],FormFieldLabel:k["a"],SingleChoiceField:S["a"]},props:{item:{type:String,default:"item"},columns:{type:Array,required:!0},filterBy:{type:Array,required:!0},isBordered:{type:Boolean,default:!1},selectedFilter:{type:Array,default:()=>[]},searchContent:{type:Boolean,default:!1},contentSearch:{type:Object,default:()=>({contentSearchValue:"",fuzzy:0,searchType:1})},module:{type:String,default:""},moduleId:{type:[String,Number],default:0}},data(){return{model:!1,groupConditions:["AND","OR"],filterGroups:[],activeFilter:!1,userList:[],options:[],showAdvanceOptions:!1,searchOptions:[{id:this.$nano.id(),label:"Any of the Words",value:1},{id:this.$nano.id(),label:"All of the Words",value:2}]}},computed:{_columns(){var t=this.columns.reduce((t,e)=>("isFilter"in e?e.isFilter&&t.push({id:e.id,label:e.label,value:e.name,dataType:e.dataType}):t.push({id:e.id,label:e.label,value:e.name,dataType:e.dataType}),t),[]);return t},apiPath(){if("repository"===this.module){if(this.$route.query.repositoryId)return`/repository/${this.moduleId}/uniqueColumnValues`}else if("form"===this.module)return`/form/${this.moduleId}/uniqueColumnValues`;return""}},watch:{model:{deep:!0,handler(){this.model}},$route:{deep:!0,handler(){this.$route.query.repositoryId||(this.filterGroups=[],this.activeFilter=!1)}},filterBy:{deep:!0,immediate:!0,handler(){0===this.filterBy.length&&""===this.contentSearch.contentSearchValue&&(this.activeFilter=!1)}},contentSearch:{deep:!0,immediate:!0,handler(){0===this.filterBy.length&&""===this.contentSearch.contentSearchValue&&(this.activeFilter=!1)}}},created(){this.getUsers()},methods:{conditions(t){if(!t)return[];if(1!==t.length)return Object(u["a"])("SHORT_TEXT").map(t=>({id:this.$nano.id(),label:`${Object(o["a"])(Object(r["a"])(t.split(" ")[0]))} ${t.split(" ")[1]?t.split(" ")[1]:""}`,value:t.split(" ")[0]}));{const e=this.columns.find(e=>e.name===t[0]);if(e)return Object(u["a"])(e.dataType).map(t=>({id:this.$nano.id(),label:`${Object(o["a"])(Object(r["a"])(t.split(" ")[0]))} ${t.split(" ")[1]?t.split(" ")[1]:""}`,value:t.split(" ")[0]}))}},addFilterGroup(t=0){this.filterGroups.splice(t,0,{id:this.$nano.id(),filters:[{id:this.$nano.id(),criteria:"",criteriaArray:[],condition:"",value:"",arrayValue:[]}],groupCondition:(this.filterGroups.length,"")}),this.filterGroups.length&&this.selectedFilter.length&&this.selectedFilter[1]&&1===this.selectedFilter[1].level&&(this.filterGroups[0].filters=[],this.selectedFilter.forEach((t,e)=>{0!=e&&this.filterGroups[0].filters.push({id:this.$nano.id(),criteria:t.fieldName,condition:"IS_EQUALS_TO",value:t.label,arrayValue:t.arrayValue||[]})}))},removeFilterGroup(t){this.filterGroups.splice(t,1)},addFilter(t){this.filterGroups[t].filters.push({id:this.$nano.id(),criteria:"",criteriaArray:[],condition:"CONTAINS",value:"",arrayValue:[]})},removeFilter(t,e){this.filterGroups[t].filters.splice(e,1)},async apply(){let t=0,e={};if(!this.$refs.form)return void(this.searchContent&&(this.$emit("update",this.filterGroups,e),this.model=!1,this.activeFilter=!0));for(const s of this.$refs.form){const e=await s.validate();e||t++}if(t)return;let i=!1;if(this.filterGroups.length&&(this.filterGroups[0].groupCondition="",this.filterGroups[0].filters.length||(this.filterGroups=[]),this.filterGroups.forEach(t=>{t.filters.length&&t.filters.forEach(t=>{t.criteriaArray.length>1?i=!0:t.criteria=t.criteriaArray[0],"SINGLE_SELECT"===t.dataType&&(t.value=JSON.stringify(t.arrayValue))})})),i){let t=[];this.filterGroups.forEach(e=>{e.filters.length&&e.filters.forEach(e=>{e.criteriaArray.forEach((i,s)=>{t.push({filters:[{criteria:i,condition:e.condition,value:e.value,dataType:e.dataType}],groupCondition:s?"OR":""})})})}),this.$emit("update",t,e)}else this.$emit("update",this.filterGroups,e);this.model=!1,this.activeFilter=!0},applyDataType(t,e,i){if(this.filterGroups[t].filters[e].condition="",1===i.length){this.filterGroups[t].filters[e].dataType="";let s=this._columns.find(t=>t.label===i[0]||t.value===i[0]);s&&(this.filterGroups[t].filters[e].dataType=s.dataType,"SHORT_TEXT"===s.dataType?this.filterGroups[t].filters[e].condition="CONTAINS":"SINGLE_SELECT"===s.dataType&&(this.filterGroups[t].filters[e].condition="IS_EQUALS_TO"));let a=this.filterGroups[t].filters[e];"SINGLE_SELECT"===a.dataType?this.filterGroups[t].filters[e].value=[]:this.filterGroups[t].filters[e].value=""}else this.filterGroups[t].filters[e].condition="CONTAINS",this.filterGroups[t].filters[e].dataType="SHORT_TEXT",this.filterGroups[t].filters[e].value=""},clearFilter(){this.filterGroups=[],this.activeFilter=!1,this.clearContentSearch(),this.$emit("update",this.filterGroups,"")},clearContentSearch(){this.showAdvanceOptions=!1,this.contentSearch.contentSearchValue="",this.contentSearch.searchType=1,this.contentSearch.fuzzy=0,this.$emit("updateContentSearch",this.contentSearch)},groupCondition(t){this.filterGroups[this.filterGroups.length-1].groupCondition=t},checkOptions(t){if(1===t.length){let e=this.columns.find(e=>e.name===t[0]);if(e&&e.apiLoad)return!0}return!1},getOptions(t){var e;return 1===t.length?"createdBy"===t[0]||"modifiedBy"===t[0]||"owner"===t[0]||"coordinator"===t[0]?this.userList:null===(e=this.columns.find(e=>e.name===t[0]))||void 0===e?void 0:e.options:[]},async getUsers(){this.userList=[];const{error:t,payload:e}=await w["s"].getUserList();t?this.$alert.error("Error fetching users"):e&&e.map(t=>{this.userList.push({id:this.$nano.id(),label:t.value,value:String(t.id)})})},async getUniqueOptions(t){try{const e=await C["b"].post(this.apiPath,JSON.stringify({column:t,keyword:"",rowFrom:0,rowCount:10})),{status:i,data:s}=e;if(200!==i)throw e;const a=JSON.parse(s);return this.options=[],a.forEach(t=>{let e=this.userList.find(e=>e.value===t);e&&this.options.push({id:this.$nano.id(),label:e.label,value:e.value})}),this.options}catch(e){console.error(e),this.$alert.error("Error fetching options")}}}},_=I,T=(i("ae23"),i("2877")),$=i("a026"),x=i("75c3"),A=i("b7fa"),L=i("f89c"),F=i("7937"),P=i("d882"),B=i("5ff7");const D="q-slider__marker-labels",M=t=>({value:t}),N=[34,37,40,33,39,38],O={mixins:[A["a"],L["b"]],directives:{TouchPan:x["a"]},props:{min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},data(){return{active:!1,preventFocus:!1,focus:!1,dragging:!1}},computed:{axis(){return!0===this.vertical?"--v":"--h"},labelSide(){return"-"+(!0===this.switchLabelSide?"switched":"standard")},isReversed(){return!0===this.vertical?!0===this.reverse:this.reverse!==(!0===this.$q.lang.rtl)},computedInnerMin(){return this.__getInnerMin(this.innerMin)},computedInnerMax(){return this.__getInnerMax(this.innerMax)},editable(){return!0!==this.disable&&!0!==this.readonly&&this.computedInnerMin<this.computedInnerMax},computedDecimals(){return(String(this.step).trim("0").split(".")[1]||"").length},computedStep(){return 0===this.step?1:this.step},computedTabindex(){return!0===this.editable?this.tabindex||0:-1},trackLen(){return this.max-this.min},innerBarLen(){return this.computedInnerMax-this.computedInnerMin},innerMinRatio(){return this.__convertModelToRatio(this.computedInnerMin)},innerMaxRatio(){return this.__convertModelToRatio(this.computedInnerMax)},positionProp(){return!0===this.vertical?!0===this.isReversed?"bottom":"top":!0===this.isReversed?"right":"left"},sizeProp(){return!0===this.vertical?"height":"width"},thicknessProp(){return!0===this.vertical?"width":"height"},orientation(){return!0===this.vertical?"vertical":"horizontal"},attributes(){const t={role:"slider","aria-valuemin":this.computedInnerMin,"aria-valuemax":this.computedInnerMax,"aria-orientation":this.orientation,"data-step":this.step};return!0===this.disable?t["aria-disabled"]="true":!0===this.readonly&&(t["aria-readonly"]="true"),t},classes(){return`q-slider q-slider${this.axis} q-slider--${!0===this.active?"":"in"}active inline no-wrap `+(!0===this.vertical?"row":"column")+(!0===this.disable?" disabled":" q-slider--enabled"+(!0===this.editable?" q-slider--editable":""))+("both"===this.focus?" q-slider--focus":"")+(this.label||!0===this.labelAlways?" q-slider--label":"")+(!0===this.labelAlways?" q-slider--label-always":"")+(!0===this.isDark?" q-slider--dark":"")+(!0===this.dense?" q-slider--dense q-slider--dense"+this.axis:"")},selectionBarClass(){const t=this.selectionColor||this.color;return"q-slider__selection absolute"+(void 0!==t?" text-"+t:"")},markerClass(){return this.__getAxisClass("markers")+" absolute overflow-hidden"},trackContainerClass(){return this.__getAxisClass("track-container")},pinClass(){return this.__getPositionClass("pin")},labelClass(){return this.__getPositionClass("label")},textContainerClass(){return this.__getPositionClass("text-container")},markerLabelsContainerClass(){return this.__getPositionClass("marker-labels-container")+(void 0!==this.markerLabelsClass?" "+this.markerLabelsClass:"")},trackClass(){return"q-slider__track relative-position no-outline"+(void 0!==this.trackColor?" bg-"+this.trackColor:"")},trackStyle(){const t={[this.thicknessProp]:this.trackSize};return void 0!==this.trackImg&&(t.backgroundImage=`url(${this.trackImg}) !important`),t},innerBarClass(){return"q-slider__inner absolute"+(void 0!==this.innerTrackColor?" bg-"+this.innerTrackColor:"")},innerBarStyle(){const t={[this.positionProp]:100*this.innerMinRatio+"%",[this.sizeProp]:100*(this.innerMaxRatio-this.innerMinRatio)+"%"};return void 0!==this.innerTrackImg&&(t.backgroundImage=`url(${this.innerTrackImg}) !important`),t},markerStep(){return!0===Object(B["c"])(this.markers)?this.markers:this.computedStep},markerTicks(){const t=[],e=this.markerStep;let i=this.min;do{t.push(i),i+=e}while(i<this.max);return t.push(this.max),t},markerLabelClass(){const t=` ${D}${this.axis}-`;return D+`${t}${!0===this.switchMarkerLabelsSide?"switched":"standard"}`+`${t}${!0===this.isReversed?"rtl":"ltr"}`},markerLabelsList(){return!1===this.markerLabels?null:this.__getMarkerList(this.markerLabels).map((t,e)=>({index:e,value:t.value,label:t.label||t.value,classes:this.markerLabelClass+(void 0!==t.classes?" "+t.classes:""),style:{...this.__getMarkerLabelStyle(t.value),...t.style||{}}}))},markerScope(){return{markerList:this.markerLabelsList,markerMap:this.markerLabelsMap,classes:this.markerLabelClass,getStyle:this.__getMarkerLabelStyle}},markerStyle(){if(0!==this.innerBarLen){const t=100*this.markerStep/this.innerBarLen;return{...this.innerBarStyle,backgroundSize:!0===this.vertical?`2px ${t}%`:t+"% 2px"}}return null},markerLabelsMap(){if(!1===this.markerLabels)return null;const t={};return this.markerLabelsList.forEach(e=>{t[e.value]=e}),t},panDirectives(){return!0===this.editable?[{name:"touch-pan",value:this.__onPan,modifiers:{[this.orientation]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}}]:null}},methods:{__getInnerMin(t){return!0===isNaN(t)||this.innerMin<this.min?this.min:this.innerMin},__getInnerMax(t){return!0===isNaN(t)||t>this.max?this.max:this.innerMax},__getPositionClass(t){const e="q-slider__"+t;return`${e} ${e}${this.axis} ${e}${this.axis}${this.labelSide}`},__getAxisClass(t){const e="q-slider__"+t;return`${e} ${e}${this.axis}`},__convertRatioToModel(t){let e=this.min+t*(this.max-this.min);if(this.step>0){const t=(e-this.min)%this.step;e+=(Math.abs(t)>=this.step/2?(t<0?-1:1)*this.step:0)-t}return this.computedDecimals>0&&(e=parseFloat(e.toFixed(this.computedDecimals))),Object(F["a"])(e,this.computedInnerMin,this.computedInnerMax)},__convertModelToRatio(t){return 0===this.trackLen?0:(t-this.min)/this.trackLen},__getDraggingRatio(t,e){const i=Object(P["h"])(t),s=!0===this.vertical?Object(F["a"])((i.top-e.top)/e.height,0,1):Object(F["a"])((i.left-e.left)/e.width,0,1);return Object(F["a"])(!0===this.isReversed?1-s:s,this.innerMinRatio,this.innerMaxRatio)},__getMarkerList(t){if(!1===t)return null;if(!0===t)return this.markerTicks.map(M);if("function"===typeof t)return this.markerTicks.map(e=>{const i=t(e);return!0===Object(B["d"])(i)?{...i,value:e}:{value:e,label:i}});const e=({value:t})=>t>=this.min&&t<=this.max;return!0===Array.isArray(t)?t.map(t=>!0===Object(B["d"])(t)?t:{value:t}).filter(e):Object.keys(t).map(e=>{const i=t[e],s=Number(e);return!0===Object(B["d"])(i)?{...i,value:s}:{value:s,label:i}}).filter(e)},__getMarkerLabelStyle(t){return{[this.positionProp]:100*(t-this.min)/this.trackLen+"%"}},__getMarkerLabelsContent(t){if(void 0!==this.$scopedSlots["marker-label-group"])return this.$scopedSlots["marker-label-group"](this.markerScope);const e=this.$scopedSlots["marker-label"];return void 0!==e?this.markerLabelsList.map(t=>e({marker:t,...this.markerScope})):this.markerLabelsList.map(e=>t("div",{key:e.value,style:e.style,class:e.classes},e.label))},__onPan(t){!0===t.isFinal?(void 0!==this.dragging&&(this.__updatePosition(t.evt),!0===t.touch&&this.__updateValue(!0),this.dragging=void 0,this.$emit("pan","end")),this.active=!1,this.focus=!1):!0===t.isFirst?(this.dragging=this.__getDragging(t.evt),this.__updatePosition(t.evt),this.__updateValue(),this.active=!0,this.$emit("pan","start")):(this.__updatePosition(t.evt),this.__updateValue())},__onBlur(){this.focus=!1},__onActivate(t){this.__updatePosition(t,this.__getDragging(t)),this.__updateValue(),this.preventFocus=!0,this.active=!0,document.addEventListener("mouseup",this.__onDeactivate,!0)},__onDeactivate(){this.preventFocus=!1,this.active=!1,this.__updateValue(!0),this.__onBlur(),document.removeEventListener("mouseup",this.__onDeactivate,!0)},__onMobileClick(t){this.__updatePosition(t,this.__getDragging(t)),this.__updateValue(!0)},__onKeyup(t){N.includes(t.keyCode)&&this.__updateValue(!0)},__getTextContainerStyle(t){if(!0===this.vertical)return null;const e=this.$q.lang.rtl!==this.reverse?1-t:t;return{transform:`translateX(calc(${2*e-1} * ${this.thumbSize} / 2 + ${50-100*e}%))`}},__getThumb(t,e){const i=[t("svg",{class:"q-slider__thumb-shape absolute-full",attrs:{viewBox:"0 0 20 20","aria-hidden":"true"}},[t("path",{attrs:{d:this.thumbPath}})]),t("div",{class:"q-slider__focus-ring fit"})];return!0!==this.label&&!0!==this.labelAlways||(i.push(t("div",{class:this.pinClass+" absolute fit no-pointer-events"+e.pinColor},[t("div",{class:this.labelClass,style:{minWidth:this.thumbSize}},[t("div",{class:this.textContainerClass,style:e.textContainerStyle},[t("span",{class:e.textClass},e.label)])])])),void 0!==this.name&&!0!==this.disable&&this.__injectFormInput(i,"push")),t("div",{class:e.classes,style:e.style,...e.nodeData},i)},__getContent(t,e){const i=[];"transparent"!==this.innerTrackColor&&i.push(t("div",{key:"inner",class:this.innerBarClass,style:this.innerBarStyle})),"transparent"!==this.selectionColor&&i.push(t("div",{key:"selection",class:this.selectionBarClass,style:this.selectionBarStyle})),!1!==this.markers&&i.push(t("div",{key:"marker",class:this.markerClass,style:this.markerStyle})),e(i);const s=[t("div",{key:"trackC",class:this.trackContainerClass,attrs:this.trackContainerAttrs,on:this.trackContainerEvents,directives:this.panDirectives},[t("div",{class:this.trackClass,style:this.trackStyle},i)])];if(!1!==this.markerLabels){const e=!0===this.switchMarkerLabelsSide?"unshift":"push";s[e](t("div",{key:"markerL",class:this.markerLabelsContainerClass},this.__getMarkerLabelsContent(t)))}return s}},beforeDestroy(){document.removeEventListener("mouseup",this.__onDeactivate,!0)}};var q=$["default"].extend({name:"QSlider",mixins:[O],props:{value:{required:!0,default:null,validator:t=>"number"===typeof t||null===t},labelValue:[String,Number]},data(){const t=this.__getInnerMin(this.innerMin),e=this.__getInnerMax(this.innerMax);return{model:null===this.value?t:Object(F["a"])(this.value,t,e),curRatio:0}},computed:{modelRatio(){return this.__convertModelToRatio(this.model)},ratio(){return!0===this.active?this.curRatio:this.modelRatio},selectionBarStyle(){const t={[this.positionProp]:100*this.innerMinRatio+"%",[this.sizeProp]:100*(this.ratio-this.innerMinRatio)+"%"};return void 0!==this.selectionImg&&(t.backgroundImage=`url(${this.selectionImg}) !important`),t},thumbLabel(){return void 0!==this.labelValue?this.labelValue:this.model},thumbClasses(){const t=this.thumbColor||this.color;return`q-slider__thumb q-slider__thumb${this.axis} q-slider__thumb${this.axis}-${!0===this.isReversed?"rtl":"ltr"} absolute non-selectable`+(!1===this.preventFocus&&!0===this.focus?" q-slider--focus":"")+(void 0!==t?" text-"+t:"")},thumbStyle(){return{width:this.thumbSize,height:this.thumbSize,[this.positionProp]:100*this.ratio+"%"}},thumbPinColor(){return void 0!==this.labelColor?" text-"+this.labelColor:""},thumbTextContainerStyle(){return this.__getTextContainerStyle(this.ratio)},thumbTextClass(){return"q-slider__text"+(void 0!==this.labelTextColor?" text-"+this.labelTextColor:"")},trackContainerEvents(){return!0!==this.editable?{}:!0===this.$q.platform.is.mobile?{click:this.__onMobileClick}:{mousedown:this.__onActivate,focus:this.__onFocus,blur:this.__onBlur,keydown:this.__onKeydown,keyup:this.__onKeyup}},trackContainerAttrs(){return{tabindex:!0!==this.$q.platform.is.mobile?this.computedTabindex:null}},modelUpdate(){return`${this.value}|${this.computedInnerMin}|${this.computedInnerMax}`}},watch:{modelUpdate(){this.model=null===this.value?this.computedInnerMin:Object(F["a"])(this.value,this.computedInnerMin,this.computedInnerMax)}},methods:{__updateValue(t){this.model!==this.value&&this.$emit("input",this.model),!0===t&&this.$emit("change",this.model)},__getDragging(){return this.$el.getBoundingClientRect()},__updatePosition(t,e=this.dragging){const i=this.__getDraggingRatio(t,e);this.model=this.__convertRatioToModel(i),this.curRatio=!0!==this.snap||0===this.computedStep?i:this.__convertModelToRatio(this.model)},__onFocus(){this.focus=!0},__onKeydown(t){if(!N.includes(t.keyCode))return;Object(P["l"])(t);const e=([34,33].includes(t.keyCode)?10:1)*this.computedStep,i=([34,37,40].includes(t.keyCode)?-1:1)*(!0===this.isReversed?-1:1)*(!0===this.vertical?-1:1)*e;this.model=Object(F["a"])(parseFloat((this.model+i).toFixed(this.computedDecimals)),this.computedInnerMin,this.computedInnerMax),this.__updateValue()}},render(t){const e=this.__getContent(t,e=>{e.push(this.__getThumb(t,{pinColor:this.thumbPinColor,textContainerStyle:this.thumbTextContainerStyle,textClass:this.thumbTextClass,label:this.thumbLabel,classes:this.thumbClasses,style:this.thumbStyle,nodeData:{}}))});return t("div",{class:this.classes+(null===this.value?" q-slider--no-value":""),attrs:{...this.attributes,"aria-valuenow":this.value}},e)}}),E=i("93dc"),V=i.n(E),R=Object(T["a"])(_,s,a,!1,null,"2eff0750",null);e["a"]=R.exports;V()(R,"components",{QSlider:q})},2852:function(t,e,i){"use strict";i("e5e9")},"28f7":function(t,e,i){},2948:function(t,e,i){"use strict";i("f108")},"297e":function(t,e,i){"use strict";i("f98d")},"298f":function(t,e,i){"use strict";i("0b71")},"2ac6":function(t,e,i){"use strict";i("0ce8")},"2b88":function(t,e,i){"use strict";
/*! 
  * portal-vue © Thorsten Lünborg, 2019 
  * 
  * Version: 2.1.7
  * 
  * LICENCE: MIT 
  * 
  * https://github.com/linusborg/portal-vue
  * 
 */function s(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}Object.defineProperty(e,"__esModule",{value:!0});var a=s(i("a026"));function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(t){return n(t)||l(t)||c()}function n(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function l(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var d="undefined"!==typeof window;function m(t){return Array.isArray(t)||"object"===o(t)?Object.freeze(t):t}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.reduce((function(t,i){var s=i.passengers[0],a="function"===typeof s?s(e):i.passengers;return t.concat(a)}),[])}function u(t,e){return t.map((function(t,e){return[e,t]})).sort((function(t,i){return e(t[1],i[1])||t[0]-i[0]})).map((function(t){return t[1]}))}function p(t,e){return e.reduce((function(e,i){return t.hasOwnProperty(i)&&(e[i]=t[i]),e}),{})}var f={},v={},y={},b=a.extend({data:function(){return{transports:f,targets:v,sources:y,trackInstances:d}},methods:{open:function(t){if(d){var e=t.to,i=t.from,s=t.passengers,o=t.order,r=void 0===o?1/0:o;if(e&&i&&s){var n={to:e,from:i,passengers:m(s),order:r},l=Object.keys(this.transports);-1===l.indexOf(e)&&a.set(this.transports,e,[]);var c=this.$_getTransportIndex(n),h=this.transports[e].slice(0);-1===c?h.push(n):h[c]=n,this.transports[e]=u(h,(function(t,e){return t.order-e.order}))}}},close:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.to,s=t.from;if(i&&(s||!1!==e)&&this.transports[i])if(e)this.transports[i]=[];else{var a=this.$_getTransportIndex(t);if(a>=0){var o=this.transports[i].slice(0);o.splice(a,1),this.transports[i]=o}}},registerTarget:function(t,e,i){d&&(this.trackInstances&&!i&&this.targets[t]&&console.warn("[portal-vue]: Target ".concat(t," already exists")),this.$set(this.targets,t,Object.freeze([e])))},unregisterTarget:function(t){this.$delete(this.targets,t)},registerSource:function(t,e,i){d&&(this.trackInstances&&!i&&this.sources[t]&&console.warn("[portal-vue]: source ".concat(t," already exists")),this.$set(this.sources,t,Object.freeze([e])))},unregisterSource:function(t){this.$delete(this.sources,t)},hasTarget:function(t){return!(!this.targets[t]||!this.targets[t][0])},hasSource:function(t){return!(!this.sources[t]||!this.sources[t][0])},hasContentFor:function(t){return!!this.transports[t]&&!!this.transports[t].length},$_getTransportIndex:function(t){var e=t.to,i=t.from;for(var s in this.transports[e])if(this.transports[e][s].from===i)return+s;return-1}}}),g=new b(f),w=1,C=a.extend({name:"portal",props:{disabled:{type:Boolean},name:{type:String,default:function(){return String(w++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}}},created:function(){var t=this;this.$nextTick((function(){g.registerSource(t.name,t)}))},mounted:function(){this.disabled||this.sendUpdate()},updated:function(){this.disabled?this.clear():this.sendUpdate()},beforeDestroy:function(){g.unregisterSource(this.name),this.clear()},watch:{to:function(t,e){e&&e!==t&&this.clear(e),this.sendUpdate()}},methods:{clear:function(t){var e={from:this.name,to:t||this.to};g.close(e)},normalizeSlots:function(){return this.$scopedSlots.default?[this.$scopedSlots.default]:this.$slots.default},normalizeOwnChildren:function(t){return"function"===typeof t?t(this.slotProps):t},sendUpdate:function(){var t=this.normalizeSlots();if(t){var e={from:this.name,to:this.to,passengers:r(t),order:this.order};g.open(e)}else this.clear()}},render:function(t){var e=this.$slots.default||this.$scopedSlots.default||[],i=this.tag;return e&&this.disabled?e.length<=1&&this.slim?this.normalizeOwnChildren(e)[0]:t(i,[this.normalizeOwnChildren(e)]):this.slim?t():t(i,{class:{"v-portal":!0},style:{display:"none"},key:"v-portal-placeholder"})}}),k=a.extend({name:"portalTarget",props:{multiple:{type:Boolean,default:!1},name:{type:String,required:!0},slim:{type:Boolean,default:!1},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},data:function(){return{transports:g.transports,firstRender:!0}},created:function(){var t=this;this.$nextTick((function(){g.registerTarget(t.name,t)}))},watch:{ownTransports:function(){this.$emit("change",this.children().length>0)},name:function(t,e){g.unregisterTarget(e),g.registerTarget(t,this)}},mounted:function(){var t=this;this.transition&&this.$nextTick((function(){t.firstRender=!1}))},beforeDestroy:function(){g.unregisterTarget(this.name)},computed:{ownTransports:function(){var t=this.transports[this.name]||[];return this.multiple?t:0===t.length?[]:[t[t.length-1]]},passengers:function(){return h(this.ownTransports,this.slotProps)}},methods:{children:function(){return 0!==this.passengers.length?this.passengers:this.$scopedSlots.default?this.$scopedSlots.default(this.slotProps):this.$slots.default||[]},noWrapper:function(){var t=this.slim&&!this.transition;return t&&this.children().length>1&&console.warn("[portal-vue]: PortalTarget with `slim` option received more than one child element."),t}},render:function(t){var e=this.noWrapper(),i=this.children(),s=this.transition||this.tag;return e?i[0]:this.slim&&!s?t():t(s,{props:{tag:this.transition&&this.tag?this.tag:void 0},class:{"vue-portal-target":!0}},i)}}),S=0,I=["disabled","name","order","slim","slotProps","tag","to"],_=["multiple","transition"],T=a.extend({name:"MountingPortal",inheritAttrs:!1,props:{append:{type:[Boolean,String]},bail:{type:Boolean},mountTo:{type:String,required:!0},disabled:{type:Boolean},name:{type:String,default:function(){return"mounted_"+String(S++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}},multiple:{type:Boolean,default:!1},targetSlim:{type:Boolean},targetSlotProps:{type:Object,default:function(){return{}}},targetTag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},created:function(){if("undefined"!==typeof document){var t=document.querySelector(this.mountTo);if(t){var e=this.$props;if(g.targets[e.name])e.bail?console.warn("[portal-vue]: Target ".concat(e.name," is already mounted.\n        Aborting because 'bail: true' is set")):this.portalTarget=g.targets[e.name];else{var i=e.append;if(i){var s="string"===typeof i?i:"DIV",a=document.createElement(s);t.appendChild(a),t=a}var o=p(this.$props,_);o.slim=this.targetSlim,o.tag=this.targetTag,o.slotProps=this.targetSlotProps,o.name=this.to,this.portalTarget=new k({el:t,parent:this.$parent||this,propsData:o})}}else console.error("[portal-vue]: Mount Point '".concat(this.mountTo,"' not found in document"))}},beforeDestroy:function(){var t=this.portalTarget;if(this.append){var e=t.$el;e.parentNode.removeChild(e)}t.$destroy()},render:function(t){if(!this.portalTarget)return console.warn("[portal-vue] Target wasn't mounted"),t();if(!this.$scopedSlots.manual){var e=p(this.$props,I);return t(C,{props:e,attrs:this.$attrs,on:this.$listeners,scopedSlots:this.$scopedSlots},this.$slots.default)}var i=this.$scopedSlots.manual({to:this.to});return Array.isArray(i)&&(i=i[0]),i||t()}});function $(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.component(e.portalName||"Portal",C),t.component(e.portalTargetName||"PortalTarget",k),t.component(e.MountingPortalName||"MountingPortal",T)}var x={install:$};e.default=x,e.Portal=C,e.PortalTarget=k,e.MountingPortal=T,e.Wormhole=g},"2d32":function(t,e,i){"use strict";i("48b9")},"2d66":function(t,e,i){"use strict";i("2e4f")},"2d9d":function(t,e,i){"use strict";i("6f95")},"2dcd":function(t,e,i){},"2ddf":function(t,e,i){},"2e4f":function(t,e,i){},"2e65":function(t,e,i){"use strict";i("3d68")},"2f12":function(t,e,i){"use strict";i("2ddf")},3002:function(t,e,i){},"307a":function(t,e,i){},"31d6":function(t,e,i){"use strict";i("97a4")},3595:function(t,e,i){"use strict";i("ee74")},"36ce":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"breadcrumbs"}},[t._l(t.breadcrumbs,(function(i,s){return[e("Breadcrumb",{key:i.id,attrs:{label:i.label,route:i.route},on:{click:function(e){return t.goto(i)}}}),s!==t.breadcrumbs.length-1?e("Separator",{key:s}):t._e()]}))],2)},a=[],o=(i("14d9"),function(){var t=this,e=t._self._c;return e("div",t._g({class:{"has-link":t.route},attrs:{id:"breadcrumb"}},t.$listeners),[t._v(" "+t._s(t.label)+" ")])}),r=[],n={name:"Breadcrumb",props:{label:{type:String,required:!0},route:{type:String,default:""}}},l=n,c=(i("a5be"),i("2877")),d=Object(c["a"])(l,o,r,!1,null,"296e1bac",null),m=d.exports,h=i("5ca1"),u={name:"Breadcrumbs",components:{Breadcrumb:m,Separator:h["a"]},props:{breadcrumbs:{type:Array,required:!0}},methods:{goto(t){if(this.$store.state.profileMenus.length)if(t.query){let e=t.query.split(":");this.$router.push({name:t.route,query:{[e[0]]:e[1]}})}else this.$router.push({name:t.route})}}},p=u,f=(i("7fe6"),Object(c["a"])(p,s,a,!1,null,"ce99f49c",null));e["a"]=f.exports},"381b":function(t,e,i){"use strict";const s={SHORT_TEXT:"SHORT_TEXT",NUMBER:"NUMBER",BOOLEAN:"BOOLEAN",DATE:"DATE",TIME:"TIME",DATE_TIME:"DATE_TIME",SINGLE_SELECT:"SINGLE_SELECT",TABLE:"TABLE",BARCODE:"BARCODE",OMR:"OMR",AUTO_GENERATED:"AUTO_GENERATED"};Object.freeze(s),e["a"]=s},3846:function(t,e,i){t.exports=i.p+"img/sobha-mark-logo.7fc8820b.png"},3980:function(t,e,i){"use strict";var s=i("a026"),a=i("d882"),o=i("0967"),r={data(){return{canRender:!o["f"]}},mounted(){!1===this.canRender&&(this.canRender=!0)}},n=i("d54d");e["a"]=s["default"].extend({name:"QResizeObserver",mixins:[r],props:{debounce:{type:[String,Number],default:100}},data(){return!0===this.hasObserver?{}:{url:!0===this.$q.platform.is.ie?null:"about:blank"}},methods:{trigger(t){!0===t||0===this.debounce||"0"===this.debounce?this.__emit():null===this.timer&&(this.timer=setTimeout(this.__emit,this.debounce))},__emit(){if(null!==this.timer&&(clearTimeout(this.timer),this.timer=null),!this.$el||!this.$el.parentNode)return;const t=this.$el.parentNode,e={width:t.offsetWidth,height:t.offsetHeight};e.width===this.size.width&&e.height===this.size.height||(this.size=e,this.$emit("resize",this.size))},__cleanup(){void 0!==this.curDocView&&(void 0!==this.curDocView.removeEventListener&&this.curDocView.removeEventListener("resize",this.trigger,a["f"].passive),this.curDocView=void 0)},__onObjLoad(){this.__cleanup(),this.$el.contentDocument&&(this.curDocView=this.$el.contentDocument.defaultView,this.curDocView.addEventListener("resize",this.trigger,a["f"].passive)),this.__emit()}},render(t){if(!1!==this.canRender&&!0!==this.hasObserver)return t("object",{style:this.style,attrs:{tabindex:-1,type:"text/html",data:this.url,"aria-hidden":"true"},on:Object(n["b"])(this,"load",{load:this.__onObjLoad})})},beforeCreate(){this.size={width:-1,height:-1},!0!==o["e"]&&(this.hasObserver="undefined"!==typeof ResizeObserver,!0!==this.hasObserver&&(this.style=(this.$q.platform.is.ie?"visibility:hidden;":"")+"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;"))},mounted(){if(this.timer=null,!0===this.hasObserver)return this.observer=new ResizeObserver(this.trigger),this.observer.observe(this.$el.parentNode),void this.__emit();!0===this.$q.platform.is.ie?(this.url="about:blank",this.__emit()):this.__onObjLoad()},beforeDestroy(){clearTimeout(this.timer),!0!==this.hasObserver?this.__cleanup():void 0!==this.observer&&this.$el.parentNode&&this.observer.unobserve(this.$el.parentNode)}})},"39cc":function(t,e,i){"use strict";i("fad0")},"3b73":function(t,e,i){"use strict";i("3c65"),i("14d9");var s=i("a026"),a=i("66e5"),o=i("4074"),r=i("0170"),n=i("0016"),l=i("e9c1"),c=i("eb85"),d=i("8716"),m=i("463c"),h=i("7ee0"),u=i("b7fa"),p=i("d882"),f=i("e277"),v=i("d54d"),y=i("1732");const b="q:expansion-item:close",g=Object.keys(d["b"]);e["a"]=s["default"].extend({name:"QExpansionItem",mixins:[u["a"],m["a"],h["a"]],props:{...d["b"],icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},data(){return{showing:void 0!==this.value?this.value:this.defaultOpened}},watch:{showing(t){!0===t&&void 0!==this.group&&this.$root.$emit(b,this)},group(t,e){void 0!==t&&void 0===e?this.$root.$on(b,this.__eventHandler):void 0===t&&void 0!==e&&this.$root.$off(b,this.__eventHandler)}},computed:{classes(){return"q-expansion-item--"+(!0===this.showing?"expanded":"collapsed")+" q-expansion-item--"+(!0===this.popup?"popup":"standard")},contentStyle(){if(void 0!==this.contentInsetLevel){const t=!0===this.$q.lang.rtl?"Right":"Left";return{["padding"+t]:56*this.contentInsetLevel+"px"}}},hasLink(){return!0!==this.disable&&(void 0!==this.href||void 0!==this.to&&null!==this.to&&""!==this.to)},linkProps(){const t={};return g.forEach(e=>{t[e]=this[e]}),t},isClickable(){return!0===this.hasLink||!0!==this.expandIconToggle},expansionIcon(){return void 0!==this.expandedIcon&&!0===this.showing?this.expandedIcon:this.expandIcon||this.$q.iconSet.expansionItem[!0===this.denseToggle?"denseIcon":"icon"]},activeToggleIcon(){return!0!==this.disable&&(!0===this.hasLink||!0===this.expandIconToggle)},headerSlotScope(){return{expanded:!0===this.showing,detailsId:this.targetUid,toggle:this.toggle,show:this.show,hide:this.hide}},toggleAriaAttrs(){const t=void 0!==this.toggleAriaLabel?this.toggleAriaLabel:this.$q.lang.label[!0===this.showing?"collapse":"expand"](this.label);return{role:"button","aria-expanded":!0===this.showing?"true":"false","aria-controls":this.targetUid,"aria-label":t}}},methods:{__onHeaderClick(t){!0!==this.hasLink&&this.toggle(t),this.$emit("click",t)},__toggleIconKeyboard(t){13===t.keyCode&&this.__toggleIcon(t,!0)},__toggleIcon(t,e){!0!==e&&void 0!==this.$refs.blurTarget&&this.$refs.blurTarget.focus(),this.toggle(t),Object(p["l"])(t)},__eventHandler(t){this!==t&&this.group===t.group&&this.hide()},__getToggleIcon(t){const e={staticClass:"q-focusable relative-position cursor-pointer"+(!0===this.denseToggle&&!0===this.switchToggleSide?" items-end":""),class:this.expandIconClass,props:{side:!0!==this.switchToggleSide,avatar:this.switchToggleSide}},i=[t(n["a"],{staticClass:"q-expansion-item__toggle-icon",class:void 0===this.expandedIcon&&!0===this.showing?"q-expansion-item__toggle-icon--rotated":void 0,props:{name:this.expansionIcon}})];return!0===this.activeToggleIcon&&(Object.assign(e,{attrs:{tabindex:0,...this.toggleAriaAttrs},on:Object(v["b"])(this,"inpExt",{click:this.__toggleIcon,keyup:this.__toggleIconKeyboard})}),i.unshift(t("div",{ref:"blurTarget",staticClass:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",attrs:{tabindex:-1}}))),t(o["a"],e,i)},__getHeader(t){let e;void 0!==this.$scopedSlots.header?e=[].concat(this.$scopedSlots.header(this.headerSlotScope)):(e=[t(o["a"],[t(r["a"],{props:{lines:this.labelLines}},[this.label||""]),this.caption?t(r["a"],{props:{lines:this.captionLines,caption:!0}},[this.caption]):null])],this.icon&&e[!0===this.switchToggleSide?"push":"unshift"](t(o["a"],{props:{side:!0===this.switchToggleSide,avatar:!0!==this.switchToggleSide}},[t(n["a"],{props:{name:this.icon}})]))),!0!==this.disable&&!0!==this.hideExpandIcon&&e[!0===this.switchToggleSide?"unshift":"push"](this.__getToggleIcon(t));const i={ref:"item",style:this.headerStyle,class:this.headerClass,props:{dark:this.isDark,disable:this.disable,dense:this.dense,insetLevel:this.headerInsetLevel}};return!0===this.isClickable&&(i.props.clickable=!0,!0===this.hasLink?Object.assign(i.props,this.linkProps):i.attrs=this.toggleAriaAttrs,i.on={...this.qListeners,click:this.__onHeaderClick}),t(a["a"],i,e)},__getContent(t){const e=[this.__getHeader(t),t(l["a"],{props:{duration:this.duration},on:Object(v["b"])(this,"slide",{show:()=>{this.$emit("after-show")},hide:()=>{this.$emit("after-hide")}})},[t("div",{staticClass:"q-expansion-item__content relative-position",style:this.contentStyle,attrs:{id:this.targetUid},directives:[{name:"show",value:this.showing}]},Object(f["c"])(this,"default"))])];return this.expandSeparator&&e.push(t(c["a"],{staticClass:"q-expansion-item__border q-expansion-item__border--top absolute-top",props:{dark:this.isDark}}),t(c["a"],{staticClass:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",props:{dark:this.isDark}})),e}},render(t){return t("div",{staticClass:"q-expansion-item q-item-type",class:this.classes},[t("div",{staticClass:"q-expansion-item__container relative-position"},this.__getContent(t))])},created(){void 0!==this.group&&this.$root.$on(b,this.__eventHandler),this.targetUid="e_"+Object(y["a"])()},beforeDestroy(){void 0!==this.group&&this.$root.$off(b,this.__eventHandler)}})},"3d35":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Confirm",{attrs:{value:t.value,icon:"eva-trash-2-outline","icon-color":"red"},on:{input:t.handleInput},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Delete saved Items")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"q-py-md"},[e("p",[t._v(" Are you sure you want to delete the save search "),e("b",[t._v('"'+t._s(t.deleteData.name)+'"')]),t._v(". If you delete the save search, you will not be able to use this . ")])])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"red"},on:{click:t.handleNo}}),e("BaseButton",{attrs:{label:"yes",color:"red"},on:{click:t.deleteFilter}})]},proxy:!0}])})},a=[],o=i("1c54"),r=i("1b0d"),n={name:"ConfirmDeleteRepository",components:{Confirm:o["a"]},props:{value:{type:Boolean,required:!0},deleteData:{type:Object,required:!0}},methods:{handleInput(t){this.$emit("input",t)},handleNo(){this.$emit("input",!1)},async deleteFilter(){const{error:t}=await r["e"].deleteFilter(this.deleteData.id,this.deleteData);t?this.$alert.warning("error"):(this.$emit("input",!1),this.$emit("delete"),this.$alert.success("Save search deleted successfully"))}}},l=n,c=i("2877"),d=Object(c["a"])(l,s,a,!1,null,"55f4b484",null);e["a"]=d.exports},"3d68":function(t,e,i){},"3fc6":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-my-md",attrs:{id:"process-sheet"}},[e("Sheet",{attrs:{width:"30vw","sub-actions":!(!t.selectedProcess.processId||!t.attachmentList.length),upload:"inbox"===t.selectedNode,"no-padding":""},on:{input:t.closeAttachmentsSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[t.selectedProcess.processId?e("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[t._v(" auto-refresh every 30 seconds ")]):t._e(),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.getAttachments()}}})]},proxy:!0},"inbox"===t.selectedNode?{key:"upload",fn:function(){return[e("div",{staticClass:"hint",on:{click:function(e){return t.$refs.attachments.click()}}},[e("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),e("div",{staticClass:"title text-blue"},[t._v("UPLOAD FILES")]),e("div",{staticClass:"description"},[t._v("Click here to choose files and upload")])],1)]},proxy:!0}:null,t.selectedProcess.processId&&t.attachmentList.length?{key:"subActions",fn:function(){return[e("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:t.fileSelectAll},model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}}),t._v(" Select All "),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!t.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:t.documentShare}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"merge documents (only PDF)",expression:"'merge documents (only PDF)'",modifiers:{top:!0}}],attrs:{"is-disabled":!(t.selectedFileCount>1&&t.isSelectedPDF),icon:"mdi-file-document-multiple-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:t.documentMerge}})]},proxy:!0}:null],null,!0),model:{value:t.attachmentSheet,callback:function(e){t.attachmentSheet=e},expression:"attachmentSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:"inbox"===t.selectedNode?"calc(100vh - 200px)":""}},[e("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:t.uploadWflowAttachments}}),t._l(t.checkList,(function(i){return[i.name?[i.attach?e("div",{key:i.uid},[t._l(t.attachmentFilterCheckList(i.name),(function(i){return[e("div",{key:i.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[t.selectedProcess.processId?e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:i.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(t){i.checked=!i.checked}}})],1):t._e(),i.formJsonId?e("div",{staticClass:"col-auto"},[e("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:t.getLabel(i.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):t._e(),e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(i.name)}})],1),e("div",{staticClass:"col ellipsis",on:{click:function(e){return t.openFile(i)}}},[t._v(" "+t._s(i.name)+" ")]),e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.getFileData(i)}}})],1),"inbox"===t.selectedNode&&i.createdBy===t.$store.state.session.id?[e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.attachmentDelete(i.id)}}})],1),e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Re-Upload",expression:"'Re-Upload'",modifiers:{top:!0}}],attrs:{icon:"mdi-file-upload",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){e.stopPropagation(),t.reuploadId=i.id,t.reupload(i.name)}}})],1)]:t._e()],2),e("div",{staticClass:"meta"},[e("div",[t._v(t._s(t.$day.format(i.createdAt)))]),i.createdBy?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.createdByEmail))])]:t._e(),i.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.fileSize(i.size)))])]:t._e()],2)])]}))],2):e("div",{key:i.uid,staticClass:"checkList"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),e("div",{staticClass:"col q-ml-sm"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t._v(" "+t._s(i.name)+" ")]),i.required?e("div",{staticClass:"col-12 q-mt-sm"},[e("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[t._v(" Required ")])],1):t._e()])]),e("div",{staticClass:"col-auto"},[e("div",{staticClass:"col-12",on:{click:function(e){return t.attachTemplate(i.uid)}}},[e("q-chip",{staticClass:"chips primary-hover medium",attrs:{outline:"",color:"primary"}},[e("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-upload-outline",color:"primary","text-color":"white"}}),t._v(" Upload ")],1)],1),i.template?e("div",{staticClass:"col-12",on:{click:function(e){return t.download(i.id)}}},[e("q-chip",{staticClass:"chips secondary-hover medium",attrs:{outline:"",color:"secondary"}},[e("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-download-outline",color:"secondary","text-color":"white"}}),t._v(" Download ")],1)],1):t._e()])])])]:t._e()]})),t._l(t.attachmentList,(function(i){return[t.isCheckList(i.name)?[e("div",{key:i.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:i.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(t){i.checked=!i.checked}}})],1),i.formJsonId?e("div",{staticClass:"col-auto"},[e("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:t.getLabel(i.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):t._e(),e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(i.name)}})],1),e("div",{staticClass:"col ellipsis",on:{click:function(e){return t.openFile(i)}}},[t._v(" "+t._s(i.name)+" ")]),e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.getFileData(i)}}})],1),"inbox"===t.selectedNode&&i.createdBy===t.$store.state.session.id?e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.attachmentDelete(i.id)}}})],1):t._e()]),e("div",{staticClass:"meta"},[e("div",[t._v(t._s(t.$day.format(i.createdAt)))]),i.createdBy?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.createdByEmail))])]:t._e(),i.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.fileSize(i.size)))])]:t._e()],2)])]:t._e()]}))],2)],1)]),e("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"inbox"===t.selectedNode?"30":"0","no-padding":""},on:{input:t.closeCommentsSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments ")]},proxy:!0}]),model:{value:t.commentsSheet,callback:function(e){t.commentsSheet=e},expression:"commentsSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:"inbox"===t.selectedNode?t.checkCommentsOption()?"calc(100vh - 190px)":"calc(100vh - 150px)":""}},[t._l(t.commentsList,(function(i,s){return[e("q-chat-message",{key:s,staticClass:"q-ma-sm",attrs:{name:i.createdBy===t.$store.state.session.id?"me":i.createdByEmail||i.externalCommentsby,text:[i.comments],"text-html":"",sent:i.createdBy===t.$store.state.session.id,stamp:t.lastActionDuration(i.createdAt),"bg-color":i.createdBy===t.$store.state.session.id?"primary-1":"secondary-1"}})]}))],2)],1),"inbox"===t.selectedNode?e("div",{staticClass:"col q-pa-sm"},[e("div",{staticClass:"row"},[t.checkTenant()?[e("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:t.commentActions,"options-per-line":2},model:{value:t.commentAction,callback:function(e){t.commentAction=e},expression:"commentAction"}})]:t._e(),t.isTenantGOTOComments()?[e("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:t.jiraCommentActions,"options-per-line":2},model:{value:t.jiraCommentAction,callback:function(e){t.jiraCommentAction=e},expression:"jiraCommentAction"}})]:t._e()],2),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}})],1),e("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:t.saveComment}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(e){t.advancedCommentsSheet=!0}}})],1)])]):t._e()]),e("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(e){t.advancedCommentsSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[e("TextBuilderField",{model:{value:t.advancedCommentText,callback:function(e){t.advancedCommentText=e},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[t.checkTenant()?[t.checkTenant()?e("SingleChoiceField",{staticClass:"actions q-mr-sm noborder",attrs:{options:t.commentActions,"options-per-line":2},model:{value:t.commentAction,callback:function(e){t.commentAction=e},expression:"commentAction"}}):t._e()]:t._e(),t.isTenantGOTOComments()?[e("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:t.jiraCommentActions,"options-per-line":2},model:{value:t.jiraCommentAction,callback:function(e){t.jiraCommentAction=e},expression:"jiraCommentAction"}})]:t._e(),e("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:t.saveAdvancedComment}})]},proxy:!0}]),model:{value:t.advancedCommentsSheet,callback:function(e){t.advancedCommentsSheet=e},expression:"advancedCommentsSheet"}}),e("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(e){t.fileSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"attachmentFileHeader"},[t.selectedFile.formJsonId?[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:t.getLabel(t.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:t._e(),e("div",{staticClass:"avatar q-ml-sm"},[e("FileIcon",{attrs:{"mime-type":t.fileType(t.selectedFile.name)}})],1),e("div",{staticClass:"q-ml-md"},[e("div",{staticClass:"filename"},[t._v(" "+t._s(t.selectedFile.name)+" ")]),e("div",{staticClass:"meta"},[e("div",[t._v("Archived At: "+t._s(t.$day.format(t.selectedFile.createdAt)))]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v("Archived By: "+t._s(t.selectedFile.createdByEmail))]),t.selectedFile.size?e("div",[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t._v(" File Size: "+t._s(t.fileSize(t.selectedFile.size))+" ")],1):t._e()],1)])],2)]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[e("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},t._l(t.documentActionList,(function(i){return e("ListItem",{key:i.id,attrs:{icon:i.icon,label:i.label},on:{click:function(e){return t.documentAction(i)}}})})),1)],1)],1)]},proxy:!0}]),model:{value:t.fileSheet,callback:function(e){t.fileSheet=e},expression:"fileSheet"}},[e("div",{staticClass:"attachmentFileFrame"},[e("div",{staticClass:"file-list"},[e("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:t.fileLink(),frameborder:"0"}})])])]),e("EmailSharing",{attrs:{"repository-id":t.workflow.repositoryId,"file-list":t.selectedFileList},on:{"update:fileList":function(e){t.selectedFileList=e},"update:file-list":function(e){t.selectedFileList=e}},model:{value:t.emailSharingSheet,callback:function(e){t.emailSharingSheet=e},expression:"emailSharingSheet"}}),e("FileDetails",{attrs:{"file-data":t.fileData},model:{value:t.fileDetailsSheet,callback:function(e){t.fileDetailsSheet=e},expression:"fileDetailsSheet"}}),e("Sheet",{attrs:{width:"100vw","has-footer":!t.isCustomizedWorkflow||"inbox"!==t.selectedNode,"no-padding":""},on:{input:function(e){t.processSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.headerTitle)+" ")]},proxy:!0},{key:"actions",fn:function(){return[t.itemModel.itemId?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[e("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},t._l(t.documentActionList,(function(i){return e("ListItem",{key:i.id,attrs:{icon:i.icon,label:i.label},on:{click:function(e){return t.processDocumentAction(i)}}})})),1)],1)],1):t._e()]},proxy:!0},{key:"footer",fn:function(){return[t.isCustomizedWorkflow&&"inbox"===t.selectedNode?t._e():[t.actions.length?e("div",{staticClass:"footer row"},["inbox"===t.selectedNode?e("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Save",color:"secondary"},on:{click:function(e){return t.validateRequest("Save")}}}):t._e(),t._l(t.actions,(function(i){return["Approve"===i||"Complete"===i||"Rightsize"===i?e("BaseButton",{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"positive"},on:{click:function(e){return t.validateRequest(i)}}}):"Reject"===i||"Terminate"===i||"Force Close"===i?e("BaseButton",{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"red"},on:{click:function(e){return t.validateRequest(i)}}}):"Forward"===i||i.indexOf("Reply")>-1||"Rollback"===i||"Assign"===i?e("BaseButton",{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"orange"},on:{click:function(e){return t.validateRequest(i)}}}):e("BaseButton","To Requester"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"pink"},on:{click:function(e){return t.validateRequest(i)}}}:{key:i,staticClass:"q-ml-md",attrs:{label:i},on:{click:function(e){return t.validateRequest(i)}}})]}))],2):t._e()],"psyCrYXtKfcs-EJmrYIhv"===t.selectedProcess.activityId?["inbox"===t.selectedNode?e("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Verify",disabled:t.customVerify,color:"primary"},on:{click:function(e){return t.validateRequest("CustomVerify",!1,!1)}}}):t._e()]:t._e()]},proxy:!0}]),model:{value:t.processSheet,callback:function(e){t.processSheet=e},expression:"processSheet"}},[e("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t.isCustomizedWorkflow&&"inbox"===t.selectedNode?[e("CustomForm",{attrs:{panels:t.panels,"secondary-panels":t.secondaryPanels,"save-action":t.saveAction,"workflow-form-model":t.workflowFormModel,actions:t.actions,"request-prefix":t.requestPrefix,"ml-prediction":t.mlPrediction},on:{"update:saveAction":function(e){t.saveAction=e},"update:save-action":function(e){t.saveAction=e},"update:workflowFormModel":function(e){t.workflowFormModel=e},"update:workflow-form-model":function(e){t.workflowFormModel=e},"update:requestPrefix":function(e){t.requestPrefix=e},"update:request-prefix":function(e){t.requestPrefix=e},"update:mlPrediction":function(e){t.mlPrediction=e},"update:ml-prediction":function(e){t.mlPrediction=e}}})]:[t.formId?e("div",{staticClass:"col",attrs:{id:"form-view"}},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 145px)"}},[t.formId?e("RenderForm",{attrs:{"form-id":t.formId,panels:t.panels,"secondary-panels":t.secondaryPanels,"form-settings":t.formSettings,"form-model":t.formModel,"save-action":t.saveAction,"workflow-form-model":t.workflowFormModel,"workflow-model":t.workflowModel,"is-readonly":t.formEditAccess,"form-edit-controls":t.formEditControls,"form-visibility-access":t.formVisibilityAccess,"form-secure-controls":t.formSecureControls,"enable-controls":t.enableControls,"check-list":t.checkList,"form-fields":t.formFields,"data-validation-values":t.dataValidationValues,"form-check-list":t.formCheckList},on:{"update:saveAction":function(e){t.saveAction=e},"update:save-action":function(e){t.saveAction=e},"update:workflowFormModel":function(e){t.workflowFormModel=e},"update:workflow-form-model":function(e){t.workflowFormModel=e},"update:workflowModel":function(e){t.workflowModel=e},"update:workflow-model":function(e){t.workflowModel=e},"update:checkList":function(e){t.checkList=e},"update:check-list":function(e){t.checkList=e},"update:formCheckList":function(e){t.formCheckList=e},"update:form-check-list":function(e){t.formCheckList=e}}}):t._e(),t.signList.length?e("div",{staticClass:"q-pa-md",attrs:{id:"approvalSignature"}},[e("div",{staticClass:"title q-mb-sm"},[t._v("Approval Signature")]),e("BaseSeparator",{staticClass:"q-my-sm"}),e("div",{staticClass:"row"},[t._l(t.signList,(function(i){return[e("div",{key:i.id,staticClass:"col-3 q-mb-sm"},[e("img",{staticClass:"imgCenter col",attrs:{src:t.signLink(i.id)}}),e("div",{staticClass:"text row"},[e("span",{staticClass:"col-12 text-bold"},[t._v(t._s(i.stage))]),e("span",{staticClass:"col-12"},[t._v(t._s(i.createdByEmail))]),e("span",{staticClass:"col-12"},[t._v(t._s(t.$day.format(i.createdAt)))])])])]}))],2)],1):t._e(),t.userSignature?e("SignatureField",{staticClass:"q-pa-md",attrs:{label:"Signature"},model:{value:t.signImg,callback:function(e){t.signImg=e},expression:"signImg"}}):t._e()],1)],1):t._e(),t.itemModel.itemId?e("div",{staticClass:"col"},[e("div",{staticClass:"fileFrame"},[e("div",{staticClass:"file-list"},[e("iframe",{ref:"myProcessFiles",attrs:{id:"file-frame",src:t.itemLink(),frameborder:"0"}})])])]):t._e(),e("div",{staticClass:"col-auto q-mr-sm leftBorder"},[t._l(t.tabs,(function(i){return["TASK"===i.value?[t.addTaskEnabled?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary"},on:{click:function(e){return t.showLinks(i.value)}}},[i.count?e("span",{staticClass:"badge"},[t._v(t._s(i.count)+" ")]):t._e()]):t._e()]:["VALIDATION"!==i.value&&"PAYMENT_TABLE"!==i.value||("VALIDATION"===i.value||"PAYMENT_TABLE"===i.value)&&t.isCustomizedWorkflow?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary"},on:{click:function(e){return t.showLinks(i.value)}}},[i.count?e("span",{staticClass:"badge"},[t._v(t._s(i.count)+" ")]):t._e()]):t._e()]]}))],2)]],2)]),t.taskFormId?e("AddTask",{attrs:{value:t.addTaskSheet,"form-settings":t.addTaskForm.settings,panels:t.addTaskForm.panels,"secondary-panels":t.addTaskForm.secondaryPanels,"form-id":t.taskFormId,"repository-id":t.taskRepositoryId,"task-model":t.selectedTask,"workflow-task":!0,mode:t.taskMode},on:{close:function(e){t.addTaskSheet=!1},addEntry:t.addTaskEntry}}):t._e(),e("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(e){t.mailTransactionSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Mail Transactions ")]},proxy:!0},{key:"actions",fn:function(){return[e("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[t._v(" auto-refresh every 30 seconds ")]),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.getMailTransactions()}}})]},proxy:!0}]),model:{value:t.mailTransactionSheet,callback:function(e){t.mailTransactionSheet=e},expression:"mailTransactionSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("div",{staticClass:"q-pl-sm"},[e("Tabs",{attrs:{tabs:t.mailTabs},model:{value:t.mailTab,callback:function(e){t.mailTab=e},expression:"mailTab"}})],1),"OUTGOING"===t.mailTab?[e("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[t._l(t.outgoingMails,(function(i){return[e("div",{key:"outgoing"+i.id,staticClass:"mailTransactionList"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),e("div",{staticClass:"col-auto"},[t._v(" "+t._s(i.subject)+" ")])]),e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),e("div",{staticClass:"col-auto"},[t._v(t._s(i.email))])]),e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),e("div",{staticClass:"col-auto"},[t._v(" "+t._s(t.$day.format(i.createdAt,!0))+" ")])])]),e("div",{staticClass:"col-auto q-mr-sm"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(e){return e.stopPropagation(),t.showMailAttachments(i)}}},[i.attachmentCount?e("span",{staticClass:"badge"},[t._v(t._s(i.attachmentCount)+" ")]):t._e()]),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"resend",expression:"'resend'",modifiers:{top:!0}}],attrs:{icon:"mdi-send",color:"secondary","is-flat":"",size:"16px"},on:{click:function(e){return e.stopPropagation(),t.resendMail(i.ezMailId)}}})],1)])])]}))],2)]:t._e(),"INCOMING"===t.mailTab?[e("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[t._l(t.incomingMails,(function(i){return[e("div",{key:"incoming"+i.id,staticClass:"mailTransactionList"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),e("div",{staticClass:"col-auto"},[t._v(" "+t._s(i.subject)+" ")])]),e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),e("div",{staticClass:"col-auto"},[t._v(t._s(i.email))])]),e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),e("div",{staticClass:"col-auto"},[t._v(" "+t._s(t.$day.format(i.createdAt,!0))+" ")])])]),e("div",{staticClass:"col-auto q-mr-sm"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(e){return e.stopPropagation(),t.showMailAttachments(i)}}},[i.attachmentCount?e("span",{staticClass:"badge"},[t._v(t._s(i.attachmentCount)+" ")]):t._e()])],1)])])]}))],2)]:t._e()],2)]),e("MetaDataEdit",{attrs:{value:t.showMetaDataEditModal,mode:"Indexing",file:t.workflow,"repository-field":t.repositoryField,"file-data":t.fileData,title:"Index",columns:t.columns,"modal-value":t.selectedProcess,"upload-filename":t.uploadFilename},on:{close:function(e){t.showMetaDataEditModal=!1},save:t.saveMetaData}}),t.historyProcessId?e("ProcessHistory",{attrs:{"process-id":t.historyProcessId,"selected-process":t.selectedProcess},on:{close:function(e){t.historyProcessId=0}}}):t._e()],1)},a=[],o=(i("14d9"),i("caad"),i("381e")),r=i("bc3a"),n=i.n(r),l=i("1b0d"),c=i("a7d2"),d=i("fa1f"),m=i("abe1"),h=i("6a70"),u=i("9234"),p=i("6df3"),f=i("695e"),v=i("dd90"),y=i("cade"),b=i("869e"),g=i("5e23"),w=i("4bc4"),C=i("a589"),k=i("0c04"),S=i("b94d"),I=i("ee54"),_=i("8505"),T={name:"RequestProcessSheet",components:{Sheet:o["a"],FileIcon:d["a"],FileDetails:m["a"],Modal:h["a"],SingleChoiceField:u["a"],TextAreaField:p["a"],TextBuilderField:f["a"],ListItem:y["a"],CheckboxField:b["a"],EmailSharing:g["a"],RenderForm:w["a"],CustomForm:C["default"],AddTask:k["a"],Tabs:S["a"],MetaDataEdit:I["a"],ProcessHistory:_["a"]},props:{workflowId:{type:[String,Number],required:!0},processId:{type:[String,Number],required:!0},workflowRequestList:{type:Array,required:!0},workflow:{type:Object,default:()=>{}},form:{type:Object,default:()=>{}},enableControls:{type:Object,default:()=>{}},formId:{type:[String,Number],required:!0}},data(){return{attachmentSheet:!1,selectedProcess:{},attachmentList:[],emailSharingSheet:!1,checkList:[],selectedNode:"",selectedTicket:{},attachmentLoad:null,fileData:[],fileDetailsSheet:!1,checkListRowIndex:null,reuploadId:0,repositoryDetails:{},repositoryField:[],commentsSheet:!1,commentsList:[],commentActions:[{id:this.$nano.id(),label:"Internal",value:2},{id:this.$nano.id(),label:"Public",value:1}],commentAction:2,jiraCommentActions:[{id:this.$nano.id(),label:"This resource",value:1},{id:this.$nano.id(),label:"All resource",value:2}],jiraCommentAction:1,commentText:"",advancedCommentsSheet:!1,advancedCommentText:"",selectAll:!1,fileSheet:!1,selectedFile:{},documentActionList:[{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline"},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline"}],selectedFileList:[],processSheet:!1,itemModel:{},formModel:{},headerTitle:"",tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"mail transaction",value:"MAIL",icon:"mdi-email-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0},{id:this.$nano.id(),label:"task",value:"TASK",icon:"eva-cube-outline",count:0},{id:this.$nano.id(),label:"Data Validation",value:"VALIDATION",icon:"mdi-file-compare",count:0},{id:this.$nano.id(),label:"Payment Table",value:"PAYMENT_TABLE",icon:"mdi-table",count:0}],actions:[],groupActionFields:[],saveAction:"",workflowFormModel:{},workflowModel:{},formEditAccess:!1,formEditControls:[],formVisibilityAccess:!0,formSecureControls:[],formFields:[],dataValidationValues:[],formCheckList:!1,signList:[],userSignature:!1,processActions:[],processActionsAddOn:[],taskFormId:0,taskRepositoryId:0,addTaskForm:{},addTaskSheet:!1,taskEntryId:[],taskEntries:[],taskEntryList:[],taskMode:"",selectedTask:{},mailTabs:[{id:this.$nano.id(),label:"outgoing",value:"OUTGOING",count:0},{id:this.$nano.id(),label:"incoming",value:"INCOMING",count:0}],mailTab:"OUTGOING",mailTransactionSheet:!1,mailTransactionList:[],mailAttachmentSheet:!1,mailAttachmentList:[],showMetaDataEditModal:!1,selectedUploadFile:[],columns:[],search:"",addTaskEnabled:!1,uploadFilename:"",historyProcessId:0}},computed:{selectedFileCount(){let t=this.attachmentList.filter(t=>t.checked).length;return t},isSelectedPDF(){let t=!0;return this.attachmentList.forEach(e=>{let i=e.name.split(".").pop();e.checked&&"pdf"!==i.toLowerCase()&&(t=!1)}),t},isCustomizedWorkflow(){let t=location.origin;if("https://demo.ezofis.com"===t||"http://52.172.32.88"===t){if(1014===this.workflow.id)return!0}else if(("https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t||"http://localhost:8080"===t)&&1===this.workflow.id)return!0;return!1},formName(){return this.formId?this.form.settings.general.name:""},formDescription(){return this.formId?this.form.settings.general.description:""},panels(){if(!this.formId)return[];if(this.groupActionFields.length){let t=[];return this.form.panels.map(e=>{let i=[];e.fields.forEach(t=>{this.groupActionFields.indexOf(t.id)>-1&&i.push(t)}),t.push({id:e.id,fields:i,settings:e.settings})}),t}return this.form.panels},secondaryPanels(){return this.formId?this.groupActionFields.length?[]:this.form.secondaryPanels:[]},formSettings(){return this.formId?this.form.settings:{}},outgoingMails(){return this.mailTransactionList.filter(t=>"Outgoing"===t.emailType)},incomingMails(){return this.mailTransactionList.filter(t=>"Incoming"===t.emailType)}},watch:{processId:{deep:!0,handler(){this.showProcessSheet()}},attachmentSheet:{immediate:!0,handler(){this.attachmentSheet||clearInterval(this.attachmentLoad)}},workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&this.processRequest()}}},methods:{getColor(t){return t.color?{border:`1px solid var(--${t.color})`}:{border:"1px solid var(--secondary)"}},leftScroll(){const t=document.querySelector(".workflowKanbanRow");t.scrollBy(-200,0)},rightScroll(){const t=document.querySelector(".workflowKanbanRow");t.scrollBy(200,0)},showAttachments(t){this.selectedProcess=this.workflowRequestList.find(e=>e.processId===Number(t.processId)),this.getAttachments(t.processId),this.selectedTicket=t,t.currentActionUser===this.$store.state.session.email?this.selectedNode="inbox":this.selectedNode="sent",this.getFormColumns(),this.attachmentSheet=!0},showHistoryModal(t){this.selectedProcess=this.workflowRequestList.find(e=>e.processId===Number(t.processId)),this.historyProcessId=this.selectedProcess.processId},showProcessSheet(){this.selectedProcess=this.workflowRequestList.find(t=>t.processId===Number(this.processId)),this.selectedProcess.activityUserEmail===this.$store.state.session.email?this.selectedNode="inbox":this.selectedNode="sent",this.getTaskForm(),this.openProcess(),this.getAttachments(this.processId),this.getComments(this.processId),this.getModel(Number(this.processId)),this.getFormColumns(),this.processSheet=!0},closeAttachmentsSheet(){this.attachmentSheet=!1},getLabel(t){let e="";return this.form&&this.form.panels.forEach(i=>{if(!i.fields.length)return;let s=i.fields.find(e=>e.id===t);s&&(e=s.label?s.label:s.type)}),e},async uploadWflowAttachments(t){"STATIC"===this.repositoryDetails.fieldsType?(this.selectedUploadFile=t,this.uploadFilename=t.target.files[0].name,this.showMetaDataEditModal=!0):this.uploadAttachments(t)},async uploadAttachments(t,e){const i=t.target.files[0],s=new FormData;s.append("workflowId",this.workflowId),s.append("repositoryId",this.workflow.repositoryId),s.append("processId",this.selectedProcess.processId),s.append("transactionId",this.selectedProcess.transactionId),e?s.append("fields",e):s.append("fields",""),s.append("file",i);let a=t.target.files[0].name;const o=a.split(".").pop();if(this.checkListRowIndex){let t=this.checkList.filter(t=>t.uid===this.checkListRowIndex);s.append("filename",t[0].name+"."+o),a=t[0].name+"."+o}if(console.log(o),Object(v["a"])(o)){this.$store.commit("showLoadingBar");try{const t=await n()({url:"https://appuat.ezofis.com/ezofisapi/api/workflow/attachmentWithProcessId",method:"POST",data:s,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:e,data:i}=t;if(200!==e||!i)throw t;this.$alert.success("Document attached")}catch(r){this.$alert.error("Error uploading file"),console.error(r)}this.$store.commit("hideLoadingBar"),this.checkList.length&&this.checkList.forEach(t=>{t.uid!==this.checkListRowIndex||(t.attach=!0)}),t.target.value="",this.reuploadId&&(await this.attachmentDelete(this.reuploadId),this.reuploadId=0),this.attachmentLoad=setInterval(()=>this.getAttachments(),5e3)}else this.$alert.error("this file format not supporting")},async getAttachments(t){this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=0)});let e=this.attachmentList.length;this.$store.commit("showLoadingBar");const{error:i,payload:s}=await l["t"].getAttachments(this.workflowId,t||this.selectedProcess.processId);if(this.$store.commit("hideLoadingBar"),i)this.$alert.error(i);else{if(this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=0)}),s.length){let t=s.length-1;this.getFileData(s[t],"attach"),e!==s.length&&(this.attachmentList=s.map(t=>({...t,checked:!1})),clearInterval(this.attachmentLoad)),this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=this.attachmentList.length)})}else this.attachmentList=[];this.checkList.length&&this.checkList.forEach(t=>{let e=this.attachmentList.filter(e=>{let i=e.name.substr(0,e.name.lastIndexOf("."));if(t.name===i||t.name===i.split("_")[0])return e});e.length?t.attach=!0:t.attach=!1})}},async getFileData(t,e){this.$store.commit("showLoadingBar");const{error:i,payload:s}=await l["p"].getFileData({repositoryId:t.repositoryId,itemId:t.id});this.$store.commit("hideLoadingBar"),i?this.$alert.error(i):s&&(this.fileData=s,e||(this.fileDetailsSheet=!0))},attachTemplate(t){this.checkListRowIndex=t,this.$refs.attachments.click()},reupload(t){var e;t=t.substr(0,t.lastIndexOf(".")).split("_")[0],this.checkListRowIndex=null===(e=this.checkList.find(e=>e.name===t))||void 0===e?void 0:e.uid,this.$refs.attachments.click()},async getRepository(){const{error:t,payload:e}=await l["p"].getRepository(this.workflow.repositoryId);t?this.$alert.error(t):(this.repositoryDetails=e,this.repositoryField=e.fields)},isCheckList(t){let e=this.checkList.filter(e=>e.name===t.substring(0,t.lastIndexOf("."))||e.name===t.substring(0,t.lastIndexOf(".")).split("_")[0]);return!e.length},fileType(t){if(t)return t.split(".").reverse()[0].slice(0,4)},fileSize(t){return Object(c["a"])(t)},openFile(t){this.selectedFile=t;let e=location.origin;"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?window.open(this.fileLink()):this.fileSheet=!0},async attachmentDelete(t){this.$store.commit("showLoadingBar");const{error:e}=await l["p"].fileDelete(this.workflow.repositoryId,t);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):this.getAttachments()},closeCommentsSheet(){this.closeCommnetsSheet=!1},checkCommentsOption(){let t=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==t&&"https://ag-appsvc05.azurewebsites.net"!==t&&("https://app.ezofis.com"!==t&&"https://appuat.ezofis.com"!==t&&"http://localhost:8080"!==t||2!==this.$store.state.session.tenantId||!(!Object.keys(this.selectedProcess).length||!this.selectedProcess.jiraIssueInfo.id))},async getComments(t){this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=0)}),this.commentsList=[],this.$store.commit("showLoadingBar");const{error:e,payload:i}=await l["t"].getProcessComments(this.workflowId,t||this.selectedProcess.processId);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):(this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=0)}),this.commentsList=[],i.length&&(this.commentsList=i,this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=this.commentsList.length)})))},async saveComment(){let t=location.origin;if(this.commentText&&this.selectedProcess.processId){if("https://app.ezofis.com"!==t&&"https://appuat.ezofis.com"!==t&&"http://localhost:8080"!==t||2!==this.$store.state.session.tenantId||!this.selectedProcess.jiraIssueInfo.id||2!==this.jiraCommentAction){this.$store.commit("showLoadingBar");const{error:t,payload:e}=await l["t"].insertProcessComment(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:this.commentAction});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,[e])}else{this.$store.commit("showLoadingBar");const{error:t,payload:e}=await l["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.commentText});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,e)}this.commentText="",this.commentAction=1,this.getComments()}},async saveAdvancedComment(){if(this.advancedCommentText&&this.selectedProcess.processId){if("https://app.ezofis.com"!==origin&&"https://appuat.ezofis.com"!==origin&&"http://localhost:8080"!==origin||2!==this.$store.state.session.tenantId||!this.selectedProcess.jiraIssueInfo.id||2!==this.jiraCommentAction){this.$store.commit("showLoadingBar");const{error:t,payload:e}=await l["t"].insertProcessComment(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:this.commentAction});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,e)}else{this.$store.commit("showLoadingBar");const{error:t,payload:e}=await l["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,e)}this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}},showComments(t){this.selectedProcess=this.workflowRequestList.find(e=>e.processId===Number(t.processId)),this.getComments(t.processId),this.selectedTicket=t,t.currentActionUser===this.$store.state.session.email?this.selectedNode="inbox":this.selectedNode="sent",this.commentsSheet=!0},checkTenant(){let t=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==t&&"https://ag-appsvc05.azurewebsites.net"!==t&&("https://app.ezofis.com"!==t&&"https://appuat.ezofis.com"!==t||2!==this.$store.state.session.tenantId)&&"http://localhost:8080"!==t||(this.commentAction=2,!1)},isTenantGOTOComments(){if(Object.keys(this.selectedProcess).length){let t=location.origin;if(("https://app.ezofis.com"===t||"https://appuat.ezofis.com"===t||"http://localhost:8080"===t)&&2===this.$store.state.session.tenantId&&this.selectedProcess.jiraIssueInfo.id)return!0}return!1},lastActionDuration(t){const e=t instanceof Date?t:new Date(t),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(e.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const t=a/s[o];return i.format(Math.round(t),o)}},fileSelectAll(){this.attachmentList=this.attachmentList.map(t=>({...t,checked:this.selectAll}))},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(t=>{t.checked&&this.selectedFileList.push({id:t.id,name:t.name})}),this.emailSharingSheet=!0},async documentMerge(){let t=[];this.attachmentList.forEach(e=>{let i=e.name.split(".").pop();e.checked&&"pdf"===i.toLowerCase()&&t.push(e.id)});let e={ids:t};const{error:i}=await l["t"].documentMerge(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,this.workflow.repositoryId,e);i?this.$alert.error(i):this.$alert.success("Document merge process initiated")},documentAction(t){if("Email_Sharing"===t.id);else if("Print"===t.id){if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();Object(v["d"])(t)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===t.id){let t="";t=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`,window.open(t,"_blank")}},async filePrintSession(){const{error:t}=await l["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});t&&this.$alert.error(t)},fileLink(){let t=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let e=this.selectedFile.name.split(".").pop(),i="";"inbox"===this.selectedNode&&(i="&action=all");let s="";if(Object(v["d"])(e))"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?(i="",s="https://ag-appsvc04.azurewebsites.net/web/viewer.html"):s="https://trial.ezofis.com"!==t||Object(v["c"])(e)?"https://app.ezofis.com"===t?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":t+"/PDFViewer/web/viewer.html":"https://trial.ezofis.com/docsviewer/index.html";else{if(Object(v["b"])(e)||"http://52.172.32.88"!==t)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;s="http://52.172.32.88/DocsViewer/index.html"}return`${s}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${i}`}},getModel(t){this.formModel={},this.itemModel={},this.workflowRequestList.forEach(e=>{if(e.processId==t&&e.id==this.workflow.id)if(this.headerTitle=`${e.requestNo} - ${e.stage}`,e.formData){let t=Object.keys(e.formData.fields),i={};t.forEach(t=>{i[t]=this.validateTypeValue(e.formData.fields[t])}),this.formModel=i}else e.itemData&&(this.itemModel=e.itemData)})},validateTypeValue(t){if(t)try{var e=JSON.parse(t);if("object"===typeof e)return e}catch(i){return t}return t},async showLinks(t){"ATTACHMENTS"===t?this.attachmentSheet=!0:"COMMENTS"===t?this.commentsSheet=!0:"HISTORY"===t&&this.selectedProcess.processId?this.historyProcessId=this.selectedProcess.processId:"PRINT"===t?window.print():"TASK"===t?this.taskEntries.length?this.taskSheet=!0:this.addTask():"VALIDATION"===t||"PAYMENT_TABLE"===t||"MAIL"===t&&(this.getMailTransactions(),this.mailTransactionSheet=!0)},openProcess(t=!1){if(this.actions=[],this.formEditAccess=!1,t){this.tabs.find(t=>{t.count=0}),this.commentsList=[],this.attachmentList=[],this.formModel={},this.signList=[],this.formEditAccess=!1,this.formEditControls=[],this.formVisibilityAccess=!0,this.formSecureControls=[];let t=JSON.parse(this.workflow.flowJson),e=t.blocks.find(t=>"START"===t.type);if(e){if("MANUAL"===e.settings.initiateMode){this.headerTitle=""+e.settings.label;let i=t.rules.find(t=>t.fromBlockId===e.id);i&&this.actions.push(i.proceedAction)}if(e.settings.formEditAccess&&(""===e.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===e.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===e.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=e.settings.formEditControls)),e.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=e.settings.formSecureControls),e.settings.fileSettings&&e.settings.fileSettings.fileCheckList.length){let t=e.settings.fileSettings.fileCheckList;t.forEach(t=>{t.uid=this.$nano.id(),t.attach=!1}),this.docWarning=!1,t.length&&t.forEach(t=>{t.required&&!t.attach&&(this.docWarning=!0)})}}}else{if("inbox"===this.selectedNode){let t=JSON.parse(this.workflow.flowJson),e=t.blocks.find(t=>t.id===this.selectedProcess.activityId);if(e&&(""===e.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===e.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===e.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=e.settings.formEditControls),e.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=e.settings.formSecureControls),e.settings.fileSettings&&e.settings.fileSettings.fileCheckList.length)){let t=e.settings.fileSettings.fileCheckList;t.forEach(t=>{t.uid=this.$nano.id(),t.attach=!1}),this.docWarning=!1,t.length&&t.forEach(t=>{t.required&&!t.attach&&(this.docWarning=!0)})}}else this.formEditAccess=!0;this.actions=this.processActions;location.origin}if("inbox"===this.selectedNode){this.processActions=[],this.processActionsAddOn=[];let t=location.origin;var e=JSON.parse(this.workflow.flowJson);"https://ag-appsvc01.azurewebsites.net"!==t&&"https://ag-appsvc05.azurewebsites.net"!==t&&"http://localhost:8080"!==t||"psyCrYXtKfcs-EJmrYIhv"!==this.selectedProcess.activityId?e.rules.forEach(t=>{t.fromBlockId===this.selectedProcess.activityId&&this.processActions.indexOf(t.proceedAction)<0&&(this.processActions.push(t.proceedAction),this.processActionsAddOn.push({action:t.proceedAction,remarks:t.remarks||!1,passwordAccess:t.passwordAccess||!1,confirm:t.confirm||!1}))}):e.rules.forEach(t=>{t.fromBlockId===this.selectedProcess.activityId&&"Force Close"===t.proceedAction&&(this.processActions.push(t.proceedAction),this.processActionsAddOn.push({action:t.proceedAction,remarks:t.remarks||!1,passwordAccess:t.passwordAccess||!1,confirm:t.confirm||!1}))}),e.blocks.forEach(t=>{if(t.id===this.selectedProcess.activityId){if("Forward"===this.selectedProcess.lastAction&&"REPLY"===t.settings.forwardedUserAction)this.processActions=[],this.processActionsAddOn=[],this.processActions.push("Reply to "+this.selectedProcess.transaction_createdByEmail),this.processActionsAddOn.push({action:"Reply to "+this.selectedProcess.transaction_createdByEmail,remarks:!0,passwordAccess:!1,confirm:!1}),this.customReply=!0;else if(t.settings.userReply&&-1===this.processActions.indexOf("Reply")&&(this.processActions.push("Reply to "+this.selectedProcess.lastActionStageName),this.userReply=!0),t.settings.toInitiator&&-1===this.processActions.indexOf("To Requester")&&(this.processActions.push("To Requester"),this.toRequester=!0),t.settings.internalForward){let e=location.origin;"https://app.ezofis.com"!==e&&"https://appuat.ezofis.com"!==e||2!==this.$store.state.session.tenantId?this.processActions.push("Forward"):this.processActions.push("Assign"),this.internalForward.proceed=!0,this.internalForward.users=[],this.internalForward.groups=[],t.settings.internalForwardUser&&t.settings.internalForwardUser.length&&t.settings.internalForwardUser.forEach(t=>{let e=this.userList.filter(e=>e.value==t);e.length&&this.internalForward.users.push({id:this.$nano.id(),label:e[0].label,value:t})}),t.settings.internalForwardGroup&&t.settings.internalForwardGroup.length&&t.settings.internalForwardGroup.forEach(t=>{let e=this.groupList.filter(e=>e.value==t);e.length&&this.internalForward.groups.push({id:this.$nano.id(),label:e[0].label,value:t})})}this.userSignature=t.settings.userSignature,t.settings.fileSettings&&t.settings.fileSettings.fileCheckList.length&&(this.checkList=t.settings.fileSettings.fileCheckList,this.checkList.forEach(t=>{t.uid=this.$nano.id(),t.attach=!1}))}}),this.selectedProcess.userType&&"SUPERUSER"===this.selectedProcess.userType&&this.processActions.push("Force Close")}else if("sent"===this.selectedNode){let t=location.origin;"https://app.ezofis.com"!==t&&"https://appuat.ezofis.com"!==t||2!==this.$store.state.session.tenantId?"http://demo.ezofis.com"!==t&&"http://52.172.32.88"!==t||6===this.selectedWorkflow.id&&this.selectedProcess.transaction_createdBy===this.$store.state.session.id&&(this.processActions=[],this.processActions.push("Rollback")):this.selectedProcess.transaction_createdBy===this.$store.state.session.id&&(this.processActions=[],this.processActions.push("Rollback"))}this.actions=this.processActions},removeTags(t){return t?t.replace(/(<([^>]+)>)/gi,""):""},addTask(){this.selectedTask={},this.taskMode="NEW",this.addTaskSheet=!0},viewTask(t){let e=this.taskList.filter(e=>e.formEntryId===t);e.length&&(this.selectedTask=e[0].entryInfo[0],this.selectedTask={id:e[0].formEntryId,...e[0].entryInfo[0]}),this.taskMode="EDIT",this.addTaskSheet=!0},async getTaskForm(){this.taskFormList=[],this.addTaskEnabled=!1;const{error:t,payload:e}=await l["g"].getForms({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"type",condition:"IS_EQUALS_TO",value:"Task",dataType:""}],groupCondition:""}],itemsPerPage:50,currentPage:1});if(t)return void this.$alert.error(t);const{data:i}=e;i.length&&i[0].value.length&&(this.addTaskEnabled=!0,i[0].value.forEach(t=>{this.taskFormList.push({id:t.id,label:t.name,value:t.id,repositoryId:t.repositoryId,formJson:t.formJson})}),this.taskFormList.length&&1===this.taskFormList.length&&(this.taskFormId=this.taskFormList[0].id,this.taskRepositoryId=this.taskFormList[0].repositoryId,this.addTaskForm=JSON.parse(this.taskFormList[0].formJson)))},async getTaskFormEntry(t,e){this.$store.commit("showLoadingBar");const{error:i,payload:s}=await l["g"].getFormEntry(t,e);if(this.$store.commit("hideLoadingBar"),i)this.$alert.error(i);else if(s.length){const t=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let e=[];for(const s of t)e.push(...s.fields);let i="",a="",o="",r="",n="",l="";e.forEach(t=>{switch(t.label){case"Task Name":i=s[0][t.id];break;case"Task Assign":a=s[0][t.id];break;case"Start Date":o=s[0][t.id];break;case"End Date":r=s[0][t.id];break;case"Priority":n=s[0][t.id];break;case"Task Status":l=s[0][t.id];break}}),this.taskEntries.push({id:s[0].itemid,name:i,assigned:a,startDate:o,endDate:r,priority:n,status:l})}},addTaskEntry(t,e){this.selectedProcess.processId?this.insertTaskEntry(t,e):(this.taskEntryId.push({formId:t,formEntryId:e}),this.getTaskFormEntry(t,e))},async getTaskList(){this.taskEntries=[],this.$store.commit("showLoadingBar");const{error:t,payload:e}=await l["t"].getTaskEntries(this.selectedWorkflow.id,this.selectedProcess.processId,{filterBy:[{filters:[{criteria:"createdBy",condition:"IS_EQUALS_TO",value:this.$store.state.session.id}]}]});if(this.$store.commit("hideLoadingBar"),t)this.$alert.error(t);else if(e.length){const t=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let i=[];for(const e of t)i.push(...e.fields);this.taskList=e,e.forEach(t=>{let e="",s="",a="",o="",r="",n="";i.forEach(i=>{switch(i.label){case"Task Name":e=t.entryInfo[0][i.id];break;case"Task Assign":s=t.entryInfo[0][i.id];break;case"Start Date":a=t.entryInfo[0][i.id];break;case"End Date":o=t.entryInfo[0][i.id];break;case"Priority":r=t.entryInfo[0][i.id];break;case"Task Status":n=t.entryInfo[0][i.id];break}}),this.taskEntries.push({id:t.entryInfo[0].itemid,name:e,assigned:s,startDate:a,endDate:o,priority:r,status:n})})}},async insertTaskEntry(t,e){this.$store.commit("showLoadingBar");const{error:i}=await l["t"].insertTaskEntry({workflowId:this.selectedWorkflow.id,processId:this.selectedProcess.processId,transactionId:this.selectedProcess.transactionId,wFormId:t,formEntryId:e});this.$store.commit("hideLoadingBar"),i?this.$alert.error(i):this.getTaskList()},async getMailTransactions(){this.mailTransactionList=[],this.tabs.find(t=>{"MAIL"===t.value&&(t.count=0)});let t={filterBy:[]};const{error:e,payload:i}=await l["t"].getMailTransactions(this.workflow.id,this.selectedProcess.processId,t);e?this.$alert.error(e):i.length&&(this.mailTransactionList=i,this.tabs.find(t=>{"MAIL"===t.value&&(t.count=this.mailTransactionList.length)}))},validateRequest(t){this.saveAction=t,this.itemModel.itemId&&this.processRequest()},async processRequest(t=!0,e=!0){if(t){let t=location.origin;if(("https://app.ezofis.com"===t||"https://appuat.ezofis.com"===t)&&2===this.$store.state.session.tenantId&&"Assign"===this.saveAction&&this.internalForward.proceed)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0);if("Forward"===this.saveAction&&this.internalForward.proceed)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0)}if(e){let t=this.processActionsAddOn.find(t=>t.action===this.saveAction);if(t&&Object.keys(t).length){if(this.actionRemarks=t.remarks,this.actionPassword=t.passwordAccess,this.actionConfirm=t.confirm,this.actionPassword)return void(this.actionPasswordConfirm=!0);if(this.actionRemarks)return this.actionComments=!0,void(this.advancedCommentsSheet=!0);if(this.actionConfirm)return void(this.actionConfirmAlert=!0)}}let i={},s=location.origin;this.userReply&&this.saveAction.indexOf("Reply")>-1?this.saveAction="UserReply":this.toRequester&&"To Requester"===this.saveAction&&(this.saveAction="ToInitiator"),this.customReply&&this.saveAction.indexOf("Reply")>-1&&(this.saveAction="Reply",this.forwardUsers.push(this.selectedProcess.transaction_createdBy)),this.formId?("https://app.ezofis.com"!==s&&"https://appuat.ezofis.com"!==s||2!==this.$store.state.session.tenantId||"Rollback"!==this.saveAction?"http://demo.ezofis.com"!==s&&"http://52.172.32.88"!==s||6===this.workflow.id&&this.forwardUsers.push(this.selectedProcess.transaction_createdBy):1===this.workflow.id&&this.forwardUsers.push(this.selectedProcess.transaction_createdBy),i={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction||"CustomVerify"===this.saveAction?"":this.saveAction,formData:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,fields:this.workflowFormModel},userIds:this.forwardUsers,groupIds:this.forwardGroups}):this.itemModel&&(i={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction?"":this.saveAction,formData:{},userIds:this.forwardUsers,groupIds:this.forwardGroups});let a=!1;"CustomVerify"!==this.saveAction||"https://ag-appsvc01.azurewebsites.net"!==s&&"https://ag-appsvc05.azurewebsites.net"!==s&&"http://localhost:8080"!==s||(a=!0),this.saveAction="",this.workflowFormModel={},this.$store.commit("showLoadingBarSave");const{error:o}=await l["t"].processTransaction(i);this.$store.commit("hideLoadingBarSave"),o?this.$alert.error(o):(this.signImg&&await this.saveProcessSignature(this.selectedProcess),a||(""===i.review?this.$alert.info(this.selectedProcess.requestNo+" data saved, awaiting your action to submit"):i.review.toLowerCase().indexOf("reject")>-1?this.$alert.danger(this.selectedProcess.requestNo+" Request Rejected Successfully"):this.$alert.success(this.selectedProcess.requestNo+" Request Processed"),this.forwardUsers=[],this.forwardGroups=[],this.closeProcessSheet()))},async saveProcessSignature(t){let e={signBinary:this.signImg.split(",")[1],fileType:"png"};const{error:i}=await l["t"].saveProcessSignature(this.workflow.id,t.processId,t.transactionId,e);i?this.$alert.error(i):this.signImg=""},closeProcessSheet(){this.processSheet=!1},saveMetaData(t){let e=[];this.repositoryField.forEach(i=>{e.push({name:i.name,value:t[i.name],type:i.dataType})}),this.uploadAttachments(this.selectedUploadFile,JSON.stringify(e))},getFormColumns(){let t=[];if(this.form){const e=[...this.form.panels,...this.form.secondaryPanels];if(!e.length)return;let i=[];for(const t of e)i.push(...t.fields);i.forEach(e=>{"DIVIDER"===e.type||"LABEL"===e.type||"PARAGRAPH"===e.type||!e.label&&"TABLE"!==e.type||"DISABLE"===e.settings.general.visibility||t.push({id:e.id,label:e.label,isVisible:!0,display:""})})}this.columns=t},searchKanban(t,e,i){if(console.log(e,t),t){let e=["attachmentList","commentsList","completedStatus","currentActionDate","currentActionUser","currentTransactionId","nodeName","processId","requestNo","slaTime"];this.kanbanList[i].tickets.forEach(i=>{for(let s in i){let a=e.indexOf(s);if(a>=0&&i[s]&&String(i[s]).toLowerCase().includes(t.toLowerCase()))return}})}else this.kanbanList[i].tickets=this.kanbanDataList[i].tickets}}},$=T,x=(i("298f"),i("d11f"),i("2877")),A=i("b047"),L=i("cb32"),F=i("8169"),P=i("4e73"),B=i("93dc"),D=i.n(B),M=Object(x["a"])($,s,a,!1,null,"cd1d4496",null);e["a"]=M.exports;D()(M,"components",{QChip:A["a"],QAvatar:L["a"],QChatMessage:F["a"],QMenu:P["a"]})},4045:function(t,e,i){"use strict";i("1a1b")},"40f9":function(t,e,i){"use strict";i("c589")},"42dc":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"workspace-list"}},[e("div",{staticClass:"title"},[t._v("Workspace")]),e("div",{staticClass:"wrapper"},[e("ValidationProvider",{attrs:{name:"workspace",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("SelectField",{attrs:{value:t.value,"is-mandatory":"","is-clearable":!1,options:t.workspaces,"is-readonly":"",error:i[0]},on:{input:t.handleInput}})]}}])})],1)])},a=[],o=i("1b0d"),r=i("7bb1"),n=i("12b8"),l={name:"WorkspaceList",components:{ValidationProvider:r["b"],SelectField:n["a"]},props:{value:{type:Number,required:!0}},data(){return{workspaces:[]}},created(){this.getWorkspaces()},methods:{handleInput(t){this.$emit("input",t)},async getWorkspaces(){this.$store.commit("showLoadingBar");const{error:t,payload:e}=await o["u"].getWorkspaceList();this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e&&(this.workspaces=e.map(t=>({id:this.$nano.id(),label:t.value,value:t.id})))}}},c=l,d=(i("2852"),i("2877")),m=Object(d["a"])(c,s,a,!1,null,"d504442c",null);e["a"]=m.exports},"42fc":function(t,e,i){"use strict";i.d(e,"a",(function(){return B}));i("d9e2");function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(t,e){if(!t)throw new Error(e)}function o(t){return Object.keys(t)}function r(t){return Object.keys(t).map((function(e){return[e,t[e]]}))}function n(t,e,i){var s="."+e,a=new RegExp("(\\".concat(e,")?$"));return i(t).replace(a,s)}function l(t){return"555xmlHello .  world!".trim().replace(/^([0-9,;]|(xml))+/,""),t.replace(/[^_a-zA-Z 0-9:\-\.]/g,"").replace(/^([ 0-9-:\-\.]|(xml))+/i,"").replace(/ +/g,"-")}function c(t){return Array(t+1).join(" ")}function d(t){return t.replace(/([<>&])/g,(function(t,e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return""}}))}function m(t,e,i){switch(e){case"txt":var s="text/plain;charset=utf-8";return i?URL.createObjectURL(new Blob([t],{type:s})):"data:,".concat(s)+encodeURIComponent(t);case"css":s="text/css;charset=utf-8";return i?URL.createObjectURL(new Blob([t],{type:s})):"data:,".concat(s)+encodeURIComponent(t);case"html":s="text/html;charset=utf-8";return i?URL.createObjectURL(new Blob([t],{type:s})):"data:,".concat(s)+encodeURIComponent(t);case"json":s="text/json;charset=utf-8";return i?URL.createObjectURL(new Blob([t],{type:s})):"data:,".concat(s)+encodeURIComponent(t);case"csv":s="text/csv;charset=utf-8";return i?URL.createObjectURL(new Blob([t],{type:s})):"data:,".concat(s)+encodeURIComponent(t);case"xls":s="text/application/vnd.ms-excel;charset=utf-8";return i?URL.createObjectURL(new Blob([t],{type:s})):"data:,".concat(s)+encodeURIComponent(t);case"xml":s="text/application/xml;charset=utf-8";return i?URL.createObjectURL(new Blob([t],{type:s})):"data:,".concat(s)+encodeURIComponent(t);default:return""}}function h(t,e,i,s){void 0===i&&(i="download"),void 0===s&&(s=!0);var a=m(t,e,s),o=document.createElement("a");o.href=a,o.download=i,o.setAttribute("style","visibility:hidden"),document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!1,view:window})),document.body.removeChild(o)}var u=function(){return u=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var a in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},u.apply(this,arguments)},p=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var s,a,o=i.call(t),r=[];try{while((void 0===e||e-- >0)&&!(s=o.next()).done)r.push(s.value)}catch(n){a={error:n}}finally{try{s&&!s.done&&(i=o["return"])&&i.call(o)}finally{if(a)throw a.error}}return r};function f(t){if(!t||s(t)&&!t.length||!s(t)&&!o(t).length)return function(t){return t};var e=s(t)?t.reduce((function(t,e){var i;return u(u({},t),(i={},i[e]=e,i))}),Object.create(null)):t;return function(t){return s(t)?t.map((function(t){return r(t).reduce((function(t,i){var s=p(i,2),a=s[0],o=s[1];return a in e&&(t[e[a]]=o),t}),Object.create(null))})).filter((function(t){return o(t).length})):r(t).reduce((function(t,i){var s=p(i,2),a=s[0],o=s[1];return a in e&&(t[e[a]]=o),t}),Object.create(null))}}function v(t){var e="Invalid export data. Please provide a valid JSON";try{return"string"===typeof t?JSON.parse(t):t}catch(i){throw new Error(e)}}function y(t,e,i){void 0===e&&(e=null);var s="Invalid export data. Please provide valid JSON object";try{return JSON.stringify(t,e,i)}catch(a){throw new Error(s)}}function b(t){return t.map(r).reduce((function(e,i,s){return i.reduce((function(e,i){var a=p(i,2),o=a[0],r=a[1],n=e[o]||Array.from({length:t.length}).map((function(t){return""}));return n[s]=("string"!==typeof r?JSON.stringify(r):r)||"",e[o]=n,e}),e)}),Object.create(null))}function g(t,e){return void 0===e&&(e=function(t){return t}),e(r(t).map((function(t){var e=p(t,2),i=e[0],s=e[1];return{fieldName:i,fieldValues:s}})))}function w(t){var e=/,|"|\n/.test(t)?'"':"",i=t.replace(/"/g,'""');return"".concat(e).concat(i).concat(e)}var C={beforeTableEncode:function(t){return t},delimiter:","};function k(t,e){void 0===e&&(e={});var i=u(u({},C),e),s=i.beforeTableEncode,a=i.delimiter;if(!t.length)return"";var o=b(t),r=g(o,s),n=r.map((function(t){var e=t.fieldName;return e})).join(a)+"\r\n",l=r.map((function(t){var e=t.fieldValues;return e})).map((function(t){return t.map(w)})),c=l.reduce((function(t,e){return t.map((function(t,i){return"".concat(t).concat(a).concat(e[i])}))}));return n+c.join("\r\n")}function S(t,e){a(t.length>0);var i=b(t),s=g(i,e),o=s.map((function(t){var e=t.fieldName;return e})).join("</b></th><th><b>"),r=s.map((function(t){var e=t.fieldValues;return e})).map((function(t){return t.map((function(t){return"<td>".concat(t,"</td>")}))})),n=r.reduce((function(t,e){return t.map((function(t,i){return"".concat(t).concat(e[i])}))}));return"\n    <table>\n      <thead>\n        <tr><th><b>".concat(o,"</b></th></tr>\n      </thead>\n      <tbody>\n        <tr>").concat(n.join("</tr>\n        <tr>"),"</tr>\n      </tbody>\n    </table>\n  ")}var I={beforeTableEncode:function(t){return t}};function _(t,e){var i=u(u({},I),e).beforeTableEncode;if(!t.length)return"";var s='<html>\n  <head>\n    <meta charset="UTF-8" />\n  </head >\n  <body>\n    '.concat(S(t,i),"\n  </body>\n</html >\n");return s}function T(t){var e='<?xml version="1.0" encoding="utf-8"?><!DOCTYPE base>\n'.concat($(t,"base"),"\n");return e}function $(t,e,i,a){void 0===i&&(i="element"),void 0===a&&(a=0);var o=l(e),n=c(a);if(null===t||void 0===t)return"".concat(n,"<").concat(o," />");var m=s(t)?t.map((function(t){return $(t,i,i,a+2)})).join("\n"):"object"===typeof t?r(t).map((function(t){var e=p(t,2),s=e[0],o=e[1];return $(o,s,i,a+2)})).join("\n"):n+"  "+d(String(t)),h="".concat(n,"<").concat(o,">\n").concat(m,"\n").concat(n,"</").concat(o,">");return h}var x={txt:"txt",css:"css",html:"html",json:"json",csv:"csv",xls:"xls",xml:"xml"};function A(t){var e=t.data,i=t.fileName,o=void 0===i?"download":i,r=t.extension,l=t.fileNameFormatter,c=void 0===l?function(t){return t.replace(/\s+/,"_")}:l,d=t.fields,m=t.exportType,u=void 0===m?"txt":m,p=t.replacer,b=void 0===p?null:p,g=t.space,w=void 0===g?4:g,C=t.processor,S=void 0===C?h:C,I=t.withBOM,$=void 0!==I&&I,x=t.beforeTableEncode,A=void 0===x?function(t){return t}:x,L=t.delimiter,F=void 0===L?",":L,P="Invalid export data. Please provide an array of objects",B="Can't export unknown data type ".concat(u,"."),D="Can't export string data to ".concat(u,".");if("string"===typeof e)switch(u){case"txt":case"css":case"html":return S(e,u,n(o,null!==r&&void 0!==r?r:u,c));default:throw new Error(D)}var M=f(d),N=M(v(e)),O=y(N,b,w);switch(u){case"txt":case"css":case"html":return S(O,u,n(o,null!==r&&void 0!==r?r:u,c));case"json":return S(O,u,n(o,null!==r&&void 0!==r?r:"json",c));case"csv":a(s(N),P);var q="\ufeff",E=k(N,{beforeTableEncode:A,delimiter:F}),V=$?q+E:E;return S(V,u,n(o,null!==r&&void 0!==r?r:"csv",c));case"xls":a(s(N),P);V=_(N,{beforeTableEncode:A});return S(V,u,n(o,null!==r&&void 0!==r?r:"xls",c));case"xml":V=T(N);return S(V,u,n(o,null!==r&&void 0!==r?r:"xml",c));default:throw new Error(B)}}A.types=x,A.processors={downloadFile:h};var L=A,F=L;const P=()=>{function t(t,e,i){if(t)try{const s=e||"exported-data",a=F.types[i||"xls"];F({data:t,fileName:s,exportType:a})}catch(s){throw new Error("Parsing failed!")}}return{exportDataFromJSON:t}};function B(t,e){if(!t)return this.$alert.info("Data not found");let i=new Date;return e||(e=`${i.getFullYear()}${i.getMonth()+1}${i.getDate()}${i.getHours()}${i.getMinutes()}${i.getSeconds()}`),P().exportDataFromJSON(t,e,null)}},4484:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("ItemList",{attrs:{columns:t.columns,items:t.items,mode:t.mode,report:!0},on:{select:t.handleOpenFile},scopedSlots:t._u([{key:"actions",fn:function({item:i}){return[t.filterList?e("div",{staticClass:"row",staticStyle:{width:"100px"}},[t.filterList?e("BaseActionButton",{staticClass:"col-auto q-pa-sm q-mr-sm",attrs:{"is-flat":"","no-border":"",icon:"eva-edit-outline",color:"secondary"},on:{click:function(e){return e.stopPropagation(),t.$emit("isSavesheet",i.id)}}}):t._e(),t.filterList?e("BaseActionButton",{staticClass:"col-auto q-pa-sm",attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline",color:"primary"},on:{click:function(e){return e.stopPropagation(),t.$emit("isDelete",i.id)}}}):t._e()],1):t._e()]}}])})},a=[],o=i("f92f"),r={name:"ReportList",components:{ItemList:o["a"]},props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},mode:{type:String,required:!0},filterList:{type:Array,default:()=>[]}},methods:{handleOpenFile(t,e){this.$emit("view",t,e)}}},n=r,l=i("2877"),c=Object(l["a"])(n,s,a,!1,null,"543e6761",null);e["a"]=c.exports},"467fa":function(t,e,i){},4697:function(t,e,i){"use strict";i("d30f")},"470f":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"process-sheet"}},[e("Sheet",{attrs:{width:t.formWidth,"has-footer":!t.isCustomizedWorkflow||!t.initiateProcess,"no-padding":""},on:{input:t.closeProcessSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.headerTitle)+" ")]},proxy:!0},{key:"actions",fn:function(){return[t.isCustomizedWorkflow||"DOCUMENT"===t.workflow.initiatedBy?t._e():[t.mandatory.filledValue||t.mandatory.nonFilledValue?[e("q-circular-progress",{staticClass:"q-mr-sm",attrs:{"show-value":"","font-size":"12px",value:t.mandatoryFilling,size:"lg",thickness:.22,color:"primary","track-color":"grey-3"}},[t._v(" "+t._s(t.mandatoryFilling)+"% ")])]:t._e(),t.mandatory.filledValue?e("div",{staticClass:"chip-success q-mr-sm"},[e("div",{},[t._v(t._s(t.mandatory.filledValue)+" ready")])]):t._e(),t.mandatory.nonFilledValue?e("div",{staticClass:"chip-warning",on:{click:t.checkFormValidation}},[e("div",{},[t._v(t._s(t.mandatory.nonFilledValue)+" need to work")])]):t._e()],t.mandatoryDocument.length?[e("div",{staticClass:"chip-warning cursor-pointer",on:{click:function(e){t.attachmentSheet=!0}}},[e("div",{},[t._v(t._s(t.mandatoryDocument.length)+" document required")])])]:t._e(),t.itemModel.itemId?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[e("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},t._l(t.documentActionList,(function(i){return e("ListItem",{key:i.id,attrs:{icon:i.icon,label:i.label},on:{click:function(e){return t.processDocumentAction(i.id)}}})})),1)],1)],1):t._e(),t.formView||t.initiateProcess||0!==t.actions.length?t.initiateProcess||0!==t.actions.length?t._e():e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Details View",expression:"'Details View'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-table-column"},on:{click:function(e){t.formView=!1}}}):e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Form View",expression:"'Form View'",modifiers:{top:!0}}],staticClass:"q q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select"},on:{click:function(e){t.formView=!0}}}),t.isCustomizedWorkflow?t._e():e("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:t.isMaximized?"eva-collapse":"eva-expand"},on:{click:t.toggleWidth}})]},proxy:!0},{key:"footer",fn:function(){return[t.actions.length?e("div",{staticClass:"footer row"},["inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode||t.initiateProcess?e("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Save",color:"secondary"},on:{click:function(e){return t.validateRequest("Save")}}}):t._e(),t._l(t.actions,(function(i){return["Approve"===i||"Complete"===i||"Rightsize"===i?e("BaseButton",{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"positive"},on:{click:function(e){return t.validateRequest(i)}}}):"Reject"===i||"Terminate"===i||"Force Close"===i||"Decline"===i?e("BaseButton",{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"red"},on:{click:function(e){return t.validateRequest(i)}}}):"Forward"===i||i.indexOf("Reply")>-1||"Rollback"===i||"Assign"===i?e("BaseButton",{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"orange"},on:{click:function(e){return t.validateRequest(i)}}}):e("BaseButton","To Requester"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"pink"},on:{click:function(e){return t.validateRequest(i)}}}:{key:i,staticClass:"q-ml-md",attrs:{label:i},on:{click:function(e){return t.validateRequest(i)}}})]}))],2):t._e()]},proxy:!0}]),model:{value:t.processSheet,callback:function(e){t.processSheet=e},expression:"processSheet"}},[e("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t.formId?e("div",{staticClass:"col"},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 115px)"}},[t.formView?e("div",{attrs:{id:"form-view"}},[t.formId&&Object.keys(t.form).length?e("RenderForm",{attrs:{"form-id":t.formId,panels:t.panels,"secondary-panels":t.secondaryPanels,"form-settings":t.formSettings,"form-model":t.formModel,"save-action":t.saveAction,"workflow-form-model":t.workflowFormModel,"workflow-model":t.workflowModel,"is-readonly":t.formEditAccess,"form-edit-controls":t.formEditControls,"readonly-controls":t.readonlyControls,"form-visibility-access":t.formVisibilityAccess,"form-secure-controls":t.formSecureControls,"enable-controls":t._enableControls,"check-list":t.checkList,"form-fields":t.formFields,"data-validation-values":t.dataValidationValues,"form-check-list":t.formCheckList,"form-upload-files":t.formUploadFiles,"has-check-form-validate":t.hasCheckFormValidate},on:{"update:saveAction":function(e){t.saveAction=e},"update:save-action":function(e){t.saveAction=e},"update:workflowFormModel":function(e){t.workflowFormModel=e},"update:workflow-form-model":function(e){t.workflowFormModel=e},"update:workflowModel":function(e){t.workflowModel=e},"update:workflow-model":function(e){t.workflowModel=e},"update:checkList":function(e){t.checkList=e},"update:check-list":function(e){t.checkList=e},"update:formCheckList":function(e){t.formCheckList=e},"update:form-check-list":function(e){t.formCheckList=e},"update:hasCheckFormValidate":function(e){t.hasCheckFormValidate=e},"update:has-check-form-validate":function(e){t.hasCheckFormValidate=e},uploadFiles:t.getOCRResult,mandatoryControlsList:t.mandatoryControlsList,deletedFiles:t.deletedFiles}}):t._e(),t.signList.length?e("div",{staticClass:"q-pa-md",attrs:{id:"approvalSignature"}},[e("div",{staticClass:"title q-mb-sm"},[t._v("Approval Signature")]),e("BaseSeparator",{staticClass:"q-my-sm"}),e("div",{staticClass:"row"},[t._l(t.signList,(function(i){return[e("div",{key:i.id,staticClass:"col-3 q-mb-sm"},[e("img",{staticClass:"imgCenter col",attrs:{src:t.signLink(i.id)}}),e("div",{staticClass:"text row"},[e("span",{staticClass:"col-12 text-bold"},[t._v(t._s(i.stage))]),e("span",{staticClass:"col-12"},[t._v(t._s(i.createdByEmail))]),e("span",{staticClass:"col-12"},[t._v(t._s(t.$day.format(i.createdAt)))])])])]}))],2)],1):t._e(),t.userSignature?e("SignatureField",{staticClass:"q-pa-md",attrs:{label:"Signature"},model:{value:t.signImg,callback:function(e){t.signImg=e},expression:"signImg"}}):t._e()],1):e("div",{staticClass:"q-pa-md"},[t.requestFormData.length?e("div",{staticClass:"col-12",attrs:{id:"requestDetails"}},[e("div",{staticClass:"row justify-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"row items-center"},[e("table",{staticClass:"submittedData q-mb-sm"},[e("tbody",[t.requestFormData[0].value[0].createdByName?e("tr",[e("td",{attrs:{colspan:"4"}},[t._v(" Requested By: "+t._s(t.requestFormData[0].value[0].createdByName)+" ")])]):t._e(),e("tr",[t.requestFormData[0].value[0].raisedBy?e("th",[t._v(" Requested User Email ")]):t._e(),e("th",[t._v("Requested Date")]),e("th",[t._v("Last Acted By")]),e("th",[t._v("Last Acted On")])]),e("tr",[t.requestFormData[0].value[0].raisedBy?e("td",[t._v(" "+t._s(t.requestFormData[0].value[0].raisedBy)+" ")]):t._e(),e("td",[t._v(" "+t._s(t.$day.format(t.requestFormData[0].value[0].raisedAt))+" ")]),e("td",[t._v(" "+t._s(t.requestFormData[0].value[0].transaction_createdByEmail)+" ")]),e("td",[t._v(" "+t._s(t.$day.format(t.requestFormData[0].value[0].transaction_createdAt))+" ")])])])]),e("BaseScrollbar",{attrs:{height:"calc(100vh - 275px)"}},[[e("table",{staticClass:"mainData col-12"},[t._l(t.requestFormData[0].value[0].formData.fields,(function(i,s){return[i&&"[]"!=i?["TABLE"!==t.validateType(s)?[e("tr",{key:`${s}-${i}`},[e("td",{staticClass:"tblHeader ellipsis small"},[t._v(" "+t._s(t.getLabel(s))+" ")]),e("td",{staticClass:"ellipsis"},["FILE_UPLOAD"===t.validateType(s)?[JSON.parse(i).length?e("div",t._l(JSON.parse(i),(function(s){return e("div",{key:s.fileName,staticClass:"q-mb-xs"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col row items-center",on:{click:function(e){return t.viewFile(s,i)}}},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(s.fileName)}}),e("span",{staticClass:"cursor-pointer text-underline text-secondary"},[t._v(t._s(s.fileName))])],1)])])})),0):t._e()]:"DATE"===t.validateType(s)?[t._v(" "+t._s(t.$day.format(i,!1))+" ")]:t.validateValue(i)?[t._v(" "+t._s(t.removeTags(i)||"-")+" ")]:[e("a",{attrs:{href:i,target:"_blank"}},[t._v(" "+t._s(i||"-")+" ")])]],2)])]:JSON.parse(i).length?[t.getLabel(s)?e("tr",{key:"trlabel-"+s},[e("td",{staticClass:"tblHeader ellipsis small",attrs:{colspan:"2"}},[e("FormFieldLabel",{key:"label-"+s,staticClass:"q-mt-sm",attrs:{label:t.getLabel(s)}})],1)]):t._e(),e("tr",{key:"trtable1-"+s},[e("td",{attrs:{colspan:"2"}},[e("BaseScrollbar",{key:"scroll-"+s,staticStyle:{"max-height":"200px"}},[e("table",{key:"table-"+s,staticClass:"sub-table q-mt-sm q-mb-sm"},[e("thead",[e("tr",t._l(t.tableValue(i)[0],(function(i,s){return e("th",{key:s},[t._v(" "+t._s(t.getLabel(s,"table"))+" ")])})),0)]),e("tbody",t._l(t.tableValue(i),(function(i,s){return e("tr",{key:s},t._l(i,(function(i,s){return e("td",{key:s},[t._v(" "+t._s(i)+" ")])})),0)})),0)])])],1)])]:t._e()]:t._e()]}))],2)]],2)],1)])])]):t._e()])])],1):t._e(),t.itemModel.itemId?e("div",{staticClass:"col"},[e("div",{staticClass:"fileFrame"},[e("div",{staticClass:"file-list"},[e("iframe",{ref:"myProcessFiles",attrs:{id:"file-frame",src:t.itemLink(),frameborder:"0"}})])])]):t._e(),t.formId||t.itemModel.itemId?e("div",{staticClass:"col-auto q-mr-sm leftBorder"},[t._l(t.tabs,(function(i){return[t.checkTabAccess?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary"},on:{click:function(e){return t.showLinks(i.value)}}},[i.count?e("span",{staticClass:"badge"},[t._v(t._s(i.count)+" ")]):t._e()]):t._e()]}))],2):t._e()])]),e("Sheet",{attrs:{width:"30vw","sub-actions":!(!t.selectedProcess.processId||!t.attachmentList.length),upload:"inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode||t.initiateProcess,"no-padding":""},on:{input:t.closeAttachmentsSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[t.selectedProcess.processId?e("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[t._v(" auto-refresh every 15 seconds ")]):t._e(),t.selectedProcess.processId?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.getAttachments()}}}):t._e()]},proxy:!0},"inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode||t.initiateProcess?{key:"upload",fn:function(){return[e("div",{staticClass:"hint",on:{click:function(e){t.rowIndex=null,t.$refs.attachments.click()}}},[e("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),e("div",{staticClass:"title text-blue"},[t._v("UPLOAD FILES")]),e("div",{staticClass:"description"},[t._v("Click here to choose files and upload")])],1)]},proxy:!0}:null,t.selectedProcess.processId&&t.attachmentList.length?{key:"subActions",fn:function(){return[e("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:t.fileSelectAll},model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}}),t._v(" Select All "),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!t.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:t.documentShare}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"merge documents (only PDF)",expression:"'merge documents (only PDF)'",modifiers:{top:!0}}],attrs:{"is-disabled":!(t.selectedFileCount>1&&t.isSelectedPDF),icon:"mdi-file-document-multiple-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:t.documentMerge}})]},proxy:!0}:null],null,!0),model:{value:t.attachmentSheet,callback:function(e){t.attachmentSheet=e},expression:"attachmentSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:"inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode?"calc(100vh - 200px)":""}},[e("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:t.uploadWflowAttachments}}),t._l(t.checkList,(function(i){return[i.name?[i.attach?e("div",{key:i.uid},[t._l(t.attachmentFilterCheckList(i.name),(function(i){return[e("div",{key:i.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[t.selectedProcess.processId?e("div",{staticClass:"col-auto"},[i.loading?[e("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:i.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(t){i.checked=!i.checked}}})]],2):e("div",[i.loading?[e("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:t._e()],2),e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(i.name)}})],1),e("div",{staticClass:"col ellipsis",on:{click:function(e){return t.openFile(i)}}},[t._v(" "+t._s(i.name)+" ")]),i.formJsonId?e("div",{staticClass:"col-auto"},[e("q-chip",{staticClass:"cursor-pointer green-hover",attrs:{outline:"",color:"green"}},[t._v(" "+t._s(t.getLabel(i.formJsonId))+" ")])],1):t._e(),i.loading?t._e():e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.fileMenuAction(i,"Download")}}})],1),i.loading?t._e():e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.fileMenuAction(i,"Print")}}})],1)]),e("div",{staticClass:"meta row"},[e("div",{staticClass:"col row"},[e("div",[t._v(t._s(t.$day.format(i.createdAt)))]),i.createdBy?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.createdByEmail))])]:t._e(),i.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.fileSize(i.size)))])]:t._e()],2),e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.getFileData(i)}}})],1),[("inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode)&&i.createdBy===t.$store.state.session.id||t.initiateProcess?[e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.attachmentDelete(i)}}})],1),e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Re-Upload",expression:"'Re-Upload'",modifiers:{top:!0}}],attrs:{icon:"mdi-file-upload",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){e.stopPropagation(),t.reuploadFile=i,t.reupload(i.name)}}})],1)]:t._e()]],2)])]}))],2):e("div",{key:i.uid,staticClass:"checkList"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),e("div",{staticClass:"col q-ml-sm"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t._v(" "+t._s(i.name)+" ")]),i.required?e("div",{staticClass:"col-12 q-mt-sm"},[e("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[t._v(" Required ")])],1):t._e()])]),e("div",{staticClass:"col-auto"},[e("div",{staticClass:"col-12",on:{click:function(e){return t.attachTemplate(i.uid)}}},[e("q-chip",{staticClass:"chips primary-hover medium",attrs:{outline:"",color:"primary"}},[e("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-upload-outline",color:"primary","text-color":"white"}}),t._v(" Upload ")],1)],1),i.template?e("div",{staticClass:"col-12",on:{click:function(e){return t.download(i.id)}}},[e("q-chip",{staticClass:"chips secondary-hover medium",attrs:{outline:"",color:"secondary"}},[e("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-download-outline",color:"secondary","text-color":"white"}}),t._v(" Download ")],1)],1):t._e()])])])]:t._e()]})),t._l(t.attachmentList,(function(i){return[t.isCheckList(i.name)?[e("div",{key:i.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[i.loading?[e("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:t._e(),t.selectedProcess.processId?e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:i.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(t){i.checked=!i.checked}}})],1):t._e(),e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(i.name)}})],1),e("div",{staticClass:"col ellipsis",on:{click:function(e){return t.openFile(i)}}},[t._v(" "+t._s(i.name)+" ")]),i.loading?t._e():e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.fileMenuAction(i,"Download")}}})],1),i.loading?t._e():e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.fileMenuAction(i,"Print")}}})],1)],2),i.formJsonId?e("div",{staticClass:"row q-mb-xs"},[e("div",{staticClass:"col"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto ellipsis attachment-label"},[t._v(" "+t._s(t.getLabel(i.formJsonId))+" ")])])]),e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.getFileData(i)}}})],1),("inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode)&&i.createdBy===t.$store.state.session.id||t.initiateProcess?e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.attachmentDelete(i)}}})],1):t._e()]):t._e(),e("div",{staticClass:"meta row"},[e("div",{staticClass:"col row"},[e("div",[t._v(t._s(t.$day.format(i.createdAt)))]),i.createdBy?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.createdByEmail))])]:t._e(),i.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.fileSize(i.size)))])]:t._e()],2),i.formJsonId?t._e():[e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.getFileData(i)}}})],1),("inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode)&&i.createdBy===t.$store.state.session.id||t.initiateProcess?e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.attachmentDelete(i)}}})],1):t._e()]],2)])]:t._e()]}))],2)],1)]),e("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode?"30":"0","no-padding":""},on:{input:t.closeCommentsSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments ")]},proxy:!0},{key:"actions",fn:function(){return[t.selectedProcess.processId?e("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[t._v(" auto-refresh every 30 seconds ")]):t._e(),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.getComments(0)}}})]},proxy:!0}]),model:{value:t.commentsSheet,callback:function(e){t.commentsSheet=e},expression:"commentsSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:t.commentsSheetHeight}},[t._l(t.commentsList,(function(i,s){return[e("q-chat-message",{key:s,staticClass:"q-ma-sm",attrs:{name:i.createdBy===t.$store.state.session.id?"me":i.createdByEmail||i.externalCommentsby,text:[i.comments],"text-html":"",sent:i.createdBy===t.$store.state.session.id,stamp:t.lastCommentDuration(i),"bg-color":i.createdBy===t.$store.state.session.id?"primary-1":"secondary-1"},scopedSlots:t._u([{key:"avatar",fn:function(){return[i.embedFileList&&i.embedFileList.length?e("div",{staticClass:"file-icons"},[e("FileIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.embedFileList[0].fileName,expression:"row.embedFileList[0].fileName",modifiers:{top:!0}}],key:"Icon-"+s,staticClass:"file-icon q-mr-sm",attrs:{"mime-type":t.fileType(i.embedFileList[0].fileName)}})],1):t._e()]},proxy:!0}],null,!0)})]}))],2)],1),"inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode?e("div",{staticClass:"col borderTop"},[e("div",{staticClass:"row"},[t.checkTenant()&&!t.portal?[e("div",{staticClass:"col actions"},[t.attachmentList.length&&t.fileNames.length?e("div",{staticClass:"row select-action q-pa-sm action-container"},[e("CheckboxField",{staticClass:"col-auto q-pr-sm",attrs:{label:"Add Comment to PDF"},model:{value:t.attachComment,callback:function(e){t.attachComment=e},expression:"attachComment"}}),t.attachComment?e("SelectField",{staticClass:"col field comment-attach attach-cmd",attrs:{"is-searchable":!0,options:t.fileNames},model:{value:t.selectedFileForAttach,callback:function(e){t.selectedFileForAttach=e},expression:"selectedFileForAttach"}}):t._e()],1):t._e(),t.displayInternalPublic?e("SingleChoiceField",{staticClass:"action-container",class:{"internal-public":t.attachmentList.length>0,"col q-pa-sm":!0,"internal-public-margin":t.attachComment},attrs:{options:t.commentActions,"show-options-wrapper":!1,"options-per-line":2},model:{value:t.commentAction,callback:function(e){t.commentAction=e},expression:"commentAction"}}):t._e()],1)]:t._e(),t.isTenantGOTOComments()?[e("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:t.jiraCommentActions,"options-per-line":2},model:{value:t.jiraCommentAction,callback:function(e){t.jiraCommentAction=e},expression:"jiraCommentAction"}})]:t._e()],2),e("div",{staticClass:"row text-area-action q-ml-sm q-mr-sm"},[e("div",{staticClass:"col"},[e("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}})],1),e("div",{staticClass:"col-auto",staticStyle:{margin:"auto","margin-right":"8px"}},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm comment-actions",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:t.saveComment}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm comment-actions",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(e){t.advancedCommentsSheet=!0}}})],1)])]):t._e()]),e("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(e){t.mailTransactionSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Mail Transactions ")]},proxy:!0},{key:"actions",fn:function(){return[e("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[t._v(" auto-refresh every 30 seconds ")]),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.getMailTransactions()}}})]},proxy:!0}]),model:{value:t.mailTransactionSheet,callback:function(e){t.mailTransactionSheet=e},expression:"mailTransactionSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("div",{staticClass:"q-pl-sm"},[e("Tabs",{attrs:{tabs:t.mailTabs},model:{value:t.mailTab,callback:function(e){t.mailTab=e},expression:"mailTab"}})],1),"OUTGOING"===t.mailTab?[e("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[t._l(t.outgoingMails,(function(i){return[e("div",{key:"outgoing"+i.id,staticClass:"mailTransactionList"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),e("div",{staticClass:"col-auto"},[t._v(" "+t._s(i.subject)+" ")])]),e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),e("div",{staticClass:"col-auto"},[t._v(t._s(i.email))])]),e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),e("div",{staticClass:"col-auto"},[t._v(" "+t._s(t.$day.format(i.createdAt,!0))+" ")])])]),e("div",{staticClass:"col-auto q-mr-sm"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(e){return e.stopPropagation(),t.showMailAttachments(i)}}},[i.attachmentCount?e("span",{staticClass:"badge"},[t._v(t._s(i.attachmentCount)+" ")]):t._e()]),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"resend",expression:"'resend'",modifiers:{top:!0}}],attrs:{icon:"mdi-send",color:"secondary","is-flat":"",size:"16px"},on:{click:function(e){return e.stopPropagation(),t.resendMail(i.ezMailId)}}})],1)])])]}))],2)]:t._e(),"INCOMING"===t.mailTab?[e("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[t._l(t.incomingMails,(function(i){return[e("div",{key:"incoming"+i.id,staticClass:"mailTransactionList"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),e("div",{staticClass:"col-auto"},[t._v(" "+t._s(i.subject)+" ")])]),e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),e("div",{staticClass:"col-auto"},[t._v(t._s(i.email))])]),e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),e("div",{staticClass:"col-auto"},[t._v(" "+t._s(t.$day.format(i.createdAt,!0))+" ")])])]),e("div",{staticClass:"col-auto q-mr-sm"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(e){return e.stopPropagation(),t.showMailAttachments(i)}}},[i.attachmentCount?e("span",{staticClass:"badge"},[t._v(t._s(i.attachmentCount)+" ")]):t._e()])],1)])])]}))],2)]:t._e()],2)]),e("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(e){t.mailAttachmentSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Mail Attachments ")]},proxy:!0}]),model:{value:t.mailAttachmentSheet,callback:function(e){t.mailAttachmentSheet=e},expression:"mailAttachmentSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 200px)"}},[t._l(t.mailAttachmentList,(function(i){return[e("div",{key:i.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(i.name)}})],1),e("div",{staticClass:"col ellipsis",on:{click:function(e){return t.openAttachmentFile(i)}}},[t._v(" "+t._s(i.name)+" ")])]),e("div",{staticClass:"meta"},[e("div",[t._v(t._s(t.$day.format(i.createdAt)))]),i.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.fileSize(i.size)))])]:t._e()],2)])]}))],2)],1)]),e("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(e){t.fileSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"attachmentFileHeader"},[t.selectedFile.formJsonId?[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:t.getLabel(t.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:t._e(),e("div",{staticClass:"avatar q-ml-sm"},[e("FileIcon",{attrs:{"mime-type":t.fileType(t.selectedFile.name)}})],1),e("div",{staticClass:"q-ml-md"},[e("div",{staticClass:"filename"},[t._v(" "+t._s(t.selectedFile.name)+" ")]),e("div",{staticClass:"meta"},[e("div",[t._v("Archived At: "+t._s(t.$day.format(t.selectedFile.createdAt)))]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v("Archived By: "+t._s(t.selectedFile.createdByEmail))]),t.selectedFile.size?e("div",[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t._v(" File Size: "+t._s(t.fileSize(t.selectedFile.size))+" ")],1):t._e()],1)])],2)]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[e("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},t._l(t.documentActionList,(function(i){return e("ListItem",{key:i.id,attrs:{icon:i.icon,label:i.label},on:{click:function(e){return t.documentAction(i.id)}}})})),1)],1)],1)]},proxy:!0}]),model:{value:t.fileSheet,callback:function(e){t.fileSheet=e},expression:"fileSheet"}},[e("div",{staticClass:"attachmentFileFrame"},[e("div",{staticClass:"file-list"},[e("iframe",{ref:"myAttachmentFiles",attrs:{id:"file-frame",src:t.fileLink(),frameborder:"0"}})])])]),e("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(e){t.saveAction="",t.workflowFormModel={},t.advancedCommentsSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[e("TextBuilderField",{model:{value:t.advancedCommentText,callback:function(e){t.advancedCommentText=e},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[t.checkTenant()&&!t.portal?[e("div",{staticClass:"row actions advance-cmd"},[t.attachmentList.length&&t.fileNames.length?[e("CheckboxField",{staticClass:"col-auto q-pr-sm",staticStyle:{margin:"auto"},attrs:{label:"Add Comment to PDF"},model:{value:t.attachComment,callback:function(e){t.attachComment=e},expression:"attachComment"}}),t.attachComment?e("SelectField",{staticClass:"field comment-attach",attrs:{"is-searchable":!0,options:t.fileNames},on:{input:t.handleAttachComment},model:{value:t.selectedFileForAttach,callback:function(e){t.selectedFileForAttach=e},expression:"selectedFileForAttach"}}):t._e()]:t._e()],2),t.checkTenant()&&t.displayInternalPublic?e("SingleChoiceField",{staticClass:"actions q-mr-sm noborder",attrs:{options:t.commentActions,"options-per-line":2},model:{value:t.commentAction,callback:function(e){t.commentAction=e},expression:"commentAction"}}):t._e()]:t._e(),t.isTenantGOTOComments()?[e("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:t.jiraCommentActions,"options-per-line":2},model:{value:t.jiraCommentAction,callback:function(e){t.jiraCommentAction=e},expression:"jiraCommentAction"}})]:t._e(),e("BaseButton",{attrs:{label:"Post Comments",icon:"eva-paper-plane-outline",color:"primary"},on:{click:t.saveAdvancedComment}})]},proxy:!0}]),model:{value:t.advancedCommentsSheet,callback:function(e){t.advancedCommentsSheet=e},expression:"advancedCommentsSheet"}}),e("Modal",{attrs:{width:"40vw",height:"60vh","has-footer":""},on:{input:function(e){t.saveAction="",t.workflowFormModel={},t.processForwardModal=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t.processForwardGroupAction?t._e():e("span",[t._v('"'+t._s(t.selectedProcess.requestNo)+'"')]),t._v(" Process Forward")]},proxy:!0},{key:"default",fn:function(){return[e("div",{attrs:{id:"processForward"}},[e("MultiSelectField",{staticClass:"field",attrs:{label:"users",options:t.userList},model:{value:t.forwardUsers,callback:function(e){t.forwardUsers=e},expression:"forwardUsers"}}),e("MultiSelectField",{staticClass:"field",attrs:{label:"group",options:t.groupList},model:{value:t.forwardGroups,callback:function(e){t.forwardGroups=e},expression:"forwardGroups"}}),t.processForwardGroupAction?e("TextAreaField",{staticClass:"field q-mt-md",attrs:{placeholder:"Type a comment..."},model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}}):t._e()],1)]},proxy:!0},{key:"footer",fn:function(){return[t.isTenantGOTO()?[e("BaseButton",{attrs:{label:"Assign",color:"orange"},on:{click:function(e){t.processForwardModal=!1,t.processForwardGroupAction?t.groupProcessRequest():t.processRequest(!1,!1)}}})]:[e("BaseButton",{attrs:{label:"Forward",color:"orange"},on:{click:function(e){t.processForwardModal=!1,t.processForwardGroupAction?t.groupProcessRequest():t.processRequest(!1,!1)}}})]]},proxy:!0}]),model:{value:t.processForwardModal,callback:function(e){t.processForwardModal=e},expression:"processForwardModal"}}),e("Sheet",{attrs:{width:"40vw","has-footer":""},on:{input:t.closeJiraIssueSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" JIRA - Create Issue ")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"jiraIssue",attrs:{id:"content-wrapper"}},[e("ValidationObserver",{ref:"form"},[e("div",{staticClass:"field-wrapper"},[e("ValidationProvider",{attrs:{name:"Issue Name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextField",{staticClass:"field",attrs:{label:"Issue Name","is-mandatory":"",error:i[0]},model:{value:t.issueName,callback:function(e){t.issueName=e},expression:"issueName"}})]}}])}),t._e(),t._e(),e("ValidationProvider",{attrs:{name:"Description",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextAreaField",{staticClass:"field",attrs:{label:"Description","is-mandatory":"",error:i[0]},model:{value:t.issueDescription,callback:function(e){t.issueDescription=e},expression:"issueDescription"}})]}}])}),t._e(),t._e(),t._e()],1)])],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Create Issue",color:"primary"},on:{click:t.createJiraIssue}})]},proxy:!0}]),model:{value:t.jiraIssueSheet,callback:function(e){t.jiraIssueSheet=e},expression:"jiraIssueSheet"}}),e("MetaDataEdit",{attrs:{value:t.showMetaDataEditModal,file:t.workflow,"repository-field":t.repositoryField,"file-data":t.fileData,title:t.metaDataTitle||"Index",columns:t.columns,"modal-value":t.workflowModel,"read-only":!0,"upload-filename":t.uploadFilename,"meta-data-fields":t.metaDataModal},on:{close:t.closeMetaDataEditModal,save:t.saveMetaData}}),e("Sheet",{attrs:{width:"30vw"},on:{input:t.closeTaskSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Tasks ")]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Add Task",expression:"'Add Task'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-plus",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.addTask()}}})]},proxy:!0}]),model:{value:t.taskSheet,callback:function(e){t.taskSheet=e},expression:"taskSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[t._l(t.taskEntries,(function(i){return[e("div",{key:i.id,staticClass:"taskEntries"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto q-mr-md",staticStyle:{"margin-top":"3px"},on:{click:function(e){return t.viewTask(i.id)}}},[t._v(" "+t._s(i.name)+" ")]),e("q-chip",{attrs:{size:"10px",color:t.getColor(i.priority),"text-color":"white"}},[t._v(" "+t._s(i.priority)+" ")]),e("q-chip",{attrs:{size:"10px",color:t.getColor(i.status),"text-color":"white"}},[t._v(" "+t._s(i.status)+" ")])],1)]),e("div",{staticClass:"meta row"},[e("div",{staticClass:"col-12"},[t._v("Assigned To: "+t._s(i.assigned))]),e("div",{staticClass:"col-12"},[t._v(" Start Date: "+t._s(t.$day.format(i.startDate,!1))+" "),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t._v(" End Date: "+t._s(t.$day.format(i.endDate,!1))+" ")],1)])])]}))],2)]),t.taskFormId?e("AddTask",{attrs:{value:t.addTaskSheet,"form-settings":t.addTaskForm.settings,panels:t.addTaskForm.panels,"secondary-panels":t.addTaskForm.secondaryPanels,"form-id":t.taskFormId,"repository-id":t.taskRepositoryId,"task-model":t.selectedTask,"workflow-task":!0,mode:t.taskMode},on:{close:function(e){t.addTaskSheet=!1},addEntry:t.addTaskEntry}}):t._e(),t.importExcel?e("ImportPopup",{staticClass:"row items-center q-mr-xs",attrs:{"chip-button":!0,"data-imported":t.dataImported,"form-id":String(t.masterFormId)},on:{upload:function(e){return t.$refs.input.click()},close:function(e){t.dataImported=!1}}}):t._e(),e("input",{ref:"input",staticClass:"hidden",attrs:{type:"file",accept:".csv,.xls,.xlsx"},on:{change:t.uploadFile}}),e("Confirm",{attrs:{icon:"mdi-file-alert","icon-color":"red"},on:{input:t.closeAlertModal},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Documents Required!")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"q-py-md text-md"},[e("p",[t._v(" Are you sure you want to submit the request without attaching the required documents. ")])])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no"},on:{click:t.closeAlertModal}}),e("BaseButton",{attrs:{label:"yes",color:"primary"},on:{click:t.proceedSubmission}})]},proxy:!0}]),model:{value:t.alertModal,callback:function(e){t.alertModal=e},expression:"alertModal"}}),e("EmailSharing",{attrs:{"repository-id":t.workflow.repositoryId,"file-list":t.selectedFileList},on:{"update:fileList":function(e){t.selectedFileList=e},"update:file-list":function(e){t.selectedFileList=e}},model:{value:t.emailSharingSheet,callback:function(e){t.emailSharingSheet=e},expression:"emailSharingSheet"}}),e("FileDetails",{attrs:{"file-data":t.fileData},model:{value:t.fileDetailsSheet,callback:function(e){t.fileDetailsSheet=e},expression:"fileDetailsSheet"}}),t.historyProcessId?e("ProcessHistory",{attrs:{"process-id":t.historyProcessId,"selected-process":t.selectedProcess},on:{close:function(e){t.historyProcessId=0}}}):t._e(),t.showFormEntryHistoryModal?e("FormEntryHistory",{attrs:{value:t.showFormEntryHistoryModal,"workflow-id":t.workflow.id,"process-id":t.selectedProcess.processId},on:{"update:value":function(e){t.showFormEntryHistoryModal=e}}}):t._e(),t.showAttachmentSheet?e("Attachments",{attrs:{value:t.showAttachmentSheet,"selected-process":t.selectedProcess,workflow:t.workflow,"selected-node":t.selectedNode,"initiate-process":t.initiateProcess,"form-check-list":t.formCheckList,"check-list":t.checkList,wform:t.wform,"repository-details":t.repositoryDetails,"workflow-model":t.workflowModel,"form-upload-files":t.formUploadFiles,"repository-field":t.repositoryField,columns:t.columns,attachments:t.attachmentList,"workflow-id":t.workflow.id},on:{"update:value":function(e){t.showAttachmentSheet=e},"update:attachments":function(e){t.attachmentList=e},attachmentCount:t.attachmentCount}}):t._e(),t.showCommentsSheet?e("Comments",{attrs:{value:t.showCommentsSheet,"selected-process":t.selectedProcess,workflow:t.workflow,"selected-node":t.selectedNode,"initiate-process":t.initiateProcess,"attachment-list":t.attachmentList,"workflow-id":t.workflow.id,"file-names":t.fileNames,comments:t.commentsList,"display-internal-public":t.displayInternalPublic},on:{"update:value":function(e){t.showCommentsSheet=e},"update:comments":function(e){t.commentsList=e},commentsCount:t.commentsCount}}):t._e()],1)},a=[],o=(i("14d9"),i("13d5"),i("7bb1")),r=i("381e"),n=i("4bc4"),l=i("1b0d"),c=i("0cdc"),d=i("eff0"),m=i("bc3a"),h=i.n(m),u=i("dd90"),p=i("a7d2"),f=i("6a70"),v=i("cade"),y=i("c3d2"),b=i("fa1f"),g=i("ee54"),w=i("869e"),C=i("6df3"),k=i("b3d1"),S=i("9234"),I=i("695e"),_=i("b94d"),T=i("0c04"),$=i("1c54"),x=i("5e23"),A=i("abe1"),L=i("8505"),F=i("98cf"),P=i("909a"),B=i("9996"),D=i("3445"),M=i("b0ba"),N=i("ec15"),O=i("bb36"),q={name:"SubWorkflowProcess",components:{ValidationObserver:o["a"],ValidationProvider:o["b"],MultiSelectField:y["a"],FileIcon:b["a"],ListItem:v["a"],Sheet:r["a"],RenderForm:n["a"],Confirm:$["a"],SignatureField:d["a"],Modal:f["a"],MetaDataEdit:g["a"],CheckboxField:w["a"],TextAreaField:C["a"],TextField:k["a"],SingleChoiceField:S["a"],TextBuilderField:I["a"],Tabs:_["a"],AddTask:T["a"],ImportPopup:c["a"],EmailSharing:x["a"],FileDetails:A["a"],ProcessHistory:L["a"],FormFieldLabel:D["a"],FormEntryHistory:M["a"],Attachments:N["a"],Comments:O["a"]},props:{workflowId:{type:Number,default:0},initiateSubWorkflowProcess:{type:Boolean,default:!1},mainWorkflowId:{type:Number,default:0},mainProcessId:{type:Number,default:0},subProcessLink:{type:String,default:""},selectedProcess:{type:Object,default:()=>{}},openSubProcess:{type:Boolean,default:!1},mainFormFields:{type:Array,default:()=>[]},mainFormModel:{type:Object,default:()=>{}},portal:{type:Boolean,default:!1},subProcessId:{type:Number,default:0}},data(){return{workflow:{},workflowList:[],initiate:!1,processSheet:!1,headerTitle:"",formModel:{},form:{},formId:"",formData:"",actions:[],processActionsAddOn:[],workflowFormModel:{},saveAction:"",commentsList:[],attachmentList:[],initiateProcess:!1,signList:[],formEditAccess:!1,formEditControls:[],readonlyControls:[],formVisibilityAccess:!0,formSecureControls:[],repositoryDetails:{},repositoryField:[],formWidth:"100vw",checkList:[],stageLevel:[],currentStep:0,commentActions:[{id:this.$nano.id(),label:"Internal",value:2},{id:this.$nano.id(),label:"Public",value:1}],commentAction:2,jiraCommentActions:[{id:this.$nano.id(),label:"This resource",value:1},{id:this.$nano.id(),label:"All resource",value:2}],jiraCommentAction:1,formFields:[],checkListRowIndex:null,requestPrefix:"",mlPrediction:"",advancedCommentsSheet:!1,advancedCommentText:"",docWarning:!1,alertModal:!1,actionRemarks:!1,actionPassword:!1,actionPasswordConfirm:!1,actionUserPassword:"",actionComments:!1,actionConfirm:!1,actionConfirmAlert:!1,showMetaDataEditModal:!1,selectedUploadFile:{},workflowModel:{},customVerify:!1,formCheckList:!1,reuploadFile:{},documentActionList:[{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline"},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline"}],scrollPosition:0,commentsLoad:null,mailTransactionLoad:null,documentLoad:null,documentLoadList:[],uploadFilename:"",filterSearchColumn:{},selectedFilterColumn:"",watchViewerClose:null,saveOnly:!1,wform:[],userSignature:!1,dataValidationValues:[],processForwardModal:!1,forwardUsers:[],forwardGroups:[],processForwardGroupAction:!1,selectedFilter:[],filterBy:[],attachmentLoad:null,signImg:"",selectAll:!1,emailSharingSheet:!1,selectedFileList:[],fileDetailsSheet:!1,fileData:[],jiraConnect:!1,jiraAccounts:[],jiraIssueSheet:!1,issueName:"",projectKey:"",issueType:"",issueDescription:"",issueEpicValue:"",issueAssignee:"",issueAssigneeUsers:[],issueDescriptionTable:!1,issueDescriptionFields:[],jiraConfirmModal:!1,issueRef:{},taskSheet:!1,itemModel:{},errorMessage:"",errorModal:!1,successModal:!1,selectedNode:"",attachmentSheet:!1,commentsSheet:!1,processId:0,tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"mail transaction",value:"MAIL",icon:"mdi-email-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0},{id:this.$nano.id(),label:"task",value:"TASK",icon:"eva-cube-outline",count:0},{id:this.$nano.id(),label:"Form Entry History",value:"FORM_ENTRY_HISTORY",icon:"mdi-file-document",count:0}],taskEntries:[],addTaskEnabled:!1,mailTab:"OUTGOING",mailTransactionSheet:!1,commentText:"",mailTransactionList:[],mailAttachmentSheet:!1,mailAttachmentList:[],fileSheet:!1,selectedFile:{},mailTabs:[{id:this.$nano.id(),label:"outgoing",value:"OUTGOING",count:0},{id:this.$nano.id(),label:"incoming",value:"INCOMING",count:0}],userList:[],groupList:[],refreshTree:!0,loadInitial:!0,customReply:!1,userReply:!1,toRequester:!1,customCloseProcessSheet:!1,approvalTypes:[{id:this.$nano.id(),label:"Approve",value:"Approved"},{id:this.$nano.id(),label:"Cancel",value:"Cancelled"}],activeViewLoad:null,hideColumns:[],columns:[],generatePDF:0,documentRequired:!1,hasSelectedProcess:0,hasSelectedWorkflow:0,taskFormId:0,taskRepositoryId:0,addTaskForm:{},addTaskSheet:!1,taskEntryId:[],taskEntryList:[],taskMode:"",selectedTask:{},importExcel:!1,masterFormId:0,dataImported:!1,sameFormFields:[],historyProcessId:0,attachComment:!1,fileNames:[],selectedFileForAttach:0,displayInternalPublic:!1,formUploadFiles:[],mandatory:{},fileControlDeleteFile:[],hasCheckFormValidate:!1,fileUploadForControl:!1,fileUploadInput:{},metaDataUpdate:!1,metaDataModal:{},metaDataTitle:"",requestFormData:[],formView:!0,showFormEntryHistoryModal:!1,showAttachmentSheet:!1,showCommentsSheet:!1}},computed:{formName(){return this.formId?this.form.settings.general.name:""},formDescription(){return this.formId?this.form.settings.general.description:""},panels(){return this.formId?this.form.panels:[]},secondaryPanels(){return this.formId?this.form.secondaryPanels:[]},formSettings(){return this.formId?this.form.settings:{}},selectedFileCount(){let t=this.attachmentList.filter(t=>t.checked).length;return t},isSelectedPDF(){let t=!0;return this.attachmentList.forEach(e=>{let i=e.name.split(".").pop();e.checked&&"pdf"!==i.toLowerCase()&&(t=!1)}),t},isMaximized(){return"100vw"===this.formWidth},_enableControls(){let t=[],e=[];return this.panels&&this.panels.forEach(i=>{if(i.fields.length){let s=i.fields.filter(t=>"SINGLE_SELECT"===t.type||"SINGLE_CHOICE"===t.type||"MULTIPLE_CHOICE"===t.type||"MULTI_SELECT"===t.type);s.length&&s.forEach(i=>{if(i.settings.validation.enableSettings&&i.settings.validation.enableSettings.length){let s=[];i.settings.validation.enableSettings.forEach(t=>{t.controls.length&&(s.push({value:t.value,childControls:t.controls}),t.controls.forEach(t=>{s.indexOf(t)<0&&e.push(t)}))}),s.length&&t.push({id:i.id,parentControls:s})}})}}),{listControls:e,controls:t}},isCustomizedWorkflow(){let t=location.origin;if("https://demo.ezofis.com"===t||"http://52.172.32.88"===t){if(1014===this.workflow.id)return!0}else if(("https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t||"https://trial.ezofis.com"===t&&12===this.$store.state.session.tenantId)&&1===this.workflow.id)return!0;return!1},outgoingMails(){return this.mailTransactionList.filter(t=>"Outgoing"===t.emailType)},incomingMails(){return this.mailTransactionList.filter(t=>"Incoming"===t.emailType)},commentsSheetHeight(){return"inbox"===this.selectedNode||"payment"===this.selectedNode||"common"===this.selectedNode?this.checkCommentsOption()?this.attachmentList.length&&this.fileNames.length?this.attachComment&&this.displayInternalPublic?"calc(100vh - 240px)":this.attachComment&&!this.displayInternalPublic?"calc(100vh - 200px)":!this.attachComment&&this.displayInternalPublic?"calc(100vh - 225px)":"calc(100vh - 190px)":this.displayInternalPublic?"calc(100vh - 190px)":"calc(100vh - 150px)":"calc(100vh - 150px)":""},mandatoryDocument(){return this.checkList.filter(t=>t.required&&!t.attach)},mandatoryFilling(){return this.mandatory.filledValue&&this.mandatory.nonFilledValue?Math.floor(this.mandatory.filledValue/(this.mandatory.filledValue+this.mandatory.nonFilledValue)*100):this.mandatory.filledValue?100:0},request(){return this.selectedProcess}},watch:{workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&(this.initiateProcess,this.checkRequiredDocument())}},attachmentSheet:{immediate:!0,handler(){if(this.attachmentSheet&&this.selectedProcess.processId){if(this.attachmentList.length){let t=this.attachmentList.length-1;this.getFileData(this.attachmentList[t],"file")}this.attachmentLoad=setInterval(()=>{this.getAttachments()},15e3)}else clearInterval(this.attachmentLoad)}},commentsSheet:{immediate:!0,handler(){this.commentsSheet&&this.selectedProcess.processId?this.commentsLoad=setInterval(()=>{this.getComments(this.workflowId,this.selectedProcess.processId)},3e4):clearInterval(this.commentsLoad)}},mailTransactionSheet:{immediate:!0,handler(){this.mailTransactionSheet&&this.selectedProcess.processId?this.mailTransactionLoad=setInterval(()=>{this.getMailTransactions()},3e4):clearInterval(this.mailTransactionLoad)}},taskEntries:{immediate:!0,handler(){this.tabs.find(t=>{"TASK"===t.value&&(t.count=this.taskEntries.length)})}},workflowId:{immediate:!0,handler(){}},initiateSubWorkflowProcess:{immediate:!0,handler(){this.initiateSubWorkflowProcess&&this.getWorkflow()}},processSheet(){this.fileData=[],this.workflowModel={}},dataValidationValues:{immediate:!0,deep:!0,handler(){if(this.customVerify=!1,this.dataValidationValues.length){let t=this.dataValidationValues.filter(t=>"Matched"!==t.status&&"Verified"!==t.status);t.length&&(this.customVerify=!0)}}},customCloseProcessSheet:{deep:!0,immediate:!0,handler(){}},subProcessLink(){this.subProcessLink&&(this.selectedNode="sent",this.showLinks(this.subProcessLink))},openSubProcess:{immediate:!0,handler(){this.openSubProcess&&(this.formId="",this.formView=!1,this.selectedProcess.inbox?(this.formView=!0,this.getWorkflow()):this.getWorkflow("process"))}},selectedProcess:{deep:!0,handler(){this.selectedProcess.processId&&(this.getAttachments(this.workflowId,this.selectedProcess.processId),this.getComments(this.workflowId,this.selectedProcess.processId))}},workflowModel:{deep:!0,handler(){this.sameFormFields.forEach(t=>{t.value&&(this.workflowModel[t.name]=t.value)})}}},created(){this.getTaskForm()},methods:{isTenantArmgroup(){let t=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==t&&"https://ag-appsvc05.azurewebsites.net"!==t||(this.commentAction=2,!1)},checkTabAccess(t){return this.portal?"ATTACHMENTS"===t||"COMMENTS"===t:"TASK"===t?this.addTaskEnabled:"VALIDATION"===t?!!this.isTenantArmgroup():"FORM_ENTRY_HISTORY"!==t||!!this.formId},reset(){this.headerTitle="",this.mandatory={},this.actions=[],this.processActionsAddOn=[],this.form={},this.formId="",this.formFields=[],this.tabs.find(t=>{t.count=0}),this.taskEntries=[],this.commentsList=[],this.attachmentList=[],this.initiateProcess=!0,this.formModel={},this.signList=[],this.formEditAccess=!1,this.formEditControls=[],this.readonlyControls=[],this.formVisibilityAccess=!0,this.formSecureControls=[],this.importExcel=!1},async getWorkflow(t){this.reset(),this.processSheet=!0,this.$store.commit("showLoadingBarSave");const{error:e,payload:i}=await l["t"].getWorkflow(this.workflowId);e?this.$alert.error(e):(this.workflow=i,this.selectedNode=t?"sent":"inbox",this.selectedProcess.inbox?await this.openProcess(!1):await this.openProcess(!t),this.$store.commit("hideLoadingBarSave"))},closeProcessSheet(){this.processSheet=!1,this.saveAction="",this.workflowFormModel={},this.requestFormData=[],this.formView=!0,this.$emit("closeProcessSheet")},getLabel(t){let e="";return Object.keys(this.form).length&&this.form.panels.forEach(i=>{if(!i.fields.length)return;let s=i.fields.find(e=>e.id===t);s&&(e=s.label?s.label:s.type)}),e},async openProcess(t=!1){if(this.getRepository(),t){let t=JSON.parse(this.workflow.flowJson),e=t.blocks.find(t=>"START"===t.type);if(console.log(e.settings.fileSettings),e.settings.fileSettings&&e.settings.fileSettings.fileCheckList.length&&(this.checkList=e.settings.fileSettings.fileCheckList,this.checkList.forEach(t=>{t.uid=this.$nano.id(),t.attach=!1})),e){if("MANUAL"===e.settings.initiateMode){this.headerTitle=""+e.settings.label;let i=t.rules.find(t=>t.fromBlockId===e.id);i&&this.actions.push(i.proceedAction)}else"MANUAL_AUTOMATIC"===e.settings.initiateMode&&(e.settings.users.indexOf(this.$store.state.session.id)>-1||e.settings.users.indexOf("0")>-1)&&e.settings.initiateBy.indexOf("MASTER_FORM")>-1&&(this.importExcel=!0,this.masterFormId=e.settings.masterFormId);if(this.generatePDF=e.settings.generatePDF?1:0,this.documentRequired=e.settings.documentRequired||!1,e.settings.formEditAccess&&(""===e.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===e.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===e.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=e.settings.formEditControls)),e.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=e.settings.formSecureControls),e.settings.fileSettings){if(e.settings.fileSettings.fileCheckList.length){let t=e.settings.fileSettings.fileCheckList;t.forEach(t=>{t.uid=this.$nano.id(),t.attach=!1}),this.docWarning=e.settings.fileSettings.partial,this.checkList=t}}else this.checkList=[]}}else{if(this.getFormDetails(),"inbox"===this.selectedNode||"common"===this.selectedNode||"payment"===this.selectedNode){this.formEditAccess=!1;let t=JSON.parse(this.workflow.flowJson),e=t.blocks.find(t=>t.id===this.selectedProcess.activityId);if(e){if(""===e.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===e.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===e.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=e.settings.formEditControls),e.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=e.settings.formSecureControls),t.settings.general.processNumberPrefix.indexOf("[")>-1){let e=JSON.parse(t.settings.general.processNumberPrefix);this.readonlyControls=[];let i=e.filter(t=>"formColumn"===t.key);i.length&&i.forEach(t=>{this.readonlyControls.push(t.value),this.formEditControls.indexOf(t.value)>-1&&this.formEditControls.splice(this.formEditControls.indexOf(t.value),1)})}if(e.settings.fileSettings){if(e.settings.fileSettings.fileCheckList.length){let t=e.settings.fileSettings.fileCheckList;t.forEach(t=>{t.uid=this.$nano.id(),t.attach=!1}),this.docWarning=e.settings.fileSettings.partial,this.checkList=t}t.rules.forEach(t=>{t.fromBlockId===this.selectedProcess.activityId&&this.actions.indexOf(t.proceedAction)<0&&(this.actions.push(t.proceedAction),this.processActionsAddOn.push({action:t.proceedAction,remarks:t.remarks||!1,passwordAccess:t.passwordAccess||!1,confirm:t.confirm||!1}))})}else this.checkList=[]}}else this.formEditAccess=!0;this.initiateProcess=!1,this.getModel(this.selectedProcess.processId);let t=location.origin;("https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t||"https://trial.ezofis.com"===t&&12===this.$store.state.session.tenantId)&&this.dataValidation(this.selectedProcess.processId,!1),"https://edmsuat.sobhaapps.com"===t&&55===this.workflow.id&&(this.formEditAccess=!0),this.loadProcessLinks()}this.workflow.wFormId&&(this.formId=String(this.workflow.wFormId),await this.getForm(t,this.workflow.wFormId))},async getFormDetails(){this.$store.commit("showLoadingBarPage");let t=this.selectedProcess.requestNo;const{error:e,payload:i}=await l["o"].getWorkflowData(this.selectedProcess.id,{filterBy:[{groupCondition:"",filters:[{criteria:"requestNo",condition:"IS_EQUALS_TO",value:t}]}],currentPage:1,itemsPerPage:10,mode:""}),{data:s}=i;this.$store.commit("hideLoadingBarPage");let a=s||[];if(a[0].value[0].formData){let t=Object.keys(a[0].value[0].formData.fields),e={};t.forEach(t=>{e[t]=this.validateTypeValue(a[0].value[0].formData.fields[t])}),this.requestFormData=a,this.formModel=a[0].value[0].formData.fields}e&&this.$alert.error(e)},async getRepository(){const{error:t,payload:e}=await l["p"].getRepository(this.workflow.repositoryId);t?this.$alert.error(t):(this.repositoryDetails=e,this.repositoryField=e.fields)},async getAttachments(t=0,e=0){this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=0)});let i=this.attachmentList.length;t||e||(t=this.workflow.id,e=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:s,payload:a}=await l["t"].getAttachments(t,e);if(this.$store.commit("hideLoadingBar"),s)this.$alert.error(s);else{if(a.length?(i!==a.length&&(this.attachmentList=a.map(t=>({...t,checked:!1}))),this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=this.attachmentList.length)})):this.attachmentList=[],this.checkList.length){this.checkList.forEach(t=>{let e=this.attachmentList.filter(e=>{let i=e.name.substr(0,e.name.lastIndexOf("."));if(t.name===i||t.name===i.split("_")[0])return e});e.length?t.attach=!0:t.attach=!1});let t=location.origin;("https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t||"https://trial.ezofis.com"===t&&12===this.$store.state.session.tenantId)&&(this.formCheckList=!0)}this.$emit("attachmentLength",this.attachmentList.length)}},async getForm(t){const{error:e,payload:i}=await l["g"].getForm(this.formId);if(e)this.$alert.error(e);else if(i){this.wform=i,this.form=JSON.parse(this.wform.formJson),t||"CARD"===this.form.settings.general.layout&&(this.form.settings.general.layout="TAB");let e=JSON.parse(this.wform.formJson);const s=[...e.panels,...e.secondaryPanels];if(!s.length)return;let a=[];for(const t of s)a.push(...t.fields);a.forEach(t=>{"DIVIDER"===t.type||"LABEL"===t.type||"PARAGRAPH"===t.type||!t.label&&"TABLE"!==t.type||"DISABLE"===t.settings.general.visibility||this.formFields.push({id:this.$nano.id(),label:t.label||t.type,value:t.id,type:t.type,settings:t.settings})}),this.sameFormFields=[],this.mainFormFields.forEach(t=>{let e=this.formFields.findIndex(e=>t.label===e.label);e>-1&&this.sameFormFields.push({id:this.$nano.id(),index:e,label:t.label,name:this.formFields[e].value,value:this.mainFormModel[t.value]})})}},signLink(t){return`https://appuat.ezofis.com/ezofisapi/api/workflow/signView/${this.$store.state.session.tenantId}/${this.workflow.id}/${t}`},itemLink(){let t=location.origin.replace("http://localhost:8080","http://52.172.32.88");return"inbox"===this.selectedNode||"common"===this.selectedNode||"payment"===this.selectedNode?"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}`:"https://trial.ezofis.com"===t?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}&action=all`:`${t}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&wId=${this.workflow.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.itemModel.name}&action=all`:"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}`:"https://trial.ezofis.com"===t?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}&action=download,print`:`${t}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.itemModel.repositoryId}&itemId=${this.itemModel.itemId}&type=2&filename=${this.itemModel.name}&action=download,print`},openFile(t){if(t.loading)this.$alert.info("Please wait to complete the uploading");else{this.selectedFile=t;let e=location.origin;"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?window.open(this.fileLink()):this.fileSheet=!0}},closeAttachmentsSheet(){this.attachmentSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},closeMetaDataEditModal(){this.showMetaDataEditModal=!1,this.$refs.attachments.value=null},async showLinks(t){if("ATTACHMENTS"===t)this.showAttachmentSheet=!0;else if("COMMENTS"===t){if(this.displayInternalPublic=!1,!this.portal){let t=JSON.parse(this.workflow.flowJson),e=t.blocks.find(t=>"START"===t.type);e&&e.settings.initiateBy.indexOf("PORTAL")>-1&&(this.displayInternalPublic=!0),this.fileNames=[],this.fileNames=this.attachmentList.filter(t=>{let e=t.name.split(".").pop().toUpperCase();return"pdf"===e.toLowerCase()}).map(t=>({id:this.$nano.id(),label:t.name,value:t.id}))}this.showCommentsSheet=!0}else"HISTORY"===t&&this.selectedProcess.processId?this.historyProcessId=this.selectedProcess.processId:"PRINT"===t?this.selectedProcess.formData?window.open(`https://appuat.ezofis.com/ezofisapi/api/form/generatePdfPrint/${this.$store.state.session.tenantId}/${this.workflow.id}/${this.selectedProcess.processId}/${this.formId}/${this.selectedProcess.formData.formEntryId}/1`):this.selectedProcess.itemData&&window.open(`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedProcess.itemData.repositoryId}/${this.selectedProcess.itemData.itemId}/2`):"TASK"===t?this.taskEntries.length?this.taskSheet=!0:this.addTask():"MAIL"===t?(this.getMailTransactions(),this.mailTransactionSheet=!0):"FORM_ENTRY_HISTORY"===t&&(this.showFormEntryHistoryModal=!0)},lastActionDuration(t){const e=t.transaction_createdAt instanceof Date?t.transaction_createdAt:new Date(t.transaction_createdAt),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(e.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const t=a/s[o];return i.format(Math.round(t),o)}},validateTypeValue(t){if(t)try{var e=JSON.parse(t);if("object"===typeof e)return e}catch(i){return t}return t},validateType(t){let e="";return this.panels&&this.panels.length&&this.panels.forEach(i=>{if(!i.fields.length)return;let s=i.fields.find(e=>e.id===t);s&&(e=s.type)}),e},validateValue(t){let e=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;return!e.test(t)},async getFileData(t,e){const{error:i,payload:s}=await l["p"].getFileData({repositoryId:t.repositoryId,itemId:t.id});i?this.$alert.error(i):s&&(t.fileData?this.fileData=t.fileData:this.fileData=s,"file"!==e&&(this.fileDetailsSheet=!0))},async sendCommentsToJira(t,e,i){if(this.$store.commit("showLoadingBar"),1===this.jiraCommentAction){var s;let e=null===(s=this.formFields.find(t=>"Resource ID"===t.label))||void 0===s?void 0:s.value;t=this.selectedProcess.formData.fields[e]+","+t}t=`${this.$store.state.session.firstName} ${this.$store.state.session.lastName}: ${t}`;let a={cloudIntegrationId:this.jiraAccounts[0].id,url:this.selectedProcess.jiraIssueInfo.self,data_onpremise:{body:t},issueId:e,ezCommentId:i};const{error:o,payload:r}=await l["j"].insertJiraIssueComments(a);if(this.$store.commit("hideLoadingBar"),o){this.$alert.error("error posting comments to jira");let t=JSON.parse(o);return this.errorMessage=t.errorMessages,void(this.errorModal=!0)}console.log(r),this.jiraCommentAction=1},async uploadAttachments(t,e){if(this.selectedProcess.processId){const s=t.target.files[0],a=new FormData;a.append("workflowId",this.workflow.id),a.append("repositoryId",this.workflow.repositoryId),a.append("processId",this.selectedProcess.processId),a.append("transactionId",this.selectedProcess.transactionId),this.formData=a,e?(a.append("fields",e),this.formData=e):a.append("fields",""),a.append("file",s);let o=t.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let t=this.checkList.filter(t=>t.uid===this.checkListRowIndex);a.append("filename",t[0].name+"."+r),o=t[0].name+"."+r}if(!Object(u["a"])(r))return void this.$alert.info("This file format is not supported");this.$store.commit("showLoadingBar");try{const t=await h()({url:"https://appuat.ezofis.com/ezofisapi/api/workflow/attachmentWithProcessId",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:e,data:i}=t;if(200!==e||!i)throw t;this.$alert.success("Document attached"),this.documentLoad=setInterval(()=>{this.getAttachments(),clearInterval(this.documentLoad)},15e3)}catch(i){this.$alert.error("Error uploading file"),console.error(i)}this.$store.commit("hideLoadingBar"),this.checkList.length&&this.checkList.forEach(t=>{t.uid!==this.checkListRowIndex||(t.attach=!0)}),t.target.value="",Object.keys(this.reuploadFile).length&&(await this.attachmentDelete(this.reuploadFile),this.reuploadFile={})}else{const s=t.target.files[0],a=new FormData;a.append("file",s),a.append("repositoryId",this.workflow.repositoryId),e&&(this.fileData=JSON.parse(e),a.append("fields",e));let o=t.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let t=this.checkList.filter(t=>t.uid===this.checkListRowIndex);a.append("filename",t[0].name+"."+r),o=t[0].name+"."+r}else a.append("filename",o);if(!Object(u["a"])(r))return void this.$alert.info("This file format is not supported");try{const i=await h()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:n,data:l}=i;if(200!==n)throw"Invalid response";let c=JSON.parse(l);this.$alert.success("Document attached");let d=this.repositoryField.reduce((t,e)=>t.level>e.level?t:e),m=this.fileData.find(t=>t.name===d.name),u=!1;"pdf"!==r.toLowerCase()&&(u=!0,this.documentLoadList.push(Number(c.fileId)),this.documentLoad=setInterval(()=>{let t=this.attachmentList.find(t=>this.documentLoadList.indexOf(t.id)>-1);t&&(this.documentLoadList.splice(this.documentLoadList.indexOf(t.id),1),t.loading=!1),0===this.documentLoadList.length&&clearInterval(this.documentLoad)},1e4)),this.attachmentList.push({id:Number(c.fileId),name:e?m.value+"."+r:o,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:s.size,initiate:!0,uid:this.checkListRowIndex,createdBy:this.$store.state.session.id,fileData:this.fileData,repositoryId:this.workflow.repositoryId,loading:u}),this.checkList.length&&this.checkList.forEach(t=>{t.uid!==this.checkListRowIndex||(t.attach=!0)}),t.target.value=""}catch(i){console.error(i),this.$alert.error("error attaching file")}}},async getMailTransactions(){this.mailTransactionList=[],this.tabs.find(t=>{"MAIL"===t.value&&(t.count=0)});let t={filterBy:[]};const{error:e,payload:i}=await l["t"].getMailTransactions(this.workflow.id,this.selectedProcess.processId,t);e?this.$alert.error(e):i.length&&(this.mailTransactionList=i,this.tabs.find(t=>{"MAIL"===t.value&&(t.count=this.mailTransactionList.length)}))},checkCommentsOption(){let t=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==t&&"https://ag-appsvc05.azurewebsites.net"!==t&&("https://app.ezofis.com"!==t&&"https://appuat.ezofis.com"!==t||2!==this.$store.state.session.tenantId||!(!Object.keys(this.selectedProcess).length||!this.selectedProcess.jiraIssueInfo.id))},async uploadWflowAttachments(t){if(this.fileUploadForControl=!1,"STATIC"===this.repositoryDetails.fieldsType){if(this.selectedUploadFile=t,this.customCheckUpload()){let e=this.formFields.find(t=>"Document No"===t.label);this.uploadFilename=e?this.workflowModel[e.value]+".pdf":t.target.files[0].name}else this.uploadFilename=t.target.files[0].name;this.showMetaDataEditModal=!0}else this.uploadAttachments(t)},customCheckUpload(){let t=location.origin;return"https://edmsuat.sobhaapps.com"===t&&(55===this.workflow.id||2092===this.workflow.id)&&0===this.attachmentList.length},checkTenant(){let t=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==t&&"https://ag-appsvc05.azurewebsites.net"!==t||(this.commentAction=2,!1)},isTenantGOTO(){let t=location.origin;return("https://app.ezofis.com"===t||"https://appuat.ezofis.com"===t)&&2===this.$store.state.session.tenantId},isTenantGOTOComments(){if(Object.keys(this.selectedProcess).length){let t=location.origin;if(("https://app.ezofis.com"===t||"https://appuat.ezofis.com"===t)&&2===this.$store.state.session.tenantId&&this.selectedProcess.jiraIssueInfo.id)return!0}return!1},toggleWidth(){this.formWidth="100vw"===this.formWidth?"50vw":"100vw"},clearAttach(){this.selectedFileForAttach=0,this.attachComment=!1},async getComments(t=0,e=0){this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=0)}),this.commentsList=[],t||e||(t=this.workflow.id,e=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:i,payload:s}=await l["t"].getProcessComments(t,e);this.$store.commit("hideLoadingBar"),i?this.$alert.error(i):(s.length&&(this.commentsList=s,this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=this.commentsList.length)})),this.$emit("commentsLength",this.commentsList.length))},async saveComment(){if(this.commentText)if(this.selectedProcess.processId){if("https://app.ezofis.com"!==origin&&"https://appuat.ezofis.com"!==origin||2!==this.$store.state.session.tenantId||!this.selectedProcess.jiraIssueInfo.id||2!==this.jiraCommentAction){const{error:t,payload:e}=await l["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:this.portal?1:this.commentAction,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(t)return void this.$alert.error(t);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,[e])}else{const{error:t,payload:e}=await l["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.commentText});if(t)return void this.$alert.error(t);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,e)}this.commentText="",this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.commentText=""},async saveAdvancedComment(){if(this.advancedCommentText){if(this.attachComment&&!this.selectedFileForAttach)return void this.$alert.warning("Select File To Attach");if(this.selectedProcess.processId){if("https://app.ezofis.com"!==origin&&"https://appuat.ezofis.com"!==origin||2!==this.$store.state.session.tenantId||!this.selectedProcess.jiraIssueInfo.id||2!==this.jiraCommentAction){const{error:t,payload:e}=await l["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:this.portal?1:this.commentAction,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(t)return void this.$alert.error(t);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,e)}else{this.$store.commit("showLoadingBar");const{error:t,payload:e}=await l["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,e)}this.advancedCommentText="",this.advancedCommentsSheet=!1,this.clearAttach(),this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.advancedCommentText="",this.advancedCommentsSheet=!1,this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=this.commentsList.length)});this.actionComments&&this.processRequest(!1,!1)}},fileType(t){if(t)return t.split(".").reverse()[0].slice(0,4)},fileSize(t){return Object(p["a"])(t)},fileLink(){let t=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let e=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let i=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(i=2);let s="";if(Object(u["d"])(e))s="https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===t?"https://trial.ezofis.com/docsviewer/index.html":t+"/PDFViewer/web/viewer.html";else{if("http://52.172.32.88"!==t)return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${i}`;s="http://52.172.32.88/DocsViewer/index.html"}return`${s}?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${i}`}{let i="";"inbox"!==this.selectedNode&&"common"!==this.selectedNode&&"payment"!==this.selectedNode||(i="&action=all");let s="";if(Object(u["d"])(e))"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?(i="",s="https://ag-appsvc04.azurewebsites.net/web/viewer.html"):s="https://trial.ezofis.com"!==t||Object(u["c"])(e)?t+"/PDFViewer/web/viewer.html":"https://trial.ezofis.com/docsviewer/index.html";else{if(Object(u["b"])(e)||"http://52.172.32.88"!==t)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;s="http://52.172.32.88/DocsViewer/index.html"}return`${s}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflow.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${i}`}}},closeTaskSheet(){this.taskSheet=!1},closeJiraIssueSheet(){this.issueName="",this.projectKey="",this.issueType="",this.issueDescription="",this.issueEpicValue="",this.issueAssignee="",this.issueDescriptionTable=!1,this.issueDescriptionFields=[],this.jiraIssueSheet=!1},loadProcessLinks(){this.getComments(),this.getAttachments(),this.getProcessSignature(),this.getMailTransactions()},async getProcessSignature(){this.signList=[];const{error:t,payload:e}=await l["t"].getProcessSignature(this.workflow.id,this.selectedProcess.processId);t?this.$alert.error(t):this.signList=e},async attachmentDelete(t){if(t.fileControl){let e=this.workflowModel[t.fieldId];if(e.length){let i=e.findIndex(e=>e.fileId===t.id);console.log(i),i>=0&&this.workflowModel[t.fieldId].splice(i,1);let s=this.formUploadFiles.findIndex(e=>e.fileId===t.id&&e.fileId===t.fileId);console.log(s),s>=0&&this.formUploadFiles.splice(i,1),t.control.length&&t.control.forEach(t=>{this.workflowModel[t]=""})}let i=this.attachmentList.findIndex(t=>t.fileControl);console.log(i),i>=0&&(this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=this.attachmentList.length-1)}),this.attachmentList.splice(i,1))}else if(t.initiate){const{error:e}=await l["r"].deleteUploadedFiles([t.id]);if(e)return void this.$alert.error(e);this.attachmentList=this.attachmentList.filter(e=>e.id!==t.id),this.checkList.forEach(e=>{e.uid===t.uid&&(e.attach=!1)})}else{const{error:e}=await l["p"].fileDelete(this.workflow.repositoryId,t.id);if(e)return void this.$alert.error(e);this.getAttachments()}},async saveProcessSignature(t){let e={signBinary:this.signImg.split(",")[1],fileType:"png"};const{error:i}=await l["t"].saveProcessSignature(this.workflow.id,t.processId,t.transactionId,e);i?this.$alert.error(i):this.signImg=""},async getAppConnection(){this.jiraConnect=!1;const{error:t,payload:e}=await l["j"].getJiraConnection({filterBy:[]});t?this.$alert.error(t):e.forEach(t=>{"jira"===t.cloudName&&(this.jiraConnect=!0,this.jiraAccounts.push(t))})},async createJiraIssue(){this.issueRef={};const t=await this.$refs.form.validate();if(!t)return;let e=[],i="",s="",a=0;this.groupKey.forEach(t=>{if(t.checked)return e=[],void(i=t.name)}),""===i&&(this.workflowRequestList.forEach(t=>{t.checked&&e.push(t.transactionId)}),this.issueDescriptionTable&&(s="||Action Taken (Mandatory)",this.issueDescriptionFields.forEach(t=>{s+="||"+t}),s+="||\n",this.workflowRequestList.forEach(t=>{t.checked&&(s+="|| ",this.issueDescriptionFields.forEach(e=>{var i;let o=null===(i=this.formFields.find(t=>t.label===e))||void 0===i?void 0:i.value;"Savings"===e?t.formData.fields[o]?(s+="||"+Number(t.formData.fields[o]).toFixed(2),a+=Number(t.formData.fields[o])):s+="|| ":t.formData.fields[o]?s+="||"+t.formData.fields[o]:s+="|| "}),s+="||\n")}),s+="Potential Savings: "+a.toFixed(2)+"\n"));let o={};o=this.jiraAccounts[0].email?{fields_cloud:{fields:{summary:this.issueName,project:{key:this.projectKey},issuetype:{name:this.issueType},description:{content:[{content:[{text:this.issueDescription+s,type:"text"}],type:"paragraph"}],type:"doc",version:1}}},cloudIntegrationId:this.jiraAccounts[0].id}:{fields_onpremise:{fields:{summary:this.issueName,project:{key:this.projectKey},issuetype:{name:this.issueType},description:this.issueDescription+s,customfield_14635:{value:"No"},customfield_15136:{value:"Maintenance"}}},cloudIntegrationId:this.jiraAccounts[0].id,workflowId:this.workflow.id,transactionId:e,mlPrediction:i,assignee:this.issueAssignee?{name:this.issueAssignee}:{},filterBy:this.filterBy},this.$store.commit("showLoadingBar");const{error:r,payload:n}=await l["j"].createJiraIssue(o);if(this.$store.commit("hideLoadingBar"),r){this.$alert.warning("error creating issue in jira");let t=JSON.parse(r);return console.log(t),this.errorMessage=t.errorMessages,void(this.errorModal=!0)}if(i)this.successModal=!0;else{if(!n)return void this.$alert.warning("error creating issue in jira");this.issueRef=JSON.parse(n),this.issueRef.self=this.getJIRALink(this.issueRef),this.$alert.success("Issue Created in JIRA"),this.jiraConfirmModal=!0}this.closeJiraIssueSheet()},async insertJiraIssueComment(){var t,e;let i="",s="";if(i=null===(t=this.formFields.find(t=>"Reference ID"===t.label))||void 0===t?void 0:t.value,s=null===(e=this.formFields.find(t=>"Remarks"===t.label))||void 0===e?void 0:e.value,this.workflowFormModel[i]&&this.workflowFormModel[s]){this.$store.commit("showLoadingBar");let t={};t=this.jiraAccounts[0].email?{cloudIntegrationId:this.jiraAccounts[0].id,url:this.workflowFormModel[i],data_cloud:{body:this.workflowFormModel[s]}}:{cloudIntegrationId:this.jiraAccounts[0].id,url:this.workflowFormModel[i],data_onpremise:{body:this.workflowFormModel[s]}};const{error:e,payload:a}=await l["j"].insertJiraIssueComments(t);if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);console.log(a)}},async getJiraUsers(){this.issueAssigneeUsers=[];const{error:t,payload:e}=await l["j"].getJiraUsers({cloudIntegrationId:this.jiraAccounts[0].id});t?this.$alert.error(t):e.length&&e.forEach(t=>{this.issueAssigneeUsers.push({id:t.key,label:t.displayName,value:t.name})})},validateRequest(t){this.saveAction=t,this.itemModel.itemId&&this.processRequest()},async processRequest(t=!0,e=!0){if(t){let t=location.origin;if(("https://app.ezofis.com"===t||"https://appuat.ezofis.com"===t)&&2===this.$store.state.session.tenantId&&"Assign"===this.saveAction&&this.internalForward.proceed)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0);if("Forward"===this.saveAction&&this.internalForward.proceed)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0)}if(e){let t=this.processActionsAddOn.find(t=>t.action===this.saveAction);if(t&&Object.keys(t).length){if(this.actionRemarks=t.remarks,this.actionPassword=t.passwordAccess,this.actionConfirm=t.confirm,this.actionPassword)return void(this.actionPasswordConfirm=!0);if(this.actionRemarks)return this.actionComments=!0,void(this.advancedCommentsSheet=!0);if(this.actionConfirm)return void(this.actionConfirmAlert=!0)}}let i={},s=location.origin;this.userReply&&this.saveAction.indexOf("Reply")>-1?this.saveAction="UserReply":this.toRequester&&"To Requester"===this.saveAction&&(this.saveAction="ToInitiator"),this.customReply&&this.saveAction.indexOf("Reply")>-1&&(this.saveAction="Reply",this.forwardUsers.push(this.selectedProcess.transaction_createdBy));let a=[];this.formFields.forEach(t=>{if("FILE_UPLOAD"===t.type&&this.workflowModel[t.value]){let e=[];this.workflowModel[t.value].forEach(t=>{t.fileId&&e.push(t.fileId)}),e.length&&a.push({jsonId:t.value,fileIds:e}),delete this.workflowFormModel[t.value]}}),this.formId?("https://app.ezofis.com"!==s&&"https://appuat.ezofis.com"!==s||2!==this.$store.state.session.tenantId||"Rollback"!==this.saveAction?"http://demo.ezofis.com"!==s&&"http://52.172.32.88"!==s||6===this.workflow.id&&this.forwardUsers.push(this.selectedProcess.transaction_createdBy):1===this.workflow.id&&this.forwardUsers.push(this.selectedProcess.transaction_createdBy),i={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction||"CustomVerify"===this.saveAction?"":this.saveAction,formData:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,fields:this.workflowFormModel,formUpload:a},userIds:this.forwardUsers,groupIds:this.forwardGroups}):this.itemModel&&(i={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction?"":this.saveAction,formData:{},userIds:this.forwardUsers,groupIds:this.forwardGroups}),this.saveAction="",this.workflowFormModel={},this.saveOnly||this.$store.commit("showLoadingBarSave");const{error:o}=await l["t"].processTransaction(i);this.saveOnly||this.$store.commit("hideLoadingBarSave"),o?this.$alert.error(o):(this.signImg&&await this.saveProcessSignature(this.selectedProcess),this.saveOnly?this.saveOnly=!1:(""===i.review?this.$alert.info(this.selectedProcess.requestNo+" data saved, awaiting your action to submit"):i.review.toLowerCase().indexOf("reject")>-1?this.$alert.danger(this.selectedProcess.requestNo+" Request Rejected Successfully"):this.$alert.success(this.selectedProcess.requestNo+" Request Processed"),this.forwardUsers=[],this.forwardGroups=[],this.customReply=!1,this.userReply=!1,this.toRequester=!1,this.closeProcessSheet()),this.fileControlDeleteFile.length&&(this.fileControlDeleteFile.forEach(t=>{this.fileControlDeletedFile(t)}),this.fileControlDeleteFile=[]))},checkRequiredDocument(){if("Save"===this.saveAction||"Force Close"===this.saveAction)this.proceedSubmission();else{if(this.documentRequired&&0===this.attachmentList.length)return this.$alert.warning("A minimum of one document is required for submission"),this.saveAction="",void(this.workflowFormModel={});let t=this.checkList.filter(t=>t.required&&!t.attach);t.length?this.docWarning?this.alertModal=!0:(this.$alert.warning("Mandatory documents required"),this.saveAction="",this.workflowFormModel={}):this.proceedSubmission()}},proceedSubmission(){this.alertModal=!1,this.initiateProcess?this.initiateRequest():this.processRequest()},closeAlertModal(){this.alertModal=!1,this.saveAction="",this.workflowFormModel={}},getJiraIssueInfo(t){if(t.jiraIssueInfo.id)return{"Ref# Id":t.jiraIssueInfo.id,Key:t.jiraIssueInfo.key,Link:t.jiraIssueInfo.self?this.getJIRALink(t.jiraIssueInfo):"",Assignee:t.jiraIssueInfo.assignee,"Issue Status":t.jiraIssueInfo.issueStatus}},async groupProcessRequest(){let t=[],e="";this.workflowRequestList.forEach(e=>{e.key===this.groupActionKey&&e.checked&&t.push(e.transactionId)}),this.groupKey.forEach(i=>{if(i.checked)return t=[],void(e=i.name)});let i={workflowId:this.workflow.id,transactionId:t,review:"Save"===this.saveAction?"":this.saveAction,fields:this.workflowFormModel,mlPrediction:e,comments:this.commentText,userIds:this.forwardUsers,groupIds:this.forwardGroups,filterBy:this.filterBy};const{error:s}=await l["t"].groupRequestAction(i);this.$store.commit("hideLoadingBar"),s?this.$alert.error(s):(await this.insertJiraIssueComment(),this.saveAction="",this.workflowFormModel={},this.forwardUsers=[],this.forwardGroups=[],this.$alert.success("Group Request Processed"),this.closeRequestActionModal(),this.$emit("refresh",this.workflow.id))},async initiateRequest(){let t=[];this.attachmentList.length&&this.attachmentList.forEach(e=>{t.push(e.id)});let e=[];this.formFields.forEach(t=>{if("FILE_UPLOAD"===t.type&&this.workflowModel[t.value]){let i=[];this.workflowModel[t.value].forEach(t=>{t.fileId&&i.push(t.fileId)}),i.length&&e.push({jsonId:t.value,fileIds:i}),delete this.workflowFormModel[t.value]}});let i={workflowId:this.workflow.id,review:"Save"===this.saveAction?"":this.saveAction,comments:this.commentsList,formData:{formId:this.formId,fields:this.workflowFormModel,formUpload:e},fileIds:t,task:this.taskEntryId,hasFormPDF:this.generatePDF,prefix:this.requestPrefix,mlPrediction:this.mlPrediction};this.$store.commit("showLoadingBarSave");const{error:s,payload:a}=await l["t"].processTransaction(i);this.$store.commit("hideLoadingBarSave"),this.saveAction="",this.workflowFormModel={},this.alertModal=!1,s?this.$alert.error(s):(this.signImg&&await this.saveProcessSignature(a),this.$alert.success(a.requestNo+" Request Initiated"),this.mainProcessId?this.addSubWorkflowProcess(a.processId):this.$emit("update:subProcessId",a.processId),this.closeProcessSheet())},saveMetaData(t){let e=[];if(this.repositoryField.forEach(i=>{e.push({name:i.name,value:t[i.name],type:i.dataType})}),e.forEach(t=>{let e=this.formFields.find(e=>Object(B["a"])(e.label)===Object(B["a"])(t.name));e&&t.value&&(this.workflowModel[e.value]=t.value)}),this.fileUploadForControl){this.metaDataModal=t;let i=this.fileUploadInput;this.uploadFilesFromForm(i.files,i.control,i.fieldId,JSON.stringify(e))}else this.uploadAttachments(this.selectedUploadFile,JSON.stringify(e))},attachTemplate(t){this.checkListRowIndex=t,this.$refs.attachments.click()},attachmentFilterCheckList(t){return this.attachmentList.filter(e=>e.name.substring(0,e.name.lastIndexOf("."))===t||e.name.substring(0,e.name.lastIndexOf(".")).split("_")[0]===t)},isCheckList(t){let e=this.checkList.filter(e=>e.name===t.substring(0,t.lastIndexOf("."))||e.name===t.substring(0,t.lastIndexOf(".")).split("_")[0]);return!e.length},showMailAttachments(t){this.mailAttachmentList=[];let e=t.attachmentJson.split(",");e.forEach(e=>{let i=e.split("\\").pop();this.mailAttachmentList.push({id:this.$nano.id(),mailId:t.id,name:i,createdAt:t.createdAt})}),this.mailAttachmentSheet=!0},openAttachmentFile(t){let e=`https://appuat.ezofis.com/ezofisapi/api/client/viewAttachment/${this.$store.state.session.tenantId}/${t.mailId}/${t.name}`;window.open(e,"_blank")},lastCommentDuration(t){const e=t.createdAt instanceof Date?t.createdAt:new Date(t.createdAt),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(e.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const t=a/s[o];return i.format(Math.round(t),o)}},async getTaskForm(){this.taskFormList=[],this.addTaskEnabled=!1;const{error:t,payload:e}=await l["g"].getForms({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"type",condition:"IS_EQUALS_TO",value:"Task",dataType:""}],groupCondition:""}],itemsPerPage:50,currentPage:1});if(t)return void this.$alert.error(t);const{data:i}=e;i.length&&i[0].value.length&&(this.addTaskEnabled=!0,i[0].value.forEach(t=>{this.taskFormList.push({id:t.id,label:t.name,value:t.id,repositoryId:t.repositoryId,formJson:t.formJson})}),this.taskFormList.length&&1===this.taskFormList.length&&(this.taskFormId=this.taskFormList[0].id,this.taskRepositoryId=this.taskFormList[0].repositoryId,this.addTaskForm=JSON.parse(this.taskFormList[0].formJson)))},async getTaskFormEntry(t,e){const{error:i,payload:s}=await l["g"].getFormEntry(t,e);if(i)this.$alert.error(i);else if(s.length){const t=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let e=[];for(const s of t)e.push(...s.fields);let i="",a="",o="",r="",n="",l="";e.forEach(t=>{switch(t.label){case"Task Name":i=s[0][t.id];break;case"Task Assign":a=s[0][t.id];break;case"Start Date":o=s[0][t.id];break;case"End Date":r=s[0][t.id];break;case"Priority":n=s[0][t.id];break;case"Task Status":l=s[0][t.id];break}}),this.taskEntries.push({id:s[0].itemid,name:i,assigned:a,startDate:o,endDate:r,priority:n,status:l})}},async getTaskList(){this.taskEntries=[];const{error:t,payload:e}=await l["t"].getTaskEntries(this.selectedWorkflow.id,this.selectedProcess.processId,{filterBy:[{filters:[{criteria:"createdBy",condition:"IS_EQUALS_TO",value:this.$store.state.session.id}]}]});if(t)this.$alert.error(t);else if(e.length){const t=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let i=[];for(const e of t)i.push(...e.fields);this.taskList=e,e.forEach(t=>{let e="",s="",a="",o="",r="",n="";i.forEach(i=>{switch(i.label){case"Task Name":e=t.entryInfo[0][i.id];break;case"Task Assign":s=t.entryInfo[0][i.id];break;case"Start Date":a=t.entryInfo[0][i.id];break;case"End Date":o=t.entryInfo[0][i.id];break;case"Priority":r=t.entryInfo[0][i.id];break;case"Task Status":n=t.entryInfo[0][i.id];break}}),this.taskEntries.push({id:t.entryInfo[0].itemid,name:e,assigned:s,startDate:a,endDate:o,priority:r,status:n})})}},async insertTaskEntry(t,e){const{error:i}=await l["t"].insertTaskEntry({workflowId:this.selectedWorkflow.id,processId:this.selectedProcess.processId,transactionId:this.selectedProcess.transactionId,wFormId:t,formEntryId:e});i?this.$alert.error(i):this.getTaskList()},addTaskEntry(t,e){this.selectedProcess.processId?this.insertTaskEntry(t,e):(this.taskEntryId.push({formId:t,formEntryId:e}),this.getTaskFormEntry(t,e))},addTask(){this.selectedTask={},this.taskMode="NEW",this.addTaskSheet=!0},viewTask(t){let e=this.taskList.filter(e=>e.formEntryId===t);e.length&&(this.selectedTask=e[0].entryInfo[0],this.selectedTask={id:e[0].formEntryId,...e[0].entryInfo[0]}),this.taskMode="EDIT",this.addTaskSheet=!0},removeTags(t){return t?t.replace(/(<([^>]+)>)/gi,""):""},tableValue(t){return t?JSON.parse(t):[]},async uploadFile(t){const e=t.target.files[0];if("text/csv"===e.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||"application/vnd.ms-excel"===e.type){const s=new FormData;s.append("formId",this.masterFormId),s.append("file",e);try{this.$store.commit("showLoadingBarSave");const t=await h()({url:"https://appuat.ezofis.com/ezofisapi/api/form/uploadMasterFile",method:"POST",data:s,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}});this.$store.commit("hideLoadingBarSave");const{status:e,data:i}=t;if(200!==e||!i)throw t;this.$alert.success("Data imported successfully")}catch(i){this.$alert.error("Error uploading file"),console.error(i)}this.dataImported=!0,t.target.value=""}else this.$alert.error("Please upload a csv/excel file")},async addSubWorkflowProcess(t){let e={mainWorkflowId:this.mainWorkflowId,subWorkflowId:this.workflowId,mainProcessId:this.mainProcessId,subProcessId:t,subProcessStatus:0,review:""};const{error:i}=await l["t"].addSubWorkflow(e);i?this.$alert.error(i):this.updateSubWorkflowProcess()},getModel(t){if(this.formModel={},this.itemModel={},console.log(this.selectedProcess.processId,t,this.selectedProcess.id,this.workflow.id),this.selectedProcess.processId==t&&this.selectedProcess.id==this.workflow.id)if(this.headerTitle=`${this.selectedProcess.requestNo} - ${this.selectedProcess.stageName}`,this.selectedProcess.formData){let t=Object.keys(this.selectedProcess.formData.fields),e={};t.forEach(t=>{e[t]=this.validateTypeValue(this.selectedProcess.formData.fields[t])}),this.formModel=e}else this.selectedProcess.itemData&&(this.itemModel=this.selectedProcess.itemData)},async dataValidation(t,e=!0){const{error:i,payload:s}=await l["d"].armgroupMLValidation({filterBy:[{filters:[{criteria:"processId",condition:"IS_EQUALS_TO",value:t}],groupCondition:""}],mode:"BROWSE"});i?this.$alert.error(i):s.length?(this.dataValidationValues=s,e&&(this.dataValidationModal=!0)):(this.dataValidationValues=[],e&&this.$alert.info("Data not found"))},async documentMerge(){let t=[];this.attachmentList.forEach(e=>{let i=e.name.split(".").pop();e.checked&&"pdf"===i.toLowerCase()&&t.push(e.id)});let e={ids:t};const{error:i}=await l["t"].documentMerge(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,this.workflow.repositoryId,e);i?this.$alert.error(i):this.$alert.success("Document merge process initiated")},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(t=>{t.checked&&this.selectedFileList.push({id:t.id,name:t.name})}),this.emailSharingSheet=!0},fileMenuAction(t,e){this.selectedFile=t,this.documentAction(e,!0)},fileSelectAll(){this.attachmentList=this.attachmentList.map(t=>({...t,checked:this.selectAll}))},documentAction(t,e){if("Email_Sharing"===t);else if("Print"===t){if(this.selectedFile.name)if(e){let t="";if(this.selectedFile.initiate){let e=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(e=2),t=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${e}/1`}else t=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(t,"_blank")}else{let t=this.selectedFile.name.split(".").pop();Object(u["d"])(t)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myAttachmentFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===t){let t="";if(this.selectedFile.initiate){let e=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(e=2),t=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${e}/2`}else t=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(t,"_blank")}},async filePrintSession(){const{error:t}=await l["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});t&&this.$alert.error(t)},async updateSubWorkflowProcess(){const{error:t,payload:e}=await l["q"].updateSubWorkflowProcess(this.mainWorkflowId,this.$store.state.session.tenantId,this.workflowId);t?this.$alert.error(t):console.log(e)},async uploadFilesFromForm(t,e,i,s){this.formUploadFiles=[];const a=new FormData;let o=[];if(e&&e.length&&e.forEach(t=>{let e=this.formFields.find(e=>e.value===t);e&&o.push(`${e.label}, ${e.type}`)}),t.length){for(let e of t)if(e.name&&!e.error){a.append("repositoryId",this.workflow.repositoryId),a.append("file",e),a.append("filename",e.name),o.length&&a.append("formFields",JSON.stringify(o)),s?a.append("fields",s):a.append("fields","");try{const t=await h()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"},onUploadProgress:function(t){let s=Math.round(100*t.loaded/t.total),a=this.workflowModel[i].findIndex(t=>t.name===e.name);a>=0&&(this.$set(this.workflowModel[i][a],"uploadedPercentage",0),this.workflowModel[i][a].uploadedPercentage=s)}.bind(this)}),{status:s,data:o}=t;if(200!==s)throw"Invalid response";e.createdAt=this.$day.newDateTime(),e.createdBy=this.$store.state.session.email;let r=JSON.parse(o);e.fileId=r.fileId,e.fieldId=i}catch(r){console.error(r),this.$alert.error("error attaching file")}}let n=Array.from(t);this.formUploadFiles=[];for(let t of n)if(t.name){const e=await Object(F["a"])(t);this.formUploadFiles.push({name:t.name,size:t.size,file:e,fileId:t.fileId,createdBy:t.createdBy,createdAt:t.createdAt,workflowId:this.selectedProcess.id,processId:this.selectedProcess.processId,fieldId:t.fieldId})}e.forEach(t=>{let e=this.readonlyControls.findIndex(e=>e===t);e>=0&&this.readonlyControls.splice(e,1)}),this.$store.commit("hideLoadingBarSave")}},mandatoryControlsList(t){this.mandatory=t},deletedFiles(t){this.fileControlDeleteFile.push(t)},async fileControlDeletedFile(t){this.$store.commit("showLoadingBar");let e=[];t.forEach(t=>{t.id&&e.push(t.id)});let i={ids:e,formInfo:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,jsonId:t[0].jsonId}};const{error:s}=await l["p"].fileControlDeleteFile(this.workflow.repositoryId,i);this.$store.commit("hideLoadingBar"),s&&this.$alert.error(s)},async checkFormValidation(){this.hasCheckFormValidate=!0},async getOCRResult(t,e,i){const s=new FormData;let a=[];if(e&&e.length){if(e.forEach(t=>{this.readonlyControls.push(t)}),e.forEach(t=>{let e=this.formFields.find(e=>e.value===t);e&&a.push(`${e.label}, ${e.type}`)}),t.length){for(let e of t){if(e.name&&!e.error){s.append("repositoryId",this.workflow.repositoryId),s.append("file",e),a.length&&s.append("formFields",JSON.stringify(a));try{const t=await h()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/uploadforStaticMetadata",method:"POST",data:s,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"},onUploadProgress:function(t){let s=Math.round(100*t.loaded/t.total),a=this.workflowModel[i].findIndex(t=>t.name===e.name);a>=0&&(this.$set(this.workflowModel[i][a],"uploadedPercentage",0),100!==s&&(this.workflowModel[i][a].uploadedPercentage=s))}.bind(this)}),{status:a,data:o}=t;if(200!==a)throw"Invalid response";let r=Object(P["a"])(o,this.$store.state.identity.key,this.$store.state.identity.iv),n=JSON.parse(r),l=JSON.parse(n),c=JSON.parse(l);Array.isArray(c)&&c.forEach(t=>{let e=this.formFields.find(e=>e.label===t.name);e&&t.value&&(this.workflowModel[e.value]=t.value)})}catch(o){console.error(o),this.$alert.error("error on get ocr result")}}this.workflowModel[i].findIndex(t=>t.name===e.name)}this.$store.commit("hideLoadingBarSave"),this.uploadFileForControl(t,e,i)}}else this.uploadFileForControl(t,e,i)},async uploadFileForControl(t,e,i){if(this.fileUploadInput={files:t,control:e,fieldId:i},"STATIC"===this.repositoryDetails.fieldsType){if(this.fileUploadForControl=!1,this.customCheckUpload()){let t=this.formFields.find(t=>"Document No"===t.label);t&&(this.uploadFilename=this.workflowModel[t.value]+".pdf")}this.fileUploadForControl=!0,this.showMetaDataEditModal=!0}else this.uploadFilesFromForm(t,e,i)},async showHistoryStepper(t,e){console.log("called");const{error:i,payload:s}=await l["t"].processHistory(e,t);i?this.$alert.error(i):s.length&&(this.stageLevel=[],this.currentStep=0,s.forEach(t=>{if(2!==t.actionStatus)if(0===this.stageLevel.filter(e=>e.id===t.activityId).length)this.stageLevel.push({id:t.activityId,label:t.stage,status:t.status}),((t.actionUser||t.subWorkflowHistory)&&t.status&&"Forward"!==t.status||null===t.actionUser&&!t.subWorkflowHistory)&&(this.currentStep+=1);else if(t.status)this.stageLevel.filter(e=>e.id===t.activityId&&e.status!==t.status).length?this.currentStep+=1:this.currentStep-=1;else{let e=this.stageLevel.findIndex(e=>e.id===t.activityId);e>-1&&(this.stageLevel.splice(e,this.stageLevel.length-e),this.stageLevel.push({id:t.activityId,label:t.stage,status:t.status}),t.actionUser&&t.status&&"Forward"!==t.status||null===t.actionUser?this.currentStep=e+1:this.currentStep=e)}}))},attachmentCount(t){this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=t)})},commentsCount(t){this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=t)})}}},E=q,V=(i("e98d"),i("5ab0"),i("2877")),R=i("58ea"),z=i("4e73"),j=i("b047"),U=i("cb32"),H=i("8169"),W=i("93dc"),J=i.n(W),G=Object(V["a"])(E,s,a,!1,null,"5b96b9ec",null);e["a"]=G.exports;J()(G,"components",{QCircularProgress:R["a"],QMenu:z["a"],QChip:j["a"],QAvatar:U["a"],QChatMessage:H["a"]})},4714:function(t,e,i){},4759:function(t,e,i){},"487e":function(t,e,i){"use strict";i("0b2c")},"48b9":function(t,e,i){},"4d38":function(t,e,i){},"4d5a":function(t,e,i){"use strict";var s=i("a026"),a=i("0967"),o=i("0831"),r=i("d882");const{passive:n}=r["f"];var l=s["default"].extend({name:"QScrollObserver",props:{debounce:[String,Number],horizontal:Boolean,scrollTarget:{default:void 0}},render:r["g"],data(){return{pos:0,dir:!0===this.horizontal?"right":"down",dirChanged:!1,dirChangePos:0}},watch:{scrollTarget(){this.__unconfigureScrollTarget(),this.__configureScrollTarget()},"$q.lang.rtl"(){this.__emit()}},methods:{getPosition(){return{position:this.pos,direction:this.dir,directionChanged:this.dirChanged,inflexionPosition:this.dirChangePos}},trigger(t){if(!0===t||0===this.debounce||"0"===this.debounce)this.__emit();else if(void 0===this.clearTimer){const[t,e]=this.debounce?[setTimeout(this.__emit,this.debounce),clearTimeout]:[requestAnimationFrame(this.__emit),cancelAnimationFrame];this.clearTimer=()=>{e(t),this.clearTimer=void 0}}},__emit(){void 0!==this.clearTimer&&this.clearTimer();const t=!0===this.horizontal?o["a"]:o["b"],e=Math.max(0,t(this.__scrollTarget)),i=e-this.pos,s=!0===this.horizontal?i<0?"left":"right":i<0?"up":"down";this.dirChanged=this.dir!==s,this.dirChanged&&(this.dir=s,this.dirChangePos=this.pos),this.pos=e,this.$emit("scroll",this.getPosition())},__configureScrollTarget(){this.__scrollTarget=Object(o["c"])(this.$el.parentNode,this.scrollTarget),this.__scrollTarget.addEventListener("scroll",this.trigger,n),this.trigger(!0)},__unconfigureScrollTarget(){void 0!==this.__scrollTarget&&(this.__scrollTarget.removeEventListener("scroll",this.trigger,n),this.__scrollTarget=void 0)}},mounted(){this.__configureScrollTarget()},beforeDestroy(){void 0!==this.clearTimer&&this.clearTimer(),this.__unconfigureScrollTarget()}}),c=i("3980"),d=i("87e8"),m=i("e277"),h=i("d54d");e["a"]=s["default"].extend({name:"QLayout",mixins:[d["a"]],provide(){return{layout:this}},props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:t=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(t.toLowerCase())}},data(){return{height:this.$q.screen.height,width:!0===this.container?0:this.$q.screen.width,containerHeight:0,scrollbarWidth:!0===a["f"]?0:Object(o["d"])(),header:{size:0,offset:0,space:!1},right:{size:300,offset:0,space:!1},footer:{size:0,offset:0,space:!1},left:{size:300,offset:0,space:!1},scroll:{position:0,direction:"down"}}},computed:{rows(){const t=this.view.toLowerCase().split(" ");return{top:t[0].split(""),middle:t[1].split(""),bottom:t[2].split("")}},style(){return!0===this.container?null:{minHeight:this.$q.screen.height+"px"}},targetStyle(){if(0!==this.scrollbarWidth)return{[!0===this.$q.lang.rtl?"left":"right"]:this.scrollbarWidth+"px"}},targetChildStyle(){if(0!==this.scrollbarWidth)return{[!0===this.$q.lang.rtl?"right":"left"]:0,[!0===this.$q.lang.rtl?"left":"right"]:`-${this.scrollbarWidth}px`,width:`calc(100% + ${this.scrollbarWidth}px)`}},totalWidth(){return this.width+this.scrollbarWidth},classes(){return"q-layout q-layout--"+(!0===this.container?"containerized":"standard")},scrollbarEvtAction(){return!0!==this.container&&this.scrollbarWidth>0?"add":"remove"}},watch:{scrollbarEvtAction:"__updateScrollEvent"},created(){this.instances={}},mounted(){"add"===this.scrollbarEvtAction&&this.__updateScrollEvent("add")},beforeDestroy(){"add"===this.scrollbarEvtAction&&this.__updateScrollEvent("remove")},render(t){const e=t("div",{class:this.classes,style:this.style,attrs:{tabindex:-1},on:{...this.qListeners}},Object(m["a"])([t(l,{on:Object(h["b"])(this,"scroll",{scroll:this.__onPageScroll})}),t(c["a"],{on:Object(h["b"])(this,"resizeOut",{resize:this.__onPageResize})})],this,"default"));return!0===this.container?t("div",{staticClass:"q-layout-container overflow-hidden"},[t(c["a"],{on:Object(h["b"])(this,"resizeIn",{resize:this.__onContainerResize})}),t("div",{staticClass:"absolute-full",style:this.targetStyle},[t("div",{staticClass:"scroll",style:this.targetChildStyle},[e])])]):e},methods:{__animate(){void 0!==this.timer?clearTimeout(this.timer):document.body.classList.add("q-body--layout-animate"),this.timer=setTimeout(()=>{document.body.classList.remove("q-body--layout-animate"),this.timer=void 0},150)},__onPageScroll(t){!0!==this.container&&!0===document.qScrollPrevented||(this.scroll=t),void 0!==this.qListeners.scroll&&this.$emit("scroll",t)},__onPageResize({height:t,width:e}){let i=!1;this.height!==t&&(i=!0,this.height=t,void 0!==this.qListeners["scroll-height"]&&this.$emit("scroll-height",t),this.__updateScrollbarWidth()),this.width!==e&&(i=!0,this.width=e),!0===i&&void 0!==this.qListeners.resize&&this.$emit("resize",{height:t,width:e})},__onContainerResize({height:t}){this.containerHeight!==t&&(this.containerHeight=t,this.__updateScrollbarWidth())},__updateScrollbarWidth(){if(!0===this.container){const t=this.height>this.containerHeight?Object(o["d"])():0;this.scrollbarWidth!==t&&(this.scrollbarWidth=t)}},__updateScrollEvent(t){void 0!==this.timerScrollbar&&"remove"===t&&(clearTimeout(this.timerScrollbar),this.__restoreScrollbar()),window[t+"EventListener"]("resize",this.__hideScrollbar)},__hideScrollbar(){if(void 0===this.timerScrollbar){const t=document.body;if(t.scrollHeight>this.$q.screen.height)return;t.classList.add("hide-scrollbar")}else clearTimeout(this.timerScrollbar);this.timerScrollbar=setTimeout(this.__restoreScrollbar,200)},__restoreScrollbar(){this.timerScrollbar=void 0,document.body.classList.remove("hide-scrollbar")}}})},"4ddc":function(t,e,i){},"4e64":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{style:t._style,attrs:{id:"pulse"}})},a=[],o=i("b263"),r={name:"Pulse",props:{color:{type:String,default:"secondary",validator:o["a"]}},computed:{_style(){return`background-color: var(--${this.color}); color: var(--${this.color})`}}},n=r,l=(i("e953"),i("2877")),c=Object(l["a"])(n,s,a,!1,null,"123d286d",null);e["a"]=c.exports},"4f21":function(t,e,i){},5042:function(t,e,i){},"50ff":function(t,e,i){},5132:function(t,e,i){"use strict";var s=i("2250"),a=i("4dc8");function o(t,e){e=Object(s["a"])(e,t);var i=0,o=e.length;while(null!=t&&i<o)t=t[Object(a["a"])(e[i++])];return i&&i==o?t:void 0}e["a"]=o},5439:function(t,e,i){"use strict";i("7f31")},"55ff":function(t,e,i){"use strict";i("9db8")},5960:function(t,e,i){"use strict";i("9a8d")},"5a6e":function(t,e,i){"use strict";(function(t){i("14d9"),i("caad");var s=i("4e64"),a=i("381e"),o=i("1b0d"),r=i("4bc4"),n=i("eff0"),l=i("dd90"),c=i("a7d2"),d=i("6a70"),m=i("bc3a"),h=i.n(m),u=i("1c54"),p=i("695e"),f=i("8bc3"),v=i("869e"),y=i("6df3"),b=i("9234"),g=i("fa1f"),w=i("cade"),C=i("be3f"),k=i("8505"),S=i("470f"),I=i("b0ba"),_=i("ec15"),T=i("bb36");e["a"]={name:"Notifications",components:{Pulse:s["a"],Sheet:a["a"],RenderForm:r["a"],SignatureField:n["a"],Modal:d["a"],Confirm:u["a"],TextBuilderField:p["a"],PasswordField:f["a"],CheckboxField:v["a"],TextAreaField:y["a"],SingleChoiceField:b["a"],FileIcon:g["a"],ListItem:w["a"],ExpandableSearch:C["a"],ProcessHistory:k["a"],SubWorkflowProcess:S["a"],FormEntryHistory:I["a"],Attachments:_["a"],Comments:T["a"]},data(){return{notificationSheet:!1,notifyData:[],notifyCopyData:[],iconColor:"secondary",workflowId:0,processId:0,workflow:{},workflowRequestList:[],formId:"",form:null,formFields:[],formModel:{},formEditAccess:!1,formEditControls:[],formVisibilityAccess:!0,formSecureControls:[],workflowFormModel:{},saveAction:"",attachmentList:[],attachmentSheet:!1,commentText:"",commentsList:[],commentsSheet:!1,selectedProcess:{},selectedFile:{},fileSheet:!1,checkList:[],rowIndex:null,hideFileSheet:!1,processSheet:!1,totalItems:0,itemsPerPage:10,currentPage:1,title:"NO DATA",tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0},{id:this.$nano.id(),label:"task",value:"TASK",icon:"eva-cube-outline",count:0},{id:this.$nano.id(),label:"Data Validation",value:"VALIDATION",icon:"mdi-file-compare",count:0},{id:this.$nano.id(),label:"Sub Process",value:"SUB_PROCESS",icon:"eva-link-2-outline",count:0},{id:this.$nano.id(),label:"Form Entry History",value:"FORM_ENTRY_HISTORY",icon:"mdi-file-document",count:0}],taskSheet:!1,headerTitle:"",taskFormId:0,taskRepositoryId:0,addTaskForm:{},addTaskSheet:!1,taskEntryId:[],taskEntries:[],taskEntryList:[],taskMode:"",filterBy:[],processActions:[],processActionsAddOn:[],advancedCommentsSheet:!1,commentActions:[{id:this.$nano.id(),label:"Internal",value:2},{id:this.$nano.id(),label:"Public",value:1}],commentAction:2,advancedCommentText:"",actionText:"",actionRemarks:!1,actionPassword:!1,actionPasswordConfirm:!1,actionUserPassword:"",isLoading:!1,internalForward:{proceed:!1,users:[],groups:[]},userSignature:!1,signImg:"",signList:[],actions:[],itemModel:{},checkListRowIndex:null,selectAll:!1,processForwardGroupAction:!1,processForwardModal:!1,forwardUsers:[],forwardGroups:[],errorMessage:"",alertModal:!1,errorModal:!1,documentActionList:[{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline"},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline"}],addTaskEnabled:!1,notifyLoad:null,alertNotification:!1,historyProcessId:0,hasWflowInitiator:!1,subWorkflowId:0,initiateSubWorkflowProcess:!1,subProcessSheet:!1,subProcessData:{},subTabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0}],subProcessLink:"",openSubProcessSheet:!1,subProcessTickets:[],subProcessId:0,workflowList:[],showFormEntryHistoryModal:!1,showAttachmentSheet:!1,wform:{},showCommentsSheet:!1}},computed:{panels(){return this.form?this.form.panels:[]},secondaryPanels(){return this.form?this.form.secondaryPanels:[]},formSettings(){return this.form?this.form.settings:{}},checkListTemplate(){return!!this.checkList.length&&this.checkList.filter(t=>t.template).length>0},selectedFileCount(){let t=this.attachmentList.filter(t=>t.checked).length;return t},_enableControls(){let t=[],e=[];return this.panels.forEach(i=>{if(i.fields.length){let s=i.fields.filter(t=>"SINGLE_SELECT"===t.type||"SINGLE_CHOICE"===t.type||"MULTIPLE_CHOICE"===t.type||"MULTI_SELECT"===t.type);s.length&&s.forEach(i=>{if(i.settings.validation.enableSettings&&i.settings.validation.enableSettings.length){let s=[];i.settings.validation.enableSettings.forEach(t=>{t.controls.length&&(s.push({value:t.value,childControls:t.controls}),t.controls.forEach(t=>{s.indexOf(t)<0&&e.push(t)}))}),s.length&&t.push({id:i.id,parentControls:s})}})}}),{listControls:e,controls:t}}},watch:{selectedProcess:{immediate:!0,handler(){this.selectedProcess.processId&&(this.attachmentList=[],this.getComments(),this.getAttachments(),this.getProcessSignature())}},workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&this.checkRequiredDocument()}},subWorkflowId(){if(this.subWorkflowId){let t=this.workflowList.find(t=>t.value==this.subWorkflowId);if(t){this.subWorkflowName="Initiate - "+t.label,this.hasWflowInitiator=!1;let e=t.flowJson,i=e.blocks.find(t=>"START"===t.type);if(i&&"MANUAL"===i.settings.initiateMode&&"DOCUMENT"!==t.initiatedBy&&((i.settings.users.indexOf(this.$store.state.session.id)>-1||i.settings.users.indexOf("0")>-1)&&(this.hasWflowInitiator=!0),i.settings.initiateBy.indexOf("DOMAIN_USER")>-1)){let t=this.$store.state.session.email.split("@").pop();i.settings.userDomains.indexOf(t)>-1&&(this.hasWflowInitiator=!0)}}else this.hasWflowInitiator=!1}}},created(){this.getNotifications();let t=location.origin;t.indexOf("http://localhost")>0&&(this.notifyLoad=setInterval(()=>{this.getNotifications(!0)},3e4))},methods:{checkTenant(){let t=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==t&&"https://ag-appsvc05.azurewebsites.net"!==t||(this.commentAction=2,!1)},isTenantArmgroup(){let t=location.origin;return"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t},checkTabAccess(t){return"TASK"===t?this.addTaskEnabled:"VALIDATION"===t?!!this.isTenantArmgroup():"FORM_ENTRY_HISTORY"!==t||!!this.formId},duration(t){const e=t instanceof Date?t:new Date(t),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(e.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const t=a/s[o];return i.format(Math.round(t),o)}},validateURL(t){let e=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;return e.test(t)},validateTypeValue(t){if(t)try{var e=JSON.parse(t);if("object"===typeof e)return e}catch(i){return t}return t},closeAttachmentsSheet(){this.attachmentSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},fileType(t){if(t)return t.split(".").reverse()[0].slice(0,4)},fileSize(t){return Object(c["a"])(t)},fileLink(){let t=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let e=this.selectedFile.name.split(".").pop();return this.selectedFile.initiate?Object(l["d"])(e)?"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:"https://trial.ezofis.com"===t?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:"https://app.ezofis.com"===t?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:`${t}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:"http://52.172.32.88"===t?`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=1`:`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/1`:Object(l["d"])(e)?"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}`:"https://trial.ezofis.com"!==t||Object(l["c"])(e)?"https://app.ezofis.com"===t?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}&action=download,print`:`${t}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}&action=download,print`:`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2&filename=${this.selectedFile.name}&action=download,print`:Object(l["b"])(e)||"http://52.172.32.88"!==t?`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`:`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&type=2`}},fileSelectAll(){this.attachmentList=this.attachmentList.map(t=>({...t,checked:this.selectAll}))},openFile(t){this.selectedFile=t;let e=location.origin;"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?window.open(this.fileLink()):this.fileSheet=!0},download(t){window.open(`https://appuat.ezofis.com/ezofisapi/api/workflow/viewChecklist?wId=${this.workflowId}&id=${t}`)},downloadAll(){this.checkList.forEach(t=>{t.id&&t.template&&window.open(`https://appuat.ezofis.com/ezofisapi/api/workflow/viewChecklist?wId=${this.workflowId}&id=${t.id}`)})},attachTemplate(t){this.rowIndex=t,this.$refs.attachments.click()},lastCommentDuration(t){const e=t.createdAt instanceof Date?t.createdAt:new Date(t.createdAt),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(e.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const t=a/s[o];return i.format(Math.round(t),o)}},checkDocument(){this.docWarning=!1,this.trackRequest||this.checkList.length&&this.checkList.forEach(t=>{t.required&&!t.attach&&(this.docWarning=!0)})},closeTaskSheet(){this.taskSheet=!1},closeProcessSheet(){this.processSheet=!1},openForm(t){if("WORKFLOW"===t.category){let e=JSON.parse(t.inputJson);this.workflowId=Number(e.workflowId),this.processId=Number(e.processId),this.filterBy=[{id:this.$nano.id(),filters:[{id:this.$nano.id(),criteria:"requestNo",condition:"IS_EQUALS_TO",value:t.title.split(": ")[1]}]}],this.getSubWorkflow(),this.getWorkflowData()}else"TASK"===t.category&&console.log(t)},openNotification(){this.alertNotification=!1,this.notifyLoad=setInterval(()=>{this.getNotifications(!0)},3e4),this.clearAllNotifications(2),this.getUserWorkflow(),this.notificationSheet=!0},getColor(t){return"Closed"===t||"High"===t?"red":"In Progress"===t||"Medium"===t?"warning":"Open"===t||"Low"===t?"secondary":"primary"},getLabel(t){let e="";return this.form&&this.form.panels.forEach(i=>{if(!i.fields.length)return;let s=i.fields.find(e=>e.id===t);s&&(e=s.label?s.label:s.type)}),e},async getNotifications(t=!1){let e={filterBy:[{filters:[{criteria:"createdBy",condition:"IS_EQUALS_TO",value:this.$store.state.session.id}]}],mode:"Browse"};t||this.$store.commit("showLoadingBar");const{error:i,payload:s}=await o["b"].getNotifications(e);if(t||this.$store.commit("hideLoadingBar"),i)return void this.$alert.error(i);let a=s.filter(t=>!1===t.readStatus);a.length&&(this.alertNotification=!0,clearInterval(this.notifyLoad)),this.notifyData=s,this.notifyCopyData=s},async clearAllNotifications(t=1){let e=this.$store.state.session.id;const{error:i}=await o["b"].clearAllNotifications(e,t);i?this.$alert.error(i):this.getNotifications()},async deleteNotification(t){let e={isDeleted:!0};const{error:i}=await o["b"].deleteNotification(t,e);i?this.$alert.error(i):this.getNotifications()},async getTaskForm(){this.taskFormList=[],this.addTaskEnabled=!1;const{error:t,payload:e}=await o["g"].getForms({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"type",condition:"IS_EQUALS_TO",value:"Task",dataType:""}],groupCondition:""}],itemsPerPage:50,currentPage:1});if(t)return void this.$alert.error(t);const{data:i}=e;i.length&&i[0].value.length&&(this.addTaskEnabled=!0,i[0].value.forEach(t=>{this.taskFormList.push({id:t.id,label:t.name,value:t.id,repositoryId:t.repositoryId,formJson:t.formJson})}),this.taskFormList.length&&1===this.taskFormList.length&&(this.taskFormId=this.taskFormList[0].id,this.taskRepositoryId=this.taskFormList[0].repositoryId,this.addTaskForm=JSON.parse(this.taskFormList[0].formJson)))},async getWorkflow(){this.checkList=[],this.$store.commit("showLoadingBar");const{error:t,payload:e}=await o["t"].getWorkflow(this.workflowId);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):(this.workflow=e,this.workflow.wFormId&&(this.formId=String(this.workflow.wFormId),await this.getForm()),this.getTaskForm())},async getWorkflowData(){this.$store.commit("showLoadingBar"),this.workflowRequestList=[],this.list=[];const{error:t,payload:e}=await o["o"].getWorkflowData(this.workflowId,{filterBy:this.filterBy,itemsPerPage:10,currentPage:1,mode:""});this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e.data.length&&(this.selectedProcess=e.data[0].value[0],await this.getWorkflow(),this.openProcess())},async getForm(){if(this.formFields=[],this.formId){this.$store.commit("showLoadingBar");const{error:t,payload:e}=await o["g"].getForm(this.formId);if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);let i=JSON.parse(e.formJson);this.wform=e,this.form=i;const s=[...i.panels,...i.secondaryPanels];if("CARD"===this.form.settings.general.layout&&(this.form.settings.general.layout="TAB"),!s.length)return;let a=[];for(const o of s)a.push(...o.fields);a.forEach(t=>{this.formFields.push({id:this.$nano.id(),label:t.label,value:t.id,dataType:"DATE"===t.type?t.type:"SHORT_TEXT"})})}},async openProcess(){if(this.formModel={},this.itemModel={},this.formEditAccess=!0,this.formEditControls=[],this.processActions=[],this.processActionsAddOn=[],this.headerTitle=`${this.selectedProcess.requestNo} - ${this.selectedProcess.stage}`,this.selectedProcess.formData){let t=Object.keys(this.selectedProcess.formData.fields),e={};t.forEach(t=>{e[t]=this.validateTypeValue(this.selectedProcess.formData.fields[t])}),this.formModel=e}else this.selectedProcessrocess.itemData&&(this.itemModel=t.itemData);if(this.selectedProcess.activityUserEmail===this.$store.state.session.email){let t=JSON.parse(this.workflow.flowJson);t.rules.forEach(t=>{t.fromBlockId===this.selectedProcess.activityId&&this.processActions.indexOf(t.proceedAction)<0&&(this.processActions.push(t.proceedAction),this.processActionsAddOn.push({action:t.proceedAction,remarks:t.remarks||!1,passwordAccess:t.passwordAccess||!1}))}),this.internalForward={proceed:!1,users:[],groups:[]},this.userSignature=!1,t.blocks.forEach(e=>{if(e.id===this.selectedProcess.activityId){if(e.settings.internalForward&&(this.processActions.push("Forward"),this.internalForward.proceed=!0,this.internalForward.users=[],this.internalForward.groups=[]),""===e.settings.formEditAccess?(this.formEditAccess=!0,this.formEditControls=[]):"FULL"===e.settings.formEditAccess?(this.formEditAccess=!1,this.formEditControls=[]):"PARTIAL"===e.settings.formEditAccess&&(this.formEditAccess=!1,this.formEditControls=e.settings.formEditControls),e.settings.formVisibilityAccess?(this.formVisibilityAccess=!0,this.formSecureControls=[]):(this.formVisibilityAccess=!1,this.formSecureControls=e.settings.formSecureControls),t.settings.general.processNumberPrefix.indexOf("[")>-1){let e=JSON.parse(t.settings.general.processNumberPrefix);this.readonlyControls=[];let i=e.filter(t=>"formColumn"===t.key);i.length&&i.forEach(t=>{this.readonlyControls.push(t.value),this.formEditControls.indexOf(t.value)>-1&&this.formEditControls.splice(this.formEditControls.indexOf(t.value),1)})}this.userSignature=e.settings.userSignature,e.settings.fileSettings&&e.settings.fileSettings.fileCheckList.length&&(this.checkList=e.settings.fileSettings.fileCheckList,this.checkList.forEach(t=>{t.uid=this.$nano.id(),t.attach=!1})),e.settings.workflowInitiator&&(this.subWorkflowId=e.settings.subWorkflowId)}}),this.selectedProcess.userType&&"SUPERUSER"===this.selectedProcess.userType&&this.processActions.push("Force Close")}"CARD"===this.form.settings.general.layout&&(this.form.settings.general.layout="TAB"),this.actions=this.processActions,this.processSheet=!0,this.getTaskList()},validateRequest(t){this.saveAction=t,this.itemModel.itemId&&this.processRequest()},checkRequiredDocument(){if("Save"===this.saveAction||"Force Close"===this.saveAction)this.proceedSubmission();else{let t=this.checkList.filter(t=>t.required&&!t.attach);t.length?this.docWarning?this.alertModal=!0:(this.$alert.warning("Mandatory documents required"),this.saveAction="",this.workflowFormModel={}):this.proceedSubmission()}},proceedSubmission(){this.alertModal=!1,this.processRequest()},closeAlertModal(){this.alertModal=!1,this.saveAction="",this.workflowFormModel={}},async processRequest(t=!0,e=!0){if(t&&"Forward"===this.saveAction&&this.internalForward.proceed)return this.processForwardGroupAction=!1,void(this.processForwardModal=!0);if(e){let t=this.processActionsAddOn.find(t=>t.action===this.saveAction);if(Object.keys(t).length){if(this.actionRemarks=t.remarks,this.actionPassword=t.passwordAccess,this.actionPassword)return void(this.actionPasswordConfirm=!0);if(this.actionRemarks)return this.actionComments=!0,void(this.advancedCommentsSheet=!0)}}let i={};this.formId?i={workflowId:this.workflowId,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction?"":this.saveAction,formData:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,fields:this.workflowFormModel},userIds:this.forwardUsers,groupIds:this.forwardGroups}:this.itemModel&&(i={workflowId:this.workflowId,transactionId:this.selectedProcess.transactionId,review:"Save"===this.saveAction?"":this.saveAction,formData:{},userIds:this.forwardUsers,groupIds:this.forwardGroups}),this.saveAction="",this.workflowFormModel={},this.$store.commit("showLoadingBarSave");const{error:s}=await o["t"].processTransaction(i);this.$store.commit("hideLoadingBarSave"),s?this.$alert.error(s):(this.signImg&&await this.saveProcessSignature(this.selectedProcess),""===i.review?this.$alert.info(this.selectedProcess.requestNo+" data saved, awaiting your action to submit"):i.review.toLowerCase().indexOf("reject")>-1?this.$alert.danger(this.selectedProcess.requestNo+" Request Rejected Successfully"):this.$alert.success(this.selectedProcess.requestNo+" Request Processed"),this.forwardUsers=[],this.forwardGroups=[],this.closeProcessSheet(),this.$emit("refresh",this.workflowId))},showLinks(t){"ATTACHMENTS"===t?this.showAttachmentSheet=!0:"COMMENTS"===t?this.showCommentsSheet=!0:"HISTORY"===t&&this.selectedProcess.processId?this.historyProcessId=this.selectedProcess.processId:"PRINT"===t?this.selectedProcess.formData?window.open(`https://appuat.ezofis.com/ezofisapi/api/form/generatePdfPrint/${this.$store.state.session.tenantId}/${this.workflowId}/${this.selectedProcess.processId}/${this.formId}/${this.selectedProcess.formData.formEntryId}/1`):this.selectedProcess.itemData&&window.open(`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedProcess.itemData.repositoryId}/${this.selectedProcess.itemData.itemId}/2`):"TASK"===t?this.taskEntries.length?this.taskSheet=!0:this.$alert.info("Task not found"):"SUB_PROCESS"===t?this.subProcessSheet=!0:"FORM_ENTRY_HISTORY"===t&&(this.showFormEntryHistoryModal=!0)},searchRow(t){this.notifyData=t?this.notifyCopyData.filter(e=>{for(let i in e)if(String(e[i]).toLowerCase().includes(t.toLowerCase()))return e}):this.notifyCopyData},attachmentCount(t){this.tabs.find(e=>{"ATTACHMENTS"===e.value&&(e.count=t)})},commentsCount(t){this.tabs.find(e=>{"COMMENTS"===e.value&&(e.count=t)})},async getComments(){this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=0)}),this.commentsList=[],this.$store.commit("showLoadingBar");const{error:t,payload:e}=await o["t"].getProcessComments(this.workflowId,this.selectedProcess.processId);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e.length&&(this.commentsList=e,this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=this.commentsList.length)}))},async saveComment(){if(this.commentText)if(this.selectedProcess.processId){this.$store.commit("showLoadingBar");const{error:t,payload:e}=await o["t"].insertProcessComment(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:this.commentAction});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,e),this.commentText="",this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=this.commentsList.length)}),this.commentText=""},async saveAdvancedComment(){if(this.advancedCommentText){if(this.selectedProcess.processId){this.$store.commit("showLoadingBar");const{error:t,payload:e}=await o["t"].insertProcessComment(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:this.commentAction});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,e),this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=this.commentsList.length)}),this.advancedCommentText="",this.advancedCommentsSheet=!1;this.actionComments&&this.processRequest(!1,!1)}},async sendCommentsToJira(t,e,i){this.$store.commit("showLoadingBar");let s={cloudIntegrationId:this.jiraAccounts[0].id,url:this.selectedProcess.jiraIssueInfo.self,data_onpremise:{body:t},issueId:e,ezCommentId:i};const{error:a,payload:r}=await o["j"].insertJiraIssueComments(s);if(this.$store.commit("hideLoadingBar"),a){this.$alert.error("error posting comments to jira");let t=JSON.parse(a);return this.errorMessage=t.errorMessages,void(this.errorModal=!0)}console.log(r)},async uploadAttachments(t){if(this.selectedProcess.processId){const i=t.target.files[0],s=new FormData;s.append("workflowId",this.workflowId),s.append("repositoryId",this.workflow.repositoryId),s.append("processId",this.selectedProcess.processId),s.append("transactionId",this.selectedProcess.transactionId),s.append("fields",""),s.append("file",i);let a=t.target.files[0].name;const o=a.split(".").pop();if(this.checkListRowIndex){let t=this.checkList.filter(t=>t.uid===this.checkListRowIndex);s.append("filename",t[0].name+"."+o),a=t[0].name+"."+o}if(!Object(l["a"])(o))return void this.$alert.info("This file format is not supported");this.$store.commit("showLoadingBar");try{const t=await h()({url:"https://appuat.ezofis.com/ezofisapi/api/workflow/attachmentWithProcessId",method:"POST",data:s,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:e,data:i}=t;if(200!==e||!i)throw t;this.$alert.success("Document attached")}catch(e){this.$alert.error("Error uploading file"),console.error(e)}this.$store.commit("hideLoadingBar"),this.checkList.length&&this.checkList.forEach(t=>{t.uid!==this.checkListRowIndex||(t.attach=!0)}),t.target.value="",this.attachmentLoad=setInterval(()=>this.getAttachments(),5e3)}else{const i=t.target.files[0],s=new FormData;s.append("file",i),s.append("repositoryId",this.workflow.repositoryId);let a=t.target.files[0].name;const o=a.split(".").pop();if(this.checkListRowIndex){let t=this.checkList.filter(t=>t.uid===this.checkListRowIndex);s.append("filename",t[0].name+"."+o),a=t[0].name+"."+o}if(!Object(l["a"])(o))return void this.$alert.info("This file format is not supported");try{const e=await h()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:s,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:o,data:r}=e;if(200!==o)throw"Invalid response";let n=JSON.parse(r);this.attachmentList.push({id:Number(n.fileId),name:a,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:i.size,initiate:!0,uid:this.checkListRowIndex}),this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=this.attachmentList.length)}),this.checkList.length&&this.checkList.forEach(t=>{t.uid!==this.checkListRowIndex||(t.attach=!0)}),t.target.value=""}catch(e){console.error(e),this.$alert.error("error attaching file")}}},async getAttachments(){if(this.checkList=[],this.selectedProcess.processId){let t=JSON.parse(this.workflow.flowJson),e=t.blocks.find(t=>t.id===this.selectedProcess.activityId);e&&e.settings.fileSettings&&e.settings.fileSettings.fileCheckList.length&&(this.checkList=e.settings.fileSettings.fileCheckList,this.checkList.forEach(t=>{t.uid=this.$nano.id(),t.attach=!1}),this.checkDocument()),this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=0)});let i=this.attachmentList.length;this.$store.commit("showLoadingBar");const{error:s,payload:a}=await o["t"].getAttachments(this.workflowId,this.selectedProcess.processId);if(this.$store.commit("hideLoadingBar"),s)return void this.$alert.error(s);a.length?(i!==a.length&&(this.attachmentList=a.map(t=>({...t,checked:!1}))),this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=this.attachmentList.length)})):this.attachmentList=[],this.checkList.length&&this.checkList.forEach(t=>{let e=this.attachmentList.filter(e=>{let i=e.name.substr(0,e.name.lastIndexOf("."));if(t.name===i)return e});e.length?t.attach=!0:t.attach=!1})}},async saveProcessSignature(t){let e={signBinary:this.signImg.split(",")[1],fileType:"png"};const{error:i}=await o["t"].saveProcessSignature(this.workflowId,t.processId,t.transactionId,e);i?this.$alert.error(i):this.signImg=""},async getProcessSignature(){this.signList=[];const{error:t,payload:e}=await o["t"].getProcessSignature(this.workflowId,this.processId);t?this.$alert.error(t):this.signList=e},signLink(t){return`https://appuat.ezofis.com/ezofisapi/api/workflow/signView/${this.$store.state.session.tenantId}/${this.workflowId}/${t}`},async validatePassword(){const t=await this.$refs.passwordForm.validate();if(!t)return;this.isLoading=!0;const{error:e}=await o["a"].validatePassword({password:this.actionUserPassword});if(this.isLoading=!1,e)return console.log(e),void this.$alert.warning(e);this.actionUserPassword="",this.actionPasswordConfirm=!1,this.actionRemarks?(this.actionComments=!0,this.advancedCommentsSheet=!0):(this.actionRemarks=!1,this.actionPassword=!1,this.processRequest(!1,!1))},async getTaskList(){this.taskEntries=[],this.$store.commit("showLoadingBar");const{error:t,payload:e}=await o["t"].getTaskEntries(this.workflowId,this.selectedProcess.processId,{filterBy:[{filters:[{criteria:"createdBy",condition:"IS_EQUALS_TO",value:this.$store.state.session.id}]}]});if(this.$store.commit("hideLoadingBar"),t)this.$alert.error(t);else if(e.length){const t=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let i=[];for(const e of t)i.push(...e.fields);this.taskList=e,e.forEach(t=>{let e="",s="",a="",o="",r="",n="";i.forEach(i=>{switch(i.label){case"Task Name":e=t.entryInfo[0][i.id];break;case"Task Assign":s=t.entryInfo[0][i.id];break;case"Start Date":a=t.entryInfo[0][i.id];break;case"End Date":o=t.entryInfo[0][i.id];break;case"Priority":r=t.entryInfo[0][i.id];break;case"Task Status":n=t.entryInfo[0][i.id];break}}),this.taskEntries.push({id:t.entryInfo[0].itemid,name:e,assigned:s,startDate:a,endDate:o,priority:r,status:n})})}},documentAction(t){if("Email_Sharing"===t.id);else if("Print"===t.id){if(this.selectedFile.name){let t=this.selectedFile.name.split(".").pop();Object(l["d"])(t)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===t.id){let t="";t=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`,window.open(t,"_blank")}},async filePrintSession(){const{error:t}=await o["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});t&&this.$alert.error(t)},async getSubWorkflow(){this.tabs.find(t=>{"SUB_PROCESS"===t.value&&(t.count=0)});const{error:t,payload:e}=await o["t"].getSubWorkflow(this.workflowId,this.processId);t?this.$alert.error(t):(console.log(e,"payload"),e.length&&this.getSubProcessDetails(e[0].subWorkflowId,e))},async getSubProcessDetails(t,e){this.subProcessTickets=[];const{error:i,payload:s}=await o["o"].getWorkflowData(t,{filterBy:[],itemsPerPage:0,currentPage:0,mode:""});if(i)this.$alert.error(i);else if(console.log(s),s.meta.totalItems){console.log(s);let t=[];e.forEach(e=>{let i=s.data[0].value.find(t=>t.processId===Number(e.subProcessId));console.log(i),i&&t.push(i)}),t.length&&(this.subProcessTickets=t),this.tabs.find(e=>{"SUB_PROCESS"===e.value&&(e.count=t.length)})}},subProcessShowLinks(t,e){this.subProcessLink="",this.subProcessData=e,this.subProcessLink=t},openSubProcess(t){this.subProcessData=t,this.openSubProcessSheet=!0},closeSubProcess(){this.openSubProcessSheet=!1,this.subProcessData={},this.initiateSubWorkflowProcess=!1},initiateSubWorkflow(){this.initiateSubWorkflowProcess=!0},async getUserWorkflow(){this.workflowList=[],this.$store.commit("showLoadingBarSave");const{error:t,payload:e}=await o["t"].getUserWorkflow();t?this.$alert.error(t):(e.length&&e.forEach(t=>{this.workflowList.push({id:this.$nano.id(),label:t.name,value:t.id,initiatedBy:t.initiatedBy,formId:t.wFormId,repositoryId:t.repositoryId,flowJson:JSON.parse(t.flowJson)})}),this.$store.commit("hideLoadingBarSave"))},closeSubProcessSheet(){this.subProcessSheet=!1}}}}).call(this,i("4362"))},"5a75":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("q-layout",{attrs:{view:"hHh LpR fFf"}},[e("Toolbar"),e("Drawer"),e("q-page-container",[e("BaseScrollbar",{staticClass:"q-pa-md relative-position",attrs:{height:"calc(100vh - 56px)"}},[t._t("default")],2)],1)],1)},a=[],o=function(){var t=this,e=t._self._c;return e("q-header",{attrs:{id:"toolbar"}},[e("q-toolbar",{staticClass:"no-padding",staticStyle:{height:"56px"}},[e("Legend"),t.customerLogo?[e("CustomerLogo",{staticClass:"q-ml-md q-mr-xl"})]:[e("Logo",{staticClass:"q-ml-md q-mr-xl"})],e("GlobalSearch"),e("q-space"),t.customerLogo&&t.ezofisLogo?[e("Logo",{staticClass:"q-ml-md q-mr-md"})]:t._e(),e("ThemeSwitcher",{staticClass:"q-mr-sm"}),e("Notifications",{staticClass:"q-mr-sm"}),e("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-power-outline","no-border":""},on:{click:t.logOut}}),e("Account",{staticClass:"q-mr-md"})],2)],1)},r=[],n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative-position cursor-pointer",on:{click:t.homePage}},[t._m(0),e("div",{attrs:{id:"legend-tail"}})])},l=[function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"legend"}},[e("img",{attrs:{src:"https://demo.ezofis.com/Logo/mark-white.png"}})])}],c=(i("14d9"),{name:"Legend",methods:{homePage(){var t;if(this.$store.state.session.profile&&(this.$store.state.profileMenus.length&&null!==(t=this.$store.state.profileMenus.find(t=>t.workspaces))&&void 0!==t&&t.Menu["Overview"]))return void("repositories-browse"!==this.$route.name&&this.$router.push({name:"repositories-browse"}));"workflows-overview"!==this.$route.name&&this.$router.push({name:"workflows-overview"})}}}),d=c,m=(i("b2f9"),i("2877")),h=Object(m["a"])(d,n,l,!1,null,"7e06f69f",null),u=h.exports,p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cursor-pointer",attrs:{id:"logo"},on:{click:t.homePage}},[e("img",{attrs:{src:t._logo,height:t.logoHeight}})])},f=[],v=i("2f62"),y={name:"Logo",computed:{...Object(v["c"])(["darkTheme"]),_logo(){return this.darkTheme?"https://demo.ezofis.com/Logo/name-dark.png":"https://demo.ezofis.com/Logo/name-light.png"},logoHeight(){return"24px"}},methods:{homePage(){var t;if(this.$store.state.session.profile&&(this.$store.state.profileMenus.length&&null!==(t=this.$store.state.profileMenus.find(t=>t.workspaces))&&void 0!==t&&t.Menu["Overview"]))return void("repositories-browse"!==this.$route.name&&this.$router.push({name:"repositories-browse"}));"workflows-overview"!==this.$route.name&&this.$router.push({name:"workflows-overview"})}}},b=y,g=(i("ea0d"),Object(m["a"])(b,p,f,!1,null,"ce8b9a52",null)),w=g.exports,C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cursor-pointer",attrs:{id:"logo"},on:{click:t.homePage}},[e("img",{attrs:{src:t._logo,height:t.logoHeight}})])},k=[],S={name:"Logo",computed:{...Object(v["c"])(["darkTheme"]),_logo(){let t=location.origin;return"https://edmsuat.sobhaapps.com"===t||"https://edms.sobhaapps.com"===t?i("3846"):"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?i("651a"):"http://172.16.1.118"===t||"http://localhost:8080"===t?i("1d87"):i("bcdf")(`./name-${this.darkTheme?"dark":"light"}.png`)},logoHeight(){let t=location.origin;return"https://edmsuat.sobhaapps.com"===t||"https://edms.sobhaapps.com"===t?"28px":"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?"42px":"http://172.16.1.118"===t?"38px":"24px"}},methods:{homePage(){var t;if(this.$store.state.session.profile&&(this.$store.state.profileMenus.length&&null!==(t=this.$store.state.profileMenus.find(t=>t.workspaces))&&void 0!==t&&t.Menu["Overview"]))return void("repositories-browse"!==this.$route.name&&this.$router.push({name:"repositories-browse"}));"workflows-overview"!==this.$route.name&&this.$router.push({name:"workflows-overview"})}}},I=S,_=(i("75a4"),Object(m["a"])(I,C,k,!1,null,"7d62c8eb",null)),T=_.exports,$=function(){var t=this,e=t._self._c;return e("div",{ref:"search",attrs:{id:"global-search"}},[e("BaseIcon",{attrs:{name:"eva-search"}}),e("div",{staticClass:"label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"searchQuery",staticClass:"q-px-xs",attrs:{type:"text",placeholder:"Search..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),e("q-space"),t._e()],1),e("q-menu",{staticClass:"shadow-3",attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right","no-parent-event":"",fit:""},model:{value:t.showSearchOptions,callback:function(e){t.showSearchOptions=e},expression:"showSearchOptions"}},[e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:"calc(80vh - 273px)",width:"600px"}},[e("div",{attrs:{id:"search-menu"}},[e("table",[e("tbody",[e("tr",[e("td",{staticClass:"label"},[t._v("Type")]),e("td",{staticClass:"value"},[e("SelectField",{attrs:{options:t.typeList},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1)]),t.type?["Folder"===t.type||"Workspace"===t.type?e("tr",[e("td",{staticClass:"label"},[t._v("Workspace")]),e("td",{staticClass:"value"},[e("SelectField",{attrs:{options:t.workspaceList},model:{value:t.workspace,callback:function(e){t.workspace=e},expression:"workspace"}})],1)]):t._e(),"Folder"===t.type?e("tr",[e("td",{staticClass:"label"},[t._v("Folder")]),e("td",{staticClass:"value"},[e("SelectField",{attrs:{options:t.folderList},model:{value:t.folder,callback:function(e){t.folder=e},expression:"folder"}})],1)]):t._e(),"Task"===t.type?e("tr",[e("td",{staticClass:"label"},[t._v("Task")]),e("td",{staticClass:"value"},[e("SelectField",{attrs:{options:t.taskList},model:{value:t.task,callback:function(e){t.task=e},expression:"task"}})],1)]):t._e(),"Form"===t.type?e("tr",[e("td",{staticClass:"label"},[t._v("Form")]),e("td",{staticClass:"value"},[e("SelectField",{attrs:{options:t.formList},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}})],1)]):t._e(),"Workflow"===t.type?e("tr",[e("td",{staticClass:"label"},[t._v("Workflow")]),e("td",{staticClass:"value"},[e("SelectField",{attrs:{options:t.workflowList},model:{value:t.workflow,callback:function(e){t.workflow=e},expression:"workflow"}})],1)]):t._e(),"User"===t.type?e("tr",[e("td",{staticClass:"label"},[t._v("User")]),e("td",{staticClass:"value"},[e("SelectField",{attrs:{options:t.userList},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1)]):t._e(),"Group"===t.type?e("tr",[e("td",{staticClass:"label"},[t._v("Group")]),e("td",{staticClass:"value"},[e("SelectField",{attrs:{options:t.groupList},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}})],1)]):t._e(),t._e()]:t._e(),t._e()],2)])])]),e("div",{staticClass:"row items-center footer q-pa-sm"},[e("div",{staticClass:"col-auto"},[e("div",{staticClass:"row items-center date-filter"},[e("div",{staticClass:"col-auto",staticStyle:{width:"160px"}},[e("DateField",{attrs:{"hide-border":!0,placeholder:"From Date"},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1),e("div",{staticClass:"col-auto q-mx-sm"},[e("BaseIcon",{attrs:{name:"eva-arrow-forward-outline"}})],1),e("div",{staticClass:"col-auto",staticStyle:{width:"160px"}},[e("DateField",{attrs:{"hide-border":!0,placeholder:"To Date"},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1)])]),e("q-space"),e("div",{staticClass:"col-auto footer1 q-ml-sm"},[e("div",{staticClass:"row items-center"},[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"reset"},on:{click:t.reset}}),e("BaseButton",{attrs:{label:"search more"},on:{click:t.searchFiles}})],1)])],1)],1),e("q-menu",{staticClass:"shadow-3",attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right","no-parent-event":"",fit:"","no-focus":"","no-refocus":""},model:{value:t.showSearchMenu,callback:function(e){t.showSearchMenu=e},expression:"showSearchMenu"}},[e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:"calc(80vh - 273px)",width:"600px"}},[e("div",{attrs:{id:"search-menu"}},[e("div",{staticClass:"row items-center chip-menu q-pb-sm",staticStyle:{"border-bottom":"1px solid var(--divider-color)"}},[t._l(t.typeList,(function(i){return[i.isVisible?e("div",{key:i.id,staticClass:"chip",class:{"condition-chip":i.isSelectMenu},on:{click:function(t){i.isSelectMenu=!i.isSelectMenu}}},[i.isSelectMenu?e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-checkmark-outline"}}):t._e(),e("div",[t._v(t._s(i.label))])],1):t._e()]})),e("div",{staticClass:"chip",on:{click:t.showFullTypeList}},[e("div",[t._v(" "+t._s(t.showAllButtonText)+" "),e("BaseIcon",{class:{"rotate-180":t.isShowAll},attrs:{name:"mdi-menu-down"}})],1)])],2),e("div",{staticClass:"row items-center q-py-md",staticStyle:{"border-bottom":"1px solid var(--divider-color)"}},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-search"}}),t._v(" "+t._s(t.search)+" ")],1),t.isLoadingActive?e("BaseLoadingBarSheet",{staticStyle:{position:"absolute !important","z-index":"9999"}}):t._e(),t.searchResult.length?[t._l(t.searchResult,(function(i,s){return e("div",{key:s,staticClass:"row items-center q-py-sm cursor-pointer",staticStyle:{"border-bottom":"1px solid var(--divider-color)"},on:{click:function(e){return t.goto(i)}}},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-md",attrs:{name:t.getMenuIcon(i.menu)}})],1),e("div",{staticClass:"col"},[e("div",{staticClass:"search-title"},[t._v(" "+t._s(i.searchName)+" ")]),e("div",{staticClass:"subtitle"},[t._v(" "+t._s(i.description)+" ")])]),e("div",{staticClass:"col-auto"},[t._v(t._s(i.date))])])})),e("BaseSeparator"),e("div",{staticClass:"row items-center q-pa-sm"},[e("div",{staticClass:"col subtitle"},[t._v(t._s(t.totalItems)+" results found")]),t.totalItems>=10?e("div",{staticClass:"show-all",on:{click:t.searchFiles}},[t._v(" "+t._s(t.loadMore?"view less":"view all")+" ")]):t._e()])]:[e("div",{staticClass:"row items-center q-py-md",staticStyle:{"border-bottom":"1px solid var(--divider-color)"}},[t._v(" No recent items match your search ")])]],2)]),e("div",{staticClass:"row items-center footer q-pa-sm"},[e("div",{staticClass:"col-auto"},[e("div",{staticClass:"row items-center date-filter"},[e("div",{staticClass:"col-auto",staticStyle:{width:"160px"}},[e("DateField",{attrs:{"hide-border":!0,placeholder:"From Date"},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1),e("div",{staticClass:"col-auto q-mx-sm"},[e("BaseIcon",{attrs:{name:"eva-arrow-forward-outline"}})],1),e("div",{staticClass:"col-auto",staticStyle:{width:"160px"}},[e("DateField",{attrs:{"hide-border":!0,placeholder:"To Date"},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1)])]),e("q-space"),e("div",{staticClass:"col-auto footer1 q-ml-sm"},[e("div",{staticClass:"row items-center"},[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"reset"},on:{click:t.reset}}),e("BaseButton",{attrs:{label:"search more"},on:{click:t.searchFiles}})],1)])],1)],1),e("FileSheet",{attrs:{file:t.selectFile,"repository-field":t.repositoryField,options:{}},on:{"show-files":function(e){t.isFileSheetVisible=!0}},model:{value:t.isFileSheetVisible,callback:function(e){t.isFileSheetVisible=e},expression:"isFileSheetVisible"}}),e("RequestProcessSheet",{attrs:{"workflow-request-list":t.workflowTicketList,"process-id":t.processId,workflow:t.workflows,"workflow-id":t.workflowId,"form-id":t.formId,form:t.forms,"enable-controls":t._enableControls}})],1)},x=[],A=i("12b8"),L=i("b3d1"),F=i("53c1"),P=i("7104"),B=i("1b0d"),D=i("3fc6"),M=i("4360"),N={name:"GlobalSearch",components:{SelectField:A["a"],TextField:L["a"],DateField:F["a"],FileSheet:P["a"],RequestProcessSheet:D["a"]},data(){return{search:"",type:"",isShowAll:!1,typeList:[{id:this.$nano.id(),label:"Document",value:"Documents",isSelectMenu:!1,isVisible:!0,default:!0},{id:this.$nano.id(),label:"Content",value:"content",isSelectMenu:!0,isVisible:!0,default:!0},{id:this.$nano.id(),label:"Request No",value:"Request No",isSelectMenu:!1,isVisible:!0,default:!0},{id:this.$nano.id(),label:"Workspace",value:"Workspace",isSelectMenu:!1,isVisible:!1,default:!1},{id:this.$nano.id(),label:"Folder",value:"Folders",isSelectMenu:!1,isVisible:!1,default:!1},{id:this.$nano.id(),label:"Form",value:"Form",isSelectMenu:!1,isVisible:!1,default:!1},{id:this.$nano.id(),label:"Workflow",value:"WorkFlow",isSelectMenu:!1,isVisible:!1,default:!1},{id:this.$nano.id(),label:"User",value:"User",isSelectMenu:!1,isVisible:!1,default:!1},{id:this.$nano.id(),label:"Group",value:"Group",isSelectMenu:!1,isVisible:!1,default:!1},{id:this.$nano.id(),label:"Menu",value:"Menu",isSelectMenu:!1,isVisible:!1,default:!1}],words:"",owner:"",itemName:"",location:location,date:"",workflow:"",folder:"",workspace:"",workspaceList:[],folderList:[],groupList:[],group:[],taskList:[],formList:[],form:"",task:"",workflowList:[],userList:[],user:"",isExpanded:!1,fromDate:"",toDate:"",showSearchOptions:!1,showSearchMenu:!1,isSelectMenu:!1,searchResult:[],selectFile:{},isFileSheetVisible:!1,repositoryField:[],loadMore:!1,totalItems:0,searchInput:{},workflowTicketList:[],selectedProcess:{},processId:0,workflows:{},workflowId:0,formId:0,forms:{},isLoadingActive:!1,showAllButtonText:"More"}},computed:{panels(){return this.form?this.form.panels:[]},_enableControls(){let t=[],e=[];return this.panels.forEach(i=>{if(i.fields.length){let s=i.fields.filter(t=>"SINGLE_SELECT"===t.type||"SINGLE_CHOICE"===t.type||"MULTIPLE_CHOICE"===t.type||"MULTI_SELECT"===t.type);s.length&&s.forEach(i=>{if(i.settings.validation.enableSettings&&i.settings.validation.enableSettings.length){let s=[];i.settings.validation.enableSettings.forEach(t=>{t.controls.length&&(s.push({value:t.value,childControls:t.controls}),t.controls.forEach(t=>{s.indexOf(t)<0&&e.push(t)}))}),s.length&&t.push({id:i.id,parentControls:s})}})}}),{listControls:e,controls:t}}},watch:{workspace(){this.workspace&&this.getRepositories()},type(){this.workspace="",this.workflow="",this.user="",this.group="",this.task="",this.form="",this.folder="",this.date="","Workspace"===this.type||"Folder"===this.type?this.getWorkspaces():"Group"===this.type?this.getGroups():"Form"===this.type?this.getForms():"Task"===this.type?this.getTasks():"Workflow"===this.type?this.getWorkflows():"User"===this.type&&this.getUsers()},search(){this.search?this.search.length>=2&&(this.showSearchMenu=!0,this.getGlobalSearch()):this.showSearchMenu=!1},typeList:{deep:!0,handler(){let t=this.typeList.filter(t=>t.isSelectMenu);console.log(t);let e=[];t.forEach(t=>{e.push(t.value)}),this.getGlobalSearch(e.length?e:[""])}}},created(){},methods:{showFullTypeList(){this.isShowAll=!this.isShowAll,this.showAllButtonText=this.isShowAll?"Less":"More",this.typeList.forEach(t=>{t.isVisible=!!this.isShowAll||t.default})},async getWorkspaces(){const{error:t,payload:e}=await B["u"].getWorkspaceList();this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e&&(this.workspaceList=e.map(t=>({id:t.id,label:t.value,value:t.value})))},async getRepositories(){if(this.workspace){this.folderList=[];let t=this.workspaceList.find(t=>t.value===this.workspace)["id"];const{error:e,payload:i}=await B["p"].getRepositoryList("workspaceId",t);if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);if(!i.length)return;this.folderList=i.map(t=>({id:this.$nano.id(),label:t.value,value:t.value}))}},async getGroups(){const{error:t,payload:e}=await B["i"].getGroupList();this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e&&(this.groupList=e.map(t=>({id:this.$nano.id(),label:t.value,value:t.value})))},async getForms(){const{error:t,payload:e}=await B["g"].getFormList();this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e&&(this.formList=e.map(t=>({id:this.$nano.id(),label:t.value,value:t.value})))},async getWorkflows(){const{error:t,payload:e}=await B["t"].getWorkflowList();this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e&&(this.workflowList=e.map(t=>({id:this.$nano.id(),label:t.value,value:t.value})))},async getUsers(){const{error:t,payload:e}=await B["s"].getUserList();this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e&&(this.userList=e.map(t=>({id:this.$nano.id(),label:t.value,value:t.value})))},async getTasks(){const{error:t,payload:e}=await B["g"].getFormEntries(19,{mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[],itemsPerPage:100,currentPage:1});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);const{data:i}=e;console.log(i),this.taskList=i||[],i.length&&i[0].value.length},searchFiles(){let t="";"Workspace"===this.type?t=this.workspace:"Form"===this.type?t=this.form:"Folder"===this.type?t=this.folder:"Task"===this.type?t=this.task:"Workflow"===this.type?t=this.workflow:"User"===this.type?t=this.user:"Group"===this.type&&(t=this.group),this.showSearchOptions?this.$router.replace({name:"search",query:{type:this.type,name:t}}):(this.searchInput.fromDate=this.fromDate,this.searchInput.toDate=this.toDate,"search"===this.$route.name?(this.$route.params.searchInput=this.searchInput,M["a"].commit("setSearchInput",this.searchInput)):this.$router.replace({name:"search",params:{searchInput:this.searchInput}})),this.showSearchMenu=!1},async getGlobalSearch(t){let e=this.typeList.filter(t=>t.isSelectMenu),i=[];e.forEach(t=>{i.push(t.value)});let s=[];s=t||(e.length?i:[""]);let a={SearchValue:this.search,type:s,itemsPerPage:10,currentPage:1,fromDate:this.fromDate,toDate:this.toDate,userId:this.$store.state.session.id};this.searchInput=a,this.isLoadingActive=!0;const{error:o,payload:r}=await B["h"].globalSearch(a);if(this.isLoadingActive=!1,o)return void this.$alert.error(o);console.log(r);let n=r;this.totalItems=r.meta.totalItems,n.data&&(console.log(n.data),n.data.length?(this.searchResult=[],n.data.forEach(t=>{this.searchResult.push({menu:t.type,searchName:"Documents"===t.type?t.ifileName:t.name,idJson:t.id,description:t.description?t.description:t.type,requestNo:t.requestNo,date:t.modifiedDateandtime?this.$day.format(t.modifiedDateandtime):this.$day.format(t.dateandtime)})})):this.searchResult=[])},getMenuIcon(t){switch(t){case"Folders":return"eva-archive-outline";case"WorkFlow":return"o_account_tree";case"Task":return"eva-cube-outline";case"Portal":return"eva-globe-outline";case"Form":return"mdi-text-box-outline";case"Settings":return"eva-settings-2-outline";case"Report":return"eva-pie-chart-outline";case"Documents":return"mdi-file-document-outline";case"Menu":return"mdi-menu";case"Content":return"mdi-file-document-outline";case"Request No":return"o_account_tree";default:return"o_dashboard"}},goto(t){console.log(t),t.idJson.itemId&&"Request No"!==t.menu?(this.getRepositoryField(t.idJson.repositoryId),this.getFile(t.idJson.repositoryId,t.idJson.itemId)):t.idJson.workflwId&&"Request No"===t.menu?this.getWorkflowData(t.idJson.workflowId,t.idJson.processId):"Folders"===t.menu?this.$router.replace({name:"repositories-browse",query:{workspaceId:t.idJson.workspaceId,repositoryId:t.idJson.repositoryId}}):"WorkFlow"===t.menu?this.$router.replace({name:"workflow-builder",params:{id:String(t.idJson.workflowId)}}):"Menu"===t.menu&&this.$router.replace({name:t.searchName})},async getFile(t,e){let i={repositoryId:t,parentNodeId:0,sortBy:{criteria:"",order:"ASC"},groupBy:"",filterBy:[{filters:[{id:this.$nano.id(),criteria:"itemid",condition:"IS_EQUALS_TO",value:e,dataType:"SHORT_TEXT"}],groupCondition:""}],currentPage:1,itemsPerPage:100,mode:"BROWSE",level:1};const{error:s,payload:a}=await B["p"].getEntities(i);if(this.$store.commit("hideLoadingBar"),s)this.$alert.error(s);else if(console.log(a),a.data[0].value.length){let t=a.data[0].value;console.log(t);let i=t.find(t=>t.id===Number(e));console.log(i),this.selectFile=i,this.isFileSheetVisible=!0}},async getRepositoryField(t){const{error:e,payload:i}=await B["p"].getRepositoryField({criteria:"repositoryId",value:t});e?this.$alert.error(e):this.repositoryField=i},async getWorkflowData(t,e){this.workflowTicketList=[];const{error:i,payload:s}=await B["o"].getWorkflowData(t,{filterBy:[],itemsPerPage:100,currentPage:1,mode:""});this.$store.commit("hideLoadingBar"),i?this.$alert.error(i):(s.data.forEach(t=>{t.value.forEach(t=>{this.workflowTicketList.push({...t})})}),console.log(this.workflowTicketList),this.selectedProcess=this.workflowTicketList.find(t=>t.processId===Number(e)),await this.getWorkflow(t,e))},async getWorkflow(t,e){this.workflowId=t;const{error:i,payload:s}=await B["t"].getWorkflow(t);this.$store.commit("hideLoadingBar"),i?this.$alert.error(i):(console.log(s),console.log(s.wFormId),this.workflows=s,this.formId=String(s.wFormId),await this.getForm(e))},async getForm(t){if(this.formId){const{error:t,payload:e}=await B["g"].getForm(this.formId);if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);let i=JSON.parse(e.formJson);this.forms=i}this.processId=Number(t)},reset(){this.search="",this.fromDate="",this.toDate=""}}},O=N,q=(i("2d9d"),i("2c91")),E=i("4e73"),V=i("93dc"),R=i.n(V),z=Object(m["a"])(O,$,x,!1,null,"48781ddd",null),j=z.exports;R()(z,"components",{QSpace:q["a"],QMenu:E["a"]});var U=i("fd26"),H=function(){var t=this,e=t._self._c;return e("div",[e("BaseActionButton",{attrs:{"is-flat":"",icon:"mdi-bell-outline","no-border":""},on:{click:t.openNotification}},[t.alertNotification?e("Pulse",{staticClass:"pulse"}):t._e()],1),e("Sheet",{attrs:{width:"40vw"},on:{input:function(e){t.notificationSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Notifications ")]},proxy:!0},{key:"actions",fn:function(){return[e("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:t.searchRow}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.getNotifications()}}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"clear all",expression:"'clear all'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-notification-clear-all",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.clearAllNotifications()}}})]},proxy:!0}]),model:{value:t.notificationSheet,callback:function(e){t.notificationSheet=e},expression:"notificationSheet"}},[e("div",{staticClass:"notificationData",attrs:{id:"content-wrapper"}},[t.notifyData.length?t._l(t.notifyData,(function(i){return e("div",{key:i.id,staticClass:"notificationContent",class:!1===i.readStatus?"unread":""},[e("div",{staticClass:"entry",on:{click:function(e){return t.openForm(i)}}},[e("div",{staticClass:"header"},[t._v(t._s(i.title))]),e("div",{staticClass:"content"},[e("div",{staticClass:"changes-meta"},[e("div",{staticClass:"ellipsis"},[t._v(t._s(i.createdByEmail))]),e("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),e("div",{staticClass:"ellipsis"},[t._v(t._s(t.$day.format(i.createdAt)))]),e("div",{staticClass:"action"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-trash-can-outline",color:"red","is-flat":"",size:"20px"},on:{click:function(e){return t.deleteNotification(i.id)}}})],1)],1),e("div",{staticClass:"changes-meta"},["COMPLETED"==i.status||"SUCCESS"==i.status?[e("div",{staticClass:"text-green"},[t._v(t._s(i.status))])]:"PROCESSING"==i.status?[e("div",{staticClass:"text-orange"},[t._v(t._s(i.status))])]:"FAILED"==i.status?[e("div",{staticClass:"text-red"},[t._v(t._s(i.status))])]:[e("div",{staticClass:"text-secondary"},[t._v(t._s(i.status))])],e("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),t.validateURL(i.remarks)?[e("a",{staticClass:"ellipsis",attrs:{href:i.remarks,target:"_blank"}},[t._v(t._s(i.remarks))])]:[e("span",{staticClass:"font-semibold"},[t._v(t._s(i.remarks))])]],2),e("div",{staticClass:"changes-meta"},[e("div",{staticClass:"action"},[t._v(t._s(t.duration(i.createdAt)))])])])])])})):e("div",{staticClass:"no-history"},[t._v("No data found")])],2)]),e("Sheet",{attrs:{width:"100vw","has-footer":"","no-padding":""},on:{input:function(e){t.processSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.headerTitle)+" ")]},proxy:!0},{key:"actions",fn:function(){return[t.hasWflowInitiator?e("BaseButton",{staticClass:"q-mr-sm",attrs:{label:t.subWorkflowName,color:"secondary"},on:{click:t.initiateSubWorkflow}}):t._e()]},proxy:!0},{key:"footer",fn:function(){return[t.actions.length?e("div",{staticClass:"footer row"},[e("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Save",color:"secondary"},on:{click:function(e){return t.validateRequest("Save")}}}),t._l(t.actions,(function(i){return[e("BaseButton","Approve"===i||"Complete"===i||"Rightsize"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"positive"},on:{click:function(e){return t.validateRequest(i)}}}:"Reject"===i||"Terminate"===i||"Force Close"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"red"},on:{click:function(e){return t.validateRequest(i)}}}:"Forward"===i||"Reply"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"orange"},on:{click:function(e){return t.validateRequest(i)}}}:{key:i,staticClass:"q-ml-md",attrs:{label:i},on:{click:function(e){return t.validateRequest(i)}}})]}))],2):t._e()]},proxy:!0}]),model:{value:t.processSheet,callback:function(e){t.processSheet=e},expression:"processSheet"}},[e("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[t.formId?e("div",{staticClass:"col",attrs:{id:"form-view"}},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 145px)"}},[t.formId?e("RenderForm",{attrs:{"form-id":t.formId,panels:t.panels,"secondary-panels":t.secondaryPanels,"form-settings":t.formSettings,"form-model":t.formModel,"save-action":t.saveAction,"workflow-form-model":t.workflowFormModel,"is-readonly":t.formEditAccess,"form-edit-controls":t.formEditControls,"form-visibility-access":t.formVisibilityAccess,"form-secure-controls":t.formSecureControls,"enable-controls":t._enableControls},on:{"update:saveAction":function(e){t.saveAction=e},"update:save-action":function(e){t.saveAction=e},"update:workflowFormModel":function(e){t.workflowFormModel=e},"update:workflow-form-model":function(e){t.workflowFormModel=e}}}):t._e(),t.signList.length?e("div",{staticClass:"q-pa-md",attrs:{id:"approvalSignature"}},[e("div",{staticClass:"title q-mb-sm"},[t._v("Approval Signature")]),e("BaseSeparator",{staticClass:"q-my-sm"}),e("div",{staticClass:"row"},[t._l(t.signList,(function(i){return[e("div",{key:i.id,staticClass:"col-3 q-mb-sm"},[e("img",{staticClass:"imgCenter col",attrs:{src:t.signLink(i.id)}}),e("div",{staticClass:"text row"},[e("span",{staticClass:"col-12 text-bold"},[t._v(t._s(i.stage))]),e("span",{staticClass:"col-12"},[t._v(t._s(i.createdByEmail))]),e("span",{staticClass:"col-12"},[t._v(t._s(t.$day.format(i.createdAt)))])])])]}))],2)],1):t._e(),t.userSignature?e("SignatureField",{staticClass:"q-pa-md",attrs:{label:"Signature"},model:{value:t.signImg,callback:function(e){t.signImg=e},expression:"signImg"}}):t._e()],1)],1):t._e(),t.itemModel.itemId?e("div",{staticClass:"col"},[e("div",{staticClass:"fileFrame"},[e("div",{staticClass:"file-list"},[e("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:t.itemLink(),frameborder:"0"}})])])]):t._e(),e("div",{staticClass:"col-auto q-mr-sm leftBorder"},[t._l(t.tabs,(function(i){return[t.checkTabAccess(i.value)?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary"},on:{click:function(e){return t.showLinks(i.value)}}},[i.count?e("span",{staticClass:"badge"},[t._v(t._s(i.count)+" ")]):t._e()]):t._e()]}))],2)])]),e("Sheet",{attrs:{width:"30vw","sub-actions":!!t.selectedProcess.processId,upload:!0},on:{input:t.closeAttachmentsSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){},proxy:!0},{key:"upload",fn:function(){return[e("div",{staticClass:"hint",on:{click:function(e){t.rowIndex=null,t.$refs.attachments.click()}}},[e("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),e("div",{staticClass:"title text-blue"},[t._v("UPLOAD FILES")]),e("div",{staticClass:"description"},[t._v("Click here to choose files and upload")])],1)]},proxy:!0},{key:"subActions",fn:function(){return[t.selectedProcess.processId&&t.attachmentList.length?[e("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:t.fileSelectAll},model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}}),t._v(" Select All ")]:t._e(),(t.selectedProcess.processId&&t.selectedFileCount,t._e()),(t.selectedProcess.processId&&t.selectedFileCount,t._e())]},proxy:!0}]),model:{value:t.attachmentSheet,callback:function(e){t.attachmentSheet=e},expression:"attachmentSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 250px)"}},[e("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:t.uploadAttachments}}),t._l(t.checkList,(function(i){return[i.name?[i.attach?t._e():e("div",{key:i.uid,staticClass:"checkList"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),e("div",{staticClass:"col q-ml-sm"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t._v(" "+t._s(i.name)+" ")]),i.required?e("div",{staticClass:"col-12 q-mt-sm"},[e("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[t._v(" Required ")])],1):t._e()])]),e("div",{staticClass:"col-auto"},[e("div",{staticClass:"col-12",on:{click:function(e){return t.attachTemplate(i.uid)}}},[e("q-chip",{staticClass:"chips primary-hover medium",attrs:{outline:"",color:"primary"}},[e("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-upload-outline",color:"primary","text-color":"white"}}),t._v(" Upload ")],1)],1),i.template?e("div",{staticClass:"col-12",on:{click:function(e){return t.download(i.id)}}},[e("q-chip",{staticClass:"chips secondary-hover medium",attrs:{outline:"",color:"secondary"}},[e("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-download-outline",color:"secondary","text-color":"white"}}),t._v(" Download ")],1)],1):t._e()])])])]:t._e()]})),t._l(t.attachmentList,(function(i){return[e("div",{key:i.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[t.selectedProcess.processId?e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:i.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(t){i.checked=!i.checked}}})],1):t._e(),i.formJsonId?e("div",{staticClass:"col-auto"},[e("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:t.getLabel(i.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):t._e(),e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(i.name)}})],1),e("div",{staticClass:"col ellipsis",on:{click:function(e){return t.openFile(i)}}},[t._v(" "+t._s(i.name)+" ")]),e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.getFileData(i)}}})],1),e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.attachmentDelete(i)}}})],1)]),e("div",{staticClass:"meta"},[e("div",[t._v(t._s(t.$day.format(i.createdAt)))]),i.createdBy?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.createdByEmail))])]:t._e(),i.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.fileSize(i.size)))])]:t._e()],2)])]}))],2)],1)]),e("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"30"},on:{input:t.closeCommentsSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments ")]},proxy:!0}]),model:{value:t.commentsSheet,callback:function(e){t.commentsSheet=e},expression:"commentsSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:t.isTenantArmgroup()?"calc(100vh - 190px)":"calc(100vh - 150px)"}},[t._l(t.commentsList,(function(i,s){return[e("q-chat-message",{key:s,staticClass:"q-ma-sm",attrs:{name:i.createdBy===t.$store.state.session.id?"me":i.createdByEmail||i.externalCommentsby,text:[i.comments],"text-html":"",sent:i.createdBy===t.$store.state.session.id,stamp:t.lastCommentDuration(i),"bg-color":i.createdBy===t.$store.state.session.id?"primary-1":"secondary-1"}})]}))],2)],1),e("div",{staticClass:"col q-pa-sm borderTop"},[e("div",{staticClass:"row"},[t.isTenantArmgroup()?e("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:t.commentActions,"options-per-line":2},model:{value:t.commentAction,callback:function(e){t.commentAction=e},expression:"commentAction"}}):t._e()],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}})],1),e("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:t.saveComment}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(e){t.advancedCommentsSheet=!0}}})],1)])])]),e("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(e){t.fileSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"attachmentFileHeader"},[t.selectedFile.formJsonId?[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:t.getLabel(t.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:t._e(),e("div",{staticClass:"avatar q-ml-sm"},[e("FileIcon",{attrs:{"mime-type":t.fileType(t.selectedFile.name)}})],1),e("div",{staticClass:"q-ml-md"},[e("div",{staticClass:"filename"},[t._v(" "+t._s(t.selectedFile.name)+" ")]),e("div",{staticClass:"meta"},[e("div",[t._v("Archived At: "+t._s(t.$day.format(t.selectedFile.createdAt)))]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v("Archived By: "+t._s(t.selectedFile.createdByEmail))]),t.selectedFile.size?e("div",[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t._v(" File Size: "+t._s(t.fileSize(t.selectedFile.size))+" ")],1):t._e()],1)])],2)]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[e("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},t._l(t.documentActionList,(function(i){return e("ListItem",{key:i.id,attrs:{icon:i.icon,label:i.label},on:{click:function(e){return t.documentAction(i)}}})})),1)],1)],1)]},proxy:!0}]),model:{value:t.fileSheet,callback:function(e){t.fileSheet=e},expression:"fileSheet"}},[e("div",{staticClass:"attachmentFileFrame"},[e("div",{staticClass:"file-list"},[e("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:t.fileLink(),frameborder:"0"}})])])]),e("Sheet",{attrs:{width:"30vw"},on:{input:t.closeTaskSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Tasks ")]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Add Task",expression:"'Add Task'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-plus",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.$emit("addTask")}}})]},proxy:!0}]),model:{value:t.taskSheet,callback:function(e){t.taskSheet=e},expression:"taskSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[t._l(t.taskEntries,(function(i){return[e("div",{key:i.id,staticClass:"taskEntries"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto q-mr-md",staticStyle:{"margin-top":"3px"},on:{click:function(e){return t.$emit("viewTask",i.id)}}},[t._v(" "+t._s(i.name)+" ")]),e("q-chip",{attrs:{size:"10px",color:t.getColor(i.priority),"text-color":"white"}},[t._v(" "+t._s(i.priority)+" ")]),e("q-chip",{attrs:{size:"10px",color:t.getColor(i.status),"text-color":"white"}},[t._v(" "+t._s(i.status)+" ")])],1)]),e("div",{staticClass:"meta row"},[e("div",{staticClass:"col-12"},[t._v("Assigned To: "+t._s(i.assigned))]),e("div",{staticClass:"col-12"},[t._v(" Start Date: "+t._s(t.$day.format(i.startDate,!1))+" "),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t._v(" End Date: "+t._s(t.$day.format(i.endDate,!1))+" ")],1)])])]}))],2)]),e("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(e){t.advancedCommentsSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[e("TextBuilderField",{model:{value:t.advancedCommentText,callback:function(e){t.advancedCommentText=e},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[t.isTenantArmgroup()?e("SingleChoiceField",{staticClass:"actions q-mr-sm noborder",attrs:{options:t.commentActions,"options-per-line":2},model:{value:t.commentAction,callback:function(e){t.commentAction=e},expression:"commentAction"}}):t._e(),e("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:t.saveAdvancedComment}})]},proxy:!0}]),model:{value:t.advancedCommentsSheet,callback:function(e){t.advancedCommentsSheet=e},expression:"advancedCommentsSheet"}}),e("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"red"},on:{input:function(e){t.errorModal=!1,t.errorMessage=""}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Error Message")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"q-py-md"},[e("p",[t._v(" "+t._s(t.errorMessage)+" ")])])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Close",color:"red"},on:{click:function(e){t.errorModal=!1,t.errorMessage=""}}})]},proxy:!0}]),model:{value:t.errorModal,callback:function(e){t.errorModal=e},expression:"errorModal"}}),e("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"red"},on:{input:function(e){t.actionPasswordConfirm=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Action Password")]},proxy:!0},{key:"default",fn:function(){return[e("ValidationObserver",{ref:"passwordForm"},[e("ValidationProvider",{attrs:{name:"password",rules:{required:!0,password:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("PasswordField",{staticClass:"q-my-lg",attrs:{"is-mandatory":"","is-readonly":t.isLoading,error:i[0],"auto-focus":!0},on:{enter:t.validatePassword},model:{value:t.actionUserPassword,callback:function(e){t.actionUserPassword=e},expression:"actionUserPassword"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"validate","is-loading":t.isLoading},on:{click:t.validatePassword}})]},proxy:!0}]),model:{value:t.actionPasswordConfirm,callback:function(e){t.actionPasswordConfirm=e},expression:"actionPasswordConfirm"}}),e("Confirm",{attrs:{icon:"mdi-file-alert","icon-color":"red"},on:{input:t.closeAlertModal},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Documents Required!")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"q-py-md text-md"},[e("p",[t._v(" Are you sure you want to submit the request without attaching the required documents. ")])])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no"},on:{click:t.closeAlertModal}}),e("BaseButton",{attrs:{label:"yes",color:"primary"},on:{click:t.proceedSubmission}})]},proxy:!0}]),model:{value:t.alertModal,callback:function(e){t.alertModal=e},expression:"alertModal"}}),t.historyProcessId?e("ProcessHistory",{attrs:{"process-id":t.historyProcessId,"selected-process":t.selectedProcess},on:{close:function(e){t.historyProcessId=0}}}):t._e(),e("Sheet",{attrs:{width:"30vw"},on:{input:t.closeSubProcessSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Linked Request ")]},proxy:!0}]),model:{value:t.subProcessSheet,callback:function(e){t.subProcessSheet=e},expression:"subProcessSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[t._l(t.subProcessTickets,(function(i,s){return[e("div",{key:s,staticClass:"subProcess"},[e("div",{staticClass:"title row"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"o_account_tree",color:"primary-4"}})],1),e("div",{staticClass:"col ellipsis text-underline",on:{click:function(e){return t.openSubProcess(i)}}},[t._v(" "+t._s(i.requestNo)+" ")]),"1"===i.flowStatus?e("q-chip",{attrs:{size:"10px",color:"green","text-color":"white"}},[t._v(" Completed ")]):e("q-chip",{attrs:{size:"10px",color:"orange","text-color":"white"}},[t._v(" Running ")])],1),e("div",{staticClass:"meta row"},[e("div",{staticClass:"col row"},[e("div",[t._v(t._s(i.name))]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.stage))]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.duration)+" ago")])],1)]),t._e()])]}))],2)]),e("SubWorkflowProcess",{attrs:{"workflow-id":t.subWorkflowId||t.subProcessData.id,"initiate-sub-workflow-process":t.initiateSubWorkflowProcess,"main-workflow-id":t.workflowId,"main-process-id":t.selectedProcess.processId,"sub-process-link":t.subProcessLink,"selected-process":t.subProcessData,"open-sub-process":t.openSubProcessSheet,"main-form-fields":t.formFields,"main-form-model":t.formModel,"sub-process-id":t.subProcessId},on:{"update:subProcessId":function(e){t.subProcessId=e},"update:sub-process-id":function(e){t.subProcessId=e},closeProcessSheet:t.closeSubProcess}}),t.showFormEntryHistoryModal?e("FormEntryHistory",{attrs:{value:t.showFormEntryHistoryModal,"workflow-id":t.workflow.id,"process-id":t.selectedProcess.processId},on:{"update:value":function(e){t.showFormEntryHistoryModal=e}}}):t._e(),t.showAttachmentSheet?e("Attachments",{attrs:{value:t.showAttachmentSheet,"selected-process":t.selectedProcess,workflow:t.workflow,"selected-node":"inbox","initiate-process":!1,"form-check-list":!1,"check-list":t.checkList,wform:t.wform,"repository-details":{},"workflow-model":{},"form-upload-files":[],"repository-field":[],columns:[],attachments:t.attachmentList,"workflow-id":t.workflow.id},on:{"update:value":function(e){t.showAttachmentSheet=e},"update:attachments":function(e){t.attachmentList=e},attachmentCount:t.attachmentCount}}):t._e(),t.showCommentsSheet?e("Comments",{attrs:{value:t.showCommentsSheet,"selected-process":t.selectedProcess,workflow:t.workflow,"selected-node":"inbox","initiate-process":!1,"attachment-list":t.attachmentList,"workflow-id":t.workflow.id,"file-names":[],comments:t.commentsList,"display-internal-public":!1},on:{"update:value":function(e){t.showCommentsSheet=e},"update:comments":function(e){t.commentsList=e},commentsCount:t.commentsCount}}):t._e()],1)},W=[],J=i("5a6e"),G=J["a"],Q=(i("b97e"),i("b047")),Y=i("cb32"),K=i("8169"),X=Object(m["a"])(G,H,W,!1,null,"e67e8e24",null),Z=X.exports;R()(X,"components",{QChip:Q["a"],QAvatar:Y["a"],QChatMessage:K["a"],QMenu:E["a"]});var tt=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"account"}},[e("div",{attrs:{id:"user-avatar"},on:{click:function(e){t.profileSheet=!0}}},[e("img",{attrs:{src:t.imageURL(),alt:"avatar"}})]),e("Sheet",{attrs:{width:"25vw","has-footer":!1},on:{input:function(e){t.profileSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Profile ")]},proxy:!0}]),model:{value:t.profileSheet,callback:function(e){t.profileSheet=e},expression:"profileSheet"}},[e("div",{staticClass:"profileData",attrs:{id:"content-wrapper"}},[e("div",{staticClass:"q-mt-sm q-mb-sm"},[e("div",{staticClass:"text-center"},[e("div",{staticClass:"profile-avatar"},[e("img",{attrs:{src:t.imageURL(),alt:"avatar"}})]),e("div",{staticClass:"text-weight-bold q-mt-md"},[t.isAdUser?[t._v(" "+t._s(t.$store.state.session.firstName)+" "+t._s(t.$store.state.session.lastName)+" ")]:[t._v(" "+t._s(t.$store.state.session.email)+" ")]],2),e("div",{staticClass:"text-caption"},[t._v(" "+t._s(t.$store.state.session.role)+" ")])])]),t._l(t.menus,(function(i,s){return e("div",{key:s},[t._l(i,(function(i){return[i.required||!t.checkTenant?e("div",{key:i.label,staticClass:"row items-center hoverable",staticStyle:{height:"50px"},on:{click:i.action}},[e("div",{staticClass:"col-2 row items-center justify-center",staticStyle:{color:"var(--icon-color)"}},[e("q-icon",{attrs:{name:i.icon,size:"20px"}})],1),e("div",{staticClass:"col text-capitalize"},[t._v(" "+t._s(i.label)+" ")])]):t._e()]})),s!==t.menus.length-1?e("q-separator",{attrs:{inset:"",color:"grey-2"}}):t._e()],2)}))],2)]),e("Modal",{attrs:{width:"30vw",height:"70vh","has-footer":""},on:{input:function(e){t.changePasswordModal=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Change Password")]},proxy:!0},{key:"default",fn:function(){return[e("div",{attrs:{id:"changePassword"}},[e("ValidationProvider",{attrs:{name:"password",rules:{required:!0,password:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("PasswordField",{staticClass:"q-mb-lg",attrs:{label:"password","is-mandatory":"",tooltip:t._passwordHint,error:i[0]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})]}}])}),e("ValidationProvider",{attrs:{name:"password",rules:{required:!0,password:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("PasswordField",{staticClass:"q-mb-lg",attrs:{label:"confirm password","is-mandatory":"","is-readonly":t.isLoading,tooltip:t._passwordHint,error:i[0]},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Update",color:"primary"},on:{click:t.updatePassword}})]},proxy:!0}]),model:{value:t.changePasswordModal,callback:function(e){t.changePasswordModal=e},expression:"changePasswordModal"}}),e("Modal",{attrs:{width:"30vw",height:"70vh","has-footer":""},on:{input:function(e){t.changeIdentityModal=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Change Identity")]},proxy:!0},{key:"default",fn:function(){return[e("div",{attrs:{id:"changePhoto"}},[e("ValidationProvider",{attrs:{name:"upload image",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("ImageField",{attrs:{label:"upload image","is-mandatory":!0,error:i[0]},model:{value:t.uploadImage,callback:function(e){t.uploadImage=e},expression:"uploadImage"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-md",attrs:{label:"Remove",color:"red"},on:{click:t.removeImage}}),e("BaseButton",{attrs:{label:"Update",color:"primary"},on:{click:t.updateImage}})]},proxy:!0}]),model:{value:t.changeIdentityModal,callback:function(e){t.changeIdentityModal=e},expression:"changeIdentityModal"}})],1)},et=[],it=i("381e"),st=i("6a70"),at=i("7bb1"),ot=i("8bc3"),rt=i("0c6e"),nt=i("6f00"),lt={name:"Account",components:{Sheet:it["a"],Modal:st["a"],ValidationProvider:at["b"],PasswordField:ot["a"],ImageField:nt["a"]},data(){return{profileSheet:!1,menus:[[{icon:"eva-person-outline",label:"change identity",action:this.changeIdentity,required:!1},{icon:"eva-lock-outline",label:"change password",action:this.changePassword,required:!1},{icon:"mdi-clipboard-text-outline",label:"Terms of Use",action:this.showTermsOfUse,required:!0},{icon:"eva-shield-outline",label:"Privacy Policy",action:this.showPrivacyPolicy,required:!0}],[{icon:"eva-log-out",label:"Log Out",action:this.logOut,required:!0}]],password:"",confirmPassword:"",changePasswordModal:!1,changeIdentityModal:!1,uploadImage:""}},computed:{_passwordHint(){return rt["a"]},checkTenant(){let t=location.origin;return"https://edmsuat.sobhaapps.com"===t||"https://edms.sobhaapps.com"===t},isAdUser(){let t=location.origin;return"http://172.16.1.118"===t}},methods:{logOut(){window.localStorage.clear(),this.$router.push({name:"signIn"})},changePassword(){this.changePasswordModal=!0},showTermsOfUse(){window.open("https://www.ezofis.com/privacy-policy/")},showPrivacyPolicy(){window.open("https://www.ezofis.com/privacy-policy/")},changeIdentity(){this.changeIdentityModal=!0},viewProfile(){this.showUserSheet()},imageURL(){return`https://appuat.ezofis.com/ezofisapi/api/user/avatar/${this.$store.state.session.tenantId}/${this.$store.state.session.id}?t=${(new Date).getTime()}`},async updatePassword(){if(this.password===this.confirmPassword){this.$store.commit("showLoadingBar");let t={password:this.password};const{error:e}=await B["s"].updateUser(this.$store.state.session.id,t);if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);this.$alert.success("Password updated"),this.changePasswordModal=!1,this.password="",this.confirmPassword=""}else this.$alert.warning("password not matched")},async updateImage(){this.$store.commit("showLoadingBar");let t={base64file:this.uploadImage.split(",")[1],fileType:"png"};const{error:e}=await B["s"].uploadImage(t);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):(this.$store.commit("hideLoadingBar"),this.changeIdentityModal=!1,this.uploadImage="")},async removeImage(){const{error:t}=await B["s"].removeImage(this.$store.state.session.tenantId,this.$store.state.session.id);t?this.$alert.error(t):(this.changeIdentityModal=!1,this.uploadImage="")}}},ct=lt,dt=(i("108c"),i("0016")),mt=i("eb85"),ht=Object(m["a"])(ct,tt,et,!1,null,"443b001b",null),ut=ht.exports;R()(ht,"components",{QIcon:dt["a"],QSeparator:mt["a"]});var pt={name:"Toolbar",components:{Legend:u,Logo:w,CustomerLogo:T,GlobalSearch:j,ThemeSwitcher:U["a"],Notifications:Z,Account:ut},computed:{customerLogo(){let t=location.origin;return"https://edmsuat.sobhaapps.com"===t||"https://edms.sobhaapps.com"===t||"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t||"http://172.16.1.118"===t},ezofisLogo(){let t=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==t&&"https://ag-appsvc05.azurewebsites.net"!==t}},methods:{logOut(){window.localStorage.clear(),location.reload()}}},ft=pt,vt=(i("b2a7"),i("e359")),yt=i("65c6"),bt=Object(m["a"])(ft,o,r,!1,null,"ea69e05a",null),gt=bt.exports;R()(bt,"components",{QHeader:vt["a"],QToolbar:yt["a"],QSpace:q["a"]});var wt=function(){var t=this,e=t._self._c;return e("q-drawer",{attrs:{mini:t.miniDrawer,side:"left",width:240,"mini-width":52},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[e("div",{attrs:{id:"drawer"}},[t._l(t.menus,(function(i){return[i.access&&t.checkTenantMenu(i.label)?e("Menu",{key:i.id,attrs:{menu:i,"is-active":i.label===t.activeMenu},on:{click:function(e){return t.goto(i.route)}}}):t._e()]})),e("q-space"),t.checkTenant?e("Menu",{attrs:{menu:{label:"help center",icon:"mdi-help-circle-outline",activeIcon:"mdi-help-circle"}},on:{click:function(e){return t.goto("helpCenter")}}}):t._e()],2)])},Ct=[],kt=function(){var t=this,e=t._self._c;return e("div",t._g({directives:[{name:"tooltip",rawName:"v-tooltip:secondary.right",value:t.menu.label,expression:"menu.label",arg:"secondary",modifiers:{right:!0}}],class:{active:t.isActive},attrs:{id:"menu"}},t.$listeners),[e("BaseIcon",{attrs:{name:t.isActive?t.menu.activeIcon:t.menu.icon,color:""}}),t.isActive?e("div",{staticClass:"indicator"}):t._e()],1)},St=[],It={name:"Menu",props:{menu:{type:Object,required:!0},isActive:{type:Boolean,default:!1}}},_t=It,Tt=(i("2e65"),Object(m["a"])(_t,kt,St,!1,null,"87127af4",null)),$t=Tt.exports,xt={name:"Drawer",components:{Menu:$t},data(){return{drawer:!0,miniDrawer:!0,menus:[{id:this.$nano.id(),label:"dashboard",route:"dashboard",icon:"o_dashboard",activeIcon:"dashboard",access:!0},{id:this.$nano.id(),label:"workspaces",route:"workspaces-overview",icon:"mdi-briefcase-outline",activeIcon:"mdi-briefcase",access:!1},{id:this.$nano.id(),label:"folders",route:"repositories-browse",icon:"eva-archive-outline",activeIcon:"eva-archive",access:!0},{id:this.$nano.id(),label:"tasks",route:"tasks-overview",icon:"eva-cube-outline",activeIcon:"eva-cube",access:!1},{id:this.$nano.id(),label:"portals",route:"portals-browse",icon:"eva-globe-outline",activeIcon:"eva-globe",access:!1},{id:this.$nano.id(),label:"forms",route:"forms-overview",icon:"mdi-text-box-outline",activeIcon:"mdi-text-box",access:!1},{id:this.$nano.id(),label:"workflows",route:"workflows-inbox",icon:"o_account_tree",activeIcon:"account_tree",access:!0},{id:this.$nano.id(),label:"reports",route:"reports",icon:"eva-pie-chart-outline",activeIcon:"eva-pie-chart",access:!1},{id:this.$nano.id(),label:"settings",route:"settings",icon:"eva-settings-2-outline",activeIcon:"eva-settings-2",access:!1}],activeMenu:"",profileMenu:[]}},computed:{checkTenant(){let t=location.origin;return"https://demo.ezofis.com"===t||"http://52.172.32.88"===t||"http://localhost:8080"===t}},watch:{$route:{immediate:!0,handler(){"user"===this.$route.meta.menu||"group"===this.$route.meta.menu||"profile"===this.$route.meta.menu?this.activeMenu="settings":this.activeMenu=this.$route.meta.menu}}},created(){this.$store.state.session.profile&&(0===this.$store.state.profileMenus.length?this.getProfileMenu():this.menus.forEach(t=>{var e;t.access||(t.access=null===(e=this.$store.state.profileMenus.find(e=>e[t.label]))||void 0===e?void 0:e[t.label])}))},methods:{goto(t){this.$router.push({name:t})},checkTenantMenu(t){let e=location.origin;return"http://localhost:80801"!==e&&"http://10.16.7.1"!==e||("dashboard"===t||"workspaces"===t||"folders"===t||"tasks"===t||"settings"===t)},async getProfileMenu(){const{error:t,payload:e}=await B["n"].getProfileList(this.$store.state.session.profile.id);t?this.$alert.error(t):(this.profileMenu=e?JSON.parse(e.menuOptions):[],this.menus.forEach(t=>{var e;t.access||(t.access=null===(e=this.profileMenu.find(e=>e[t.label]))||void 0===e?void 0:e[t.label])}),M["a"].commit("setProfileMenu",this.profileMenu))}}},At=xt,Lt=(i("b591"),i("9404")),Ft=Object(m["a"])(At,wt,Ct,!1,null,"5cfd261b",null),Pt=Ft.exports;R()(Ft,"components",{QDrawer:Lt["a"],QSpace:q["a"]});var Bt={name:"AppLayout",components:{Toolbar:gt,Drawer:Pt}},Dt=Bt,Mt=i("4d5a"),Nt=i("09e3"),Ot=Object(m["a"])(Dt,s,a,!1,null,"afde89cc",null);e["a"]=Ot.exports;R()(Ot,"components",{QLayout:Mt["a"],QPageContainer:Nt["a"]})},"5ab0":function(t,e,i){"use strict";i("a945")},"5b8f":function(t,e,i){"use strict";i("affa")},"5ca1":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("BaseIcon",{staticClass:"q-mx-xs",class:t.color,attrs:{id:"separator",name:"eva-chevron-right","inherit-color":"",size:"18px"}})},a=[],o=i("2f62"),r={name:"Separator",computed:{...Object(o["c"])(["darkTheme"]),color(){return this.darkTheme?"text-gray-6":"text-gray-5"}}},n=r,l=i("2877"),c=Object(l["a"])(n,s,a,!1,null,"d7a62b86",null);e["a"]=c.exports},"5d0b":function(t,e,i){},"5e23":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Sheet",{attrs:{value:t.value,"no-padding":!0,"has-footer":"",width:"650px"},on:{input:function(e){return t.$emit("input",!1)}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Document Sharing By Email")]},proxy:!0},{key:"default",fn:function(){return[e("div",{attrs:{id:"document-sharing-details"}},[e("Tabs",{staticClass:"tabs",attrs:{tabs:t.tabs},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}}),e("BaseScrollbar",{attrs:{height:"calc(100vh - 170px)"}},[e("div",{staticClass:"q-pa-md"},[e("ValidationObserver",{ref:"form"},[e("div",{staticClass:"field-wrapper"},[e("ValidationProvider",{attrs:{name:"to",rules:{required:!0,email:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("MultiSelectField",{staticClass:"q-mb-sm",attrs:{label:"to","is-mandatory":"","new-option":"",error:i[0]},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})]}}])}),e("ValidationProvider",{attrs:{name:"subject",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextField",{staticClass:"q-mb-sm",attrs:{label:"subject","is-mandatory":"",error:i[0]},model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}})]}}])}),"attach link"===t.tab?[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6 q-pr-sm"},[e("ValidationProvider",{attrs:{name:"Expiry from Date",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("DateField",{staticClass:"q-mb-sm",attrs:{label:"Expiry from Date","is-mandatory":"",error:i[0],"minimum-validation":!0},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})]}}],null,!1,714078504)})],1),e("div",{staticClass:"col-6 q-pl-sm"},[e("ValidationProvider",{attrs:{name:"Expiry to Date",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("DateField",{staticClass:"q-mb-sm",attrs:{label:"Expiry to Date","is-mandatory":"",error:i[0],"minimum-validation":!0},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})]}}],null,!1,738413864)})],1)])]:t._e(),t._l(t.fileList,(function(i){return[e("q-chip",{key:i.id,staticClass:"chips secondary-hover cursor-pointer",attrs:{outline:"",color:"secondary"}},[e("q-avatar",{attrs:{icon:"mdi-file",color:"secondary","text-color":"white"},on:{click:function(e){return t.remove(i.id)}}}),t._v(" "+t._s(i.name)+" "),e("q-avatar",{staticClass:"close-icon",attrs:{icon:"mdi-close","text-color":"red"},on:{click:function(e){return t.remove(i.id)}}})],1)]})),e("TextBuilderField",{model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],2)])],1)])],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:function(e){return t.$emit("input",!1)}}}),e("BaseButton",{attrs:{label:"send"},on:{click:t.documentShare}})]},proxy:!0}])})},a=[],o=(i("14d9"),i("7bb1")),r=i("381e"),n=i("b94d"),l=i("b3d1"),c=i("53c1"),d=i("c3d2"),m=i("695e"),h=i("1b0d"),u={name:"EmailSharing",components:{Sheet:r["a"],ValidationObserver:o["a"],ValidationProvider:o["b"],TextField:l["a"],Tabs:n["a"],DateField:c["a"],MultiSelectField:d["a"],TextBuilderField:m["a"]},props:{value:{type:Boolean,default:!1},repositoryId:{type:Number,default:0},fileList:{type:Array,default:()=>[]}},data(){return{tab:"attach file",tabs:[{id:this.$nano.id(),label:"attach file",value:"attach file"},{id:this.$nano.id(),label:"attach link",value:"attach link"}],email:[],subject:"",body:"",fromDate:"",toDate:"",minimumFromDate:""}},created(){const t=new Date,e=t.toISOString().split("T")[0];this.minimumFromDate=e},methods:{clearFields(){this.tab="attach file",this.email=[],this.subject="",this.body="",this.fromDate="",this.toDate=""},remove(t){if(this.fileList.length>1){let e=this.fileList.filter(e=>e.id!=t);this.$emit("update:fileList",e)}else this.$alert.warning("Minimum one document is required")},async documentShare(){const t=await this.$refs.form.validate();if(!t)return;let e=[];if(this.fileList.forEach(t=>{e.push(t.id)}),"attach file"===this.tab){let t={repositoryId:this.repositoryId,itemIds:e,toAdd:this.email.toString(),subject:this.subject,body:this.body};const{error:i}=await h["k"].documentShare(t);if(i)return void this.$alert.error(i)}else if("attach link"===this.tab){if(this.toDate<this.fromDate)return void this.$alert.warning("ToDate Is Must Be Greater Than Or Equal To FromDate");let t={toAddress:this.email.toString(),subject:this.subject,body:this.body,expiryFromDate:this.fromDate,expiryTodate:this.toDate,repositoryId:this.repositoryId,itemIdArray:e};const{error:i}=await h["k"].documentShareLink(t);if(i)return void this.$alert.error(i)}this.$alert.success("Initiated Document Sharing by Email"),this.clearFields(),this.$emit("input",!1)}}},p=u,f=(i("5fab"),i("2877")),v=i("b047"),y=i("cb32"),b=i("93dc"),g=i.n(b),w=Object(f["a"])(p,s,a,!1,null,"2c37c0ea",null);e["a"]=w.exports;g()(w,"components",{QChip:v["a"],QAvatar:y["a"]})},"5e5c":function(t,e,i){"use strict";i("204d")},"5f3d":function(t,e,i){},"5fab":function(t,e,i){"use strict";i("467fa")},"61cf":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[t.showWorkspaceRepository?[e("WorkspaceList",{model:{value:t.workspaceId,callback:function(e){t.workspaceId=e},expression:"workspaceId"}}),e("RepositoryList",{attrs:{"workspace-id":t.workspaceId},model:{value:t.repositoryId,callback:function(e){t.repositoryId=e},expression:"repositoryId"}})]:t._e(),e("div",{class:[{"is-dragging":t.isDragging},{"is-indexing":t.tabIndexing}],attrs:{id:"dropzone"}},[e("div",{staticClass:"hint"},[e("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"128px","inherit-color":""}}),e("div",{staticClass:"title"},[t._v("Drag & Drop your files here to upload")]),e("div",{staticClass:"description"},[t._v(" Simply dragging and dropping them from the user's computer or device onto a designated area on the screen ")]),e("OrDivider",{staticClass:"full-width"}),t.tabIndexing?e("BaseButton",{attrs:{icon:"eva-plus",label:"Add more files"}}):e("BaseButton",{attrs:{label:"browse files"}})],1),e("input",{ref:"dropzone",attrs:{type:"file",multiple:t.hasMultiple},on:{dragenter:function(e){t.isDragging=!0},dragleave:function(e){t.isDragging=!1},drop:function(e){t.isDragging=!1},change:t.handleChange}})])],2)},a=[],o=(i("caad"),i("14d9"),i("42dc")),r=i("dc7a"),n=i("9c79"),l=i("2f62"),c=i("dd90"),d={name:"Dropzone",components:{WorkspaceList:o["a"],RepositoryList:r["a"],OrDivider:n["a"]},props:{workspaceId:{type:Number,required:!0},repositoryId:{type:Number,required:!0},hasMultiple:{type:Boolean,default:!0},showWorkspaceRepository:{type:Boolean,default:!0},tabIndexing:{type:Boolean,default:!1}},data(){return{isDragging:!1}},computed:{...Object(l["c"])(["session"]),fileSizeLimit(){return this.session.license,52428800}},methods:{handleChange(t){const e=t.target.files,i=[],s=["exe"];if(e.length){for(let t of e){if(t.size>this.fileSizeLimit)return void this.$alert.warning(t.name+" - Maximum file size exceeded");const e=t.name.split(".").reverse()[0];if(s.includes(e))return void this.$alert.warning(t.name+" - Invalid file type");if(!Object(c["a"])(e))return void this.$alert.warning(t.name+" - Invalid file type");i.push({id:this.$nano.id(),name:t.name,type:e.slice(0,4),size:t.size,createdAt:"",status:"UPLOADING",file:t,uploadedPercentage:0})}this.$refs.dropzone.value="",this.$emit("upload",i)}}}},m=d,h=(i("9495"),i("2877")),u=Object(h["a"])(m,s,a,!1,null,"dc127c58",null);e["a"]=u.exports},"626d":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Modal",{attrs:{value:t.value,"is-header":!1,"has-footer":!0,width:"60vw",height:"80vh"},on:{input:function(e){return t.$emit("input")}},scopedSlots:t._u([{key:"default",fn:function(){return[t.summarizeView?[e("div",{staticClass:"footer-modal q-pa-sm"},[e("BaseIcon",{attrs:{name:"mdi-creation",color:"secondary"}}),e("span",{staticClass:"footer-text"},[t._v("Recommended Action:")]),t._v(" "+t._s(t.summarizingData.description)+" ")],1),e("div",{staticClass:"q-pt-md"},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 320px)"}},[e("table",[e("tbody",[t._l(t.summarizingData.data,(function(i,s){return["string"===typeof i?[e("tr",{key:s},[e("td",{staticClass:"tablekey"},[t._v(t._s(s))]),e("td",{staticClass:"tablevalue"},[t._v(t._s(i))])])]:"object"===typeof i?[Array.isArray(i)?[e("tr",{key:s},[e("td",{staticClass:"tablekey",staticStyle:{color:"#643094"},attrs:{colspan:"2"}},[t._v(" "+t._s(s)+" ")])]),e("tr",{key:s},[e("td",{attrs:{colspan:"2"}},[e("table",{staticClass:"sub-table"},[e("thead",[e("tr",t._l(i[0],(function(i,s){return e("th",{key:s,staticClass:"tablevalue",staticStyle:{color:"#00bcd4"}},[t._v(" "+t._s(s)+" ")])})),0)]),e("tbody",t._l(i,(function(i,s){return e("tr",{key:s},t._l(i,(function(i,s){return e("td",{key:s,staticClass:"tablevalue"},[t._v(" "+t._s(i)+" ")])})),0)})),0)])])])]:[e("tr",{key:s},[e("td",{staticClass:"tablekey",staticStyle:{color:"#643094"},attrs:{colspan:"2"}},[t._v(" "+t._s(s)+" ")])]),t._l(i,(function(i,s){return["string"===typeof i?[e("tr",{key:s},[e("td",{staticClass:"tablekey"},[t._v(t._s(s))]),e("td",{staticClass:"tablevalue"},[t._v(t._s(i))])])]:"object"===typeof i?[e("tr",{key:s},[e("td",{staticClass:"tablekey",staticStyle:{color:"#f49d3a"},attrs:{colspan:"2"}},[t._v(" "+t._s(s)+" ")])]),t._l(i,(function(i,s){return["string"===typeof i?[e("tr",{key:s},[e("td",{staticClass:"tablekey"},[t._v(t._s(s))]),e("td",{staticClass:"tablevalue"},[t._v(" "+t._s(i)+" ")])])]:t._e()]}))]:"array"===typeof i?[e("tr",{key:s},[e("td",{attrs:{colspan:"2"}},[t._v(t._s(s))])]),t._l(i,(function(i,s){return["string"===typeof t.objectvalueobject?[e("tr",{key:s},[e("td",{staticClass:"tablekey"},[t._v(t._s(s))]),e("td",{staticClass:"tablevalue"},[t._v(" "+t._s(i)+" ")])])]:t._e()]}))]:t._e()]}))]]:t._e()]}))],2)])])],1)]:[e("div",{staticClass:"htmlElement",domProps:{innerHTML:t._s(t.summarizingData)}})]]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Close"},on:{click:function(e){return t.$emit("input",!1)}}})]},proxy:!0}])})},a=[],o=i("6a70"),r=i("1b0d"),n={name:"Summarize",components:{Modal:o["a"]},props:{value:{type:Boolean,default:!1},repositoryId:{type:Number,default:0},itemid:{type:Number,default:0},transactionId:{type:Number,default:0},workflowId:{type:Number,default:0},processId:{type:Number,default:0},page:{type:String,default:""}},data(){return{summarizingData:"",summarizeView:!1}},watch:{value:{immediate:!0,handler(){this.value&&("REPOSITORY"===this.page?this.documentSummarize():"WORKFLOW"===this.page&&this.workflowRecommendation())}}},methods:{async documentSummarize(){this.$store.commit("showLoadingBarSave");const{error:t,payload:e}=await r["p"].getSummary(this.repositoryId,this.itemid);if(this.$store.commit("hideLoadingBarSave"),t)this.$alert.error(t);else if(e)try{this.summarizingData=JSON.parse(e.output),this.summarizeView=!0}catch(i){console.log(i),this.summarizeView=!1,this.summarizingData=e.output.replace(new RegExp("<title>","g"),'<title class="heading" style="display:block">').replace(new RegExp("<h1>","g"),'<h6 class="heading">').replace(new RegExp("<h2>","g"),'<h6 class="heading2">').replace(new RegExp("<table>","g"),'<table class="custom-table-style">').replace(new RegExp("<p>","g"),'<p style="margin-top:20px">')}},async workflowRecommendation(){this.$store.commit("showLoadingBarSave");const{error:t,payload:e}=await r["t"].getWorkflowRecommendation(this.workflowId,this.processId,this.transactionId);if(this.$store.commit("hideLoadingBarSave"),t)this.$alert.error(t);else if(e)try{this.summarizingData=JSON.parse(e.output),this.summarizeView=!0}catch(i){console.log(i),this.summarizeView=!1,this.summarizingData=e.replace(new RegExp("<title>","g"),'<title class="heading" style="display:block">').replace(new RegExp("<h1>","g"),'<h6 class="heading">').replace(new RegExp("<h2>","g"),'<h6 class="heading2">').replace(new RegExp("<table>","g"),'<table class="custom-table-style">').replace(new RegExp("<p>","g"),'<p style="margin-top:20px">')}}}},l=n,c=(i("3595"),i("e864"),i("2877")),d=Object(c["a"])(l,s,a,!1,null,"85a6110e",null);e["a"]=d.exports},"64ab":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"tip-tap-editor"}},[e("Toolbar",{attrs:{"hide-tool-bar":t.hideToolBar,"form-columns":t.formColumns},on:{"set-heading":t.setHeading,"unset-heading":t.unsetHeading,"toggle-alignment":t.toggleAlignment,"toggle-bold":t.toggleBold,"toggle-italic":t.toggleItalic,"toggle-underline":t.toggleUnderline,"toggle-bullet-list":t.toggleBulletList,"toggle-number-list":t.toggleNumberList,"increase-indent":t.increaseIndent,"decrease-indent":t.decreaseIndent,"set-text-color":t.setTextColor,"unset-text-color":t.unsetTextColor,"set-bg-color":t.setBgColor,"unset-bg-color":t.unsetBgColor,undo:t.undo,redo:t.redo,"set-link":t.setLink,"add-field":t.addField}}),e("EditorContent",{attrs:{editor:t.editor}})],1)},a=[],o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"toolbar"}},[e("AddField",{attrs:{"form-columns":t.formColumns},on:{click:t.addField}}),t.hideToolBar?[e("Heading",{on:{set:t.setHeading,unset:t.unsetHeading}}),e("Alignment",{on:{toggle:t.toggleAlignment}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"bold",expression:"'bold'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-bold"},on:{click:t.toggleBold}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"italic",expression:"'italic'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-italic"},on:{click:t.toggleItalic}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"underline",expression:"'underline'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-underline"},on:{click:t.toggleUnderline}}),e("List",{on:{bullet:t.toggleBulletList,number:t.toggleNumberList}}),e("Indent",{on:{increase:t.increaseIndent,decrease:t.decreaseIndent}}),e("TextColor",{on:{set:t.setTextColor,unset:t.unsetTextColor}}),e("BackgroundColor",{on:{set:t.setBgColor,unset:t.unsetBgColor}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"undo",expression:"'undo'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-undo"},on:{click:t.undo}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"redo",expression:"'redo'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-redo"},on:{click:t.redo}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"link",expression:"'link'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-link-2-outline"},on:{click:t.setLink}})]:t._e()],2)},r=[],n=function(){var t=this,e=t._self._c;return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"heading",expression:"'heading'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-size"}},[e("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},t._l(t.headings,(function(i){return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:i.label,expression:"heading.label",modifiers:{right:!0}}],key:i.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:i.icon},on:{click:function(e){return t.handleClick(i.level)}}})})),1)],1)},l=[],c={name:"Heading",data(){return{headings:[{id:this.$nano.id(),label:"heading 1",icon:"mdi-format-header-1",level:1},{id:this.$nano.id(),label:"heading 2",icon:"mdi-format-header-2",level:2},{id:this.$nano.id(),label:"heading 3",icon:"mdi-format-header-3",level:3},{id:this.$nano.id(),label:"heading 4",icon:"mdi-format-header-4",level:4},{id:this.$nano.id(),label:"heading 5",icon:"mdi-format-header-5",level:5},{id:this.$nano.id(),label:"heading 6",icon:"mdi-format-header-6",level:6},{id:this.$nano.id(),label:"normal",icon:"mdi-format-paragraph",level:0}]}},methods:{handleClick(t){t?this.$emit("set",t):this.$emit("unset")}}},d=c,m=i("2877"),h=i("4e73"),u=i("93dc"),p=i.n(u),f=Object(m["a"])(d,n,l,!1,null,"5b56e398",null),v=f.exports;p()(f,"components",{QMenu:h["a"]});var y=function(){var t=this,e=t._self._c;return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"alignment",expression:"'alignment'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-align-center"}},[e("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},t._l(t.alignments,(function(i){return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:i.label,expression:"alignment.label",modifiers:{right:!0}}],key:i.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:i.icon},on:{click:function(e){return t.$emit("toggle",i.label)}}})})),1)],1)},b=[],g={name:"Alignment",data(){return{alignments:[{id:this.$nano.id(),label:"left",icon:"mdi-format-align-left"},{id:this.$nano.id(),label:"center",icon:"mdi-format-align-center"},{id:this.$nano.id(),label:"right",icon:"mdi-format-align-right"},{id:this.$nano.id(),label:"justify",icon:"mdi-format-align-justify"}]}}},w=g,C=Object(m["a"])(w,y,b,!1,null,"4a6ff39e",null),k=C.exports;p()(C,"components",{QMenu:h["a"]});var S=function(){var t=this,e=t._self._c;return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"list",expression:"'list'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-list-bulleted-square"}},[e("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},t._l(t.lists,(function(i){return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:i.label,expression:"list.label",modifiers:{right:!0}}],key:i.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:i.icon},on:{click:function(e){return t.$emit(i.value)}}})})),1)],1)},I=[],_={name:"List",data(){return{lists:[{id:this.$nano.id(),label:"bullet list",icon:"mdi-format-list-bulleted",value:"bullet"},{id:this.$nano.id(),label:"number list",icon:"mdi-format-list-numbered",value:"number"}]}}},T=_,$=Object(m["a"])(T,S,I,!1,null,"6f405cc2",null),x=$.exports;p()($,"components",{QMenu:h["a"]});var A=function(){var t=this,e=t._self._c;return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"indent",expression:"'indent'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"mdi-format-indent-increase"}},[e("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"transition-show":"scale","transition-hide":"scale"}},t._l(t.indents,(function(i){return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:i.label,expression:"indent.label",modifiers:{right:!0}}],key:i.id,staticClass:"q-ma-sm",attrs:{"is-flat":"",icon:i.icon},on:{click:function(e){return t.$emit(i.value)}}})})),1)],1)},L=[],F={name:"Indent",data(){return{indents:[{id:this.$nano.id(),label:"increase indent",icon:"mdi-format-indent-increase",value:"increase"},{id:this.$nano.id(),label:"decrease indent",icon:"mdi-format-indent-decrease",value:"decrease"}]}}},P=F,B=Object(m["a"])(P,A,L,!1,null,"fd1a0bc6",null),D=B.exports;p()(B,"components",{QMenu:h["a"]});var M=function(){var t=this,e=t._self._c;return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"text color",expression:"'text color'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"format_color_text"}},[e("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"auto-close":"","transition-show":"scale","transition-hide":"scale"}},[e("div",{attrs:{id:"colors"}},t._l(t.colors,(function(i){return e("div",{key:i.id,staticClass:"color",style:{backgroundColor:i.value},on:{click:function(e){return t.handleInput(i)}}},[t.activeColor===i.value?e("BaseIcon",{attrs:{name:"eva-checkmark",color:"white"}}):t._e()],1)})),0)])],1)},N=[],O={name:"TextColor",data(){return{colors:[{id:this.$nano.id(),label:"primary",value:"#643094"},{id:this.$nano.id(),label:"secondary",value:"#00bcd4"},{id:this.$nano.id(),label:"red",value:"#f44336"},{id:this.$nano.id(),label:"pink",value:"#e91e63"},{id:this.$nano.id(),label:"purple",value:"#9c27b0"},{id:this.$nano.id(),label:"deep-purple",value:"#673ab7"},{id:this.$nano.id(),label:"indigo",value:"#3f51b5"},{id:this.$nano.id(),label:"blue",value:"#2196f3"},{id:this.$nano.id(),label:"teal",value:"#009688"},{id:this.$nano.id(),label:"green",value:"#4caf50"},{id:this.$nano.id(),label:"light-green",value:"#8bc34a"},{id:this.$nano.id(),label:"lime",value:"#cddc39"},{id:this.$nano.id(),label:"amber",value:"#ffc107"},{id:this.$nano.id(),label:"orange",value:"#ff9800"},{id:this.$nano.id(),label:"deep-orange",value:"#ff5722"},{id:this.$nano.id(),label:"brown",value:"#795548"},{id:this.$nano.id(),label:"gray",value:"#64748b"},{id:this.$nano.id(),label:"none",value:""}],activeColor:""}},methods:{handleInput(t){this.activeColor=t.value,"none"!==t.label?this.$emit("set",t.value):this.$emit("unset")}}},q=O,E=(i("718c"),Object(m["a"])(q,M,N,!1,null,"781fdde1",null)),V=E.exports;p()(E,"components",{QMenu:h["a"]});var R=function(){var t=this,e=t._self._c;return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"background color",expression:"'background color'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-color-palette-outline"}},[e("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,8],"auto-close":"","transition-show":"scale","transition-hide":"scale"}},[e("div",{attrs:{id:"colors"}},t._l(t.colors,(function(i){return e("div",{key:i.id,staticClass:"color",style:{backgroundColor:i.value},on:{click:function(e){return t.handleInput(i)}}},[t.activeColor===i.value?e("BaseIcon",{attrs:{name:"eva-checkmark",color:"white"}}):t._e()],1)})),0)])],1)},z=[],j={name:"BackgroundColor",data(){return{colors:[{id:this.$nano.id(),label:"primary",value:"#dec2e7"},{id:this.$nano.id(),label:"secondary",value:"#b2ebf2"},{id:this.$nano.id(),label:"red",value:"#ffcdd2"},{id:this.$nano.id(),label:"pink",value:"#f8bbd0"},{id:this.$nano.id(),label:"purple",value:"#e1bee7"},{id:this.$nano.id(),label:"deep-purple",value:"#d1c4e9"},{id:this.$nano.id(),label:"indigo",value:"#c5cae9"},{id:this.$nano.id(),label:"blue",value:"#bbdefb"},{id:this.$nano.id(),label:"teal",value:"#b2dfdb"},{id:this.$nano.id(),label:"green",value:"#c8e6c9"},{id:this.$nano.id(),label:"lime",value:"#f0f4c3"},{id:this.$nano.id(),label:"amber",value:"#ffecb3"},{id:this.$nano.id(),label:"orange",value:"#ffe0b2"},{id:this.$nano.id(),label:"deep-orange",value:"#ffccbc"},{id:this.$nano.id(),label:"brown",value:"#d7ccc8"},{id:this.$nano.id(),label:"none",value:""}],activeColor:""}},methods:{handleInput(t){this.activeColor=t.value,"none"!==t.label?this.$emit("set",t.value):this.$emit("unset")}}},U=j,H=(i("e21c"),Object(m["a"])(U,R,z,!1,null,"6647f5ea",null)),W=H.exports;p()(H,"components",{QMenu:h["a"]});var J=function(){var t=this,e=t._self._c;return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"add field",expression:"'add field'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-plus"}},[e("q-menu",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale"}},[e("div",{staticClass:"row border"},[e("div",{staticClass:"title-3 q-pa-xs col-auto"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchColumns,expression:"searchColumns"}],ref:"searchQuery",staticClass:"q-pa-md",attrs:{type:"text",placeholder:"Search",autofocus:""},domProps:{value:t.searchColumns},on:{keyup:function(e){return t.searchColumnList(t.searchColumns)},input:function(e){e.target.composing||(t.searchColumns=e.target.value)}}})])]),e("BaseScrollbar",{attrs:{height:"200px"}},t._l(t.fields,(function(i){return e("ListItem",{key:i.id,staticClass:"text-capitalize",class:i.display,attrs:{label:i.label,color:i.color},on:{click:function(e){return t.$emit("click",i)}}})})),1)],1)],1)},G=[],Q=(i("14d9"),i("caad"),i("cade")),Y={name:"AddField",components:{ListItem:Q["a"]},props:{formColumns:{type:Array,default:()=>[]}},data(){return{fields:[],searchColumns:""}},watch:{formColumns:{immediate:!0,handler(){this.formColumns.length&&this.formColumns.forEach(t=>{this.fields.push({id:this.$nano.id(),label:t.label,value:t.hasDefault?t.value:`#F#${t.label}#F#`,display:"",color:t.hasDefault?t.color:"#00bcd4"})})}}},methods:{searchColumnList(t){this.fields.forEach(e=>{e.display="",t&&(e.label.toLowerCase().includes(t.toLowerCase())||(e.display="hide"))})}}},K=Y,X=(i("ea98"),Object(m["a"])(K,J,G,!1,null,"42d457c1",null)),Z=X.exports;p()(X,"components",{QMenu:h["a"]});var tt={name:"Toolbar",components:{Heading:v,Alignment:k,List:x,Indent:D,TextColor:V,BackgroundColor:W,AddField:Z},props:{hideToolBar:{type:Boolean,default:!1},formColumns:{type:Array,default:()=>[]}},methods:{setHeading(t){this.$emit("set-heading",t)},unsetHeading(){this.$emit("unset-heading")},toggleAlignment(t){this.$emit("toggle-alignment",t)},toggleBold(){this.$emit("toggle-bold")},toggleItalic(){this.$emit("toggle-italic")},toggleUnderline(){this.$emit("toggle-underline")},toggleBulletList(){this.$emit("toggle-bullet-list")},toggleNumberList(){this.$emit("toggle-number-list")},increaseIndent(){this.$emit("increase-indent")},decreaseIndent(){this.$emit("decrease-indent")},setTextColor(t){this.$emit("set-text-color",t)},unsetTextColor(){this.$emit("unset-text-color")},setBgColor(t){this.$emit("set-bg-color",t)},unsetBgColor(){this.$emit("unset-bg-color")},undo(){this.$emit("undo")},redo(){this.$emit("redo")},setLink(){this.$emit("set-link")},addField(t){this.$emit("add-field",t)}}},et=tt,it=(i("8829"),Object(m["a"])(et,o,r,!1,null,"10d390a9",null)),st=it.exports,at=i("1ab4"),ot=i("672a"),rt=i("3560"),nt=i("cc86"),lt=i("97a2"),ct=i("58e6"),dt=i("e8d8"),mt=i("9751"),ht=i("795d"),ut=i("9980"),pt=function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{staticClass:"field-placeholder-wrapper"},[e("div",{attrs:{id:"field-placeholder"}},[e("div",{staticClass:"field"},[t._v(" "+t._s(t.node.attrs.fieldType)+" ")]),e("BaseIcon",{staticClass:"icon",attrs:{name:"eva-close",color:"red"},on:{click:t.deleteNode}})],1)])},ft=[],vt={name:"FieldPlaceholder",components:{NodeViewWrapper:at["c"]},props:at["e"]},yt=vt,bt=(i("2f12"),Object(m["a"])(yt,pt,ft,!1,null,"f6682294",null)),gt=bt.exports,wt=ut["d"].create({name:"FieldPlaceholder",group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{fieldType:{type:String,required:!0}}},parseHTML(){return[{tag:"FieldPlaceholder"}]},renderHTML({HTMLAttributes:t}){return["FieldPlaceholder",Object(ut["r"])(t)]},addNodeView(){return Object(at["d"])(gt)}}),Ct=i("dce4"),kt={name:"TextEditor",components:{Toolbar:st,EditorContent:at["b"]},props:{value:{type:Object,required:!0},field:{type:Object,default:()=>{}},hideToolBar:{type:Boolean,default:!0},formColumns:{type:Array,default:()=>[]}},data(){return{editor:null,textContent:""}},watch:{editor:{deep:!0,handler(){if(this.value){const e=new DOMParser,i=e.parseFromString(this.editor.getHTML(),"text/html");var t="";i.body.childNodes.forEach(e=>{let i=e.outerHTML.replace(new RegExp('"></fieldplaceholder>',"g"),""),s=i.split('<fieldplaceholder fieldtype="');t+=s.join("")});let s={text:this.editor.getHTML(),content:t};this.$emit("input",s)}}}},created(){this.initiateEditor()},beforeDestroy(){this.editor.destroy()},methods:{initiateEditor(){this.editor=new at["a"]({content:this.value.text,extensions:[ot["a"],rt["a"],nt["a"],lt["a"].configure({types:["heading","paragraph"]}),ct["a"],dt["a"],mt["a"].configure({multicolor:!0}),ht["a"].configure({placeholder:"Start typing …"}),wt,Text,Ct["b"]]})},setHeading(t){this.editor.chain().focus().toggleHeading({level:t}).run()},unsetHeading(){this.editor.chain().focus().clearNodes().unsetAllMarks().run()},toggleAlignment(t){this.editor.chain().focus().setTextAlign(t).run()},toggleBold(){this.editor.chain().focus().toggleBold().run()},toggleItalic(){this.editor.chain().focus().toggleItalic().run()},toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()},toggleBulletList(){this.editor.chain().focus().toggleBulletList().run()},toggleNumberList(){this.editor.chain().focus().toggleOrderedList().run()},increaseIndent(){this.editor.chain().focus().sinkListItem("listItem").run()},decreaseIndent(){this.editor.chain().focus().liftListItem("listItem").run()},undo(){this.editor.chain().focus().undo().run()},redo(){this.editor.chain().focus().redo().run()},setLink(){const t=this.editor.getAttributes("link").href,e=window.prompt("URL",t);null!==e&&(e?this.editor.chain().focus().extendMarkRange("link").setLink({href:e}).run():this.editor.chain().focus().extendMarkRange("link").unsetLink().run())},setTextColor(t){this.editor.chain().focus().setColor(t).run()},unsetTextColor(){this.editor.chain().focus().unsetColor().run()},setBgColor(t){this.editor.chain().focus().setHighlight({color:t}).run()},unsetBgColor(){this.editor.chain().focus().unsetHighlight().run()},addField(t){const e=`<FieldPlaceholder fieldId="${t.id}" fieldType="${t.value}">${t.value}</FieldPlaceholder>`;this.editor.chain().focus().insertContent(e).run()}}},St=kt,It=(i("74d9"),Object(m["a"])(St,s,a,!1,null,"b184c692",null));e["a"]=It.exports},"651a":function(t,e,i){t.exports=i.p+"img/psg-logo.20670f47.png"},"65c0":function(t,e,i){},"65c6":function(t,e,i){"use strict";var s=i("a026"),a=i("87e8"),o=i("e277");const r={role:"toolbar"};e["a"]=s["default"].extend({name:"QToolbar",mixins:[a["a"]],props:{inset:Boolean},render(t){return t("div",{staticClass:"q-toolbar row no-wrap items-center",class:this.inset?"q-toolbar--inset":null,attrs:r,on:{...this.qListeners}},Object(o["c"])(this,"default"))}})},"670a":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"toggle"}},t._l(t.options,(function(i){return e("div",{key:i,staticClass:"option",class:{"is-selected":t.value===i},on:{click:function(e){return t.$emit("input",i)}}},[t._v(" "+t._s(i)+" ")])})),0)},a=[],o={name:"Toggle",props:{value:{type:String,required:!0},options:{type:Array,required:!0}}},r=o,n=(i("fa79"),i("2877")),l=Object(n["a"])(r,s,a,!1,null,"0e83c5c2",null);e["a"]=l.exports},"686b":function(t,e,i){},"6c88":function(t,e,i){"use strict";i("5d0b")},"6f95":function(t,e,i){},"70a9":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cursor-pointer",attrs:{id:"async-select-field"}},[t.label?e("FormFieldLabel",{attrs:{label:t.label,"is-mandatory":t.isMandatory,tooltip:t.tooltip}}):t._e(),e("FormFieldWrapper",{ref:"wrapper",attrs:{"is-focused":t._isFocused,"is-clearable":t._isClearable,"is-readonly":t.isReadonly,"is-disabled":t.isDisabled,"has-error":!!t.error,"action-icon":"eva-chevron-down"},on:{click:t.showOptionPicker,clear:t.handleClear},scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"async-select"},[t._l(t.value,(function(i,s){return e("div",{key:i,staticClass:"chip"},[e("div",{staticClass:"q-mr-xs"},[t._v(t._s(i))]),e("BaseIcon",{attrs:{name:"eva-close"},on:{click:function(e){return e.stopPropagation(),t.removeOption(s)}}})],1)})),e("div",{staticClass:"col search-query"},[e("input",{ref:"searchQuery",attrs:{type:"text",placeholder:t._placeholder},domProps:{value:t.searchQuery},on:{focus:function(e){t.isFocused=!0},blur:function(e){t.isFocused=!1},input:t.debouncedInput,keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleKeypress.apply(null,arguments)}}})])],2),e("q-menu",{attrs:{target:t.$refs.wrapper,fit:"","no-focus":"","no-refocus":"","no-parent-event":"","transition-show":"scale","transition-hide":"scale"},model:{value:t.optionPicker,callback:function(e){t.optionPicker=e},expression:"optionPicker"}},[e("OptionPicker",{attrs:{"is-multiple":"",value:t.value,options:t._options,"new-option":t.newOption},on:{select:t.handleSelect,loadMore:t.getOptions}})],1)]},proxy:!0},{key:"action",fn:function(){return[t.isLoading?e("q-spinner",{staticClass:"q-mr-sm",attrs:{color:"secondary",size:"20px"}}):t._e()]},proxy:!0}])}),t.error?e("FormFieldError",{attrs:{error:t.error}}):t._e()],1)},a=[],o=(i("caad"),i("14d9"),i("3445")),r=i("0f01"),n=i("e683"),l=i("29db"),c=i("0d5e"),d=i("9996"),m=i("32e8"),h=i("5c8a"),u=i("85b1"),p={name:"AsyncMultiSelectField",components:{FormFieldLabel:o["a"],FormFieldWrapper:r["a"],FormFieldError:n["a"],OptionPicker:l["a"]},props:{value:{type:Array,default:()=>[]},label:{type:String,default:""},placeholder:{type:String,default:""},isMandatory:{type:Boolean,default:!1},tooltip:{type:String,default:""},isDisabled:{type:Boolean,default:!1},isReadonly:{type:Boolean,default:!1},isClearable:{type:Boolean,default:!0},error:{type:String,default:""},newOption:{type:Boolean,default:!1},apiPath:{type:String,default:""},columnName:{type:String,default:""}},data(){return{isFocused:!1,optionPicker:!1,searchQuery:"",options:[],isLoading:!1,optionsCount:0,optionsClone:[]}},computed:{_placeholder(){if(!this.value.length)return this.placeholder||"Select"},_isFocused(){return this.isFocused||this.optionPicker},_isClearable(){return this.isClearable&&!!this.value.length},_options(){return this.searchQuery?this.optionsClone.filter(t=>Object(d["a"])(t).includes(Object(d["a"])(this.searchQuery))):this.optionsClone}},watch:{options:{immediate:!0,deep:!0,handler(){Object(m["a"])(this.options,this.optionsClone)||(this.optionsClone=Object(h["a"])(this.options))}},optionPicker(){this.optionPicker||(this.searchQuery="")},columnName(){this.columnName&&(this.options=[],this.getOptions())}},created(){this.getOptions()},methods:{showOptionPicker(){this.optionPicker=!0},handleChange(t){this.searchQuery=t.target.value},handleSelect(t){const e=[...this.value],i=e.findIndex(e=>e===t);-1===i?e.push(t):e.splice(i,1),this.$emit("input",e),this.searchQuery=""},removeOption(t){const e=[...this.value];e.splice(t,1),this.$emit("input",e)},handleKeypress(){this.searchQuery&&this.newOption&&(this.handleSelect(this.searchQuery),this.$refs.searchQuery.blur())},handleClear(){this.$emit("input",[])},debouncedInput:Object(u["a"])((function(t){this.searchQuery=t.target.value}),500),async getOptions(){try{let t="";t=this.label?this.label:"object"===typeof this.columnName?this.columnName[0]:this.columnName;const e=await c["b"].post(this.apiPath,JSON.stringify({column:t,keyword:this.searchQuery,rowFrom:this.options.length||0,rowCount:this.options.length+10})),{status:i,data:s}=e;if(200!==i)throw e;const a=JSON.parse(s);this.options.push(...a)}catch(t){console.error(t),this.$alert.error("Error fetching options")}},loadMoreOptions(){}}},f=p,v=(i("c187"),i("2877")),y=i("4e73"),b=i("0d59"),g=i("93dc"),w=i.n(g),C=Object(v["a"])(f,s,a,!1,null,"b0cc9a00",null);e["a"]=C.exports;w()(C,"components",{QMenu:y["a"],QSpinner:b["a"]})},7104:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Sheet",{attrs:{value:t.value,"no-padding":"",width:"100vw"},on:{input:t.closeFileSheet},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{attrs:{id:"file"}},[t.menuActions?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"files",expression:"'files'",modifiers:{top:!0}}],attrs:{"is-flat":"",icon:"eva-menu-2"},on:{click:function(e){return t.$emit("show-files")}}}):t._e(),e("div",{staticClass:"avatar q-ml-sm"},[e("FileIcon",{attrs:{"mime-type":t.type}})],1),e("div",{staticClass:"q-ml-md"},[e("div",{staticClass:"filename"},[t._v(" "+t._s(t.file.name)+" "),2===t.file.checkinStatus?e("q-chip",{staticClass:"chips red-hover ellipsis",staticStyle:{height:"20px","font-size":"12px"},attrs:{color:"red","text-color":"white"}},[t._v(" Readonly ")]):t._e()],1),e("div",{staticClass:"meta"},[e("div",[t._v("Archived At: "+t._s(t.$day.format(t.file.createdAt)))]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v("Archived By: "+t._s(t.file.createdBy))]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v("File Size: "+t._s(t.fileSize))])],1)])],1)]},proxy:!0},t.menuActions?{key:"actions",fn:function(){return[t.checkTenant?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Data Extraction",expression:"'Data Extraction'",modifiers:{top:!0}}],staticClass:"q-ml-xs btnColor",attrs:{icon:"mdi-creation",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){t.summarizeModal=!0}}}):t._e(),e("div",{staticClass:"row q-mr-sm"},[2===t.file.checkinStatus&&t.file.checkinBy===t.$store.state.session.email?e("q-chip",{staticClass:"chips ellipsis",staticStyle:{height:"25px"},attrs:{outline:"",color:"orange",clickable:""},on:{click:function(e){return t.showCheckinUploadFile(t.file)}}},[e("q-avatar",{attrs:{icon:"mdi-file-upload-outline",color:"orange","text-color":"white"}}),t._v(" CheckIn ")],1):t._e()],1),t.isSignProcessFound&&0===t.file.checkinStatus?e("div",{staticClass:"row q-mr-sm"},[e("q-chip",{staticClass:"chips ellipsis",staticStyle:{height:"25px"},attrs:{outline:"",color:"primary",clickable:""},on:{click:t.checkSignProcess}},[e("q-avatar",{attrs:{icon:"mdi-file-outline",color:"primary","text-color":"white"}}),t._v(" Request for Sign ")],1)],1):t._e(),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[e("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{height:t.scrollbarHeight,width:"240px"}},t._l(t.actionList,(function(i){return e("ListItem",{key:i.id,attrs:{icon:i.icon,label:i.label,visible:i.visible,disabled:i.disable,"sub-list":i.subMenu||[]},on:{click:function(e){return t.updateColumns(i)},subListAction:t.checkWorkflow}})})),1)],1)],1)]},proxy:!0}:null],null,!0)},[e("div",{attrs:{id:"content-wrapper"}},[t.menuActions?e("div",{staticClass:"file-list"},[e("iframe",{ref:"myFiles",attrs:{id:"file-frame",src:t.fileLink(),frameborder:"0"}})]):t._e(),t.documentEdit?t._e():e("div",{staticClass:"aside"},[e("div",{staticClass:"action-bar"},[e("Tabs",{attrs:{tabs:t.tabs},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}})],1),t.loadingBar?e("BaseLoadingBarSheet"):t._e(),e("div",["METADATA"===t.tab?e("FileDetails",{attrs:{file:t.file,"repository-field":t.repositoryField,"file-data":t.fileData,"is-retention-required":t.menuActions,"retention-list":t.retentionList},on:{refresh:t.getFileRetentions}}):t._e(),"COMMENTS"===t.tab?e("Comments",{attrs:{"repository-id":t.file.repositoryId,"item-id":t.file.id}}):t._e(),"HISTORY"===t.tab?e("DocumentHistory",{attrs:{history:t.history},on:{get:t.getFileHistory}}):t._e()],1)],1)]),e("Password",{attrs:{value:t.showPasswordModal,header:t.selectList,"repository-id":t.file.repositoryId,"item-id":t.file.id},on:{close:function(e){t.showPasswordModal=!1}}}),e("MetaDataEdit",{attrs:{value:t.showMetaDataEditModal,file:t.file,"repository-field":t.repositoryField,"file-data":t.fileData,"edit-from-file-sheet":""},on:{close:function(e){t.showMetaDataEditModal=!1},save:t.saveMetaData}}),e("EncryptDecrypt",{attrs:{value:t.showEncryptDecryptModal,header:t.selectList},on:{close:function(e){t.showEncryptDecryptModal=!1}}}),e("HidePage",{attrs:{value:t.showHidePageModal,header:t.selectList},on:{close:function(e){t.showHidePageModal=!1}}}),e("Task",{attrs:{value:t.showTaskModal},on:{close:function(e){t.showTaskModal=!1}}}),e("Alert",{attrs:{value:t.showAlertModal},on:{close:function(e){t.showAlertModal=!1}}}),e("CheckedInOut",{attrs:{value:t.showCheckedInOutModal,header:t.selectList,file:t.file},on:{close:function(e){t.showCheckedInOutModal=!1},checkout:t.closeFileSheet,downloadFile:t.fileDownload}}),e("Delete",{attrs:{value:t.showDeleteModal,header:t.selectList,"repository-id":t.file.repositoryId,"item-id":t.file.id},on:{close:t.closeDeleteFile}}),e("AddVault",{attrs:{value:t.showAddVaultModal},on:{close:function(e){t.showAddVaultModal=!1}}}),e("EmailSharing",{attrs:{"repository-id":t.file.repositoryId,"file-list":t.selectedFileList},on:{"update:fileList":function(e){t.selectedFileList=e},"update:file-list":function(e){t.selectedFileList=e}},model:{value:t.emailSharingSheet,callback:function(e){t.emailSharingSheet=e},expression:"emailSharingSheet"}}),e("Sheet",{attrs:{width:t.formWidth,"has-footer":"","no-padding":""},on:{input:t.closeProcessSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.headerTitle)+" ")]},proxy:!0},t.documentSignProcess?null:{key:"footer",fn:function(){return[t.actions?e("div",{staticClass:"footer row"},[t._l(t.actions,(function(i){return[e("BaseButton","Approve"===i||"Complete"===i||"Rightsize"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"positive"},on:{click:function(e){return t.validateRequest(i)}}}:"Reject"===i||"Terminate"===i||"Force Close"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"red"},on:{click:function(e){return t.validateRequest(i)}}}:"Forward"===i||"Reply"===i?{key:i,staticClass:"q-ml-md",attrs:{label:i,color:"orange"},on:{click:function(e){return t.validateRequest(i)}}}:{key:i,staticClass:"q-ml-md",attrs:{label:i},on:{click:function(e){return t.validateRequest(i)}}})]}))],2):t._e()]},proxy:!0}],null,!0),model:{value:t.processSheet,callback:function(e){t.processSheet=e},expression:"processSheet"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 115px)"}},[t.formId?e("div",[e("RenderForm",{attrs:{"form-id":t.formId,panels:t.panels,"secondary-panels":t.secondaryPanels,"form-settings":t.formSettings,"form-model":t.formModel,"save-action":t.saveAction,"workflow-form-model":t.workflowFormModel,"enable-controls":t._enableControls},on:{"update:saveAction":function(e){t.saveAction=e},"update:save-action":function(e){t.saveAction=e},"update:workflowFormModel":function(e){t.workflowFormModel=e},"update:workflow-form-model":function(e){t.workflowFormModel=e}}})],1):t._e(),t.documentSignProcess?e("div",[e("div",{staticClass:"fileFrame"},[e("div",{staticClass:"file-list"},[e("iframe",{attrs:{id:"file-frame",src:t.itemLink(),frameborder:"0"}})])])]):t._e()])],1),e("div",{staticClass:"col-auto q-mr-sm leftBorder"},[t._l(t.processTabs,(function(i){return["TASK"!==i.value||"TASK"===i.value&&t.addTaskEnabled?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"processTab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary"},on:{click:function(e){return t.showLinks(i.value)}}},[i.count?e("span",{staticClass:"badge"},[t._v(t._s(i.count)+" ")]):t._e()]):t._e()]}))],2)])]),e("Sheet",{attrs:{width:"30vw"},on:{input:t.closeAttachmentsSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"upload documents",expression:"'upload documents'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-upload",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.$refs.attachments.click()}}})]},proxy:!0}]),model:{value:t.attachmentSheet,callback:function(e){t.attachmentSheet=e},expression:"attachmentSheet"}},[e("div",[e("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:t.uploadWflowAttachments}}),t._l(t.attachmentList,(function(i){return[e("div",{key:i.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(i.name)}})],1),e("div",{staticClass:"col",on:{click:function(e){return t.openFile(i)}}},[t._v(" "+t._s(i.name)+" ")]),e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.attachmentDelete(i)}}})],1)]),e("div",{staticClass:"meta"},[e("div",[t._v(t._s(t.$day.format(i.createdAt)))]),i.createdBy?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.createdByEmail))])]:t._e(),i.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.attachedFileSize(i.size)))])]:t._e()],2)])]}))],2)]),e("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"30"},on:{input:t.closeCommentsSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments ")]},proxy:!0}]),model:{value:t.commentsSheet,callback:function(e){t.commentsSheet=e},expression:"commentsSheet"}},[e("div",[e("BaseScrollbar",{attrs:{height:"calc(100vh - 155px)"}},[t._l(t.commentsList,(function(i,s){return[e("q-chat-message",{key:s,staticClass:"q-ma-sm",attrs:{name:i.createdBy===t.$store.state.session.id?"me":i.createdByEmail,text:t.commentsText(i),"text-html":"",sent:i.createdBy===t.$store.state.session.id,stamp:t.lastCommentDuration(i),"bg-color":t.bgCommentsColor(i)}})]}))],2)],1),e("div",{staticClass:"col q-pa-sm borderTop"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}})],1),e("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:t.saveComment}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(e){t.advancedCommentsSheet=!0}}})],1)])])]),e("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(e){t.fileSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"attachmentFileHeader"},[e("div",{staticClass:"avatar q-ml-sm"},[e("FileIcon",{attrs:{"mime-type":t.fileType(t.selectedFile.name)}})],1),e("div",{staticClass:"q-ml-md"},[e("div",{staticClass:"filename"},[t._v(" "+t._s(t.selectedFile.name)+" ")]),e("div",{staticClass:"meta"},[e("div",[t._v("Archived At: "+t._s(t.$day.format(t.selectedFile.createdAt)))]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v("Archived By: "+t._s(t.selectedFile.createdByEmail))]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v("File Size: "+t._s(t.attachedFileSize(t.selectedFile.size)))])],1)])])]},proxy:!0}]),model:{value:t.fileSheet,callback:function(e){t.fileSheet=e},expression:"fileSheet"}},[e("div",{staticClass:"attachmentFileFrame"},[e("div",{staticClass:"file-list"},[e("iframe",{attrs:{id:"file-frame",src:t.attachedFileLink(),frameborder:"0"}})])])]),e("Sheet",{attrs:{width:"30vw"},on:{input:t.closeTaskSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Tasks ")]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Add Task",expression:"'Add Task'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-plus",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:t.addTask}})]},proxy:!0}]),model:{value:t.taskSheet,callback:function(e){t.taskSheet=e},expression:"taskSheet"}},[e("div",[t._l(t.taskEntries,(function(i){return[e("div",{key:i.id,staticClass:"taskEntries"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto q-mr-md",staticStyle:{"margin-top":"3px"},on:{click:function(e){return t.$emit("viewTask",i.id)}}},[t._v(" "+t._s(i.name)+" ")]),e("q-chip",{attrs:{size:"10px",color:t.getColor(i.priority),"text-color":"white"}},[t._v(" "+t._s(i.priority)+" ")]),e("q-chip",{attrs:{size:"10px",color:t.getColor(i.status),"text-color":"white"}},[t._v(" "+t._s(i.status)+" ")])],1)]),e("div",{staticClass:"meta row"},[e("div",{staticClass:"col-12"},[t._v("Assigned To: "+t._s(i.assigned))]),e("div",{staticClass:"col-12"},[t._v(" Start Date: "+t._s(t.$day.format(i.startDate,!1))+" "),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t._v(" End Date: "+t._s(t.$day.format(i.endDate,!1))+" ")],1)])])]}))],2)]),t.taskFormId?e("AddTask",{attrs:{value:t.addTaskSheet,"form-settings":t.addTaskForm.settings,panels:t.addTaskForm.panels,"secondary-panels":t.addTaskForm.secondaryPanels,"form-id":t.taskFormId,"repository-id":t.taskRepositoryId,"task-model":t.selectedTask,"document-task":!0,file:t.file,mode:t.taskMode},on:{close:function(e){t.addTaskSheet=!1},addEntry:t.addTaskEntry}}):t._e(),e("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(e){t.advancedCommentsSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[e("TextBuilderField",{model:{value:t.advancedCommentText,callback:function(e){t.advancedCommentText=e},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:t.saveAdvancedComment}})]},proxy:!0}]),model:{value:t.advancedCommentsSheet,callback:function(e){t.advancedCommentsSheet=e},expression:"advancedCommentsSheet"}}),e("Sheet",{attrs:{width:"470px","has-footer":""},on:{input:t.reset},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Upload File ")]},proxy:!0},{key:"default",fn:function(){return[t.filesToUpload.length?t._e():e("Dropzone",{attrs:{"show-workspace-repository":!1,"workspace-id":Number(t.$route.query.workspaceId),"repository-id":Number(t.file.repositoryId),"has-multiple":!1},on:{upload:t.queueFilesForUpload}}),t.filesError?e("FormFieldError",{staticClass:"q-mx-md",attrs:{error:"Please upload file"}}):t._e(),t.filesToUpload.length?e("UploadingFileList",{attrs:{files:t.filesToUpload,"show-progress":t.showProgress,"show-delete-btn":t.showDeleteBtn},on:{delete:t.deleteUploadFile}}):t._e(),e("div",{staticClass:"q-px-md"},[e("ValidationObserver",{ref:"checkin"},[e("ValidationProvider",{attrs:{name:"comment",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextAreaField",{staticClass:"q-mb-lg",attrs:{label:"Purpose for checking in","is-mandatory":"",error:i[0]},model:{value:t.comments,callback:function(e){t.comments=e},expression:"comments"}})]}}])})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:t.reset}}),e("BaseButton",{attrs:{label:"save"},on:{click:t.uploadFile}})]},proxy:!0}]),model:{value:t.showCheckinModal,callback:function(e){t.showCheckinModal=e},expression:"showCheckinModal"}}),e("Modal",{attrs:{width:"40vw",height:"60vh","has-footer":""},on:{input:function(e){t.signProcessModal=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Document Sign")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"field-wrapper"},[e("SingleChoiceField",{staticClass:"q-mb-lg",attrs:{label:"Signature Type","is-mandatory":"",options:t.signTypes,"options-per-line":2},model:{value:t.signType,callback:function(e){t.signType=e},expression:"signType"}}),e("SingleChoiceField",{staticClass:"q-mb-lg",attrs:{label:"Order Type","is-mandatory":"",options:t.orderTypes,"options-per-line":2},model:{value:t.orderType,callback:function(e){t.orderType=e},expression:"orderType"}})],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Continue",color:"primary"},on:{click:t.openSignProcess}})]},proxy:!0}]),model:{value:t.signProcessModal,callback:function(e){t.signProcessModal=e},expression:"signProcessModal"}}),e("Summarizing",{attrs:{itemid:t.file.id,"repository-id":t.file.repositoryId,page:"REPOSITORY"},on:{input:function(e){t.summarizeModal=!1}},model:{value:t.summarizeModal,callback:function(e){t.summarizeModal=e},expression:"summarizeModal"}})],1)},a=[],o=(i("14d9"),i("a7d2")),r=i("1b0d"),n=i("381e"),l=i("fa1f"),c=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"file-details"}},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[e("div",{attrs:{id:"item-overview"}},[e("div",{staticClass:"version"},[t._v("Version : "+t._s(t.file.fileVersion))]),e("table",[e("tbody",[t._l(t.fileData,(function(i,s){return e("tr",{key:s+""+i.name,staticClass:"tableRow",on:{click:function(e){return t.textSearchInFile(i.value)}}},[e("td",{staticClass:"label"},[t._v(t._s(i.name))]),"TABLE"!==i.type?e("td",{staticClass:"value"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col ellipsis"},[t._t(i.name,(function(){return[t._v(" "+t._s(i.value||"-")+" ")]}),{value:i.value})],2),t.isRetentionRequired&&"DATE"===i.type&&i.value?[e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Notification Settings",expression:"'Notification Settings'",modifiers:{top:!0}}],staticClass:"actions",attrs:{"is-flat":"","no-border":"",icon:"eva-settings-outline",color:t.checkRetention(i.id)},on:{click:function(e){return t.showRetention(i.id)}}})],1)]:t._e()],2)]):e("td",{staticClass:"value",staticStyle:{padding:"8px"}},[t._t(i.name,(function(){return[e("BaseActionButton",{attrs:{icon:"mdi-table-large","is-flat":"","no-border":""},on:{click:function(e){return t.showTable(i.name)}}})]}))],2)])})),e("tr",{staticClass:"tableRow"},[e("td",{staticClass:"label"},[t._v("Uploaded Date")]),e("td",{staticClass:"value"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col ellipsis"},[t._v(" "+t._s(t.$day.format(t.file.createdAt))+" ")]),t.isRetentionRequired?e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Notification Settings",expression:"'Notification Settings'",modifiers:{top:!0}}],staticClass:"actions",attrs:{"is-flat":"","no-border":"",icon:"eva-settings-outline",color:t.checkRetention(0)},on:{click:function(e){return t.showRetention(0)}}})],1):t._e()])])])],2)])])]),e("Modal",{attrs:{width:"60vw",height:"80vh"},on:{input:function(e){t.expandTableModal=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.tableHeader))]},proxy:!0},{key:"default",fn:function(){return[e("div",{attrs:{id:"tableData"}},[t.tableData.cellvalues?[e("table",t._l(t.tableData.cellvalues,(function(i,s){return e("tr",{key:s},t._l(i,(function(i){return e("NoHeader"===i.kind?"td":"th",{key:`r${s}_c${i.columnindex}`,tag:"th"},[t._v(" "+t._s(i.cellvalue)+" ")])})),1)})),0)]:[e("table",[e("thead",[e("tr",t._l(t.tableData[0],(function(i,s){return e("th",{key:s},[t._v(" "+t._s(s)+" ")])})),0)]),e("tbody",t._l(t.tableData,(function(i,s){return e("tr",{key:s},t._l(i,(function(i,s){return e("td",{key:s},[t._v(" "+t._s(i)+" ")])})),0)})),0)])]],2)]},proxy:!0}]),model:{value:t.expandTableModal,callback:function(e){t.expandTableModal=e},expression:"expandTableModal"}}),e("Sheet",{attrs:{width:"750px","has-footer":""},on:{input:t.reset},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Notification Settings ")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"row",attrs:{id:"tab-settings"}},[e("div",{staticClass:"content"},[e("div",{},[e("ValidationObserver",{ref:"retention"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"GENERAL"===t.activeTab,expression:"activeTab === 'GENERAL'"}]},[e("div",{staticClass:"row q-col-gutter-md"},[e("div",{staticClass:"col-6"},[e("ValidationProvider",{attrs:{name:"name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextField",{staticClass:"q-mb-md",attrs:{label:"name","is-mandatory":"",error:i[0]},model:{value:t.retention.name,callback:function(e){t.$set(t.retention,"name",e)},expression:"retention.name"}})]}}])})],1)]),e("SingleChoiceField",{staticClass:"q-mb-md",attrs:{"is-mandatory":"",label:"Set Notification Date","options-per-line":t.notificationDateOptions.length,options:t.notificationDateOptions},model:{value:t.notificationDate,callback:function(e){t.notificationDate=e},expression:"notificationDate"}}),"field_date"===t.notificationDate?[e("FormFieldLabel",{staticClass:"q-mb-lg",attrs:{label:t.getFieldDateLabel}}),e("BaseSeparator",{staticClass:"q-mb-md"})]:t._e(),"specific_date"===t.notificationDate?[e("FormFieldLabel",{staticClass:"q-mb-lg",attrs:{label:"Define a specific date for document notification, activating automatic reminders when the chosen date is reached.",transform:""}}),e("BaseSeparator",{staticClass:"q-mb-md"}),e("ValidationProvider",{attrs:{name:"notification date",rules:t.dateValidation},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("DateField",{staticClass:"q-mb-md",attrs:{label:"notification date","is-mandatory":"",validation:"",error:i[0]},model:{value:t.retention.actionDate,callback:function(e){t.$set(t.retention,"actionDate",e)},expression:"retention.actionDate"}})]}}],null,!1,2663690688)})]:t._e(),"future_date"===t.notificationDate?e("div",{staticClass:"row q-col-gutter-md"},[e("div",{staticClass:"col-12"},[e("FormFieldLabel",{staticClass:"q-mb-md",attrs:{label:"Allows to schedule a future expiry date\n              based on an existing date, which prompts automatic reminders\n              when due",transform:""}}),e("BaseSeparator")],1),e("div",{staticClass:"col-6"},[e("ValidationProvider",{attrs:{name:"Duration",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("CounterField",{staticClass:"q-mb-md",attrs:{label:"Duration",error:i[0]},model:{value:t.retention.duration,callback:function(e){t.$set(t.retention,"duration",e)},expression:"retention.duration"}})]}}],null,!1,3325698584)})],1),e("div",{staticClass:"col-6"},[e("ValidationProvider",{attrs:{name:"Duration Type",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("SelectField",{staticClass:"q-mb-md",attrs:{label:"Duration Type",options:t.durationTypes,error:i[0]},model:{value:t.retention.durationType,callback:function(e){t.$set(t.retention,"durationType",e)},expression:"retention.durationType"}})]}}],null,!1,1187220727)})],1)]):t._e(),e("div",{staticClass:"row q-col-gutter-md"},[e("div",{staticClass:"col-6"},[e("ValidationProvider",{attrs:{name:"user",rules:{required:0===t.retention.notification.group.length}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("MultiSelectField",{staticClass:"q-m-md",attrs:{label:"users",options:t.userList,error:i[0]},model:{value:t.retention.notification.user,callback:function(e){t.$set(t.retention.notification,"user",e)},expression:"retention.notification.user"}})]}}])})],1),e("div",{staticClass:"col-6"},[e("ValidationProvider",{attrs:{name:"group",rules:{required:0===t.retention.notification.user.length}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("MultiSelectField",{staticClass:"q-m-md",attrs:{label:"groups",options:t.groupList,error:i[0]},model:{value:t.retention.notification.group,callback:function(e){t.$set(t.retention.notification,"group",e)},expression:"retention.notification.group"}})]}}])})],1)]),t.dateError?e("FormFieldError",{attrs:{error:t.dateError}}):t._e()],2),"NOTIFICATION"===t.activeTab?[e("FormFieldLabel",{attrs:{label:"Mail Subject"}}),e("TextEditor",{staticClass:"mail-class",attrs:{"hide-tool-bar":!1,"form-columns":t.fieldColumns},model:{value:t.retention.notification.mailSubject,callback:function(e){t.$set(t.retention.notification,"mailSubject",e)},expression:"retention.notification.mailSubject"}}),e("FormFieldLabel",{staticClass:"q-my-md",attrs:{label:"Mail Content"}}),e("TextEditor",{staticClass:"mail-class",attrs:{"form-columns":t.fieldColumns},model:{value:t.retention.notification.mailBody,callback:function(e){t.$set(t.retention.notification,"mailBody",e)},expression:"retention.notification.mailBody"}})]:t._e()],2)],1)]),e("div",{staticClass:"tabs"},t._l(t.tabs,(function(i){return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"q-mb-md",attrs:{"is-flat":t.activeTab!==i.value,icon:i.icon,color:t.activeTab===i.value?"primary":"gray"},on:{click:function(e){t.activeTab=i.value}}})})),1)])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"clear"},on:{click:t.reset}}),e("BaseButton",{attrs:{label:"save"},on:{click:t.saveRetention}})]},proxy:!0}]),model:{value:t.retentionSettings,callback:function(e){t.retentionSettings=e},expression:"retentionSettings"}})],1)},d=[],m=i("6a70"),h=i("cc77"),u=i("c3d2"),p=i("b3d1"),f=i("12b8"),v=i("7bb1"),y=i("869e"),b=i("3445"),g=i("9234"),w=i("53c1"),C=i("64ab"),k=i("e683"),S={name:"FileDetails",components:{Modal:m["a"],Sheet:n["a"],CounterField:h["a"],MultiSelectField:u["a"],TextField:p["a"],SelectField:f["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],CheckboxField:y["a"],FormFieldLabel:b["a"],TextEditor:C["a"],SingleChoiceField:g["a"],DateField:w["a"],FormFieldError:k["a"]},props:{file:{type:Object,required:!0},repositoryField:{type:Array,required:!0},fileData:{type:Array,required:!0},isRetentionRequired:{type:Boolean,default:!1},retentionList:{type:Array,default:()=>[]}},data(){return{expandTableModal:!1,tableHeader:"",tableData:[],retentionFieldId:0,retentionSettings:!1,retention:{id:0,repositoryId:this.file.repositoryId,itemId:this.file.id,name:"",fieldId:"",duration:0,durationType:"Day",conditionJson:"",action:"",actionDate:"",notification:{duration:0,durationType:"Day",user:[],group:[],mailSubject:{text:"",content:""},mailBody:{text:"",content:""}}},durationTypes:[{id:this.$nano.id(),label:"Year",value:"Year"},{id:this.$nano.id(),label:"Month",value:"Month"},{id:this.$nano.id(),label:"Day",value:"Day"}],userList:[],groupList:[],retentionActions:[{id:this.$nano.id(),label:"No Action",value:"NO_ACTION"},{id:this.$nano.id(),label:"Hide",value:"HIDE"},{id:this.$nano.id(),label:"Move to Trash",value:"TRASH"},{id:this.$nano.id(),label:"Permanent Delete",value:"DELETE"}],notify:!0,notificationDate:"field_date",activeTab:"GENERAL",tabs:[{id:this.$nano.id(),label:"general",value:"GENERAL",icon:"mdi-tune"},{id:this.$nano.id(),label:"notification",value:"NOTIFICATION",icon:"mdi-bell-outline"}],dateError:""}},computed:{fieldColumns(){let t=[{id:this.$nano.id(),label:"Uploaded Date",value:"#UPLOADEDDATE#",display:"",color:"#643094",hasDefault:!0},{id:this.$nano.id(),label:"Uploaded By",value:"#UPLOADBY#",display:"",color:"#643094",hasDefault:!0}],e=this.repositoryField.map(t=>({id:t.id,label:t.name,value:t.id,hasDefault:!1}));return[...t,...e]},getFieldDateLabel(){if(this.retention.fieldId){let t=this.repositoryField.find(t=>t.id===this.retention.fieldId);return`Set a Document's expiry based on\n                    an ${t.name}, which triggers auto-reminders when due.`}return""},notificationDateOptions(){return this.retention.fieldId?[{id:this.$nano.id(),label:"Use Field Date",value:"field_date"},{id:this.$nano.id(),label:"Use Specific Date",value:"specific_date"},{id:this.$nano.id(),label:"Set Future Date from Field Date",value:"future_date"}]:[{id:this.$nano.id(),label:"Use Specific Date",value:"specific_date"},{id:this.$nano.id(),label:"Set Future Date from Field Date",value:"future_date"}]},dateValidation(){const t={};"specific_date"===this.notificationDate&&(t.required=!0);let e="";if(this.retention.fieldId){let t=this.fileData.find(t=>t.id===this.retention.fieldId);e=t.value}else e=this.$day.format(this.file.createdAt,!1);return e&&(t.minDate=e),t}},watch:{file:{immediate:!0,deep:!0,async handler(){this.file}},notificationDate(){this.notificationDate&&(this.dateError="")}},mounted(){this.getUserList(),this.getGroupList()},methods:{textSearchInFile(t){localStorage.setItem("findText",t)},showTable(t){let e=this.fileData.filter(e=>e.name===t);this.tableHeader=e[0].name,this.tableData=JSON.parse(e[0].value),this.expandTableModal=!0},checkRetention(t){return this.retentionList.filter(e=>e.fieldId===t).length?"orange":""},showRetention(t){this.retentionFieldId=t,this.reset();let e=this.retentionList.find(e=>e.fieldId===t);e&&(this.retention.id=e.id,this.retention.name=e.name,this.retention.duration=e.duration,this.retention.durationType=e.durationType,this.retention.action=e.action,this.retention.actionDate=e.actionDate,this.notificationDate="field_date",this.retention.duration?this.notificationDate="future_date":this.retention.actionDate&&(this.notificationDate="specific_date"),this.retention.notification=JSON.parse(e.notifyJson),e.notifyJson&&(this.notify=!0),this.retention.notification.mailSubject||(this.retention.notification.mailSubject={text:"",content:""},this.retention.notification.mailBody={text:"",content:""})),this.retention.fieldId=t,e||(this.retention.fieldId?this.notificationDate="field_date":this.notificationDate="future_date"),this.retentionSettings=!0},reset(){this.activeTab="GENERAL",this.retentionSettings=!1,this.retention.name="",this.retention.fieldId="",this.retention.action="NO_ACTION",this.retention.actionDate="",this.retention.durationType="Day",this.retention.duration=0,this.retention.notification={duration:0,durationType:"Day",user:[],group:[],mailSubject:{text:"",content:""},mailBody:{text:"",content:""}},this.dateError="",this.notify=!0},async getUserList(){const{error:t,payload:e}=await r["s"].getUserList();t?this.$alert.error("Error fetching users"):this.userList=e&&e.map(t=>({id:this.$nano.id(),label:t.value,value:t.id}))},async getGroupList(){const{error:t,payload:e}=await r["i"].getGroupList();t?this.$alert.error("Error fetching groups"):this.groupList=e&&e.map(t=>({id:this.$nano.id(),label:t.value,value:t.id}))},async saveRetention(){"field_date"===this.notificationDate?(this.retention.actionDate="",this.retention.duration=0,this.retention.durationType="Day"):"specific_date"===this.notificationDate?(this.retention.duration=0,this.retention.durationType="Day"):"future_date"===this.notificationDate&&(this.retention.actionDate="");let t="";if(this.retention.fieldId){let e=this.fileData.find(t=>t.id===this.retention.fieldId);t=e.value}else t=this.$day.format(this.file.createdAt,!1);let e="",i="";if("future_date"===this.notificationDate?("Day"===this.retention.durationType&&(e=this.$day.addDate(t,this.retention.duration)),"Month"===this.retention.durationType&&(e=this.$day.addMonth(t,this.retention.duration)),"Year"===this.retention.durationType&&(e=this.$day.addYear(t,this.retention.duration)),i=this.$day.isDateGreater(t,this.$day.newDate())?t:this.$day.newDate()):e="specific_date"===this.notificationDate?this.retention.actionDate:t,!(e>=this.$day.newDate()))return void("field_date"===this.notificationDate?this.dateError="Its completed date. please select any one option in two options":this.dateError=`Please select any date after (${i}) this date`);this.dateError="";const s=await this.$refs.retention.validate();if(s){if(this.notify?this.retention.notifyJson=JSON.stringify(this.retention.notification):this.retention.notifyJson="",this.$store.commit("showLoadingBar"),this.retention.id&&this.retention.fieldId===this.retentionFieldId){const{error:t}=await r["p"].updateRetention(this.retention.id,this.retention);if(t)return void this.$alert.error(t);this.$alert.success("Notification rule updated succesfully")}else{const{error:t}=await r["p"].addRetention(this.retention);if(t)return void this.$alert.error(t);this.$alert.success("Notification rule added succesfully")}this.$store.commit("hideLoadingBar"),this.$emit("refresh"),this.reset()}}}},I=S,_=(i("d2fb"),i("2877")),T=Object(_["a"])(I,c,d,!1,null,"1ffcec1e",null),$=T.exports,x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("div",{staticClass:"q-pa-xs"},[e("BaseScrollbar",{staticClass:"q-pa-sm",attrs:{height:"calc(100vh - 215px)"}},[t._l(t.commentsList,(function(i,s){return[e("q-chat-message",{key:s,staticClass:"q-ma-sm",attrs:{name:i.createdBy===t.$store.state.session.id?"me":i.createdByEmail,text:t.commentsText(i),"text-html":"",sent:i.createdBy===t.$store.state.session.id,stamp:t.lastCommentDuration(i),"bg-color":t.bgCommentsColor(i)}})]}))],2)],1),e("div",{staticClass:"col q-pa-sm borderTop"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}})],1),e("div",{staticClass:"col-auto",staticStyle:{margin:"auto"}},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm commentAction",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:t.saveComment}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm commentAction",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(e){t.advancedCommentsSheet=!0}}})],1)])]),e("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(e){t.advancedCommentsSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[e("TextBuilderField",{model:{value:t.advancedCommentText,callback:function(e){t.advancedCommentText=e},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Post",icon:"eva-paper-plane-outline",color:"primary"},on:{click:t.saveAdvancedComment}})]},proxy:!0}]),model:{value:t.advancedCommentsSheet,callback:function(e){t.advancedCommentsSheet=e},expression:"advancedCommentsSheet"}})],1)},A=[],L=i("6df3"),F=i("695e"),P={name:"FileComments",components:{TextAreaField:L["a"],TextBuilderField:F["a"],Modal:m["a"]},props:{repositoryId:{type:Number,default:0},itemId:{type:Number,default:0}},data(){return{commentText:"",commentsList:[],advancedCommentsSheet:!1,advancedCommentText:""}},created(){this.getComments()},methods:{commentsText(t){return t.processId?[`<b>${t.workflowName} : ${t.requestNo}</b><br/> ${t.comments}`]:2===t.checkinStatus?["<b>CheckOut:</b><br/> "+t.comments]:1===t.checkinStatus?["<b>CheckIn:</b><br/> "+t.comments]:[t.comments]},bgCommentsColor(t){return t.processId?"orange-1":2===t.checkinStatus?"red-1":1===t.checkinStatus?"green-1":t.createdBy===this.$store.state.session.id?"primary-1":"secondary-1"},lastCommentDuration(t){const e=t.createdAt instanceof Date?t.createdAt:new Date(t.createdAt),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(e.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const t=a/s[o];return i.format(Math.round(t),o)}},async getComments(){this.commentsList=[],this.$store.commit("showLoadingBar");const{error:t,payload:e}=await r["p"].getFileComments(this.repositoryId,this.itemId);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e.length&&(this.commentsList=e)},async saveComment(){if(this.commentText){this.$store.commit("showLoadingBar");const{error:t}=await r["p"].insertFileComments(this.repositoryId,this.itemId,{comments:this.commentText});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.commentText="",this.getComments()}},async saveAdvancedComment(){if(this.advancedCommentText){this.$store.commit("showLoadingBar");const{error:t}=await r["p"].insertFileComments(this.repositoryId,this.itemId,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}}}},B=P,D=(i("81e5"),i("8169")),M=i("93dc"),N=i.n(M),O=Object(_["a"])(B,x,A,!1,null,"f1ea4660",null),q=O.exports;N()(O,"components",{QChatMessage:D["a"]});var E=i("b94d"),V=i("cade"),R=function(){var t=this,e=t._self._c;return e("Confirm",{attrs:{value:t.value,icon:t.header.icon||"","icon-color":"primary",width:"450px"},on:{input:t.closeModal},scopedSlots:t._u([{key:"title",fn:function(){var e;return[t._v(t._s(null===(e=t.header)||void 0===e?void 0:e.label))]},proxy:!0},{key:"default",fn:function(){return[e("ValidationObserver",{ref:"form"},[e("ValidationProvider",{attrs:{name:"password",rules:{required:!0,password:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("PasswordField",{staticClass:"q-my-lg",attrs:{label:"Set_Password"===t.header.id?"enter a password for to protect this file":"enter a password to remove this file protection","is-mandatory":"",tooltip:t._passwordHint,error:i[0]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})]}}])}),e("ValidationProvider",{attrs:{name:"password",rules:{required:!0,password:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("PasswordField",{staticClass:"q-mb-lg",attrs:{label:"confirm password","is-mandatory":"",tooltip:t._passwordHint,error:i[0]},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:t.closeModal}}),e("BaseButton",{attrs:{label:"save"},on:{click:t.updatePassword}})]},proxy:!0}])})},z=[],j=i("1c54"),U=i("8bc3"),H=i("0c6e"),W={name:"Password",components:{Confirm:j["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],PasswordField:U["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0},repositoryId:{type:Number,required:!0},itemId:{type:Number,required:!0}},data(){return{password:"",confirmPassword:""}},computed:{_passwordHint(){return H["a"]}},methods:{closeModal(){this.$emit("close",!1)},async updatePassword(){if(this.password===this.confirmPassword){this.$store.commit("showLoadingBar");const{error:t,payload:e}=await r["k"].setRemoveFilePassword({repositoryId:this.repositoryId,itemId:this.itemId,password:"Set_Password"===this.header.id?this.confirmPassword:""});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);202===e.status&&("Set_Password"===this.header.id?this.$alert.success("password set successfully"):this.$alert.success("password removed successfully"),this.password="",this.confirmPassword=""),this.$emit("close",!1)}else this.$alert.warning("password not matched")}}},J=W,G=Object(_["a"])(J,R,z,!1,null,"5e2bad70",null),Q=G.exports,Y=i("ee54"),K=function(){var t=this,e=t._self._c;return e("Confirm",{attrs:{value:t.value,icon:t.header.icon||"","icon-color":"primary",width:"450px"},on:{input:t.closeModal},scopedSlots:t._u([{key:"title",fn:function(){var e;return[t._v(t._s(null===(e=t.header)||void 0===e?void 0:e.label))]},proxy:!0},{key:"default",fn:function(){return[e("ValidationObserver",{ref:"form"},[e("ValidationProvider",{attrs:{name:"field",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextField",{staticClass:"q-my-lg",attrs:{label:"Encrypt"===t.header.id?"enter a password for to encrypt this file":"enter a password for to decrypt this file","is-mandatory":"",error:i[0]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:t.closeModal}}),e("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})},X=[],Z={name:"EncryptDecrypt",components:{Confirm:j["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],TextField:p["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0}},data(){return{password:""}},methods:{closeModal(){this.$emit("close",!1)}}},tt=Z,et=Object(_["a"])(tt,K,X,!1,null,"30ac12fa",null),it=et.exports,st=function(){var t=this,e=t._self._c;return e("Confirm",{attrs:{value:t.value,icon:t.header.icon||"","icon-color":"primary",width:"450px"},on:{input:t.closeModal},scopedSlots:t._u([{key:"title",fn:function(){var e;return[t._v(t._s(null===(e=t.header)||void 0===e?void 0:e.label))]},proxy:!0},{key:"default",fn:function(){return[e("ValidationObserver",{ref:"form"},[e("ValidationProvider",{attrs:{name:"field",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextField",{staticClass:"q-mt-lg",attrs:{label:"Pages","is-mandatory":"",error:i[0],placeholder:"enter page number like 2,3,4  or 2-5"},model:{value:t.pages,callback:function(e){t.pages=e},expression:"pages"}})]}}])}),e("div",{staticClass:"description q-mb-lg q-mt-sm"},[t._v(" Note: First page and last page cannot be hide ")])],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:t.closeModal}}),e("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})},at=[],ot={name:"HidePage",components:{Confirm:j["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],TextField:p["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0}},data(){return{pages:""}},methods:{closeModal(){this.$emit("close",!1)}}},rt=ot,nt=(i("02fb"),Object(_["a"])(rt,st,at,!1,null,"7b871c5e",null)),lt=nt.exports,ct=function(){var t=this,e=t._self._c;return e("Sheet",{attrs:{value:t.value,"has-footer":"",width:"540px"},on:{input:t.closeModal},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Task")]},proxy:!0},{key:"default",fn:function(){return[e("div",{attrs:{id:"task-details"}},[e("Tabs",{staticClass:"tabs",attrs:{tabs:t.tabs},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}}),e("div",{staticClass:"q-pa-md"},["form"===t.tab?e("ValidationObserver",{ref:"form"},[e("div",{staticClass:"field-wrapper"},[e("ValidationProvider",{attrs:{name:"type",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("SelectField",{staticClass:"q-mb-sm",attrs:{label:"Type","is-mandatory":"",options:[],error:i[0]},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})]}}],null,!1,221057675)}),e("TextAreaField",{staticClass:"q-mb-sm",attrs:{value:t.task,label:"Task"}}),e("ValidationProvider",{attrs:{name:"start time",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("DateTimeField",{staticClass:"q-mb-sm",attrs:{value:t.startTime,label:"Start Time","is-mandatory":"",error:i[0]}})]}}],null,!1,882080563)}),e("ValidationProvider",{attrs:{name:"end time",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("DateTimeField",{staticClass:"q-mb-sm",attrs:{value:t.endTime,label:"End Time","is-mandatory":"",error:i[0]}})]}}],null,!1,384865875)}),e("ValidationProvider",{attrs:{name:"users",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("MultiSelectField",{staticClass:"q-mb-sm",attrs:{label:"users","is-mandatory":"",options:[],error:i[0]},model:{value:t.users,callback:function(e){t.users=e},expression:"users"}})]}}],null,!1,1613393186)}),e("ValidationProvider",{attrs:{name:"priority",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("SelectField",{staticClass:"q-mb-sm",attrs:{label:"task priority","is-mandatory":"",options:t.priorityList,error:i[0]},model:{value:t.priority,callback:function(e){t.priority=e},expression:"priority"}})]}}],null,!1,1876549040)})],1)]):t._e(),"history"===t.tab?e("div",{attrs:{id:"history"}},[[e("div",{staticClass:"entry"},[e("div",{staticClass:"header"},[t._v("1 Task Assign")]),e("div",{staticClass:"content"},[e("div",{staticClass:"changes-meta"},[e("div",[t._v("admin@ezofis.com")]),e("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),e("div",[t._v("2022-May-06 09:35 PM")])],1),e("div",{staticClass:"change"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),e("div",[e("span",{staticClass:"font-semibold"},[t._v(' "Assigned" ')]),t._v(" to abc@ezofis.com ")])],1)])])]],2):t._e()],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:t.closeModal}}),e("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})},dt=[],mt=i("d1e5"),ht={name:"Task",components:{Sheet:n["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],TextAreaField:L["a"],SelectField:f["a"],DateTimeField:mt["a"],MultiSelectField:u["a"],Tabs:E["a"]},props:{value:{type:Boolean,default:!1}},data(){return{tab:"form",tabs:[{id:this.$nano.id(),label:"form",value:"form"},{id:this.$nano.id(),label:"history",value:"history"}],type:"",task:"",startTime:"",endTime:"",users:[],priority:"",priorityList:[{id:this.$nano.id(),label:"High",value:"High"},{id:this.$nano.id(),label:"Medium",value:"Medium"},{id:this.$nano.id(),label:"Low",value:"Low"}]}},methods:{closeModal(){this.$emit("close",!1)}}},ut=ht,pt=(i("21e0"),Object(_["a"])(ut,ct,dt,!1,null,"1a249f74",null)),ft=pt.exports,vt=(i("caad"),function(){var t=this,e=t._self._c;return e("Sheet",{attrs:{value:t.value,"has-footer":"",width:"540px"},on:{input:t.closeModal},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Alert")]},proxy:!0},{key:"default",fn:function(){return[e("div",{attrs:{id:"alert-details"}},[e("Tabs",{staticClass:"tabs",attrs:{tabs:t.tabs},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}}),e("div",{staticClass:"q-pa-md"},["form"===t.tab?e("ValidationObserver",{ref:"form"},[e("div",{staticClass:"field-wrapper"},[e("FormFieldLabel",{attrs:{label:"Conditions","is-mandatory":""}}),e("div",{staticClass:"options-wrapper"},[e("CheckboxField",{staticClass:"q-mb-md",attrs:{value:t.conditions.includes("Checked In"),label:"Checked In"},on:{input:function(e){return t.updateValue("Checked In")}}}),e("CheckboxField",{staticClass:"q-mb-md",attrs:{value:t.conditions.includes("Checked Out"),label:"Checked Out"},on:{input:function(e){return t.updateValue("Checked Out")}}}),e("CheckboxField",{staticClass:"q-mb-md",attrs:{value:t.conditions.includes("Commented"),label:"Commented"},on:{input:function(e){return t.updateValue("Commented")}}}),e("CheckboxField",{staticClass:"q-mb-md",attrs:{value:t.conditions.includes("Email"),label:"Email"},on:{input:function(e){return t.updateValue("Email")}}}),e("CheckboxField",{staticClass:"q-mb-md",attrs:{value:t.conditions.includes("Link"),label:"Link"},on:{input:function(e){return t.updateValue("Link")}}}),e("CheckboxField",{staticClass:"q-mb-md",attrs:{value:t.conditions.includes("Viewed"),label:"Viewed"},on:{input:function(e){return t.updateValue("Viewed")}}})],1),t.error?e("FormFieldError",{attrs:{error:t.error}}):t._e(),e("ValidationProvider",{attrs:{name:"Alert To",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("MultiSelectField",{staticClass:"q-mb-sm",attrs:{label:"alert to","is-mandatory":"",options:[],error:i[0]},model:{value:t.users,callback:function(e){t.users=e},expression:"users"}})]}}],null,!1,3515054549)})],1)]):t._e(),"history"===t.tab?e("div",{attrs:{id:"history"}},[[e("div",{staticClass:"entry"},[e("div",{staticClass:"header"},[t._v("2 Alerts")]),e("div",{staticClass:"content"},[e("div",{staticClass:"changes-meta"},[e("div",[t._v("admin@ezofis.com")]),e("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),e("div",[t._v("2022-May-06 09:35 PM")])],1),e("div",{staticClass:"change"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),e("div",[e("span",{staticClass:"font-semibold"},[t._v(' "Checkin" ')]),t._v(" alert sent to abc@ezofis.com ")])],1),e("div",{staticClass:"change"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),e("div",[e("span",{staticClass:"font-semibold"},[t._v(' "Viewed" ')]),t._v(" alert sent to xyz@ezofis.com ")])],1)])])]],2):t._e()],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:t.closeModal}}),e("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})}),yt=[],bt={name:"Alert",components:{Sheet:n["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],MultiSelectField:u["a"],FormFieldLabel:b["a"],CheckboxField:y["a"],FormFieldError:k["a"],Tabs:E["a"]},props:{value:{type:Boolean,default:!1}},data(){return{tab:"form",tabs:[{id:this.$nano.id(),label:"form",value:"form"},{id:this.$nano.id(),label:"history",value:"history"}],users:[],conditions:[],error:""}},methods:{closeModal(){this.$emit("close",!1)},updateValue(t){const e=[...this.conditions];if(e.includes(t)){const i=e.indexOf(t);e.splice(i,1)}else e.push(t);this.conditions=e}}},gt=bt,wt=(i("cccc"),Object(_["a"])(gt,vt,yt,!1,null,"67ebff79",null)),Ct=wt.exports,kt=function(){var t=this,e=t._self._c;return e("Confirm",{attrs:{value:t.value,icon:t.header.icon||"","icon-color":"primary",width:"450px"},on:{input:t.closeModal},scopedSlots:t._u([{key:"title",fn:function(){var e;return[t._v(t._s(null===(e=t.header)||void 0===e?void 0:e.label))]},proxy:!0},{key:"default",fn:function(){return[e("ValidationObserver",{ref:"form"},[e("ValidationProvider",{attrs:{name:"field",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextAreaField",{staticClass:"q-my-lg",attrs:{label:"CheckIn"===t.header.id?"Purpose for checking in":"Purpose for checking out","is-mandatory":"",error:i[0]},model:{value:t.checkInOut,callback:function(e){t.checkInOut=e},expression:"checkInOut"}})]}}])})],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:t.closeModal}}),e("BaseButton",{attrs:{label:"save"},on:{click:t.saveCheckInCheckOut}})]},proxy:!0}])})},St=[],It={name:"CheckedInOut",components:{Confirm:j["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],TextAreaField:L["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0},file:{type:Object,required:!0}},data(){return{checkInOut:""}},methods:{closeModal(){this.$emit("close",!1)},async saveCheckInCheckOut(){this.$store.commit("showLoadingBar");let t={comments:this.checkInOut};if("CheckOut"===this.header.label){const{error:e,payload:i}=await r["p"].fileCheckOut(this.file.repositoryId,this.file.id,t);if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);if(!i)return;console.log(i),this.$emit("checkout",!1),this.$emit("downloadFile","")}this.checkInOut="",this.$emit("close",!1)}}},_t=It,Tt=Object(_["a"])(_t,kt,St,!1,null,"3664c360",null),$t=Tt.exports,xt=function(){var t=this,e=t._self._c;return e("Confirm",{attrs:{value:t.value,icon:t.header.icon||"","icon-color":"red",width:"450px"},on:{input:t.closeModal},scopedSlots:t._u([{key:"title",fn:function(){var e;return[t._v(t._s(null===(e=t.header)||void 0===e?void 0:e.label))]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"q-py-md"},[e("p",[t._v(" Are you sure you want to delete this "),e("span",[t._v("file")])]),e("p",[t._v("You can always restore the deleted file from the trash page.")])])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"no",color:"red"},on:{click:t.closeModal}}),e("BaseButton",{attrs:{label:"yes",color:"red"},on:{click:t.deleteFile}})]},proxy:!0}])})},At=[],Lt={name:"Delete",components:{Confirm:j["a"]},props:{value:{type:Boolean,default:!1},header:{type:Object,required:!0},repositoryId:{type:Number,required:!0},itemId:{type:Number,required:!0}},data(){return{}},methods:{closeModal(){this.$emit("close",!1)},async deleteFile(){this.$store.commit("showLoadingBar");const{error:t,payload:e}=await r["p"].fileDelete(this.repositoryId,this.itemId);this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):(200===e.status&&this.$alert.success("file deleted successfully"),this.$emit("close",!1))}}},Ft=Lt,Pt=Object(_["a"])(Ft,xt,At,!1,null,"5663a02d",null),Bt=Pt.exports,Dt=function(){var t=this,e=t._self._c;return e("Sheet",{attrs:{value:t.value,"has-footer":"",width:"540px"},on:{input:t.closeModal},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Protect using password")]},proxy:!0},{key:"default",fn:function(){return[e("div",{attrs:{id:"vault-details"}},[e("Tabs",{staticClass:"tabs",attrs:{tabs:t.tabs},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}}),e("div",{staticClass:"q-pa-md"},["form"===t.tab?e("ValidationObserver",{ref:"form"},[e("div",{staticClass:"field-wrapper"},[e("FormFieldLabel",{attrs:{label:"Requires user to enter a password for","is-mandatory":""}}),e("div",{staticClass:"options-wrapper"},[e("CheckboxField",{staticClass:"q-mb-md",attrs:{value:t.conditions.includes("Viewing"),label:"Viewing"},on:{input:function(e){return t.updateValue("Viewing")}}}),e("CheckboxField",{staticClass:"q-mb-md",attrs:{value:t.conditions.includes("Editing"),label:"Editing"},on:{input:function(e){return t.updateValue("Editing")}}})],1),t.error?e("FormFieldError",{attrs:{error:t.error}}):t._e(),e("ValidationProvider",{attrs:{name:"password",rules:{password:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("PasswordField",{staticClass:"q-mb-sm",attrs:{"is-mandatory":"",label:"password",value:t.password,error:i[0]}})]}}],null,!1,2834753869)}),e("ValidationProvider",{attrs:{name:"confirm password",rules:{password:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("PasswordField",{staticClass:"q-mb-sm",attrs:{"is-mandatory":"",label:"confirm password",value:t.password,error:i[0]}})]}}],null,!1,298225343)}),e("div",{staticClass:"advanced q-py-sm q-mb-sm",on:{click:function(e){t.showAdvanceOptions=!t.showAdvanceOptions}}},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"label"},[t._v("Advanced Options")]),e("BaseIcon",{staticClass:"icon",attrs:{name:"eva-chevron-down","inherit-color":""}})],1)]),t.showAdvanceOptions?[e("FormFieldLabel",{attrs:{label:"Requires user to enter a password for","is-mandatory":""}}),e("div",{staticClass:"options-wrapper"},[e("CheckboxField",{staticClass:"q-mb-md",attrs:{value:t.conditions.includes("Links"),label:"Links"},on:{input:function(e){return t.updateValue("Links")}}}),e("CheckboxField",{staticClass:"q-mb-md",attrs:{value:t.conditions.includes("Comments"),label:"Comments"},on:{input:function(e){return t.updateValue("Comments")}}}),e("CheckboxField",{staticClass:"q-mb-md",attrs:{value:t.conditions.includes("Share"),label:"Share"},on:{input:function(e){return t.updateValue("Share")}}}),e("CheckboxField",{staticClass:"q-mb-md",attrs:{value:t.conditions.includes("Task"),label:"Task"},on:{input:function(e){return t.updateValue("Task")}}})],1)]:t._e()],2)]):t._e(),"history"===t.tab?e("div",{attrs:{id:"history"}},[[e("div",{staticClass:"entry"},[e("div",{staticClass:"header"},[t._v("1 items protected")]),e("div",{staticClass:"content"},[e("div",{staticClass:"changes-meta"},[e("div",[t._v("admin@ezofis.com")]),e("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),e("div",[t._v("2022-May-06 09:35 PM")])],1),e("div",{staticClass:"change"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),e("div",[e("span",{staticClass:"font-semibold"},[t._v(' "Editing" ')]),t._v(" menu protected ")])],1)])])]],2):t._e()],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:t.closeModal}}),e("BaseButton",{attrs:{label:"save"}})]},proxy:!0}])})},Mt=[],Nt={name:"AddVault",components:{Sheet:n["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],PasswordField:U["a"],FormFieldLabel:b["a"],CheckboxField:y["a"],FormFieldError:k["a"],Tabs:E["a"]},props:{value:{type:Boolean,default:!1}},data(){return{tab:"form",tabs:[{id:this.$nano.id(),label:"form",value:"form"},{id:this.$nano.id(),label:"history",value:"history"}],password:"",conditions:[],error:"",showAdvanceOptions:!1}},methods:{closeModal(){this.$emit("close",!1)}}},Ot=Nt,qt=(i("297e"),Object(_["a"])(Ot,Dt,Mt,!1,null,"4b214f92",null)),Et=qt.exports,Vt=i("5e23"),Rt=i("4bc4"),zt=i("bc3a"),jt=i.n(zt),Ut=i("0c04"),Ht=i("dd90"),Wt=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"history"}},[t.history.length?[e("BaseScrollbar",{attrs:{height:"calc(100vh - 140px)"}},t._l(t.history,(function(i){return e("div",{key:i.id,staticClass:"entry"},[e("div",{staticClass:"header"},[t._v(" "+t._s(i.activity)+" ")]),e("div",{staticClass:"content"},[e("div",{staticClass:"changes-meta"},[e("div",[t._v(t._s(i.activityBy))]),e("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.activityOn))])],1)])])})),0)]:e("div",{staticClass:"no-history"},[t._v("No data found")])],2)},Jt=[],Gt={name:"DocumentHistory",props:{history:{type:Array,required:!0}},data(){return{}},created(){this.$emit("get")}},Qt=Gt,Yt=(i("5960"),Object(_["a"])(Qt,Wt,Jt,!1,null,"707cfe64",null)),Kt=Yt.exports,Xt=i("61cf"),Zt=i("1026"),te=i("2f62"),ee=i("626d"),ie={name:"FileSheet",components:{Sheet:n["a"],FileIcon:l["a"],Tabs:E["a"],FileDetails:$,Comments:q,ListItem:V["a"],Password:Q,MetaDataEdit:Y["a"],EncryptDecrypt:it,HidePage:lt,Task:ft,Alert:Ct,CheckedInOut:$t,Delete:Bt,AddVault:Et,EmailSharing:Vt["a"],RenderForm:Rt["a"],TextAreaField:L["a"],AddTask:Ut["a"],TextBuilderField:F["a"],Modal:m["a"],DocumentHistory:Kt,Dropzone:Xt["a"],UploadingFileList:Zt["a"],ValidationObserver:v["a"],ValidationProvider:v["b"],FormFieldError:k["a"],SingleChoiceField:g["a"],Summarizing:ee["a"]},props:{value:{type:Boolean,default:!1},file:{type:Object,required:!0},repositoryField:{type:Array,required:!0},options:{type:Object,default:()=>{}},menuActions:{type:Boolean,default:!0}},data(){return{tab:"METADATA",tabs:[{id:this.$nano.id(),label:"Metadata",value:"METADATA"},{id:this.$nano.id(),label:"Comments",value:"COMMENTS"},{id:this.$nano.id(),label:"History",value:"HISTORY"}],actionList:[{id:"Indexing_Change",key:"metadataEdit",label:"Metadata Edit",icon:"eva-edit-2-outline",visible:!0,disable:!0},{id:"Set_Password",key:"password",label:"Set Password",icon:"mdi-lock-outline",visible:!0,disable:!0},{id:"Remove_Password",key:"password",label:"Remove Password",icon:"mdi-lock-minus-outline",visible:!0,disable:!0},{id:"Add_To_Vault",key:"vault",label:"Add To Vault",icon:"mdi-eye-off-outline",visible:!0,disable:!0},{id:"Hide_Pages",key:"hidePages",label:"Hide Pages",icon:"mdi-book-open-page-variant-outline",visible:!0,disable:!0},{id:"Task",key:"task",label:"Task",icon:"mdi-send-outline",visible:!0,disable:!1},{id:"Initiate_Workflow",key:"workFlow",label:"Initiate Workflow",icon:"mdi-sitemap",subMenu:[],visible:!0,disable:!1},{id:"Alert",key:"alert",label:"Alert",icon:"mdi-file-alert-outline",visible:!0,disable:!0},{id:"CheckIn",key:"checkInAndOut",label:"CheckIn",icon:"mdi-file-upload-outline",visible:!0,disable:!0},{id:"CheckOut",key:"checkInAndOut",label:"CheckOut",icon:"mdi-file-download-outline",visible:!0,disable:!0},{id:"Delete",key:"deleteFile",label:"Delete",icon:"mdi-file-remove-outline",visible:!0,disable:!0},{id:"Email_Sharing",key:"emailSharing",label:"Email Sharing",icon:"mdi-email-outline",visible:!0,disable:!0},{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline",visible:!0,disable:!0},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline",visible:!0,disable:!0},{id:"Links",key:"links",label:"Links",icon:"mdi-link-variant",visible:!0,disable:!0}],showPasswordModal:!1,selectList:{},showMetaDataEditModal:!1,showEncryptDecryptModal:!1,showHidePageModal:!1,showTaskModal:!1,showAlertModal:!1,showCheckedInOutModal:!1,showDeleteModal:!1,showAddVaultModal:!1,emailSharingSheet:!1,selectedFileList:[],processSheet:!1,headerTitle:"",fileData:[],workflows:[],formId:"",form:{},formModel:{},workflowFormModel:{},actions:[],saveAction:"",processTabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"print",value:"PRINT",icon:"mdi-printer",count:0},{id:this.$nano.id(),label:"task",value:"TASK",icon:"eva-cube-outline",count:0}],attachmentSheet:!1,commentsSheet:!1,commentText:"",commentsList:[],attachmentList:[],fileSheet:!1,selectedFile:{},taskSheet:!1,taskEntries:[],workflowInit:{},taskFormId:0,taskRepositoryId:0,addTaskForm:{},addTaskSheet:!1,taskEntryId:[],taskEntryList:[],taskMode:"",selectedTask:{},formWidth:"100vw",advancedCommentsSheet:!1,advancedCommentText:"",history:[],fileAction:"",addTaskEnabled:!1,showCheckinModal:!1,filesToUpload:[],comments:"",showProgress:!1,filesError:!1,showDeleteBtn:!0,retentionList:[],isSignProcessFound:!1,documentSignProcess:!1,signWorkflow:{},signAction:"",signProcessModal:!1,signType:0,signTypes:[{id:this.$nano.id(),label:"E-Signature",value:0},{id:this.$nano.id(),label:"Digital Signature",value:1}],orderType:0,orderTypes:[{id:this.$nano.id(),label:"Sequential",value:1},{id:this.$nano.id(),label:"Non-Sequential",value:0}],watchViewerClose:null,watchViewerEdit:null,transactionUserIds:[],signerSettings:{},summarizeModal:!1,selectedUploadFile:[],repositoryDetails:{},userList:[],documentEdit:!1}},computed:{...Object(te["c"])(["loadingBar"]),checkTenant(){let t=location.origin;return"https://ag-appsvc01.azurewebsites.net"!==t&&"https://ag-appsvc05.azurewebsites.net"!==t&&"http://10.16.7.1"!==t&&"http://172.16.1.118"!==t},type(){return this.file.name?this.file.name.split(".").reverse()[0].slice(0,4):""},fileSize(){return Object(o["a"])(this.file.size)},scrollbarHeight(){const t=36*this.actionList.length;return t>216?"276px":t+58+"px"},formName(){return this.formId?this.form.settings.general.name:""},formDescription(){return this.formId?this.form.settings.general.description:""},panels(){return this.formId?this.form.panels:[]},secondaryPanels(){return this.formId?this.form.secondaryPanels:[]},formSettings(){return this.formId?this.form.settings:{}},updatedActionList(){const t=[...this.actionList];return t.forEach(t=>{t.key in this.options&&(t.disable="true"!==this.options[t.key],"download"!==t.key||t.disable?"print"!==t.key||t.disable||(this.fileAction+=",print"):(this.fileAction="",this.fileAction+="download"))}),t},_enableControls(){let t=[],e=[];return this.panels.forEach(i=>{if(i.fields.length){let s=i.fields.filter(t=>"SINGLE_SELECT"===t.type||"SINGLE_CHOICE"===t.type||"MULTIPLE_CHOICE"===t.type||"MULTI_SELECT"===t.type);s.length&&s.forEach(i=>{if(i.settings.validation.enableSettings&&i.settings.validation.enableSettings.length){let s=[];i.settings.validation.enableSettings.forEach(t=>{t.controls.length&&(s.push({value:t.value,childControls:t.controls}),t.controls.forEach(t=>{s.indexOf(t)<0&&e.push(t)}))}),s.length&&t.push({id:i.id,parentControls:s})}})}}),{listControls:e,controls:t}}},watch:{value:{immediate:!0,deep:!0,async handler(){if(this.file.id&&this.value){if(this.getUserList(),this.getItemDetails(),this.getFileRetentions(),this.getWorkflows(),this.isSignProcessFound=!1,this.file.name){let t=this.file.name.split(".").pop();"pdf"===t.toLowerCase()&&this.getSignWorkflow()}if(this.getFileHistory(),this.getTaskForm(),this.file.repositoryId&&this.getFolderSecurity(),this.file.hasPassword)if(this.$store.state.session.id==this.file.encryptedBy){let t=this.actionList.findIndex(t=>"Set_Password"===t.id);this.actionList[t].label="Change Password",this.actionList[1].visible=!0,this.actionList[2].visible=!0}else this.actionList[1].visible=!1,this.actionList[2].visible=!1;else this.actionList[1].visible=!0,this.actionList[2].visible=!1;let t=this.actionList.findIndex(t=>"CheckIn"===t.id),e=this.actionList.findIndex(t=>"CheckOut"===t.id);this.file.checkinStatus?2===this.file.checkinStatus&&this.file.checkinBy===this.$store.state.session.email?t>=0&&(this.actionList[t].disable=!1,this.actionList[e].disable=!0):1===this.file.checkinStatus&&this.file.checkinBy===this.$store.state.session.email&&e>=0&&(this.actionList[e].disable=!1,this.actionList[t].disable=!0):e>=0&&(this.actionList[e].disable=!1,this.actionList[t].disable=!0)}}},workflowFormModel:{deep:!0,immediate:!0,handler(){this.workflowFormModel&&this.saveAction&&this.initiateWorkflow()}},options:{deep:!0,immediate:!0,handler(){this.actionList=this.updatedActionList}}},methods:{fileLink(){let t=location.origin.replace("http://localhost:8080","https://trial.ezofis.com");if(this.file.name){let e=this.file.name.split(".").pop();if(Object(Ht["d"])(e)){let i="";return this.fileAction&&(i="&action="+this.fileAction),"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}`:"https://trial.ezofis.com"!==t||Object(Ht["c"])(e)?"https://app.ezofis.com"===t?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}${i}`:`${t}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}${i}`:(this.isSignProcessFound&&0===this.file.checkinStatus&&(localStorage.setItem("viewerClose",!1),localStorage.setItem("viewerEdit",!1),this.watchViewerEdit=setInterval(()=>this.checkViewerEdit(),1e3),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3)),`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}${i}`)}return Object(Ht["b"])(e)||"http://52.172.32.88"!==t?`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.file.repositoryId}/${this.file.id}/2`:(localStorage.setItem("viewerClose",!1),localStorage.setItem("viewerEdit",!1),this.watchViewerEdit=setInterval(()=>this.checkViewerEdit(),1e3),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&type=2&filename=${this.file.name}`)}return""},closeFileSheet(){this.$emit("input",!1)},updateColumns(t){if(this.selectList={},"Set_Password"===t.id||"Remove_Password"===t.id)this.showPasswordModal=!0,this.selectList=t;else if("Indexing_Change"===t.id)this.showMetaDataEditModal=!0;else if("Encrypt"===t.id||"Decrypt"===t.id)this.showEncryptDecryptModal=!0,this.selectList=t;else if("Hide_Pages"===t.id&&this.file&&this.file.name&&this.file.name.endsWith(".pdf"))this.showHidePageModal=!0,this.selectList=t;else if("Task"===t.id)this.taskEntries.length?this.taskSheet=!0:this.addTask();else if("Alert"===t.id)this.showAlertModal=!0;else if("CheckIn"===t.id||"CheckOut"===t.id)"CheckOut"===t.id?this.showCheckedInOutModal=!0:(this.itemId=this.file.id,this.showCheckinModal=!0),this.selectList=t;else if("Delete"===t.id)this.showDeleteModal=!0,this.selectList=t;else if("Add_To_Vault"===t.id)this.showAddVaultModal=!0;else if("Email_Sharing"===t.id)this.selectedFileList=[],this.selectedFileList.push({id:this.file.id,name:this.file.name}),this.emailSharingSheet=!0;else if("Print"===t.id){if(this.file.name){let t=this.file.name.split(".").pop();Object(Ht["d"])(t)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.file.id)):this.$refs.myFiles.contentWindow.print()}this.filePrintSession()}else if("Initiate_Workflow"===t.id);else if("Download"===t.id){let t="";t=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.file.repositoryId}/${this.file.id}/2`,window.open(t,"_blank")}},closeProcessSheet(){this.processSheet=!1},showLinks(t){"ATTACHMENTS"===t?this.attachmentSheet=!0:"COMMENTS"===t?this.commentsSheet=!0:"PRINT"===t?window.print():"TASK"===t&&(this.taskEntries.length?this.taskSheet=!0:this.addTask())},closeAttachmentsSheet(){this.attachmentSheet=!1},closeCommentsSheet(){this.closeCommnetsSheet=!1},commentsText(t){return t.processId?[`<b>${t.workflowName} : ${t.requestNo}</b><br/> ${t.comments}`]:2===t.checkinStatus?["<b>CheckOut:</b><br/> "+t.comments]:1===t.checkinStatus?["<b>CheckIn:</b><br/> "+t.comments]:[t.comments]},bgCommentsColor(t){return t.processId?"orange-1":2===t.checkinStatus?"red-1":1===t.checkinStatus?"green-1":t.createdBy===this.$store.state.session.id?"primary-1":"secondary-1"},lastCommentDuration(t){const e=t.createdAt instanceof Date?t.createdAt:new Date(t.createdAt),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(e.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const t=a/s[o];return i.format(Math.round(t),o)}},openFile(t){this.selectedFile=t;let e=location.origin;"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?window.open(this.fileLink()):this.fileSheet=!0},fileType(t){if(t)return t.split(".").reverse()[0].slice(0,4)},attachedFileSize(t){return Object(o["a"])(t)},attachedFileLink(){return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view?id=${this.selectedFile.id}&type=1`},closeTaskSheet(){this.taskSheet=!1},validateRequest(t){this.saveAction=t},addTask(){this.selectedTask={},this.taskMode="NEW",this.addTaskSheet=!0},addTaskEntry(t,e){this.taskEntryId.push({formId:t,formEntryId:e}),this.getTaskFormEntry(t,e)},getColor(t){return"Closed"===t||"High"===t?"red":"In Progress"===t||"Medium"===t?"warning":"Open"===t||"Low"===t?"secondary":"primary"},disableAction(t,e){return!!("Hide_Pages"===e.id&&t&&this.file&&this.file.name)&&!this.file.name.endsWith(".pdf")},closeDeleteFile(){this.showDeleteModal=!1,this.$emit("input",!1)},showCheckinUploadFile(t){if(2===t.checkinStatus)this.showCheckinModal=!0,console.log(t),this.itemId=t.id;else{this.showCheckedInOutModal=!0;let t=this.actionList.findIndex(t=>"CheckOut"===t.id);this.selectList=this.actionList[t]}},queueFilesForUpload(t){this.filesError=!1,this.filesToUpload.push(...t)},fileDownload(){let t="";t=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.file.repositoryId}/${this.file.id}/2`,window.open(t,"_blank")},reset(){this.filesToUpload=[],this.comments="",this.showCheckinModal=!1},deleteUploadFile(t){this.filesToUpload.splice(t,1)},checkSignProcess(){this.signType=0,this.orderType=1,this.signProcessModal=!0},openSignProcess(){this.signProcessModal=!1,this.actions=[];let t=JSON.parse(this.signWorkflow.flowJson),e=t.blocks.find(t=>"START"===t.type);if(e&&"MANUAL"===e.settings.initiateMode){this.headerTitle=`${this.signWorkflow.name} - ${e.settings.label}`;let i=t.rules.find(t=>t.fromBlockId===e.id);i&&this.actions.push(i.proceedAction)}localStorage.setItem("userList",JSON.stringify(this.userList)),localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),this.documentSignProcess=!0,this.processSheet=!0},itemLink(){let t=location.origin.replace("http://localhost:8080","http://52.172.32.88"),e="";return e="https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===t?"https://trial.ezofis.com/docsviewer/index.html":"https://app.ezofis.com"===t?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":"http://52.172.32.88"===t?"http://52.172.32.88/DocsViewer/index.html":t+"/PDFViewer/web/viewer.html",`${e}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.file.repositoryId}&itemId=${this.file.id}&wId=${this.signWorkflow.id}&type=2&position=true&signType=${this.signType}&orderType=${this.orderType}`},checkViewerClose(){localStorage.getItem("viewerClose")&&"true"===localStorage.getItem("viewerClose")&&(clearInterval(this.watchViewerClose),localStorage.removeItem("viewerClose"),this.processSheet?this.getSignerSettings():this.closeFileSheet())},checkViewerEdit(){localStorage.getItem("viewerEdit")&&"true"===localStorage.getItem("viewerEdit")&&(localStorage.removeItem("viewerEdit"),clearInterval(this.watchViewerEdit),this.documentEdit=!0)},async getUserList(){const{error:t,payload:e}=await r["s"].getUserList();t?this.$alert.error("Error fetching users"):this.userList=e&&e.map(t=>({id:t.id,value:t.value,firstName:t.firstName}))},async getItemDetails(){this.$store.commit("showLoadingBar");const{error:t,payload:e}=await r["p"].getFileData({repositoryId:this.file.repositoryId,itemId:this.file.id});this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e&&(this.fileData=e)},async getFileRetentions(){this.retentionList=[];const{error:t,payload:e}=await r["p"].getRetentions({sortBy:{criteria:"",order:"ASC"},groupBy:"",filterBy:[{filters:[{criteria:"repositoryId",condition:"IS_EQUALS_TO",value:this.file.repositoryId},{criteria:"itemId",condition:"IS_EQUALS_TO",value:this.file.id}],groupCondition:""}],currentPage:0,itemsPerPage:0,mode:"BROWSE"});t?this.$alert.error(t):null!==e&&(this.retentionList=e&&e.map(t=>({id:t.id,name:t.name,action:t.action,actionDate:t.actionDate,fieldId:t.fieldId,durationType:t.durationType,duration:t.duration,notifyJson:t.notifyJson})))},async getWorkflows(){this.workflows=[],this.$store.commit("showLoadingBar");const{error:t,payload:e}=await r["t"].getWorkflows({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"initiatedBy",condition:"CONTAINS",value:"Document",dataType:""},{criteria:"flowstatus",condition:"IS_EQUALS_TO",value:"PUBLISHED",dataType:""},{criteria:"repositoryId",condition:"IS_EQUALS_TO",value:this.file.repositoryId,dataType:""}],groupCondition:""}],itemsPerPage:0,currentPage:0,hasSecurity:!1});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);const{data:i}=e;i.length&&i[0].value.length&&(i[0].value.forEach(t=>{let e=JSON.parse(t.flowJson),i=e.blocks.find(t=>"START"===t.type);if(i&&i.settings.initiateBy.indexOf("USER")>-1){let s=!1;if((i.settings.users.indexOf(this.$store.state.session.id)>-1||i.settings.users.indexOf("0")>-1)&&(s=!0),i.settings.initiateBy.indexOf("DOMAIN_USER")>-1){let t=this.$store.state.session.email.split("@").pop();i.settings.userDomains.indexOf(t)>-1&&(s=!0)}if(s){let s="",a=e.rules.find(t=>t.fromBlockId===i.id);a&&(s=a.proceedAction),this.workflows.push({id:t.id,name:t.name,review:s,initiatedBy:t.initiatedBy,formId:t.wFormId,flowJson:t.flowJson})}}}),this.workflows.length&&this.actionList.find(t=>{"Initiate_Workflow"===t.id&&(t.subMenu=this.workflows)}))},async getSignWorkflow(){this.isSignProcessFound=!1,this.signWorkflow={},this.$store.commit("showLoadingBar");const{error:t,payload:e}=await r["t"].getWorkflows({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"initiatedBy",condition:"CONTAINS",value:"DOCUMENT_SIGN",dataType:""},{criteria:"flowstatus",condition:"IS_EQUALS_TO",value:"PUBLISHED",dataType:""}],groupCondition:""}],itemsPerPage:0,currentPage:0,hasSecurity:!1});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);const{data:i}=e;i.length&&i[0].value.length&&(this.isSignProcessFound=!0,i[0].value.forEach(t=>{let e=JSON.parse(t.flowJson),i=e.blocks.find(t=>"START"===t.type);if(i){let s="",a=e.rules.find(t=>t.fromBlockId===i.id);a&&(s=a.proceedAction),this.signWorkflow={id:t.id,name:t.name,review:s,initiatedBy:t.initiatedBy,formId:t.wFormId,flowJson:t.flowJson}}}))},async checkWorkflow(t){if(this.documentSignProcess=!1,"DOCUMENT"===t.initiatedBy||"DOCUMENT_SIGN"===t.initiatedBy)this.workflowInit=t,this.saveAction=t.review,this.initiateWorkflow();else if("DOCUMENT_FORM"===t.initiatedBy&&t.formId){this.workflowInit=t,this.actions=[],await this.getForm(t.formId),this.formId=String(t.formId);let e=JSON.parse(t.flowJson),i=e.blocks.find(t=>"START"===t.type);if(i&&"MANUAL"===i.settings.initiateMode){this.headerTitle=`${t.name} - ${i.settings.label}`;let s=e.rules.find(t=>t.fromBlockId===i.id);s&&this.actions.push(s.proceedAction)}const s=[...this.form.panels,...this.form.secondaryPanels];if(!s.length)return;let a=[];for(const t of s)a.push(...t.fields);a.forEach(t=>{this.fileData.forEach(e=>{e.name==t.label&&(this.formModel[t.id]=e.value)})}),this.processSheet=!0}},async getForm(t){const{error:e,payload:i}=await r["g"].getForm(t);e?this.$alert.error(e):i&&(this.form=JSON.parse(i.formJson))},async initiateWorkflow(){let t=[];this.attachmentList.length&&this.attachmentList.forEach(e=>{t.push(e.id)});let e={workflowId:this.workflowInit.id,repositoryId:this.file.repositoryId,itemId:this.file.id,review:this.saveAction,formData:{formId:this.workflowInit.formId,fields:this.workflowFormModel},comments:this.commentsList,task:this.taskEntryId,userIds:this.transactionUserIds,fileIds:t};this.saveAction="",this.workflowFormModel={},this.$store.commit("showLoadingBarSave");const{error:i,payload:s}=await r["t"].processTransaction(e);this.$store.commit("hideLoadingBarSave"),i?this.$alert.error(i):(this.$alert.success(s.requestNo+" Request Initiated"),"DOCUMENT_SIGN"===this.workflowInit.initiatedBy&&this.updateSignerSettingWithProcessId(s),this.workflowInit={},this.closeProcessSheet())},async saveComment(){this.commentText&&(this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id,fileIds:[0]}),this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=this.commentsList.length)}),this.commentText="")},async saveAdvancedComment(){this.advancedCommentText&&(this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id,fileIds:[0]}),this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=this.commentsList.length)}),this.advancedCommentText="",this.advancedCommentsSheet=!1)},async getRepository(){const{error:t,payload:e}=await r["p"].getRepository(this.file.repositoryId);t?this.$alert.error(t):this.repositoryDetails=e},async uploadWflowAttachments(t){"STATIC"===this.repositoryDetails.fieldsType&&(this.selectedUploadFile=t,this.uploadFilename=t.target.files[0].name,this.showMetaDataEditModal=!0)},async uploadAttachments(t){const e=t.target.files[0],i=new FormData;i.append("file",e),i.append("repositoryId",this.file.repositoryId);let s=t.target.files[0].name;const a=s.split(".").pop();if(Object(Ht["a"])(a))try{const s=await jt()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:i,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:a,data:o}=s;if(200!==a)throw"Invalid response";let r=JSON.parse(o);this.attachmentList.push({id:Number(r.fileId),name:e.name,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:e.size,initiate:!0}),t.target.value=""}catch(o){console.error(o),this.$alert.error("error attaching file")}else this.$alert.info("This file format is not supported")},async attachmentDelete(t){if(this.$store.commit("showLoadingBar"),t.initiate){const{error:e}=await r["r"].deleteUploadedFiles([t.id]);if(e)return void this.$alert.error(e);this.$store.commit("hideLoadingBar"),this.attachmentList=this.attachmentList.filter(e=>e.id!==t.id)}},async getTaskForm(){this.taskFormList=[],this.addTaskEnabled=!1;const{error:t,payload:e}=await r["g"].getForms({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"type",condition:"IS_EQUALS_TO",value:"Task",dataType:""}],groupCondition:""}],itemsPerPage:50,currentPage:1});if(t)return void this.$alert.error(t);const{data:i}=e;i.length&&i[0].value.length&&(this.addTaskEnabled=!0,i[0].value.forEach(t=>{this.taskFormList.push({id:t.id,label:t.name,value:t.id,repositoryId:t.repositoryId,formJson:t.formJson})}),this.taskFormList.length&&1===this.taskFormList.length&&(this.taskFormId=this.taskFormList[0].id,this.taskRepositoryId=this.taskFormList[0].repositoryId,this.addTaskForm=JSON.parse(this.taskFormList[0].formJson),this.getDocumentTaskEntries()))},async getTaskFormEntry(t,e){this.$store.commit("showLoadingBar");const{error:i,payload:s}=await r["g"].getFormEntry(t,e);if(this.$store.commit("hideLoadingBar"),i)this.$alert.error(i);else if(s.length){const t=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let e=[];for(const s of t)e.push(...s.fields);let i="",a="",o="",r="",n="",l="";e.forEach(t=>{switch(t.label){case"Task Name":i=s[0][t.id];break;case"Task Assign":a=s[0][t.id];break;case"Start Date":o=s[0][t.id];break;case"End Date":r=s[0][t.id];break;case"Priority":n=s[0][t.id];break;case"Task Status":l=s[0][t.id];break}}),this.taskEntries.push({id:s[0].itemid,name:i,assigned:a,startDate:o,endDate:r,priority:n,status:l})}},async getDocumentTaskEntries(){this.taskEntries=[];const{error:t,payload:e}=await r["g"].getDocumentTaskEntries(this.taskFormId,this.file.repositoryId,this.file.id);if(t)this.$alert.error(t);else if(e.length){const t=[...this.addTaskForm.panels,...this.addTaskForm.secondaryPanels];let i=[];for(const e of t)i.push(...e.fields);let s="",a="",o="",r="",n="",l="";i.forEach(t=>{switch(t.label){case"Task Name":s=e[0][t.id];break;case"Task Assign":a=e[0][t.id];break;case"Start Date":o=e[0][t.id];break;case"End Date":r=e[0][t.id];break;case"Priority":n=e[0][t.id];break;case"Task Status":l=e[0][t.id];break}}),this.taskEntries.push({id:e[0].itemid,name:s,assigned:a,startDate:o,endDate:r,priority:n,status:l})}},async filePrintSession(){const{error:t}=await r["k"].filePrintSession({repositoryId:this.file.repositoryId,itemId:this.file.id,activityId:4});t&&this.$alert.error(t)},async getFileHistory(){this.$store.commit("showLoadingBar"),this.history=[];const{error:t,payload:e}=await r["o"].getRepositoryData(this.file.repositoryId,{itemId:this.file.id,filterBy:[],itemsPerPage:100,currentPage:1});this.$store.commit("hideLoadingBar"),t?this.$alert.error(t):e&&(this.history=e.data[0].value.map(t=>({activity:t.activity,activityBy:t.activityBy,activityOn:this.$day.format(t.activityOn)})))},async uploadFile(){const t=await this.$refs.checkin.validate();if(!this.filesToUpload.length)return void(this.filesError=!0);if(!t)return;let e=this.filesToUpload[0],i=0;const s=new FormData;s.append("file",e.file),s.append("repositoryId",this.file.repositoryId),s.append("itemId",this.itemId),s.append("comments",this.comments),this.showProgress=!0,this.showDeleteBtn=!1;let a=e.name;const o=a.split(".").pop();if(!Object(Ht["a"])(o))return this.filesToUpload.splice(i,1),void this.$alert.info("This file format is not supported");try{const t=await jt()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:s,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"},onUploadProgress:function(t){const i=Math.round(100*t.loaded/t.total);e.uploadedPercentage=i}}),{status:i}=t;if(200!==i)throw"Invalid response";this.$alert.success("file updated successfully"),this.reset(),this.showCheckinModal=!1,this.$emit("input",!1)}catch(r){console.error(r),this.$alert.error("error uploading file - "+e.name)}},async saveMetaData(t){this.$store.commit("showLoadingBar");let e=[],i=!1;if(t.forEach(t=>{t.oldValue!==t.newValue&&(i=!0,e.push(t))}),!i)return void this.$alert.error("Not edited any field");let s={repositoryId:this.file.repositoryId,itemId:this.file.id,settings:JSON.stringify(e)};const{error:a,payload:o}=await r["p"].saveMetaData(s);this.$store.commit("hideLoadingBar"),a?this.$alert.error(a):(o&&this.$alert.success("Metadata edit successfully"),this.getItemDetails())},async getFolderSecurity(){const{error:t,payload:e}=await r["p"].getRepositorySecurity(this.file.repositoryId);if(t)this.$alert.error(t);else if(e&&e.userOptions){const t=e.userOptions.map(t=>({id:t.id,userName:t.email,userId:t.userId,options:JSON.parse(t.options)}));let i=t.find(t=>t.userId===this.$store.state.session.id),s=!1;s=!(!i||!i.options)&&!!i.options.metadataEdit;const a=e.groupOptions.map(t=>({id:t.id,groupId:t.groupId,options:JSON.parse(t.options)}));let o=!1;this.$store.state.session.groups&&this.$store.state.session.groups.forEach(t=>{let e=a.find(e=>e.groupId===t.id);e&&e.options&&e.options.metadataEdit&&(o=!0)});let r=this.actionList.findIndex(t=>"Indexing_Change"===t.id);r>=0&&(this.actionList[r].disable=!s&&!o)}},async getSignerSettings(){this.transactionUserIds=[],this.signerSettings={};let t=[{groupCondition:"",filters:[{criteria:"repositoryId",condition:"IS_EQUALS_TO",value:this.file.repositoryId.toString()},{criteria:"itemId",condition:"IS_EQUALS_TO",value:this.file.id.toString()}]}];try{const e=await jt()({url:`https://appuat.ezofis.com/ezofisapi/api/annotation/signSettingsList/${this.$store.state.session.tenantId}/${this.signWorkflow.id}`,method:"POST",headers:{Accept:"application/json"},data:t}),{status:i,data:s}=e;if(200!==i)throw"Invalid response";this.signerSettings=JSON.parse(s);let a=JSON.parse(this.signerSettings.settingsJson);if(a.length)if(0===this.orderType)a.forEach(t=>{"External"===t.signerType?this.transactionUserIds.push(t.externalSignerId):this.transactionUserIds.push(t.signerId)});else{let t=a.find(t=>1===t.signOrder);if(t){let e="External"===t.signerType?t.externalSignerId:t.signerId;this.transactionUserIds.push(e)}}this.transactionUserIds.length&&this.checkWorkflow(this.signWorkflow)}catch(e){console.error(e),this.$alert.error("error getting signer details")}},async updateSignerSettingWithProcessId(t){try{this.signerSettings.processId=t.processId;let e={pId:t.processId,rId:this.signerSettings.repositoryId,itemId:this.signerSettings.itemId,settingsJson:this.signerSettings.settingsJson,isDeleted:0};const i=await jt()({url:`https://appuat.ezofis.com/ezofisapi/api/annotation/signSettings/${this.$store.state.session.tenantId}/${this.signWorkflow.id}/${this.signerSettings.id}`,method:"PUT",headers:{Accept:"application/json"},data:e}),{status:s}=i;if(202!==s)throw"Invalid response"}catch(e){console.error(e),this.$alert.error("error updating signer details")}}}},se=ie,ae=(i("487e"),i("b047")),oe=i("cb32"),re=i("4e73"),ne=Object(_["a"])(se,s,a,!1,null,"07c89b08",null);e["a"]=ne.exports;N()(ne,"components",{QChip:ae["a"],QAvatar:oe["a"],QMenu:re["a"],QChatMessage:D["a"]})},"718c":function(t,e,i){"use strict";i("1a82")},"71f4":function(t,e,i){},7225:function(t,e,i){"use strict";i("afe7")},7334:function(t,e,i){},"73e0":function(t,e,i){"use strict";i("8ddd")},"73f9":function(t,e,i){"use strict";i("caad");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card",attrs:{id:"simple-filter"}},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"row"},[["-1"===t.selectedfid?e("div",{staticClass:"backGround row q-ml-sm q-mr-sm q-mt-sm q-mb-sm",staticStyle:{"font-size":"larger","font-weight":"700",color:"#643094"}},[t._v(" All Save Search ")]):t._e(),"-1"!=t.selectedfid?e("div",{staticClass:"backGround row"},[t.workspace?e("SelectField",{staticClass:"fieldList q-ml-sm q-mr-sm q-mt-sm q-mb-sm",attrs:{"is-mandatory":"",placeholder:"Select Workspace","is-clearable":"",options:t.workspaceList},on:{input:function(e){return t.$emit("update:workspaceId",t.workSpaceId)}},model:{value:t.workSpaceId,callback:function(e){t.workSpaceId=e},expression:"workSpaceId"}}):t._e(),!t.workspace||t.workSpaceId?e("SelectField",{staticClass:"fieldList q-ml-sm q-mr-sm q-mt-sm q-mb-sm",attrs:{"is-mandatory":"",placeholder:t.name,"is-clearable":"",options:t.list},on:{input:t.getData},model:{value:t.selectedId,callback:function(e){t.selectedId=e},expression:"selectedId"}}):t._e()],1):t._e()],t._l(t.filterGroups,(function(i,s){return[e("div",{key:i.id,staticClass:"backGround"},t._l(i.filters,(function(i,a){return e("ValidationObserver",{key:i.id,ref:"form",refInFor:!0,staticClass:"row"},[e("ValidationProvider",{key:i.id,staticClass:"col q-mr-xs",attrs:{name:"criteria",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:o}){return[e("SelectField",{staticClass:"fieldList q-ml-sm q-mr-xs q-mt-sm q-mb-sm",attrs:{"is-mandatory":"","is-clearable":"",options:t._columns,error:o[0]},on:{input:function(e){return t.applyDataType(s,a,i.criteria)}},model:{value:i.criteria,callback:function(e){t.$set(i,"criteria",e)},expression:"filter.criteria"}})]}}],null,!0)}),"SHORT_TEXT"===i.dataType||"BARCODE"===i.dataType?e("ValidationProvider",{staticClass:"col q-mr-xs",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("TextField",{staticClass:"textField q-mt-sm",attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"filter.value"}})]}}],null,!0)}):"DATE"===i.dataType?e("ValidationProvider",{staticClass:"row q-mr-xs",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("DateField",{staticClass:"dateField q-mr-xs q-mt-sm",attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0],placeholder:"From Date"},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"filter.value"}}),e("DateField",{staticClass:"dateField q-mt-sm",attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0],placeholder:"To Date"},model:{value:i.valueTo,callback:function(e){t.$set(i,"valueTo",e)},expression:"filter.valueTo"}})]}}],null,!0)}):"SINGLE_SELECT"===i.dataType||"SINGLE_CHOICE"===i.dataType?e("ValidationProvider",{staticClass:"col q-mr-xs",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:t._u([{key:"default",fn:function({errors:o}){return[t.apiPath&&!t.getOptions(i.criteria)?[e("AsyncSelectField",{staticClass:"fieldList q-mt-sm q-mb-sm",attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:o[0],"api-path":t.apiPath,"column-name":i.criteria},on:{input:function(e){t.$emit("update"),t.applyFilterType(s,a,i.criteria,i.arrayValue)}},model:{value:i.arrayValue,callback:function(e){t.$set(i,"arrayValue",e)},expression:"filter.arrayValue"}})]:[e("SelectField",{staticClass:"fieldList q-mt-sm q-mb-sm",attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),"is-searchable":!0,options:t.getOptions(i.criteria),error:o[0]},on:{input:function(e){t.$emit("update"),t.applyFilterType(s,a,i.criteria,i.arrayValue)}},model:{value:i.arrayValue,callback:function(e){t.$set(i,"arrayValue",e)},expression:"filter.arrayValue"}})]]}}],null,!0)}):e("ValidationProvider",{staticClass:"col q-mr-xs",attrs:{name:"value",rules:{required:!["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition)}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("TextField",{staticClass:"textField q-mt-sm",attrs:{"is-mandatory":"","is-disabled":["IS_EMPTY","IS_NOT_EMPTY"].includes(i.condition),error:s[0]},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"filter.value"}})]}}],null,!0)}),e("div",{staticClass:"col-auto q-mt-md"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"search filter",expression:"'search filter'",modifiers:{top:!0}}],staticClass:"plus q-mr-xs",attrs:{icon:"eva-search",size:"20px",color:"primary","is-flat":""},on:{click:function(e){t.$emit("update"),t.applyFilterType(s,a,i.arrayValue)}}})],1),e("div",{staticClass:"col-auto q-mt-md"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"remove filter",expression:"'remove filter'",modifiers:{top:!0}}],staticClass:"plus q-mr-xs",attrs:{icon:"mdi-close",size:"14px","is-flat":"",color:"red"},on:{click:function(e){return t.removeFilterGroup(s)}}})],1)],1)})),1)]})),t.selectedId&&"TABLE"===t.activeView?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"add filter",expression:"'add filter'",modifiers:{top:!0}}],staticClass:"q-ml-xs q-mt-sm q-mb-sm",attrs:{icon:"mdi-plus",color:"secondary"},on:{click:t.addFilterGroup}}):t._e()],2)]),t.dateValue?e("p",{staticClass:"report-header text-uppercase text-primary"},[t._v(" report generated for : "+t._s(t.weekValue)+" "+t._s(t.monthValue)+" "+t._s(t.yearValue)+" ")]):t._e(),t.noFilter?t._e():e("div",[t.selectedId?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Save Filter",expression:"'Save Filter'",modifiers:{top:!0}}],staticClass:"q-ml-xs q-mt-sm q-mb-sm q-mr-sm",attrs:{icon:"mdi-content-save-cog",color:"primary"},on:{click:function(e){return t.$emit("saveData")}}}):t._e(),t.selectedId?t._e():e("SelectField",{staticClass:"fieldList q-ml-sm q-mr-sm q-mt-sm q-mb-sm",attrs:{"is-mandatory":"",placeholder:"Saved Reports   ("+t.filterList.length+")","is-clearable":"",options:t.filterList},on:{click:function(e){return t.$emit("viewFilter")},input:t.filterData},model:{value:t.selectedfid,callback:function(e){t.selectedfid=e},expression:"selectedfid"}})],1)])])},a=[],o=(i("13d5"),i("14d9"),i("7bb1")),r=i("b3d1"),n=i("12b8"),l=i("53c1"),c=i("0c21"),d={name:"SimpleFilter",components:{ValidationObserver:o["a"],ValidationProvider:o["b"],TextField:r["a"],SelectField:n["a"],DateField:l["a"],AsyncSelectField:c["a"]},props:{id:{type:Number,default:0},columns:{type:Array,default:()=>[]},filterBy:{type:Array,default:()=>[]},workspace:{type:Boolean,default:!1},name:{type:String,required:!0},list:{type:Array,default:()=>[]},wId:{type:Number,default:0},workspaceList:{type:Array,default:()=>[]},module:{type:String,default:""},moduleId:{type:[String,Number],default:0},activeView:{type:String,default:""},dateValue:{type:Boolean,default:!1},weekValue:{type:String,default:""},monthValue:{type:String,default:""},yearValue:{type:String,default:""},filterList:{type:Array,default:()=>[]},fid:{type:String,default:""},noFilter:{type:Boolean,default:!1}},data(){return{workSpaceId:0,selectedId:0,filterGroups:[],WfilterId:0,selectedfid:"",filters:!1}},computed:{_columns(){var t=this.columns.reduce((t,e)=>("isFilter"in e?e.isFilter&&t.push({id:e.id,label:e.label,value:e.name,dataType:"TITLE"!==e.dataType?e.dataType:"SHORT_TEXT"}):t.push({id:e.id,label:e.label,value:e.name,dataType:"TITLE"!==e.dataType?e.dataType:"SHORT_TEXT"}),t),[]);return t},apiPath(){return"repository"===this.module?`/repository/${this.moduleId}/uniqueColumnValues`:"form"===this.module?`/form/${this.moduleId}/uniqueColumnValues`:""}},watch:{id:{deep:!0,immediate:!0,handler(){this.id&&(this.selectedId=this.id)}},workSpaceId:{deep:!0,immediate:!0,handler(){this.workSpaceId||(this.filterGroups=[])}},filterGroups:{deep:!0,immediate:!0,handler(){this.filterGroups.length&&(this.filterGroups[0].groupCondition="",this.$emit("update:filterBy",this.filterGroups))}},activeView:{immediate:!0,handler(){"CHART"===this.activeView&&(this.filterGroups=[])}},fid:{deep:!0,immediate:!0,handler(){this.fid&&(this.selectedfid=this.fid,this.filterData())}},wId:{deep:!0,immediate:!0,handler(){this.wId&&(this.workSpaceId=Number(this.wId))}},filterBy:{deep:!0,immediate:!0,handler(){this.filters&&(this.filterGroups=this.filterBy,console.log(this.filterGroups,"groups")),this.filters=!1}}},methods:{addFilterGroup(){this.filterGroups.push({id:this.$nano.id(),filters:[{id:this.$nano.id(),criteria:"",condition:"",value:"",valueTo:"",arrayValue:""}],groupCondition:(this.filterGroups.length,"")})},removeFilterGroup(t){this.filterGroups.splice(t,1),this.selectedId&&this.$emit("update")},addFilter(t){this.filterGroups[t].filters.push({id:this.$nano.id(),criteria:"",condition:"",value:""})},removeFilter(t,e){this.filterGroups[t].filters.splice(e,1)},applyDataType(t,e,i){this.filterGroups[t].filters[e].value="",this.filterGroups[t].filters[e].condition="",this.filterGroups[t].filters[e].condition="CONTAINS",this.filterGroups[t].filters[e].dataType="",this.filterGroups[t].groupCondition="and";let s=this._columns.find(t=>t.value===i);this.filterGroups[t].filters[e].selectedCriteria=s.label,s&&(this.filterGroups[t].filters[e].dataType=s.dataType,"SINGLE_SELECT"===s.dataType&&(this.filterGroups[t].filters[e].condition="IS_EQUALS_TO"))},getData(){this.selectedId?this.$emit("update:id",this.selectedId):this.$emit("update:id",0),this.filterGroups=[],this.$emit("update:filterBy",this.filterGroups)},getOptions(t){var e;return null===(e=this.columns.find(e=>e.name===t))||void 0===e?void 0:e.options},applyFilterType(t,e,i,s){var a;let o=null===(a=this.columns.find(t=>t.name===i))||void 0===a?void 0:a.options,r=o.find(t=>t.value===s);this.filterGroups[t].filters[e].selectedValue=r.label},filterData(){this.selectedfid?("-1"===this.selectedfid?(this.$emit("update:fid",this.selectedfid),this.workspace=!1,this.selectedId=0,this.workSpaceId=0):(this.filters=!0,this.id=this.selectedId,this.wId=this.workSpaceId),this.$emit("update:fid",this.selectedfid)):(this.selectedfid||(this.selectedId=0,this.workSpaceId=0),this.$emit("update:fid",""))}}},m=d,h=(i("dbf6"),i("0059"),i("2877")),u=Object(h["a"])(m,s,a,!1,null,"0293bc04",null);e["a"]=u.exports},"742a":function(t,e,i){"use strict";i("ef04")},"74d9":function(t,e,i){"use strict";i("ee7b")},"75a4":function(t,e,i){"use strict";i("f458")},"75c3":function(t,e,i){"use strict";var s=i("0967"),a=i("7c86"),o=i("d882"),r=i("f249");function n(t,e,i){const s=Object(o["h"])(t);let a,r=s.left-e.event.x,n=s.top-e.event.y,l=Math.abs(r),c=Math.abs(n);const d=e.direction;!0===d.horizontal&&!0!==d.vertical?a=r<0?"left":"right":!0!==d.horizontal&&!0===d.vertical?a=n<0?"up":"down":!0===d.up&&n<0?(a="up",l>c&&(!0===d.left&&r<0?a="left":!0===d.right&&r>0&&(a="right"))):!0===d.down&&n>0?(a="down",l>c&&(!0===d.left&&r<0?a="left":!0===d.right&&r>0&&(a="right"))):!0===d.left&&r<0?(a="left",l<c&&(!0===d.up&&n<0?a="up":!0===d.down&&n>0&&(a="down"))):!0===d.right&&r>0&&(a="right",l<c&&(!0===d.up&&n<0?a="up":!0===d.down&&n>0&&(a="down")));let m=!1;if(void 0===a&&!1===i){if(!0===e.event.isFirst||void 0===e.event.lastDir)return{};a=e.event.lastDir,m=!0,"left"===a||"right"===a?(s.left-=r,l=0,r=0):(s.top-=n,c=0,n=0)}return{synthetic:m,payload:{evt:t,touch:!0!==e.event.mouse,mouse:!0===e.event.mouse,position:s,direction:a,isFirst:e.event.isFirst,isFinal:!0===i,duration:Date.now()-e.event.time,distance:{x:l,y:c},offset:{x:r,y:n},delta:{x:s.left-e.event.lastX,y:s.top-e.event.lastY}}}}function l(t){const e=t.__qtouchpan;void 0!==e&&(void 0!==e.event&&e.end(),Object(o["b"])(e,"main"),Object(o["b"])(e,"temp"),!0===s["a"].is.firefox&&Object(o["j"])(t,!1),void 0!==e.styleCleanup&&e.styleCleanup(),delete t.__qtouchpan)}let c=0;e["a"]={name:"touch-pan",bind(t,{value:e,modifiers:i}){if(void 0!==t.__qtouchpan&&(l(t),t.__qtouchpan_destroyed=!0),!0!==i.mouse&&!0!==s["a"].has.touch)return;function d(t,e){!0===i.mouse&&!0===e?Object(o["l"])(t):(!0===i.stop&&Object(o["k"])(t),!0===i.prevent&&Object(o["i"])(t))}const m={uid:"qvtp_"+c++,handler:e,modifiers:i,direction:Object(a["a"])(i),noop:o["g"],mouseStart(t){Object(a["b"])(t,m)&&Object(o["e"])(t)&&(Object(o["a"])(m,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),m.start(t,!0))},touchStart(t){if(Object(a["b"])(t,m)){const e=t.target;Object(o["a"])(m,"temp",[[e,"touchmove","move","notPassiveCapture"],[e,"touchcancel","end","passiveCapture"],[e,"touchend","end","passiveCapture"]]),m.start(t)}},start(e,a){!0===s["a"].is.firefox&&Object(o["j"])(t,!0),m.lastEvt=e;const r=Object(o["h"])(e);if(!0===a||!0===i.stop){if(!0!==m.direction.all&&(!0!==a||!0!==m.modifiers.mouseAllDir&&!0!==m.modifiers.mousealldir)){const t=e.type.indexOf("mouse")>-1?new MouseEvent(e.type,e):new TouchEvent(e.type,e);!0===e.defaultPrevented&&Object(o["i"])(t),!0===e.cancelBubble&&Object(o["k"])(t),t.qClonedBy=void 0===e.qClonedBy?[m.uid]:e.qClonedBy.concat(m.uid),t.qKeyEvent=e.qKeyEvent,t.qClickOutside=e.qClickOutside,m.initialEvent={target:e.target,event:t}}Object(o["k"])(e)}m.event={x:r.left,y:r.top,time:Date.now(),mouse:!0===a,detected:!1,isFirst:!0,isFinal:!1,lastX:r.left,lastY:r.top}},move(t){if(void 0===m.event)return;m.lastEvt=t;const e=!0===m.event.mouse,i=()=>{let i;d(t,e),!0!==m.modifiers.preserveCursor&&!0!==m.modifiers.preservecursor&&(i=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),!0===e&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Object(r["a"])(),m.styleCleanup=t=>{if(m.styleCleanup=void 0,void 0!==i&&(document.documentElement.style.cursor=i),document.body.classList.remove("non-selectable"),!0===e){const e=()=>{document.body.classList.remove("no-pointer-events--children")};void 0!==t?setTimeout(()=>{e(),t()},50):e()}else void 0!==t&&t()}};if(!0===m.event.detected){!0!==m.event.isFirst&&d(t,m.event.mouse);const{payload:e,synthetic:s}=n(t,m,!1);return void(void 0!==e&&(!1===m.handler(e)?m.end(t):(void 0===m.styleCleanup&&!0===m.event.isFirst&&i(),m.event.lastX=e.position.left,m.event.lastY=e.position.top,m.event.lastDir=!0===s?void 0:e.direction,m.event.isFirst=!1)))}if(!0===m.direction.all||!0===e&&(!0===m.modifiers.mouseAllDir||!0===m.modifiers.mousealldir))return i(),m.event.detected=!0,void m.move(t);const s=Object(o["h"])(t),a=s.left-m.event.x,l=s.top-m.event.y,c=Math.abs(a),h=Math.abs(l);c!==h&&(!0===m.direction.horizontal&&c>h||!0===m.direction.vertical&&c<h||!0===m.direction.up&&c<h&&l<0||!0===m.direction.down&&c<h&&l>0||!0===m.direction.left&&c>h&&a<0||!0===m.direction.right&&c>h&&a>0?(m.event.detected=!0,m.move(t)):m.end(t,!0))},end(e,i){if(void 0!==m.event){if(Object(o["b"])(m,"temp"),!0===s["a"].is.firefox&&Object(o["j"])(t,!1),!0===i)void 0!==m.styleCleanup&&m.styleCleanup(),!0!==m.event.detected&&void 0!==m.initialEvent&&m.initialEvent.target.dispatchEvent(m.initialEvent.event);else if(!0===m.event.detected){!0===m.event.isFirst&&m.handler(n(void 0===e?m.lastEvt:e,m).payload);const{payload:t}=n(void 0===e?m.lastEvt:e,m,!0),i=()=>{m.handler(t)};void 0!==m.styleCleanup?m.styleCleanup(i):i()}m.event=void 0,m.initialEvent=void 0,m.lastEvt=void 0}}};t.__qtouchpan=m,!0===i.mouse&&Object(o["a"])(m,"main",[[t,"mousedown","mouseStart","passive"+(!0===i.mouseCapture||!0===i.mousecapture?"Capture":"")]]),!0===s["a"].has.touch&&Object(o["a"])(m,"main",[[t,"touchstart","touchStart","passive"+(!0===i.capture?"Capture":"")],[t,"touchmove","noop","notPassiveCapture"]])},update(t,{oldValue:e,value:i}){const s=t.__qtouchpan;void 0!==s&&e!==i&&("function"!==typeof i&&s.end(),s.handler=i)},unbind(t){void 0===t.__qtouchpan_destroyed?l(t):delete t.__qtouchpan_destroyed}}},7794:function(t,e,i){"use strict";i("caad");var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{attrs:{id:"repository-field"}},[t.showFreeze?e("div",{attrs:{id:"checkbox-field"}},[e("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Freeze",expression:"'Freeze'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:t.freezed?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:t.handleFreeze},model:{value:t.freezed,callback:function(e){t.freezed=e},expression:"freezed"}})],1):t._e(),"SHORT_TEXT"===t.field.dataType||"BARCODE"===t.field.dataType?e("ValidationProvider",{staticClass:"full-width",attrs:{name:t.field.name,rules:{required:t.field.isMandatory}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextField",{attrs:{value:t.value,"is-mandatory":t.field.isMandatory,label:t.label||t.field.name,error:i[0],"is-readonly":t.readOnly},on:{input:t.handleInput}})]}}],null,!1,2138129544)}):t._e(),"NUMBER"===t.field.dataType?e("ValidationProvider",{staticClass:"full-width",attrs:{name:t.field.name,rules:{required:t.field.isMandatory,integer:!t.field.options.allowDecimals}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("NumberField",{attrs:{value:t.value,"is-mandatory":t.field.isMandatory,label:t.label||t.field.name,error:i[0],"is-readonly":t.readOnly},on:{input:t.handleInput}})]}}],null,!1,3272965974)}):t._e(),"DATE"===t.field.dataType?e("ValidationProvider",{staticClass:"full-width",attrs:{name:t.field.name,rules:{required:t.field.isMandatory}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("DateField",{attrs:{value:t.value,"is-mandatory":t.field.isMandatory,label:t.label||t.field.name,error:i[0],"is-readonly":t.readOnly},on:{input:t.handleInput}})]}}],null,!1,2736912833)}):t._e(),"TIME"===t.field.dataType?e("ValidationProvider",{staticClass:"full-width",attrs:{name:t.field.name,rules:{required:t.field.isMandatory}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TimeField",{attrs:{value:t.value,"is-mandatory":t.field.isMandatory,label:t.label||t.field.name,error:i[0],"is-readonly":t.readOnly},on:{input:t.handleInput}})]}}],null,!1,2195704480)}):t._e(),"DATE_TIME"===t.field.dataType?e("ValidationProvider",{staticClass:"full-width",attrs:{name:t.field.name,rules:{required:t.field.isMandatory}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("DateTimeField",{attrs:{value:t.value,"is-mandatory":t.field.isMandatory,label:t.label||t.field.name,error:i[0],"is-readonly":t.readOnly},on:{input:t.handleInput}})]}}],null,!1,1802324180)}):t._e(),"SINGLE_SELECT"===t.field.dataType&&["EXISTING"].includes(t.field.options.optionsType)?e("ValidationProvider",{staticClass:"full-width",attrs:{name:t.field.name,rules:{required:t.field.isMandatory}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("AsyncSelectField",{attrs:{value:t.value,"is-mandatory":t.field.isMandatory,label:t.label||t.field.name,"api-path":t.apiPath,error:i[0],"new-option":t.field.options.allowToAddNewOptions,"is-readonly":t.readOnly},on:{input:t.handleInput}})]}}],null,!1,364407705)}):t._e(),"SINGLE_SELECT"===t.field.dataType&&"PREDEFINED"===t.field.options.optionsType?e("ValidationProvider",{staticClass:"full-width",attrs:{name:t.field.name,rules:{required:t.field.isMandatory}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("SelectField",{attrs:{value:t.value,"is-mandatory":t.field.isMandatory,label:t.label||t.field.name,error:i[0],"new-option":t.field.options.allowToAddNewOptions,options:t.predefinedSelectOptions,"is-readonly":t.readOnly,page:"repository"},on:{input:t.handleInput}})]}}],null,!1,3382750843)}):t._e(),"SINGLE_SELECT"===t.field.dataType&&["MASTER"].includes(t.field.options.optionsType)?e("ValidationProvider",{staticClass:"full-width",attrs:{name:t.field.name,rules:{required:t.field.isMandatory}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("SelectField",{attrs:{value:t.value,"is-mandatory":t.field.isMandatory,label:t.label||t.field.name,error:i[0],"new-option":t.field.options.allowToAddNewOptions,options:t.options,"is-readonly":t.readOnly,page:"repository"},on:{input:t.handleInput}})]}}],null,!1,768311157)}):t._e(),"BOOLEAN"===t.field.dataType?e("ValidationProvider",{staticClass:"full-width",attrs:{name:t.field.name,rules:{required:t.field.isMandatory}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("SingleChoiceField",{attrs:{value:t.value,"is-mandatory":t.field.isMandatory,label:t.label||t.field.name,options:t.booleanOptions,error:i[0],"is-readonly":t.readOnly},on:{input:t.handleInput}})]}}],null,!1,61245750)}):t._e(),"OMR"===t.field.dataType?e("ValidationProvider",{staticClass:"full-width",attrs:{name:t.field.name,rules:{required:t.field.isMandatory}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("SingleChoiceField",{attrs:{value:t.value,"is-mandatory":t.field.isMandatory,label:t.label||t.field.name,options:t.omrOptions,error:i[0],"is-readonly":t.readOnly},on:{input:t.handleInput}})]}}],null,!1,1875132930)}):t._e()],1),e("div",{staticClass:"row items-center justify-center q-mt-sm"},[t.visiableSyncBtn?e("BaseButton",{attrs:{label:"Sync",color:"secondary"},on:{click:function(e){return t.$emit("saveSync",t.field)}}}):t._e()],1)])},a=[],o=i("7bb1"),r=i("b3d1"),n=i("ad54"),l=i("53c1"),c=i("cedb"),d=i("d1e5"),m=i("12b8"),h=i("0c21"),u=i("9234"),p=i("0d5e"),f={name:"RepositoryField",components:{ValidationProvider:o["b"],TextField:r["a"],NumberField:n["a"],DateField:l["a"],TimeField:c["a"],DateTimeField:d["a"],SelectField:m["a"],AsyncSelectField:h["a"],SingleChoiceField:u["a"]},props:{field:{type:Object,required:!0},repositoryId:{type:[String,Number],required:!0},value:{type:[String,Number],required:!0},readOnly:{type:Boolean,default:!1},label:{type:String,default:""},syncField:{type:Object,default:()=>{}},parentControl:{type:Boolean,default:!1},rowIndex:{type:Number,required:!0},filter:{type:Boolean,default:!1},freezedData:{type:Object,default:()=>{}},showFreeze:{type:Boolean,default:!1}},data(){return{booleanOptions:[{id:this.$nano.id(),label:this.field.options.truthyValue,value:this.field.options.truthyValue},{id:this.$nano.id(),label:this.field.options.falsyValue,value:this.field.options.falsyValue}],omrOptions:[{id:this.$nano.id(),label:"Yes",value:"true"},{id:this.$nano.id(),label:"No",value:"false"}],visiableSyncBtn:!1,options:[],freeze:!1,freezeData:this.freezedData,freezed:!1}},computed:{predefinedSelectOptions(){return this.field.options.predefinedOptions.map(t=>({id:this.$nano.id(),label:t,value:t}))},apiPath(){return`/repository/${this.repositoryId}/uniqueColumnValues`}},watch:{field:{immediate:!0,async handler(){for(let t in this.syncField)this.syncField[t]===this.field.name&&(this.visiableSyncBtn=!0)}},filter:{immediate:!0,deep:!0,handler(){this.field.filterBy&&this.field.options.masterFormId&&this.getMasterEntriesFilter(this.field)}}},created(){this.freezedData&&(this.freezed=this.field.name in this.freezedData),this.field.options.masterFormId&&this.getMasterEntries(this.field.options.masterFormId,this.field.options.masterTableColumn)},methods:{handleInput(t){this.$emit("input",t),this.parentControl&&this.$emit("filterBy",this.field,this.rowIndex),this.freezed&&this.updateOrAddField(this.field.name,t)},handleFreeze(){this.freezed=!this.freezed,this.freezed?(this.updateOrAddField(this.field.name,this.value),this.$emit("update:freezed",this.freeze)):this.$emit("update:removeFreezed",this.field.name)},updateOrAddField(t,e){t in this.freezeData?this.freezeData[t]=e:this.freezeData={...this.freezeData,[t]:e},this.$emit("update:freezedData",this.freezeData)},async getMasterEntries(t,e){try{const i=await p["b"].post(`/form/${t}/uniqueColumnValues`,JSON.stringify({column:e,keyword:"",rowFrom:0,rowCount:0})),{status:s,data:a}=i;if(200!==s)throw i;const o=JSON.parse(a);o.length&&(this.options=o.map(t=>({id:this.$nano.id(),label:t,value:t})))}catch(i){console.error(i),this.$alert.error("Error fetching options")}},async getMasterEntriesFilter(t){try{const e=await p["b"].post(`/form/${t.options.masterFormId}/uniqueColumnValues`,JSON.stringify({column:t.options.masterTableColumn,keyword:"",rowFrom:0,rowCount:0,filters:t.filterBy})),{status:i,data:s}=e;if(200!==i)throw e;const a=JSON.parse(s);a.length?(this.options=a.map(t=>({id:this.$nano.id(),label:t,value:t})),1===this.options.length&&this.handleInput(this.options[0].value)):(this.field.options.masterFormId&&this.getMasterEntries(this.field.options.masterFormId,this.field.options.masterTableColumn),this.handleInput(""))}catch(e){console.error(e),this.$alert.error("Error fetching options")}}}},v=f,y=(i("87dc"),i("2877")),b=Object(y["a"])(v,s,a,!1,null,"174d3602",null);e["a"]=b.exports},"79b4":function(t,e,i){},"7f31":function(t,e,i){},"7fe6":function(t,e,i){"use strict";i("b4cd")},8169:function(t,e,i){"use strict";i("14d9");var s=i("a026"),a=i("87e8");e["a"]=s["default"].extend({name:"QChatMessage",mixins:[a["a"]],props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelSanitize:Boolean,nameSanitize:Boolean,textSanitize:Boolean,stampSanitize:Boolean},computed:{textClass(){return"q-message-text-content q-message-text-content--"+this.op+(void 0!==this.textColor?" text-"+this.textColor:"")},messageClass(){return"q-message-text q-message-text--"+this.op+(void 0!==this.bgColor?" text-"+this.bgColor:"")},containerClass(){return"q-message-container row items-end no-wrap"+(!0===this.sent?" reverse":"")},sizeClass(){if(void 0!==this.size)return"col-"+this.size},op(){return!0===this.sent?"sent":"received"}},methods:{__wrapStamp(t,e){if(void 0!==this.$scopedSlots.stamp)return[e,t("div",{staticClass:"q-message-stamp"},this.$scopedSlots.stamp())];if(this.stamp){const i=!0===this.stampSanitize?"textContent":"innerHTML";return[e,t("div",{staticClass:"q-message-stamp",domProps:{[i]:this.stamp}})]}return[e]},__getText(t,e,i){const s=!0===this.textSanitize?"textContent":"innerHTML";if(!0===i&&!0===e.some(t=>void 0===t.tag&&void 0!==t.text))return[t("div",{class:this.messageClass},[t("div",{class:this.textClass},this.__wrapStamp(t,t("div",e)))])];const a=!0!==i?e=>t("div",{domProps:{[s]:e}}):e.length>1?t=>t:e=>t("div",[e]);return e.map((e,i)=>t("div",{key:i,class:this.messageClass},[t("div",{class:this.textClass},this.__wrapStamp(t,a(e)))]))}},render(t){const e=[];void 0!==this.$scopedSlots.avatar?e.push(this.$scopedSlots.avatar()):void 0!==this.avatar&&e.push(t("img",{class:"q-message-avatar q-message-avatar--"+this.op,attrs:{src:this.avatar,"aria-hidden":"true"}}));const i=[];void 0!==this.$scopedSlots.name?i.push(t("div",{class:"q-message-name q-message-name--"+this.op},this.$scopedSlots.name())):void 0!==this.name&&i.push(t("div",{class:"q-message-name q-message-name--"+this.op,domProps:{[!0===this.nameSanitize?"textContent":"innerHTML"]:this.name}})),void 0!==this.text&&i.push(this.__getText(t,this.text)),void 0!==this.$scopedSlots.default&&i.push(this.__getText(t,this.$scopedSlots.default(),!0)),e.push(t("div",{class:this.sizeClass},i));const s=[];return void 0!==this.$scopedSlots.label?s.push(t("div",{staticClass:"q-message-label"},this.$scopedSlots.label())):void 0!==this.label&&s.push(t("div",{staticClass:"q-message-label",domProps:{[!0===this.labelSanitize?"textContent":"innerHTML"]:this.label}})),s.push(t("div",{class:this.containerClass},e)),t("div",{class:"q-message q-message-"+this.op,on:{...this.qListeners}},s)}})},8180:function(t,e,i){"use strict";i("e0b6")},"81e5":function(t,e,i){"use strict";i("e887")},"82cb":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("AppLayout",[e("ViewWrapper",{attrs:{title:"folders",breadcrumbs:t.breadcrumbs,tabs:t.tabs,tab:t.tab}},[e("div",{attrs:{id:"repository-ocr-reports"}},[e("Portal",{attrs:{to:"action-bar"}},[e("keep-alive",[e("ItemActions",{attrs:{id:t.repositoryId,item:"repositories-ocr-report",columns:[],"group-by":"",order:"","filter-by":[],criteria:"","active-view":"","hide-actions":["toggle","sort","group","filter","activeView"],"simple-search-filter":!0,refresh:!1,export:!1,"export-data":t.exportDataList},on:{refresh:t.refreshData,search:t.searchRow,export:t.export_Data,filter:t.getData}})],1)],1),e("SimpleFilter",{attrs:{id:t.repositoryId,"workspace-id":t.workspaceId,columns:t._columns,"filter-by":t.filterBy,workspace:!0,name:"Select Folder","workspace-list":t.workspaceList,list:t.repositoriesList,module:"repository","module-id":t.repositoryId,"active-view":t.activeView,fid:t.filterId,"wfilter-list":t.WfilterList,"w-id":t.workspaceId,"no-filter":!0},on:{"update:id":function(e){t.repositoryId=e},"update:workspaceId":function(e){t.workspaceId=e},"update:workspace-id":function(e){t.workspaceId=e},"update:filterBy":function(e){t.filterBy=e},"update:filter-by":function(e){t.filterBy=e},"update:fid":function(e){t.filterId=e},update:t.getOcrReportData,saveData:function(e){t.issavesheet=!0},viewFilter:function(e){t.showFilterList=!0}}}),t.loadingBarContent?e("BaseLoadingBarSheet",{staticClass:"loading-content"}):t._e(),e("SaveSheet",{attrs:{filter:t.filterBy,"repository-id":t.repositoryId,page:"repositoryOcrReport"},on:{success:t.getFilterList},model:{value:t.issavesheet,callback:function(e){t.issavesheet=e},expression:"issavesheet"}}),e("div",{staticClass:"content"},[t.showFilterList&&"-1"===t.filterId?e("FilterListType",{attrs:{mode:t.mode,items:t.savedItems,columns:t.columnss,"filter-list":t.savedList},on:{view:t.openFile,isDelete:t.deleteItem}}):t.repositoryOcrReportList.length?[e("OcrReportList",{attrs:{mode:t.mode,items:t.items,columns:t.columns},on:{view:t.openFile}})]:t.loadingBarContent?t._e():[e("StateWrapper",{staticStyle:{"margin-top":"20px"},attrs:{icon:"eva-archive-outline",title:"Generate Report",description:"Select workspace and repository to display data"}})]],2),t.repositoryOcrReportList.length||"-1"===t.filterId?e("Pagination",{attrs:{"total-items":t.totalItems,"current-page":t.currentPage,"items-per-page":t.itemsPerPage,"file-sheet":t.hideFileSheet},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:itemsPerPage":function(e){t.itemsPerPage=e},"update:items-per-page":function(e){t.itemsPerPage=e}}}):t._e(),e("FileSheet",{attrs:{file:t.selectedFile,"repository-field":[],options:t.options},model:{value:t.isFileSheetVisible,callback:function(e){t.isFileSheetVisible=e},expression:"isFileSheetVisible"}})],1),e("ConfirmDelete",{attrs:{"delete-data":t.deleteData},on:{delete:t.getFilterList},model:{value:t.isDeleteConfirmationVisible,callback:function(e){t.isDeleteConfirmationVisible=e},expression:"isDeleteConfirmationVisible"}})],1)],1)},a=[],o=(i("caad"),i("14d9"),i("5a75")),r=i("b822"),n=i("2b88"),l=i("1b0d"),c=i("064c"),d=function(){var t=this,e=t._self._c;return e("ItemList",{attrs:{columns:t.columns,items:t.items,mode:t.mode,report:!0},on:{select:t.handleOpenFile}})},m=[],h=i("f92f"),u={name:"OcrReportList",components:{ItemList:h["a"]},props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},mode:{type:String,required:!0}},methods:{handleOpenFile(t,e){this.$emit("view",t,e)}}},p=u,f=i("2877"),v=Object(f["a"])(p,d,m,!1,null,"b6a4b3bc",null),y=v.exports,b=i("381b"),g=i("73f9"),w=i("c49c"),C=i("b6d2"),k=i("42fc"),S=i("7104"),I=i("a7d2"),_=i("fd96"),T=i("4484"),$=i("3d35"),x={name:"RepositoriesOcrReports",components:{Portal:n["Portal"],ItemActions:c["a"],OcrReportList:y,SimpleFilter:g["a"],StateWrapper:w["a"],Pagination:C["a"],FileSheet:S["a"],AppLayout:o["a"],ViewWrapper:r["a"],SaveSheet:_["a"],FilterListType:T["a"],ConfirmDelete:$["a"]},data(){return{mode:"REPORT",activeView:"TABLE",sortBy:{criteria:"",order:"ASC"},breadcrumbs:[{id:this.$nano.id(),label:"dashboard",route:"dashboard"},{id:this.$nano.id(),label:"folders",route:"repositories-browse"},{id:this.$nano.id(),label:"reports",route:"repositories-reports-overview"},{id:this.$nano.id(),label:"",route:""}],tabs:[{id:this.$nano.id(),label:"browse",icon:"eva-folder-outline",route:"repositories-browse",access:!0,accessLabel:"Manage Folders"},{id:this.$nano.id(),label:"trash",icon:"eva-trash-2-outline",route:"repositories-trash",access:!0,accessLabel:"Manage Folders"},{id:this.$nano.id(),label:"reports",icon:"eva-trash-2-outline",route:"repositories-ocr-report",access:!1,accessLabel:"Audit Report"}],tab:"repositories-ocr-report",columns:[{id:this.$nano.id(),name:"fileName",label:"File Name",type:"TITLE",isVisible:!0,isSortable:!0,isGroupable:!1,dataType:b["a"].SHORT_TEXT},{id:this.$nano.id(),name:"fileStatus",label:"Status",isVisible:!0,options:this.fileStatus,isSortable:!0,isGroupable:!1,dataType:b["a"].SHORT_TEXT},{id:this.$nano.id(),name:"ocrType",label:"Type",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:b["a"].SHORT_TEXT},{id:this.$nano.id(),name:"processedBy",label:"Processed By",isVisible:!0,isSortable:!0,isGroupable:!1,options:this.userList,dataType:b["a"].SINGLE_SELECT},{id:this.$nano.id(),name:"processedOn",label:"Processed On",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:b["a"].DATE},{id:this.$nano.id(),name:"totalPage",label:"Total Pages",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:b["a"].SINGLE_SELECT},{id:this.$nano.id(),name:"processedPages",label:"Processed Pages",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:b["a"].SHORT_TEXT},{id:this.$nano.id(),name:"fileSize",label:"Size",isVisible:!0,isSortable:!0,isGroupable:!1,dataType:b["a"].SHORT_TEXT}],groupBy:"",filterBy:[],totalItems:0,itemsPerPage:10,currentPage:1,hideFileSheet:!1,userList:[],workspaceId:0,workspaceList:[],itemId:0,repositoryId:0,repositoriesList:[],OcrReportList:[],repositoryOcrReportList:[],repositoryOcrReportListData:[],options:{},selectedFile:{},isFileSheetVisible:!1,loadingBarContent:!1,fileStatus:[{id:this.$nano.id(),label:"Archived",value:"Archived"},{id:this.$nano.id(),label:"Deleted",value:"Deleted"}],type:[{id:this.$nano.id(),label:"Advanced",value:"Advanced"},{id:this.$nano.id(),label:"Standard",value:"Standard"}],exportDataList:!1,filterId:"",WfilterList:[],issavesheet:!1,showFilterList:!1,savedList:[],columnss:[],savedListData:[],isDeleteConfirmationVisible:!1,deleteData:{}}},computed:{_columns(){let t=[{id:this.$nano.id(),name:"fileName",label:"FileName",isVisible:!1,isSortable:!0,isGroupable:!1,dataType:b["a"].SHORT_TEXT},{id:this.$nano.id(),name:"ocrType",label:"Type",isVisible:!0,isSortable:!0,isGroupable:!1,options:this.type,dataType:b["a"].SINGLE_SELECT},{id:this.$nano.id(),name:"processedOn",label:"ProcessedOn",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:b["a"].DATE},{id:this.$nano.id(),name:"processedBy",label:"Processed By",options:this.userList,isVisible:!0,isSortable:!0,isGroupable:!1,dataType:b["a"].SINGLE_SELECT},{id:this.$nano.id(),name:"fileStatus",label:"Status",options:this.fileStatus,isVisible:!0,isSortable:!0,isGroupable:!0,dataType:b["a"].SINGLE_SELECT}];return t[2].options=this.userList,t},_tabs(){return this.$store.state.profileMenus.length&&this.tabs.forEach(t=>{var e;t.access||(t.access=null===(e=this.$store.state.profileMenus.find(t=>t.folders))||void 0===e?void 0:e.Menu[t.accessLabel])}),this.tabs.filter(t=>t.access)},items(){return this.repositoryOcrReportList.map(({key:t,value:e})=>({key:"",value:t,data:e.map(t=>({icon:"mdi-text-box",itemId:t.itemId,link:!0,fileName:t.fileName,fileSize:t.fileSize?Object(I["a"])(t.fileSize):"",totalPage:t.totalPage,fileStatus:t.fileStatus,processedPages:t.processedPages,ocrType:t.ocrType,processedOn:this.$day.format(t.processedOn),processedBy:t.processedBy}))}))},savedItems(){return this.savedListData.map(({key:t,value:e})=>({key:"",value:t,data:e.map(t=>({icon:"mdi-text-box",id:t.id,itemId:t.itemId,link:!0,name:t.name,description:t.description,createdBy:t.createdBy,createdon:this.$day.format(t.createdAt)}))}))}},watch:{$route:{immediate:!0,deep:!0,handler(){this.tab=this.$route.name;const t=this.breadcrumbs.length-1;this.breadcrumbs[t].label=this.$route.meta.breadcrumb}},workspaceId:{deep:!0,immediate:!0,handler(){this.clearData(),this.workspaceId&&this.getRepositories(),this.workspaceId&&this.repositoryId&&this.getOcrReportData()}},repositoryId:{deep:!0,immediate:!0,async handler(){this.repositoryOcrReportList=[],this.repositoryId&&this.getOcrReportData()}},itemsPerPage:{deep:!0,immediate:!0,handler(){this.workspaceId&&this.repositoryId&&this.itemsPerPage?this.getOcrReportData():this.savedListData&&this.itemsPerPage&&this.getFilterData()}},currentPage:{deep:!0,immediate:!0,handler(){this.workspaceId&&this.repositoryId&&this.currentPage?this.getOcrReportData():this.savedListData&&this.itemsPerPage&&this.getFilterData()}},filterId:{deep:!0,immediate:!0,async handler(){""===this.filterId?(this.repositoryReportList=[],this.workspaceId=0,this.repositoryId=0,this.filterBy=[]):"-1"===this.filterId?(this.repositoryOcrReportList=[],this.showFilterList=!0,this.getFilterData()):this.filterId?(this.columnss=[],this.showFilterList=!1,this.filterList(),this.selectedIds=this.filterId):this.filterId||(this.showFilterList=!1,this.repositoryReportList=[])}}},created(){this.getWorkspaces(),this.getUsers(),this.getFilterList()},methods:{refreshData(){this.workspaceId&&this.repositoryId?this.getOcrReportData():this.workspaceId&&this.getRepositories()},searchRow(t){this.repositoryOcrReportList=t?this.repositoryOcrReportListData.map(({key:e,value:i})=>({key:e,value:i.filter(e=>{for(let i in e){let s=this._columns.findIndex(t=>t.name===i);if(console.log(i),console.log(s),s>=0&&e[i]&&String(e[i]).toLowerCase().includes(t.toLowerCase()))return e}})})):this.repositoryOcrReportListData},async export_Data(){this.$store.commit("showLoadingBarPage");const{error:t,payload:e}=await l["o"].getOcrReportData(this.repositoryId,{filterBy:this.filterBy,itemsPerPage:500,currentPage:1});if(this.$store.commit("hideLoadingBarPage"),t)return void this.$alert.error(t);let i=[];if(e.data.forEach(t=>{t.value.forEach(t=>{i.push({"File Name":t.fileName,Status:t.fileStatus,"Processed By":t.processedBy,"Processed On":this.$day.format(t.processedOn),Size:Object(I["a"])(t.fileSize),"Processed Pages":t.processedPages,"Total Pages":t.totalPage})})}),i.length){let t=this.repositoriesList.find(t=>t.value===this.repositoryId);Object(k["a"])(i,t.label+"-OCR Report")}},openFile(t){let e=this.repositoryOcrReportList[0].value.find(e=>e.rNo===t);this.selectedFile={id:e.itemid,name:e.fileName,size:e.fileSize,repositoryId:this.repositoryId,createdAt:e.createdAt,createdBy:""},this.isFileSheetVisible=!0},async getWorkspaces(){this.$store.commit("showLoadingBarPage");const{error:t,payload:e}=await l["u"].getWorkspaceList();this.$store.commit("hideLoadingBarPage"),t?this.$alert.error(t):e&&(this.workspaceList=e.map(t=>({id:this.$nano.id(),label:t.value,value:t.id})))},async getRepositories(){if(this.workspaceId){this.repositoriesList=[],this.loadingBarContent=!0;const{error:t,payload:e}=await l["p"].getRepositoryList("workspaceId",this.workspaceId);if(this.loadingBarContent=!1,t)return void this.$alert.error(t);if(!e.length)return;this.repositoriesList=e.map(t=>({id:this.$nano.id(),label:t.value,value:t.id}))}},async getUsers(){this.userList=[];const{error:t,payload:e}=await l["s"].getUserList();t?this.$alert.error("Error fetching users"):e&&e.map(t=>{this.userList.push({id:this.$nano.id(),label:t.value,value:t.value})})},async getOcrReportData(){var t;this.loadingBarContent=!0,this.repositoryOcrReportList=[],this.repositoryOcrReportListData=[],this.list=[],this.filterBy.forEach(t=>{t.filters.length&&t.filters.forEach(t=>{"SINGLE_SELECT"===t.dataType&&(t.value=JSON.stringify([t.arrayValue]))})});const{error:e,payload:i}=await l["o"].getOcrReportData(this.repositoryId,{filterBy:this.filterBy,itemsPerPage:this.itemsPerPage,currentPage:this.currentPage});this.loadingBarContent=!1,e?this.$alert.error(e):(this.totalItems=(null===(t=i.meta)||void 0===t?void 0:t.totalItems)||0,0===this.totalItems?(this.repositoryOcrReportList=[],this.repositoryOcrReportListData=[]):(this.repositoryOcrReportList=i.data,this.repositoryOcrReportListData=i.data,this.repositoryOcrReportList.length&&(this.exportDataList=!0)))},async getData(t,e){var i;const s=[{id:this.$nano.id(),filters:[{id:this.$nano.id(),criteria:"processedOn",condition:"IS_EQUALS_TO",value:t,valueTo:e,dataType:"DataType.DATE"}],groupCondition:""}];this.$store.commit("showLoadingBarPage"),this.repositoryOcrReportList=[],this.repositoryOcrReportListData=[],this.list=[];const{error:a,payload:o}=await l["o"].getOcrReportData(this.repositoryId,{filterBy:s,itemsPerPage:this.itemsPerPage,currentPage:this.currentPage});this.$store.commit("hideLoadingBarPage"),a?this.$alert.error(a):(o.data.length&&o.data.forEach(t=>{t.value.forEach(t=>{this.OcrReportList.push({...t})})}),this.totalItems=(null===(i=o.meta)||void 0===i?void 0:i.totalItems)||0,0===this.totalItems?(this.repositoryOcrReportList=[],this.repositoryOcrReportListData=[]):(this.repositoryOcrReportList=o.data,this.repositoryOcrReportListData=o.data))},clearData(){this.exportDataList=!1,this.repositoryId=0,this.repositoryOcrReportList=[]},async getFilterData(){var t;this.loadingBarContent=!0,this.savedList=[],this.savedListData=[],this.filterBy.forEach(t=>{t.filters.length&&t.filters.forEach(t=>{"SINGLE_SELECT"===t.dataType&&(t.value=t.arrayValue)})});let e=this.$store.state.session.id.toString();const{error:i,payload:s}=await l["e"].getDashboardData({sortBy:this.sortBy,groupBy:"",filterBy:[{groupCondition:"",filters:[{criteria:"filterFrom",condition:"IS_EQUALS_TO",value:"repositoryOcrReport"},{criteria:"createdBy",condition:"IS_EQUALS_TO",value:e}]}],currentPage:this.currentPage,itemsPerPage:this.itemsPerPage});i?this.$alert.error(i):(this.columnss=[{id:this.$nano.id(),name:"id",label:"Id",isVisible:!1,isSortable:!0,isGroupable:!1,dataType:b["a"].SHORT_TEXT},{id:this.$nano.id(),name:"itemId",label:"Item Id",isVisible:!1,isSortable:!0,isGroupable:!1,dataType:b["a"].SHORT_TEXT},{id:this.$nano.id(),name:"name",label:"Name",type:"TITLE",isVisible:!0,isSortable:!0,isGroupable:!1,dataType:b["a"].SHORT_TEXT},{id:this.$nano.id(),name:"description",label:"Description",isVisible:!0,isSortable:!0,isGroupable:!1,dataType:b["a"].SHORT_TEXT},{id:this.$nano.id(),name:"createdon",label:"Created On",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:b["a"].DATE},{id:this.$nano.id(),name:"createdBy",label:"Created By",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:b["a"].SHORT_TEXT}],this.loadingBarContent=!1,s.data.length&&s.data.forEach(t=>{t.value.forEach(t=>{this.OcrReportList.push({...t})})}),this.totalItems=(null===(t=s.meta)||void 0===t?void 0:t.totalItems)||0,0===this.totalItems?(this.savedList=[],this.savedListData=[]):(this.savedList=s.data,this.savedListData=s.data,this.savedList.length&&(this.exportDataList=!0)),console.log(s,"savedListData"))},async getFilterList(){let t=this.$store.state.session.id.toString();const{error:e,payload:i}=await l["e"].getDashboardData({filterBy:[{groupCondition:"",filters:[{criteria:"filterFrom",condition:"IS_EQUALS_TO",value:"repositoryOcrReport"},{criteria:"createdBy",condition:"IS_EQUALS_TO",value:t}]}]});if(e)return void this.$alert.error(e);console.log(i,"dasta");let s=i.data[0].value;this.listedData=s,console.log(this.listedData,"data");let a=s.map(t=>({id:this.$nano.id(),label:t.name,value:t.name}));const o=t=>{const e={};return Object.keys(t).forEach(i=>{"__ob__"!==i&&(e[i]=t[i])}),e},r=a.map(t=>o(t)),n={id:this.$nano.id(),label:"Show All",value:"-1"};this.WfilterList=[...r.length?[n]:[],...r],console.log(this.WfilterList,"this.WfilterList")},async filterList(){console.log(this.listedData,"ListdData"),this.listedData.map(t=>{if(t.name===this.filterId){const e=JSON.parse(t.filterJson);let i=[];e[0].filters&&(i=JSON.parse(e[0].filters)),console.log(e,"parsedArray"),this.filterListData={id:t.itemId,name:t.name,rId:e[0].uId,filterFrom:t.filterFrom,filters:i}}}),console.log(this.filterListData.filters,"this.filterListData.filters;"),this.repositoryId=this.filterListData.rId,this.filterFrom=this.filterListData.filterFrom,await this.getRepository(),this.filterFrom=this.filterListData.filterFrom,this.repositoryId=this.filterListData.rId,this.itemId=0,this.filterBy=this.filterListData.filters,this.getRepositoryData()},async getRepository(){const{error:t,payload:e}=await l["p"].getRepository(this.repositoryId);t?this.$alert.error(t):(this.repositoryDetails=e,this.workspaceId=this.repositoryDetails.workspace.id,e.options&&(this.options=e.options),this.repositoryField=this.repositoryDetails.fields,this.columns=[{id:this.$nano.id(),name:"fileName",label:"File Name",type:"TITLE",isVisible:!0,isSortable:!0,isGroupable:!1,dataType:b["a"].SHORT_TEXT},{id:this.$nano.id(),name:"fileStatus",label:"Status",isVisible:!0,options:this.fileStatus,isSortable:!0,isGroupable:!1,dataType:b["a"].SHORT_TEXT},{id:this.$nano.id(),name:"ocrType",label:"Type",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:b["a"].SHORT_TEXT},{id:this.$nano.id(),name:"processedBy",label:"Processed By",isVisible:!0,isSortable:!0,isGroupable:!1,options:this.userList,dataType:b["a"].SINGLE_SELECT},{id:this.$nano.id(),name:"processedOn",label:"Processed On",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:b["a"].DATE},{id:this.$nano.id(),name:"totalPage",label:"Total Pages",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:b["a"].SINGLE_SELECT},{id:this.$nano.id(),name:"processedPages",label:"Processed Pages",isVisible:!0,isSortable:!0,isGroupable:!0,dataType:b["a"].SHORT_TEXT},{id:this.$nano.id(),name:"fileSize",label:"Size",isVisible:!0,isSortable:!0,isGroupable:!1,dataType:b["a"].SHORT_TEXT}])},deleteItem(t){this.savedListData[0].value.map(e=>{e.id===t&&(console.log(e,"itemd"),this.isDeleteConfirmationVisible=!0,this.deleteData={id:e.id,name:e.name,description:e.description,filterJson:e.filterJson,filterFrom:e.filterFrom,createdAt:e.createdAt,modifiedAt:e.modifiedAt,createdBy:e.createdBy,modifiedBy:e.modifiedBy,isDeleted:!0})})}}},A=x,L=(i("2d66"),i("31d6"),Object(f["a"])(A,s,a,!1,null,"e9e06f6a",null));e["default"]=L.exports},8505:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("Modal",{attrs:{width:t.externalAccess?"100vw":"70vw","external-access":t.externalAccess},on:{input:t.closeModal},scopedSlots:t._u([{key:"title",fn:function(){return[t._v('"'+t._s(t.historyTitle)+'" Process History')]},proxy:!0},{key:"action",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Export",expression:"'Export'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-table-arrow-right"},on:{click:t.export_Data}})]},proxy:!0},{key:"default",fn:function(){return[e("div",{attrs:{id:"processHistory"}},[e("div",{staticClass:"col-12 q-mb-md q-pt-sm"},[e("Stepper",{attrs:{"stage-level":t.stageLevel,"current-step":t.currentStep}})],1),e("table",{attrs:{id:"history"}},[e("thead",[e("tr",t._l(t.columns,(function(i){return e("th",{key:i.id},[t._v(" "+t._s(i.label)+" ")])})),0)]),e("tbody",[t._l(t.processHistoryData,(function(i){return[e("tr",{key:i.id},t._l(t.columns,(function(s){return e("td",{key:s.id,staticClass:"ellipsis"},[t._t(s.name,(function(){return["DATE"===s.type?[t._v(" "+t._s(t.$day.format(i[s.name])||"-")+" ")]:"stage"===s.name?[t._v(" "+t._s(i[s.name]||"-")+" "),i.subWorkflowHistory?[i.subWorkflowHistory.length?[e("span",{staticClass:"text-secondary"},[t._v(" [CONNECTOR] ")])]:t._e()]:t._e()]:[t._v(" "+t._s(i[s.name]||"-")+" ")]]}),{value:i[s.name],item:i})],2)})),0),i.comments.length?e("tr",{key:i.id,on:{click:function(t){i.showComments=!i.showComments}}},[e("td",{staticClass:"comments",attrs:{colspan:"6"}},[e("BaseIcon",{attrs:{name:i.showComments?"eva-arrow-downward-outline":"eva-arrow-forward-outline",color:"primary"}}),t._v(" Comments ("+t._s(i.comments.length)+") ")],1)]):t._e(),i.comments.length&&i.showComments?e("tr",{key:i.id},[e("td",{attrs:{colspan:"6"}},[e("table",{attrs:{id:"comments1"}},[e("thead",[e("tr",[e("th",{staticClass:"large"},[t._v("Comments")]),e("th",{staticClass:"medium"},[t._v("Commented By")]),e("th",{staticClass:"medium"},[t._v("Commented On")]),e("th",{staticClass:"medium"},[t._v("Attached In")])])]),e("tbody",[t._l(i.comments,(function(i,s){return[e("tr",{key:s},[e("td",{staticClass:"commentsText ellipsis"},[t._v(" "+t._s(t.removeTags(i.comments)||"-")+" ")]),e("td",{staticClass:"ellipsis"},[t._v(" "+t._s(i.createdByEmail||"-")+" ")]),e("td",{staticClass:"ellipsis"},[t._v(" "+t._s(t.$day.format(i.createdAt)||"-")+" ")]),e("td",[i.embedFileList&&i.embedFileList.length?[e("div",{staticClass:"file-icons",on:{click:function(e){return t.openFileByCmd(i.embedFileList[0])}}},[e("FileIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.embedFileList[0].fileName,expression:"\n                                    comment.embedFileList[0].fileName\n                                  ",modifiers:{top:!0}}],key:"Icon-"+s,staticClass:"file-icon q-mr-sm",attrs:{"mime-type":t.fileType(i.embedFileList[0].fileName)}}),e("a",{staticClass:"file-link",attrs:{href:"javascript:void(0)"},on:{click:function(t){t.preventDefault()}}},[t._v(t._s(i.embedFileList[0].fileName||"-"))])],1)]:[t._v(" "+t._s("-")+" ")]],2)])]}))],2)])])]):t._e(),i.attachments.length?e("tr",{key:i.id},[e("td",{staticClass:"attachments",attrs:{colspan:"6"},on:{click:function(t){i.showAttachments=!i.showAttachments}}},[e("BaseIcon",{attrs:{name:i.showAttachments?"eva-arrow-downward-outline":"eva-arrow-forward-outline",color:"primary"}}),t._v(" Attachments ("+t._s(i.attachments.length)+") ")],1)]):t._e(),i.attachments.length&&i.showAttachments?e("tr",{key:i.id},[e("td",{attrs:{colspan:"6"}},[e("table",{attrs:{id:"attachments"}},[e("thead",[e("tr",[e("th",[t._v("File Name")]),e("th",[t._v("Attached By")]),e("th",[t._v("Attached On")])])]),e("tbody",[t._l(i.attachments,(function(i,s){return[e("tr",{key:s},[e("td",[t._v(t._s(i.name||"-"))]),e("td",[t._v(t._s(i.createdByEmail||"-"))]),e("td",[t._v(" "+t._s(t.$day.format(i.createdAt)||"-")+" ")])])]}))],2)])])]):t._e(),i.subWorkflowHistory?[i.subWorkflowHistory.length?e("tr",{key:i.id},[e("td",{staticClass:"attachments",attrs:{colspan:"6"},on:{click:function(t){i.showSubWorkflowHistory=!i.showSubWorkflowHistory}}},[e("BaseIcon",{attrs:{name:i.showSubWorkflowHistory?"eva-arrow-downward-outline":"eva-arrow-forward-outline",color:"primary"}}),1===i.actionStatus?[e("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Completed",expression:"'Completed'",modifiers:{top:!0}}],staticClass:"q-ml-xs q-mr-xs",attrs:{name:"mdi-progress-check",color:"green"}})]:0===i.actionStatus?[e("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"In-progress",expression:"'In-progress'",modifiers:{top:!0}}],staticClass:"q-ml-xs q-mr-xs",attrs:{name:"mdi-progress-clock",color:"orange"}})]:t._e(),t._v(" "+t._s(i.subWorkflowHistory[0].requestNo)+" ")],2)]):t._e(),i.showSubWorkflowHistory?e("tr",{key:i.id},[e("td",{attrs:{colspan:"6"}},[e("table",{attrs:{id:"attachments"}},[e("thead",t._l(t.columns,(function(i){return e("th",{key:i.id},[t._v(" "+t._s(i.label)+" ")])})),0),e("tbody",[t._l(i.subWorkflowHistory,(function(i){return[e("tr",{key:i.id},t._l(t.columns,(function(s){return e("td",{key:s.id,staticClass:"ellipsis"},[t._t(s.name,(function(){return["DATE"===s.type?[t._v(" "+t._s(t.$day.format(i[s.name])||"-")+" ")]:[t._v(" "+t._s(i[s.name]||"-")+" ")]]}),{value:i[s.name],item:i})],2)})),0)]}))],2)])])]):t._e()]:t._e()]}))],2)])])]},proxy:!0}],null,!0),model:{value:t.processHistoryModal,callback:function(e){t.processHistoryModal=e},expression:"processHistoryModal"}}),e("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(e){t.fileSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"attachmentFileHeader"},[e("div",{staticClass:"avatar q-ml-sm"},[e("FileIcon",{attrs:{"mime-type":t.fileType(t.selectedFile.name)}})],1),e("div",{staticClass:"q-ml-md"},[e("div",{staticClass:"filename"},[t._v(" "+t._s(t.selectedFile.name)+" ")]),e("div",{staticClass:"meta"},[e("div",[t._v(" Archived At: "+t._s(t.$day.format(t.selectedFiles[0].createdAt))+" ")]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v("Archived By: "+t._s(t.selectedFiles[0].createdByEmail))]),t.selectedFiles[0].size?e("div",[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t._v(" File Size: "+t._s(t.fileSize(t.selectedFiles[0].size))+" ")],1):t._e()],1)])])]},proxy:!0}]),model:{value:t.fileSheet,callback:function(e){t.fileSheet=e},expression:"fileSheet"}},[e("div",{staticClass:"attachmentFileFrame"},[e("div",{staticClass:"file-list"},[e("iframe",{ref:"myAttachmentFiles",attrs:{id:"file-frame",src:t.fileLink(),frameborder:"0"}})])])])],1)},a=[],o=(i("14d9"),i("1b0d")),r=i("6a70"),n=i("0006"),l=i("fa1f"),c=i("381e"),d=i("dd90"),m=i("a7d2"),h=i("42fc"),u={name:"ProcessHistory",components:{Modal:r["a"],Stepper:n["a"],Sheet:c["a"],FileIcon:l["a"]},props:{processId:{type:Number,required:!0},selectedProcess:{type:Object,default:()=>{}},externalAccess:{type:Boolean,default:!1}},data(){return{historyTitle:"",processHistoryData:[],processHistoryModal:!1,columns:[{id:this.$nano.id(),name:"stage",label:"STAGE",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"actionUser",label:"ACTION USER",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"receivedOn",label:"RECEIVED ON",type:"DATE"},{id:this.$nano.id(),name:"processedBy",label:"PROCESSED BY",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"processedOn",label:"PROCESSED ON",type:"DATE"},{id:this.$nano.id(),name:"status",label:"STATUS",type:"SHORT_TEXT"}],stageLevel:[],currentStep:0,selectedFile:{},fileSheet:!1,selectedFiles:[]}},watch:{processId:{immediate:!0,handler(){this.processId&&this.showHistory(this.processId)}}},methods:{async showHistory(t){this.processHistoryModal=!0,this.processHistoryData=[],this.historyTitle=this.selectedProcess.requestNo,this.$store.commit("showLoadingBarSave");const{error:e,payload:i}=await o["t"].processHistory(this.selectedProcess.id,t);this.$store.commit("hideLoadingBarSave"),e?this.$alert.error(e):i.length&&(i.forEach(t=>{this.processHistoryData.push({...t,showComments:!1,showAttachments:!1,showSubWorkflowHistory:!1})}),this.stageLevel=[],this.currentStep=0,i.forEach(t=>{if(2!==t.actionStatus)if(0===this.stageLevel.filter(e=>e.id===t.activityId).length)this.stageLevel.push({id:t.activityId,label:t.stage,status:t.status}),((t.actionUser||t.subWorkflowHistory)&&t.status&&"Forward"!==t.status||null===t.actionUser&&!t.subWorkflowHistory)&&(this.currentStep+=1);else if(t.status)this.stageLevel.filter(e=>e.id===t.activityId&&e.status!==t.status).length?this.currentStep+=1:this.currentStep-=1;else{let e=this.stageLevel.findIndex(e=>e.id===t.activityId);e>-1&&(this.stageLevel.splice(e,this.stageLevel.length-e),this.stageLevel.push({id:t.activityId,label:t.stage,status:t.status}),t.actionUser&&t.status&&"Forward"!==t.status||null===t.actionUser?this.currentStep=e+1:this.currentStep=e)}}))},openFileByCmd(t){const e=t,{fileName:i,itemid:s,...a}=e;this.selectedFile={name:i,id:s,...a};const o=this.processHistoryData.map(t=>t.attachments).flat();this.selectedFiles=o.filter(t=>t.id==this.selectedFile.id&&t.name==this.selectedFile.name),this.openFile(this.selectedFile)},fileSize(t){return Object(m["a"])(t)},fileLink(){let t=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let e=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let i=1;return"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(i=2),Object(d["d"])(e)?"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${i}`:"https://trial.ezofis.com"===t?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${i}`:"https://app.ezofis.com"===t?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${i}`:`${t}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${i}`:"http://52.172.32.88"===t?`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${i}`:`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${i}`}return Object(d["d"])(e)?"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:"https://trial.ezofis.com"!==t||Object(d["c"])(e)?"https://app.ezofis.com"===t?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:`${t}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:Object(d["b"])(e)||"http://52.172.32.88"!==t?`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`:`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.selectedProcess.id}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`}},openFile(t){if(t.loading)this.$alert.info("Please wait to complete the uploading");else{this.selectedFile=t;let e=location.origin;"https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e?window.open(this.fileLink()):this.fileSheet=!0}},fileType(t){if(t)return t.split(".").reverse()[0].slice(0,4)},closeModal(){this.processHistoryModal=!1,this.$emit("close")},removeTags(t){return t?t.replace(/(<([^>]+)>)/gi,""):""},export_Data1(){let t=[];this.processHistoryData.forEach(e=>{t.push({Stage:e.stage,"Action User":e.actionUser,"Received On":this.$day.format(e.receivedOn),"Processed On":this.$day.format(e.processedOn),"Processed By":e.processedBy,Status:e.status})}),Object(h["a"])(t,this.historyTitle+" - Process History")},export_Data(){let t=[];this.processHistoryData.forEach(e=>{if(t.push({Stage:e.stage,"Action User":e.actionUser||"","Received On":this.$day.format(e.receivedOn)||"","Processed On":this.$day.format(e.processedOn)||"","Processed By":e.processedBy||"",Status:e.status||""}),e.comments&&e.comments.length){let i;t.push({Stage:`<span style="color: #00BCD4;font-weight: bold;">Comments(${e.comments.length})</span>`}),t.push({Stage:"<strong>Comments<strong>","Action User":"<strong>Commented By<strong>","Received On":"<strong>Commented On<strong>","Processed On":"<strong>Attached In<strong>"}),e.comments.forEach(e=>{e.embedFileList&&e.embedFileList.length&&e.embedFileList.forEach(t=>{i=t.fileName}),t.push({Stage:`<span style="color: #00BCD4;">${e.comments||""}</span>`,"Action User":`<span style="color: #00BCD4;">${e.createdByEmail||""}</span>`,"Received On":`<span style="color: #00BCD4;">${this.$day.format(e.createdAt)||""}</span>`,"Processed On":`<span style="color: #00BCD4;">${i||""}</span>`})})}e.attachments&&e.attachments.length&&(t.push({Stage:`<span style="color: #643094;font-weight: bold;">Attachment(${e.attachments.length})</span>`}),t.push({Stage:"<strong>File Name<strong>","Action User":"<strong>\tAttached By<strong>","Received On":"<strong>Attached On<strong>"}),e.attachments.forEach(e=>{t.push({Stage:`<span style="color: #643094; border: 12px solid#50067e;">${e.name||""}</span>`,"Action User":`<span style="color: #643094;">${e.createdByEmail||""}</span>`,"Received On":`<span style="color: #643094;">${this.$day.format(e.createdAt)||""}</span>`})})),e.subWorkflowHistory&&e.subWorkflowHistory.length&&(t.push({Stage:`<span style="color: #e97f06;font-weight: bold;">${e.subWorkflowHistory[0].requestNo}[Connector]<span>`}),t.push({Stage:"<strong>Stage</strong>","Action User":"<strong>Action User</strong>","Received On":"<strong>Received On</strong>","Processed On":"<strong>Processed On</strong>","Processed By":"<strong>Processed By</strong>",Status:"<strong>status</strong>"}),e.subWorkflowHistory.forEach(e=>{t.push({Stage:`<span style="color: #e97f06;">${e.stage}</span>`,"Action User":`<span style="color: #e97f06;border:2px solid black">${e.actionUser||""}</span>`,"Received On":`<span style="color: #e97f06;">${this.$day.format(e.receivedOn)||""}</span>`,"Processed On":`<span style="color: #e97f06;">${this.$day.format(e.processedOn)||""}</span>`,"Processed By":`<span style="color: #e97f06;">${e.processedBy||""}</span>`,Status:`<span style="color: #e97f06;">${e.status||""}</span>`})}))}),Object(h["a"])(t,this.historyTitle+" Report")}}},p=u,f=(i("bf55"),i("2877")),v=i("4e73"),y=i("93dc"),b=i.n(y),g=Object(f["a"])(p,s,a,!1,null,"2443da3d",null);e["a"]=g.exports;b()(g,"components",{QMenu:v["a"]})},8749:function(t,e,i){},"874f":function(t,e,i){"use strict";var s=i("7c4a"),a=i("0e40"),o=Object(s["a"])((function(t,e,i){return t+(i?" ":"")+Object(a["a"])(e)}));e["a"]=o},"87dc":function(t,e,i){"use strict";i("5f3d")},8829:function(t,e,i){"use strict";i("4714")},"888a":function(t,e,i){},8920:function(t,e,i){},"8b18":function(t,e,i){"use strict";i("28f7")},"8b55":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",t._g({class:{active:t.isActive,"is-full-width":t.isFullWidth},style:{color:t.isActive?t._color:""},attrs:{id:"tab"}},t.$listeners),[t._v(" "+t._s(t.label)+" ")])},a=[],o={name:"Tab",props:{label:{type:String,required:!0},isActive:{type:Boolean,default:!1},isFullWidth:{type:Boolean,default:!1},color:{type:String,default:"primary"}},computed:{_color(){return`var(--${this.color})`}}},r=o,n=(i("2ac6"),i("2877")),l=Object(n["a"])(r,s,a,!1,null,"f3c4783e",null);e["a"]=l.exports},"8ddd":function(t,e,i){},"8fbb":function(t,e,i){},"91dd":function(t,e,i){},9404:function(t,e,i){"use strict";i("caad"),i("14d9");var s=i("a026"),a=i("58e5"),o=i("463c"),r=i("7ee0"),n=i("efe6"),l=i("b7fa"),c=i("75c3"),d=i("7937"),m=i("e277"),h=i("d54d"),u=i("f376");const p=150,f=["mouseover","mouseout","mouseenter","mouseleave"];e["a"]=s["default"].extend({name:"QDrawer",inject:{layout:{default(){console.error("QDrawer needs to be child of QLayout")}}},mixins:[l["a"],a["a"],o["a"],r["a"],n["a"]],directives:{TouchPan:c["a"]},props:{side:{type:String,default:"left",validator:t=>["left","right"].includes(t)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:t=>["default","desktop","mobile"].includes(t),default:"default"},bordered:Boolean,elevated:Boolean,contentStyle:[String,Object,Array],contentClass:[String,Object,Array],overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},data(){const t="mobile"===this.behavior||"desktop"!==this.behavior&&this.layout.totalWidth<=this.breakpoint;return{belowBreakpoint:t,showing:!0===this.showIfAbove&&!1===t||!0===this.value}},watch:{belowBreakpoint(t){!0===t?(this.lastDesktopState=this.showing,!0===this.showing&&this.hide(!1)):!1===this.overlay&&"mobile"!==this.behavior&&!1!==this.lastDesktopState&&(!0===this.showing?(this.__applyPosition(0),this.__applyBackdrop(0),this.__cleanup()):this.show(!1))},"layout.totalWidth"(){!0!==this.layout.container&&!0===document.qScrollPrevented||this.__updateBelowBreakpoint()},side(t,e){this.layout.instances[e]===this&&(this.layout.instances[e]=void 0,this.layout[e].space=!1,this.layout[e].offset=0),this.layout.instances[t]=this,this.layout[t].size=this.size,this.layout[t].space=this.onLayout,this.layout[t].offset=this.offset},behavior(){this.__updateBelowBreakpoint()},breakpoint(){this.__updateBelowBreakpoint()},"layout.container"(t){!0===this.showing&&this.__preventScroll(!0!==t),!0===t&&this.__updateBelowBreakpoint()},"layout.scrollbarWidth"(){this.__applyPosition(!0===this.showing?0:void 0)},offset(t){this.__update("offset",t)},onLayout(t){this.$emit("on-layout",t),this.__update("space",t)},rightSide(){this.__applyPosition()},size(t){this.__applyPosition(),this.__updateSizeOnLayout(this.miniToOverlay,t)},miniToOverlay(t){this.__updateSizeOnLayout(t,this.size)},"$q.lang.rtl"(){this.__applyPosition()},mini(){!0===this.value&&(this.__animateMini(),this.layout.__animate())},isMini(t){this.$emit("mini-state",t)}},computed:{rightSide(){return"right"===this.side},otherSide(){return!0===this.rightSide?"left":"right"},offset(){return!0===this.showing&&!1===this.belowBreakpoint&&!1===this.overlay?!0===this.miniToOverlay?this.miniWidth:this.size:0},size(){return!0===this.isMini?this.miniWidth:this.width},fixed(){return!0===this.overlay||!0===this.miniToOverlay||this.layout.view.indexOf(this.rightSide?"R":"L")>-1||this.$q.platform.is.ios&&!0===this.layout.container},onLayout(){return!0===this.showing&&!1===this.belowBreakpoint&&!1===this.overlay},onScreenOverlay(){return!0===this.showing&&!1===this.belowBreakpoint&&!0===this.overlay},backdropClass(){return!1===this.showing?"hidden":null},headerSlot(){return!0===this.rightSide?"r"===this.layout.rows.top[2]:"l"===this.layout.rows.top[0]},footerSlot(){return!0===this.rightSide?"r"===this.layout.rows.bottom[2]:"l"===this.layout.rows.bottom[0]},aboveStyle(){const t={};return!0===this.layout.header.space&&!1===this.headerSlot&&(!0===this.fixed?t.top=this.layout.header.offset+"px":!0===this.layout.header.space&&(t.top=this.layout.header.size+"px")),!0===this.layout.footer.space&&!1===this.footerSlot&&(!0===this.fixed?t.bottom=this.layout.footer.offset+"px":!0===this.layout.footer.space&&(t.bottom=this.layout.footer.size+"px")),t},style(){const t={width:this.size+"px"};return!0===this.belowBreakpoint?t:Object.assign(t,this.aboveStyle)},classes(){return"q-drawer--"+this.side+(!0===this.bordered?" q-drawer--bordered":"")+(!0===this.isDark?" q-drawer--dark q-dark":"")+(!0!==this.showing?" q-layout--prevent-focus":"")+(!0===this.belowBreakpoint?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":" q-drawer--"+(!0===this.isMini?"mini":"standard")+(!0===this.fixed||!0!==this.onLayout?" fixed":"")+(!0===this.overlay||!0===this.miniToOverlay?" q-drawer--on-top":"")+(!0===this.headerSlot?" q-drawer--top-padding":""))},stateDirection(){return(!0===this.$q.lang.rtl?-1:1)*(!0===this.rightSide?1:-1)},isMini(){return!0===this.mini&&!0!==this.belowBreakpoint},onNativeEvents(){if(!0!==this.belowBreakpoint){const t={"!click":t=>{this.$emit("click",t)}};return f.forEach(e=>{t[e]=t=>{void 0!==this.qListeners[e]&&this.$emit(e,t)}}),t}},hideOnRouteChange(){return!0!==this.persistent&&(!0===this.belowBreakpoint||!0===this.onScreenOverlay)},openDirective(){const t=!0===this.$q.lang.rtl?this.side:this.otherSide;return[{name:"touch-pan",value:this.__openByTouch,modifiers:{[t]:!0,mouse:!0}}]},contentCloseDirective(){if(!0!==this.noSwipeClose){const t=!0===this.$q.lang.rtl?this.otherSide:this.side;return[{name:"touch-pan",value:this.__closeByTouch,modifiers:{[t]:!0,mouse:!0}}]}},backdropCloseDirective(){if(!0!==this.noSwipeBackdrop){const t=!0===this.$q.lang.rtl?this.otherSide:this.side;return[{name:"touch-pan",value:this.__closeByTouch,modifiers:{[t]:!0,mouse:!0,mouseAllDir:!0}}]}}},methods:{__applyPosition(t){void 0===t?this.$nextTick(()=>{t=!0===this.showing?0:this.size,this.__applyPosition(this.stateDirection*t)}):void 0!==this.$refs.content&&(!0!==this.layout.container||!0!==this.rightSide||!0!==this.belowBreakpoint&&Math.abs(t)!==this.size||(t+=this.stateDirection*this.layout.scrollbarWidth),this.__lastPosition!==t&&(this.$refs.content.style.transform=`translateX(${t}px)`,this.__lastPosition=t))},__applyBackdrop(t,e){void 0!==this.$refs.backdrop?this.$refs.backdrop.style.backgroundColor=this.lastBackdropBg=`rgba(0,0,0,${.4*t})`:!0!==e&&this.$nextTick(()=>{this.__applyBackdrop(t,!0)})},__setBackdropVisible(t){void 0!==this.$refs.backdrop&&this.$refs.backdrop.classList[!0===t?"remove":"add"]("hidden")},__setScrollable(t){const e=!0===t?"remove":!0!==this.layout.container?"add":"";""!==e&&document.body.classList[e]("q-body--drawer-toggle")},__animateMini(){void 0!==this.timerMini?clearTimeout(this.timerMini):void 0!==this.$el&&this.$el.classList.add("q-drawer--mini-animate"),this.timerMini=setTimeout(()=>{void 0!==this.$el&&this.$el.classList.remove("q-drawer--mini-animate"),this.timerMini=void 0},150)},__openByTouch(t){if(!1!==this.showing)return;const e=this.size,i=Object(d["a"])(t.distance.x,0,e);if(!0===t.isFinal){const t=this.$refs.content,s=i>=Math.min(75,e);return t.classList.remove("no-transition"),void(!0===s?this.show():(this.layout.__animate(),this.__applyBackdrop(0),this.__applyPosition(this.stateDirection*e),t.classList.remove("q-drawer--delimiter"),t.classList.add("q-layout--prevent-focus"),this.__setBackdropVisible(!1)))}if(this.__applyPosition((!0===this.$q.lang.rtl?!0!==this.rightSide:this.rightSide)?Math.max(e-i,0):Math.min(0,i-e)),this.__applyBackdrop(Object(d["a"])(i/e,0,1)),!0===t.isFirst){const t=this.$refs.content;t.classList.add("no-transition"),t.classList.add("q-drawer--delimiter"),t.classList.remove("q-layout--prevent-focus"),this.__setBackdropVisible(!0)}},__closeByTouch(t){if(!0!==this.showing)return;const e=this.size,i=t.direction===this.side,s=(!0===this.$q.lang.rtl?!0!==i:i)?Object(d["a"])(t.distance.x,0,e):0;if(!0===t.isFinal){const t=Math.abs(s)<Math.min(75,e);return this.$refs.content.classList.remove("no-transition"),void(!0===t?(this.layout.__animate(),this.__applyBackdrop(1),this.__applyPosition(0)):this.hide())}this.__applyPosition(this.stateDirection*s),this.__applyBackdrop(Object(d["a"])(1-s/e,0,1)),!0===t.isFirst&&this.$refs.content.classList.add("no-transition")},__show(t,e){if(this.__addHistory(),this.__setBackdropVisible(!0),!1!==t&&this.layout.__animate(),this.__applyPosition(0),!0===this.belowBreakpoint){const t=this.layout.instances[this.otherSide];void 0!==t&&!0===t.belowBreakpoint&&t.hide(!1),this.__applyBackdrop(1),!0!==this.layout.container&&this.__preventScroll(!0)}else this.__applyBackdrop(0),!1!==t&&this.__setScrollable(!1);this.__registerTimeout(()=>{!1!==t&&this.__setScrollable(!0),!0!==e&&this.$emit("show",t)},p)},__hide(t,e){this.__removeHistory(),!1!==t&&this.layout.__animate(),this.__applyBackdrop(0),this.__applyPosition(this.stateDirection*this.size),this.__setBackdropVisible(!1),this.__cleanup(),!0!==e?this.__registerTimeout(()=>{this.$emit("hide",t)},p):this.__removeTimeout()},__cleanup(){this.__preventScroll(!1),this.__setScrollable(!0)},__update(t,e){this.layout[this.side][t]!==e&&(this.layout[this.side][t]=e)},__updateLocal(t,e){this[t]!==e&&(this[t]=e)},__updateSizeOnLayout(t,e){this.__update("size",!0===t?this.miniWidth:e)},__updateBelowBreakpoint(){this.__updateLocal("belowBreakpoint","mobile"===this.behavior||"desktop"!==this.behavior&&this.layout.totalWidth<=this.breakpoint)}},created(){this.__useTimeout("__registerTimeout","__removeTimeout"),this.layout.instances[this.side]=this,this.__updateSizeOnLayout(this.miniToOverlay,this.size),this.__update("space",this.onLayout),this.__update("offset",this.offset),!0===this.showIfAbove&&!0!==this.value&&!0===this.showing&&void 0!==this.qListeners.input&&this.$emit("input",!0)},mounted(){this.$emit("on-layout",this.onLayout),this.$emit("mini-state",this.isMini),this.lastDesktopState=!0===this.showIfAbove;const t=()=>{const t=!0===this.showing?"show":"hide";this["__"+t](!1,!0)};0===this.layout.totalWidth?this.watcher=this.$watch("layout.totalWidth",()=>{this.watcher(),this.watcher=void 0,!1===this.showing&&!0===this.showIfAbove&&!1===this.belowBreakpoint?this.show(!1):t()}):this.$nextTick(t)},beforeDestroy(){void 0!==this.watcher&&this.watcher(),clearTimeout(this.timerMini),!0===this.showing&&this.__cleanup(),this.layout.instances[this.side]===this&&(this.layout.instances[this.side]=void 0,this.__update("size",0),this.__update("offset",0),this.__update("space",!1))},render(t){const e=[];!0===this.belowBreakpoint&&(!0!==this.noSwipeOpen&&e.push(t("div",{staticClass:"q-drawer__opener fixed-"+this.side,attrs:u["a"],directives:this.openDirective})),e.push(t("div",{ref:"backdrop",staticClass:"fullscreen q-drawer__backdrop",class:this.backdropClass,attrs:u["a"],style:void 0!==this.lastBackdropBg?{backgroundColor:this.lastBackdropBg}:null,on:Object(h["b"])(this,"bkdrop",{click:this.hide}),directives:!1===this.showing?void 0:this.backdropCloseDirective})));const i=[t("div",{staticClass:"q-drawer__content fit "+(!0===this.layout.container?"overflow-auto":"scroll"),class:this.contentClass,style:this.contentStyle},!0===this.isMini&&void 0!==this.$scopedSlots.mini?this.$scopedSlots.mini():Object(m["c"])(this,"default"))];return!0===this.elevated&&!0===this.showing&&i.push(t("div",{staticClass:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(t("aside",{ref:"content",staticClass:"q-drawer",class:this.classes,style:this.style,on:this.onNativeEvents,directives:!0===this.belowBreakpoint?this.contentCloseDirective:void 0},i)),t("div",{staticClass:"q-drawer-container"},e)}})},9495:function(t,e,i){"use strict";i("888a")},"94f5":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",t._g({attrs:{id:"action"}},t.$listeners),[e("BaseIcon",{attrs:{name:t.icon,"inherit-color":""}}),e("div",{staticClass:"label"},[t._v(t._s(t.label))])],1)},a=[],o={name:"Action",props:{icon:{type:String,required:!0},label:{type:String,default:""}}},r=o,n=(i("a116"),i("2877")),l=Object(n["a"])(r,s,a,!1,null,"1619714d",null);e["a"]=l.exports},"970a":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));const s={CONTAINS:"CONTAINS",IS_EQUALS_TO:"IS_EQUALS_TO (=)",IS_NOT_EQUALS_TO:"IS_NOT_EQUALS_TO (!=)",IS_GREATER_THAN:"IS_GREATER_THAN (>)",IS_GREATER_THAN_OR_EQUALS_TO:"IS_GREATER_THAN_OR_EQUALS_TO (>=)",IS_LESSER_THAN:"IS_LESSER_THAN (<)",IS_LESSER_THAN_OR_EQUALS_TO:"IS_LESSER_THAN_OR_EQUALS_TO (<=)",IS_EMPTY:"IS_EMPTY ({})",IS_NOT_EMPTY:"IS_NOT_EMPTY (!{})",IS_ANY_OF:"IS_ANY_OF",IS_NOT_ANY_OF:"IS_NOT_ANY_OF",NOT_CONTAINS:"NOT_CONTAINS",STARTS_WITH:"STARTS_WITH",NOT_STARTS_WITH:"NOT_STARTS_WITH",ENDS_WITH:"ENDS_WITH",NOT_ENDS_WITH:"NOT_ENDS_WITH"};Object.freeze(s);var a=s,o=i("381b");function r(t){switch(t){case o["a"].NUMBER:case o["a"].DATE:case o["a"].TIME:case o["a"].DATE_TIME:case o["a"].COUNTER:case o["a"].CALCULATED:return[a.IS_EQUALS_TO,a.IS_NOT_EQUALS_TO,a.IS_GREATER_THAN,a.IS_GREATER_THAN_OR_EQUALS_TO,a.IS_LESSER_THAN,a.IS_LESSER_THAN_OR_EQUALS_TO,a.IS_EMPTY,a.IS_NOT_EMPTY,a.IS_ANY_OF,a.IS_NOT_ANY_OF,a.STARTS_WITH,a.NOT_STARTS_WITH,a.ENDS_WITH,a.NOT_ENDS_WITH];case o["a"].SHORT_TEXT:case o["a"].LONG_TEXT:case o["a"].TABLE:return[a.CONTAINS,a.IS_EQUALS_TO,a.IS_NOT_EQUALS_TO,a.IS_EMPTY,a.IS_NOT_EMPTY,a.IS_ANY_OF,a.IS_NOT_ANY_OF,a.NOT_CONTAINS,a.STARTS_WITH,a.NOT_STARTS_WITH,a.ENDS_WITH,a.NOT_ENDS_WITH];case o["a"].SINGLE_SELECT:case o["a"].MULTI_SELECT:case o["a"].MULTIPLE_CHOICE:return[a.CONTAINS,a.IS_EMPTY,a.IS_NOT_EMPTY,a.IS_EQUALS_TO,a.IS_NOT_EQUALS_TO,a.IS_ANY_OF,a.IS_NOT_ANY_OF];default:return[a.IS_EMPTY,a.IS_NOT_EMPTY,a.IS_EQUALS_TO,a.IS_NOT_EQUALS_TO]}}},"97a4":function(t,e,i){},9935:function(t,e,i){},"9a8d":function(t,e,i){},"9bc4":function(t,e,i){"use strict";var s=i("b703"),a=i("09f4"),o=i("1549"),r=i("2250"),n=i("f842"),l=i("e8b2");function c(t){return Object(l["a"])(t)?void 0:t}var d=c,m=i("b4f1"),h=i("ca54"),u=i("f5fe"),p=i("ff51"),f=h["a"]?h["a"].isConcatSpreadable:void 0;function v(t){return Object(p["a"])(t)||Object(u["a"])(t)||!!(f&&t&&t[f])}var y=v;function b(t,e,i,s,a){var o=-1,r=t.length;i||(i=y),a||(a=[]);while(++o<r){var n=t[o];e>0&&i(n)?e>1?b(n,e-1,i,s,a):Object(m["a"])(a,n):s||(a[a.length]=n)}return a}var g=b;function w(t){var e=null==t?0:t.length;return e?g(t,1):[]}var C=w,k=i("500e"),S=i("c619");function I(t){return Object(S["a"])(Object(k["a"])(t,void 0,C),t+"")}var _=I,T=i("4e71"),$=1,x=2,A=4,L=_((function(t,e){var i={};if(null==t)return i;var l=!1;e=Object(s["a"])(e,(function(e){return e=Object(r["a"])(e,t),l||(l=e.length>1),e})),Object(n["a"])(t,Object(T["a"])(t),i),l&&(i=Object(a["a"])(i,$|x|A,d));var c=e.length;while(c--)Object(o["a"])(i,e[c]);return i}));e["a"]=L},"9db8":function(t,e,i){},"9ef6":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"file-list"}},[e("div",{staticClass:"header",class:{"has-selected-files":t.hasSelectedFiles},on:{click:t.toggleContent}},[e("div",{staticClass:"label name-and-files"},[t._t("label"),e("span",{staticClass:"q-ml-xs"},[t._v("("+t._s(t.numberOfFiles)+")")])],2),e("q-space"),t.showAutoLoad?e("div",{staticClass:"auto-reload"},[t.isContentMaximized?e("p",{staticClass:"q-ml-sm text-gray ellipsis",staticStyle:{"font-size":"10px","margin-top":"15px"}},[t._v(" auto-refresh every 15 seconds ")]):t._e(),t.isContentMaximized?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.refreshClicked()}}}):t._e()],1):t._e(),t.isContentMaximized?t._t("actions-maximized"):t._t("actions-minimized"),e("BaseIcon",{staticClass:"icon",class:{"rotate-180":t.isContentMaximized},attrs:{name:"mdi-menu-down","inherit-color":""}})],2),e("q-expansion-item",{attrs:{value:t.isContentMaximized,"header-style":t._styles}},[t.hasFiles?e("div",{staticClass:"q-pb-sm"},[t._t("default")],2):e("div",{staticClass:"no-files"},[t._v("No files found")])])],1)},a=[],o={name:"FileList",props:{hasFiles:{type:Boolean,default:!1},hasSelectedFiles:{type:Boolean,default:!1},numberOfFiles:{type:Number,default:0},showAutoLoad:{type:Boolean,default:!1}},data(){return{reloadClicked:!1,isContentMaximized:this.hasFiles}},computed:{_styles(){return{minHeight:"0px",height:"0px",padding:"0px",overflow:"hidden"}}},watch:{hasFiles(t){this.isContentMaximized=t}},mounted(){this.startAutoRefresh()},beforeDestroy(){this.stopAutoRefresh()},methods:{toggleContent(){this.reloadClicked?this.reloadClicked=!1:this.isContentMaximized=!this.isContentMaximized},showContent(){this.isContentMaximized=this.hasFiles},refreshClicked(){this.reloadClicked=!0,this.getdata()},getdata(){this.isContentMaximized&&this.$emit("getFiles")},startAutoRefresh(){this.autoRefreshInterval=setInterval(()=>{this.getdata()},15e3)},stopAutoRefresh(){this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=null)}}},r=o,n=(i("5e5c"),i("2877")),l=i("2c91"),c=i("3b73"),d=i("93dc"),m=i.n(d),h=Object(n["a"])(r,s,a,!1,null,"d1f2acf4",null);e["a"]=h.exports;m()(h,"components",{QSpace:l["a"],QExpansionItem:c["a"]})},a116:function(t,e,i){"use strict";i("f6de")},a4c9:function(t,e,i){"use strict";i("91dd")},a589:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{style:{width:t.formWidth},attrs:{id:"custom-form-view"}},[e("div",{staticClass:"header"},[e("div",{staticClass:"col-auto logo"},[e("img",{attrs:{src:t._logo}})]),t._m(0)]),e("div",{staticClass:"content"},[e("FormFieldLabel",{attrs:{label:"Claimant Search"}}),e("div",{staticClass:"content-wrapper"},[t.$q.screen.width>1280?e("div",{staticClass:"row q-mb-md"},[e("MultiSelectField",{staticClass:"col",attrs:{label:"lender",options:t.lenderList},model:{value:t.lender,callback:function(e){t.lender=e},expression:"lender"}}),e("TextField",{staticClass:"col q-ml-md",attrs:{label:"first name"},on:{enter:t.getData},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}),e("TextField",{staticClass:"col q-ml-md",attrs:{label:"last name"},on:{enter:t.getData},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}}),e("DateField",{staticClass:"col q-ml-md",attrs:{label:"DOB"},on:{enter:t.getData},model:{value:t.dob,callback:function(e){t.dob=e},expression:"dob"}}),e("TextField",{staticClass:"col q-ml-md",attrs:{label:"province"},on:{enter:t.getData},model:{value:t.province,callback:function(e){t.province=e},expression:"province"}}),e("TextField",{staticClass:"col q-ml-md",attrs:{label:"claim number"},on:{enter:t.getData},model:{value:t.claimNumber,callback:function(e){t.claimNumber=e},expression:"claimNumber"}}),e("TextField",{staticClass:"col q-ml-md",attrs:{label:"contract number"},on:{enter:t.getData},model:{value:t.contractNumber,callback:function(e){t.contractNumber=e},expression:"contractNumber"}}),e("TextField",{staticClass:"col q-ml-md",attrs:{label:"Ref. number"},on:{enter:t.getData},model:{value:t.refNumber,callback:function(e){t.refNumber=e},expression:"refNumber"}}),e("BaseButton",{staticClass:"searchBtn col-auto q-ml-md",attrs:{label:"Search",icon:"eva-search-outline"},on:{click:t.getData}})],1):e("div",[e("div",{staticClass:"row q-mb-md"},[e("MultiSelectField",{staticClass:"col",attrs:{label:"lender",options:t.lenderList},model:{value:t.lender,callback:function(e){t.lender=e},expression:"lender"}}),e("TextField",{staticClass:"col q-ml-md",attrs:{label:"first name"},on:{enter:t.getData},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}),e("TextField",{staticClass:"col q-ml-md",attrs:{label:"last name"},on:{enter:t.getData},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}}),e("DateField",{staticClass:"col q-ml-md",attrs:{label:"DOB"},on:{enter:t.getData},model:{value:t.dob,callback:function(e){t.dob=e},expression:"dob"}})],1),e("div",{staticClass:"row q-mb-md"},[e("TextField",{staticClass:"col",attrs:{label:"province"},on:{enter:t.getData},model:{value:t.province,callback:function(e){t.province=e},expression:"province"}}),e("TextField",{staticClass:"col q-ml-md",attrs:{label:"claim number"},on:{enter:t.getData},model:{value:t.claimNumber,callback:function(e){t.claimNumber=e},expression:"claimNumber"}}),e("TextField",{staticClass:"col q-ml-md",attrs:{label:"contract number"},on:{enter:t.getData},model:{value:t.contractNumber,callback:function(e){t.contractNumber=e},expression:"contractNumber"}}),e("TextField",{staticClass:"col q-ml-md",attrs:{label:"Ref. number"},on:{enter:t.getData},model:{value:t.refNumber,callback:function(e){t.refNumber=e},expression:"refNumber"}}),e("BaseButton",{staticClass:"searchBtn col-auto q-ml-md",attrs:{label:"Search",icon:"eva-search-outline"},on:{click:t.getData}})],1)])]),e("div",{staticClass:"row q-mb-xs"},[e("div",{staticClass:"col q-mt-sm"},[e("FormFieldLabel",{attrs:{label:"Search Results"}})],1),e("q-space"),e("div",{staticClass:"col-auto"},[e("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:t.searchRow}})],1),e("div",{staticClass:"col-auto"},[e("BaseButton",{attrs:{label:"Add Contract and Send Package",icon:"eva-plus-outline",color:"gray"},on:{click:function(e){t.addContractSheet=!0}}})],1)],1),e("div",{staticClass:"content-wrapper tables"},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 360px)"}},[e("div",{staticClass:"row"},[e("FormFieldLabel",{attrs:{label:t.contractCount}}),e("BaseActionButton",{staticClass:"q-ml-sm small",attrs:{icon:t.contractExpand?"mdi-chevron-down":"mdi-chevron-up","is-flat":"","no-border":""},on:{click:function(e){t.contractExpand=!t.contractExpand}}})],1),t.contractExpand?e("table",[e("thead",[e("tr",[e("th",{staticClass:"sticky",staticStyle:{left:"0",width:"15px"}}),t._l(t.contractColumnsFilter,(function(i){return e("th",{key:i.id},[t._v(" "+t._s(i.label)+" ")])})),e("th",{staticClass:"sticky"})],2)]),e("tbody",[t._l(t.tableContracts,(function(i){return[e("tr",{key:i.id},[e("td",{staticClass:"sticky",staticStyle:{left:"0",width:"15px"}},[e("div",{staticClass:"row items-center justify-center"},[e("BaseButton",{attrs:{label:"Expand",icon:i.infoVisible?"eva-eye-off":"eva-eye",color:"secondary","is-flat":"","no-border":""},on:{click:function(t){i.infoVisible=!i.infoVisible}}})],1)]),t._l(t.contractColumnsFilter,(function(s){return e("td",{key:s.id},[s.editable?["email"===s.valueType?[e("ValidationProvider",{attrs:{name:s.name,rules:{required:s.required,email:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:a}){return[e("TextField",{attrs:{"is-mandatory":"",error:a[0]},model:{value:i[s.name],callback:function(e){t.$set(i,s.name,e)},expression:"item[column.name]"}})]}}],null,!0)})]:"lender"===s.name?[e("ValidationProvider",{attrs:{name:s.name,rules:{required:s.required}},scopedSlots:t._u([{key:"default",fn:function({errors:a}){return[e("SelectField",{attrs:{"is-mandatory":"",options:t.lenderList,error:a[0]},model:{value:i[s.name],callback:function(e){t.$set(i,s.name,e)},expression:"item[column.name]"}})]}}],null,!0)})]:[e("TextField",{attrs:{"is-mandatory":""},model:{value:i[s.name],callback:function(e){t.$set(i,s.name,e)},expression:"item[column.name]"}})]]:[t._t(s.name,(function(){return[t._v(" "+t._s(i[s.name])+" ")]}),{value:i[s.name],item:i})]],2)})),e("td",{staticClass:"sticky"},[e("div",{staticClass:"row justify-center"},[e("BaseButton",{staticClass:"col-auto q-ml-md",attrs:{label:"Send Package",icon:"mdi-file-send-outline",color:"secondary"},on:{click:function(e){return t.getProduct(i.id)}}})],1)])],2),i.infoVisible?e("tr",{key:"sub-"+i.id},[e("td",{attrs:{colspan:t.contractColumnsFilter.length+2}},[e("table",{staticClass:"subDetails"},[e("thead",t._l(t.contractColumnsInfo,(function(i){return e("th",{key:i.id},[t._v(" "+t._s(i.label)+" ")])})),0),e("tbody",t._l(t.contractColumnsInfo,(function(s){return e("td",{key:s.id},[t._t(s.name,(function(){return[t._v(" "+t._s(i[s.name])+" ")]}),{value:i[s.name],item:i})],2)})),0)])])]):t._e()]}))],2)]):t._e(),e("div",{staticClass:"row"},[e("FormFieldLabel",{attrs:{label:t.claimCount}}),e("BaseActionButton",{staticClass:"q-ml-sm small",attrs:{icon:t.claimExpand?"mdi-chevron-down":"mdi-chevron-up","is-flat":"","no-border":""},on:{click:function(e){t.claimExpand=!t.claimExpand}}})],1),t.claimExpand?e("table",[e("thead",[e("tr",[e("th",{staticClass:"sticky",staticStyle:{left:"0",width:"15px"}}),t._l(t.claimColumnsFilter,(function(i){return e("th",{key:i.id},[t._v(" "+t._s(i.label)+" ")])})),e("th",{staticClass:"sticky"})],2)]),e("tbody",[t._l(t.tableClaims,(function(i){return[e("tr",{key:i.id},[e("td",{staticClass:"sticky",staticStyle:{left:"0",width:"15px"}},[e("div",{staticClass:"row items-center justify-center"},[e("BaseButton",{attrs:{label:"Expand",icon:i.infoVisible?"eva-eye-off":"eva-eye",color:"secondary","is-flat":"","no-border":""},on:{click:function(t){i.infoVisible=!i.infoVisible}}})],1)]),t._l(t.claimColumnsFilter,(function(s){return e("td",{key:s.id},["history"===s.name?[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"Claim History",expression:"'Claim History'",modifiers:{bottom:!0}}],attrs:{icon:"mdi-history",color:"secondary","is-flat":"","no-border":""},on:{click:function(e){return t.claimHistory(i)}}})]:s.editable?["email"===s.valueType?[e("ValidationProvider",{attrs:{name:s.name,rules:{required:s.required,email:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:a}){return[e("TextField",{attrs:{"is-mandatory":"",error:a[0]},model:{value:i[s.name],callback:function(e){t.$set(i,s.name,e)},expression:"item[column.name]"}})]}}],null,!0)})]:[e("TextField",{attrs:{"is-mandatory":""},model:{value:i[s.name],callback:function(e){t.$set(i,s.name,e)},expression:"item[column.name]"}})]]:[t._t(s.name,(function(){return[t._v(" "+t._s(i[s.name])+" ")]}),{value:i[s.name],item:i})]],2)})),e("td",{staticClass:"sticky"},[e("div",{staticClass:"row justify-center q-mt-sm"},[t.claimStatus(i)?[e("div",{on:{click:function(e){return t.reopenClaim(i.id)}}},[e("q-chip",{staticClass:"chips pink-hover",attrs:{outline:"",color:"pink"}},[e("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"mdi-arrow-top-right",color:"pink","text-color":"white"}}),t._v(" Re-open ")],1)],1)]:t._e(),e("div",{on:{click:function(e){return t.viewClaim(i.id)}}},[e("q-chip",{staticClass:"chips orange-hover",attrs:{outline:"",color:"orange"}},[e("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-eye-outline",color:"orange","text-color":"white"}}),t._v(" View Claim ")],1)],1)],2)])],2),i.infoVisible?e("tr",{key:"sub-"+i.id},[e("td",{attrs:{colspan:t.claimColumnsFilter.length+2}},[e("table",{staticClass:"subDetails"},[e("thead",t._l(t.claimColumnsInfo,(function(i){return e("th",{key:i.id},[t._v(" "+t._s(i.label)+" ")])})),0),e("tbody",t._l(t.claimColumnsInfo,(function(s){return e("td",{key:s.id},[t._t(s.name,(function(){return[t._v(" "+t._s(i[s.name])+" ")]}),{value:i[s.name],item:i})],2)})),0)])])]):t._e()]}))],2)]):t._e()])],1)],1),e("AddContract",{attrs:{value:t.addContractSheet,"lender-list":t.lenderList},on:{initiate:t.processInitiate,close:function(e){t.addContractSheet=!1}}}),e("Modal",{attrs:{width:"40vw",height:"60vh","has-footer":""},on:{input:function(e){t.productModal=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Choose Product")]},proxy:!0},{key:"default",fn:function(){return[e("div",{attrs:{id:"productModal"}},[e("MultiSelectField",{staticClass:"field",attrs:{label:"product","is-mandatory":"",options:t.productList},model:{value:t.products,callback:function(e){t.products=e},expression:"products"}})],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Send Package",color:"primary"},on:{click:function(e){return t.processInitiate("")}}})]},proxy:!0}]),model:{value:t.productModal,callback:function(e){t.productModal=e},expression:"productModal"}}),e("Modal",{attrs:{width:"70vw"},on:{input:function(e){t.claimHistoryModal=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Claim History")]},proxy:!0},{key:"default",fn:function(){return[e("div",{attrs:{id:"claimHistory"}},[e("table",[e("thead",[e("tr",t._l(t.historyColumns,(function(i){return e("th",{key:i.id},[t._v(" "+t._s(i.label)+" ")])})),0)]),e("tbody",t._l(t.claimHistoryData,(function(i){return e("tr",{key:i.id},t._l(t.historyColumns,(function(s){return e("td",{key:s.id},[t._t(s.name,(function(){return[t._v(" "+t._s(i[s.name]||"-")+" ")]}),{value:i[s.name],item:i})],2)})),0)})),0)])])]},proxy:!0}],null,!0),model:{value:t.claimHistoryModal,callback:function(e){t.claimHistoryModal=e},expression:"claimHistoryModal"}}),e("Sheet",{attrs:{width:"100vw","no-padding":"","has-footer":""},on:{input:function(e){t.processSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.headerTitle)+" ")]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"footer row"},[e("BaseButton",{staticClass:"q-ml-md",attrs:{label:"Update Claim Details",color:"secondary"},on:{click:function(e){return t.updateClaimDetails()}}})],1)]},proxy:!0}]),model:{value:t.processSheet,callback:function(e){t.processSheet=e},expression:"processSheet"}},[e("div",{staticClass:"row",attrs:{id:"content-wrapper"}},[e("div",{staticClass:"col"},[e("CustomProcessForm",{attrs:{"form-id":t.formId,panels:t.panels,"secondary-panels":t.secondaryPanels,"selected-process":t.selectedProcess,"is-readonly":!1,"check-list":t.checkList,"form-model":t.formModel,"form-fields":t.formFields,inbox:!0},on:{"update:checkList":function(e){t.checkList=e},"update:check-list":function(e){t.checkList=e}}})],1),e("div",{staticClass:"col-auto q-mr-sm leftBorder"},[t._l(t.tabs,(function(i){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:i.label,expression:"tab.label",modifiers:{left:!0}}],key:i.id,staticClass:"tabButtons",attrs:{"is-flat":"","no-border":"",icon:i.icon,color:"primary"},on:{click:function(e){return t.showLinks(i.value)}}},[i.count?e("span",{staticClass:"badge"},[t._v(t._s(i.count)+" ")]):t._e()])]}))],2)])]),e("Sheet",{attrs:{width:"30vw","sub-actions":!1,"no-padding":""},on:{input:function(e){t.attachmentSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[t.selectedProcess.processId?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.getAttachments()}}}):t._e()]},proxy:!0}]),model:{value:t.attachmentSheet,callback:function(e){t.attachmentSheet=e},expression:"attachmentSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",[t._l(t.checkList,(function(i){return[i.name?[i.attach?e("div",{key:i.uid},[t._l(t.attachmentFilterCheckList(i.name),(function(i){return[e("div",{key:i.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[t.selectedProcess.processId?e("div",{staticClass:"col-auto"},[i.loading?[e("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:i.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(t){i.checked=!i.checked}}})]],2):e("div",[i.loading?[e("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:t._e()],2),i.formJsonId?e("div",{staticClass:"col-auto"},[e("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:t.getLabel(i.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):t._e(),e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(i.name)}})],1),e("div",{staticClass:"col ellipsis",on:{click:function(e){return t.openFile(i)}}},[t._v(" "+t._s(i.name)+" ")]),i.loading?t._e():e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.fileMenuAction(i,"Download")}}})],1),i.loading?t._e():e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.fileMenuAction(i,"Print")}}})],1)]),e("div",{staticClass:"meta row"},[e("div",{staticClass:"col row"},[e("div",[t._v(t._s(t.$day.format(i.createdAt)))]),i.createdBy?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.createdByEmail))])]:t._e(),i.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.fileSize(i.size)))])]:t._e()],2)])])]}))],2):e("div",{key:i.uid,staticClass:"checkList"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),e("div",{staticClass:"col q-ml-sm"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t._v(" "+t._s(i.name)+" ")]),i.required?e("div",{staticClass:"col-12 q-mt-sm"},[e("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[t._v(" Required ")])],1):t._e()])])])])]:t._e()]})),t._l(t.attachmentList,(function(i){return[t.isCheckList(i.name)?[e("div",{key:i.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[i.loading?[e("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:t._e(),t.selectedProcess.processId?e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:i.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(t){i.checked=!i.checked}}})],1):t._e(),i.formJsonId?e("div",{staticClass:"col-auto"},[e("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:t.getLabel(i.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):t._e(),e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(i.name)}})],1),e("div",{staticClass:"col ellipsis",on:{click:function(e){return t.openFile(i)}}},[t._v(" "+t._s(i.name)+" ")]),i.loading?t._e():e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.fileMenuAction(i,"Download")}}})],1),i.loading?t._e():e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.fileMenuAction(i,"Print")}}})],1)],2),e("div",{staticClass:"meta row"},[e("div",{staticClass:"col row"},[e("div",[t._v(t._s(t.$day.format(i.createdAt)))]),i.createdBy?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.createdByEmail))])]:t._e(),i.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.fileSize(i.size)))])]:t._e()],2)])])]:t._e()]}))],2)],1)]),e("Sheet",{attrs:{width:"30vw",height:"80vh","no-padding":""},on:{input:function(e){t.commentsSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments ")]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.getComments(0)}}})]},proxy:!0}]),model:{value:t.commentsSheet,callback:function(e){t.commentsSheet=e},expression:"commentsSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 160px)"}},[t._l(t.commentsList,(function(i,s){return[e("q-chat-message",{key:s,staticClass:"q-ma-sm",attrs:{name:i.createdBy===t.$store.state.session.id?"me":i.createdByEmail||i.externalCommentsby,text:[i.comments],"text-html":"",sent:i.createdBy===t.$store.state.session.id,stamp:t.lastCommentDuration(i),"bg-color":i.createdBy===t.$store.state.session.id?"primary-1":"secondary-1"},scopedSlots:t._u([{key:"avatar",fn:function(){return[i.embedFileList&&i.embedFileList.length?e("div",{staticClass:"file-icons"},[e("FileIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.embedFileList[0].fileName,expression:"row.embedFileList[0].fileName",modifiers:{top:!0}}],key:"Icon-"+s,staticClass:"file-icon q-mr-sm",attrs:{"mime-type":t.fileType(i.embedFileList[0].fileName)}})],1):t._e()]},proxy:!0}],null,!0)})]}))],2)],1),e("div",{staticClass:"col borderTop"},[e("div",{staticClass:"row q-ma-sm"},[e("div",{staticClass:"col"},[e("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}})],1),e("div",{staticClass:"col-auto",staticStyle:{margin:"auto","margin-right":"8px"}},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm comment-actions",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:t.saveComment}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm comment-actions",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(e){t.advancedCommentsSheet=!0}}})],1)])])]),e("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(e){t.mailTransactionSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Mail Transactions ")]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.getMailTransactions()}}})]},proxy:!0}]),model:{value:t.mailTransactionSheet,callback:function(e){t.mailTransactionSheet=e},expression:"mailTransactionSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("div",{staticClass:"q-pl-sm"},[e("Tabs",{attrs:{tabs:t.mailTabs},model:{value:t.mailTab,callback:function(e){t.mailTab=e},expression:"mailTab"}})],1),"OUTGOING"===t.mailTab?[e("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[t._l(t.outgoingMails,(function(i){return[e("div",{key:"outgoing"+i.id,staticClass:"mailTransactionList"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),e("div",{staticClass:"col-auto"},[t._v(" "+t._s(i.subject)+" ")])]),e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),e("div",{staticClass:"col-auto"},[t._v(t._s(i.email))])]),e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),e("div",{staticClass:"col-auto"},[t._v(" "+t._s(t.$day.format(i.createdAt,!0))+" ")])])]),e("div",{staticClass:"col-auto q-mr-sm"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(e){return e.stopPropagation(),t.showMailAttachments(i)}}},[i.attachmentCount?e("span",{staticClass:"badge"},[t._v(t._s(i.attachmentCount)+" ")]):t._e()])],1)])])]}))],2)]:t._e(),"INCOMING"===t.mailTab?[e("BaseScrollbar",{attrs:{height:"calc(100vh - 120px)"}},[t._l(t.incomingMails,(function(i){return[e("div",{key:"incoming"+i.id,staticClass:"mailTransactionList"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-email-outline",color:"primary"}})],1),e("div",{staticClass:"col-auto"},[t._v(" "+t._s(i.subject)+" ")])]),e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-person-outline",color:"secondary"}})],1),e("div",{staticClass:"col-auto"},[t._v(t._s(i.email))])]),e("div",{staticClass:"row q-mb-sm"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"eva-clock-outline",color:"orange"}})],1),e("div",{staticClass:"col-auto"},[t._v(" "+t._s(t.$day.format(i.createdAt,!0))+" ")])])]),e("div",{staticClass:"col-auto q-mr-sm"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"attachments",expression:"'attachments'",modifiers:{top:!0}}],staticClass:"q-mb-sm",attrs:{icon:"eva-attach-2-outline",color:"primary","is-flat":"",size:"16px"},on:{click:function(e){return e.stopPropagation(),t.showMailAttachments(i)}}},[i.attachmentCount?e("span",{staticClass:"badge"},[t._v(t._s(i.attachmentCount)+" ")]):t._e()])],1)])])]}))],2)]:t._e()],2)]),e("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(e){t.mailAttachmentSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Mail Attachments ")]},proxy:!0}]),model:{value:t.mailAttachmentSheet,callback:function(e){t.mailAttachmentSheet=e},expression:"mailAttachmentSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 200px)"}},[t._l(t.mailAttachmentList,(function(i){return[e("div",{key:i.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(i.name)}})],1),e("div",{staticClass:"col ellipsis",on:{click:function(e){return t.openAttachmentFile(i)}}},[t._v(" "+t._s(i.name)+" ")])]),e("div",{staticClass:"meta"},[e("div",[t._v(t._s(t.$day.format(i.createdAt)))]),i.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.fileSize(i.size)))])]:t._e()],2)])]}))],2)],1)]),e("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(e){t.fileSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"attachmentFileHeader"},[t.selectedFile.formJsonId?[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:t.getLabel(t.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:t._e(),e("div",{staticClass:"avatar q-ml-sm"},[e("FileIcon",{attrs:{"mime-type":t.fileType(t.selectedFile.name)}})],1),e("div",{staticClass:"q-ml-md"},[e("div",{staticClass:"filename"},[t._v(" "+t._s(t.selectedFile.name)+" ")]),e("div",{staticClass:"meta"},[e("div",[t._v("Archived At: "+t._s(t.$day.format(t.selectedFile.createdAt)))]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v("Archived By: "+t._s(t.selectedFile.createdByEmail))]),t.selectedFile.size?e("div",[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t._v(" File Size: "+t._s(t.fileSize(t.selectedFile.size))+" ")],1):t._e()],1)])],2)]},proxy:!0}]),model:{value:t.fileSheet,callback:function(e){t.fileSheet=e},expression:"fileSheet"}},[e("div",{staticClass:"attachmentFileFrame"},[e("div",{staticClass:"file-list"},[e("iframe",{ref:"myAttachmentFiles",attrs:{id:"file-frame",src:t.fileLink(),frameborder:"0"}})])])]),t.historyProcessId?e("ProcessHistory",{attrs:{"process-id":t.historyProcessId,"selected-process":t.selectedProcess},on:{close:function(e){t.historyProcessId=0}}}):t._e(),e("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(e){t.advancedCommentsSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[e("TextBuilderField",{model:{value:t.advancedCommentText,callback:function(e){t.advancedCommentText=e},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Post Comments",icon:"eva-paper-plane-outline",color:"primary"},on:{click:t.saveAdvancedComment}})]},proxy:!0}]),model:{value:t.advancedCommentsSheet,callback:function(e){t.advancedCommentsSheet=e},expression:"advancedCommentsSheet"}})],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col q-mr-xl text-center"},[e("div",{staticClass:"title-1"},[t._v("Request Submission")]),e("div",{staticClass:"description"},[t._v("To submit the Claim Request")])])}],o=(i("caad"),i("14d9"),i("1b0d")),r=i("7bb1"),n=i("be3f"),l=i("3445"),c=i("b3d1"),d=i("c3d2"),m=i("12b8"),h=i("53c1"),u=function(){var t=this,e=t._self._c;return e("Sheet",{attrs:{value:t.value,width:"30vw",height:"70vh","has-footer":""},on:{input:t.closeSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Add Contract")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"q-pa-md"},[e("ValidationObserver",{ref:"form"},[e("div",{staticClass:"field-wrapper"},[e("ValidationProvider",{attrs:{name:"First Name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextField",{staticClass:"q-mb-sm",attrs:{label:"First Name","is-mandatory":"",error:i[0]},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}})]}}])}),e("ValidationProvider",{attrs:{name:"Last Name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextField",{staticClass:"q-mb-sm",attrs:{label:"Last Name","is-mandatory":"",error:i[0]},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}})]}}])}),e("ValidationProvider",{attrs:{name:"DOB",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("DateField",{staticClass:"q-mb-sm",attrs:{label:"DOB","is-mandatory":"",error:i[0]},model:{value:t.dob,callback:function(e){t.dob=e},expression:"dob"}})]}}])}),e("NumberField",{staticClass:"q-mb-sm",attrs:{label:"Current Age","is-mandatory":"","is-readonly":""},model:{value:t.currentAge,callback:function(e){t.currentAge=e},expression:"currentAge"}}),e("ValidationProvider",{attrs:{name:"Email",rules:{required:!0,email:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextField",{staticClass:"q-mb-sm",attrs:{label:"Email","is-mandatory":"",error:i[0]},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})]}}])}),e("TextField",{staticClass:"q-mb-sm",attrs:{label:"Loan Number"},model:{value:t.loanNumber,callback:function(e){t.loanNumber=e},expression:"loanNumber"}}),e("ValidationProvider",{attrs:{name:"Product",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("MultiSelectField",{staticClass:"q-mb-sm",attrs:{label:"Product","is-mandatory":"",options:t.productList,error:i[0]},model:{value:t.products,callback:function(e){t.products=e},expression:"products"}})]}}])}),e("ValidationProvider",{attrs:{name:"Lender",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("SelectField",{staticClass:"q-mb-sm",attrs:{label:"Lender","is-mandatory":"",options:t.lenderList,error:i[0]},model:{value:t.lender,callback:function(e){t.lender=e},expression:"lender"}})]}}])})],1)])],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Save and Send Package",color:"primary"},on:{click:t.createContract}})]},proxy:!0}])})},p=[],f=i("381e"),v=i("ad54"),y={name:"AddContract",components:{ValidationObserver:r["a"],ValidationProvider:r["b"],Sheet:f["a"],TextField:c["a"],DateField:h["a"],NumberField:v["a"],MultiSelectField:d["a"],SelectField:m["a"]},props:{value:{type:Boolean,default:!1},lenderList:{type:Array,default:()=>[]}},data(){return{firstName:"",lastName:"",dob:"",currentAge:0,email:"",loanNumber:"",products:["Involuntary Unemployment"],productList:[{id:this.$nano.id(),label:"Critical Illness",value:"Critical Illness"},{id:this.$nano.id(),label:"Disability",value:"Disability"},{id:this.$nano.id(),label:"Involuntary Unemployment",value:"Involuntary Unemployment"},{id:this.$nano.id(),label:"Life",value:"Life"},{id:this.$nano.id(),label:"Lifetime Milestone",value:"Lifetime Milestone"},{id:this.$nano.id(),label:"Sickness or Injury",value:"Sickness or Injury"},{id:this.$nano.id(),label:"Unpaid Family Leave",value:"Unpaid Family Leave"}],lender:""}},watch:{dob:{deep:!0,immediate:!0,handler(){this.dob?this.currentAge=this.calculateAge(this.dob):this.currentAge=0}}},methods:{closeSheet(){this.$emit("close")},reset(){this.firstName="",this.lastName="",this.dob="",this.currentAge=0,this.email="",this.loanNumber="",this.products=["Involuntary Unemployment"],this.lender=""},calculateAge(t){if(!t)return;const e=new Date;if(new Date(t)>e)return"";const i=e-new Date(t),s=Math.floor(i/864e5);return Math.floor(s/365.25)},async createContract(){const t=await this.$refs.form.validate();if(!t)return;this.$store.commit("showLoadingBar");let e={firstName:this.firstName,lastName:this.lastName,dob:this.dob,loanNumber:this.loanNumber,product:this.products};const{error:i}=await o["d"].createContract(e);this.$store.commit("hideLoadingBar"),i?this.$alert.error(i):(e.lender=this.lender,e.currentAge=this.currentAge,e.email=this.email,this.$emit("initiate",e),this.reset(),this.closeSheet())}}},b=y,g=i("2877"),w=Object(g["a"])(b,u,p,!1,null,null,null),C=w.exports,k=i("6a70"),S=i("b94d"),I=i("fa1f"),_=i("a7d2"),T=i("dd90"),$=i("c52a"),x=i("8505"),A=i("6df3"),L=i("695e"),F={name:"CustomForm",components:{ValidationProvider:r["b"],ExpandableSearch:n["a"],FormFieldLabel:l["a"],TextField:c["a"],MultiSelectField:d["a"],SelectField:m["a"],DateField:h["a"],AddContract:C,Modal:k["a"],Sheet:f["a"],Tabs:S["a"],FileIcon:I["a"],CustomProcessForm:$["a"],ProcessHistory:x["a"],TextAreaField:A["a"],TextBuilderField:L["a"]},props:{workflowId:{type:Number,default:0},workflow:{type:Object,default:()=>{}},formId:{type:[String,Number],default:0},panels:{type:Array,default:()=>[]},secondaryPanels:{type:Array,default:()=>[]},saveAction:{type:String,default:""},workflowFormModel:{type:Object,default:()=>{}},actions:{type:Array,default:()=>[]},requestPrefix:{type:String,default:""},mlPrediction:{type:String,default:""},formFields:{type:Array,default:()=>[]},generatePDF:{type:Number,default:0}},data(){return{form:null,formWidth:"100%",lender:[],firstName:"",lastName:"",dob:"",province:"",claimNumber:"",contractNumber:"",refNumber:"",contractColumns:[{id:this.$nano.id(),name:"firstName",label:"First Name",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"lastName",label:"Last Name",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"loanNumber",label:"Loan Number",subLabel:"Loan No.",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"dob",label:"DOB",subLabel:"",type:"NORMAL",editable:!1,valueType:"date",main:!0,visible:!0},{id:this.$nano.id(),name:"currentAge",label:"Current Age",subLabel:"",type:"NORMAL",editable:!1,valueType:"number",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"policyNumber",label:"Policy Number",subLabel:"Group Policy",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!0,visible:!0},{id:this.$nano.id(),name:"email",label:"Email",subLabel:"Email ID",type:"NORMAL",editable:!0,valueType:"email",required:!0,main:!0,visible:!0},{id:this.$nano.id(),name:"address1",label:"Address1",subLabel:"Address",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"address2",label:"Address2",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"city",label:"City",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"province",label:"Province",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"postalCode",label:"Postal Code",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"phone",label:"Phone",subLabel:"Phone No.",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"startDate",label:"Start Date",subLabel:"Loan Start Date",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"endDate",label:"End Date",subLabel:"Loan End Date",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"cancelDate",label:"Cancel Date",subLabel:"Cancellation Date",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"contractNumber",label:"Contract Number",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"product",label:"Product",subLabel:"Benefit Claimed",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!0},{id:this.$nano.id(),name:"loanNumber",label:"Loan No.",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1},{id:this.$nano.id(),name:"paymentFrequency",label:"Payment Freq",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1},{id:this.$nano.id(),name:"term",label:"Term",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1},{id:this.$nano.id(),name:"remitDate",label:"Last Remitted Date",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1},{id:this.$nano.id(),name:"reason",label:"Reason",subLabel:"",type:"NORMAL",editable:!1,valueType:"text",required:!1,main:!1,visible:!1}],claimColumns:[{id:this.$nano.id(),name:"claimsStoreLoanNumber",label:"Claims Store Loan Number",store:"Loan Number",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimNumber",label:"Claim Number",store:"Claim Number",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimantFirstName",label:"Claimant First Name",store:"First Name",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimantLastName",label:"Claimant Last Name",store:"Last Name",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimantDOB",label:"Claimant DOB",store:"DOB",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"claimantEmail",label:"Claimant Email",store:"Email",type:"NORMAL",editable:!0,main:!0},{id:this.$nano.id(),name:"claimStatus",label:"Claim Status",store:"",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"history",label:"",store:"",type:"NORMAL",editable:!1,main:!0},{id:this.$nano.id(),name:"branchNumber",label:"Branch Number",store:"",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"claimDate",label:"Claim Date",store:"",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"receiveDate",label:"Receive Date",store:"",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"recommendation",label:"Recommendation",store:"",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"product",label:"Product",store:"Product",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"claimantCity",label:"Claimant City",store:"City",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"claimantProv",label:"Claimant Prov",store:"Province",type:"NORMAL",editable:!1,main:!1},{id:this.$nano.id(),name:"currentAge",label:"Current Age",store:"Current Age",type:"NORMAL",editable:!1,main:!1}],tableContracts:[],tableContractsData:[],tableClaims:[],tableClaimsData:[],contractExpand:!0,claimExpand:!0,selectedContract:{},selectedClaim:{},search:"",addContractSheet:!1,productModal:!1,products:[],productList:[{id:this.$nano.id(),label:"Critical Illness",value:"Critical Illness"},{id:this.$nano.id(),label:"Disability",value:"Disability"},{id:this.$nano.id(),label:"Involuntary Unemployment",value:"Involuntary Unemployment"},{id:this.$nano.id(),label:"Life",value:"Life"},{id:this.$nano.id(),label:"Lifetime Milestone",value:"Lifetime Milestone"},{id:this.$nano.id(),label:"Sickness or Injury",value:"Sickness or Injury"},{id:this.$nano.id(),label:"Unpaid Family Leave",value:"Unpaid Family Leave"}],fieldsModel:{},historyColumns:[{id:this.$nano.id(),name:"claimNumber",label:"Claim Number"},{id:this.$nano.id(),name:"status",label:"Status"},{id:this.$nano.id(),name:"date",label:"Date"},{id:this.$nano.id(),name:"note",label:"Note"}],claimHistoryData:[],claimHistoryModal:!1,lenderList:[],totalItems:0,itemsPerPage:500,currentPage:1,contractDataResult:!1,claimDataResult:!1,selectedProcess:{},processSheet:!1,headerTitle:"",tabs:[{id:this.$nano.id(),label:"attachments",value:"ATTACHMENTS",icon:"mdi-attachment",count:0},{id:this.$nano.id(),label:"comments",value:"COMMENTS",icon:"mdi-comment-text-outline",count:0},{id:this.$nano.id(),label:"mail transaction",value:"MAIL",icon:"mdi-email-outline",count:0},{id:this.$nano.id(),label:"history",value:"HISTORY",icon:"mdi-history",count:0}],mailTabs:[{id:this.$nano.id(),label:"outgoing",value:"OUTGOING",count:0},{id:this.$nano.id(),label:"incoming",value:"INCOMING",count:0}],mailTab:"OUTGOING",attachmentSheet:!1,commentsSheet:!1,mailTransactionSheet:!1,commentText:"",commentsList:[],attachmentList:[],mailTransactionList:[],mailAttachmentSheet:!1,mailAttachmentList:[],fileSheet:!1,selectedFile:{},formModel:{},historyProcessId:0,checkList:[],advancedCommentsSheet:!1,advancedCommentText:""}},computed:{isMaximized(){return"100%"===this.formWidth},_logo(){let t=location.origin;return"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?i("651a"):i("bcdf")(`./name-${this.darkTheme?"dark":"light"}.png`)},contractCount(){return`Contracts (${this.tableContracts.length})`},claimCount(){return`Claims (${this.tableClaims.length})`},contractColumnsFilter(){return this.contractColumns.filter(t=>t.main&&t.visible)},contractColumnsInfo(){return this.contractColumns.filter(t=>!t.main&&t.visible)},claimColumnsFilter(){return this.claimColumns.filter(t=>t.main)},claimColumnsInfo(){return this.claimColumns.filter(t=>!t.main)},outgoingMails(){return this.mailTransactionList.filter(t=>"Outgoing"===t.emailType)},incomingMails(){return this.mailTransactionList.filter(t=>"Incoming"===t.emailType)}},watch:{},created(){let t=location.origin;"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t||"https://trial.ezofis.com"===t&&12===this.$store.state.session.tenantId||"http://localhost:8080"===t?this.getLenderMaster(3):this.getLenderMaster(3056)},methods:{toggleWidth(){this.formWidth="100%"===this.formWidth?"720px":"100%"},calculateAge(t){if(!t)return;const e=new Date;if(new Date(t)>e)return"";const i=e-new Date(t),s=Math.floor(i/864e5);return Math.floor(s/365.25)},claimStatus(t){return t.claimStatus.indexOf("Declined")>-1||t.claimStatus.indexOf("Force Close")>-1},isArrayField(t){return["MULTIPLE_CHOICE","FILE_UPLOAD","MULTI_SELECT"].includes(t)},searchRow(t){t?(this.tableContracts=this.tableContractsData.filter(e=>{for(let i in e){let s=this.contractColumns.findIndex(t=>t.name===i);if(s>=0&&e[i]&&String(e[i]).toLowerCase().includes(t.toLowerCase()))return e}}),this.tableClaims=this.tableClaimsData.filter(e=>{for(let i in e){let s=this.claimColumns.findIndex(t=>t.name===i);if(s>=0&&e[i]&&String(e[i]).toLowerCase().includes(t.toLowerCase()))return e}})):(this.tableContracts=this.tableContractsData,this.tableClaims=this.tableClaimsData)},processInitiate(t){let e="",i="",s="";t?this.selectedContract=t:this.selectedContract.product=this.products;let a=[];this.selectedContract.product.length&&this.selectedContract.product.forEach(t=>{if(this.panels.length){if(this.selectedContract.policyNumber){let t=this.selectedContract.policyNumber.split("-");e=isNaN(t[1][2])?t[1].substring(0,3):t[1].substring(0,2)}else this.selectedContract.lender&&(e=this.selectedContract.lender);let a=this.lenderList.filter(t=>t.value===e);a.length&&(i=a[0].email,s=a[0].label),this.fieldsModel={},this.panels.forEach(e=>{if(e.fields.length)for(let a of e.fields)if("Lender Email"===a.label)this.fieldsModel[a.id]=i;else if("Lender Name"===a.label)this.fieldsModel[a.id]=s;else if("Initials1"===a.label){let t="";this.$store.state.session.firstName&&(t+=this.$store.state.session.firstName[0].toUpperCase()),this.$store.state.session.lastName?t+=this.$store.state.session.lastName[0].toUpperCase():t+=this.$store.state.session.firstName[1],this.fieldsModel[a.id]=t}else{let e=this.contractColumns.find(t=>t.label===a.label||t.subLabel===a.label);e&&("product"===e.name?this.fieldsModel[a.id]=t:this.fieldsModel[a.id]=this.selectedContract[e.name]||"")}})}a.push(this.fieldsModel)}),this.actions.length?this.initiateRequest(a,e,s,this.actions[0]):this.$alert.error("Process Configuration Error")},async initiateRequest(t,e,i,s){let a=[];if(t&&t.length)for(let r of t){let t={workflowId:this.workflow.id,review:"Save"===s?"":s,comments:this.commentsList,formData:{formId:this.formId,fields:r,formUpload:[]},fileIds:[],task:[],hasFormPDF:this.generatePDF,prefix:e,mlPrediction:i};this.$store.commit("showLoadingBarSave");const{error:n,payload:l}=await o["t"].processTransaction(t);if(this.$store.commit("hideLoadingBarSave"),this.saveAction="",this.fieldsModel={},n)return void this.$alert.error(n);a.push(l.requestNo)}a.length&&("Save"!==s?this.$alert.success(a.toString()+" Request Initiated"):this.$alert.success(a.toString()+" Request Initiated and Moved to your inbox")),this.$emit("refresh")},newClaim(t){let e="",i="",s="";this.selectedClaim=this.tableClaims.find(e=>e.id===t),this.panels.length&&this.panels.forEach(t=>{if(!t.fields.length)return;if(this.selectedClaim.claimNumber){let t=this.selectedClaim.claimNumber.split("-");e=isNaN(t[1][2])?t[1].substring(0,3):t[1].substring(0,2)}let a=this.lenderList.filter(t=>t.value===e);a.length&&(i=a[0].email,s=a[0].label);for(let o of t.fields)if("Lender Email"===o.label)this.fieldsModel[o.id]=i;else if("Product"===o.label)this.fieldsModel[o.id]=this.selectedClaim.product.split(",")||"";else if("Lender Name"===o.label)this.fieldsModel[o.id]=s;else if("Initials"===o.label)this.fieldsModel[o.id]=e;else{let t=this.claimColumns.find(t=>t.store===o.label);t&&(this.fieldsModel[o.id]=this.selectedClaim[t.name]||"")}}),this.$emit("update:workflowFormModel",this.fieldsModel),this.$emit("update:requestPrefix",e),this.$emit("update:mlPrediction",s),this.actions.length?this.$emit("update:saveAction",this.actions[0]):this.$alert.error("Process Configuration Error")},async viewClaim(t){this.formModel={},this.selectedProcess={},this.selectedClaim=this.tableClaims.find(e=>e.id===t),this.$store.commit("showLoadingBarSave"),this.workflowProcessList=[];const{error:e,payload:i}=await o["o"].getWorkflowData(this.workflowId,{filterBy:[{groupCondition:"",filters:[{criteria:"requestNo",condition:"IS_EQUALS_TO",value:this.selectedClaim.claimNumber}]}],itemsPerPage:10,currentPage:1,mode:""});if(this.$store.commit("hideLoadingBarSave"),e)this.$alert.error(e);else if(i.data.length){if(i.data[0].value.length){this.selectedProcess=i.data[0].value[0],this.headerTitle=`${this.selectedProcess.requestNo} - ${this.selectedProcess.stage}`;let t=Object.keys(this.selectedProcess.formData.fields),e={};t.forEach(t=>{e[t]=this.validateTypeValue(this.selectedProcess.formData.fields[t])}),this.formModel=e,this.tabs.find(t=>{"COMMENTS"===t.value?t.count=this.selectedProcess.commentsCount:"ATTACHMENTS"===t.value&&(t.count=this.selectedProcess.attachmentCount)});let s=JSON.parse(this.workflow.flowJson);s.blocks.forEach(t=>{t.id===this.selectedProcess.activityId&&t.settings.fileSettings&&t.settings.fileSettings.fileCheckList.length&&(this.checkList=t.settings.fileSettings.fileCheckList,this.checkList.forEach(t=>{t.uid=this.$nano.id(),t.attach=!1}))}),this.getComments(),this.getAttachments(),this.getMailTransactions(),this.processSheet=!0}}else this.$alert.info("No Details Found")},async reopenClaim(t){this.selectedClaim=this.tableClaims.find(e=>e.id===t),this.$store.commit("showLoadingBarSave");const{error:e}=await o["t"].reopenRequest(1,0,{requestNumber:this.selectedClaim.claimNumber});if(this.$store.commit("hideLoadingBarSave"),e)return console.log(e),void this.$alert.info(e);this.$alert.success(this.selectedClaim.claimNumber+" request re-initiated")},async getLenderMaster(t){this.$store.commit("showLoadingBar");const{error:e,payload:i}=await o["g"].getFormEntries(t,{mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[],itemsPerPage:0,currentPage:0});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);const{data:s}=i;this.lenderList=s[0].value.map(t=>({id:t.itemid,label:t["xPAsoGQlJ_xrm5f3EAeo6"],value:t["aeyluPk9Q8w6NaUs0HO8r"],email:t["XsPSz3d4dF2VSz1Svmymv"]}))},async getProduct(t){if(this.selectedContract=this.tableContracts.find(e=>e.id===t),Object.keys(this.selectedContract).length){let t="";if(this.selectedContract.policyNumber){let e=this.selectedContract.policyNumber.split("-");t=isNaN(e[1][2])?e[1].substring(0,3):e[1].substring(0,2)}else this.selectedContract.lender&&(t=this.selectedContract.lender);if(!t)return void this.$alert.warning("Policy Number Not Found");if(!this.selectedContract.email)return void this.$alert.warning("Required Claimant Email");this.products=[],this.selectedContract.product&&!this.products.includes(this.selectedContract.product)&&this.products.push(this.selectedContract.product),this.productModal=!0}},async claimHistory(t){this.claimHistoryData=[];let e="",i="";if(t.claimNumber){let i=t.claimNumber.split("-");e=isNaN(i[1][2])?i[1].substring(0,3):i[1].substring(0,2)}let s=this.lenderList.filter(t=>t.value===e);s.length&&(i=s[0].label),this.$store.commit("showLoadingBarSave");let a={claimNumber:t.claimNumber,lenderName:i};const{payload:r,error:n}=await o["d"].getClaimHistory(a);this.$store.commit("hideLoadingBarSave"),n?this.$alert.error(n):r.length?(this.claimHistoryData=r.map(t=>({id:t.ClaimStatusID,claimNumber:t.CSClaimNumber,status:t.ClaimStatus,date:this.$day.format(t.CSDate,!1),note:t.CSNote})),this.claimHistoryModal=!0):this.$alert.info("Claim history records not found")},getData(){this.tableContracts=[],this.tableContractsData=[],this.tableClaims=[],this.tableClaimsData=[],this.contractDataResult=!1,this.claimDataResult=!1,this.getContractData(),this.getClaimData()},async getContractData(){if(this.firstName||this.lastName||this.dob||this.province||this.contractNumber||this.refNumber){let t={};this.firstName&&(t["FirstName"]=this.firstName),this.lastName&&(t["LastName"]=this.lastName),this.dob&&(t["DOB"]=this.dob),this.province&&(t["Province"]=this.province),this.contractNumber&&(t["StoreLoanNumber"]=this.contractNumber),this.refNumber;let e="";if(this.lender.length){let t=this.lenderList.filter(t=>t.value===this.lender[0]);t.length&&(e=t[0].label)}this.$store.commit("showLoadingBarSave");let i={hublinkId:1,lenderName:e,payloadMapping:JSON.stringify(t),itemsPerPage:500,currentPage:1};const{payload:s,error:a}=await o["d"].getDataSync(i);if(this.$store.commit("hideLoadingBarSave"),this.contractDataResult=!0,a)return void("Connection Interrupted"===a?this.$alert.warning(a):this.$alert.error(a));const{data:r,meta:n}=s;n.totalItems?r.length&&r[0].value.length&&(this.tableContracts=r[0].value.map(t=>({id:this.$nano.id(),firstName:t.FirstName,lastName:t.LastName,loanNumber:t.LoanNumber,dob:t.DOB?t.DOB.split(" ")[0]:"",policyNumber:t.PolicyNumber,lender:"",email:t.Email||"",currentAge:t.DOB?this.calculateAge(t.DOB.split(" ")[0]):"",address1:t.Address1,address2:t.Address2,city:t.City,province:t.Province,postalCode:t.PostalCode,phone:t.Phone,startDate:t.StartDate?t.StartDate.split(" ")[0]:"",endDate:t.EndDate?t.EndDate.split(" ")[0]:"",cancelDate:t.CancelDate?t.CancelDate.split(" ")[0]:"",contractNumber:t.StoreLoanNumber,product:t.Product,paymentFrequency:t.PmtFrq,term:t.Term,remitDate:t.RemitDate?t.RemitDate.split(" ")[0]:"",reason:t.Comments,infoVisible:!1})),this.tableContractsData=this.tableContracts):this.claimDataResult&&0===this.tableClaimData.length&&this.$alert.info("No result found")}},async getClaimData(){if(this.firstName||this.lastName||this.dob||this.province||this.claimNumber||this.contractNumber){this.$store.commit("showLoadingBarSave");let t={};this.firstName&&(t["ClaimantFirstName"]=this.firstName),this.lastName&&(t["ClaimantLastName"]=this.lastName),this.dob&&(t["ClaimantDOB"]=this.dob),this.province&&(t["ClaimantProv"]=this.province),this.claimNumber&&(t["ClaimNumber"]=this.claimNumber),this.contractNumber&&(t["ClaimsStoreLoanNumber"]=this.contractNumber);let e="";if(this.lender.length){let t=this.lenderList.filter(t=>t.value===this.lender[0]);t.length&&(e=t[0].label)}let i={hublinkId:2,lenderName:e,payloadMapping:JSON.stringify(t),itemsPerPage:500,currentPage:1};const{payload:s,error:a}=await o["d"].getDataSync(i);if(this.$store.commit("hideLoadingBarSave"),this.claimDataResult=!0,a)return void this.$alert.error(a);const{data:r,meta:n}=s;n.totalItems?r.length&&r[0].value.length&&(this.tableClaims=r[0].value.map(t=>({id:this.$nano.id(),claimsStoreLoanNumber:t.ClaimsStoreLoanNumber,claimNumber:t.ClaimNumber,claimantFirstName:t.ClaimantFirstName,claimantLastName:t.ClaimantLastName,claimantDOB:t.ClaimantDOB?t.ClaimantDOB.split(" ")[0]:"",claimantEmail:t.ClaimantEmail,claimStatus:t.ClaimStatus||t.ClaimDecision||"",branchNumber:t.BranchNumber,claimDate:t.ClaimDate?t.ClaimDate.split(" ")[0]:"",receiveDate:t.ReceiveDate?t.ReceiveDate.split(" ")[0]:"",recommendation:t.Recommendation,product:t.Product,claimantCity:t.ClaimantCIty,claimantProv:t.ClaimantProv,currentAge:t.ClaimantDOB?this.calculateAge(t.ClaimantDOB.split(" ")[0]):"",infoVisible:!1})),this.tableClaimsData=this.tableClaims):this.contractDataResult&&0===this.tableContractsData.length&&this.$alert.info("No result found")}},fileType(t){if(t)return t.split(".").reverse()[0].slice(0,4)},fileSize(t){return Object(_["a"])(t)},openFile(t){t.loading?this.$alert.info("Please wait to complete the uploading"):(this.selectedFile=t,window.open(this.fileLink()))},fileLink(){let t=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let e=this.selectedFile.name.split(".").pop();if(Object(T["d"])(e)){let e="";return"https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?`https://ag-appsvc04.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`:"https://trial.ezofis.com"===t?`https://trial.ezofis.com/docsviewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${e}`:"https://app.ezofis.com"===t?`https://ezdocsviewer.azurewebsites.net/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${e}`:`${t}/PDFViewer/web/viewer.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${e}`}return Object(T["b"])(e)||"http://52.172.32.88"!==t?`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`:`http://52.172.32.88/DocsViewer/index.html?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}`}},async showLinks(t){"ATTACHMENTS"===t?this.attachmentSheet=!0:"COMMENTS"===t?this.commentsSheet=!0:"HISTORY"===t&&this.selectedProcess.processId?this.historyProcessId=this.selectedProcess.processId:"PRINT"===t?this.selectedProcess.formData?window.open(`https://appuat.ezofis.com/ezofisapi/api/form/generatePdfPrint/${this.$store.state.session.tenantId}/${this.workflowId}/${this.selectedProcess.processId}/${this.formId}/${this.selectedProcess.formData.formEntryId}/1`):this.selectedProcess.itemData&&window.open(`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedProcess.itemData.repositoryId}/${this.selectedProcess.itemData.itemId}/2`):"TASK"===t?this.taskEntries.length?this.taskSheet=!0:this.$emit("addTask"):"VALIDATION"===t?this.$emit("validation",this.selectedProcess.processId):"PAYMENT_TABLE"===t?this.$emit("paymentTable"):"MAIL"===t?(this.getMailTransactions(),this.mailTransactionSheet=!0):"SUB_PROCESS"===t&&(this.subProcessSheet=!0)},lastActionDuration(t){const e=t.transaction_createdAt instanceof Date?t.transaction_createdAt:new Date(t.transaction_createdAt),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(e.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const t=a/s[o];return i.format(Math.round(t),o)}},lastCommentDuration(t){const e=t.createdAt instanceof Date?t.createdAt:new Date(t.createdAt),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(e.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const t=a/s[o];return i.format(Math.round(t),o)}},validateTypeValue(t){if(t)try{var e=JSON.parse(t);if("object"===typeof e)return e}catch(i){return t}return t},attachmentFilterCheckList(t){return this.attachmentList.filter(e=>e.name.substring(0,e.name.lastIndexOf("."))===t||e.name.substring(0,e.name.lastIndexOf(".")).split("_")[0]===t)},isCheckList(t){let e=this.checkList.filter(e=>e.name===t.substring(0,t.lastIndexOf("."))||e.name===t.substring(0,t.lastIndexOf(".")).split("_")[0]);return!e.length},showMailAttachments(t){this.mailAttachmentList=[];let e=t.attachmentJson.split(",");e.forEach(e=>{let i=e.split("\\").pop();this.mailAttachmentList.push({id:this.$nano.id(),mailId:t.id,name:i,createdAt:t.createdAt})}),this.mailAttachmentSheet=!0},openAttachmentFile(t){let e=`https://appuat.ezofis.com/ezofisapi/api/client/viewAttachment/${this.$store.state.session.tenantId}/${t.mailId}/${t.name}`;window.open(e,"_blank")},fileMenuAction(t,e){this.selectedFile=t,this.documentAction(e,!0)},documentAction(t,e){if("Email_Sharing"===t);else if("Print"===t){if(this.selectedFile.name)if(e){let t="";if(this.selectedFile.initiate){let e=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(e=2),t=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${e}/1`}else t=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(t,"_blank")}else{let t=this.selectedFile.name.split(".").pop();Object(T["d"])(t)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myAttachmentFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===t){let t="";t=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`,window.open(t,"_blank")}},async filePrintSession(){const{error:t}=await o["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});t&&this.$alert.error(t)},async getMailTransactions(){this.mailTransactionList=[],this.tabs.find(t=>{"MAIL"===t.value&&(t.count=0)});let t={filterBy:[]};const{error:e,payload:i}=await o["t"].getMailTransactions(this.workflowId,this.selectedProcess.processId,t);e?this.$alert.error(e):i.length&&(this.mailTransactionList=i,this.tabs.find(t=>{"MAIL"===t.value&&(t.count=this.mailTransactionList.length)}))},async getComments(t=0,e=0){this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=0)}),this.commentsList=[],t||e||(t=this.workflowId,e=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:i,payload:s}=await o["t"].getProcessComments(t,e);this.$store.commit("hideLoadingBar"),i?this.$alert.error(i):s.length&&(this.commentsList=s,this.tabs.find(t=>{"COMMENTS"===t.value&&(t.count=this.commentsList.length)}))},async getAttachments(t=0,e=0){this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=0)});let i=this.attachmentList.length;t||e||(t=this.workflowId,e=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:s,payload:a}=await o["t"].getAttachments(t,e);if(this.$store.commit("hideLoadingBar"),s)this.$alert.error(s);else if(a.length?(i!==a.length&&(this.attachmentList=a.map(t=>({...t,checked:!1}))),this.tabs.find(t=>{"ATTACHMENTS"===t.value&&(t.count=this.attachmentList.length)})):this.attachmentList=[],this.checkList.length){this.checkList.forEach(t=>{let e=this.attachmentList.filter(e=>{let i=e.name.substr(0,e.name.lastIndexOf("."));if(t.name===i||t.name===i.split("_")[0])return e});e.length?t.attach=!0:t.attach=!1});let t=location.origin;("https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t||"http://localhost:8080"===t||"https://trial.ezofis.com"===t&&12===this.$store.state.session.tenantId)&&(this.formCheckList=!0)}},async saveComment(){if(this.commentText&&this.selectedProcess.processId){const{error:t}=await o["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:2});if(t)return void this.$alert.error(t);this.commentText="",this.getComments()}},async saveAdvancedComment(){if(this.advancedCommentText){if(this.selectedProcess.processId){const{error:t}=await o["t"].insertProcessComment(this.workflow.id,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:2});if(t)return void this.$alert.error(t)}this.advancedCommentText="",this.advancedCommentsSheet=!1,this.getComments()}},async updateClaimDetails(){let t={};t={workflowId:this.workflow.id,transactionId:this.selectedProcess.transactionId,review:"",formData:{formId:this.formId,formEntryId:this.selectedProcess.formData.formEntryId,fields:this.formModel}};const{error:e}=await o["t"].processTransaction(t);e?this.$alert.error(e):(this.$alert.success("Claim details are updated"),this.processSheet=!1)}}},P=F,B=(i("ccc5"),i("2c91")),D=i("b047"),M=i("cb32"),N=i("8169"),O=i("93dc"),q=i.n(O),E=Object(g["a"])(P,s,a,!1,null,"1b34e972",null);e["default"]=E.exports;q()(E,"components",{QSpace:B["a"],QChip:D["a"],QAvatar:M["a"],QChatMessage:N["a"]})},a5be:function(t,e,i){"use strict";i("2dcd")},a7f2:function(t,e,i){},a809:function(t,e,i){"use strict";function s(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}e["a"]=s},a945:function(t,e,i){},abe1:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Sheet",{attrs:{value:t.value,width:"40vw"},on:{input:function(e){return t.$emit("input",!1)}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Metadata ")]},proxy:!0}])},[e("div",{attrs:{id:"file-details"}},[e("div",{attrs:{id:"item-overview"}},[e("table",[e("tbody",t._l(t.fileData,(function(i){return e("tr",{key:i.name,staticClass:"tableRow"},[e("td",{staticClass:"label"},[t._v(t._s(i.name))]),"TABLE"!==i.type?e("td",{staticClass:"value"},[t._t(i.name,(function(){return[t._v(" "+t._s(i.value||"-")+" ")]}),{value:i.value})],2):e("td",{staticClass:"value",staticStyle:{padding:"8px"}},[t._t(i.name,(function(){return[i.value?[e("BaseActionButton",{attrs:{icon:"mdi-table","is-flat":"","no-border":""},on:{click:function(e){return t.showTable(i.name)}}})]:[e("BaseActionButton",{attrs:{icon:"mdi-table","is-flat":"","no-border":"","is-disabled":""}})]]}))],2)])})),0)])]),e("Modal",{attrs:{width:"60vw",height:"80vh"},on:{input:function(e){t.expandTableModal=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.tableHeader))]},proxy:!0},{key:"default",fn:function(){return[e("div",{attrs:{id:"tableData"}},[t.tableData.cellvalues?[e("table",t._l(t.tableData.cellvalues,(function(i,s){return e("tr",{key:s},t._l(i,(function(i){return e("NoHeader"===i.kind?"td":"th",{key:`r${s}_c${i.columnindex}`,tag:"th"},[t._v(" "+t._s(i.cellvalue)+" ")])})),1)})),0)]:[e("table",[e("thead",[e("tr",t._l(t.tableData[0],(function(i,s){return e("th",{key:s},[t._v(" "+t._s(s)+" ")])})),0)]),e("tbody",t._l(t.tableData,(function(i,s){return e("tr",{key:s},t._l(i,(function(i,s){return e("td",{key:s},[t._v(" "+t._s(i)+" ")])})),0)})),0)])]],2)]},proxy:!0}]),model:{value:t.expandTableModal,callback:function(e){t.expandTableModal=e},expression:"expandTableModal"}})],1)])},a=[],o=i("381e"),r=i("6a70"),n={name:"FileDetails",components:{Sheet:o["a"],Modal:r["a"]},props:{value:{type:Boolean,required:!0},fileData:{type:Array,required:!0}},data(){return{expandTableModal:!1,tableHeader:"",tableData:[]}},methods:{showTable(t){this.expandTableModal=!0;let e=this.fileData.filter(e=>e.name===t);console.log(e),this.tableHeader=e[0].name,this.tableData=JSON.parse(e[0].value),console.log(this.tableData)}}},l=n,c=(i("4045"),i("2877")),d=Object(c["a"])(l,s,a,!1,null,"65baddda",null);e["a"]=d.exports},ad4f:function(t,e,i){},ae23:function(t,e,i){"use strict";i("4ddc")},afe7:function(t,e,i){},affa:function(t,e,i){},b0ba:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("Sheet",{attrs:{width:"50vw","no-padding":""},on:{input:t.closeFormHistorySheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Form Entry History ")]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.getFormHistory()}}})]},proxy:!0}]),model:{value:t.formHistorySheet,callback:function(e){t.formHistorySheet=e},expression:"formHistorySheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:"\n          calc(100vh - 200px)\n        "}},[e("div",{attrs:{id:"history"}},[t.history.length?t._l(t.history,(function(i){return e("div",{key:i.id,staticClass:"entry"},[e("div",{staticClass:"header"},[t._v(" "+t._s(i.changes.length)+" "+t._s(i.changes.length>1?"Changes":"Change")+" ")]),e("div",{staticClass:"content"},[e("div",{staticClass:"changes-meta"},[e("div",[t._v(t._s(i.changedBy))]),e("BaseIcon",{staticClass:"q-mx-xs",attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.changedAt))])],1),t._l(i.changes,(function(i,s){return e("div",{key:s+1,staticClass:"change"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:"mdi-circle-small"}}),"isDeleted"===i.name?e("div",[Number(i.newValue)?e("span",{staticClass:"font-semibold"},[t._v(' "Deleted" ')]):e("span",{staticClass:"font-semibold"},[t._v('"Restored"')]),t._v(" the item ")]):i.oldValue?e("div",[t._v(" Modified "+t._s(i.name)+" from "),e("span",{staticClass:"font-semibold"},[t._v('"'+t._s(i.oldValue)+'"')]),t._v(" to "),e("span",{staticClass:"font-semibold"},[t._v('"'+t._s(i.newValue)+'"')])]):e("div",[t._v(" Assigned "),e("span",{staticClass:"font-semibold"},[t._v('"'+t._s(i.newValue)+'"')]),t._v(" as "+t._s(i.name)+" ")])],1)}))],2)])})):e("div",{staticClass:"no-history"},[t._v("No data found")])],2)])],1)])],1)},a=[],o=i("381e"),r=i("1b0d"),n={name:"FormEntryHistory",components:{Sheet:o["a"]},props:{value:{type:Boolean,default:!1},processId:{type:Number,required:!0},workflowId:{type:Number,required:!0}},data(){return{changes:[],history:[],formHistorySheet:!1}},watch:{value:{immediate:!0,handler(){this.value&&this.getFormHistory()}}},methods:{async getFormHistory(){this.formHistorySheet=!0,this.history=[],this.$store.commit("showLoadingBar");const{error:t,payload:e}=await r["g"].formHistory(this.workflowId,this.processId);if(this.$store.commit("hideLoadingBar"),t)this.$alert.error(t);else if(e){let t=e;this.history=t.length&&t.map(t=>({id:this.$nano.id(),changedBy:t.modifiedBy,changedAt:this.$day.format(t.modifiedAt),changes:t.fields}))}},closeFormHistorySheet(){this.formHistorySheet=!1,this.$emit("update:value",!1)}}},l=n,c=(i("742a"),i("2877")),d=Object(c["a"])(l,s,a,!1,null,"231e188e",null);e["a"]=d.exports},b201:function(t,e,i){},b2a7:function(t,e,i){"use strict";i("79b4")},b2f9:function(t,e,i){"use strict";i("b3f6")},b3f6:function(t,e,i){},b4cd:function(t,e,i){},b591:function(t,e,i){"use strict";i("a7f2")},b811:function(t,e,i){},b822:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"view-wrapper"}},[t.showMinimumFileSheet?e("div",{staticClass:"row justify-end"},[e("div",{staticClass:"col-md-6 col-lg-6"},[e("div",{staticClass:"shadow-3",attrs:{id:"file-sheet"}},[e("div",{staticClass:"header"},[e("div",{staticClass:"title-1"},[e("div",{attrs:{id:"file"}},[e("div",{staticClass:"avatar"},[e("FileIcon",{attrs:{"mime-type":t.minimumFileSheet.type}})],1),e("div",{staticClass:"q-ml-md"},[e("div",{staticClass:"filename"},[t._v(" "+t._s(t.minimumFileSheet.name)+" ")])])])]),e("q-space"),e("BaseActionButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-expand-outline"},on:{click:t.handleOpenFullFileSheet}}),e("BaseCloseButton",{on:{click:t.hideFileSheet}})],1),e("BaseScrollbar",{attrs:{id:"file-content",height:"calc(100vh - 125px)"}},[e("div",{staticClass:"file-list"},[e("iframe",{attrs:{id:"file-frame",src:t.fileLink,frameborder:"0"}})])])],1)])]):t._e(),e("Header",{attrs:{title:t.title,breadcrumbs:t.breadcrumbs},scopedSlots:t._u([{key:"actions",fn:function(){return[t._t("header-actions")]},proxy:!0}],null,!0)}),t.hideActionBar?t._e():e("ActionBar",{attrs:{tab:t.tab,tabs:t.tabs,"hide-actionbar":!t.showMinimumFileSheet},scopedSlots:t._u([{key:"header-title",fn:function(){return[t._t("header-title")]},proxy:!0}],null,!0)}),t.loadingBarPage?e("LoadingBar"):t._e(),t._t("default")],2)},a=[],o=i("2f62"),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"view-header"}},[e("div",[e("div",{staticClass:"title-1 q-mb-xs"},[t._v(" "+t._s(t.title)+" ")]),e("Breadcrumbs",{attrs:{breadcrumbs:t.breadcrumbs}})],1),e("q-space"),e("BaseActionButton",{attrs:{icon:"eva-question-mark",color:"secondary"},on:{click:function(e){return t.$parent.$emit("quickHelp")}}}),t._t("actions")],2)},n=[],l=i("36ce"),c={name:"Header",components:{Breadcrumbs:l["a"]},props:{title:{type:String,required:!0},breadcrumbs:{type:Array,required:!0}}},d=c,m=(i("5439"),i("2877")),h=i("2c91"),u=i("93dc"),p=i.n(u),f=Object(m["a"])(d,r,n,!1,null,"9fc08392",null),v=f.exports;p()(f,"components",{QSpace:h["a"]});var y=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"view-action-bar"}},[t._t("header-title"),e("Tabs",{attrs:{tab:t.tab,tabs:t.tabs}}),e("q-space"),t.hideActionbar?e("PortalTarget",{attrs:{name:"action-bar",slim:""}}):t._e()],2)},b=[],g=i("2b88"),w=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"tabs"}},[t._l(t.tabs,(function(i){return e("Tab",{key:i.id,ref:"tab",refInFor:!0,attrs:{label:i.label,"is-active":t.isActive(i.route)},on:{click:function(e){return t.handleClick(i)}}})})),e("div",{ref:"indicator",staticClass:"indicator"})],2)},C=[],k=(i("14d9"),i("8b55")),S={name:"RouteTabs",components:{Tab:k["a"]},props:{tab:{type:String,default:""},tabs:{type:Array,required:!0}},watch:{$route(){this.setTab()},tabs(){setTimeout(()=>this.setTab(),300)}},mounted(){!this.tab||this.isActive(this.tab)?setTimeout(()=>this.setTab(),300):this.$router.push({name:this.tab})},methods:{setIndicatorPosition(t){const e=this.tabs.findIndex(e=>e.id===t),i=this.$refs.tab[e],s=i.$el.offsetLeft;this.$refs.indicator.style.left=s+"px";const a=i.$el.clientWidth;this.$refs.indicator.style.width=a+"px"},isActive(t){return this.$route.name===t},setTab(){const t=this.$route.name,e=this.tabs.find(e=>e.route===t);e&&this.setIndicatorPosition(e.id)},handleClick(t){this.isActive(t.route)||this.$router.push({name:t.route})}}},I=S,_=(i("f042"),Object(m["a"])(I,w,C,!1,null,"255c1fc8",null)),T=_.exports,$={name:"ActionBar",components:{Tabs:T,PortalTarget:g["PortalTarget"]},props:{tab:{type:String,required:!0},tabs:{type:Array,required:!0},hideActionbar:{type:Boolean,default:!0}}},x=$,A=(i("5b8f"),Object(m["a"])(x,y,b,!1,null,"05ac58aa",null)),L=A.exports;p()(A,"components",{QSpace:h["a"]});var F=i("fa1f"),P=i("dd90"),B=i("048d"),D={name:"ViewWrapper",components:{Header:v,ActionBar:L,FileIcon:F["a"],LoadingBar:B["a"]},props:{title:{type:String,required:!0},breadcrumbs:{type:Array,required:!0},hideActionBar:{type:Boolean,default:!1},tab:{type:String,default:""},tabs:{type:Array,default:()=>[]},minimumFileSheet:{type:Object,default:()=>{}}},data(){return{showMinimumFileSheet:!1}},computed:{...Object(o["c"])(["loadingBarPage"]),fileLink(){let t=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.minimumFileSheet.name){let e=this.minimumFileSheet.name.split(".").pop(),i="";if(Object(P["d"])(e))i="https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"!==t||Object(P["c"])(e)?"https://app.ezofis.com"===t?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":t+"/PDFViewer/web/viewer.html":"https://trial.ezofis.com/docsviewer/index.html";else{if(Object(P["b"])(e)||"http://52.172.32.88"!==t)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.$route.query.repositoryId}/${this.minimumFileSheet.id}/2`;i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.$route.query.repositoryId}&itemId=${this.minimumFileSheet.id}&type=2&filename=${this.minimumFileSheet.name}`}return""}},watch:{minimumFileSheet:{deep:!0,handler(){this.minimumFileSheet&&(this.showMinimumFileSheet=!0,this.$emit("hideFileSheet",!0))}},$route:{deep:!0,handler(){this.$route.query.repositoryId||this.hideFileSheet()}}},methods:{handleOpenFullFileSheet(){this.hideFileSheet(),this.$emit("handleOpenFullFileSheet",this.minimumFileSheet)},hideFileSheet(){this.$emit("hideFileSheet",!1),this.showMinimumFileSheet=!1}}},M=D,N=(i("bded"),Object(m["a"])(M,s,a,!1,null,"4e92c3e4",null));e["a"]=N.exports;p()(N,"components",{QSpace:h["a"]})},b94d:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{style:{color:t._color},attrs:{id:"tabs"}},[t._l(t.tabs,(function(i){return e("Tab",{key:i.id,ref:"tab",refInFor:!0,attrs:{label:i.label,color:t.color,"is-full-width":t.isFullWidth,"is-active":i.value===t.value},on:{click:function(e){return t.handleClick(i)}}})})),e("div",{ref:"indicator",staticClass:"indicator"})],2)},a=[],o=i("8b55"),r={name:"Tabs",components:{Tab:o["a"]},props:{tabs:{type:Array,required:!0},value:{type:[String,Number],required:!0},color:{type:String,default:"primary"},isFullWidth:{type:Boolean,default:!1}},computed:{_color(){return`var(--${this.color})`}},watch:{value(){this.setIndicatorPosition()}},mounted(){this.setIndicatorPosition()},methods:{setIndicatorPosition(){const t=this.tabs.findIndex(t=>t.value===this.value),e=this.$refs.tab[t],i=e.$el.offsetLeft;this.$refs.indicator.style.left=i+"px";const s=e.$el.clientWidth;this.$refs.indicator.style.width=s+"px"},handleClick(t){t.value!==this.value&&this.$emit("input",t.value)}}},n=r,l=(i("40f9"),i("2877")),c=Object(l["a"])(n,s,a,!1,null,"48eb7e5e",null);e["a"]=c.exports},b97e:function(t,e,i){"use strict";i("21fc")},ba5a:function(t,e,i){"use strict";i("5042")},bb36:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("Sheet",{attrs:{width:"30vw",height:"80vh","custom-height":"inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode||t.initiateProcess||t.isPortal?"30":"0","no-padding":""},on:{input:t.closeCommentsSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments ")]},proxy:!0},{key:"actions",fn:function(){return[t.selectedProcess.processId?e("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[t._v(" auto-refresh every 30 seconds ")]):t._e(),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.getComments(0)}}})]},proxy:!0}]),model:{value:t.commentsSheet,callback:function(e){t.commentsSheet=e},expression:"commentsSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:t.commentsSheetHeight}},[t._l(t.commentsList,(function(i,s){return[e("q-chat-message",{key:s,staticClass:"q-ma-sm",attrs:{name:i.createdBy===t.$store.state.session.id?"me":i.createdByEmail||i.externalCommentsby,text:[i.comments],"text-html":"",sent:i.createdBy===t.$store.state.session.id,stamp:t.lastCommentDuration(i),"bg-color":i.createdBy===t.$store.state.session.id?"primary-1":"secondary-1"},scopedSlots:t._u([{key:"avatar",fn:function(){return[i.embedFileList&&i.embedFileList.length?e("div",{staticClass:"file-icons"},[e("FileIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.embedFileList[0].fileName,expression:"row.embedFileList[0].fileName",modifiers:{top:!0}}],key:"Icon-"+s,staticClass:"file-icon q-mr-sm",attrs:{"mime-type":t.fileType(i.embedFileList[0].fileName)}})],1):t._e()]},proxy:!0}],null,!0)})]}))],2)],1),"inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode||t.initiateProcess||t.isPortal?e("div",{staticClass:"col borderTop"},[e("div",{staticClass:"row"},[t.checkTenant()?[e("div",{staticClass:"col actions"},[t.attachmentList.length&&t.fileNames.length?e("div",{staticClass:"row select-action q-pa-sm action-container"},[e("CheckboxField",{staticClass:"q-pr-sm",class:t.attachComment?"col-auto":"col",attrs:{label:"Add Comment to PDF"},model:{value:t.attachComment,callback:function(e){t.attachComment=e},expression:"attachComment"}}),!t.selectedProcess.processId||"START"===t.selectedProcess.stageType||t.attachComment||t.isPortal?t._e():e("CheckboxField",{staticClass:"col-auto notify-cmd",attrs:{label:"Notify Initiator/Requester"},model:{value:t.notifyInitiator,callback:function(e){t.notifyInitiator=e},expression:"notifyInitiator"}}),t.attachComment?e("SelectField",{staticClass:"col field comment-attach attach-cmd",attrs:{"is-searchable":!0,options:t.fileNames},model:{value:t.selectedFileForAttach,callback:function(e){t.selectedFileForAttach=e},expression:"selectedFileForAttach"}}):t._e()],1):t._e(),!t.selectedProcess.processId||"START"===t.selectedProcess.stageType||!t.attachComment&&t.attachmentList.length&&t.fileNames.length||t.isPortal?t._e():e("CheckboxField",{staticClass:"col-12 q-pl-sm q-pb-sm q-pt-sm",class:t.notifyInitiatorClass,attrs:{label:"Notify Initiator/Requester"},model:{value:t.notifyInitiator,callback:function(e){t.notifyInitiator=e},expression:"notifyInitiator"}}),t.displayInternalPublic?e("SingleChoiceField",{staticClass:"action-container",class:{"internal-public":t.attachmentList.length>0,"col q-pa-sm":!0,"internal-public-margin":t.attachComment},attrs:{options:t.commentActions,"show-options-wrapper":!1,"options-per-line":2},model:{value:t.commentAction,callback:function(e){t.commentAction=e},expression:"commentAction"}}):t._e()],1)]:t._e(),t.isTenantGOTOComments()?[e("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:t.jiraCommentActions,"options-per-line":2},model:{value:t.jiraCommentAction,callback:function(e){t.jiraCommentAction=e},expression:"jiraCommentAction"}})]:t._e()],2),e("div",{staticClass:"row text-area-action q-ml-sm q-mr-sm"},[e("div",{staticClass:"col"},[e("TextAreaField",{attrs:{"auto-focus":"",placeholder:"Type a new comment..."},model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}})],1),e("div",{staticClass:"col-auto",staticStyle:{margin:"auto","margin-right":"8px"}},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Post Comments",expression:"'Post Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm comment-actions",attrs:{icon:"eva-paper-plane-outline",color:"primary-11",size:"16px","rotate-class":"rotate-45"},on:{click:t.saveComment}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Advanced Comments",expression:"'Advanced Comments'",modifiers:{left:!0}}],staticClass:"q-ml-sm q-mt-sm comment-actions",attrs:{icon:"mdi-comment-text-multiple",color:"primary-11",size:"16px"},on:{click:function(e){t.advancedCommentsSheet=!0}}})],1)])]):t._e()]),e("Confirm",{attrs:{icon:"eva-alert-circle-outline","icon-color":"red"},on:{input:function(e){t.errorModal=!1,t.errorMessage=""}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Error Message")]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"q-py-md"},[e("p",[t._v(" "+t._s(t.errorMessage)+" ")])])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{attrs:{label:"Close",color:"red"},on:{click:function(e){t.errorModal=!1,t.errorMessage=""}}})]},proxy:!0}]),model:{value:t.errorModal,callback:function(e){t.errorModal=e},expression:"errorModal"}}),e("Modal",{attrs:{width:"60vw",height:"80vh","has-footer":""},on:{input:function(e){t.saveAction="",t.workflowFormModel={},t.advancedCommentsSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Comments")]},proxy:!0},{key:"default",fn:function(){return[e("TextBuilderField",{model:{value:t.advancedCommentText,callback:function(e){t.advancedCommentText=e},expression:"advancedCommentText"}})]},proxy:!0},{key:"footer",fn:function(){return[t.checkTenant()?[t.attachmentList.length&&t.fileNames.length?e("div",{staticClass:"row actions advance-cmd"},[e("CheckboxField",{staticClass:"col-auto q-pr-sm",staticStyle:{margin:"auto"},attrs:{label:"Add Comment to PDF"},model:{value:t.attachComment,callback:function(e){t.attachComment=e},expression:"attachComment"}}),t.attachComment?e("SelectField",{staticClass:"field comment-attach",attrs:{"is-searchable":!0,options:t.fileNames},model:{value:t.selectedFileForAttach,callback:function(e){t.selectedFileForAttach=e},expression:"selectedFileForAttach"}}):t._e(),t.selectedProcess.processId&&"START"!==t.selectedProcess.stageType&&!t.isPortal?e("CheckboxField",{staticClass:"col-auto q-pl-sm adv-notify-cmd",attrs:{label:"Notify Initiator/Requester"},model:{value:t.notifyInitiator,callback:function(e){t.notifyInitiator=e},expression:"notifyInitiator"}}):t._e()],1):t._e(),t.checkTenant()&&t.displayInternalPublic?e("SingleChoiceField",{staticClass:"actions q-mr-sm noborder",attrs:{options:t.commentActions,"options-per-line":2},model:{value:t.commentAction,callback:function(e){t.commentAction=e},expression:"commentAction"}}):t._e()]:t._e(),t.isTenantGOTOComments()?[e("SingleChoiceField",{staticClass:"col q-mb-sm actions",attrs:{options:t.jiraCommentActions,"options-per-line":2},model:{value:t.jiraCommentAction,callback:function(e){t.jiraCommentAction=e},expression:"jiraCommentAction"}})]:t._e(),e("BaseButton",{attrs:{label:"Post Comments",icon:"eva-paper-plane-outline",color:"primary"},on:{click:t.saveAdvancedComment}})]},proxy:!0}]),model:{value:t.advancedCommentsSheet,callback:function(e){t.advancedCommentsSheet=e},expression:"advancedCommentsSheet"}})],1)},a=[],o=(i("14d9"),i("381e")),r=i("1b0d"),n=i("1c54"),l=i("6df3"),c=i("6a70"),d=i("695e"),m=i("869e"),h=i("12b8"),u=i("9234"),p=i("fa1f"),f={name:"Comments",components:{Sheet:o["a"],Confirm:n["a"],TextAreaField:l["a"],Modal:c["a"],TextBuilderField:d["a"],CheckboxField:m["a"],SelectField:h["a"],SingleChoiceField:u["a"],FileIcon:p["a"]},props:{value:{type:Boolean,default:!1},selectedProcess:{type:Object,default:()=>{}},workflow:{type:Object,default:()=>{}},selectedNode:{type:String,required:!0},initiateProcess:{type:Boolean,default:!1},formFields:{type:Array,default:()=>[]},attachmentList:{type:Array,default:()=>[]},workflowId:{type:Number,required:!0},actionComments:{type:Boolean,default:!1},fileNames:{type:Array,default:()=>[]},comments:{type:Array,default:()=>[]},displayInternalPublic:{type:Boolean,default:!1},isPortal:{type:Boolean,default:!1}},data(){return{commentsSheet:!1,commentText:"",commentsList:[],attachComment:!1,selectedFileForAttach:0,advancedCommentsSheet:!1,advancedCommentText:"",commentActions:[{id:this.$nano.id(),label:"Internal",value:2},{id:this.$nano.id(),label:"Public",value:1}],commentAction:2,jiraCommentActions:[{id:this.$nano.id(),label:"This resource",value:1},{id:this.$nano.id(),label:"All resource",value:2}],jiraCommentAction:1,errorMessage:"",errorModal:!1,successModal:!1,notifyInitiator:!1}},computed:{commentsSheetHeight(){return"inbox"===this.selectedNode||"payment"===this.selectedNode||"common"===this.selectedNode||this.initiateProcess||this.isPortal?this.checkCommentsOption()&&!this.isCustomizedWorkflow?this.attachmentList.length&&this.fileNames.length?this.attachComment&&this.displayInternalPublic?"calc(100vh - 270px)":this.attachComment&&!this.displayInternalPublic?"calc(100vh - 230px)":!this.attachComment&&this.displayInternalPublic?"calc(100vh - 225px)":"calc(100vh - 200px)":this.displayInternalPublic?"calc(100vh - 220px)":"START"===this.selectedProcess.stageType||this.isPortal?"calc(100vh - 150px)":"calc(100vh - 180px)":"calc(100vh - 150px)":""},notifyInitiatorClass(){return this.attachmentList.length&&this.fileNames.length?"":"action-container"}},watch:{value:{immediate:!0,handler(){this.commentsSheet=!0,this.commentsList=this.comments,this.commentsSheet&&this.selectedProcess.processId?this.commentsLoad=setInterval(()=>{this.getComments()},3e4):clearInterval(this.commentsLoad)}}},methods:{closeCommentsSheet(){this.commentsSheet=!1,this.$emit("update:comments",this.commentsList),this.$emit("commentsCount",this.commentsList.length),this.$emit("update:value",!1)},async getComments(t=0,e=0){this.commentsList=[],t||e||(t=this.workflowId,e=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:i,payload:s}=await r["t"].getProcessComments(t,e);this.$store.commit("hideLoadingBar"),i?this.$alert.error(i):s.length&&(this.commentsList=s,this.$emit("commentsCount",this.commentsList.length))},async saveComment(){if(this.commentText){if(this.attachComment&&!this.selectedFileForAttach)return void this.$alert.warning("Select File To Attach");if(this.selectedProcess.processId){if(this.isTenantGOTO()&&this.selectedProcess.jiraIssueInfo.id&&2===this.jiraCommentAction){const{error:t,payload:e}=await r["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.commentText});if(t)return void this.$alert.error(t);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,e)}else{const{error:t,payload:e}=await r["t"].insertProcessComment(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.commentText,showTo:this.isPortal?1:this.commentAction,hasNotifytoInitiated:this.notifyInitiator,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(t)return void this.$alert.error(t);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.commentText,this.selectedProcess.jiraIssueInfo.id,[e])}this.commentText="",this.clearAttach(),this.getComments()}else this.commentsList.push({comments:this.commentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id,hasNotifytoInitiated:this.notifyInitiator,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})}),this.$emit("commentsCount",this.commentsList.length),this.commentText="",this.clearAttach()}},async saveAdvancedComment(){if(this.advancedCommentText){if(this.attachComment&&!this.selectedFileForAttach)return void this.$alert.warning("Select File To Attach");if(this.selectedProcess.processId){if(this.isTenantGOTO()&&this.selectedProcess.jiraIssueInfo.id&&2===this.jiraCommentAction){this.$store.commit("showLoadingBar");const{error:t,payload:e}=await r["t"].insertProcessComment_Jira(this.selectedProcess.jiraIssueInfo.id,{comments:this.advancedCommentText});if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,e)}else{const{error:t,payload:e}=await r["t"].insertProcessComment(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,{comments:this.advancedCommentText,showTo:this.isPortal?1:this.commentAction,hasNotifytoInitiated:this.notifyInitiator,embedJson:JSON.stringify({repositoryId:this.workflow.repositoryId,itemIds:this.attachComment?[this.selectedFileForAttach]:[]})});if(t)return void this.$alert.error(t);this.selectedProcess.jiraIssueInfo.id&&this.sendCommentsToJira(this.advancedCommentText,this.selectedProcess.jiraIssueInfo.id,e)}this.advancedCommentText="",this.advancedCommentsSheet=!1,this.clearAttach(),this.getComments()}else this.commentsList.push({comments:this.advancedCommentText,createdAt:(new Date).toISOString(),createdBy:this.$store.state.session.id}),this.advancedCommentText="",this.advancedCommentsSheet=!1,this.$emit("commentsCount",this.commentsList.length);this.actionComments&&this.$emit("processRequest",!1,!1)}},clearAttach(){this.selectedFileForAttach=0,this.attachComment=!1,this.notifyInitiator=!1},async sendCommentsToJira(t,e,i){if(this.$store.commit("showLoadingBar"),1===this.jiraCommentAction){var s;let e=null===(s=this.formFields.find(t=>"Resource ID"===t.label))||void 0===s?void 0:s.value;t=this.selectedProcess.formData.fields[e]+","+t}t=`${this.$store.state.session.firstName} ${this.$store.state.session.lastName}: ${t}`;let a={cloudIntegrationId:this.jiraAccounts[0].id,url:this.selectedProcess.jiraIssueInfo.self,data_onpremise:{body:t},issueId:e,ezCommentId:i};const{error:o,payload:n}=await r["j"].insertJiraIssueComments(a);if(this.$store.commit("hideLoadingBar"),o){this.$alert.error("error posting comments to jira");let t=JSON.parse(o);return this.errorMessage=t.errorMessages,void(this.errorModal=!0)}console.log(n),this.jiraCommentAction=1},isTenantGOTO(){let t=location.origin;return("https://app.ezofis.com"===t||"https://appuat.ezofis.com"===t)&&2===this.$store.state.session.tenantId},checkCommentsOption(){return!this.isTenantArmgroup()&&(!this.isTenantGOTO()||!(!Object.keys(this.selectedProcess).length||!this.selectedProcess.jiraIssueInfo.id))},checkTenant(){return!this.isTenantArmgroup()||(this.commentAction=2,!1)},isTenantArmgroup(){let t=location.origin;return("https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t||"http://localhost:80801"===t)&&3===this.$store.state.session.tenantId},isTenantGOTOComments(){return!!(Object.keys(this.selectedProcess).length&&this.isTenantGOTO()&&this.selectedProcess.jiraIssueInfo.id)},lastCommentDuration(t){const e=t.createdAt instanceof Date?t.createdAt:new Date(t.createdAt),i=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},a=(e.getTime()-Date.now())/1e3;for(let o in s)if(s[o]<Math.abs(a)){const t=a/s[o];return i.format(Math.round(t),o)}},fileType(t){if(t)return t.split(".").reverse()[0].slice(0,4)}}},v=f,y=(i("c5b7"),i("2877")),b=i("8169"),g=i("93dc"),w=i.n(g),C=Object(y["a"])(v,s,a,!1,null,null,null);e["a"]=C.exports;w()(C,"components",{QChatMessage:b["a"]})},bcdf:function(t,e,i){var s={"./name-dark.png":"cd22","./name-light.png":"00c2"};function a(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}a.keys=function(){return Object.keys(s)},a.resolve=o,t.exports=a,a.id="bcdf"},bded:function(t,e,i){"use strict";i("fabd")},bdf3:function(t,e,i){},be3f:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"search",expression:"'search'",modifiers:{top:!0}}],staticClass:"is-expanded",attrs:{id:"expandable-search"},on:{click:t.toggle}},[e("BaseIcon",{staticClass:"icon",attrs:{name:"eva-search"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],ref:"expandableSearch",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.searchQuery},on:{keyup:function(e){return t.$emit("search",t.searchQuery)},blur:t.handleBlur,input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})],1)},a=[],o={name:"ExpandableSearch",data(){return{isExpanded:!1,searchQuery:""}},methods:{toggle(){this.isExpanded=!this.isExpanded,this.isExpanded&&this.$refs.expandableSearch.focus()},handleBlur(){this.isExpanded=!1}}},r=o,n=(i("fdd5"),i("2877")),l=Object(n["a"])(r,s,a,!1,null,"29b72610",null);e["a"]=l.exports},bf55:function(t,e,i){"use strict";i("686b")},c187:function(t,e,i){"use strict";i("9935")},c49c:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"state-wrapper"}},[e("div",{staticClass:"slow-up-down",attrs:{id:"illustration"}},[e("div",{attrs:{id:"shape-1"}}),e("div",{attrs:{id:"shape-2"}}),e("div",{attrs:{id:"shape-3"}},[e("BaseIcon",{staticClass:"icon",attrs:{name:t.icon,size:"80px"}})],1)]),e("div",{staticClass:"title-1"},[t._v(" "+t._s(t.title)+" ")]),e("div",{staticClass:"description"},[t._v(" "+t._s(t.description)+" ")]),t.action?e("BaseButton",{staticClass:"q-mt-lg",attrs:{icon:t.actionIcon,label:t.action},on:{click:function(e){return t.$emit("action")}}}):t._e()],1)},a=[],o={name:"StateWrapper",props:{icon:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},action:{type:String,default:""},actionIcon:{type:String,default:""}}},r=o,n=(i("2948"),i("2877")),l=Object(n["a"])(r,s,a,!1,null,"ba5412d8",null);e["a"]=l.exports},c52a:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{style:{width:t.formWidth},attrs:{id:"custom-process-form-view"}},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 130px)"}},[e("div",{staticClass:"content"},[e("div",{staticClass:"row"},[e("div",{staticClass:"q-pr-sm row",class:t.$q.screen.width>1200?"col-lg-6 col-md-6 col-sm-12":"col-lg-6 col-md-12 col-sm-12",style:t.inbox?"":"height:10px;"},[e("div",{staticClass:"col-12 header",class:t.inbox?"":"q-mb-sm"},[t._v(" Customer Information ")]),e("table",{staticClass:"col-12 q-mb-sm"},[e("tbody",[e("tr",[e("td",[t._v("Claimant Info")]),e("td",[e("SelectField",{staticClass:"custom-controls",attrs:{value:t.getModel("Claimant Info"),options:t.claimantInfoList,"is-readonly":t.isReadonly||!t.fieldVerification},on:{input:function(e){return t.updateModel(e,"Claimant Info")},onBlur:function(e){return t.autoSave("Claimant Info")}}})],1),e("td",[t._v("First Name")]),e("td",[e("TextField",{staticClass:"custom-controls",attrs:{value:t.getModel("First Name"),highlight:t.checkHighlight("First Name"),"is-readonly":t.isReadonly||!t.fieldVerification},on:{input:function(e){return t.updateModel(e,"First Name")},onBlur:function(e){return t.autoSave("First Name")}}})],1),e("td",[t._v("Last Name")]),e("td",{attrs:{colspan:"2"}},[e("TextField",{staticClass:"custom-controls",attrs:{value:t.getModel("Last Name"),highlight:t.checkHighlight("Last Name"),"is-readonly":t.isReadonly||!t.fieldVerification},on:{input:function(e){return t.updateModel(e,"Last Name")},onBlur:function(e){return t.autoSave("Last Name")}}})],1)]),e("tr",[e("td",[t._v("DOB")]),e("td",[e("DateField",{staticClass:"custom-controls",attrs:{value:t.getModel("DOB"),highlight:t.checkHighlight("DOB"),"is-readonly":t.isReadonly||!t.fieldVerification,"maximum-validation":!0},on:{input:function(e){return t.updateModel(e,"DOB")},onBlur:function(e){return t.autoSave("DOB")}}})],1),e("td",[t._v("Current Age")]),e("td",[e("NumberField",{staticClass:"custom-controls",attrs:{value:t.getModel("Current Age"),"is-readonly":t.isReadonly||!t.fieldVerification},on:{input:function(e){return t.updateModel(e,"Current Age")},onBlur:function(e){return t.autoSave("Current Age")}}})],1),e("td",[t._v("Age at DOC")]),e("td",[e("NumberField",{staticClass:"custom-controls",attrs:{value:t.getModel("Age at Doc"),"is-readonly":t.isReadonly||!t.fieldVerification},on:{input:function(e){return t.updateModel(e,"Age at Doc")},onBlur:function(e){return t.autoSave("Age at Doc")}}})],1)]),e("tr",[e("td",[t._v("Address")]),e("td",{attrs:{colspan:"5"}},[e("TextAreaField",{attrs:{value:t.getModel("Address"),highlight:t.checkHighlight("Address"),"is-readonly":t.isReadonly||!t.fieldVerification},on:{input:function(e){return t.updateModel(e,"Address")},onBlur:function(e){return t.autoSave("Address")}}})],1)]),e("tr",[e("td",[t._v("City")]),e("td",[e("TextField",{staticClass:"custom-controls",attrs:{value:t.getModel("City"),highlight:t.checkHighlight("City"),"is-readonly":t.isReadonly||!t.fieldVerification},on:{input:function(e){return t.updateModel(e,"City")},onBlur:function(e){return t.autoSave("City")}}})],1),e("td",[t._v("Province")]),e("td",[e("SelectField",{staticClass:"custom-controls",attrs:{value:t.getModel("Province"),options:t.provinceList,highlight:t.checkHighlight("Province"),"is-readonly":t.isReadonly||!t.fieldVerification},on:{input:function(e){return t.updateModel(e,"Province")},onBlur:function(e){return t.autoSave("Province")}}})],1),e("td",[t._v("Postal Code")]),e("td",[e("TextField",{staticClass:"custom-controls",attrs:{value:t.getModel("Postal Code"),highlight:t.checkHighlight("Postal Code"),"is-readonly":t.isReadonly||!t.fieldVerification},on:{input:function(e){return t.updateModel(e,"Postal Code")},onBlur:function(e){return t.autoSave("Postal Code")}}})],1)]),e("tr",[e("td",[t._v("Phone No.")]),e("td",[e("TextField",{staticClass:"custom-controls",attrs:{value:t.getModel("Phone No."),highlight:t.checkHighlight("Phone No."),"is-readonly":t.isReadonly||!t.fieldVerification},on:{input:function(e){return t.updateModel(e,"Phone No.")},onBlur:function(e){return t.autoSave("Phone No.")}}})],1),e("td",[t._v("Email ID")]),e("td",[e("TextField",{staticClass:"custom-controls",attrs:{value:t.getModel("Email ID"),highlight:t.checkHighlight("Email ID"),"is-readonly":t.isReadonly||!t.fieldVerification},on:{input:function(e){return t.updateModel(e,"Email ID")},onBlur:function(e){return t.autoSave("Email ID")}}})],1),e("td",[t._v("Name of Deceased")]),e("td",[e("TextField",{staticClass:"custom-controls",attrs:{value:t.getModel("Name of Deceased"),"is-readonly":t.isReadonly||!t.isNameOfDeceasedEditable||!t.fieldVerification},on:{input:function(e){return t.updateModel(e,"Name of Deceased")},onBlur:function(e){return t.autoSave("Name of Deceased")}}})],1)])])]),"001f5CdkTDtjCDn3logTT"!==t.selectedProcess.activityId&&"szS6B-q1x9acpB83rP6jT"!==t.selectedProcess.activityId&&!t.isReadonly&&t.inbox?e("div",{staticClass:"col-12"},[t.isReadonly?t.fieldVerification?t._e():[e("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirmed",color:"green"}})]:[t.fieldVerification?[e("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirm",color:"orange"},on:{click:t.confirmCustomerInfo}})]:[e("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirmed",color:"green"}}),e("BaseButton",{staticClass:"custom-button q-mr-sm",staticStyle:{float:"right"},attrs:{label:"Edit",color:"orange"},on:{click:t.unConfirmCustomerInfo}})]]],2):t._e(),e("div",{staticClass:"header col-12",class:t.inbox?"":"q-mb-sm"},[t._v(" Loan Information ")]),e("table",{staticClass:"col-12 q-mb-sm loan-info"},[e("tbody",[e("tr",[e("td",[t._v("Group Policy")]),e("td",[t._v(t._s(t.getModel("Group Policy")||"-"))]),e("td",[t._v("Payment Frequency")]),e("td",[t._v(t._s(t.getModel("Payment Frequency")||"-"))])]),e("tr",[e("td",[t._v("Loan No.")]),e("td",[t._v(t._s(t.getModel("Loan No.")||"-"))]),e("td",[t._v("No. of Loan Payments")]),e("td",[t._v(" "+t._s(t.getModel("No. of Loan Payments")||"-")+" ")])]),e("tr",[e("td",[t._v("Loan Start Date")]),e("td",[t._v(t._s(t.getModel("Loan Start Date")||"-"))]),e("td",[t._v("Last Remitted Date")]),e("td",[t._v(t._s(t.getModel("Last Remitted Date")||"-"))])]),e("tr",[e("td",[t._v("Term")]),e("td",[t._v(t._s(t.getModel("Term")||"-"))]),e("td",[t._v("Cancellation Date")]),e("td",[t._v(t._s(t.getModel("Cancellation Date")||"-"))])]),e("tr",[e("td",[t._v("Loan End Date")]),e("td",[t._v(t._s(t.getModel("Loan End Date")||"-"))]),e("td",[t._v("Cancel Reason")]),e("td",[t._v(t._s(t.getModel("Cancel Reason")||"-"))])])])]),"001f5CdkTDtjCDn3logTT"!==t.selectedProcess.activityId&&"szS6B-q1x9acpB83rP6jT"!==t.selectedProcess.activityId&&!t.isReadonly&&t.inbox?e("div",{staticClass:"col-12"},[t.loanInfoVerify?t.loanInfoVerify?[e("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirmed",color:"green"}}),e("BaseButton",{staticClass:"custom-button q-mr-sm",staticStyle:{float:"right"},attrs:{label:"Edit",color:"orange"},on:{click:t.unConfirmLoanInfo}})]:t._e():[e("BaseButton",{staticClass:"custom-button",staticStyle:{float:"right"},attrs:{label:"Confirm",color:"orange"},on:{click:t.confirmLoanInfo}})]],2):t._e()]),e("div",{staticClass:"row",class:t.$q.screen.width>1200?"col-lg-6 col-md-6 col-sm-12":"col-lg-6 col-md-12 col-sm-12"},[e("div",{staticClass:"col-12 header q-mb-sm"},[t._v("Claim Information")]),e("div",{staticClass:"col-12 full-border q-pa-sm"},[e("table",{staticClass:"claim-info q-mb-sm table-content single-border"},[e("thead",[e("tr",[e("th",[t._v("Claim No.")]),e("th",[t._v("Reference No.")]),e("th",[t._v("Claim Date")]),e("th",[t._v("Claim Package Sent")])])]),e("tbody",[e("tr",[e("td",[t._v(t._s(t.getModel("Claim No.")||"-"))]),e("td",[t._v(t._s(t.getModel("Reference No.")||"-"))]),e("td",[e("DateField",{staticClass:"custom-controls",attrs:{value:t.getModel("Claim Date"),"is-readonly":t.isReadonly||t.claimInfoVerify},on:{input:function(e){return t.updateModel(e,"Claim Date")},onBlur:function(e){return t.autoSave("Claim Date")}}})],1),e("td",[t._v(t._s(t.getModel("Claim Package Sent")||"-"))])])])]),e("table",{staticClass:"claim-info q-mb-sm table-content single-border"},[e("thead",[e("tr",[e("th",[t._v("Claim Received Date")]),e("th",[t._v("Processing Date")]),e("th",[t._v("Initials")]),e("th",[t._v("Language")])])]),e("tbody",[e("tr",[e("td",[t._v(t._s(t.getModel("Claim Received Date")||"-"))]),e("td",[t._v(t._s(t.getModel("Processing Date")||"-"))]),e("td",[e("TextField",{staticClass:"custom-controls",attrs:{value:t.getModel("Initials"),"is-readonly":t.isReadonly||t.claimInfoVerify},on:{input:function(e){return t.updateModel(e,"Initials")},onBlur:function(e){return t.autoSave("Initials")}}})],1),e("td",[e("SelectField",{staticClass:"custom-controls",attrs:{value:t.getModel("Language"),options:t.languageList,"is-readonly":t.isReadonly||t.claimInfoVerify},on:{input:function(e){return t.updateModel(e,"Language")},onBlur:function(e){return t.autoSave("Language")}}})],1)])])]),e("table",{staticClass:"claim-info single-border"},[e("tbody",[e("tr",[e("td",[t._v("Benefit Claimed")]),e("td",{staticClass:"medium"},[e("SelectField",{staticClass:"custom-controls",attrs:{value:t.getModel("Benefit Claimed"),options:t._productList,"is-readonly":t.isReadonly||t.claimInfoVerify||!t.isChangeBenefitClaimed},on:{input:function(e){return t.updateModel(e,"Benefit Claimed")},onBlur:function(e){return t.autoSave("Benefit Claimed")}}})],1),e("td",[t._v("Loan Payment Amount")]),e("td",{staticClass:"medium"},[e("NumberField",{staticClass:"custom-controls",attrs:{value:t.getModel("Loan Payment Amount"),"is-readonly":t.isReadonly||t.claimInfoVerify},on:{input:function(e){return t.updateModel(e,"Loan Payment Amount")},onBlur:function(e){return t.autoSave("Loan Payment Amount")}}})],1)]),e("tr",[e("td",[t._v("Reason/Cause")]),e("td",{staticClass:"medium"},[e("TextField",{staticClass:"custom-controls",attrs:{value:t.getModel("Reason/Cause"),"is-readonly":t.isReadonly||t.claimInfoVerify},on:{input:function(e){return t.updateModel(e,"Reason/Cause")},onBlur:function(e){return t.autoSave("Reason/Cause")}}})],1),e("td",[t._v("LPP Premium Amount")]),e("td",{staticClass:"medium"},[e("NumberField",{staticClass:"custom-controls",attrs:{value:t.getModel("LPP Premium Amount"),"is-readonly":t.isReadonly||t.claimInfoVerify},on:{input:function(e){return t.updateModel(e,"LPP Premium Amount")},onBlur:function(e){return t.autoSave("LPP Premium Amount")}}})],1)]),e("tr",[e("td",[t._v("Claim Decision")]),e("td",{staticClass:"medium"},[e("TextField",{staticClass:"custom-controls",attrs:{value:t.getModel("Claim Decision"),"is-readonly":t.isReadonly||t.claimInfoVerify},on:{input:function(e){return t.updateModel(e,"Claim Decision")},onBlur:function(e){return t.autoSave("Claim Decision")}}})],1),e("td",[t._v("Principal Balance at DOC")]),e("td",{staticClass:"medium"},[e("NumberField",{staticClass:"custom-controls",attrs:{value:t.getModel("Principal Balance At Doc"),"is-readonly":t.isReadonly||t.claimInfoVerify},on:{input:function(e){return t.updateModel(e,"Principal Balance At Doc")},onBlur:function(e){return t.autoSave("Principal Balance At Doc")}}})],1)]),e("tr",[e("td",[t._v("Decline Reason")]),e("td",{staticClass:"medium"},[e("SelectField",{staticClass:"custom-controls",attrs:{value:t.getModel("Decline Reason"),options:t.declineReasonList,"is-readonly":!0},on:{input:function(e){return t.updateModel(e,"Decline Reason")},onBlur:function(e){return t.autoSave("Decline Reason")}}})],1),e("td",[t._v("LumpSum Principal Balance")]),e("td",{staticClass:"medium"},[e("NumberField",{staticClass:"custom-controls",attrs:{value:t.getModel("LumpSum Principal Balance"),"is-readonly":t.isReadonly||t.claimInfoVerify},on:{input:function(e){return t.updateModel(e,"LumpSum Principal Balance")},onBlur:function(e){return t.autoSave("LumpSum Principal Balance")}}})],1)]),e("tr",[e("td",{attrs:{colspan:"3"}},[e("MultipleChoiceField",{staticClass:"custom-controls no-border",attrs:{value:t.getModel("Authorization"),options:t.authorizationTypes,"options-per-line":3,"is-readonly":t.isReadonly||t.claimInfoVerify},on:{input:function(e){t.updateModel(e,"Authorization"),t.autoSave("Authorization")}}})],1),e("td",["001f5CdkTDtjCDn3logTT"!==t.selectedProcess.activityId&&"szS6B-q1x9acpB83rP6jT"!==t.selectedProcess.activityId&&!t.isReadonly&&t.inbox?[t.claimInfoVerify?t.claimInfoVerify?[e("BaseButton",{staticClass:"custom-button",staticStyle:{margin:"auto"},attrs:{label:"Confirmed",color:"green"}}),e("BaseButton",{staticClass:"custom-button",staticStyle:{margin:"auto","margin-top":"10px"},attrs:{label:"Edit",color:"orange"},on:{click:t.unConfirmClaimInfo}})]:t._e():[e("BaseButton",{staticClass:"custom-button",staticStyle:{margin:"auto"},attrs:{label:"Confirm",color:"orange"},on:{click:t.confirmClaimInfo}})]]:t._e()],2)])])])]),e("div",{staticClass:"col-12 q-mt-sm full-border q-pa-sm"},[e("div",{staticClass:"col header"},[t._v("Required Documents")]),e("MultipleChoiceField",{staticClass:"custom-controls q-mt-sm",attrs:{value:t.getModel("Required Documents"),options:t._documentCheckList,"options-per-line":3,"is-readonly":t.isReadonly},on:{input:function(e){t.updateModel(e,"Required Documents"),t.autoSave("Required Documents")}}})],1)])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col q-mt-sm"},[e("div",{staticClass:"q-pl-sm q-mb-sm"},[e("Tabs",{attrs:{tabs:t.tabs},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}})],1),"Claim Status"===t.tab?[t.claimStatusTotalItems?e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("Pagination",{staticClass:"custom-form-table",attrs:{"total-items":t.claimStatusTotalItems,"current-page":t.claimStatusCurrentPage,"items-per-page":t.claimStatusItemsPerPage},on:{"update:currentPage":function(e){t.claimStatusCurrentPage=e},"update:current-page":function(e){t.claimStatusCurrentPage=e},"update:itemsPerPage":function(e){t.claimStatusItemsPerPage=e},"update:items-per-page":function(e){t.claimStatusItemsPerPage=e},loadAll:t.loadAllClaimStatus}})],1),e("div",{staticClass:"col-auto q-mt-xs q-ml-sm"},[e("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:t.claimStatusSearchRow}})],1)]):t._e(),e("BaseScrollbar",{attrs:{height:"330px"}},[e("table",{staticClass:"tab-table table-content q-mt-sm",class:t.claimStatusTotalItems?"":"empty"},[e("thead",[e("tr",[t.inbox?e("th",{staticClass:"actions"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"add row",expression:"'add row'",arg:"top"}],staticClass:"q-ml-xs small",attrs:{color:"primary",icon:"eva-plus","no-border":"",size:"16px"},on:{click:t.addClaimStatus}})],1):t._e(),t._l(t.claimStatusColumns,(function(i){return e("th",{key:i.id},[t._v(" "+t._s(i.label)+" ")])}))],2)]),e("tbody",t._l(t.claimStatusValues,(function(i,s){return e("tr",{key:"claimstatusrow"+s},[t.inbox?e("td",{staticClass:"actions"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"edit",expression:"'edit'",arg:"top"}],staticClass:"q-ml-xs small",attrs:{color:"secondary",icon:"mdi-square-edit-outline",size:"16px","is-flat":"","no-border":""},on:{click:function(e){return t.editClaimStatus(i)}}})],1):t._e(),t._l(t.claimStatusColumns,(function(s){return e("td",{key:s.id},[t._v(" "+t._s(i[s.name])+" ")])}))],2)})),0)])])]:"Daily Data Summary"===t.tab?[t.dailyDataStatusTotalItems?e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("Pagination",{staticClass:"custom-form-table",attrs:{"total-items":t.dailyDataStatusTotalItems,"current-page":t.dailyDataStatusCurrentPage,"items-per-page":t.dailyDataStatusItemsPerPage},on:{"update:currentPage":function(e){t.dailyDataStatusCurrentPage=e},"update:current-page":function(e){t.dailyDataStatusCurrentPage=e},"update:itemsPerPage":function(e){t.dailyDataStatusItemsPerPage=e},"update:items-per-page":function(e){t.dailyDataStatusItemsPerPage=e},loadAll:t.loadAllDailyDataStatus}})],1),e("div",{staticClass:"col-auto q-mt-xs q-ml-sm"},[e("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:t.dailyDataStatusSearchRow}})],1)]):t._e(),e("BaseScrollbar",{attrs:{height:"330px"}},[e("table",{staticClass:"tab-table q-mt-sm",class:t.dailyDataStatusTotalItems?"":"empty"},[e("thead",[e("tr",t._l(t.dailyDataStatusColumns,(function(i){return e("th",{key:i.id},[t._v(" "+t._s(i.label)+" ")])})),0)]),e("tbody",t._l(t.dailyDataStatusValues,(function(i,s){return e("tr",{key:"dailydatarow"+s},t._l(t.dailyDataStatusColumns,(function(s){return e("td",{key:s.id},[t._v(" "+t._s(i[s.name])+" ")])})),0)})),0)])])]:"Benefit Payment"===t.tab?[e("div",{attrs:{id:"paymentTable"}},[t.inbox?[t.hasLifeType||t.hasCIClaimsType?t._e():e("div",{staticClass:"row controls"},[e("div",{staticClass:"col"},["psyCrYXtKfcs-EJmrYIhv"===t.selectedProcess.activityId||"psyCrYXtKfcs-EJmrYIhv"===t.selectedProcess.activityId&&!t.isPaymentFound?[e("ValidationObserver",{ref:"form",staticClass:"row"},[e("div",{staticClass:"col-auto"},[e("ValidationProvider",{staticClass:"col",attrs:{name:"Total Payment",rules:t.paymentValidationRules},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("NumberField",{staticClass:"q-pa-sm custom-controls",attrs:{label:"Total Payment","is-mandatory":"",error:i[0]},on:{input:t.updateLoanPaymentAmount},model:{value:t.totalPayment,callback:function(e){t.totalPayment=e},expression:"totalPayment"}})]}}],null,!1,452974274)})],1),t._e(),e("div",{staticClass:"col-auto"},[e("ValidationProvider",{staticClass:"col",attrs:{name:"Payment Frequency",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("SelectField",{staticClass:"q-pa-sm custom-controls",attrs:{label:"Payment Frequency","is-mandatory":"",options:t.benefitTypes,"is-clearable":!1,error:i[0]},model:{value:t.benefitType,callback:function(e){t.benefitType=e},expression:"benefitType"}})]}}],null,!1,4170057051)})],1),e("div",{staticClass:"col-auto"},[e("BaseButton",{staticClass:"payment-action custom-button q-ml-sm",attrs:{label:"Calculate"},on:{click:t.paymentCalculation}})],1)])]:t._e()],2),e("div",{staticClass:"col-auto"},[e("div",{staticClass:"row"},["90xxPehjko0dNYRjbX5wm"===t.selectedProcess.activityId&&t.isPaymentFound&&t.hasOtherClaimsType?e("div",{staticClass:"col-auto"},[e("BaseButton",{staticClass:"payment-action q-mr-sm custom-button",attrs:{label:"Add Lumpsum Payment",color:"primary"},on:{click:t.addLumpsumRow}})],1):t._e(),"001f5CdkTDtjCDn3logTT"!==t.selectedProcess.activityId&&"szS6B-q1x9acpB83rP6jT"!==t.selectedProcess.activityId?[e("div",{staticClass:"col-auto"},[e("FormFieldLabel",{staticClass:"payment-action",attrs:{label:"Number of payments to approve"}})],1),e("div",{staticClass:"col-auto"},[e("ValidationProvider",{staticClass:"col",attrs:{name:"Number of payments",rules:{min_value:0,max_value:t.paymentTableValues.length}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("NumberField",{staticClass:"payment-action q-ml-sm custom-controls",attrs:{"is-clearable":!1,"is-readonly":!t.paymentTableValues.length,error:i[0]},model:{value:t.numberOfApprovePayment,callback:function(e){t.numberOfApprovePayment=e},expression:"numberOfApprovePayment"}})]}}],null,!1,2997542867)})],1),e("div",{staticClass:"col-auto"},[e("BaseButton",{staticClass:"payment-action q-ml-sm custom-button",attrs:{label:"Payment Approve",color:"secondary",disabled:!t.paymentTableValues.length},on:{click:t.paymentApprove}})],1),e("div",{staticClass:"col-auto"},[e("BaseButton",{staticClass:"payment-action q-ml-sm custom-button",attrs:{label:"Clear",color:"red",disabled:!t.paymentTableValues.length},on:{click:t.clearPaymentApprove}})],1)]:t._e()],2)])])]:t._e(),e("div",{staticClass:"col"},[e("BaseScrollbar",[e("table",{staticClass:"tab-table table-content q-mb-sm",class:0===t.paymentTableValues.length?"empty":""},[e("thead",[e("tr",[t._l(t.paymentTableColumns,(function(i){return e("th",{key:i.id},[t._v(" "+t._s(i.label)+" ")])})),t.inbox&&"90xxPehjko0dNYRjbX5wm"===t.selectedProcess.activityId&&t.isPaymentFound&&!t.hasLifeType&&!t.hasCIClaimsType?e("th",{staticClass:"actions"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"add row",expression:"'add row'",arg:"top"}],staticClass:"q-ml-xs small",attrs:{color:"primary",icon:"eva-plus","no-border":"",size:"16px"},on:{click:t.addPaymentRow}})],1):t._e()],2)]),e("tbody",t._l(t.paymentTableValues,(function(i,s){return e("tr",{key:"paymentrow"+s},[t.inbox?[i["edit"]?t._l(t.paymentTableColumns,(function(a){return e("td",{key:a.id},["SINGLE_SELECT"===a.type?[e("SelectField",{attrs:{options:t.approvalTypes,"is-readonly":t.checkApprovalEdit(i)},on:{input:function(e){return t.updateApprovalDate(s)}},model:{value:i[a.name],callback:function(e){t.$set(i,a.name,e)},expression:"item[column.name]"}})]:"DATE"===a.type?[e("DateField",{attrs:{"minimum-validation":!0,"is-readonly":!0},model:{value:i[a.name],callback:function(e){t.$set(i,a.name,e)},expression:"item[column.name]"}})]:"NUMBER"===a.type?[e("NumberField",{attrs:{placeholder:"0.00"},model:{value:i[a.name],callback:function(e){t.$set(i,a.name,e)},expression:"item[column.name]"}})]:"SHORT_TEXT"===a.type?[e("TextField",{attrs:{"is-readonly":t.checkApprovalEdit(i)},model:{value:i[a.name],callback:function(e){t.$set(i,a.name,e)},expression:"item[column.name]"}})]:"CHECKBOX"===a.type?[e("CheckboxField",{staticClass:"custom-controls",attrs:{"is-disabled":t.checkApprovalEdit(i)},model:{value:i[a.name],callback:function(e){t.$set(i,a.name,e)},expression:"item[column.name]"}})]:[t._t(a.name,(function(){return[t._v(" "+t._s(i[a.name])+" ")]}),{value:i[a.name],item:i})]],2)})):[t._l(t.paymentTableColumns,(function(a){return e("td",{key:a.id},["90xxPehjko0dNYRjbX5wm"===t.selectedProcess.activityId&&t.isPaymentFound&&""!==i[a.name]&&!i["delete"]?["approval"===a.name?["Approved"===i[a.name]?[e("span",{staticClass:"text-green",attrs:{name:a.name,value:i[a.name],item:i}},[t._v(" "+t._s(i[a.name])+" ")])]:[e("span",{staticClass:"text-red",attrs:{name:a.name,value:i[a.name],item:i}},[t._v(" "+t._s(i[a.name])+" ")])]]:"paymentDate"===a.name?[e("DateField",{attrs:{"minimum-validation":!0},model:{value:i[a.name],callback:function(e){t.$set(i,a.name,e)},expression:"item[column.name]"}})]:"CHECKBOX"===a.type?[e("CheckboxField",{staticClass:"custom-controls",attrs:{"is-disabled":t.checkApprovalEdit(i)},model:{value:i[a.name],callback:function(e){t.$set(i,a.name,e)},expression:"item[column.name]"}})]:[t._t(a.name,(function(){return[t._v(" "+t._s(i[a.name])+" ")]}),{value:i[a.name],item:i})]]:["SINGLE_SELECT"===a.type?[e("SelectField",{attrs:{options:t.approvalTypes,"is-readonly":t.checkApprovalEdit(i)},on:{input:function(e){return t.updateApprovalDate(s)}},model:{value:i[a.name],callback:function(e){t.$set(i,a.name,e)},expression:"item[column.name]"}})]:"DATE"===a.type?[e("DateField",{attrs:{"minimum-validation":!0,"is-readonly":!0},model:{value:i[a.name],callback:function(e){t.$set(i,a.name,e)},expression:"item[column.name]"}})]:"baseAmount"===a.name&&i["delete"]?[e("NumberField",{attrs:{placeholder:"0.00",min:0,max:2e3},on:{input:function(e){return t.calcOtherColumns(s)}},model:{value:i[a.name],callback:function(e){t.$set(i,a.name,e)},expression:"item[column.name]"}})]:"SHORT_TEXT"===a.type?[e("TextField",{attrs:{"is-readonly":t.checkApprovalEdit(i)},model:{value:i[a.name],callback:function(e){t.$set(i,a.name,e)},expression:"item[column.name]"}})]:"CHECKBOX"===a.type?[e("CheckboxField",{staticClass:"custom-controls",attrs:{"is-disabled":t.checkApprovalEdit(i)},model:{value:i[a.name],callback:function(e){t.$set(i,a.name,e)},expression:"item[column.name]"}})]:[t._t(a.name,(function(){return[t._v(" "+t._s(i[a.name])+" ")]}),{value:i[a.name],item:i})]]],2)})),t.inbox&&"90xxPehjko0dNYRjbX5wm"===t.selectedProcess.activityId&&t.isPaymentFound?e("td",{staticClass:"actions"},[i["delete"]?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"delete row",expression:"'delete row'"}],staticClass:"q-ml-xs small",attrs:{"is-flat":"",color:"red",icon:"eva-trash-outline","no-border":"",size:"16px"},on:{click:function(e){return t.removePaymentRow(s)}}}):t._e()],1):t._e()]]:t._l(t.paymentTableColumns,(function(s){return e("td",{key:s.id},["approval"===s.name?["Approved"===i[s.name]?[e("span",{staticClass:"text-green",attrs:{name:s.name,value:i[s.name],item:i}},[t._v(" "+t._s(i[s.name])+" ")])]:[e("span",{staticClass:"text-red",attrs:{name:s.name,value:i[s.name],item:i}},[t._v(" "+t._s(i[s.name])+" ")])]]:"paymentDate"===s.name?[e("DateField",{attrs:{"minimum-validation":!0,"is-readonly":""},model:{value:i[s.name],callback:function(e){t.$set(i,s.name,e)},expression:"item[column.name]"}})]:"CHECKBOX"===s.type?[e("CheckboxField",{staticClass:"custom-controls",attrs:{"is-disabled":!0},model:{value:i[s.name],callback:function(e){t.$set(i,s.name,e)},expression:"item[column.name]"}})]:[t._t(s.name,(function(){return[t._v(" "+t._s(i[s.name])+" ")]}),{value:i[s.name],item:i})]],2)}))],2)})),0)]),t.inbox&&t.paymentTableValues.length?e("BaseButton",{staticStyle:{float:"right"},attrs:{label:"Update Payments",color:"primary"},on:{click:t.updatePaymentTable}}):t._e()],1)],1)],2)]:"Payments"===t.tab?[t.paymentHistoryTotalItems?e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("Pagination",{staticClass:"custom-form-table",attrs:{"total-items":t.paymentHistoryTotalItems,"current-page":t.paymentHistoryCurrentPage,"items-per-page":t.paymentHistoryItemsPerPage},on:{"update:currentPage":function(e){t.paymentHistoryCurrentPage=e},"update:current-page":function(e){t.paymentHistoryCurrentPage=e},"update:itemsPerPage":function(e){t.paymentHistoryItemsPerPage=e},"update:items-per-page":function(e){t.paymentHistoryItemsPerPage=e},loadAll:t.loadAllPaymentHistory}})],1),e("div",{staticClass:"col-auto q-mt-xs q-ml-sm"},[e("ExpandableSearch",{staticClass:"q-mr-sm",on:{search:t.paymentHistorySearchRow}})],1)]):t._e(),e("BaseScrollbar",{attrs:{height:"330px"}},[e("table",{staticClass:"tab-table q-mt-sm",class:t.paymentHistoryTotalItems?"":"empty"},[e("thead",[e("tr",t._l(t.paymentHistoryColumns,(function(i){return e("th",{key:i.id},[t._v(" "+t._s(i.label)+" ")])})),0)]),e("tbody",t._l(t.paymentHistoryValues,(function(i,s){return e("tr",{key:"paymenthistoryrow"+s},t._l(t.paymentHistoryColumns,(function(s){return e("td",{key:s.id},[t._v(" "+t._s(i[s.name])+" ")])})),0)})),0)])])]:t._e()],2)])])]),e("Modal",{attrs:{width:"30vw",height:"40vh","has-footer":""},on:{input:function(e){t.declineReasonModal=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Recommend to Decline")]},proxy:!0},{key:"default",fn:function(){return[e("ValidationObserver",{ref:"declineModal"},[e("div",[e("ValidationProvider",{staticClass:"col",attrs:{name:"Decline Reason",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("SelectField",{staticClass:"field",attrs:{label:"Decline Reason","is-mandatory":"",options:t.declineReasonList,error:i[0]},model:{value:t.declineReason,callback:function(e){t.declineReason=e},expression:"declineReason"}})]}}])})],1)])]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"Cancel"},on:{click:function(e){t.declineReasonModal=!1}}}),e("BaseButton",{attrs:{label:"Recommend to Decline",color:"primary"},on:{click:t.updateDeclineReason}})]},proxy:!0}]),model:{value:t.declineReasonModal,callback:function(e){t.declineReasonModal=e},expression:"declineReasonModal"}}),e("Modal",{attrs:{width:"60vw",height:"70vh","has-footer":""},on:{input:function(e){t.claimStatusModal=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v('"'+t._s(t.selectedProcess.requestNo)+'" Claim Status Entry')]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"claim-status",attrs:{id:"content-wrapper"}},[e("ValidationObserver",{ref:"claimStatusModal"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"},[e("ValidationProvider",{staticClass:"col",attrs:{name:"Claim Status",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("SelectField",{staticClass:"field",attrs:{label:"Claim Status","is-mandatory":"",options:t.claimStatusList,error:i[0]},model:{value:t.claimStatus,callback:function(e){t.claimStatus=e},expression:"claimStatus"}})]}}])})],1),e("div",{staticClass:"col-4"},[e("SelectField",{staticClass:"field",attrs:{label:"Note",options:t.csNoteList,"new-option":"","is-readonly":""},model:{value:t.csNote,callback:function(e){t.csNote=e},expression:"csNote"}})],1),e("div",{staticClass:"col-4"},[e("SelectField",{staticClass:"field",attrs:{label:"Claim Letter Sent",options:t.claimLetterSentList,"new-option":"","is-readonly":""},model:{value:t.claimLetterSent,callback:function(e){t.claimLetterSent=e},expression:"claimLetterSent"}})],1),e("div",{staticClass:"col-4"},[e("SelectField",{staticClass:"field",attrs:{label:"Mailing Type",options:t.mailingTypeList},model:{value:t.mailingType,callback:function(e){t.mailingType=e},expression:"mailingType"}})],1),e("div",{staticClass:"col-4"},[e("SelectField",{staticClass:"field",attrs:{label:"Lender Letter",options:t.lenderLetterList,"new-option":"","is-readonly":""},model:{value:t.lenderLetter,callback:function(e){t.lenderLetter=e},expression:"lenderLetter"}})],1),e("div",{staticClass:"col-4",staticStyle:{margin:"auto"}},[e("CheckboxField",{staticClass:"field",attrs:{label:"Internal Only"},model:{value:t.internalOnly,callback:function(e){t.internalOnly=e},expression:"internalOnly"}})],1),e("div",{staticClass:"col-12"},[e("TextAreaField",{staticClass:"field",attrs:{label:"Internal Notes"},model:{value:t.internalNotes,callback:function(e){t.internalNotes=e},expression:"internalNotes"}})],1)])])],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"Cancel"},on:{click:function(e){t.claimStatusModal=!1}}}),e("BaseButton",{attrs:{label:Object.keys(t.claimStatusRow).length?"Update":"Add",color:"primary"},on:{click:t.saveClaimStatus}})]},proxy:!0}]),model:{value:t.claimStatusModal,callback:function(e){t.claimStatusModal=e},expression:"claimStatusModal"}})],1)},a=[],o=(i("caad"),i("14d9"),i("7bb1")),r=i("3445"),n=i("12b8"),l=i("b3d1"),c=i("53c1"),d=i("ad54"),m=i("6df3"),h=i("1e48"),u=i("869e"),p=i("7286"),f=i("6a70"),v=i("42fc"),y=i("0d5e"),b=i("1b0d"),g=i("b6d2"),w=i("be3f"),C=i("5c8a"),k={name:"CustomProcessForm",components:{ValidationObserver:o["a"],ValidationProvider:o["b"],FormFieldLabel:r["a"],SelectField:n["a"],TextField:l["a"],DateField:c["a"],NumberField:d["a"],TextAreaField:m["a"],MultipleChoiceField:h["a"],CheckboxField:u["a"],Tabs:p["a"],Modal:f["a"],Pagination:g["a"],ExpandableSearch:w["a"]},props:{formId:{type:String,default:"0"},panels:{type:Array,default:()=>[]},secondaryPanels:{type:Array,default:()=>[]},formModel:{type:Object,default:()=>{}},saveAction:{type:String,default:""},workflowFormModel:{type:Object,default:()=>{}},formFields:{type:Array,default:()=>[]},dataValidationValues:{type:Array,default:()=>[]},selectedProcess:{type:Object,required:!0},isReadonly:{type:Boolean,default:!1},checkList:{type:Array,default:()=>[]},formCheckList:{type:Boolean,default:!1},saveOnly:{type:Boolean,default:!1},inbox:{type:Boolean,default:!1},autoSaveModel:{type:Object,default:()=>{}}},data(){return{formWidth:"100%",claimantInfoList:[{id:this.$nano.id(),label:"Borrower",value:"Borrower",claimType:""},{id:this.$nano.id(),label:"Co-Borrower",value:"Co-Borrower",claimType:""},{id:this.$nano.id(),label:"Next of Kin",value:"Next of Kin",claimType:"Life"}],authorizationTypes:[{id:this.$nano.id(),label:"Claimant Submitted",value:"Claimant Submitted"},{id:this.$nano.id(),label:"Special Auth",value:"Special Auth"},{id:this.$nano.id(),label:"Goodwill Claim",value:"Goodwill Claim"},{id:this.$nano.id(),label:"Advance Receipt",value:"Advance Receipt"},{id:this.$nano.id(),label:"Lump Sum Eligibility Status",value:"Lump Sum Eligibility Status"},{id:this.$nano.id(),label:"Pandemic",value:"Pandemic"},{id:this.$nano.id(),label:"Return To Work",value:"Return To Work"},{id:this.$nano.id(),label:"Prior Loan Used",value:"Prior Loan Used"}],documentCheckList:[{id:this.$nano.id(),label:"Claimant's Statement",value:"Claimant's Statement",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Application to Enroll",value:"Application to Enroll",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Payment Schedule/History",value:"Payment Schedule or History",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Employer's Statement/ROE",value:"Employer's Statement Or ROE",for:["Critical Illness","Involuntary Unemployment","Sickness or Injury","Unpaid Family Leave","Disability"]},{id:this.$nano.id(),label:"Loan Agreement",value:"Loan Agreement",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Lender Claim Statement",value:"Lender Claim Statement",for:["Critical Illness","Disability","Involuntary Unemployment","Life","Lifetime Milestone","Sickness or Injury","Unpaid Family Leave"]},{id:this.$nano.id(),label:"Physician's Statement",value:"Physician's Statement",for:["Critical Illness","Life","Sickness or Injury","Disability"]},{id:this.$nano.id(),label:"Section 2B",value:"Section 2B",for:["Lifetime Milestone"]},{id:this.$nano.id(),label:"Supporting Documentation",value:"Supporting Documentation",for:["Lifetime Milestone"]}],tabs:[{id:this.$nano.id(),label:"Claim Status",value:"Claim Status"},{id:this.$nano.id(),label:"Daily Data Summary",value:"Daily Data Summary"},{id:this.$nano.id(),label:"Benefit Payment",value:"Benefit Payment"},{id:this.$nano.id(),label:"Payments",value:"Payments"}],tab:"Claim Status",totalPayment:0,lumpsumAmount:0,benefitType:"",benefitTypes:[{id:this.$nano.id(),label:"Monthly",value:"Monthly"},{id:this.$nano.id(),label:"Bi-weekly",value:"BiWeekly"},{id:this.$nano.id(),label:"Semi-monthly",value:"SemiMonthly"},{id:this.$nano.id(),label:"Weekly",value:"Weekly"}],numberOfApprovePayment:0,paymentTableColumns:[{id:this.$nano.id(),name:"paymentNumber",label:"Payment Number",type:"LABEL"},{id:this.$nano.id(),name:"baseAmount",label:"Payment Base Amount",type:"NUMBER"},{id:this.$nano.id(),name:"claimAmount",label:"Claim Amount (20% Increased)",type:"NUMBER"},{id:this.$nano.id(),name:"cumulativeTotal",label:"Cumulative Total",type:"NUMBER"},{id:this.$nano.id(),name:"approval",label:"Approval",type:"SINGLE_SELECT"},{id:this.$nano.id(),name:"approvedDate",label:"Approved Date",type:"DATE"},{id:this.$nano.id(),name:"paymentDate",label:"Payment Date",type:"DATE"},{id:this.$nano.id(),name:"approvedBy",label:"Approved By",type:"LABEL"},{id:this.$nano.id(),name:"notes",label:"Notes",type:"SHORT_TEXT"},{id:this.$nano.id(),name:"goodWill",label:"Goodwill",type:"CHECKBOX"},{id:this.$nano.id(),name:"lppPlus",label:"LPP Plus",type:"CHECKBOX"},{id:this.$nano.id(),name:"preApprovedPmt",label:"Pre Approved Pmt",type:"CHECKBOX"},{id:this.$nano.id(),name:"psgCovered",label:"PSG Covered",type:"CHECKBOX"}],paymentTableValues:[],isPaymentFound:!1,approvalTypes:[{id:this.$nano.id(),label:"Approve",value:"Approved"},{id:this.$nano.id(),label:"Cancel",value:"Cancelled"}],cityList:[],provinceList:[],productList:[{id:this.$nano.id(),label:"Critical Illness",value:"Critical Illness"},{id:this.$nano.id(),label:"Disability",value:"Disability"},{id:this.$nano.id(),label:"Involuntary Unemployment",value:"Involuntary Unemployment"},{id:this.$nano.id(),label:"Life",value:"Life"},{id:this.$nano.id(),label:"Lifetime Milestone",value:"Lifetime Milestone"},{id:this.$nano.id(),label:"Sickness or Injury",value:"Sickness or Injury"},{id:this.$nano.id(),label:"Unpaid Family Leave",value:"Unpaid Family Leave"}],declineReasonList:[],declineReason:"",declineReasonModal:!1,loanInfoVerify:!1,claimInfoVerify:!1,languageList:[{id:this.$nano.id(),label:"EN",value:"EN"},{id:this.$nano.id(),label:"FR",value:"FR"}],isNameOfDeceasedEditable:!1,claimStatusColumns:[{id:this.$nano.id(),name:"ClaimStatus",label:"Claim Status"},{id:this.$nano.id(),name:"CSDate",label:"Date"},{id:this.$nano.id(),name:"CSNote",label:"Note"},{id:this.$nano.id(),name:"ClaimLetterSent",label:"Claim Letter Sent"},{id:this.$nano.id(),name:"AuthorizedBy",label:"Authorized By"},{id:this.$nano.id(),name:"MailingType",label:"Mailing Type"},{id:this.$nano.id(),name:"ModifiedBy",label:"Modified By"},{id:this.$nano.id(),name:"ModifiedDt",label:"Modified Date"},{id:this.$nano.id(),name:"LenderLetter",label:"Lender Letter"},{id:this.$nano.id(),name:"CreatedBy",label:"Created By"},{id:this.$nano.id(),name:"CreatedDt",label:"Created Date"},{id:this.$nano.id(),name:"InternalOnly",label:"Internal Only"},{id:this.$nano.id(),name:"InternalNotes",label:"Internal Notes"}],claimStatusValues:[],claimStatusValuesData:[],claimStatusTotalItems:0,claimStatusItemsPerPage:10,claimStatusCurrentPage:1,claimStatusRow:{},claimStatusModal:!1,claimStatusList:[],claimStatus:"",csDate:"",csNoteList:[],csNote:0,claimLetterSentList:[],claimLetterSent:0,mailingTypeList:[{id:this.$nano.id(),label:"Word Merged Letter",value:"WordmergedLetter"},{id:this.$nano.id(),label:"Email",value:"Email"}],mailingType:"",lenderLetterList:[],lenderLetter:"",internalOnly:!1,internalNotes:"",dailyDataStatusColumns:[{id:this.$nano.id(),name:"FileDate",label:"File Date"},{id:this.$nano.id(),name:"PolicyNumber",label:"Policy Number"},{id:this.$nano.id(),name:"Province",label:"Province"},{id:this.$nano.id(),name:"FirstName",label:"First Name"},{id:this.$nano.id(),name:"LastName",label:"Last Name"},{id:this.$nano.id(),name:"LoanKey",label:"Loan Key"},{id:this.$nano.id(),name:"PriorLoan",label:"Prior Loan"},{id:this.$nano.id(),name:"EffectiveDate",label:"Effective Date"},{id:this.$nano.id(),name:"CancellationDate",label:"Cancellation Date"},{id:this.$nano.id(),name:"LoanTerm",label:"Loan Term"},{id:this.$nano.id(),name:"PrincipalLent",label:"Principal Lent"},{id:this.$nano.id(),name:"Freq",label:"Freq"},{id:this.$nano.id(),name:"TotalObligation",label:"Total Obligation"},{id:this.$nano.id(),name:"FirstPayment",label:"First Payment"},{id:this.$nano.id(),name:"MinimumPrincipal",label:"Minimum Principal"},{id:this.$nano.id(),name:"MinimumInterest",label:"Minimum Interest"},{id:this.$nano.id(),name:"MinPIDue",label:"Min PI Due"},{id:this.$nano.id(),name:"LPPCharge",label:"LPP Charge"},{id:this.$nano.id(),name:"LPPCollected",label:"LPP Collected"},{id:this.$nano.id(),name:"LastPayment",label:"Last Payment"},{id:this.$nano.id(),name:"DefaultDate",label:"Default Date"},{id:this.$nano.id(),name:"ClearedPayments",label:"Cleared Payments"},{id:this.$nano.id(),name:"MissedPayments",label:"Missed Payments"},{id:this.$nano.id(),name:"PastDueAmount",label:"Past Due Amount"},{id:this.$nano.id(),name:"PastDueInterest",label:"Past Due Interest"},{id:this.$nano.id(),name:"PastDueInsuranceFee",label:"Past Due Insurance Fee"},{id:this.$nano.id(),name:"PastDuePrincipalAmount",label:"Past Due Principal Amount"},{id:this.$nano.id(),name:"PastDueNsfFee",label:"Past Due Nsf Fee"},{id:this.$nano.id(),name:"LoanBalance",label:"Loan Balance"},{id:this.$nano.id(),name:"PrincipalBalance",label:"Principal Balance"},{id:this.$nano.id(),name:"ExpectedMinPayment",label:"Expected Min Payment"}],dailyDataStatusValues:[],dailyDataStatusValuesData:[],dailyDataStatusTotalItems:0,dailyDataStatusItemsPerPage:10,dailyDataStatusCurrentPage:1,paymentHistoryColumns:[{id:this.$nano.id(),name:"StoreLoanNumber",label:"Store Loan Number"},{id:this.$nano.id(),name:"Premium",label:"Premium"},{id:this.$nano.id(),name:"PaymentDate",label:"Payment Date"},{id:this.$nano.id(),name:"TransactionType",label:"Transaction Type"},{id:this.$nano.id(),name:"Taxes",label:"Taxes"},{id:this.$nano.id(),name:"PaymentAmount",label:"Payment Amount"},{id:this.$nano.id(),name:"RemitDate",label:"Remit Date"}],paymentHistoryValues:[],paymentHistoryValuesData:[],paymentHistoryTotalItems:0,paymentHistoryItemsPerPage:10,paymentHistoryCurrentPage:1,clearPayment:!1,hasLifeType:!1,hasCIClaimsType:!1,hasLMUFLClaimsType:!1,hasOtherClaimsType:!1,isChangeBenefitClaimed:!1,hasSicknessClaimsChanged:!1}},computed:{isMaximized(){return"100%"===this.formWidth},fieldVerification(){let t=!1;if(this.dataValidationValues.length){let e=["First Name","Last Name","DOB","Address","City","Province","Postal Code","Phone No.","Email ID"];e.forEach(e=>{let i=this.dataValidationValues.find(t=>t.fieldName==e);i&&"Not Matched"!==i.status&&"Not Verified"!==i.status||(t=!0)})}else t=!0;return t},userInitials(){let t="";return this.$store.state.session.firstName&&(t+=this.$store.state.session.firstName[0].toUpperCase()),this.$store.state.session.lastName?t+=this.$store.state.session.lastName[0].toUpperCase():t+=this.$store.state.session.firstName[1],t},userNames(){let t;return this.$store.state.session.firstName&&(t=this.$store.state.session.firstName),this.$store.state.session.lastName&&(t+=" "+this.$store.state.session.lastName),t},_productList(){let t=this.formFields.find(t=>"Benefit Claimed"===t.label),e="";return t&&(e=this.formModel[t.value]),"Critical Illness"===e||"Sickness or Injury"===e?this.productList.filter(t=>"Critical Illness"===t.label||"Sickness or Injury"===t.label):this.productList},_documentCheckList(){let t=this.formFields.find(t=>"Benefit Claimed"===t.label),e="";return t&&(e=this.formModel[t.value]),this.documentCheckList.filter(t=>t.for.includes(e))},STLOCTypeFormula(){let t=this.formFields.find(t=>"Group Policy"===t.label),e="";t&&(e=this.formModel[t.value]);let i=e.split("-");return!(!i.length||("ST001"!==i[0]||"MM01"===i[1])&&"LOC001"!==i[0])},ENHTypeFormula(){let t=this.formFields.find(t=>"Group Policy"===t.label),e="";t&&(e=this.formModel[t.value]);let i=e.split("-");return!(!i.length||"ENH001"!==i[0])},mobileFinanceFormula(){let t=this.formFields.find(t=>"Group Policy"===t.label),e="";t&&(e=this.formModel[t.value]);let i=e.split("-");return!(!i.length||"CPL001M"!==i[0])},paymentValidationRules(){const t={required:!0,min_value:1};return this.STLOCTypeFormula&&!this.hasLMUFLClaimsType?t.max_value=4e3:this.STLOCTypeFormula&&this.hasLMUFLClaimsType?t.max_value=2e3:this.ENHTypeFormula&&this.hasOtherClaimsType&&"Monthly"===this.getModel("Payment Frequency")?t.max_value=1e3:this.mobileFinanceFormula&&this.hasOtherClaimsType&&"Monthly"===this.getModel("Payment Frequency")?t.max_value=1250:(this.ENHTypeFormula||this.mobileFinanceFormula)&&(t.max_value=1e3),t},moneyMartFormula(){let t=this.formFields.find(t=>"Group Policy"===t.label),e="";t&&(e=this.formModel[t.value]);let i=e.split("-");return!(!i.length||"ST001"!==i[0]||"MM01"!==i[1])}},watch:{saveAction:{immediate:!0,async handler(){if(this.saveAction){if("Save"===this.saveAction||"Force Close"===this.saveAction)return void this.$emit("update:workflowFormModel",this.formModel);if("psyCrYXtKfcs-EJmrYIhv"===this.selectedProcess.activityId&&"Recommend to Approve"==this.saveAction){if(this.fieldVerification||!this.loanInfoVerify||!this.claimInfoVerify)return this.$alert.warning("Verification Required"),void this.$emit("update:saveAction","");this.updateModel(this.$day.newDate(),"Processing Date"),this.updateModel("Recommend to Approve","Claim Decision")}else if("psyCrYXtKfcs-EJmrYIhv"===this.selectedProcess.activityId&&"Recommend to Decline"==this.saveAction){if(!this.getModel("Decline Reason"))return this.declineReasonModal=!0,void this.$emit("update:saveAction","");this.updateModel(this.$day.newDate(),"Processing Date"),this.updateModel("Recommend to Decline","Claim Decision")}else if("k4-junYNP5tico7rUVJY_"===this.selectedProcess.activityId||"pyEp-anz7DIWhvoQLf6oC"===this.selectedProcess.activityId){let t=this.paymentTableValues.filter(t=>t.approval);if(console.log(t),!t.length)return this.$alert.warning("Should be approve payment"),void this.$emit("update:saveAction","")}this.$emit("update:workflowFormModel",this.formModel)}}},dataValidationValues:{deep:!0,immediate:!0,handler(){if(this.loanInfoVerify=!1,this.claimInfoVerify=!1,this.dataValidationValues.length){let t=this.dataValidationValues.find(t=>"Loan Info"===t.fieldName);t&&(this.loanInfoVerify="Verified"===t.status);let e=this.dataValidationValues.find(t=>"Claim Info"===t.fieldName);e&&(this.claimInfoVerify="Verified"===e.status)}}},selectedProcess:{immediate:!0,deep:!0,handler(){this.selectedProcess.processId&&(this.isChangeBenefitClaimed=!1,this.clearPayment=!1,this.getPaymentTable(),this.getClaimStatus(),this.getDailyDataStatus(),this.getPaymentHistory(),this.checkDocument())}},formCheckList:{immediate:!0,deep:!0,handler(){if(this.formCheckList){let t=location.origin;("https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t||"http://localhost:8080"===t||"https://trial.ezofis.com"===t&&12===this.$store.state.session.tenantId)&&this.checkList.length&&(this.documentValidation(),this.$emit("update:formCheckList",!1))}}},formModel:{immediate:!0,handler(){this.formModel&&(this.cloneFormModel=Object(C["a"])(this.formModel),this.getCalculateValidation(this.getModel("Benefit Claimed")))}},moneyMartFormula:{immediate:!0,handler(){this.moneyMartFormula?this.paymentTableColumns.forEach(t=>{"Claim Amount (20% Increased)"!==t.label||(t.label="Benefit Enhancement")}):this.paymentTableColumns.forEach(t=>{"Benefit Enhancement"!==t.label||(t.label="Claim Amount (20% Increased)")})}},hasSicknessClaimsChanged:{handler(){if(this.isPaymentFound&&this.hasSicknessClaimsChanged){if(this.paymentTableValues.length){let t=this.paymentTableValues[0];this.paymentTableValues=[],t&&this.paymentTableValues.push(t)}let t={paymentId:0,paymentNumber:this.paymentTableValues.length+1,baseAmount:"",claimAmount:0,cumulativeTotal:0,approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType,delete:!0};this.paymentTableValues.push(t)}else if(!this.isPaymentFound&&this.hasSicknessClaimsChanged){let t={paymentId:0,paymentNumber:1,baseAmount:"",claimAmount:0,cumulativeTotal:0,approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType,delete:!0};if(this.paymentTableValues.length){let e=this.paymentTableValues[0];this.paymentTableValues=[],this.paymentTableValues.push(e),this.paymentTableValues.push(t)}else this.paymentTableValues=[],this.paymentTableValues.push(t)}}},hasCIClaimsType:{immediate:!0,handler(){this.hasCIClaimsType&&(this.isPaymentFound||this.getLifeTypePaymentTable())}},hasLifeType:{immediate:!0,handler(){this.hasLifeType&&(this.isPaymentFound||this.getLifeTypePaymentTable())}}},created(){this.getProvinceList(),this.getDeclineReasonList(),this.getClaimStatusMaster(6)},mounted(){this.$watch(t=>[t.claimStatusCurrentPage,t.claimStatusItemsPerPage],()=>this.getClaimStatus(),{deep:!0,immediate:!0}),this.$watch(t=>[t.dailyDataStatusCurrentPage,t.dailyDataStatusItemsPerPage],()=>this.getDailyDataStatus(),{deep:!0,immediate:!0}),this.$watch(t=>[t.paymentHistoryCurrentPage,t.paymentHistoryItemsPerPage],()=>this.getPaymentHistory(),{deep:!0,immediate:!0})},methods:{getCalculateValidation(t){"Life"===t?(this.hasLifeType=!0,this.hasCIClaimsType=!1,this.hasLMUFLClaimsType=!1,this.hasOtherClaimsType=!1):"Critical Illness"===t?(this.hasCIClaimsType=!0,this.hasLifeType=!1,this.hasLMUFLClaimsType=!1,this.hasOtherClaimsType=!1):"Lifetime Milestone"===t||"Unpaid Family Leave"===t?(this.hasLMUFLClaimsType=!0,this.hasCIClaimsType=!1,this.hasLifeType=!1,this.hasOtherClaimsType=!1):(this.hasOtherClaimsType=!0,this.hasLifeType=!1,this.hasCIClaimsType=!1,this.hasLMUFLClaimsType=!1)},getModel(t){let e=this.formFields.find(e=>e.label===t);if(e){if("Benefit Claimed"===t)"Critical Illness"===this.formModel[e.value]||"Sickness or Injury"===this.formModel[e.value]?this.isChangeBenefitClaimed=!0:this.isChangeBenefitClaimed=!1;else if("Current Age"===t){let t=this.formFields.find(t=>"DOB"===t.label);t&&this.formModel[t.value]&&(this.formModel[e.value]=this.calculateAge(this.formModel[t.value]))}return"MULTIPLE_CHOICE"===e.type?this.formModel[e.value]?this.formModel[e.value]:[]:"DATE"===e.type?this.$day.parseDate(this.formModel[e.value]):this.formModel[e.value]}},updateModel(t,e){"Sickness or Injury"===this.getModel(e)?"Critical Illness"===t&&(this.hasSicknessClaimsChanged=!0):"Critical Illness"===this.getModel(e)&&"Sickness or Injury"===t&&(this.isPaymentFound=!1,this.hasSicknessClaimsChanged=!1,this.paymentTableValues=[]);let i=this.formFields.find(t=>t.label===e);if(i&&(this.formModel[i.value]=t),"Claimant Info"===e)"Next of Kin"===t?this.isNameOfDeceasedEditable=!0:(this.isNameOfDeceasedEditable=!1,this.getContractData(t));else if("DOB"===e){let e=this.formFields.find(t=>"Current Age"===t.label);e&&(this.formModel[e.value]=this.calculateAge(t))}else if("Loan Payment Amount"===e)this.totalPayment=t,this.benefitType&&this.paymentCalculation();else if("Claim Date"===e){let e=this.formFields.find(t=>"Age at Doc"===t.label),i=this.formFields.find(t=>"Claim Date"===t.label);e&&this.formModel[i.value]&&(this.formModel[e.value]=this.calculateAgeAtDoc(t,this.$day.parseDate(this.formModel[i.value])))}else"Benefit Claimed"===e&&(this.getCalculateValidation(t),this.checkDocument())},updateLoanPaymentAmount(t){this.updateModel(t,"Loan Payment Amount")},checkHighlight(t){if(this.dataValidationValues.length){var e;let i=null===(e=this.dataValidationValues.find(e=>e.fieldName==t))||void 0===e?void 0:e.status;if("Matched"===i||"Verified"===i)return"green";if(""===i||"Not Verified"===i||"Partially Matched"===i)return"orange";if("Not Matched"===i)return"red"}return""},calculateAge(t){if(!t)return;const e=new Date;if(new Date(t)>e)return"";const i=e-new Date(t),s=Math.floor(i/864e5);return Math.floor(s/365.25)},calculateAgeAtDoc(t,e){if(!t)return;if(new Date(t)>new Date(e))return"";const i=new Date(e)-new Date(t),s=Math.floor(i/864e5);return Math.floor(s/365.25)},checkDocument(){let t=this.checkList.filter(t=>(t.conditions&&t.conditions.length?(t.required=!1,t.conditions.forEach(e=>{var i;if("ANY"===t.groupLogic&&t.required)return;let s=(null===(i=this.formFields.find(t=>t.value===e.name))||void 0===i?void 0:i.type)||"",a=e.value,o=this.formModel[e.name];switch("NUMBER"===s&&(a=Number(a),o=Number(o)),e.logic){case"IS_EQUALS_TO":t.required=o===a;break;case"IS_NOT_EQUALS_TO":t.required=o!==a;break;case"CONTAINS":o.indexOf(a)>-1?t.required=!0:t.required=!1;break;case"IS_GREATER_THAN":t.required=o>a;break;case"IS_GREATER_THAN_OR_EQUALS_TO":t.required=o>=a;break;case"IS_LESSER_THAN":t.required=o<a;break;case"IS_LESSER_THAN_OR_EQUALS_TO":t.required=o<=a;break}}),t.required||t.visible?t.show=!0:t.show=!1):t.show=!0,t));this.$emit("update:checkList",t)},documentValidation(){let t=this.formFields.find(t=>"Required Documents"===t.label);if(t){"string"===typeof this.formModel[t.value]&&(this.formModel[t.value]=[]);let e=this.checkList.filter(t=>t.attach);e.length&&e.forEach(e=>{-1===this.formModel[t.value].indexOf(e.name)&&this.formModel[t.value].push(e.name)}),this.autoSave("Required Documents")}},autoSave(t){let e=location.origin;if(("https://ag-appsvc01.azurewebsites.net"===e||"https://ag-appsvc05.azurewebsites.net"===e||"http://localhost:80801"===e)&&!this.saveOnly){let e=this.formFields.find(e=>e.label===t);if(e){let t={[e.value]:this.formModel[e.value]};this.$emit("update:autoSaveModel",t)}console.log(t),this.formModel[e.value]!=this.cloneFormModel[e.value]&&(this.$emit("update:saveOnly",!0),this.$emit("update:saveAction","Save"),this.cloneFormModel=Object(C["a"])(this.formModel))}},async updateDeclineReason(){const t=await this.$refs.declineModal.validate();t&&(this.declineReasonModal=!1,this.updateModel(this.declineReason,"Decline Reason"),this.updateModel("Recommend to Decline","Claim Decision"),this.$emit("update:workflowFormModel",this.formModel),this.$emit("update:saveAction","Recommend to Decline"))},async getCityList(){this.cityList=[];let t=this.formFields.find(t=>"City"===t.label);if(t)try{const e=await y["b"].post(`/form/${this.formId}/uniqueColumnValues`,JSON.stringify({column:t.value,keyword:"",rowFrom:0,rowCount:0})),{status:i,data:s}=e;if(200!==i)throw e;const a=JSON.parse(s);a.length&&(this.cityList=a.map(t=>({id:this.$nano.id(),label:t,value:t})));let o=this.cityList.find(e=>e.label===this.formModel[t.value]);o||this.cityList.push({id:this.$nano.id(),label:this.formModel[t.value],value:this.formModel[t.value]})}catch(e){console.error(e),this.$alert.error("Error fetching options")}},async getProvinceList(){this.provinceList=[];let t=this.formFields.find(t=>"Province"===t.label);if(t)try{const e=await y["b"].post(`/form/${this.formId}/uniqueColumnValues`,JSON.stringify({column:t.value,keyword:"",rowFrom:0,rowCount:0})),{status:i,data:s}=e;if(200!==i)throw e;const a=JSON.parse(s);a.length&&(this.provinceList=a.map(t=>({id:this.$nano.id(),label:t,value:t})));let o=this.provinceList.find(e=>e.label===this.formModel[t.value]);o||this.provinceList.push({id:this.$nano.id(),label:this.formModel[t.value],value:this.formModel[t.value]})}catch(e){console.error(e),this.$alert.error("Error fetching options")}},async getDeclineReasonList(){this.declineReasonList=[];const{error:t,payload:e}=await b["g"].getFormEntries(5,{mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[],itemsPerPage:0,currentPage:0});if(t)return void this.$alert.error(t);const{data:i}=e;this.declineReasonList=i[0].value.map(t=>({id:t.itemid,label:`${t["_siZd2ju1yrpaAcCiiJ8X"]} - ${t["xvC46pmC5uL77kIpjJ2p-"]}`,value:`${t["_siZd2ju1yrpaAcCiiJ8X"]} - ${t["xvC46pmC5uL77kIpjJ2p-"]}`}))},async getDataValidation(){const{error:t,payload:e}=await b["d"].armgroupMLValidation({filterBy:[{filters:[{criteria:"processId",condition:"IS_EQUALS_TO",value:this.selectedProcess.processId}],groupCondition:""}],mode:"BROWSE"});t?this.$alert.error(t):e.length?this.$emit("updateDataValidationValues",e):this.$emit("updateDataValidationValues",[])},async confirmCustomerInfo(){let t=["First Name","Last Name","DOB","Address","City","Province","Postal Code","Phone No.","Email ID"],e=[],i=[];if(t.forEach(t=>{let s=this.dataValidationValues.find(e=>e.fieldName==t);s?(s.formValue=this.getModel(t),s.status="Not Matched"===s.status||"Not Verified"===s.status?"Verified":s.status,i.push(s)):e.push({processId:this.selectedProcess.processId,fieldName:t,formValue:this.getModel(t),status:"Verified"})}),i.length){const{error:t}=await b["d"].updateArmgroupMLValidation(i);if(t)return void this.$alert.error(t)}if(e.length){const{error:t}=await b["d"].insertArmgroupMLValidation(e);if(t)return void this.$alert.error(t)}this.getDataValidation()},async unConfirmCustomerInfo(){let t=["First Name","Last Name","DOB","Address","City","Province","Postal Code","Phone No.","Email ID"];if(this.dataValidationValues.length){t.forEach(t=>{let e=this.dataValidationValues.find(e=>e.fieldName==t);e&&(e.formValue=this.getModel(t),e.status="Verified"===e.status?"Not Verified":e.status)});const{error:e}=await b["d"].updateArmgroupMLValidation(this.dataValidationValues);if(e)return void this.$alert.error(e)}},async confirmLoanInfo(){this.loanInfoVerify=!0;let t=[],e=this.dataValidationValues.find(t=>"Loan Info"==t.fieldName);if(e?(e.formValue="Checked",e.status="Not Matched"===e.status||"Not Verified"===e.status?"Verified":e.status,t.push(e)):t=[{processId:this.selectedProcess.processId,fieldName:"Loan Info",formValue:"Checked",status:"Verified"}],t[0].id){const{error:e}=await b["d"].updateArmgroupMLValidation(t);if(e)return void this.$alert.error(e)}else{const{error:e}=await b["d"].insertArmgroupMLValidation(t);if(e)return void this.$alert.error(e)}this.getDataValidation()},async unConfirmLoanInfo(){this.loanInfoVerify=!1;let t=[],e=this.dataValidationValues.find(t=>"Loan Info"==t.fieldName);e&&(e.formValue="",e.status="Not Verified",t.push(e));const{error:i}=await b["d"].updateArmgroupMLValidation(t);i&&this.$alert.error(i)},async confirmClaimInfo(){this.claimInfoVerify=!0;let t=[],e=this.dataValidationValues.find(t=>"Claim Info"==t.fieldName);if(e?(e.formValue="Checked",e.status="Not Matched"===e.status||"Not Verified"===e.status?"Verified":e.status,t.push(e)):t=[{processId:this.selectedProcess.processId,fieldName:"Claim Info",formValue:"Checked",status:"Verified"}],t[0].id){const{error:e}=await b["d"].updateArmgroupMLValidation(t);if(e)return void this.$alert.error(e)}else{const{error:e}=await b["d"].insertArmgroupMLValidation(t);if(e)return void this.$alert.error(e)}this.getDataValidation()},async unConfirmClaimInfo(){this.claimInfoVerify=!1;let t=[],e=this.dataValidationValues.find(t=>"Claim Info"==t.fieldName);e&&(e.formValue="",e.status="Not Verified",t.push(e));const{error:i}=await b["d"].updateArmgroupMLValidation(t);i&&this.$alert.error(i)},export_Data(){if(this.paymentTableValues.length){let t=[];t=this.paymentTableValues.map(t=>({"Payment Number":t.paymentNumber,"Base Amount":t.baseAmount,"Claim Amount":t.claimAmount,"Cumulative Total":t.cumulativeTotal,Approval:t.approval,"Approved Date":t.approvedDate,"Payment Date":t.paymentDate,"Payment Frequency":t.benefitType})),Object(v["a"])(t)}},paymentApprove(){if(this.numberOfApprovePayment>0)if(this.numberOfApprovePayment>this.paymentTableValues.length)this.$alert.warning("Approved payment should be less than "+this.paymentTableValues.length);else if(this.isPaymentFound){let t=this.paymentTableValues.filter(t=>"Approved"!==t.approval);t.length&&t.forEach((t,e)=>{if(e<this.numberOfApprovePayment){t.approval="Approved";let i=0;t.approvedDate=this.$day.addDate(this.$day.newDate(),e*i),t.paymentDate=this.$day.addDate(this.$day.newDate(),e*i+1),t.approvedBy=this.userInitials}else t.approval="",t.approvedDate="",t.paymentDate="",t.approvedBy=""})}else this.paymentTableValues.forEach((t,e)=>{if(e<this.numberOfApprovePayment){t.approval="Approved";let i=0;t.approvedDate=this.$day.addDate(this.$day.newDate(),e*i),t.paymentDate=this.$day.addDate(this.$day.newDate(),e*i+1),t.approvedBy=this.userInitials}else t.approval="",t.approvedDate="",t.paymentDate="",t.approvedBy=""});else this.$alert.warning("Specify the valid number")},clearPaymentApprove(){this.numberOfApprovePayment=0,this.paymentTableValues.forEach(t=>{t.approval="",t.approvedDate="",t.paymentDate="",t.approvedBy=""})},checkApprovalEdit(t){return!!t.approvedDate&&this.$day.newDate()!==t.approvedDate},updateApprovalDate(t){if("Approved"===this.paymentTableValues[t].approval){this.paymentTableValues[t].approvedDate=this.$day.newDate();let e=new Date;e.setDate(e.getDate()+1);let i=e.getMonth()+1;i<10&&(i="0"+i);let s=e.getDate();s<10&&(s="0"+s),this.paymentTableValues[t].paymentDate=`${e.getFullYear()}-${i}-${s}`,this.paymentTableValues[t].approvedBy=this.userInitials}else this.paymentTableValues[t].approvedDate="",this.paymentTableValues[t].paymentDate="",this.paymentTableValues[t].approvedBy=""},addLumpsumRow(){if(!this.paymentTableValues[this.paymentTableValues.length-1].lumpsumRow){let t=0;4e3===Number(this.paymentTableValues[this.paymentTableValues.length-1].cumulativeTotal)&&(t=4e3.toFixed(2));const e={paymentId:0,paymentNumber:this.paymentTableValues.length+1,baseAmount:"",claimAmount:0,cumulativeTotal:t,approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType,lumpsumRow:!0,delete:!0};this.paymentTableValues.push(e)}},addPaymentRow(){let t=0;if(this.paymentTableValues.length&&(t=Number(this.paymentTableValues[this.paymentTableValues.length-1].cumulativeTotal)),4e3!==t||this.hasCIClaimsType)if(15e3===t&&this.hasCIClaimsType)this.$alert.warning("Already maximum amount 15000 reached");else{const t={paymentId:0,paymentNumber:this.paymentTableValues.length+1,baseAmount:"",claimAmount:0,cumulativeTotal:0,approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType,delete:!0};this.paymentTableValues.push(t)}else this.$alert.warning("Already maximum amount 4000 reached")},removePaymentRow(t){this.paymentTableValues.splice(t,1)},calcOtherColumns(t){let e=0,i=this.paymentTableValues[t].baseAmount;if(this.hasOtherClaimsType){if(this.paymentTableValues[t].lumpsumRow){if(i>2e3)return this.paymentTableValues[t].baseAmount=0,this.paymentTableValues[t].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Lumpsum Amount shouldn't exceed $2000");if(this.paymentTableValues[t].claimAmount=(0).toFixed(2),e=Number(this.paymentTableValues[this.paymentTableValues.length-2].cumulativeTotal),4e3===e&&this.paymentTableValues[t].baseAmount>0)return this.paymentTableValues[t].baseAmount=0,this.paymentTableValues[t].cumulativeTotal=4e3.toFixed(2),void this.$alert.warning("Cumulative total shouldn't exceed $4000");if(e+=i,e>4e3)return this.paymentTableValues[t].baseAmount=0,this.paymentTableValues[t].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Cumulative total shouldn't exceed $4000")}else{let s=i+.2*i;if(this.paymentTableValues[t].claimAmount=s.toFixed(2),e=s+Number(this.paymentTableValues[t-1].cumulativeTotal),this.STLOCTypeFormula&&e>4e3)return this.paymentTableValues[t].baseAmount=0,this.paymentTableValues[t].claimAmount=0,this.paymentTableValues[t].cumulativeTotal=(0).toFixed(2),e=0,void this.$alert.warning("Cumulative total shouldn't exceed $4000")}e>0&&i&&(this.paymentTableValues[t].cumulativeTotal=e.toFixed(2))}else if(this.hasLifeType){if(this.ENHTypeFormula){if(i>5e4)return this.paymentTableValues[t].baseAmount=0,this.paymentTableValues[t].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Base Amount shouldn't exceed $50000")}else if(i>15e3)return this.paymentTableValues[t].baseAmount=0,this.paymentTableValues[t].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Base Amount shouldn't exceed $15000");this.paymentTableValues[t].cumulativeTotal=this.paymentTableValues[t].baseAmount.toFixed(2)}else if(this.hasCIClaimsType){let e=0;if(t&&(e=Number(this.paymentTableValues[t-1].cumulativeTotal)+i),i<=15e3&&t)return void(this.paymentTableValues[t].cumulativeTotal=this.paymentTableValues[t].baseAmount.toFixed(2));if(i>15e3&&!t)return this.paymentTableValues[t].baseAmount=0,this.paymentTableValues[t].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Base Amount shouldn't exceed $15000");if(e>15e3)return this.paymentTableValues[t].baseAmount=0,this.paymentTableValues[t].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Base Amount shouldn't exceed $15000");this.paymentTableValues[t].cumulativeTotal=this.paymentTableValues[t].baseAmount.toFixed(2)}},calcOtherColumns1(t){let e=0,i=this.paymentTableValues[t].baseAmount;if(this.paymentTableValues[t].lumpsumRow){if(i>2e3)return this.paymentTableValues[t].baseAmount=0,this.paymentTableValues[t].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Lumpsum Amount shouldn't exceed $2000");if(this.paymentTableValues[t].claimAmount=(0).toFixed(2),e=Number(this.paymentTableValues[this.paymentTableValues.length-2].cumulativeTotal),4e3===e&&this.paymentTableValues[t].baseAmount>0)return this.paymentTableValues[t].baseAmount=0,this.paymentTableValues[t].cumulativeTotal=4e3.toFixed(2),void this.$alert.warning("Cumulative total shouldn't exceed $4000");if(e+=i,e>4e3)return this.paymentTableValues[t].baseAmount=0,this.paymentTableValues[t].cumulativeTotal=(0).toFixed(2),void this.$alert.warning("Cumulative total shouldn't exceed $4000")}else{let s=i+.2*i;this.paymentTableValues[t].claimAmount=s.toFixed(2),this.paymentTableValues.forEach(t=>{e+=Number(t.claimAmount)})}this.paymentTableValues[t].cumulativeTotal=e.toFixed(2)},claimStatusSearchRow(t){this.claimStatusValues=t?this.claimStatusValuesData.filter(e=>{for(let i in e){let s=this.claimStatusColumns.findIndex(t=>t.name===i);if(s>=0&&e[i]&&String(e[i]).toLowerCase().includes(t.toLowerCase()))return e}}):this.claimStatusValuesData},loadAllClaimStatus(){this.claimStatusItemsPerPage=this.claimStatusTotalItems,1===this.claimStatusCurrentPage?this.getClaimStatus():this.claimStatusCurrentPage=1},dailyDataStatusSearchRow(t){this.dailyDataStatusValues=t?this.dailyDataStatusValuesData.filter(e=>{for(let i in e){let s=this.dailyDataStatusColumns.findIndex(t=>t.name===i);if(s>=0&&e[i]&&String(e[i]).toLowerCase().includes(t.toLowerCase()))return e}}):this.dailyDataStatusValuesData},loadAllDailyDataStatus(){this.dailyDataStatusItemsPerPage=this.dailyDataStatusTotalItems,1===this.dailyDataStatusCurrentPage?this.getDailyDataStatus():this.dailyDataStatusCurrentPage=1},paymentHistorySearchRow(t){this.paymentHistoryValues=t?this.paymentHistoryValuesData.filter(e=>{for(let i in e){let s=this.paymentHistoryColumns.findIndex(t=>t.name===i);if(s>=0&&e[i]&&String(e[i]).toLowerCase().includes(t.toLowerCase()))return e}}):this.payymentHistoryValuesData},loadAllPaymentHistory(){this.paymentHistoryItemsPerPage=this.paymentHistoryTotalItems,1===this.paymentHistoryCurrentPage?this.getPaymentHistory():this.payemntHistoryCurrentPage=1},addClaimStatus(){this.claimStatusRow={},this.claimStatus="",this.csDate="",this.csNote=0,this.claimLetterSent=0,this.mailingType="",this.lenderLetter="",this.internalOnly=!1,this.internalNotes="",this.claimStatusModal=!0},editClaimStatus(t){this.claimStatusRow=this.claimStatusValues.find(e=>e.ClaimStatusID===t.ClaimStatusID),this.claimStatusRow&&(this.claimStatus=this.claimStatusRow.ClaimStatus,this.csNote=this.claimStatusRow.CSNote,this.claimLetterSent=this.claimStatusRow.ClaimLetterSent,this.mailingType=this.claimStatusRow.MailingType,this.lenderLetter=this.claimStatusRow.lenderLetter,this.internalOnly=Boolean(this.claimStatusRow.InternalOnly),this.internalNotes=this.claimStatusRow.InternalNotes),this.claimStatusModal=!0},async getClaimStatusMaster(t){this.claimStatusList=[],this.$store.commit("showLoadingBar");const{error:e,payload:i}=await b["g"].getFormEntries(t,{mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[],itemsPerPage:0,currentPage:0});if(this.$store.commit("hideLoadingBar"),e)return void this.$alert.error(e);const{data:s}=i;this.claimStatusList=s[0].value.map(t=>({id:t.itemid,label:t["dKY2zhKPS4-hQy1I6yVSV"],value:t["dKY2zhKPS4-hQy1I6yVSV"]}))},async paymentCalculation(){this.numberOfApprovePayment=0;const t=await this.$refs.form.validate();if(!t)return;this.isPaymentFound&&(this.clearPayment=!0),this.paymentTableValues=[];let e=0,i=0;if(this.benefitType)switch(this.benefitType){case"Monthly":i=6;break;case"BiWeekly":case"SemiMonthly":i=12;break;case"Weekly":i=24;break}for(let s=1;s<=i;s++){if(this.hasLMUFLClaimsType&&s>3)return;let t=this.totalPayment,i=0,a=0;if(this.STLOCTypeFormula?(this.hasOtherClaimsType?a=4e3:this.hasLMUFLClaimsType&&(a=2e3),i=t+.2*t):this.ENHTypeFormula?this.hasOtherClaimsType?a=6e3:this.hasLMUFLClaimsType&&(a=2e3):this.mobileFinanceFormula?this.hasOtherClaimsType?a=7500:this.hasLMUFLClaimsType&&(a=2e3):this.moneyMartFormula&&this.hasLMUFLClaimsType&&(a=2e3),!this.moneyMartFormula&&e+i>a)return void this.paymentTableValues.push({paymentId:0,paymentNumber:s,baseAmount:(a-e).toFixed(2),claimAmount:(0).toFixed(2),cumulativeTotal:a.toFixed(2),approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType});if(this.STLOCTypeFormula)e+=i;else if(this.ENHTypeFormula)e+=t;else if(this.mobileFinanceFormula)e+=t;else if(this.moneyMartFormula){let s=this.getModel("Principal Balance At Doc"),a=0,o=0;if(this.hasOtherClaimsType&&s)if("BiWeekly"===this.benefitType||"SemiMonthly"===this.benefitType){let t=50*s/100;a=t.toFixed(2)}else if("Weekly"===this.benefitType){let t=25*s/100;a=t.toFixed(2)}else"Monthly"===this.benefitType&&(a=s);o=a/24,i=o,e+=o+t}if(this.paymentTableValues.push({paymentId:0,paymentNumber:s,baseAmount:t.toFixed(2),claimAmount:i.toFixed(2),cumulativeTotal:e.toFixed(2),approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType}),e===a)return}},async paymentCalculation1(){this.numberOfApprovePayment=0;const t=await this.$refs.form.validate();if(!t)return;this.isPaymentFound&&(this.clearPayment=!0),this.paymentTableValues=[];let e=0,i=0;if(this.benefitType)switch(this.benefitType){case"Monthly":i=6;break;case"BiWeekly":case"SemiMonthly":i=12;break;case"Weekly":i=24;break}for(let s=1;s<=i;s++){let t=this.totalPayment,i=t+.2*t;if(e+i>4e3)return void this.paymentTableValues.push({paymentId:0,paymentNumber:s,baseAmount:(4e3-e).toFixed(2),claimAmount:(0).toFixed(2),cumulativeTotal:4e3.toFixed(2),approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType});e+=i,this.paymentTableValues.push({paymentId:0,paymentNumber:s,baseAmount:t.toFixed(2),claimAmount:i.toFixed(2),cumulativeTotal:e.toFixed(2),approval:"",approvedDate:"",paymentDate:"",approvedBy:"",notes:"",goodWill:!1,lppPlus:!1,preApprovedPmt:!1,psgCovered:!1,benefitType:this.benefitType})}},async getPaymentTable1(){this.isPaymentFound=!1;const{error:t,payload:e}=await b["d"].getPaymentTable({filterBy:[{filters:[{criteria:"processId",condition:"IS_EQUALS_TO",value:this.selectedProcess.processId}],groupCondition:""}],mode:"BROWSE"});t?this.$alert.error(t):e.length&&(this.paymentTableValues=e,this.isPaymentFound=!0)},async getPaymentTable(){this.isPaymentFound=!1,this.paymentTableValues=[];let t=this.formFields.find(t=>"Claim No."===t.label),e=this.formFields.find(t=>"Lender Name"===t.label),i={};this.isPaymentFound||(this.hasLifeType||this.hasCIClaimsType)&&this.getLifeTypePaymentTable(),i["CPClaimNumber"]=this.formModel[t.value];let s={hublinkId:8,payloadMapping:JSON.stringify(i),lenderName:this.formModel[e.value],itemsPerPage:50,currentPage:1};const{payload:a,error:o}=await b["d"].getDataSync(s);if(o)return void this.$alert.error(o);const{data:r,meta:n}=a;n.totalItems&&r.length&&r[0].value.length&&(this.paymentTableValues=[],r[0].value.forEach(t=>{this.paymentTableValues.push({paymentId:t.ClaimPaymentID,paymentNumber:t.ClaimPaymentNumber,baseAmount:Number(t.ClaimPaymentAmount).toFixed(2),claimAmount:Number(t.PrincipalPmt).toFixed(2),cumulativeTotal:Number(t.CumulativeTotal).toFixed(2),approval:t.Status,approvedDate:this.$day.parseDate(t.StatusDate),paymentDate:this.$day.parseDate(t.CPaymentDate),approvedBy:t.ApprovedBy,notes:t.CPNotes,goodWill:"True"===t.Goodwill,lppPlus:"True"===t.LPPPlus,preApprovedPmt:"True"===t.PreApprovedPmt,psgCovered:"True"===t.PSGCovered})}),this.isPaymentFound=!0)},async updatePaymentTable1(){this.paymentTableValues.forEach(t=>{t.baseAmount=Number(t.baseAmount).toFixed(2)});let t={workflowId:this.selectedProcess.id,processId:this.selectedProcess.processId,paymentTableList:this.paymentTableValues};if(this.isPaymentFound){const{error:e}=await b["d"].updatePaymentTable(this.selectedProcess.processId,t);if(e)return void this.$alert.error(e);this.$alert.success("Payment entry updated")}else{const{error:e}=await b["d"].savePaymentTable(t);if(e)return void this.$alert.error(e);this.$alert.success("Payment entry added")}this.getPaymentTable()},async updatePaymentTable(){let t=this.formFields.find(t=>"Lender Name"===t.label),e=this.formFields.find(t=>"Claim No."===t.label);this.paymentTableValues.forEach(t=>{t.baseAmount=Number(t.baseAmount).toFixed(2)});let i=[];this.paymentTableValues.forEach(t=>{let s={};s=t.paymentId?{modifiedBy:this.userNames,modifiedDt:this.$day.newDateTime()}:{createdBy:this.userNames,createdDt:this.$day.newDateTime()},i.push({claimPaymentID:t.paymentId,cPClaimNumber:this.formModel[e.value],paymentNumber:t.paymentNumber,paymentBaseAmount:t.baseAmount,claimAmount:t.claimAmount,cumulativeTotal:t.cumulativeTotal,approval:t.approval,paymentDate:t.paymentDate,approvedBy:0,cpNotes:t.notes,goodwill:t.goodWill,lppplus:t.lppPlus,preApprovedPMT:t.preApprovedPmt,psgCovered:t.psgCovered,approvalDate:t.approvedDate,proRated:!1,...s})});let s={lenderName:this.formModel[t.value],claimNumber:this.clearPayment?this.formModel[e.value]:"",paymentList:i};const{error:a}=await b["d"].savePaymentTable(s);a?this.$alert.error(a):(this.$alert.success("Payment entry updated"),this.numberOfApprovePayment=0,this.getPaymentTable())},async getContractData(t){let e=this.formFields.find(t=>"Loan No."===t.label),i=this.formFields.find(t=>"Lender Name"===t.label),s={};if(s["StoreLoanNumber"]=this.formModel[e.value],"Borrower"===t){let t={hublinkId:4,payloadMapping:JSON.stringify(s),lenderName:this.formModel[i.value],itemsPerPage:500,currentPage:1};const{payload:e,error:a}=await b["d"].getDataSync(t);if(this.$store.commit("hideLoadingBar"),a)return void("Connection Interrupted"===a?this.$alert.warning(a):this.$alert.error(a));const{data:o,meta:r}=e;r.totalItems&&o.length&&o[0].value.length&&o[0].value.forEach(t=>{this.updateModel(t.FirstName,"First Name"),this.updateModel(t.LastName,"Last Name"),this.updateModel(t.DOB,"DOB"),this.updateModel(t.Address1,"Address"),this.updateModel(t.City,"City"),this.updateModel(t.Province,"Province"),this.updateModel(t.PostalCode,"Postal Code"),this.updateModel(t.Phone,"Phone No.")})}else if("Co-Borrower"===t){let t={hublinkId:3,payloadMapping:JSON.stringify(s),lenderName:this.formModel[i.value],itemsPerPage:500,currentPage:1};const{payload:e,error:a}=await b["d"].getDataSync(t);if(this.$store.commit("hideLoadingBar"),a)return void("Connection Interrupted"===a?this.$alert.warning(a):this.$alert.error(a));const{data:o,meta:r}=e;r.totalItems&&o.length&&o[0].value.length&&o[0].value.forEach(t=>{this.updateModel(t.CoFirstName,"First Name"),this.updateModel(t.CoLastName,"Last Name"),this.updateModel(t.CoDOB,"DOB"),this.updateModel(t.CoAddress1,"Address"),this.updateModel(t.CoCity,"City"),this.updateModel(t.CoProvince,"Province"),this.updateModel(t.CoPostalCode,"Postal Code"),this.updateModel(t.CoPhone,"Phone No.")})}},async getClaimStatus(){this.claimStatusValues=[],this.claimStatusValuesData=[];let t=this.formFields.find(t=>"Claim No."===t.label),e=this.formFields.find(t=>"Lender Name"===t.label),i={};i["CSClaimNumber"]=this.formModel[t.value];let s={hublinkId:7,payloadMapping:JSON.stringify(i),lenderName:this.formModel[e.value],itemsPerPage:this.claimStatusItemsPerPage,currentPage:this.claimStatusCurrentPage};const{payload:a,error:o}=await b["d"].getDataSync(s);if(o)return void this.$alert.error(o);const{data:r,meta:n}=a;n.totalItems&&(this.claimStatusTotalItems=n.totalItems,r.length&&r[0].value.length&&(this.claimStatusValues=r[0].value,this.claimStatusValuesData=r[0].value))},async saveClaimStatus(){const t=await this.$refs.claimStatusModal.validate();if(!t)return;let e=this.formFields.find(t=>"Claim No."===t.label),i=this.formFields.find(t=>"Lender Name"===t.label),s={};s=Object.keys(this.claimStatusRow).length?{CSClaimNumber:this.claimStatusRow.CSClaimNumber,ClaimStatus:this.claimStatus,CSDate:this.claimStatusRow.CSDate,ClaimLetterSent:0,AuthorizedBy:0,MailingType:this.mailingType,LenderLetter:0,CreatedBy:this.claimStatusRow.CreatedBy,CreatedDt:this.claimStatusRow.CreatedDt,ModifiedBy:this.userNames,ModifiedDt:this.$day.newDateTime(),InternalOnly:this.internalOnly,InternalNotes:this.internalNotes,TransactionId:"",InhouseOnly:0}:{CSClaimNumber:this.formModel[e.value],ClaimStatus:this.claimStatus,CSDate:this.$day.newDate(),ClaimLetterSent:0,AuthorizedBy:0,MailingType:this.mailingType,LenderLetter:0,CreatedBy:this.userNames,CreatedDt:this.$day.newDateTime(),InternalOnly:this.internalOnly,InternalNotes:this.internalNotes,TransactionId:"",InhouseOnly:0};let a={lenderName:this.formModel[i.value],claimStatusID:Object.keys(this.claimStatusRow).length?this.claimStatusRow.ClaimStatusID:0,fields:JSON.stringify(s)};const{error:o}=await b["d"].saveClaimStatus(a);o?this.$alert.error(o):(Object.keys(this.claimStatusRow).length?this.$alert.success("Claim status entry updated"):this.$alert.success("Claim status entry added"),this.claimStatusRow={},this.claimStatusModal=!1,this.getClaimStatus())},async getDailyDataStatus(){this.dailyDataStatusValues=[],this.dailyDataStatusValuesData=[];let t=this.formFields.find(t=>"Loan No."===t.label),e=this.formFields.find(t=>"Lender Name"===t.label),i={};i["loankey"]=this.formModel[t.value];let s={hublinkId:6,payloadMapping:JSON.stringify(i),lenderName:this.formModel[e.value],itemsPerPage:this.dailyDataStatusItemsPerPage,currentPage:this.dailyDataStatusCurrentPage};const{payload:a,error:o}=await b["d"].getDataSync(s);if(o)return void this.$alert.error(o);const{data:r,meta:n}=a;n.totalItems&&(this.dailyDataStatusTotalItems=n.totalItems,r.length&&r[0].value.length&&(this.dailyDataStatusValues=r[0].value,this.dailyDataStatusValuesData=r[0].value))},async getPaymentHistory(){this.paymentHistoryValues=[],this.paymentHistoryValuesData=[];let t=this.formFields.find(t=>"Loan No."===t.label),e=this.formFields.find(t=>"Lender Name"===t.label),i={};i["StoreLoanNumber"]=this.formModel[t.value];let s={hublinkId:5,payloadMapping:JSON.stringify(i),lenderName:this.formModel[e.value],itemsPerPage:this.paymentHistoryItemsPerPage,currentPage:this.paymentHistoryCurrentPage};this.$store.commit("showLoadingBarSave");const{payload:a,error:o}=await b["d"].getDataSync(s);if(this.$store.commit("hideLoadingBarSave"),o)return void this.$alert.error(o);const{data:r,meta:n}=a;n.totalItems&&(this.paymentHistoryTotalItems=n.totalItems,r.length&&r[0].value.length&&(this.paymentHistoryValues=r[0].value,this.paymentHistoryValuesData=r[0].value))},getLifeTypePaymentTable(){this.paymentTableValues=[],this.paymentTableValues=[{approval:"",approvedBy:"",approvedDate:"",baseAmount:"",claimAmount:0,cumulativeTotal:"0",goodWill:!1,lppPlus:!1,notes:"",paymentDate:"",paymentId:0,paymentNumber:"1",preApprovedPmt:!1,psgCovered:!1,delete:!0}]}}},S=k,I=(i("55ff"),i("cea0"),i("2877")),_=Object(I["a"])(S,s,a,!1,null,"bdce7c08",null);e["a"]=_.exports},c559:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"sort",expression:"'sort'",modifiers:{bottom:!0}}],attrs:{"is-flat":"",icon:"mdi-sort","no-border":""}},[e("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("BaseScrollbar",{attrs:{height:t.scrollbarHeight,width:"240px"}},[e("div",{staticClass:"title-3 q-pa-md"},[t._v("Sort Criteria")]),t._l(t._columns,(function(i){return e("ListItem",{key:i.id,attrs:{icon:t.criteria===i.name?"eva-radio-button-on":"eva-radio-button-off","is-selected":t.criteria===i.name,label:i.label},on:{click:function(e){return t.updateCriteria(i.name)}}})}))],2),e("div",{staticClass:"title-3 q-pa-md"},[t._v("Sort Order")]),e("ListItem",{attrs:{icon:"ASC"===t.order?"eva-radio-button-on":"eva-radio-button-off","is-selected":"ASC"===t.order,label:"Ascending"},on:{click:function(e){return t.updateOrder("ASC")}}}),e("ListItem",{staticClass:"q-mb-sm",attrs:{icon:"DESC"===t.order?"eva-radio-button-on":"eva-radio-button-off","is-selected":"DESC"===t.order,label:"Descending"},on:{click:function(e){return t.updateOrder("DESC")}}})],1)],1)},a=[],o=i("cade"),r={name:"SortItems",components:{ListItem:o["a"]},props:{columns:{type:Array,required:!0},criteria:{type:String,required:!0},order:{type:String,required:!0}},computed:{_columns(){return[{id:this.$nano.id(),label:"None",name:""},...this.columns.filter(t=>t.isSortable)]},scrollbarHeight(){const t=54*this._columns.length;return t>216?"224px":t+"px"}},methods:{updateCriteria(t){this.$emit("update:criteria",t)},updateOrder(t){this.$emit("update:order",t)}}},n=r,l=i("2877"),c=i("4e73"),d=i("93dc"),m=i.n(d),h=Object(l["a"])(n,s,a,!1,null,"12f6a366",null);e["a"]=h.exports;m()(h,"components",{QMenu:c["a"]})},c589:function(t,e,i){},c5b7:function(t,e,i){"use strict";i("0698")},c721:function(t,e,i){},c925:function(t,e,i){"use strict";i("65c0")},cbc3:function(t,e,i){},ccc5:function(t,e,i){"use strict";i("b811")},cccc:function(t,e,i){"use strict";i("307a")},cd22:function(t,e,i){t.exports=i.p+"img/name-dark.ebb22601.png"},cd8d:function(t,e,i){"use strict";i("00f0")},cea0:function(t,e,i){"use strict";i("ee16")},d11f:function(t,e,i){"use strict";i("ad4f")},d2fb:function(t,e,i){"use strict";i("71f4")},d30f:function(t,e,i){},d37d:function(t,e,i){"use strict";i("4f21")},d406:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{class:{"is-selected":t.isSelected||t.file.id===t.fileId,"mini-mode":t.miniMode},attrs:{id:"file-list-item"},on:{click:function(e){return t.$emit("selectFile")},mouseover:function(e){t.fileId=t.file.id},mouseleave:function(e){t.fileId=0}}},[e("div",{staticClass:"avatar"},[e("FileIcon",{attrs:{"mime-type":t.type}})],1),e("div",{staticClass:"q-ml-md"},[e("div",t._g({staticClass:"title",on:{click:t.viewFile}},t.$listeners),[t._v(" "+t._s(t.file.name)+" "),t._t("info")],2),e("div",{staticClass:"meta"},[t.repository?[e("div",[t._v(t._s(t.repository))]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}})]:t._e(),e("div",[t._v(t._s(t.createdAt))]),t.file.createdBy&&!t.miniMode?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.file.createdBy))])]:t._e(),t.file.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.size))])]:t._e(),t.file.ocrType?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.file.ocrType))])]:t._e(),t._t("status")],2)]),e("q-space"),t._t("default")],2)},a=[],o=i("fa1f"),r=i("a7d2"),n={name:"FileListItem",components:{FileIcon:o["a"]},props:{file:{type:Object,required:!0},isSelected:{type:Boolean,default:!1},miniMode:{type:Boolean,default:!1}},data(){return{fileId:0}},computed:{type(){return this.file.name.split(".").reverse()[0].slice(0,4)},repository(){if(this.file.repository)return this.file.repository.value},createdAt(){return this.$day.format(this.file.createdAt)},size(){return Object(r["a"])(this.file.size)}},methods:{viewFile(){this.$emit("view",this.file)}}},l=n,c=(i("8b18"),i("2877")),d=i("2c91"),m=i("93dc"),h=i.n(m),u=Object(c["a"])(l,s,a,!1,null,"0b7b1cb3",null);e["a"]=u.exports;h()(u,"components",{QSpace:d["a"]})},dbf6:function(t,e,i){"use strict";i("b201")},dc7a:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"repository-list"}},[e("div",{staticClass:"title"},[t._v("Folder")]),e("div",{staticClass:"wrapper"},[e("ValidationProvider",{attrs:{name:"repository",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("SelectField",{attrs:{value:t.value,"is-mandatory":"","is-clearable":!1,options:t.repositories,"is-readonly":"",error:i[0]},on:{input:t.handleInput}})]}}])})],1)])},a=[],o=i("1b0d"),r=i("7bb1"),n=i("12b8"),l={name:"RepositoryList",components:{ValidationProvider:r["b"],SelectField:n["a"]},props:{value:{type:Number,required:!0},workspaceId:{type:Number,required:!0}},data(){return{repositories:[]}},watch:{workspaceId:{immediate:!0,handler:"getRepositories"}},methods:{handleInput(t){this.$emit("input",t)},async getRepositories(){if(this.workspaceId){this.repositories=[],this.$store.commit("showLoadingBar");const{error:t,payload:e}=await o["p"].getRepositoryList("workspaceId",this.workspaceId);if(this.$store.commit("hideLoadingBar"),t)return void this.$alert.error(t);if(!e.length)return;this.repositories=e.map(t=>({id:this.$nano.id(),label:t.value,value:t.id}))}}}},c=l,d=(i("39cc"),i("2877")),m=Object(d["a"])(c,s,a,!1,null,"11e49f8b",null);e["a"]=m.exports},e09c:function(t,e,i){},e0b6:function(t,e,i){},e21c:function(t,e,i){"use strict";i("e09c")},e359:function(t,e,i){"use strict";i("14d9");var s=i("a026"),a=i("3980"),o=i("87e8"),r=i("e277"),n=i("d882"),l=i("d54d");e["a"]=s["default"].extend({name:"QHeader",mixins:[o["a"]],inject:{layout:{default(){console.error("QHeader needs to be child of QLayout")}}},props:{value:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},data(){return{size:parseInt(this.heightHint,10),revealed:!0}},watch:{value(t){this.__update("space",t),this.__updateLocal("revealed",!0),this.layout.__animate()},offset(t){this.__update("offset",t)},reveal(t){!1===t&&this.__updateLocal("revealed",this.value)},revealed(t){this.layout.__animate(),this.$emit("reveal",t)},"layout.scroll"(t){!0===this.reveal&&this.__updateLocal("revealed","up"===t.direction||t.position<=this.revealOffset||t.position-t.inflexionPosition<100)}},computed:{fixed(){return!0===this.reveal||this.layout.view.indexOf("H")>-1||this.$q.platform.is.ios&&!0===this.layout.container},offset(){if(!0!==this.value)return 0;if(!0===this.fixed)return!0===this.revealed?this.size:0;const t=this.size-this.layout.scroll.position;return t>0?t:0},hidden(){return!0!==this.value||!0===this.fixed&&!0!==this.revealed},revealOnFocus(){return!0===this.value&&!0===this.hidden&&!0===this.reveal},classes(){return(!0===this.fixed?"fixed":"absolute")+"-top"+(!0===this.bordered?" q-header--bordered":"")+(!0===this.hidden?" q-header--hidden":"")+(!0!==this.value?" q-layout--prevent-focus":"")},style(){const t=this.layout.rows.top,e={};return"l"===t[0]&&!0===this.layout.left.space&&(e[!0===this.$q.lang.rtl?"right":"left"]=this.layout.left.size+"px"),"r"===t[2]&&!0===this.layout.right.space&&(e[!0===this.$q.lang.rtl?"left":"right"]=this.layout.right.size+"px"),e},onEvents(){return{...this.qListeners,focusin:this.__onFocusin,input:n["k"]}}},render(t){const e=Object(r["d"])(this,"default",[]);return!0===this.elevated&&e.push(t("div",{staticClass:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(t(a["a"],{props:{debounce:0},on:Object(l["b"])(this,"resize",{resize:this.__onResize})})),t("header",{staticClass:"q-header q-layout__section--marginal",class:this.classes,style:this.style,on:this.onEvents},e)},created(){this.layout.instances.header=this,!0===this.value&&this.__update("size",this.size),this.__update("space",this.value),this.__update("offset",this.offset)},beforeDestroy(){this.layout.instances.header===this&&(this.layout.instances.header=void 0,this.__update("size",0),this.__update("offset",0),this.__update("space",!1))},methods:{__onResize({height:t}){this.__updateLocal("size",t),this.__update("size",t)},__update(t,e){this.layout.header[t]!==e&&(this.layout.header[t]=e)},__updateLocal(t,e){this[t]!==e&&(this[t]=e)},__onFocusin(t){!0===this.revealOnFocus&&this.__updateLocal("revealed",!0),this.$emit("focusin",t)}}})},e5e9:function(t,e,i){},e864:function(t,e,i){"use strict";i("1137")},e887:function(t,e,i){},e953:function(t,e,i){"use strict";i("8fbb")},e98d:function(t,e,i){"use strict";i("50ff")},ea0d:function(t,e,i){"use strict";i("8749")},ea98:function(t,e,i){"use strict";i("1bfa")},eb85:function(t,e,i){"use strict";var s=i("a026"),a=i("b7fa"),o=i("87e8");const r={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},n={xs:2,sm:4,md:8,lg:16,xl:24};e["a"]=s["default"].extend({name:"QSeparator",mixins:[a["a"],o["a"]],props:{spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},computed:{orientation(){return!0===this.vertical?"vertical":"horizontal"},classPrefix(){return" q-separator--"+this.orientation},insetClass(){return!1!==this.inset?`${this.classPrefix}-${r[this.inset]}`:""},classes(){return`q-separator${this.classPrefix}${this.insetClass}`+(void 0!==this.color?" bg-"+this.color:"")+(!0===this.isDark?" q-separator--dark":"")},style(){const t={};if(void 0!==this.size&&(t[!0===this.vertical?"width":"height"]=this.size),!1!==this.spaced){const e=!0===this.spaced?n.md+"px":this.spaced in n?n[this.spaced]+"px":this.spaced,i=!0===this.vertical?["Left","Right"]:["Top","Bottom"];t["margin"+i[0]]=t["margin"+i[1]]=e}return t},attrs(){return{"aria-orientation":this.orientation}}},render(t){return t("hr",{staticClass:"q-separator",class:this.classes,style:this.style,attrs:this.attrs,on:{...this.qListeners}})}})},ec15:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("Sheet",{attrs:{width:"30vw","sub-actions":!(!t.selectedProcess.processId||!t.attachmentList.length),upload:"inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode||t.initiateProcess||t.isPortal,"no-padding":""},on:{input:t.closeAttachmentsSheet},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Attachments ")]},proxy:!0},{key:"actions",fn:function(){return[t.selectedProcess.processId?e("div",{staticClass:"q-ml-sm text-gray q-mr-sm ellipsis",staticStyle:{"font-size":"10px"}},[t._v(" auto-refresh every 15 seconds ")]):t._e(),t.selectedProcess.processId?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"refresh",expression:"'refresh'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{icon:"mdi-refresh",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return t.getAttachments()}}}):t._e()]},proxy:!0},"inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode||t.initiateProcess||t.isPortal?{key:"upload",fn:function(){return[e("div",{staticClass:"hint",on:{click:function(e){t.rowIndex=null,t.$refs.attachments.click()}}},[e("BaseIcon",{staticClass:"icon",attrs:{name:"eva-cloud-upload-outline",size:"32px",color:"blue"}}),e("div",{staticClass:"title text-blue"},[t._v("UPLOAD FILES")]),e("div",{staticClass:"description"},[t._v("Click here to choose files and upload")])],1)]},proxy:!0}:null,t.selectedProcess.processId&&t.attachmentList.length?{key:"subActions",fn:function(){return[e("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:t.fileSelectAll},model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}}),t._v(" Select All "),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"mail share",expression:"'mail share'",modifiers:{top:!0}}],staticClass:"q-ml-sm",attrs:{"is-disabled":!t.selectedFileCount,icon:"mdi-email-send-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:t.documentShare}}),e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"merge documents (only PDF)",expression:"'merge documents (only PDF)'",modifiers:{top:!0}}],attrs:{"is-disabled":!(t.selectedFileCount>1&&t.isSelectedPDF),icon:"mdi-file-document-multiple-outline",color:"secondary","no-border":"","is-flat":"",size:"18px"},on:{click:t.documentMerge}})]},proxy:!0}:null],null,!0),model:{value:t.attachmentSheet,callback:function(e){t.attachmentSheet=e},expression:"attachmentSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:"inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode||t.initiateProcess||t.isPortal?"calc(100vh - 200px)":""}},[e("input",{ref:"attachments",staticClass:"hidden",attrs:{type:"file"},on:{change:t.uploadWflowAttachments}}),t._l(t.checkList,(function(i){return[!i.name||i.hasOwnProperty("visible")&&!i.show?t._e():[i.attach?e("div",{key:i.uid},[t._l(t.attachmentFilterCheckList(i.name),(function(i){return[e("div",{key:i.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[t.selectedProcess.processId?e("div",{staticClass:"col-auto"},[i.loading?[e("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:i.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(t){i.checked=!i.checked}}})]],2):e("div",[i.loading?[e("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:t._e()],2),i.formJsonId?e("div",{staticClass:"col-auto"},[e("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:t.getLabel(i.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):t._e(),e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(i.name)}})],1),e("div",{staticClass:"col ellipsis",on:{click:function(e){return t.openFile(i)}}},[t._v(" "+t._s(i.name)+" ")]),i.loading?t._e():e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.fileMenuAction(i,"Download")}}})],1),i.loading?t._e():e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.fileMenuAction(i,"Print")}}})],1)]),e("div",{staticClass:"meta row"},[e("div",{staticClass:"col row"},[e("div",[t._v(t._s(t.$day.format(i.createdAt)))]),i.createdBy?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.createdByEmail))])]:t._e(),i.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.fileSize(i.size)))])]:t._e()],2),e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.getFileData(i)}}})],1),[("inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode)&&i.createdBy===t.$store.state.session.id||t.initiateProcess?[e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.attachmentDelete(i)}}})],1),e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Re-Upload",expression:"'Re-Upload'",modifiers:{top:!0}}],attrs:{icon:"mdi-file-upload",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){e.stopPropagation(),t.reuploadFile=i,t.reupload(i.name)}}})],1)]:t._e()]],2)])]}))],2):e("div",{key:i.uid,staticClass:"checkList"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto"},[e("BaseIcon",{attrs:{name:"mdi-file-check-outline",color:"primary"}})],1),e("div",{staticClass:"col q-ml-sm"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t._v(" "+t._s(i.name)+" ")]),i.required?e("div",{staticClass:"col-12 q-mt-sm"},[e("q-chip",{staticClass:"chips small",attrs:{outline:"",color:"red"}},[t._v(" Required ")])],1):t._e()])]),e("div",{staticClass:"col-auto"},[e("div",{staticClass:"col-12",on:{click:function(e){return t.attachTemplate(i.uid)}}},[e("q-chip",{staticClass:"chips primary-hover medium",attrs:{outline:"",color:"primary"}},[e("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-upload-outline",color:"primary","text-color":"white"}}),t._v(" Upload ")],1)],1),i.template?e("div",{staticClass:"col-12",on:{click:function(e){return t.download(i.id)}}},[e("q-chip",{staticClass:"chips secondary-hover medium",attrs:{outline:"",color:"secondary"}},[e("q-avatar",{staticClass:"q-mr-sm",attrs:{icon:"eva-download-outline",color:"secondary","text-color":"white"}}),t._v(" Download ")],1)],1):t._e()])])])]]})),t._l(t.attachmentList,(function(i){return[t.isCheckList(i.name)?[e("div",{key:i.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[i.loading?[e("BaseIcon",{staticClass:"q-mr-sm loading",attrs:{name:"mdi-loading",color:"secondary"}})]:t._e(),t.selectedProcess.processId?e("div",{staticClass:"col-auto"},[e("BaseIcon",{staticClass:"q-mr-sm",attrs:{name:i.checked?"eva-checkmark-circle-2":"eva-radio-button-off-outline",color:"secondary"},on:{click:function(t){i.checked=!i.checked}}})],1):t._e(),i.formJsonId?e("div",{staticClass:"col-auto"},[e("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip:green.top",value:t.getLabel(i.formJsonId),expression:"getLabel(file.formJsonId)",arg:"green",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{name:"mdi-form-select",color:"primary"}})],1):t._e(),e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(i.name)}})],1),e("div",{staticClass:"col ellipsis",on:{click:function(e){return t.openFile(i)}}},[t._v(" "+t._s(i.name)+" ")]),i.loading?t._e():e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Download",expression:"'Download'",modifiers:{top:!0}}],attrs:{icon:"eva-download-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.fileMenuAction(i,"Download")}}})],1),i.loading?t._e():e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Print",expression:"'Print'",modifiers:{top:!0}}],attrs:{icon:"eva-printer-outline",color:"primary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.fileMenuAction(i,"Print")}}})],1)],2),e("div",{staticClass:"meta row"},[e("div",{staticClass:"col row"},[e("div",[t._v(t._s(t.$day.format(i.createdAt)))]),i.createdBy?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(i.createdByEmail))])]:t._e(),i.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.fileSize(i.size)))])]:t._e()],2),e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Metadata",expression:"'Metadata'",modifiers:{top:!0}}],attrs:{icon:"eva-file-text-outline",color:"secondary","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.getFileData(i)}}})],1),("inbox"===t.selectedNode||"common"===t.selectedNode||"payment"===t.selectedNode)&&i.createdBy===t.$store.state.session.id||t.initiateProcess?e("div",{staticClass:"col-auto"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"delete",expression:"'delete'",modifiers:{top:!0}}],attrs:{icon:"eva-trash-2-outline",color:"red","no-border":"","is-flat":"",size:"20px"},on:{click:function(e){return e.stopPropagation(),t.attachmentDelete(i)}}})],1):t._e()])])]:t._e()]}))],2)],1)]),e("EmailSharing",{attrs:{"repository-id":t.workflow.repositoryId,"file-list":t.selectedFileList},on:{"update:fileList":function(e){t.selectedFileList=e},"update:file-list":function(e){t.selectedFileList=e}},model:{value:t.emailSharingSheet,callback:function(e){t.emailSharingSheet=e},expression:"emailSharingSheet"}}),e("FileDetails",{attrs:{"file-data":t.fileData},model:{value:t.fileDetailsSheet,callback:function(e){t.fileDetailsSheet=e},expression:"fileDetailsSheet"}}),e("Sheet",{attrs:{width:"30vw","no-padding":""},on:{input:function(e){t.mailAttachmentSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Mail Attachments ")]},proxy:!0}]),model:{value:t.mailAttachmentSheet,callback:function(e){t.mailAttachmentSheet=e},expression:"mailAttachmentSheet"}},[e("div",{attrs:{id:"content-wrapper"}},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 200px)"}},[t._l(t.mailAttachmentList,(function(i){return[e("div",{key:i.id,staticClass:"attachmentList"},[e("div",{staticClass:"title row"},[e("div",{staticClass:"col-auto"},[e("FileIcon",{staticClass:"mini-avatar q-mr-sm",attrs:{"mime-type":t.fileType(i.name)}})],1),e("div",{staticClass:"col ellipsis",on:{click:function(e){return t.openAttachmentFile(i)}}},[t._v(" "+t._s(i.name)+" ")])]),e("div",{staticClass:"meta"},[e("div",[t._v(t._s(t.$day.format(i.createdAt)))]),i.size?[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v(t._s(t.fileSize(i.size)))])]:t._e()],2)])]}))],2)],1)]),e("Sheet",{attrs:{"no-padding":"",width:"100vw"},on:{input:function(e){t.fileSheet=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"attachmentFileHeader"},[t.selectedFile.formJsonId?[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip:green.bottom",value:t.getLabel(t.selectedFile.formJsonId),expression:"getLabel(selectedFile.formJsonId)",arg:"green",modifiers:{bottom:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"mdi-form-select",color:"primary"}})]:t._e(),e("div",{staticClass:"avatar q-ml-sm"},[e("FileIcon",{attrs:{"mime-type":t.fileType(t.selectedFile.name)}})],1),e("div",{staticClass:"q-ml-md"},[e("div",{staticClass:"filename"},[t._v(" "+t._s(t.selectedFile.name)+" ")]),e("div",{staticClass:"meta"},[e("div",[t._v("Archived At: "+t._s(t.$day.format(t.selectedFile.createdAt)))]),e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),e("div",[t._v("Archived By: "+t._s(t.selectedFile.createdByEmail))]),t.selectedFile.size?e("div",[e("BaseIcon",{attrs:{name:"mdi-circle-small"}}),t._v(" File Size: "+t._s(t.fileSize(t.selectedFile.size))+" ")],1):t._e()],1)])],2)]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Actions",expression:"'Actions'",modifiers:{top:!0}}],staticClass:"q-mr-sm",attrs:{"is-flat":"",icon:"eva-menu"}},[e("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale",anchor:"bottom end",self:"top right"}},[e("BaseScrollbar",{staticClass:"q-pb-sm",attrs:{width:"240px"}},t._l(t.documentActionList,(function(i){return e("ListItem",{key:i.id,attrs:{icon:i.icon,label:i.label},on:{click:function(e){return t.documentAction(i.id)}}})})),1)],1)],1)]},proxy:!0}]),model:{value:t.fileSheet,callback:function(e){t.fileSheet=e},expression:"fileSheet"}},[e("div",{staticClass:"attachmentFileFrame"},[e("div",{staticClass:"file-list"},[e("iframe",{ref:"myAttachmentFiles",attrs:{id:"file-frame",src:t.fileLink(),frameborder:"0"}})])])]),e("MetaDataEdit",{attrs:{value:t.showMetaDataEditModal,file:t.workflow,"repository-field":t.repositoryField,"file-data":t.fileData,title:t.metaDataTitle||"Index",columns:t.columns,"modal-value":t.workflowModel,"upload-filename":t.uploadFilename,"meta-data-fields":t.metaDataModal},on:{close:t.closeMetaDataEditModal,save:t.saveMetaData}})],1)},a=[],o=(i("14d9"),i("13d5"),i("381e")),r=i("5e23"),n=i("1b0d"),l=i("fa1f"),c=i("a7d2"),d=i("dd90"),m=i("abe1"),h=i("bc3a"),u=i.n(h),p=i("ee54"),f=i("9996"),v=i("869e"),y=i("cade"),b={name:"Attachments",components:{Sheet:o["a"],EmailSharing:r["a"],FileIcon:l["a"],FileDetails:m["a"],MetaDataEdit:p["a"],CheckboxField:v["a"],ListItem:y["a"]},props:{value:{type:Boolean,default:!1},selectedProcess:{type:Object,default:()=>{}},workflow:{type:Object,default:()=>{}},selectedNode:{type:String,required:!0},initiateProcess:{type:Boolean,default:!1},formCheckList:{type:Boolean,default:!1},checkList:{type:Array,default:()=>[]},wform:{type:Object,default:()=>{}},repositoryDetails:{type:Object,default:()=>{}},workflowModel:{type:Object,default:()=>{}},formUploadFiles:{type:Array,default:()=>[]},formFields:{type:Array,default:()=>[]},repositoryField:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},attachments:{type:Array,default:()=>[]},workflowId:{type:Number,required:!0},isPortal:{type:Boolean,default:!1}},data(){return{attachmentSheet:!1,attachmentList:[],selectAll:!1,emailSharingSheet:!1,selectedFileList:[],fileDetailsSheet:!1,fileData:[],checkListRowIndex:0,selectedFile:{},mailTransactionList:[],mailAttachmentSheet:!1,mailAttachmentList:[],fileSheet:!1,watchViewerClose:null,reuploadFile:{},documentActionList:[{id:"Download",key:"download",label:"Download",icon:"mdi-download-outline"},{id:"Print",key:"print",label:"Print",icon:"eva-printer-outline"}],uploadFilename:"",showMetaDataEditModal:!1,selectedUploadFile:{},documentLoad:null,documentLoadList:[],metaDataModal:{},metaDataTitle:"",selectedCheckListName:""}},computed:{selectedFileCount(){this.clearAttach();let t=this.attachmentList.filter(t=>t.checked).length;return t},isSelectedPDF(){let t=!0;return this.attachmentList.forEach(e=>{let i=e.name.split(".").pop();e.checked&&"pdf"!==i.toLowerCase()&&(t=!1)}),t}},watch:{value:{immediate:!0,handler(){if(this.value)if(this.attachmentSheet=!0,this.attachmentList=this.attachments,this.attachmentSheet&&this.selectedProcess.processId){if(this.getAttachments(),this.attachmentList.length){let t=this.attachmentList.length-1;this.getFileData(this.attachmentList[t],"file")}this.attachmentLoad=setInterval(()=>{this.getAttachments()},15e3)}else clearInterval(this.attachmentLoad)}}},methods:{async getAttachments(t=0,e=0){let i=this.attachmentList.length;t||e||(t=this.workflowId,e=this.selectedProcess.processId),this.$store.commit("showLoadingBar");const{error:s,payload:a}=await n["t"].getAttachments(t,e);if(this.$store.commit("hideLoadingBar"),s)this.$alert.error(s);else if(a.length?(i!==a.length&&(this.attachmentList=a.map(t=>({...t,checked:!1}))),this.$emit("attachmentCount",this.attachmentList.length)):this.attachmentList=[],this.checkList.length){this.checkList.forEach(t=>{let e=this.attachmentList.filter(e=>{let i=e.name.substr(0,e.name.lastIndexOf("."));if(t.name===i||t.name===i.split("_")[0])return e});e.length?t.attach=!0:t.attach=!1});let t=location.origin;(this.isTenantArmgroup()||"https://trial.ezofis.com"===t&&12===this.$store.state.session.tenantId)&&this.selectedProcess.attachmentCount!==this.attachmentList.length&&this.$emit("update:formCheckList",!0)}},isTenantArmgroup(){let t=location.origin;return("https://ag-appsvc01.azurewebsites.net"===t||"https://ag-appsvc05.azurewebsites.net"===t||"http://localhost:8080"===t)&&3===this.$store.state.session.tenantId},fileSelectAll(){this.attachmentList=this.attachmentList.map(t=>({...t,checked:this.selectAll}))},async documentMerge(){let t=[];this.attachmentList.forEach(e=>{let i=e.name.split(".").pop();e.checked&&"pdf"===i.toLowerCase()&&t.push(e.id)});let e={ids:t};const{error:i}=await n["t"].documentMerge(this.workflowId,this.selectedProcess.processId,this.selectedProcess.transactionId,this.workflow.repositoryId,e);i?this.$alert.error(i):this.$alert.success("Document merge process initiated")},async documentShare(){this.selectedFileList=[],this.attachmentList.forEach(t=>{t.checked&&this.selectedFileList.push({id:t.id,name:t.name})}),this.emailSharingSheet=!0},clearAttach(){console.log("clear")},attachTemplate(t){this.checkListRowIndex=t,this.$refs.attachments.click(),this.selectedCheckListName=this.checkList.find(e=>t==e.uid).name},reupload(t){var e;t=t.substr(0,t.lastIndexOf(".")).split("_")[0],this.checkListRowIndex=null===(e=this.checkList.find(e=>e.name===t))||void 0===e?void 0:e.uid,this.$refs.attachments.click()},attachmentFilterCheckList(t){return this.attachmentList.filter(e=>e.name.substring(0,e.name.lastIndexOf("."))===t||e.name.substring(0,e.name.lastIndexOf(".")).split("_")[0]===t)},isCheckList(t){let e=this.checkList.filter(e=>e.name===t.substring(0,t.lastIndexOf("."))||e.name===t.substring(0,t.lastIndexOf(".")).split("_")[0]);return!e.length},showMailAttachments(t){this.mailAttachmentList=[];let e=t.attachmentJson.split(",");e.forEach(e=>{let i=e.split("\\").pop();this.mailAttachmentList.push({id:this.$nano.id(),mailId:t.id,name:i,createdAt:t.createdAt})}),this.mailAttachmentSheet=!0},openAttachmentFile(t){let e=`https://appuat.ezofis.com/ezofisapi/api/client/viewAttachment/${this.$store.state.session.tenantId}/${t.mailId}/${t.name}`;window.open(e,"_blank")},getLabel(t){let e="",i=this.wform.formJson?JSON.parse(this.wform.formJson):this.wform;const s=[...i.panels,...i.secondaryPanels];if(!s.length)return;let a=[];for(const o of s)a.push(...o.fields);return a.forEach(i=>{const s=i.settings.specific.tableColumns.find(e=>e.id===t);if(s)e=s.label;else if(i.id===t)return void(e=i.label)}),e},fileType(t){if(t)return t.split(".").reverse()[0].slice(0,4)},fileSize(t){return Object(c["a"])(t)},openFile(t){t.loading?this.$alert.info("Please wait to complete the uploading"):(this.selectedFile=t,this.isTenantArmgroup()?window.open(this.fileLink()):this.fileSheet=!0)},fileLink(){let t=location.origin.replace("http://localhost:8080","http://52.172.32.88");if(this.selectedFile.name){let e=this.selectedFile.name.split(".").pop();if(this.selectedFile.initiate){let i=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(i=2);let s="";if(Object(d["d"])(e))s=this.isTenantArmgroup()?"https://ag-appsvc04.azurewebsites.net/web/viewer.html":"https://trial.ezofis.com"===t?"https://trial.ezofis.com/docsviewer/index.html":this.isTenantGOTO()?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":t+"/PDFViewer/web/viewer.html";else{if("http://52.172.32.88"!==t)return`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${i}`;s="http://52.172.32.88/DocsViewer/index.html"}return`${s}?tId=${this.$store.state.session.tenantId}&uploadId=${this.selectedFile.id}&type=${i}`}{let i="",s="";if("inbox"!==this.selectedNode&&"common"!==this.selectedNode&&"payment"!==this.selectedNode||(s="&action=all"),Object(d["d"])(e))this.isTenantArmgroup()?(s="",i="https://ag-appsvc04.azurewebsites.net/web/viewer.html"):"https://trial.ezofis.com"!==t||Object(d["c"])(e)?i=this.isTenantGOTO()?"https://ezdocsviewer.azurewebsites.net/web/viewer.html":t+"/PDFViewer/web/viewer.html":(localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),i="https://trial.ezofis.com/docsviewer/index.html");else{if(Object(d["b"])(e)||"http://52.172.32.88"!==t)return`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;localStorage.setItem("viewerClose",!1),this.watchViewerClose=setInterval(()=>this.checkViewerClose(),1e3),i="http://52.172.32.88/DocsViewer/index.html"}return`${i}?tId=${this.$store.state.session.tenantId}&uId=${this.$store.state.session.id}&rId=${this.selectedFile.repositoryId}&itemId=${this.selectedFile.id}&wId=${this.workflowId}&pId=${this.selectedProcess.processId}&type=2&filename=${this.selectedFile.name}${s}`}}},fileMenuAction(t,e){this.selectedFile=t,this.documentAction(e,!0)},documentAction(t,e){if("Email_Sharing"===t);else if("Print"===t){if(this.selectedFile.name)if(e){let t="";if(this.selectedFile.initiate){let e=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(e=2),t=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${e}/1`}else t=`https://appuat.ezofis.com/ezofisapi/api/file/view/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(t,"_blank")}else{let t=this.selectedFile.name.split(".").pop();Object(d["d"])(t)?(localStorage.setItem("filePrint",!0),localStorage.setItem("filePrintId",this.selectedFile.id)):this.$refs.myAttachmentFiles.contentWindow.print()}this.filePrintSession()}else if("Download"===t){let t="";if(this.selectedFile.initiate){let e=1;"STATIC"===this.repositoryDetails.fieldsType&&"FORM"===this.workflow.initiatedBy&&(e=2),t=`https://appuat.ezofis.com/ezofisapi/api/uploadandindex/view/${this.$store.state.session.tenantId}/${this.selectedFile.id}/${e}/2`}else t=`https://appuat.ezofis.com/ezofisapi/api/menu/file/download/${this.$store.state.session.tenantId}/${this.$store.state.session.id}/${this.selectedFile.repositoryId}/${this.selectedFile.id}/2`;window.open(t,"_blank")}},async filePrintSession(){const{error:t}=await n["k"].filePrintSession({repositoryId:this.selectedFile.repositoryId,itemId:this.selectedFile.id,activityId:4});t&&this.$alert.error(t)},async getFileData(t,e){const{error:i,payload:s}=await n["p"].getFileData({repositoryId:t.repositoryId,itemId:t.id});i?this.$alert.error(i):s&&(t.fileData?this.fileData=t.fileData:this.fileData=s,"file"!==e&&(this.fileDetailsSheet=!0))},async attachmentDelete(t){if(t.fileControl){let e=this.workflowModel[t.fieldId];if(e.length){let i=e.findIndex(e=>e.fileId===t.id);console.log(i),i>=0&&this.workflowModel[t.fieldId].splice(i,1);let s=this.formUploadFiles.findIndex(e=>e.fileId===t.id&&e.fileId===t.fileId);console.log(s),s>=0&&this.formUploadFiles.splice(i,1),t.control.length&&t.control.forEach(t=>{this.workflowModel[t]=""})}let i=this.attachmentList.findIndex(t=>t.fileControl);console.log(i),i>=0&&(this.$emit("attachmentCount",this.attachmentList.length-1),this.attachmentList.splice(i,1))}else if(t.initiate){const{error:e}=await n["r"].deleteUploadedFiles([t.id]);if(e)return void this.$alert.error(e);this.attachmentList=this.attachmentList.filter(e=>e.id!==t.id),this.checkList.forEach(e=>{e.uid===t.uid&&(e.attach=!1)})}else{const{error:e}=await n["p"].fileDelete(this.workflow.repositoryId,t.id);if(e)return void this.$alert.error(e);this.getAttachments()}},checkViewerClose(){localStorage.getItem("viewerClose")&&"true"===localStorage.getItem("viewerClose")&&(this.fileSheet=!1,localStorage.removeItem("viewerClose"),clearInterval(this.watchViewerClose),this.workflow.initiatedBy)},isTenantGOTO(){let t=location.origin;return("https://app.ezofis.com"===t||"https://appuat.ezofis.com"===t)&&2===this.$store.state.session.tenantId},customCheckUpload(){let t=location.origin;return"https://edmsuat.sobhaapps.com"===t&&(55===this.workflowId||2092===this.workflowId)&&0===this.attachmentList.length},async uploadWflowAttachments(t){if("STATIC"===this.repositoryDetails.fieldsType){if(this.selectedUploadFile=t,this.customCheckUpload()){let e=this.formFields.find(t=>"Document No"===t.label);this.uploadFilename=e?this.workflowModel[e.value]+".pdf":t.target.files[0].name}else this.uploadFilename=t.target.files[0].name;const e=this.repositoryField.reduce((t,e)=>e.level>t.level?e:t,this.repositoryField[0]),i=e.id,s=this.fileData.find(t=>i==t.id);if(!this.selectedCheckListName){const t={id:e.id,name:e.name,value:this.selectedCheckListName,type:e.dataType};this.fileData.length?s&&(s.value=""):(this.fileData.push(t),console.log(this.fileData,"selectedCheckListName")),this.showMetaDataEditModal=!0}if(this.selectedCheckListName){s&&(s.value=this.selectedCheckListName);const t={id:e.id,name:e.name,value:this.selectedCheckListName,type:e.dataType};this.fileData.length||(this.fileData.push(t),console.log(this.fileData,"selectedCheckListName"));const i=this.repositoryField.filter(t=>!0===t.isMandatory).map(t=>t.id),a=i.every(t=>{const e=this.fileData.find(e=>e.id===t);return e&&""!==e.value});if(this.showMetaDataEditModal=!a,a){const t={};this.fileData.forEach(e=>{t[e.name]=""!==e.value?e.value:""}),console.log(t,"New Object"),this.saveMetaData(t)}else this.showMetaDataEditModal=!0;this.selectedCheckListName=""}}else this.uploadAttachments(t)},async uploadAttachments(t,e){if(this.selectedProcess.processId){const s=t.target.files[0],a=new FormData;a.append("workflowId",this.workflowId),a.append("repositoryId",this.workflow.repositoryId),a.append("processId",this.selectedProcess.processId),a.append("transactionId",this.selectedProcess.transactionId),e?a.append("fields",e):a.append("fields",""),a.append("file",s);let o=t.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let t=this.checkList.filter(t=>t.uid===this.checkListRowIndex);a.append("filename",t[0].name+"."+r),o=t[0].name+"."+r}if(!Object(d["a"])(r))return void this.$alert.info("This file format is not supported");this.$store.commit("showLoadingBar");try{const t=await u()({url:"https://appuat.ezofis.com/ezofisapi/api/workflow/attachmentWithProcessId",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}}),{status:e,data:i}=t;if(200!==e||!i)throw t;this.$alert.success("Document attached"),this.documentLoad=setInterval(()=>{this.getAttachments(),clearInterval(this.documentLoad)},15e3)}catch(i){this.$alert.error("Error uploading file"),console.error(i)}this.$store.commit("hideLoadingBar"),this.checkList.length&&this.checkList.forEach(t=>{t.uid!==this.checkListRowIndex||(t.attach=!0)}),t.target.value="",Object.keys(this.reuploadFile).length&&(await this.attachmentDelete(this.reuploadFile),this.reuploadFile={})}else{const s=t.target.files[0],a=new FormData;a.append("file",s),a.append("repositoryId",this.workflow.repositoryId),e&&(this.fileData=JSON.parse(e),a.append("fields",e));let o=t.target.files[0].name;const r=o.split(".").pop();if(this.checkListRowIndex){let t=this.checkList.filter(t=>t.uid===this.checkListRowIndex);a.append("filename",t[0].name+"."+r),o=t[0].name+"."+r}else a.append("filename",o);if(!Object(d["a"])(r))return void this.$alert.info("This file format is not supported");this.$store.commit("showLoadingBar");try{const i=await u()({url:"https://appuat.ezofis.com/ezofisapi/api/uploadAndIndex/upload",method:"POST",data:a,headers:{Token:this.$store.state.identity.token,Accept:"application/json","Content-Type":"multipart/form-data"}});this.$store.commit("hideLoadingBar");const{status:n,data:l}=i;if(200!==n)throw"Invalid response";let c=JSON.parse(l);this.$alert.success("Document attached");let d=this.repositoryField.reduce((t,e)=>t.level>e.level?t:e),m=this.fileData.find(t=>t.name===d.name),h=!1;"pdf"!==r.toLowerCase()&&(h=!0,this.documentLoadList.push(Number(c.fileId)),this.documentLoad=setInterval(()=>{let t=this.attachmentList.find(t=>this.documentLoadList.indexOf(t.id)>-1);t&&(this.documentLoadList.splice(this.documentLoadList.indexOf(t.id),1),t.loading=!1),0===this.documentLoadList.length&&clearInterval(this.documentLoad)},1e4)),this.attachmentList.push({id:Number(c.fileId),name:e?m.value+"."+r:o,createdAt:(new Date).toISOString(),createdByEmail:this.$store.state.session.email,size:s.size,initiate:!0,uid:this.checkListRowIndex,createdBy:this.$store.state.session.id,fileData:this.fileData,repositoryId:this.workflow.repositoryId,loading:h}),this.$emit("attachmentCount",this.attachmentList.length),this.checkList.length&&this.checkList.forEach(t=>{t.uid!==this.checkListRowIndex||(t.attach=!0)}),t.target.value=""}catch(i){console.error(i),this.$alert.error("error attaching file")}}},closeMetaDataEditModal(){this.showMetaDataEditModal=!1,this.$refs.attachments&&(this.$refs.attachments.value=null)},saveMetaData(t){let e=[];this.repositoryField.forEach(i=>{e.push({name:i.name,value:t[i.name],type:i.dataType})}),e.forEach(t=>{let e=this.formFields.find(e=>Object(f["a"])(e.label)===Object(f["a"])(t.name));e&&t.value&&(this.workflowModel[e.value]=t.value)}),this.uploadAttachments(this.selectedUploadFile,JSON.stringify(e))},closeAttachmentsSheet(){this.attachmentSheet=!1,this.$emit("update:attachments",this.attachmentList),this.$emit("attachmentCount",this.attachmentList.length),this.$emit("update:value",!1)}}},g=b,w=(i("11f5"),i("2877")),C=i("b047"),k=i("cb32"),S=i("4e73"),I=i("93dc"),_=i.n(I),T=Object(w["a"])(g,s,a,!1,null,"dc5d287e",null);e["a"]=T.exports;_()(T,"components",{QChip:C["a"],QAvatar:k["a"],QMenu:S["a"]})},ee16:function(t,e,i){},ee26:function(t,e,i){"use strict";i("cbc3")},ee54:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Modal",{attrs:{value:t.value,"has-footer":"",width:"540px"},on:{input:t.closeModal},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.title))]},proxy:!0},{key:"default",fn:function(){return[e("ValidationObserver",{ref:"form"},[t.editFromFileSheet?t._e():t._l(t._repositoryField,(function(i){return e("div",{key:i.id,staticClass:"field-wrapper"},[[[e("RepositoryField",{staticClass:"col",attrs:{field:i,"repository-id":t.file.repositoryId,"read-only":t.readOnly},model:{value:t.fieldsModel[i.name],callback:function(e){t.$set(t.fieldsModel,i.name,e)},expression:"fieldsModel[field.name]"}})]]],2)})),t.editFromFileSheet?t._l(t.fieldsModalData,(function(i){return e("div",{key:i.id,staticClass:"field-wrapper"},[[[e("RepositoryField",{staticClass:"col",attrs:{field:t.getField(i.fieldId),"repository-id":t.file.repositoryId,"read-only":t.readOnly},model:{value:i.newValue,callback:function(e){t.$set(i,"newValue",e)},expression:"field.newValue"}})]]],2)})):t._e()],2)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:t.closeModal}}),e("BaseButton",{attrs:{label:"save"},on:{click:t.save}})]},proxy:!0}])})},a=[],o=(i("14d9"),i("7bb1")),r=i("6a70"),n=i("7794"),l=i("9996"),c=i("7ee8"),d={name:"MetaDataEdit",components:{Modal:r["a"],ValidationObserver:o["a"],RepositoryField:n["a"]},props:{value:{type:Boolean,default:!1},file:{type:Object,required:!0},repositoryField:{type:Array,required:!0},fileData:{type:Array,required:!0},title:{type:String,default:"Metadata Edit"},columns:{type:Array,default:()=>[]},modalValue:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1},uploadFilename:{type:String,default:""},editFromFileSheet:{type:Boolean,default:!1},metaDataFields:{type:Object,default:()=>{}}},data(){return{fieldsModel:{},fieldsModalData:[]}},computed:{_repositoryField(){return this.repositoryField.map(t=>({...t,options:t.options?JSON.parse(t.options):[]}))}},watch:{fileData:{immediate:!0,deep:!0,async handler(){this.editFromFileSheet?(this.fieldsModalData=[],this.fileData.length&&this.fileData.forEach(t=>{this.fieldsModalData.push({fieldId:t.id,oldValue:t.value,newValue:t.value})})):this.processFieldsModel()}},value(){this.value&&this.processFieldsModel()}},methods:{processFieldsModel(){if(this.fieldsModel={},this.fileData.length?this.fileData.forEach(t=>{this.$set(this.fieldsModel,t.name,t.value)}):this._repositoryField.forEach(t=>{let e=this.columns.find(e=>Object(l["a"])(e.label)===Object(l["a"])(t.name));e?this.modalValue.formData?this.$set(this.fieldsModel,t.name,this.modalValue.formData.fields[e.id]):this.modalValue[e.name]?this.$set(this.fieldsModel,t.name,this.modalValue[e.name]):this.modalValue[e.id]&&this.$set(this.fieldsModel,t.name,this.modalValue[e.id]):Object(c["a"])(this.metaDataFields)?this.$set(this.fieldsModel,t.name,""):this.$set(this.fieldsModel,t.name,this.metaDataFields[t.name])}),this.uploadFilename){let t=this.uploadFilename.substring(0,this.uploadFilename.lastIndexOf(".")),e=this._repositoryField.find(t=>"filename"==t.name.toLowerCase());e&&this.$set(this.fieldsModel,e.name,t)}},closeModal(){this.$emit("close",!1)},async save(){const t=await this.$refs.form.validate();t&&(this.$emit("save",this.editFromFileSheet?this.fieldsModalData:this.fieldsModel),this.$emit("close",!1))},getField(t){let e=this._repositoryField.find(e=>t===e.id);if(e)return e}}},m=d,h=(i("4697"),i("2877")),u=Object(h["a"])(m,s,a,!1,null,"059cbd7c",null);e["a"]=u.exports},ee74:function(t,e,i){},ee7b:function(t,e,i){},eead:function(t,e,i){},ef04:function(t,e,i){},f042:function(t,e,i){"use strict";i("c721")},f108:function(t,e,i){},f458:function(t,e,i){},f6de:function(t,e,i){},f92f:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"item-list"}},[t.selectedDummyData?t._t("default"):t._e(),e("BaseScrollbar",{attrs:{height:t.breadcrumbs||t.report?"calc(100vh - 310px)":"calc(100vh - 260px)"}},[e("table",[t.tableHeader?e("thead",[e("tr",{staticStyle:{"background-color":"var(--body-bg-color)"}},[e("th",{staticClass:"sticky icon",staticStyle:{left:"0"}},[t.checkbox?e("div",{staticClass:"row items-center justify-center"},[e("CheckboxField",{staticClass:"col-auto q-pt-sm q-pb-sm",on:{input:t.handleSelectAll},model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}})],1):t._e()]),t.repository&&t.checkbox?[e("th",{staticClass:"sticky file-mark-icon",staticStyle:{left:"44px"}}),t.title?e("th",{staticClass:"sticky",staticStyle:{left:"80px"}},[t._t("titleHead",(function(){return[t._v(" "+t._s(t.title.label)+" ")]}),{title:t.title.label})],2):t._e()]:[t.title?e("th",{staticClass:"sticky",staticStyle:{left:"36px"}},[t._t("titleHead",(function(){return[t._v(" "+t._s(t.title.label)+" ")]}),{title:t.title.label})],2):t._e()],t._l(t._columns,(function(i){return e("th",{key:i.id},[t._v(" "+t._s(i.label)+" ")])})),t.noActions?t._e():e("th",{staticClass:"sticky action",staticStyle:{right:"0"}})],2)]):t._e(),e("tbody",[t._l(t.items,(function({key:i,value:s,data:a}){return[i?e("tr",{key:s},[e("td",{staticClass:"group-by",attrs:{colspan:"2"}},[e("span",{staticClass:"key"},[t._v(t._s(i)+": ")]),e("span",[t._v(t._s(s)+" ")]),e("span",[t._v("("+t._s(a.length)+")")])])]):t._e(),t._l(a,(function(i,s){return[e("tr",{key:i.id,class:{"no-border":0===s,background:!t.noBackground,checkout:2===i.checkinStatus},on:{click:function(e){return t.toggleLink(i,a)}}},[t.repository&&t.checkbox?[e("td",{staticClass:"sticky icon",staticStyle:{left:"0"}},[t.checkbox?e("div",{staticClass:"row items-center justify-center"},[e("CheckboxField",{on:{input:function(e){return t.handleCheckboxChange(i.id)}},model:{value:i.selected,callback:function(e){t.$set(i,"selected",e)},expression:"item.selected"}})],1):t._e()]),e("td",{staticClass:"sticky file-mark-icon",staticStyle:{left:"44px"}},[e("div",{staticClass:"row items-center justify-center",staticStyle:{width:"20px"}},[t._t("avatar",null,{item:i})],2)])]:[e("td",{staticClass:"sticky icon",staticStyle:{left:"0",width:"36px"}},[t.checkbox?e("div",{staticClass:"col items-center justify-center"},[e("CheckboxField",{on:{input:function(e){return t.handleCheckboxChange(i.id)}},model:{value:i.selected,callback:function(e){t.$set(i,"selected",e)},expression:"item.selected"}}),i.subWorkflow?[i.subWorkflow.length?e("BaseIcon",{staticClass:"cursor-pointer q-ml-sm",attrs:{name:i.expandSubworkflow?"mdi-chevron-down":"mdi-chevron-up"}}):t._e()]:t._e()],2):e("div",{staticClass:"col items-center justify-center"},[t._t("avatar",(function(){return[i.buttonAction?["Closed"!==i.status?[e("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Mark Completed",expression:"'Mark Completed'",modifiers:{top:!0}}],attrs:{name:t.selectedRowIndex===s?"mdi-check":i.icon,color:t.selectedRowIndex===s?"primary":i.color},on:{mouseover:function(e){t.selectedRowIndex=s},mouseout:function(e){t.selectedRowIndex=-1},click:function(e){return t.$emit("complete",i.id)}}})]:[e("BaseIcon",{attrs:{name:i.icon,color:i.color}})]]:[i.iconTooltip?[e("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.iconTooltip,expression:"item.iconTooltip",modifiers:{top:!0}}],attrs:{name:i.icon,color:i.color||"secondary"}})]:[e("BaseIcon",{attrs:{name:i.icon,color:i.color||"secondary"}})]]]}),{item:i}),i.subWorkflow?[i.subWorkflow.length?e("BaseIcon",{staticClass:"cursor-pointer q-ml-sm",attrs:{name:i.expandSubworkflow?"mdi-chevron-down":"mdi-chevron-up"}}):t._e()]:t._e()],2)])],t.title?e("td",{staticClass:"sticky",style:"left:"+t.leftcount,on:{click:function(e){i.link&&t.$emit("select",i.id,a)}}},[t._t("title",(function(){return[e("div",{staticClass:"font-medium ellipsis",class:i.link?"text-underline":"",staticStyle:{"max-width":"250px"}},[e("span",{on:{mouseover:function(e){return t.$emit("showThumbnail",i,e)},mouseleave:function(e){return t.$emit("hideThumbnail",i)}}},[t._v(t._s(i[t.title.name])+" ")])])]}),{item:i,title:i[t.title.name]}),t._t("thumbnail",null,{item:i})],2):t._e(),t._l(t._columns,(function(s){return e("td",{key:s.id},[t._t(s.name,(function(){return["TABLE"===s.dataType?[i[s.name]?[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Table Data",expression:"'Table Data'",modifiers:{top:!0}}],attrs:{icon:"mdi-table","is-flat":"","no-border":""},on:{click:function(e){return e.stopPropagation(),t.showTable(s.name,i[s.name])}}})]:[e("BaseActionButton",{attrs:{icon:"mdi-table","is-flat":"","no-border":"","is-disabled":""}})]]:"ICON"===s.type?[i[s.name]?[e("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.iconTooltip[s.name],expression:"item.iconTooltip[column.name]",modifiers:{top:!0}}],attrs:{name:i[s.name],color:i.iconColor[s.name]}})]:[t._v(" "+t._s("-")+" ")]]:"FILE_UPLOAD"===s.dataType?[i[s.name]?["string"===typeof i[s.name]?e("div",{staticClass:"ellipsis medium"},t._l(JSON.parse(i[s.name]),(function(s,a){return e("div",{key:a,staticClass:"row"},[e("FileIcon",{staticClass:"mini-avatar col-auto q-mr-sm",attrs:{"mime-type":t.fileType(s.fileName)}}),e("span",{staticClass:"text-secondary file-underline col",on:{click:function(e){return t.viewFile(s,i)}}},[t._v(t._s(s.fileName))])],1)})),0):e("div",{staticClass:"ellipsis medium"},t._l(i[s.name],(function(s,a){return e("div",{key:a,staticClass:"row"},[e("FileIcon",{staticClass:"mini-avatar col-auto q-mr-sm",attrs:{"mime-type":t.fileType(s.fileName)}}),e("span",{staticClass:"text-secondary file-underline col",on:{click:function(e){return t.viewFile(s,i)}}},[t._v(t._s(s.fileName))])],1)})),0)]:t._e()]:[e("div",{class:{"data-change":t.hasMetaDataEdit},on:{click:function(e){return t.handleOpenInput(i,s)}}},[t._v(" "+t._s(i[s.name]||"-")+" ")])]]}),{value:i[s.name],item:i})],2)})),t.noActions?t._e():e("td",{staticClass:"sticky action",staticStyle:{right:"0",width:"50px"}},[t._t("actions",(function(){return["BROWSE"===t.mode?[i.actionAccess?t._e():[e("div",{staticClass:"row justify-end no-wrap"},[t.security||t.visibility(i)?[i.actionButton?[i.infoIcon?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.infoIconTooltip,expression:"item.infoIconTooltip",modifiers:{top:!0}}],attrs:{icon:i.infoIcon,color:i.infoIconColor?i.infoIconColor:"primary","is-flat":"","no-border":""},on:{click:function(e){return e.stopPropagation(),t.$emit("info",i.id)}}}):t._e(),e("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"mdi-check-all",color:"secondary"},on:{click:function(e){return e.stopPropagation(),t.$emit("edit",i.id)}}}),e("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"mdi-bell-outline",color:"secondary"},on:{click:function(e){return e.stopPropagation(),t.$emit("edit",i.id)}}}),e("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-edit-outline",color:"secondary"},on:{click:function(e){return e.stopPropagation(),t.$emit("edit",i.id)}}}),e("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-shield-outline"},on:{click:function(e){return e.stopPropagation(),t.$emit("secure",i.id)}}}),e("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline",color:"red"},on:{click:function(e){return e.stopPropagation(),t.$emit("delete",i.id)}}}),e("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-more-vertical"},on:{click:function(e){return e.stopPropagation(),t.$emit("more",i.id)}}},[t._t("extraMenu")],2)]:[i.infoIcon?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.infoIconTooltip,expression:"item.infoIconTooltip",modifiers:{top:!0}}],attrs:{icon:i.infoIcon,color:i.infoIconColor?i.infoIconColor:"primary","is-flat":"","no-border":""},on:{click:function(e){return e.stopPropagation(),t.$emit("info",i.id)}}}):t._e(),1===i.emailStatus?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"send invite",expression:"'send invite'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-email-check-outline",color:"green"},on:{click:function(e){return e.stopPropagation(),t.$emit("resend",i.id)}}}):0===i.emailStatus?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"send invite",expression:"'send invite'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-email-sync-outline",color:"orange"},on:{click:function(e){return e.stopPropagation(),t.$emit("resend",i.id)}}}):t.resend?e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"send invite",expression:"'send invite'",modifiers:{top:!0}}],attrs:{"is-flat":"","no-border":"",icon:"mdi-email-outline",color:"secondary"},on:{click:function(e){return e.stopPropagation(),t.$emit("resend",i.id)}}}):t._e(),e("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-edit-outline",color:"secondary"},on:{click:function(e){return e.stopPropagation(),t.$emit("edit",i.id)}}}),e("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-trash-2-outline",color:"red"},on:{click:function(e){return e.stopPropagation(),t.$emit("delete",i.id)}}}),t.showExport?e("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-download-outline",color:"orange"},on:{click:function(e){return e.stopPropagation(),t.$emit("export",i.id)}}}):t._e(),e("BaseActionButton",{attrs:{"is-flat":"","no-border":"",icon:"eva-more-vertical"},on:{click:function(e){return e.stopPropagation(),t.$emit("more",i.id)}}},[t._t("extraMenu")],2)]]:t._e()],2)]]:t._e(),"TRASH"===t.mode?[e("div",{staticClass:"row justify-end"},[e("BaseActionButton",{attrs:{"is-flat":"",color:"secondary",icon:"mdi-history","no-border":""},on:{click:function(e){return e.stopPropagation(),t.$emit("restore",i.id)}}})],1)]:t._e()]}),{item:i})],2)],2),i.subWorkflow?[i.subWorkflow.length?[i.expandSubworkflow?e("tr",{key:i.id,staticClass:"sub-background"},[e("td",{attrs:{colspan:t._columns.length+3}},[e("table",{key:"subtable"+i.id,staticStyle:{"margin-left":"20px",border:"1px solid var(--divider-color)","table-layout":"fixed","max-width":"70%","min-width":"calc(70% - 1px)","border-collapse":"collapse","white-space":"nowrap"}},[e("thead",[e("tr",[e("th",{staticClass:"sticky icon",staticStyle:{left:"0","background-color":"rgb(222 217 247)",width:"2%"},attrs:{name:"icon"}}),t.title?e("th",{staticClass:"sticky",staticStyle:{left:"36px","background-color":"rgb(222 217 247)",width:"2%"},attrs:{name:"title"}},[e("div",{staticClass:"font-medium ellipsis",staticStyle:{"max-width":"250px"}},[t._v(" "+t._s(t.title.label)+" ")])]):t._e(),t._l(t._subWorkflowColumns,(function(i){return e("th",{key:i.id,staticStyle:{"background-color":"rgb(222 217 247)",width:"2%"}},[t._v(" "+t._s(i.label)+" ")])})),e("th",{staticClass:"sticky",staticStyle:{"background-color":"rgb(222 217 247)"}})],2)]),e("tbody",[t._l(i.subWorkflow,(function(i){return[e("tr",{key:i.requestNo},[e("td",{staticClass:"sticky icon sub-background",staticStyle:{left:"0"},attrs:{name:"avatar"}},[e("div",{staticClass:"row items-center sticky justify-center"},[e("BaseIcon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.iconTooltip,expression:"subItem.iconTooltip",modifiers:{top:!0}}],attrs:{name:i.icon,color:i.color}})],1)]),e("td",{staticClass:"sticky sub-background",staticStyle:{left:"0",width:"20%",color:"#007bff",cursor:"pointer"},attrs:{name:"title"}},[e("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:i.requestNo,expression:"subItem.requestNo",modifiers:{top:!0}}],staticClass:"row items-center text-underline",staticStyle:{overflow:"hidden !important","white-space":"unset !important",width:"220px"},on:{click:function(e){return t.openSubProcess(i)}}},[t._v(" "+t._s(i.requestNo||"-")+" ")])]),e("td",{staticClass:"sub-background",staticStyle:{width:"20%"}},[t._v(" "+t._s(i.stage)+" ")]),e("td",{staticClass:"sub-background",staticStyle:{width:"20%"}},[t._v(" "+t._s(i.raisedBy)+" ")]),e("td",{staticClass:"sub-background",staticStyle:{width:"20%"}},[t._v(" "+t._s(i.raisedAt)+" ")]),e("td",{staticClass:"sticky sub-background",staticStyle:{right:"0px",width:"20%"}},[t._t("subactions",null,{item:i})],2)])]}))],2)])])]):t._e()]:t._e()]:t._e()]}))]}))],2)])]),e("Modal",{attrs:{width:"60vw",height:"80vh"},on:{input:function(e){t.expandTableModal=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.tableTitle))]},proxy:!0},{key:"default",fn:function(){return[e("div",{attrs:{id:"tableData"}},[t.tableData.cellvalues?[e("table",t._l(t.tableData.cellvalues,(function(i,s){return e("tr",{key:s},t._l(i,(function(i){return e("NoHeader"===i.kind?"td":"th",{key:`r${s}_c${i.columnindex}`,tag:"th"},[t._v(" "+t._s(i.cellvalue)+" ")])})),1)})),0)]:[e("table",[e("thead",[e("tr",t._l(t.tableData[0],(function(i,s){return e("th",{key:s},[t._v(" "+t._s(s)+" ")])})),0)]),e("tbody",t._l(t.tableData,(function(i,s){return e("tr",{key:s},t._l(i,(function(i,s){return e("td",{key:s},[t._v(" "+t._s(i)+" ")])})),0)})),0)])]],2)]},proxy:!0}]),model:{value:t.expandTableModal,callback:function(e){t.expandTableModal=e},expression:"expandTableModal"}})],2)},a=[],o=(i("caad"),i("869e")),r=i("6a70"),n=i("fa1f"),l={name:"ItemList",components:{CheckboxField:o["a"],Modal:r["a"],FileIcon:n["a"]},props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},mode:{type:String,required:!0},noBackground:{type:Boolean,default:!1},noActions:{type:Boolean,default:!1},tableHeader:{type:Boolean,default:!0},security:{type:Boolean,default:!0},checkbox:{type:Boolean,default:!1},hasMetaDataEdit:{type:Boolean,required:!1},breadcrumbs:{type:Boolean,default:!1},report:{type:Boolean,default:!1},resend:{type:Boolean,default:!1},selectAll:{type:Boolean,default:!1},repository:{type:Boolean,default:!1},showExport:{type:Boolean,default:!1}},data(){return{selectedRowIndex:-1,userId:this.$store.state.session.id,email:this.$store.state.session.email,selectedDummyData:!1,expandTableModal:!1,tableTitle:"",tableData:[]}},computed:{_columns(){return this.columns.filter(t=>"TITLE"!==t.type&&t.isVisible)},title(){return this.columns.find(t=>"TITLE"===t.type)},leftcount(){return this.repository&&this.checkbox?"80px":"36px"},_subWorkflowColumns(){let t=[{id:this.$nano.id(),name:"stage",label:"Stage",type:"SINGLE_SELECT",isVisible:!0,isSortable:!0,isGroupable:!1},{id:this.$nano.id(),name:"raisedBy",label:"Raised By",type:"SINGLE_SELECT",isVisible:!0,isSortable:!0,isGroupable:!1},{id:this.$nano.id(),name:"raisedAt",label:"Raised On",type:"DATE",isVisible:!0,isSortable:!0,isGroupable:!1}];return t}},created(){this.items.forEach(t=>{t.data.forEach(t=>{this.$set(t,"selected",!1)})})},methods:{visibility(t){const e=Number(this.userId),i=this.email;let s=!1;const a=t.owner?t.owner.map(t=>t.id):[0],o=t.coordinator?t.coordinator.map(t=>t.id):[0];return(t.createdBy===i||a.includes(e)||o.includes(e)||1===e)&&(s=!0),s},handleCheckboxChange(t){this.selectAll=!1,this.selectedDummyData=!this.selectedDummyData;const e=this.items.flatMap(t=>t.data).find(e=>e.id===t);e&&this.$set(e,"selected",e.selected),this.$emit("update-selected-all",this.selectAll)},handleSelectAll(){!0===this.selectAll&&this.items.forEach(t=>{t.data.forEach(t=>{this.$set(t,"selected",!0)})}),!1===this.selectAll&&this.items.forEach(t=>{t.data.forEach(t=>{this.$set(t,"selected",!1)})}),this.$emit("update-selected-all",this.selectAll)},showTable(t,e){e&&(this.report?this.$emit("showTable",t,e):(this.tableTitle=t,this.tableData=JSON.parse(e),this.expandTableModal=!0))},handleOpenInput(t,e){this.$emit("openMetaDataEdit",t,e)},viewFile(t,e){t.createdBy=e.createdBy,t.createdAt=e.createdAt,t.name||(t.name=t.fileName),t.id||(t.id=t.itemId),this.$emit("viewFile",t)},fileType(t){if(t)return t.split(".").reverse()[0].slice(0,4)},toggleLink(t,e){t.expandSubworkflow=!t.expandSubworkflow,!t.link&&this.$emit("select",t.id,e),this.selectedDummyData=!this.selectedDummyData},openSubProcess(t){this.$emit("openSubWorkflow",t)}}},c=l,d=(i("d37d"),i("2877")),m=Object(d["a"])(c,s,a,!1,null,"00be4c3f",null);e["a"]=m.exports},f98d:function(t,e,i){},fa79:function(t,e,i){"use strict";i("3002")},fabd:function(t,e,i){},fad0:function(t,e,i){},fd26:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("BaseActionButton",{attrs:{"is-flat":"","no-border":t.noBorder,icon:t.darkTheme?"eva-moon-outline":"eva-sun-outline"},on:{click:t.toggleDarkTheme}})},a=[],o=i("2f62"),r={name:"ThemeSwitcher",props:{noBorder:{type:Boolean,default:!0}},computed:{...Object(o["c"])(["darkTheme"])},methods:{...Object(o["b"])(["toggleDarkTheme"])}},n=r,l=i("2877"),c=Object(l["a"])(n,s,a,!1,null,"b3ced1f0",null);e["a"]=c.exports},fd96:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Sheet",{attrs:{value:t.value,"no-padding":!0,"has-footer":"",width:"650px"},on:{input:function(e){return t.$emit("input",!1)}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Save Report")]},proxy:!0},{key:"default",fn:function(){return[e("FormFieldLabel",{staticClass:"q-pa-sm",attrs:{label:"This report will be saved to your reports section.you can also add it to a dashboard for quick access.stay organized and easily track your data insights!",transform:""}}),e("div",{attrs:{id:"document-save-details"}},[e("BaseScrollbar",{attrs:{height:"calc(100vh - 170px)"}},[e("div",{staticClass:"q-pl-md q-pr-md q-pb-md"},[e("ValidationObserver",{ref:"form"},[e("div",{staticClass:"field-wrapper"},[e("ValidationProvider",{attrs:{name:"Report Name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextField",{staticClass:"q-mb-sm",attrs:{label:"Report Name","is-mandatory":"",error:i[0]},model:{value:t.reportNmae,callback:function(e){t.reportNmae=e},expression:"reportNmae"}})]}}])}),e("ValidationProvider",{attrs:{name:"Description",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextField",{staticClass:"q-mb-sm",attrs:{label:"Description","is-mandatory":"",error:i[0]},model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}})]}}])}),e("div",{staticClass:"q-mr-md q-mt-lg",staticStyle:{"border-bottom":"1px solid var(--divider-color)",color:"var(--icon-color)"}},[t._v(" Add This Report To Dashboard : ")]),e("div",{},[e("CheckboxField",{staticClass:"q-mt-lg",attrs:{label:"Add To Dashboard",description:""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),t.selected?e("div",{staticClass:"q-mr-md q-mt-lg",staticStyle:{"border-bottom":"1px solid var(--divider-color)",color:"var(--icon-color)"}},[t._v(" Who Can Acess This Report : ")]):t._e(),t.selected?e("SingleChoiceField",{staticClass:"q-mt-lg",attrs:{value:t.selecteduser,options:t.selectUser,"options-per-line":2,"is-mandatory":"","show-options-wrapper":!1},on:{input:t.updateuser}}):t._e(),t.selected&&"selectuser"===t.selecteduser?e("MultiSelectField",{staticClass:"field q-mt-lg",attrs:{label:"users","is-mandatory":"",options:t.userList},model:{value:t.forwardUsers,callback:function(e){t.forwardUsers=e},expression:"forwardUsers"}}):t._e(),t._l(t.fileList,(function(i){return[e("q-chip",{key:i.id,staticClass:"chips secondary-hover cursor-pointer",attrs:{outline:"",color:"secondary"}},[e("q-avatar",{attrs:{icon:"mdi-file",color:"secondary","text-color":"white"},on:{click:function(e){return t.remove(i.id)}}}),t._v(" "+t._s(i.name)+" "),e("q-avatar",{staticClass:"close-icon",attrs:{icon:"mdi-close","text-color":"red"},on:{click:function(e){return t.remove(i.id)}}})],1)]}))],2)])],1)])],1)]},proxy:!0},{key:"footer",fn:function(){return[e("BaseButton",{staticClass:"q-mr-sm",attrs:{"is-flat":"",label:"cancel"},on:{click:function(e){return t.$emit("input",!1)}}}),e("BaseButton",{attrs:{label:"Save"},on:{click:t.saveFilter}})]},proxy:!0}])})},a=[],o=(i("14d9"),i("7bb1")),r=i("381e"),n=i("b3d1"),l=i("1b0d"),c=i("9234"),d=i("c3d2"),m=i("869e"),h=i("3445"),u={name:"EmailSharing",components:{Sheet:r["a"],ValidationObserver:o["a"],ValidationProvider:o["b"],TextField:n["a"],SingleChoiceField:c["a"],MultiSelectField:d["a"],CheckboxField:m["a"],FormFieldLabel:h["a"]},props:{value:{type:Boolean,default:!1},repositoryId:{type:Number,default:0},fileList:{type:Array,default:()=>[]},filter:{type:Array,default:()=>[]},page:{type:String,default:""},edit:{type:Array,default:()=>[]}},data(){return{reportNmae:"",subject:"",selected:!1,selecteduser:"",selectUser:[{id:this.$nano.id(),label:"Private to me",description:"",value:"private"},{id:this.$nano.id(),label:"Select User",description:"",value:"selectuser"}],userList:[],forwardUsers:[],userVale:[]}},watch:{selected:{deep:!0,immediate:!0,handler(){!1===this.selected&&(this.userList=[],this.forwardUsers=[],this.selecteduser="")}},value:{deep:!0,immediate:!0,async handler(){this.value&&await this.clearFields()}},edit:{deep:!0,immediate:!0,async handler(){if(await this.clearFields(),this.edit.length){this.forwardUsers=[];let t=JSON.parse(this.edit[0].assignTo);this.reportNmae=this.edit[0].name,this.subject=this.edit[0].description,this.selected=this.edit[0].dashboard,1===t.length?this.selecteduser="private":this.selecteduser="selectuser","selectuser"===this.selecteduser&&(await this.getUsers(),this.forwardUsers=t)}}}},created(){},methods:{clearFields(){this.userList=[],this.forwardUsers=[],this.selecteduser={},this.selected=!1,this.selecteduser="",this.reportNmae="",this.subject=""},remove(t){if(this.fileList.length>1){let e=this.fileList.filter(e=>e.id!=t);this.$emit("update:fileList",e)}else this.$alert.warning("Minimum one document is required")},async saveFilter(){const t=await this.$refs.form.validate();if(!t)return;let e=[];this.fileList.forEach(t=>{e.push(t.id)});let i=JSON.stringify(this.filter),s=[{uId:this.repositoryId,filters:i}],a=JSON.stringify(s),o=this.$store.state.session.id;if("selectuser"===this.selecteduser?this.userVale=this.forwardUsers:"private"===this.selecteduser&&(this.userVale=[o]),this.edit.length){let t={name:this.reportNmae,description:this.subject,filterJson:this.edit[0].filterJson,filterFrom:this.page,pinDashboard:this.selected,assignTo:JSON.stringify(this.userVale)};const{error:e}=await l["e"].deleteFilter(this.edit[0].id,t);if(e)return void this.$alert.warning("Editing error on Filter ")}else{let t={name:this.reportNmae,description:this.subject,filterJson:a,filterFrom:this.page,pinDashboard:this.selected,assignTo:JSON.stringify(this.userVale)};const{error:e}=await l["e"].saveDashboard(t);if(e)return void this.$alert.warning("The Name Already Registered ")}this.$alert.success("The Filter Saved SuccessFully"),this.clearFields(),this.$emit("input",!1),this.$emit("success")},updateuser(t){this.selecteduser=t,this.$emit("update:selected",this.selecteduser),"selectuser"===this.selecteduser?this.getUsers():"private"===this.selecteduser&&(this.userList=[],this.forwardUsers=[])},async getUsers(){this.userList=[];const{error:t,payload:e}=await l["s"].getUserList();t?this.$alert.error("Error fetching users"):e&&e.map(t=>{t.id&&this.userList.push({id:this.$nano.id(),label:t.value,value:t.id})})}}},p=u,f=(i("2d32"),i("2877")),v=i("b047"),y=i("cb32"),b=i("93dc"),g=i.n(b),w=Object(f["a"])(p,s,a,!1,null,"943906e0",null);e["a"]=w.exports;g()(w,"components",{QChip:v["a"],QAvatar:y["a"]})},fdd5:function(t,e,i){"use strict";i("4d38")}}]);
//# sourceMappingURL=ocr-reports.1de36b04.js.map