(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["portal-builder"],{"00f8":function(t,e,i){"use strict";i("96e4")},"10e4":function(t,e,i){},1772:function(t,e,i){"use strict";i("26bd")},"26bd":function(t,e,i){},2948:function(t,e,i){"use strict";i("f108")},"36af":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("StateWrapper",{attrs:{icon:"mdi-progress-clock",title:t.title,description:"The feature is currently in development. We will notify you once it is\n    ready."}})},s=[],o=i("c49c"),n={name:"WorkInProgress",components:{StateWrapper:o["a"]},props:{feature:{type:String,default:""}},computed:{title(){return this.feature+", Coming soon"}}},r=n,l=i("2877"),u=Object(l["a"])(r,a,s,!1,null,"cfa1873a",null);e["a"]=u.exports},"4f41":function(t,e,i){"use strict";i("8324")},"5ee5":function(t,e,i){"use strict";i("ec84")},"64d9":function(t,e,i){"use strict";i("d564")},7410:function(t,e,i){},8324:function(t,e,i){},"913d":function(t,e,i){"use strict";i("10e4")},"96e4":function(t,e,i){},"988b":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"portal-builder-wrapper"}},[e("ItemBuilder",{on:{close:t.closeBuilder},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Portal "+t._s(t._tab)+" ")]},proxy:!0},{key:"description",fn:function(){return[t._v(" "+t._s(t._description)+" ")]},proxy:!0},{key:"header",fn:function(){return[e("div",{staticClass:"row items-center justify-center"},[e("Tabs",{staticClass:"tabs",attrs:{tabs:t.tabs,"is-full-width":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}})],1)]},proxy:!0},{key:"actions",fn:function(){return[e("BaseActionButton",{staticClass:"q-mr-sm",attrs:{icon:"eva-question-mark",color:"secondary"},on:{click:t.showQuickHelp}})]},proxy:!0}])},[e("PortalBuilder",{directives:[{name:"show",rawName:"v-show",value:"BUILDER"===t.tab,expression:"tab === 'BUILDER'"}],attrs:{portal:t.portal},on:{save:t.createPortal}}),"SETTINGS"===t.tab?e("PortalSettings",{attrs:{portal:t.portal,"workflow-list":t.workflowList,"user-list":t.userList,"form-list":t.masterFormList},on:{update:t.updateSettings}}):t._e(),"PUBLISH"===t.tab?e("PortalPublish",{attrs:{"portal-settings":t.portal.settings},on:{update:t.updateSettings}}):t._e(),e("QuickHelp",{model:{value:t.quickHelp,callback:function(e){t.quickHelp=e},expression:"quickHelp"}})],1)],1)},s=[],o=(i("14d9"),i("8287")),n=i("b94d"),r=i("36b4"),l=i("52ef"),u=i("9996"),c=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"portal-builder"}},[e("PortalHeader",{attrs:{"portal-settings":t.portal.settings},on:{settings:t.showSettings,save:t.savePortal}}),e("PortalIframe")],1)},p=[],d=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"portal-header"}},[e("div",{staticClass:"row items-center"},[e("BaseActionButton",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"edit portal settings",expression:"'edit portal settings'",modifiers:{top:!0}}],staticClass:"q-mr-md",attrs:{icon:"eva-edit","is-flat":"",color:"primary"},on:{click:function(e){return t.$emit("settings")}}}),e("div",[e("div",{staticClass:"title-2"},[t._v(t._s(t.portalName))]),e("div",{staticClass:"description"},[t._v(t._s(t.portalDescription))])])],1),e("q-space"),e("BaseButton",{attrs:{label:"save",icon:"eva-save-outline"},on:{click:function(e){return t.$emit("save")}}})],1)},h=[],m={name:"PortalHeader",props:{portalSettings:{type:Object,required:!0}},computed:{portalName(){return this.portalSettings.general.name||"Portal name"},portalDescription(){return this.portalSettings.general.description||"portal description"}}},f=m,b=(i("4f41"),i("2877")),g=i("2c91"),S=i("93dc"),v=i.n(S),y=Object(b["a"])(f,d,h,!1,null,"5ebae760",null),w=y.exports;v()(y,"components",{QSpace:g["a"]});var T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"iframe-wrapper"},[e("iframe",{attrs:{id:"portalBuilderiFrame",src:t.fileLink,frameborder:"0",height:"100%",width:"100%"}})])},F=[],I={name:"PortalIframe",computed:{fileLink(){let t=location.origin.replace("http://localhost:8080","http://52.172.32.88");return"https://demo.ezofis.com"===t||"http://52.172.32.88"===t?t+"/EZPORTAL":t+"/PORTAL"}}},_=I,E=(i("5ee5"),Object(b["a"])(_,T,F,!1,null,"45d62bd4",null)),L=E.exports,O={name:"PortalBuilder",components:{PortalHeader:w,PortalIframe:L},props:{portalId:{type:String,default:""},portal:{type:Object,required:!0}},data(){return{}},methods:{showSettings(){this.$emit("settings")},savePortal(){this.$emit("save")}}},k=O,P=(i("00f8"),Object(b["a"])(k,c,p,!1,null,"628f0ef2",null)),U=P.exports,A=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"portal-settings"}},[e("ActionBar",{attrs:{tabs:t.tabs},on:{save:t.saveSettings},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}}),e("BaseScrollbar",{attrs:{height:"calc(100vh - 125px)"}},[e("div",{staticClass:"row q-pb-xl"},[e("ValidationObserver",{ref:"portal"},[e("GeneralSettings",{ref:"GENERAL_SETTINGS",attrs:{portal:t.portal,mode:t.mode,name:t.name,description:t.description,workflow:t.workflow,superuser:t.superuser,"workflow-list":t.workflowList,"user-list":t.userList,"is-active":"GENERAL_SETTINGS"===t.tab},on:{"update:name":function(e){t.name=e},"update:description":function(e){t.description=e},"update:workflow":function(e){t.workflow=e},"update:superuser":function(e){t.superuser=e},click:function(e){t.tab="GENERAL_SETTINGS"}}}),e("BaseSeparator",{attrs:{"has-left-inset":""}}),e("AuthenticationSettings",{ref:"AUTHENTICATION_SETTINGS",attrs:{feature:"Portal Authentication",authentication:t.authentication,"form-list":t.formList,"is-active":"AUTHENTICATION_SETTINGS"===t.tab},on:{"update:authentication":function(e){t.authentication=e},click:function(e){t.tab="AUTHENTICATION_SETTINGS"}}}),e("BaseSeparator",{attrs:{"has-left-inset":""}}),e("Notification",{ref:"NOTIFICATIONS_SETTINGS",attrs:{feature:"Portal Authentication",authentication:t.authentication,"form-list":t.formList,"is-active":"NOTIFICATIONS_SETTINGS"===t.tab},on:{"update:authentication":function(e){t.authentication=e},click:function(e){t.tab="NOTIFICATIONS_SETTINGS"}}}),"WELCOME_PAGE_SETTINGS"===t.tab?e("WorkInProgress",{attrs:{feature:"Portal Welcome Page"}}):t._e(),"THANK_YOU_PAGE_SETTINGS"===t.tab?e("WorkInProgress",{attrs:{feature:"Thank you Page"}}):t._e(),"THANK_YOU_PAGE_SETTINGS"===t.tab?e("WorkInProgress",{attrs:{feature:"Thank you Page"}}):t._e(),"HEADER_AND_FOOTER"===t.tab?e("WorkInProgress",{attrs:{feature:"Header & Footer"}}):t._e()],1)],1)])],1)},C=[],x=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"action-bar"}},[e("Tabs",{attrs:{value:t.value,tabs:t.tabs,color:"secondary"},on:{input:t.handleInput}}),e("q-space"),e("BaseButton",{staticClass:"q-ml-md",attrs:{icon:"eva-save-outline",label:"save","is-loading":t.isLoading},on:{click:function(e){return t.$emit("save")}}})],1)},B=[],N={name:"ActionBar",components:{Tabs:n["a"]},props:{value:{type:String,required:!0},tabs:{type:Array,required:!0},isLoading:{type:Boolean,default:!1}},methods:{handleInput(t){this.$emit("input",t)}}},$=N,q=(i("c018"),Object(b["a"])($,x,B,!1,null,"6105805f",null)),H=q.exports;v()(q,"components",{QSpace:g["a"]});var R=i("7bb1"),G=function(){var t=this,e=t._self._c;return e("FormSection",t._g({attrs:{icon:t.isActive?"eva-options-2":"eva-options-2-outline","is-active":t.isActive},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("General")]},proxy:!0},{key:"description",fn:function(){return[t._v(" Name your portal and provide detailed description for your reference ")]},proxy:!0}])},t.$listeners),[e("ValidationProvider",{attrs:{name:"name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("TextField",{staticClass:"q-mb-lg",attrs:{value:t.name,label:"name","is-mandatory":"","is-readonly":"EDIT"===t.mode,error:i[0]},on:{input:t.updateName}})]}}])}),e("TextAreaField",{staticClass:"q-mb-lg",attrs:{value:t.description,label:"description"},on:{input:t.updateDescription}}),e("SelectField",{staticClass:"q-mb-sm",attrs:{value:t.workflow,"is-mandatory":"",label:"Workflow",options:t.workflowList},on:{input:t.updateWorkflow}}),e("MultiSelectField",{staticClass:"q-mb-sm",attrs:{value:t.superuser,label:"Superuser",options:t.userList},on:{input:t.updateSuperuser}})],1)},D=[],W=i("e47f"),j=i("b3d1"),M=i("6df3"),z=i("12b8"),Q=i("c3d2"),J={name:"GeneralSettings",components:{FormSection:W["a"],ValidationProvider:R["b"],TextField:j["a"],TextAreaField:M["a"],SelectField:z["a"],MultiSelectField:Q["a"]},props:{portal:{type:Object,required:!0},name:{type:String,required:!0},description:{type:String,required:!0},workflow:{type:Number,default:0},superuser:{type:Array,default:()=>[]},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"},workflowList:{type:Array,default:()=>[]},userList:{type:Array,default:()=>[]}},methods:{updateName(t){this.$emit("update:name",t)},updateDescription(t){this.$emit("update:description",t)},updateWorkflow(t){this.$emit("update:workflow",t)},updateSuperuser(t){this.$emit("update:superuser",t)}}},V=J,K=Object(b["a"])(V,G,D,!1,null,"7e5fcf97",null),Y=K.exports,Z=function(){var t=this,e=t._self._c;return e("FormSection",t._g({staticClass:"authentication-settings",attrs:{icon:t.isActive?"mdi-account-lock":"mdi-account-lock-outline","is-active":t.isActive},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Authentication")]},proxy:!0},{key:"description",fn:function(){return[t._v(" Verifies the identity of a user attempting to gain access the portal ")]},proxy:!0}])},t.$listeners),[e("SingleChoiceField",{staticClass:"q-pb-md",attrs:{value:t.authentication.loginType,label:"login types",options:t.loginTypes,"options-per-line":1,"is-mandatory":""},on:{input:t.updateLoginType}}),e("SingleChoiceField",{staticClass:"q-pb-md",attrs:{value:t.authentication.loginType,options:t.loginApplications,"options-per-line":1,"is-mandatory":"","show-options-wrapper":!1},on:{input:t.updateLoginType}}),"APP_LOGIN"===t.authentication.loginType?[e("div",{staticClass:"q-ml-lg"},[e("MultipleChoiceField",{staticClass:"q-ml-sm q-pb-md",attrs:{value:t.authentication.socialLogin,options:t.additionalLoginTypeOptions,"options-per-line":1,label:"Social Login"},on:{input:t.updateAdditionalLoginTypes}})],1)]:t._e(),e("SingleChoiceField",{staticClass:"q-pb-md",attrs:{value:t.authentication.loginType,options:t.loginMaster,"options-per-line":1,"is-mandatory":"","show-options-wrapper":!1},on:{input:t.updateLoginType}}),"MASTER_LOGIN"===t.authentication.loginType?[e("div",{staticClass:"q-ml-lg"},[e("SelectField",{staticClass:"q-ml-sm",attrs:{value:t.authentication.formId,"is-mandatory":"",label:"Master Form",options:t.formList},on:{input:t.updateFormId}}),e("MultiSelectField",{staticClass:"q-pa-sm",attrs:{value:t.authentication.usernameField,"is-mandatory":"",label:"Username Field",options:t.formFields},on:{input:t.updateUsernameField}}),e("SelectField",{staticClass:"q-pa-sm q-pb-md",attrs:{value:t.authentication.firstnameField,"is-mandatory":"",label:"First Name Field",options:t.formFields},on:{input:t.updateFirstnameField}}),e("SingleChoiceField",{staticClass:"q-pb-md",attrs:{value:t.authentication.passwordTypes,options:t.PasswordTypeOtp,"options-per-line":1,"is-mandatory":"","show-options-wrapper":!1},on:{input:t.updatePasswordTypes}}),e("SingleChoiceField",{staticClass:"q-pb-md",attrs:{value:t.authentication.passwordTypes,options:t.PasswordType,"options-per-line":1,"is-mandatory":"","show-options-wrapper":!1},on:{input:t.updatePasswordTypes}}),"PASSWORD"===t.authentication.passwordTypes?[e("div",{staticClass:"q-ml-lg"},[e("SelectField",{staticClass:"q-ml-sm q-pb-md",attrs:{value:t.authentication.passwordField,"is-mandatory":"",label:"Password Field",options:t.formFields},on:{input:t.updatePasswordField}})],1)]:t._e(),e("SingleChoiceField",{staticClass:"q-pb-md",attrs:{value:t.authentication.passwordTypes,options:t.socialType,"options-per-line":1,"is-mandatory":"","show-options-wrapper":!1},on:{input:t.updatePasswordTypes}}),"SOCIAL_LOGIN"===t.authentication.passwordTypes?[e("div",{staticClass:"q-ml-lg"},[e("MultipleChoiceField",{staticClass:"q-ml-sm",attrs:{value:t.authentication.socialLogin,options:t.additionalLoginTypeOptions,"options-per-line":1,"show-options-wrapper":!1},on:{input:t.updateAdditionalLoginTypes}})],1)]:t._e()],2)]:t._e()],2)},X=[],tt=i("9234"),et=i("1e48"),it=i("1b0d"),at={name:"AuthenticationSettings",components:{FormSection:W["a"],SingleChoiceField:tt["a"],MultipleChoiceField:et["a"],SelectField:z["a"],MultiSelectField:Q["a"]},props:{isActive:{type:Boolean,default:!1},authentication:{type:Object,default:()=>{}},formList:{type:Array,default:()=>[]}},data(){return{loginTypes:[{id:this.$nano.id(),label:"Email with OTP",description:"Sends OTP to the Email",value:"EMAIL_LOGIN"}],loginApplications:[{id:this.$nano.id(),label:"Application Login",description:"Validate accounts to application users",value:"APP_LOGIN"}],loginMaster:[{id:this.$nano.id(),label:"Master Login",description:"Validate accounts to master",value:"MASTER_LOGIN"}],PasswordTypeOtp:[{id:this.$nano.id(),label:" Login With OTP",description:"Use A One Time Password For Initial Login",value:"OTP"}],PasswordType:[{id:this.$nano.id(),label:"Login Password Field",description:"Use The Login Password field From The Master For Authentication",value:"PASSWORD"}],socialType:[{id:this.$nano.id(),label:"Social Login",description:"Enable Users To Log In Using Their Google (or) Microsoft Accounts",value:"SOCIAL_LOGIN"}],additionalLoginTypeOptions:[{id:this.$nano.id(),label:"Google",value:"GOOGLE_LOGIN"},{id:this.$nano.id(),label:"Microsoft",value:"MICROSOFT_LOGIN"}],formFields:[]}},watch:{authentication:{immediate:!0,handler(){this.authentication.formId&&this.getFormFields(this.authentication.formId)}}},methods:{updateLoginType(t){this.authentication.loginType=t,this.authentication.socialLogin=[],this.authentication.formId=0,this.formFields=[],this.authentication.usernameField=[],this.authentication.firstnameField="",this.authentication.passwordField="",this.authentication.passwordTypes="OTP",this.$emit("update:authentication",this.authentication)},updateFormId(t){this.authentication.formId=t,this.$emit("update:authentication",this.authentication),this.getFormFields(t)},updateUsernameField(t){this.authentication.usernameField=t,this.$emit("update:authentication",this.authentication)},updatePasswordField(t){this.authentication.passwordField=t,this.$emit("update:authentication",this.authentication)},updatePasswordTypes(t){this.authentication.passwordTypes=t,"OTP"===this.authentication.passwordTypes&&(this.authentication.passwordField="",this.authentication.socialLogin=[]),"SOCIAL_LOGIN"===this.authentication.passwordTypes&&(this.authentication.passwordField=""),"PASSWORD"===this.authentication.passwordTypes&&(this.authentication.socialLogin=[]),this.$emit("update:authentication",this.authentication)},updateFirstnameField(t){this.authentication.firstnameField=t,this.$emit("update:authentication",this.authentication)},updateAdditionalLoginTypes(t){this.authentication.socialLogin=t,this.$emit("update:authentication",this.authentication)},async getFormFields(t){if(this.formFields=[],t){const{error:e,payload:i}=await it["g"].getForm(t);if(e)return void this.$alert.error(e);if(i){let t=JSON.parse(i.formJson),e=[];const a=[...t.panels,...t.secondaryPanels];if(!a.length)return;for(const i of a)e.push(...i.fields);e.forEach(t=>{"DIVIDER"!==t.type&&this.formFields.push({id:t.id,label:t.label,value:t.id})})}}}}},st=at,ot=Object(b["a"])(st,Z,X,!1,null,"0cd4319f",null),nt=ot.exports,rt=i("5c8a"),lt=i("36af"),ut=function(){var t=this,e=t._self._c;return e("FormSection",t._g({attrs:{icon:t.isActive?"mdi-bell-ring":"mdi-bell-ring-outline","is-active":t.isActive},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Notifications")]},proxy:!0},{key:"description",fn:function(){return[t._v(" Send Notification To the Logi Portal Url for New Users And Updates Exsisting Master Entries ")]},proxy:!0}])},t.$listeners),[e("CheckboxField",{staticClass:"q-pt-md",attrs:{label:"Enable Notification To External User",description:"Sends Notification to Login Portal Url For new User and Updates Existing Master Entries"},on:{input:t.updateNotification},model:{value:t.authentication.notification,callback:function(e){t.$set(t.authentication,"notification",e)},expression:"authentication.notification"}})],1)},ct=[],pt=i("869e"),dt={name:"NotificationSettings",components:{FormSection:W["a"],CheckboxField:pt["a"]},props:{isActive:{type:Boolean,default:!1},authentication:{type:Object,default:()=>{}}},methods:{updateNotification(t){this.authentication.notification=t,this.$emit("update:authentication",this.authentication)}}},ht=dt,mt=Object(b["a"])(ht,ut,ct,!1,null,"50e69710",null),ft=mt.exports,bt={name:"PortalSettings",components:{ActionBar:H,ValidationObserver:R["a"],GeneralSettings:Y,AuthenticationSettings:nt,WorkInProgress:lt["a"],Notification:ft},props:{portal:{type:Object,required:!0},workflowList:{type:Array,default:()=>[]},userList:{type:Array,default:()=>[]},formList:{type:Array,default:()=>[]}},data(){return{mode:"NEW",tab:"GENERAL_SETTINGS",tabs:[{id:this.$nano.id(),label:"general",value:"GENERAL_SETTINGS"},{id:this.$nano.id(),label:"authentication",value:"AUTHENTICATION_SETTINGS"},{id:this.$nano.id(),label:"notifications",value:"NOTIFICATIONS_SETTINGS"}],name:"",description:"",workflow:0,superuser:[],authentication:{loginType:"",formId:0,usernameField:[],passwordField:"",firstnameField:"",socialLogin:[],passwordTypes:"OTP",notification:!1}}},watch:{tab(){this.$refs[this.tab].$el.scrollIntoView({behavior:"smooth"})},portal:{immediate:!0,deep:!0,handler(){const t=Object(rt["a"])(this.portal.settings);this.name=t.general.name,this.description=t.general.description,this.workflow=t.general.workflow,this.superuser=t.general.superuser,this.authentication=t.specific.authentication,"string"===typeof this.authentication.usernameField&&(this.authentication.usernameField=[this.authentication.usernameField])}}},methods:{async saveSettings(){const t=await this.$refs.portal.validate();if(!t)return;const e=Object(rt["a"])(this.portal.settings);e.general.name=this.name,e.general.description=this.description,e.general.workflow=this.workflow,e.general.superuser=this.superuser,e.specific.authentication=this.authentication,this.$emit("update",e)}}},gt=bt,St=Object(b["a"])(gt,A,C,!1,null,"34d886a2",null),vt=St.exports,yt=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"portal-publish"}},[t.checkFeature?[e("ActionBar",{attrs:{tabs:t.tabs},on:{save:t.saveSettings},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}})]:[e("ActionBar",{attrs:{tabs:t.filterTabs},on:{save:t.saveSettings},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}})],e("BaseScrollbar",{attrs:{height:"calc(100vh - 138px)"}},[e("div",{staticClass:"row q-pb-xl"},[e("ValidationObserver",{ref:"portal"},[e("PublishOptions",{ref:"PUBLISH",attrs:{mode:t.mode,"publish-option":t.publishOption,"publish-schedule":t.publishSchedule,"unpublish-schedule":t.unpublishSchedule,"is-active":"PUBLISH"===t.tab},on:{"update:publishOption":function(e){t.publishOption=e},"update:publish-option":function(e){t.publishOption=e},"update:publishSchedule":function(e){t.publishSchedule=e},"update:publish-schedule":function(e){t.publishSchedule=e},"update:unpublishSchedule":function(e){t.unpublishSchedule=e},"update:unpublish-schedule":function(e){t.unpublishSchedule=e},click:function(e){t.tab="PUBLISH"}}}),t.checkFeature?e("BaseSeparator",{attrs:{"has-left-inset":""}}):t._e(),t.checkFeature?e("ShareOptions",{ref:"SHARE",attrs:{mode:t.mode,"is-active":"SHARE"===t.tab,"email-to-internal-users":t.emailToInternalUsers,"email-to-external-users":t.emailToExternalUsers},on:{"update:emailToInternalUsers":function(e){t.emailToInternalUsers=e},"update:email-to-internal-users":function(e){t.emailToInternalUsers=e},"update:emailToExternalUsers":function(e){t.emailToExternalUsers=e},"update:email-to-external-users":function(e){t.emailToExternalUsers=e},click:function(e){t.tab="SHARE"}}}):t._e(),t.checkFeature?e("BaseSeparator",{attrs:{"has-left-inset":""}}):t._e(),t.checkFeature?e("EmbedOptions",{ref:"EMBED",attrs:{mode:t.mode,"is-active":"EMBED"===t.tab},on:{click:function(e){t.tab="EMBED"}}}):t._e()],1)],1)])],2)},wt=[],Tt=function(){var t=this,e=t._self._c;return e("FormSection",t._g({attrs:{icon:t.isActive?"mdi-bullhorn":"mdi-bullhorn-outline","is-active":t.isActive},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Publish")]},proxy:!0},{key:"description",fn:function(){return[t._v(" Manage the publishing status of your portal ")]},proxy:!0}])},t.$listeners),[e("FormFieldLabel",{attrs:{label:"publish options"}}),e("div",{staticClass:"options-wrapper"},[e("RadioField",{staticClass:"q-mb-md",attrs:{value:"DRAFT"===t.publishOption,label:"Save as Draft",description:"Pick from where you left"},on:{input:function(e){return t.updatePublishOption("DRAFT")}}}),e("RadioField",{staticClass:"q-mb-md",attrs:{value:"PUBLISHED"===t.publishOption,label:"Publish Now",description:"Deploy and  publish now"},on:{input:function(e){return t.updatePublishOption("PUBLISHED")}}}),t.checkFeature?e("BaseFeatureLock",{attrs:{position:"CENTER_RIGHT"}},[e("RadioField",{staticClass:"q-mb-md",attrs:{value:"PUBLISH_SCHEDULE"===t.publishOption,label:"Schedule to Publish",description:"Deploy but publish this later"},on:{input:function(e){return t.updatePublishOption("PUBLISH_SCHEDULE")}}})],1):t._e(),"PUBLISH_SCHEDULE"===t.publishOption?e("DateTimeField",{staticClass:"q-mb-md",staticStyle:{"margin-left":"36px"},attrs:{value:t.publishSchedule},on:{input:t.updatePublishSchedule}}):t._e(),e("RadioField",{staticClass:"q-mb-md",attrs:{value:"UNPUBLISHED"===t.publishOption,label:"Unpublish Now",description:"Bring back this from to draft now"},on:{input:function(e){return t.updatePublishOption("UNPUBLISHED")}}}),t.checkFeature?e("BaseFeatureLock",{attrs:{position:"CENTER_RIGHT"}},[e("RadioField",{attrs:{value:"UNPUBLISH_SCHEDULE"===t.publishOption,label:"Schedule to Unpublish",description:"Bring back this portal to draft later"},on:{input:function(e){return t.updatePublishOption("UNPUBLISH_SCHEDULE")}}})],1):t._e(),"UNPUBLISH_SCHEDULE"===t.publishOption?e("DateTimeField",{staticClass:"q-mt-md",staticStyle:{"margin-left":"36px"},attrs:{value:t.unpublishSchedule},on:{input:t.updateUnpublishSchedule}}):t._e()],1)],1)},Ft=[],It=i("3445"),_t=i("e74c"),Et=i("d1e5"),Lt={name:"PublishOptions",components:{FormSection:W["a"],FormFieldLabel:It["a"],RadioField:_t["a"],DateTimeField:Et["a"]},props:{publishOption:{type:String,required:!0},publishSchedule:{type:String,required:!0},unpublishSchedule:{type:String,required:!0},isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"}},computed:{checkFeature(){let t=location.origin;return"http://localhost:8080"===t||"https://demo.ezofis.com"===t||"http://52.172.32.88"===t}},methods:{updatePublishOption(t){this.$emit("update:publishOption",t)},updatePublishSchedule(t){this.$emit("update:publishSchedule",t)},updateUnpublishSchedule(t){this.$emit("update:unpublishSchedule",t)}}},Ot=Lt,kt=(i("b962"),Object(b["a"])(Ot,Tt,Ft,!1,null,"6286a210",null)),Pt=kt.exports,Ut=function(){var t=this,e=t._self._c;return e("FormSection",t._g({attrs:{icon:t.isActive?"eva-share":"eva-share-outline","is-active":t.isActive},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Share")]},proxy:!0},{key:"description",fn:function(){return[t._v(" Easily share and collaborate on your portals through multiple channels, including URL, QR code, and email ")]},proxy:!0}])},t.$listeners),[e("BaseFeatureLock",[e("TextField",{staticClass:"q-mb-md",attrs:{value:t.portalUrl,label:"portal url","is-mandatory":"","is-readonly":""}}),e("BaseButton",{staticClass:"q-mb-lg",attrs:{label:"Copy URL"}})],1),e("BaseFeatureLock",[e("QRCode",{staticClass:"q-mb-lg"})],1),e("BaseFeatureLock",[e("EmailTo",{attrs:{"email-to-internal-users":t.emailToInternalUsers,"email-to-external-users":t.emailToExternalUsers},on:{updateInternalUsers:t.updateInternalUsers,updateExternalUsers:t.updateExternalUsers}})],1)],1)},At=[],Ct=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"portal-qr-code"}},[e("FormFieldLabel",{attrs:{label:"QR Code","is-mandatory":""}}),e("div",{staticClass:"wrapper"},[e("img",{attrs:{src:i("f055"),alt:"qr code"}}),e("div",{staticClass:"col q-ml-lg"},[e("div",{},[t._v(" Share this QR code with your clients to let them access the portal directly on their devices ")]),e("BaseButton",{staticClass:"q-mt-md",attrs:{label:"download",color:"secondary"}})],1)])],1)},xt=[],Bt={name:"QRCode",components:{FormFieldLabel:It["a"]}},Nt=Bt,$t=(i("1772"),Object(b["a"])(Nt,Ct,xt,!1,null,"3e8ed969",null)),qt=$t.exports,Ht=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"email-to"}},[e("FormFieldLabel",{attrs:{label:"Email To"}}),e("div",{staticClass:"options-wrapper"},[e("CheckboxField",{staticClass:"q-mb-md",attrs:{label:"Internal Users",description:"Share the portal with users within your organization"},model:{value:t.showInternalUsers,callback:function(e){t.showInternalUsers=e},expression:"showInternalUsers"}}),t.showInternalUsers?e("MultiSelectField",{staticClass:"q-mb-md",attrs:{value:t.emailToInternalUsers,options:t.internalUsers},on:{input:t.updateInternalUsers}}):t._e(),e("CheckboxField",{attrs:{label:"External Users",description:"Share the portal with users outside your organization"},model:{value:t.showExternalUsers,callback:function(e){t.showExternalUsers=e},expression:"showExternalUsers"}}),t.showExternalUsers?e("TextAreaField",{staticClass:"q-mt-md",attrs:{value:t.externalUsers,placeholder:"Add each email on a new line"},on:{input:t.updateExternalUsers}}):t._e()],1)],1)},Rt=[],Gt={name:"EmailTo",components:{FormFieldLabel:It["a"],CheckboxField:pt["a"],MultiSelectField:Q["a"],TextAreaField:M["a"]},props:{emailToInternalUsers:{type:Array,required:!0},emailToExternalUsers:{type:Array,required:!0}},data(){return{showInternalUsers:!1,internalUsers:[],showExternalUsers:!1}},computed:{externalUsers(){return this.emailToExternalUsers.join("\n")}},methods:{updateInternalUsers(t){this.$emit("updateInternalUsers",t)},updateExternalUsers(t){const e=t.split("\n");this.$emit("updateExternalUsers",e)}}},Dt=Gt,Wt=(i("e95e"),Object(b["a"])(Dt,Ht,Rt,!1,null,"75848d8d",null)),jt=Wt.exports,Mt={name:"ShareOptions",components:{FormSection:W["a"],TextField:j["a"],QRCode:qt,EmailTo:jt},props:{isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"},emailToInternalUsers:{type:Array,required:!0},emailToExternalUsers:{type:Array,required:!0}},data(){return{portalUrl:"www.ezofis.com/portal/amazon/3pWg9ovmk2-TKzm8brzSA"}},methods:{updateInternalUsers(t){this.$emit("update:emailToInternalUsers",t)},updateExternalUsers(t){this.$emit("update:emailToExternalUsers",t)}}},zt=Mt,Qt=Object(b["a"])(zt,Ut,At,!1,null,"1601a5a3",null),Jt=Qt.exports,Vt=function(){var t=this,e=t._self._c;return e("FormSection",t._g({attrs:{icon:"eva-code-download","is-active":t.isActive},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Embed")]},proxy:!0},{key:"description",fn:function(){return[t._v(" Easily embed this portal in your website or in your web app through multiple ways, including iFrame, JavaScript, and as a button. ")]},proxy:!0}])},t.$listeners),[e("BaseFeatureLock",[e("FormFieldLabel",{attrs:{label:"Embed As"}}),e("div",{staticClass:"options-wrapper"},t._l(t.embedOptions,(function(i){return e("CodeArea",{key:i.id,class:{"q-my-md":"JavaScript"===i.label},attrs:{value:t.embedOption===i.label,label:i.label,description:i.description,code:i.code},on:{click:function(e){t.embedOption=i.label}}})})),1)],1)],1)},Kt=[],Yt=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"code-area"},on:{click:function(e){return t.$emit("click")}}},[e("CheckboxField",{attrs:{"is-readonly":"",value:t.value,label:t.label,description:t.description}}),t.value?e("div",{staticStyle:{"margin-left":"36px"}},[e("div",{staticClass:"code-container"},[e("BaseScrollbar",{staticClass:"q-pa-sm",attrs:{height:"120px"}},[t._v(" "+t._s(t.code)+" ")])],1),e("BaseButton",{staticClass:"q-mt-md",attrs:{label:"Copy Code"}})],1):t._e()],1)},Zt=[],Xt={name:"CodeArea",components:{CheckboxField:pt["a"]},props:{value:{type:Boolean,default:!1},label:{type:String,required:!0},description:{type:String,required:!0},code:{type:String,required:!0}}},te=Xt,ee=(i("64d9"),Object(b["a"])(te,Yt,Zt,!1,null,"ee5c12b2",null)),ie=ee.exports,ae={name:"EmbedOptions",components:{FormSection:W["a"],FormFieldLabel:It["a"],CodeArea:ie},props:{isActive:{type:Boolean,default:!1},mode:{type:String,default:"NEW"}},data(){return{embedOption:"",embedOptions:[{id:this.$nano.id(),label:"iFrame",description:"Use this code to embed the portal as an iFrame on a web page",code:'<iframe id="3pWg9ovmk2-TKzm8brzSA" title="Leave Request" onload="window.parent.scrollTo(0,0)" allowtransparency="true" allowfullscreen="true" src="www.ezofis.com/portal/amazon/3pWg9ovmk2-TKzm8brzSA" frameborder="0" style="min-width:840px;height:auto;border:none"></iframe>'},{id:this.$nano.id(),label:"JavaScript",description:"Use this code to embed the portal as a page element and not as an external resource",code:'<script type="text/javascript" src="www.ezofis.com/portal/amazon/3pWg9ovmk2TKzm8brzSA"/>'},{id:this.$nano.id(),label:"Button",description:"Use this code to open the portal as a popup on a button click",code:'<script src="www.ezofis.com/portal/amazon/3pWg9ovmk2-TKzm8brzSA" type="text/javascript">portalsAppFeedbackButton({ portalId: "6177b2e16b145458aa39781a", buttonText: "Feedback", buttonTextColor: "#FFFFFF", buttonBackground: "#11c4e0", verticalAlligment: "middle", horizontalAlligment: "right", width: 500,height: 400}); />'}]}}},se=ae,oe=(i("913d"),Object(b["a"])(se,Vt,Kt,!1,null,"792d50da",null)),ne=oe.exports,re={name:"PortalPublish",components:{ActionBar:H,ValidationObserver:R["a"],PublishOptions:Pt,ShareOptions:Jt,EmbedOptions:ne},props:{portalSettings:{type:Object,required:!0}},data(){return{mode:"NEW",tab:"PUBLISH",tabs:[{id:this.$nano.id(),label:"publish",value:"PUBLISH",isShow:!0},{id:this.$nano.id(),label:"share",value:"SHARE",isShow:!1},{id:this.$nano.id(),label:"embed",value:"EMBED",isShow:!1}],publishOption:"",publishSchedule:"",unpublishSchedule:"",emailToInternalUsers:[],emailToExternalUsers:[]}},computed:{checkFeature(){let t=location.origin;return"http://localhost:8080"===t||"https://demo.ezofis.com"===t||"http://52.172.32.88"===t},filterTabs(){return this.tabs.filter(t=>t.isShow)}},watch:{tab(){this.$refs[this.tab].$el.scrollIntoView({behavior:"smooth"})},portalSettings:{immediate:!0,deep:!0,handler(){const t=Object(rt["a"])(this.portalSettings);this.publishOption=t.publish.publishOption,this.publishSchedule=t.publish.publishSchedule,this.unpublishSchedule=t.publish.unpublishSchedule}}},methods:{saveSettings(){const t=Object(rt["a"])(this.portalSettings);t.publish.publishOption=this.publishOption,t.publish.publishSchedule=this.publishSchedule,t.publish.unpublishSchedule=this.unpublishSchedule,this.$emit("update",t)}}},le=re,ue=Object(b["a"])(le,yt,wt,!1,null,"d60106ec",null),ce=ue.exports,pe={name:"PortalBuilderWrapper",components:{ItemBuilder:o["a"],Tabs:n["a"],QuickHelp:r["a"],PortalSettings:vt,PortalPublish:ce,PortalBuilder:U},props:{portalId:{type:String,default:""}},data(){return{quickHelp:!1,tab:"SETTINGS",tabs:[{id:this.$nano.id(),label:"Builder",value:"BUILDER",description:"Create custom portals"},{id:this.$nano.id(),label:"Settings",value:"SETTINGS",description:"Customize and manage your portal settings"},{id:this.$nano.id(),label:"Publish",value:"PUBLISH",description:"Publish and deploy your portal in action"}],portal:{uid:this.$nano.id(),settings:{general:{name:"Portal - "+this.$day.newDateTime(),description:"",workflow:0,superuser:[]},specific:{authentication:{loginType:"",formId:0,usernameField:"",passwordField:"",firstnameField:"",socialLogin:[],passwordTypes:"OTP",notification:!1}},publish:{publishOption:"DRAFT",publishSchedule:"",unpublishSchedule:""}},isDeleted:!1},workflowList:[],userList:[],watchPortalSave:null,masterFormList:[]}},computed:{_tab(){return Object(l["a"])(Object(u["a"])(this.tab))},_description(){let t=this.tabs.filter(t=>t.value===this.tab);return t[0].description}},watch:{portalId:{immediate:!0,handler(){localStorage.setItem("tId",this.$store.state.session.tenantId),this.portalId?(this.mode="EDIT",this.getPortal(),localStorage.setItem("portalId",this.portalId)):localStorage.setItem("portalId",0)}}},created(){this.getUsers(),this.getWorkflows(),this.getMasterForms()},methods:{showQuickHelp(){this.quickHelp=!0},closeBuilder(){this.$router.back()},updateSettings(t){this.portal.settings=t,this.tab="BUILDER"},checkPortalSave(){localStorage.getItem("portalSavedSuccessfully")&&("true"===localStorage.getItem("portalSavedSuccessfully")?(this.portalId?this.$alert.success(this.portal.settings.general.name+" updated"):this.$alert.success(this.portal.settings.general.name+" created"),this.closeBuilder()):this.$alert.error("Error in save portal"),this.$store.commit("hideLoadingBar"),localStorage.removeItem("portalSavedSuccessfully"),clearInterval(this.watchPortalSave))},async getUsers(){this.userList=[];const{error:t,payload:e}=await it["s"].getUserList();t?this.$alert.error("Error fetching users"):e&&e.map(t=>{this.userList.push({id:this.$nano.id(),label:t.value,value:String(t.id)})})},async getWorkflows(){this.workflowList=[];const{error:t,payload:e}=await it["t"].getWorkflows({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"flowstatus",condition:"IS_EQUALS_TO",value:"PUBLISHED",dataType:""}],groupCondition:""}],itemsPerPage:0,currentPage:0,hasSecurity:!1});t?this.$alert.error("Error fetching workflows"):e&&e.data.length&&e.data[0].value.forEach(t=>{this.workflowList.push({id:this.$nano.id(),label:t.name,value:t.id})})},async getMasterForms(){const{error:t,payload:e}=await it["g"].getForms({mode:"BROWSE",sortBy:{criteria:"",order:"DESC"},groupBy:"",filterBy:[{filters:[{criteria:"type",condition:"IS_EQUALS_TO",value:"MASTER",dataType:""},{criteria:"publishOption",condition:"IS_EQUALS_TO",value:"PUBLISHED",dataType:""}],groupCondition:""}],itemsPerPage:500,currentPage:1,hasSecurity:!1});if(t)return void this.$alert.error("Error fetching master form list");this.masterFormList=[];const{data:i}=e;i.length&&(this.masterFormList=i[0].value.map(t=>({id:this.$nano.id(),label:t.name,value:t.id})))},async createPortal(){this.$store.commit("showLoadingBar");let t={name:this.portal.settings.general.name,description:this.portal.settings.general.description,workflowId:this.portal.settings.general.workflow,superUser:this.portal.settings.general.superuser.toString(),settingsJson:JSON.stringify(this.portal.settings.specific)};if(this.portalId){const{error:e}=await it["m"].updatePortal(this.portalId,t);if(e)return"error updating portal"!==e?this.$alert.warning(e):this.$alert.error(e),void this.$store.commit("hideLoadingBar");let i=location.origin;"https://demo.ezofis.com"===i||"http://52.172.32.88"===i?(localStorage.setItem("savePortal",!0),this.watchPortalSave=setInterval(()=>this.checkPortalSave(),5e3)):(this.$alert.success(this.portal.settings.general.name+" updated"),this.closeBuilder())}else{const{payload:e,error:i}=await it["m"].createPortal(t);if(i)return"error creating portal"!==i?this.$alert.warning(i):this.$alert.error(i),void this.$store.commit("hideLoadingBar");let a=location.origin;"https://demo.ezofis.com"===a||"http://52.172.32.88"===a?(localStorage.setItem("portalId",e.id),localStorage.setItem("savePortal",!0),this.watchPortalSave=setInterval(()=>this.checkPortalSave(),5e3)):(this.$alert.success(this.portal.settings.general.name+" portal created"),this.closeBuilder())}},async getPortal(){this.$store.commit("showLoadingBar");const{payload:t,error:e}=await it["m"].getPortal(this.portalId);this.$store.commit("hideLoadingBar"),e?this.$alert.error(e):t&&(console.log(t.settingsJson),this.portal.settings.general.name=t.name,this.portal.settings.general.description=t.description,this.portal.settings.general.workflow=t.workflowId,this.portal.settings.general.superuser=t.superUser?t.superUser.split(","):[],this.portal.settings.specific=t.settingsJson?JSON.parse(t.settingsJson):{authentication:{loginType:"",formId:0,usernameField:"",passwordField:"",firstnameField:"",socialLogin:[],passwordTypes:"OTP",notification:!1}},this.portal.settings.specific.authentication.passwordTypes||(this.portal.settings.specific.authentication.passwordTypes="OTP"),this.portal.settings.specific.authentication.notification||(this.portal.settings.specific.authentication.notification=!1))}}},de=pe,he=(i("ed69"),Object(b["a"])(de,a,s,!1,null,"16b1b6b2",null));e["default"]=he.exports},b495:function(t,e,i){},b962:function(t,e,i){"use strict";i("f33d")},c018:function(t,e,i){"use strict";i("7410")},c49c:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"state-wrapper"}},[e("div",{staticClass:"slow-up-down",attrs:{id:"illustration"}},[e("div",{attrs:{id:"shape-1"}}),e("div",{attrs:{id:"shape-2"}}),e("div",{attrs:{id:"shape-3"}},[e("BaseIcon",{staticClass:"icon",attrs:{name:t.icon,size:"80px"}})],1)]),e("div",{staticClass:"title-1"},[t._v(" "+t._s(t.title)+" ")]),e("div",{staticClass:"description"},[t._v(" "+t._s(t.description)+" ")]),t.action?e("BaseButton",{staticClass:"q-mt-lg",attrs:{icon:t.actionIcon,label:t.action},on:{click:function(e){return t.$emit("action")}}}):t._e()],1)},s=[],o={name:"StateWrapper",props:{icon:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},action:{type:String,default:""},actionIcon:{type:String,default:""}}},n=o,r=(i("2948"),i("2877")),l=Object(r["a"])(n,a,s,!1,null,"ba5412d8",null);e["a"]=l.exports},d564:function(t,e,i){},db37:function(t,e,i){},e95e:function(t,e,i){"use strict";i("db37")},ec84:function(t,e,i){},ed69:function(t,e,i){"use strict";i("b495")},f055:function(t,e,i){t.exports=i.p+"img/qrcodec.a61de5ad.png"},f108:function(t,e,i){},f33d:function(t,e,i){}}]);
//# sourceMappingURL=portal-builder.3968657e.js.map